var SJ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Sje=SJ((nPe,e4)=>{function QL(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var t4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ec(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _S={exports:{}},Nx={},SS={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L9;function kJ(){if(L9)return Cn;L9=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function v(U,R,z){this.props=U,this.context=R,this.refs=y,this.updater=z||g}v.prototype.isReactComponent={},v.prototype.setState=function(U,R){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,R,"setState")},v.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=v.prototype;function k(U,R,z){this.props=U,this.context=R,this.refs=y,this.updater=z||g}var b=k.prototype=new T;b.constructor=k,x(b,v.prototype),b.isPureReactComponent=!0;var C=Array.isArray,E=Object.prototype.hasOwnProperty,j={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(U,R,z){var G,X={},ne=null,q=null;if(R!=null)for(G in R.ref!==void 0&&(q=R.ref),R.key!==void 0&&(ne=""+R.key),R)E.call(R,G)&&!P.hasOwnProperty(G)&&(X[G]=R[G]);var se=arguments.length-2;if(se===1)X.children=z;else if(1<se){for(var ue=Array(se),me=0;me<se;me++)ue[me]=arguments[me+2];X.children=ue}if(U&&U.defaultProps)for(G in se=U.defaultProps,se)X[G]===void 0&&(X[G]=se[G]);return{$$typeof:e,type:U,key:ne,ref:q,props:X,_owner:j.current}}function M(U,R){return{$$typeof:e,type:U.type,key:R,ref:U.ref,props:U.props,_owner:U._owner}}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function B(U){var R={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(z){return R[z]})}var V=/\/+/g;function ee(U,R){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):R.toString(36)}function ae(U,R,z,G,X){var ne=typeof U;(ne==="undefined"||ne==="boolean")&&(U=null);var q=!1;if(U===null)q=!0;else switch(ne){case"string":case"number":q=!0;break;case"object":switch(U.$$typeof){case e:case t:q=!0}}if(q)return q=U,X=X(q),U=G===""?"."+ee(q,0):G,C(X)?(z="",U!=null&&(z=U.replace(V,"$&/")+"/"),ae(X,R,z,"",function(me){return me})):X!=null&&(F(X)&&(X=M(X,z+(!X.key||q&&q.key===X.key?"":(""+X.key).replace(V,"$&/")+"/")+U)),R.push(X)),1;if(q=0,G=G===""?".":G+":",C(U))for(var se=0;se<U.length;se++){ne=U[se];var ue=G+ee(ne,se);q+=ae(ne,R,z,ue,X)}else if(ue=h(U),typeof ue=="function")for(U=ue.call(U),se=0;!(ne=U.next()).done;)ne=ne.value,ue=G+ee(ne,se++),q+=ae(ne,R,z,ue,X);else if(ne==="object")throw R=String(U),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return q}function Z(U,R,z){if(U==null)return U;var G=[],X=0;return ae(U,G,"","",function(ne){return R.call(z,ne,X++)}),G}function te(U){if(U._status===-1){var R=U._result;R=R(),R.then(function(z){(U._status===0||U._status===-1)&&(U._status=1,U._result=z)},function(z){(U._status===0||U._status===-1)&&(U._status=2,U._result=z)}),U._status===-1&&(U._status=0,U._result=R)}if(U._status===1)return U._result.default;throw U._result}var L={current:null},K={transition:null},I={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:K,ReactCurrentOwner:j};function H(){throw Error("act(...) is not supported in production builds of React.")}return Cn.Children={map:Z,forEach:function(U,R,z){Z(U,function(){R.apply(this,arguments)},z)},count:function(U){var R=0;return Z(U,function(){R++}),R},toArray:function(U){return Z(U,function(R){return R})||[]},only:function(U){if(!F(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Cn.Component=v,Cn.Fragment=r,Cn.Profiler=s,Cn.PureComponent=k,Cn.StrictMode=n,Cn.Suspense=c,Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,Cn.act=H,Cn.cloneElement=function(U,R,z){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var G=x({},U.props),X=U.key,ne=U.ref,q=U._owner;if(R!=null){if(R.ref!==void 0&&(ne=R.ref,q=j.current),R.key!==void 0&&(X=""+R.key),U.type&&U.type.defaultProps)var se=U.type.defaultProps;for(ue in R)E.call(R,ue)&&!P.hasOwnProperty(ue)&&(G[ue]=R[ue]===void 0&&se!==void 0?se[ue]:R[ue])}var ue=arguments.length-2;if(ue===1)G.children=z;else if(1<ue){se=Array(ue);for(var me=0;me<ue;me++)se[me]=arguments[me+2];G.children=se}return{$$typeof:e,type:U.type,key:X,ref:ne,props:G,_owner:q}},Cn.createContext=function(U){return U={$$typeof:i,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Cn.createElement=A,Cn.createFactory=function(U){var R=A.bind(null,U);return R.type=U,R},Cn.createRef=function(){return{current:null}},Cn.forwardRef=function(U){return{$$typeof:o,render:U}},Cn.isValidElement=F,Cn.lazy=function(U){return{$$typeof:d,_payload:{_status:-1,_result:U},_init:te}},Cn.memo=function(U,R){return{$$typeof:u,type:U,compare:R===void 0?null:R}},Cn.startTransition=function(U){var R=K.transition;K.transition={};try{U()}finally{K.transition=R}},Cn.unstable_act=H,Cn.useCallback=function(U,R){return L.current.useCallback(U,R)},Cn.useContext=function(U){return L.current.useContext(U)},Cn.useDebugValue=function(){},Cn.useDeferredValue=function(U){return L.current.useDeferredValue(U)},Cn.useEffect=function(U,R){return L.current.useEffect(U,R)},Cn.useId=function(){return L.current.useId()},Cn.useImperativeHandle=function(U,R,z){return L.current.useImperativeHandle(U,R,z)},Cn.useInsertionEffect=function(U,R){return L.current.useInsertionEffect(U,R)},Cn.useLayoutEffect=function(U,R){return L.current.useLayoutEffect(U,R)},Cn.useMemo=function(U,R){return L.current.useMemo(U,R)},Cn.useReducer=function(U,R,z){return L.current.useReducer(U,R,z)},Cn.useRef=function(U){return L.current.useRef(U)},Cn.useState=function(U){return L.current.useState(U)},Cn.useSyncExternalStore=function(U,R,z){return L.current.useSyncExternalStore(U,R,z)},Cn.useTransition=function(){return L.current.useTransition()},Cn.version="18.3.1",Cn}var B9;function Gm(){return B9||(B9=1,SS.exports=kJ()),SS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $9;function TJ(){if($9)return Nx;$9=1;var e=Gm(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,c,u){var d,f={},h=null,g=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(g=c.ref);for(d in c)n.call(c,d)&&!a.hasOwnProperty(d)&&(f[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:t,type:o,key:h,ref:g,props:f,_owner:s.current}}return Nx.Fragment=r,Nx.jsx=i,Nx.jsxs=i,Nx}var z9;function CJ(){return z9||(z9=1,_S.exports=TJ()),_S.exports}var l=CJ(),_=Gm();const zs=Ec(_),ZL=QL({__proto__:null,default:zs},[_]);var $w={},kS={exports:{}},el={},TS={exports:{}},CS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U9;function NJ(){return U9||(U9=1,(function(e){function t(K,I){var H=K.length;K.push(I);e:for(;0<H;){var U=H-1>>>1,R=K[U];if(0<s(R,I))K[U]=I,K[H]=R,H=U;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var I=K[0],H=K.pop();if(H!==I){K[0]=H;e:for(var U=0,R=K.length,z=R>>>1;U<z;){var G=2*(U+1)-1,X=K[G],ne=G+1,q=K[ne];if(0>s(X,H))ne<R&&0>s(q,X)?(K[U]=q,K[ne]=H,U=ne):(K[U]=X,K[G]=H,U=G);else if(ne<R&&0>s(q,H))K[U]=q,K[ne]=H,U=ne;else break e}}return I}function s(K,I){var H=K.sortIndex-I.sortIndex;return H!==0?H:K.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,g=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=K)n(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=r(u)}}function C(K){if(y=!1,b(K),!x)if(r(c)!==null)x=!0,te(E);else{var I=r(u);I!==null&&L(C,I.startTime-K)}}function E(K,I){x=!1,y&&(y=!1,T(A),A=-1),g=!0;var H=h;try{for(b(I),f=r(c);f!==null&&(!(f.expirationTime>I)||K&&!B());){var U=f.callback;if(typeof U=="function"){f.callback=null,h=f.priorityLevel;var R=U(f.expirationTime<=I);I=e.unstable_now(),typeof R=="function"?f.callback=R:f===r(c)&&n(c),b(I)}else n(c);f=r(c)}if(f!==null)var z=!0;else{var G=r(u);G!==null&&L(C,G.startTime-I),z=!1}return z}finally{f=null,h=H,g=!1}}var j=!1,P=null,A=-1,M=5,F=-1;function B(){return!(e.unstable_now()-F<M)}function V(){if(P!==null){var K=e.unstable_now();F=K;var I=!0;try{I=P(!0,K)}finally{I?ee():(j=!1,P=null)}}else j=!1}var ee;if(typeof k=="function")ee=function(){k(V)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Z=ae.port2;ae.port1.onmessage=V,ee=function(){Z.postMessage(null)}}else ee=function(){v(V,0)};function te(K){P=K,j||(j=!0,ee())}function L(K,I){A=v(function(){K(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,te(E))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(K){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var H=h;h=I;try{return K()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,I){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var H=h;h=K;try{return I()}finally{h=H}},e.unstable_scheduleCallback=function(K,I,H){var U=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?U+H:U):H=U,K){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=H+R,K={id:d++,callback:I,priorityLevel:K,startTime:H,expirationTime:R,sortIndex:-1},H>U?(K.sortIndex=H,t(u,K),r(c)===null&&K===r(u)&&(y?(T(A),A=-1):y=!0,L(C,H-U))):(K.sortIndex=R,t(c,K),x||g||(x=!0,te(E))),K},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(K){var I=h;return function(){var H=h;h=I;try{return K.apply(this,arguments)}finally{h=H}}}})(CS)),CS}var W9;function WT(){return W9||(W9=1,TS.exports=NJ()),TS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H9;function EJ(){if(H9)return el;H9=1;var e=Gm(),t=WT();function r(m){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+m,N=1;N<arguments.length;N++)p+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(m,p){i(m,p),i(m+"Capture",p)}function i(m,p){for(s[m]=p,m=0;m<p.length;m++)n.add(p[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function h(m){return c.call(f,m)?!0:c.call(d,m)?!1:u.test(m)?f[m]=!0:(d[m]=!0,!1)}function g(m,p,N,O){if(N!==null&&N.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return O?!1:N!==null?!N.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function x(m,p,N,O){if(p===null||typeof p>"u"||g(m,p,N,O))return!0;if(O)return!1;if(N!==null)switch(N.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function y(m,p,N,O,Y,re,xe){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=O,this.attributeNamespace=Y,this.mustUseProperty=N,this.propertyName=m,this.type=p,this.sanitizeURL=re,this.removeEmptyString=xe}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){v[m]=new y(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var p=m[0];v[p]=new y(p,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){v[m]=new y(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){v[m]=new y(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){v[m]=new y(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){v[m]=new y(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){v[m]=new y(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){v[m]=new y(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){v[m]=new y(m,5,!1,m.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function k(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!0,!0)});function b(m,p,N,O){var Y=v.hasOwnProperty(p)?v[p]:null;(Y!==null?Y.type!==0:O||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(x(p,N,Y,O)&&(N=null),O||Y===null?h(p)&&(N===null?m.removeAttribute(p):m.setAttribute(p,""+N)):Y.mustUseProperty?m[Y.propertyName]=N===null?Y.type===3?!1:"":N:(p=Y.attributeName,O=Y.attributeNamespace,N===null?m.removeAttribute(p):(Y=Y.type,N=Y===3||Y===4&&N===!0?"":""+N,O?m.setAttributeNS(O,p,N):m.setAttribute(p,N))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),j=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),K=Symbol.iterator;function I(m){return m===null||typeof m!="object"?null:(m=K&&m[K]||m["@@iterator"],typeof m=="function"?m:null)}var H=Object.assign,U;function R(m){if(U===void 0)try{throw Error()}catch(N){var p=N.stack.trim().match(/\n( *(at )?)/);U=p&&p[1]||""}return`
`+U+m}var z=!1;function G(m,p){if(!m||z)return"";z=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(bt){var O=bt}Reflect.construct(m,[],p)}else{try{p.call()}catch(bt){O=bt}m.call(p.prototype)}else{try{throw Error()}catch(bt){O=bt}m()}}catch(bt){if(bt&&O&&typeof bt.stack=="string"){for(var Y=bt.stack.split(`
`),re=O.stack.split(`
`),xe=Y.length-1,Oe=re.length-1;1<=xe&&0<=Oe&&Y[xe]!==re[Oe];)Oe--;for(;1<=xe&&0<=Oe;xe--,Oe--)if(Y[xe]!==re[Oe]){if(xe!==1||Oe!==1)do if(xe--,Oe--,0>Oe||Y[xe]!==re[Oe]){var Ge=`
`+Y[xe].replace(" at new "," at ");return m.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",m.displayName)),Ge}while(1<=xe&&0<=Oe);break}}}finally{z=!1,Error.prepareStackTrace=N}return(m=m?m.displayName||m.name:"")?R(m):""}function X(m){switch(m.tag){case 5:return R(m.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return m=G(m.type,!1),m;case 11:return m=G(m.type.render,!1),m;case 1:return m=G(m.type,!0),m;default:return""}}function ne(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case P:return"Fragment";case j:return"Portal";case M:return"Profiler";case A:return"StrictMode";case ee:return"Suspense";case ae:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case B:return(m.displayName||"Context")+".Consumer";case F:return(m._context.displayName||"Context")+".Provider";case V:var p=m.render;return m=m.displayName,m||(m=p.displayName||p.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Z:return p=m.displayName||null,p!==null?p:ne(m.type)||"Memo";case te:p=m._payload,m=m._init;try{return ne(m(p))}catch{}}return null}function q(m){var p=m.type;switch(m.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=p.render,m=m.displayName||m.name||"",p.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(p);case 8:return p===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function se(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function ue(m){var p=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function me(m){var p=ue(m)?"checked":"value",N=Object.getOwnPropertyDescriptor(m.constructor.prototype,p),O=""+m[p];if(!m.hasOwnProperty(p)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var Y=N.get,re=N.set;return Object.defineProperty(m,p,{configurable:!0,get:function(){return Y.call(this)},set:function(xe){O=""+xe,re.call(this,xe)}}),Object.defineProperty(m,p,{enumerable:N.enumerable}),{getValue:function(){return O},setValue:function(xe){O=""+xe},stopTracking:function(){m._valueTracker=null,delete m[p]}}}}function Ne(m){m._valueTracker||(m._valueTracker=me(m))}function ce(m){if(!m)return!1;var p=m._valueTracker;if(!p)return!0;var N=p.getValue(),O="";return m&&(O=ue(m)?m.checked?"true":"false":m.value),m=O,m!==N?(p.setValue(m),!0):!1}function Ue(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function pe(m,p){var N=p.checked;return H({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??m._wrapperState.initialChecked})}function je(m,p){var N=p.defaultValue==null?"":p.defaultValue,O=p.checked!=null?p.checked:p.defaultChecked;N=se(p.value!=null?p.value:N),m._wrapperState={initialChecked:O,initialValue:N,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function We(m,p){p=p.checked,p!=null&&b(m,"checked",p,!1)}function Me(m,p){We(m,p);var N=se(p.value),O=p.type;if(N!=null)O==="number"?(N===0&&m.value===""||m.value!=N)&&(m.value=""+N):m.value!==""+N&&(m.value=""+N);else if(O==="submit"||O==="reset"){m.removeAttribute("value");return}p.hasOwnProperty("value")?$e(m,p.type,N):p.hasOwnProperty("defaultValue")&&$e(m,p.type,se(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(m.defaultChecked=!!p.defaultChecked)}function Nt(m,p,N){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var O=p.type;if(!(O!=="submit"&&O!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+m._wrapperState.initialValue,N||p===m.value||(m.value=p),m.defaultValue=p}N=m.name,N!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,N!==""&&(m.name=N)}function $e(m,p,N){(p!=="number"||Ue(m.ownerDocument)!==m)&&(N==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+N&&(m.defaultValue=""+N))}var St=Array.isArray;function At(m,p,N,O){if(m=m.options,p){p={};for(var Y=0;Y<N.length;Y++)p["$"+N[Y]]=!0;for(N=0;N<m.length;N++)Y=p.hasOwnProperty("$"+m[N].value),m[N].selected!==Y&&(m[N].selected=Y),Y&&O&&(m[N].defaultSelected=!0)}else{for(N=""+se(N),p=null,Y=0;Y<m.length;Y++){if(m[Y].value===N){m[Y].selected=!0,O&&(m[Y].defaultSelected=!0);return}p!==null||m[Y].disabled||(p=m[Y])}p!==null&&(p.selected=!0)}}function Bt(m,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return H({},p,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Gt(m,p){var N=p.value;if(N==null){if(N=p.children,p=p.defaultValue,N!=null){if(p!=null)throw Error(r(92));if(St(N)){if(1<N.length)throw Error(r(93));N=N[0]}p=N}p==null&&(p=""),N=p}m._wrapperState={initialValue:se(N)}}function or(m,p){var N=se(p.value),O=se(p.defaultValue);N!=null&&(N=""+N,N!==m.value&&(m.value=N),p.defaultValue==null&&m.defaultValue!==N&&(m.defaultValue=N)),O!=null&&(m.defaultValue=""+O)}function yr(m){var p=m.textContent;p===m._wrapperState.initialValue&&p!==""&&p!==null&&(m.value=p)}function it(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(m,p){return m==null||m==="http://www.w3.org/1999/xhtml"?it(p):m==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var at,pt=(function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,N,O,Y){MSApp.execUnsafeLocalFunction(function(){return m(p,N,O,Y)})}:m})(function(m,p){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=p;else{for(at=at||document.createElement("div"),at.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=at.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;p.firstChild;)m.appendChild(p.firstChild)}});function nt(m,p){if(p){var N=m.firstChild;if(N&&N===m.lastChild&&N.nodeType===3){N.nodeValue=p;return}}m.textContent=p}var kt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wt=["Webkit","ms","Moz","O"];Object.keys(kt).forEach(function(m){Wt.forEach(function(p){p=p+m.charAt(0).toUpperCase()+m.substring(1),kt[p]=kt[m]})});function rr(m,p,N){return p==null||typeof p=="boolean"||p===""?"":N||typeof p!="number"||p===0||kt.hasOwnProperty(m)&&kt[m]?(""+p).trim():p+"px"}function ur(m,p){m=m.style;for(var N in p)if(p.hasOwnProperty(N)){var O=N.indexOf("--")===0,Y=rr(N,p[N],O);N==="float"&&(N="cssFloat"),O?m.setProperty(N,Y):m[N]=Y}}var Nr=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wr(m,p){if(p){if(Nr[m]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,m));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function ft(m,p){if(m.indexOf("-")===-1)return typeof p.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=null;function Ot(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var he=null,Ee=null,Ae=null;function Fe(m){if(m=Th(m)){if(typeof he!="function")throw Error(r(280));var p=m.stateNode;p&&(p=Da(p),he(m.stateNode,m.type,p))}}function xt(m){Ee?Ae?Ae.push(m):Ae=[m]:Ee=m}function $t(){if(Ee){var m=Ee,p=Ae;if(Ae=Ee=null,Fe(m),p)for(m=0;m<p.length;m++)Fe(p[m])}}function lr(m,p){return m(p)}function Ke(){}var ct=!1;function yt(m,p,N){if(ct)return m(p,N);ct=!0;try{return lr(m,p,N)}finally{ct=!1,(Ee!==null||Ae!==null)&&(Ke(),$t())}}function Jt(m,p){var N=m.stateNode;if(N===null)return null;var O=Da(N);if(O===null)return null;N=O[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(m=m.type,O=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!O;break e;default:m=!1}if(m)return null;if(N&&typeof N!="function")throw Error(r(231,p,typeof N));return N}var cr=!1;if(o)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){cr=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{cr=!1}function Hr(m,p,N,O,Y,re,xe,Oe,Ge){var bt=Array.prototype.slice.call(arguments,3);try{p.apply(N,bt)}catch(Kt){this.onError(Kt)}}var He=!1,Ct=null,le=!1,ve=null,ge={onError:function(m){He=!0,Ct=m}};function we(m,p,N,O,Y,re,xe,Oe,Ge){He=!1,Ct=null,Hr.apply(ge,arguments)}function Te(m,p,N,O,Y,re,xe,Oe,Ge){if(we.apply(this,arguments),He){if(He){var bt=Ct;He=!1,Ct=null}else throw Error(r(198));le||(le=!0,ve=bt)}}function Se(m){var p=m,N=m;if(m.alternate)for(;p.return;)p=p.return;else{m=p;do p=m,(p.flags&4098)!==0&&(N=p.return),m=p.return;while(m)}return p.tag===3?N:null}function Ze(m){if(m.tag===13){var p=m.memoizedState;if(p===null&&(m=m.alternate,m!==null&&(p=m.memoizedState)),p!==null)return p.dehydrated}return null}function ut(m){if(Se(m)!==m)throw Error(r(188))}function Je(m){var p=m.alternate;if(!p){if(p=Se(m),p===null)throw Error(r(188));return p!==m?null:m}for(var N=m,O=p;;){var Y=N.return;if(Y===null)break;var re=Y.alternate;if(re===null){if(O=Y.return,O!==null){N=O;continue}break}if(Y.child===re.child){for(re=Y.child;re;){if(re===N)return ut(Y),m;if(re===O)return ut(Y),p;re=re.sibling}throw Error(r(188))}if(N.return!==O.return)N=Y,O=re;else{for(var xe=!1,Oe=Y.child;Oe;){if(Oe===N){xe=!0,N=Y,O=re;break}if(Oe===O){xe=!0,O=Y,N=re;break}Oe=Oe.sibling}if(!xe){for(Oe=re.child;Oe;){if(Oe===N){xe=!0,N=re,O=Y;break}if(Oe===O){xe=!0,O=re,N=Y;break}Oe=Oe.sibling}if(!xe)throw Error(r(189))}}if(N.alternate!==O)throw Error(r(190))}if(N.tag!==3)throw Error(r(188));return N.stateNode.current===N?m:p}function de(m){return m=Je(m),m!==null?ye(m):null}function ye(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var p=ye(m);if(p!==null)return p;m=m.sibling}return null}var Pe=t.unstable_scheduleCallback,Be=t.unstable_cancelCallback,Ye=t.unstable_shouldYield,ot=t.unstable_requestPaint,wt=t.unstable_now,er=t.unstable_getCurrentPriorityLevel,Ft=t.unstable_ImmediatePriority,Yt=t.unstable_UserBlockingPriority,_r=t.unstable_NormalPriority,Ir=t.unstable_LowPriority,ar=t.unstable_IdlePriority,Ur=null,Fr=null;function $r(m){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Ur,m,void 0,(m.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:Jn,Is=Math.log,sn=Math.LN2;function Jn(m){return m>>>=0,m===0?32:31-(Is(m)/sn|0)|0}var Hn=64,os=4194304;function hn(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function ke(m,p){var N=m.pendingLanes;if(N===0)return 0;var O=0,Y=m.suspendedLanes,re=m.pingedLanes,xe=N&268435455;if(xe!==0){var Oe=xe&~Y;Oe!==0?O=hn(Oe):(re&=xe,re!==0&&(O=hn(re)))}else xe=N&~Y,xe!==0?O=hn(xe):re!==0&&(O=hn(re));if(O===0)return 0;if(p!==0&&p!==O&&(p&Y)===0&&(Y=O&-O,re=p&-p,Y>=re||Y===16&&(re&4194240)!==0))return p;if((O&4)!==0&&(O|=N&16),p=m.entangledLanes,p!==0)for(m=m.entanglements,p&=O;0<p;)N=31-Tr(p),Y=1<<N,O|=m[N],p&=~Y;return O}function jt(m,p){switch(m){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dr(m,p){for(var N=m.suspendedLanes,O=m.pingedLanes,Y=m.expirationTimes,re=m.pendingLanes;0<re;){var xe=31-Tr(re),Oe=1<<xe,Ge=Y[xe];Ge===-1?((Oe&N)===0||(Oe&O)!==0)&&(Y[xe]=jt(Oe,p)):Ge<=p&&(m.expiredLanes|=Oe),re&=~Oe}}function Jr(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Gn(){var m=Hn;return Hn<<=1,(Hn&4194240)===0&&(Hn=64),m}function En(m){for(var p=[],N=0;31>N;N++)p.push(m);return p}function ls(m,p,N){m.pendingLanes|=p,p!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,p=31-Tr(p),m[p]=N}function Vs(m,p){var N=m.pendingLanes&~p;m.pendingLanes=p,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=p,m.mutableReadLanes&=p,m.entangledLanes&=p,p=m.entanglements;var O=m.eventTimes;for(m=m.expirationTimes;0<N;){var Y=31-Tr(N),re=1<<Y;p[Y]=0,O[Y]=-1,m[Y]=-1,N&=~re}}function li(m,p){var N=m.entangledLanes|=p;for(m=m.entanglements;N;){var O=31-Tr(N),Y=1<<O;Y&p|m[O]&p&&(m[O]|=p),N&=~Y}}var un=0;function gl(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var Ie,Pt,De,qe,Lt,gt=!1,xr=[],Et=null,Gr=null,Pn=null,ze=new Map,hr=new Map,nr=[],gs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pn(m,p){switch(m){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":ze.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":hr.delete(p.pointerId)}}function an(m,p,N,O,Y,re){return m===null||m.nativeEvent!==re?(m={blockedOn:p,domEventName:N,eventSystemFlags:O,nativeEvent:re,targetContainers:[Y]},p!==null&&(p=Th(p),p!==null&&Pt(p)),m):(m.eventSystemFlags|=O,p=m.targetContainers,Y!==null&&p.indexOf(Y)===-1&&p.push(Y),m)}function xn(m,p,N,O,Y){switch(p){case"focusin":return Et=an(Et,m,p,N,O,Y),!0;case"dragenter":return Gr=an(Gr,m,p,N,O,Y),!0;case"mouseover":return Pn=an(Pn,m,p,N,O,Y),!0;case"pointerover":var re=Y.pointerId;return ze.set(re,an(ze.get(re)||null,m,p,N,O,Y)),!0;case"gotpointercapture":return re=Y.pointerId,hr.set(re,an(hr.get(re)||null,m,p,N,O,Y)),!0}return!1}function _n(m){var p=bu(m.target);if(p!==null){var N=Se(p);if(N!==null){if(p=N.tag,p===13){if(p=Ze(N),p!==null){m.blockedOn=p,Lt(m.priority,function(){De(N)});return}}else if(p===3&&N.stateNode.current.memoizedState.isDehydrated){m.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Hl(m){if(m.blockedOn!==null)return!1;for(var p=m.targetContainers;0<p.length;){var N=lg(m.domEventName,m.eventSystemFlags,p[0],m.nativeEvent);if(N===null){N=m.nativeEvent;var O=new N.constructor(N.type,N);Tt=O,N.target.dispatchEvent(O),Tt=null}else return p=Th(N),p!==null&&Pt(p),m.blockedOn=N,!1;p.shift()}return!0}function Ei(m,p,N){Hl(m)&&N.delete(p)}function dh(){gt=!1,Et!==null&&Hl(Et)&&(Et=null),Gr!==null&&Hl(Gr)&&(Gr=null),Pn!==null&&Hl(Pn)&&(Pn=null),ze.forEach(Ei),hr.forEach(Ei)}function fu(m,p){m.blockedOn===p&&(m.blockedOn=null,gt||(gt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dh)))}function Zi(m){function p(Y){return fu(Y,m)}if(0<xr.length){fu(xr[0],m);for(var N=1;N<xr.length;N++){var O=xr[N];O.blockedOn===m&&(O.blockedOn=null)}}for(Et!==null&&fu(Et,m),Gr!==null&&fu(Gr,m),Pn!==null&&fu(Pn,m),ze.forEach(p),hr.forEach(p),N=0;N<nr.length;N++)O=nr[N],O.blockedOn===m&&(O.blockedOn=null);for(;0<nr.length&&(N=nr[0],N.blockedOn===null);)_n(N),N.blockedOn===null&&nr.shift()}var P0=C.ReactCurrentBatchConfig,og=!0;function pl(m,p,N,O){var Y=un,re=P0.transition;P0.transition=null;try{un=1,M0(m,p,N,O)}finally{un=Y,P0.transition=re}}function Fc(m,p,N,O){var Y=un,re=P0.transition;P0.transition=null;try{un=4,M0(m,p,N,O)}finally{un=Y,P0.transition=re}}function M0(m,p,N,O){if(og){var Y=lg(m,p,N,O);if(Y===null)kg(m,p,O,F0,N),pn(m,O);else if(xn(Y,m,p,N,O))O.stopPropagation();else if(pn(m,O),p&4&&-1<gs.indexOf(m)){for(;Y!==null;){var re=Th(Y);if(re!==null&&Ie(re),re=lg(m,p,N,O),re===null&&kg(m,p,O,F0,N),re===Y)break;Y=re}Y!==null&&O.stopPropagation()}else kg(m,p,O,null,N)}}var F0=null;function lg(m,p,N,O){if(F0=null,m=Ot(O),m=bu(m),m!==null)if(p=Se(m),p===null)m=null;else if(N=p.tag,N===13){if(m=Ze(p),m!==null)return m;m=null}else if(N===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;m=null}else p!==m&&(m=null);return F0=m,null}function H2(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(er()){case Ft:return 1;case Yt:return 4;case _r:case Ir:return 16;case ar:return 536870912;default:return 16}default:return 16}}var Ga=null,hu=null,Dc=null;function fh(){if(Dc)return Dc;var m,p=hu,N=p.length,O,Y="value"in Ga?Ga.value:Ga.textContent,re=Y.length;for(m=0;m<N&&p[m]===Y[m];m++);var xe=N-m;for(O=1;O<=xe&&p[N-O]===Y[re-O];O++);return Dc=Y.slice(m,1<O?1-O:void 0)}function od(m){var p=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&p===13&&(m=13)):m=p,m===10&&(m=13),32<=m||m===13?m:0}function Ai(){return!0}function bo(){return!1}function xa(m){function p(N,O,Y,re,xe){this._reactName=N,this._targetInst=Y,this.type=O,this.nativeEvent=re,this.target=xe,this.currentTarget=null;for(var Oe in m)m.hasOwnProperty(Oe)&&(N=m[Oe],this[Oe]=N?N(re):re[Oe]);return this.isDefaultPrevented=(re.defaultPrevented!=null?re.defaultPrevented:re.returnValue===!1)?Ai:bo,this.isPropagationStopped=bo,this}return H(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),p}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=xa(eo),yl=H({},eo,{view:0,detail:0}),G2=xa(yl),hh,mh,Va,ji=H({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cd,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Va&&(Va&&m.type==="mousemove"?(hh=m.screenX-Va.screenX,mh=m.screenY-Va.screenY):mh=hh=0,Va=m),hh)},movementY:function(m){return"movementY"in m?m.movementY:mh}}),ps=xa(ji),gh=H({},ji,{dataTransfer:0}),vl=xa(gh),V2=H({},yl,{relatedTarget:0}),cg=xa(V2),L1=H({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),B1=xa(L1),q2=H({},eo,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),ug=xa(q2),K2=H({},eo,{data:0}),ld=xa(K2),$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K3(m){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(m):(m=dg[m])?!!p[m]:!1}function cd(){return K3}var fg=H({},yl,{key:function(m){if(m.key){var p=$1[m.key]||m.key;if(p!=="Unidentified")return p}return m.type==="keypress"?(m=od(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?q3[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cd,charCode:function(m){return m.type==="keypress"?od(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?od(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Y2=xa(fg),X2=H({},ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ud=xa(X2),J2=H({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cd}),hg=xa(J2),mg=H({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),D0=xa(mg),z1=H({},ji,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),U1=xa(z1),Q2=[9,13,27,32],ph=o&&"CompositionEvent"in window,dd=null;o&&"documentMode"in document&&(dd=document.documentMode);var O0=o&&"TextEvent"in window&&!dd,_o=o&&(!ph||dd&&8<dd&&11>=dd),mu=" ",gg=!1;function W1(m,p){switch(m){case"keyup":return Q2.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wl(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var So=!1;function H1(m,p){switch(m){case"compositionend":return wl(p);case"keypress":return p.which!==32?null:(gg=!0,mu);case"textInput":return m=p.data,m===mu&&gg?null:m;default:return null}}function Z2(m,p){if(So)return m==="compositionend"||!ph&&W1(m,p)?(m=fh(),Dc=hu=Ga=null,So=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return _o&&p.locale!=="ko"?null:p.data;default:return null}}var Oc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(m){var p=m&&m.nodeName&&m.nodeName.toLowerCase();return p==="input"?!!Oc[m.type]:p==="textarea"}function xh(m,p,N,O){xt(O),p=Tg(p,"onChange"),0<p.length&&(N=new xl("onChange","change",null,N,O),m.push({event:N,listeners:p}))}var R0=null,gu=null;function ew(m){tx(m,0)}function pu(m){var p=va(m);if(ce(p))return m}function qo(m,p){if(m==="change")return p}var I0=!1;if(o){var xu;if(o){var Ko="oninput"in document;if(!Ko){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),Ko=typeof pg.oninput=="function"}xu=Ko}else xu=!1;I0=xu&&(!document.documentMode||9<document.documentMode)}function fd(){R0&&(R0.detachEvent("onpropertychange",G1),gu=R0=null)}function G1(m){if(m.propertyName==="value"&&pu(gu)){var p=[];xh(p,gu,m,Ot(m)),yt(ew,p)}}function V1(m,p,N){m==="focusin"?(fd(),R0=p,gu=N,R0.attachEvent("onpropertychange",G1)):m==="focusout"&&fd()}function Ns(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return pu(gu)}function xg(m,p){if(m==="click")return pu(p)}function q1(m,p){if(m==="input"||m==="change")return pu(p)}function K1(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var to=typeof Object.is=="function"?Object.is:K1;function hd(m,p){if(to(m,p))return!0;if(typeof m!="object"||m===null||typeof p!="object"||p===null)return!1;var N=Object.keys(m),O=Object.keys(p);if(N.length!==O.length)return!1;for(O=0;O<N.length;O++){var Y=N[O];if(!c.call(p,Y)||!to(m[Y],p[Y]))return!1}return!0}function yu(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function bs(m,p){var N=yu(m);m=0;for(var O;N;){if(N.nodeType===3){if(O=m+N.textContent.length,m<=p&&O>=p)return{node:N,offset:p-m};m=O}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=yu(N)}}function ra(m,p){return m&&p?m===p?!0:m&&m.nodeType===3?!1:p&&p.nodeType===3?ra(m,p.parentNode):"contains"in m?m.contains(p):m.compareDocumentPosition?!!(m.compareDocumentPosition(p)&16):!1:!1}function ya(){for(var m=window,p=Ue();p instanceof m.HTMLIFrameElement;){try{var N=typeof p.contentWindow.location.href=="string"}catch{N=!1}if(N)m=p.contentWindow;else break;p=Ue(m.document)}return p}function L0(m){var p=m&&m.nodeName&&m.nodeName.toLowerCase();return p&&(p==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||p==="textarea"||m.contentEditable==="true")}function yh(m){var p=ya(),N=m.focusedElem,O=m.selectionRange;if(p!==N&&N&&N.ownerDocument&&ra(N.ownerDocument.documentElement,N)){if(O!==null&&L0(N)){if(p=O.start,m=O.end,m===void 0&&(m=p),"selectionStart"in N)N.selectionStart=p,N.selectionEnd=Math.min(m,N.value.length);else if(m=(p=N.ownerDocument||document)&&p.defaultView||window,m.getSelection){m=m.getSelection();var Y=N.textContent.length,re=Math.min(O.start,Y);O=O.end===void 0?re:Math.min(O.end,Y),!m.extend&&re>O&&(Y=O,O=re,re=Y),Y=bs(N,re);var xe=bs(N,O);Y&&xe&&(m.rangeCount!==1||m.anchorNode!==Y.node||m.anchorOffset!==Y.offset||m.focusNode!==xe.node||m.focusOffset!==xe.offset)&&(p=p.createRange(),p.setStart(Y.node,Y.offset),m.removeAllRanges(),re>O?(m.addRange(p),m.extend(xe.node,xe.offset)):(p.setEnd(xe.node,xe.offset),m.addRange(p)))}}for(p=[],m=N;m=m.parentNode;)m.nodeType===1&&p.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<p.length;N++)m=p[N],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var vh=o&&"documentMode"in document&&11>=document.documentMode,B0=null,Fa=null,md=null,wh=!1;function yg(m,p,N){var O=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;wh||B0==null||B0!==Ue(O)||(O=B0,"selectionStart"in O&&L0(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),md&&hd(md,O)||(md=O,O=Tg(Fa,"onSelect"),0<O.length&&(p=new xl("onSelect","select",null,p,N),m.push({event:p,listeners:O}),p.target=B0)))}function ko(m,p){var N={};return N[m.toLowerCase()]=p.toLowerCase(),N["Webkit"+m]="webkit"+p,N["Moz"+m]="moz"+p,N}var qa={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionend:ko("Transition","TransitionEnd")},gd={},vg={};o&&(vg=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function $0(m){if(gd[m])return gd[m];if(!qa[m])return m;var p=qa[m],N;for(N in p)if(p.hasOwnProperty(N)&&N in vg)return gd[m]=p[N];return m}var Y1=$0("animationend"),X1=$0("animationiteration"),J1=$0("animationstart"),Q1=$0("transitionend"),Z1=new Map,ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ic(m,p){Z1.set(m,p),a(p,[m])}for(var wg=0;wg<ex.length;wg++){var pd=ex[wg],tw=pd.toLowerCase(),bg=pd[0].toUpperCase()+pd.slice(1);Ic(tw,"on"+bg)}Ic(Y1,"onAnimationEnd"),Ic(X1,"onAnimationIteration"),Ic(J1,"onAnimationStart"),Ic("dblclick","onDoubleClick"),Ic("focusin","onFocus"),Ic("focusout","onBlur"),Ic(Q1,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rw=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function _g(m,p,N){var O=m.type||"unknown-event";m.currentTarget=N,Te(O,p,void 0,m),m.currentTarget=null}function tx(m,p){p=(p&4)!==0;for(var N=0;N<m.length;N++){var O=m[N],Y=O.event;O=O.listeners;e:{var re=void 0;if(p)for(var xe=O.length-1;0<=xe;xe--){var Oe=O[xe],Ge=Oe.instance,bt=Oe.currentTarget;if(Oe=Oe.listener,Ge!==re&&Y.isPropagationStopped())break e;_g(Y,Oe,bt),re=Ge}else for(xe=0;xe<O.length;xe++){if(Oe=O[xe],Ge=Oe.instance,bt=Oe.currentTarget,Oe=Oe.listener,Ge!==re&&Y.isPropagationStopped())break e;_g(Y,Oe,bt),re=Ge}}}if(le)throw m=ve,le=!1,ve=null,m}function cs(m,p){var N=p[Ng];N===void 0&&(N=p[Ng]=new Set);var O=m+"__bubble";N.has(O)||(rx(p,m,2,!1),N.add(O))}function Sg(m,p,N){var O=0;p&&(O|=4),rx(N,m,O,p)}var bh="_reactListening"+Math.random().toString(36).slice(2);function xd(m){if(!m[bh]){m[bh]=!0,n.forEach(function(N){N!=="selectionchange"&&(rw.has(N)||Sg(N,!1,m),Sg(N,!0,m))});var p=m.nodeType===9?m:m.ownerDocument;p===null||p[bh]||(p[bh]=!0,Sg("selectionchange",!1,p))}}function rx(m,p,N,O){switch(H2(p)){case 1:var Y=pl;break;case 4:Y=Fc;break;default:Y=M0}N=Y.bind(null,p,N,m),Y=void 0,!cr||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(Y=!0),O?Y!==void 0?m.addEventListener(p,N,{capture:!0,passive:Y}):m.addEventListener(p,N,!0):Y!==void 0?m.addEventListener(p,N,{passive:Y}):m.addEventListener(p,N,!1)}function kg(m,p,N,O,Y){var re=O;if((p&1)===0&&(p&2)===0&&O!==null)e:for(;;){if(O===null)return;var xe=O.tag;if(xe===3||xe===4){var Oe=O.stateNode.containerInfo;if(Oe===Y||Oe.nodeType===8&&Oe.parentNode===Y)break;if(xe===4)for(xe=O.return;xe!==null;){var Ge=xe.tag;if((Ge===3||Ge===4)&&(Ge=xe.stateNode.containerInfo,Ge===Y||Ge.nodeType===8&&Ge.parentNode===Y))return;xe=xe.return}for(;Oe!==null;){if(xe=bu(Oe),xe===null)return;if(Ge=xe.tag,Ge===5||Ge===6){O=re=xe;continue e}Oe=Oe.parentNode}}O=O.return}yt(function(){var bt=re,Kt=Ot(N),Qt=[];e:{var Vt=Z1.get(m);if(Vt!==void 0){var Cr=xl,Or=m;switch(m){case"keypress":if(od(N)===0)break e;case"keydown":case"keyup":Cr=Y2;break;case"focusin":Or="focus",Cr=cg;break;case"focusout":Or="blur",Cr=cg;break;case"beforeblur":case"afterblur":Cr=cg;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Cr=ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Cr=vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Cr=hg;break;case Y1:case X1:case J1:Cr=B1;break;case Q1:Cr=D0;break;case"scroll":Cr=G2;break;case"wheel":Cr=U1;break;case"copy":case"cut":case"paste":Cr=ug;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Cr=ud}var Lr=(p&4)!==0,Sa=!Lr&&m==="scroll",lt=Lr?Vt!==null?Vt+"Capture":null:Vt;Lr=[];for(var et=bt,mt;et!==null;){mt=et;var ir=mt.stateNode;if(mt.tag===5&&ir!==null&&(mt=ir,lt!==null&&(ir=Jt(et,lt),ir!=null&&Lr.push(z0(et,ir,mt)))),Sa)break;et=et.return}0<Lr.length&&(Vt=new Cr(Vt,Or,null,N,Kt),Qt.push({event:Vt,listeners:Lr}))}}if((p&7)===0){e:{if(Vt=m==="mouseover"||m==="pointerover",Cr=m==="mouseout"||m==="pointerout",Vt&&N!==Tt&&(Or=N.relatedTarget||N.fromElement)&&(bu(Or)||Or[Vl]))break e;if((Cr||Vt)&&(Vt=Kt.window===Kt?Kt:(Vt=Kt.ownerDocument)?Vt.defaultView||Vt.parentWindow:window,Cr?(Or=N.relatedTarget||N.toElement,Cr=bt,Or=Or?bu(Or):null,Or!==null&&(Sa=Se(Or),Or!==Sa||Or.tag!==5&&Or.tag!==6)&&(Or=null)):(Cr=null,Or=bt),Cr!==Or)){if(Lr=ps,ir="onMouseLeave",lt="onMouseEnter",et="mouse",(m==="pointerout"||m==="pointerover")&&(Lr=ud,ir="onPointerLeave",lt="onPointerEnter",et="pointer"),Sa=Cr==null?Vt:va(Cr),mt=Or==null?Vt:va(Or),Vt=new Lr(ir,et+"leave",Cr,N,Kt),Vt.target=Sa,Vt.relatedTarget=mt,ir=null,bu(Kt)===bt&&(Lr=new Lr(lt,et+"enter",Or,N,Kt),Lr.target=mt,Lr.relatedTarget=Sa,ir=Lr),Sa=ir,Cr&&Or)t:{for(Lr=Cr,lt=Or,et=0,mt=Lr;mt;mt=yd(mt))et++;for(mt=0,ir=lt;ir;ir=yd(ir))mt++;for(;0<et-mt;)Lr=yd(Lr),et--;for(;0<mt-et;)lt=yd(lt),mt--;for(;et--;){if(Lr===lt||lt!==null&&Lr===lt.alternate)break t;Lr=yd(Lr),lt=yd(lt)}Lr=null}else Lr=null;Cr!==null&&nw(Qt,Vt,Cr,Lr,!1),Or!==null&&Sa!==null&&nw(Qt,Sa,Or,Lr,!0)}}e:{if(Vt=bt?va(bt):window,Cr=Vt.nodeName&&Vt.nodeName.toLowerCase(),Cr==="select"||Cr==="input"&&Vt.type==="file")var Br=qo;else if(Rc(Vt))if(I0)Br=q1;else{Br=Ns;var Vr=V1}else(Cr=Vt.nodeName)&&Cr.toLowerCase()==="input"&&(Vt.type==="checkbox"||Vt.type==="radio")&&(Br=xg);if(Br&&(Br=Br(m,bt))){xh(Qt,Br,N,Kt);break e}Vr&&Vr(m,Vt,bt),m==="focusout"&&(Vr=Vt._wrapperState)&&Vr.controlled&&Vt.type==="number"&&$e(Vt,"number",Vt.value)}switch(Vr=bt?va(bt):window,m){case"focusin":(Rc(Vr)||Vr.contentEditable==="true")&&(B0=Vr,Fa=bt,md=null);break;case"focusout":md=Fa=B0=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,yg(Qt,N,Kt);break;case"selectionchange":if(vh)break;case"keydown":case"keyup":yg(Qt,N,Kt)}var qr;if(ph)e:{switch(m){case"compositionstart":var on="onCompositionStart";break e;case"compositionend":on="onCompositionEnd";break e;case"compositionupdate":on="onCompositionUpdate";break e}on=void 0}else So?W1(m,N)&&(on="onCompositionEnd"):m==="keydown"&&N.keyCode===229&&(on="onCompositionStart");on&&(_o&&N.locale!=="ko"&&(So||on!=="onCompositionStart"?on==="onCompositionEnd"&&So&&(qr=fh()):(Ga=Kt,hu="value"in Ga?Ga.value:Ga.textContent,So=!0)),Vr=Tg(bt,on),0<Vr.length&&(on=new ld(on,m,null,N,Kt),Qt.push({event:on,listeners:Vr}),qr?on.data=qr:(qr=wl(N),qr!==null&&(on.data=qr)))),(qr=O0?H1(m,N):Z2(m,N))&&(bt=Tg(bt,"onBeforeInput"),0<bt.length&&(Kt=new ld("onBeforeInput","beforeinput",null,N,Kt),Qt.push({event:Kt,listeners:bt}),Kt.data=qr))}tx(Qt,p)})}function z0(m,p,N){return{instance:m,listener:p,currentTarget:N}}function Tg(m,p){for(var N=p+"Capture",O=[];m!==null;){var Y=m,re=Y.stateNode;Y.tag===5&&re!==null&&(Y=re,re=Jt(m,N),re!=null&&O.unshift(z0(m,re,Y)),re=Jt(m,p),re!=null&&O.push(z0(m,re,Y))),m=m.return}return O}function yd(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function nw(m,p,N,O,Y){for(var re=p._reactName,xe=[];N!==null&&N!==O;){var Oe=N,Ge=Oe.alternate,bt=Oe.stateNode;if(Ge!==null&&Ge===O)break;Oe.tag===5&&bt!==null&&(Oe=bt,Y?(Ge=Jt(N,re),Ge!=null&&xe.unshift(z0(N,Ge,Oe))):Y||(Ge=Jt(N,re),Ge!=null&&xe.push(z0(N,Ge,Oe)))),N=N.return}xe.length!==0&&m.push({event:p,listeners:xe})}var Y3=/\r\n?/g,sw=/\u0000|\uFFFD/g;function nx(m){return(typeof m=="string"?m:""+m).replace(Y3,`
`).replace(sw,"")}function _h(m,p,N){if(p=nx(p),nx(m)!==p&&N)throw Error(r(425))}function vd(){}var sx=null,ax=null;function ix(m,p){return m==="textarea"||m==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var To=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,Sh=typeof Promise=="function"?Promise:void 0,aw=typeof queueMicrotask=="function"?queueMicrotask:typeof Sh<"u"?function(m){return Sh.resolve(null).then(m).catch(iw)}:To;function iw(m){setTimeout(function(){throw m})}function Cg(m,p){var N=p,O=0;do{var Y=N.nextSibling;if(m.removeChild(N),Y&&Y.nodeType===8)if(N=Y.data,N==="/$"){if(O===0){m.removeChild(Y),Zi(p);return}O--}else N!=="$"&&N!=="$?"&&N!=="$!"||O++;N=Y}while(N);Zi(p)}function Gl(m){for(;m!=null;m=m.nextSibling){var p=m.nodeType;if(p===1||p===3)break;if(p===8){if(p=m.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return m}function wd(m){m=m.previousSibling;for(var p=0;m;){if(m.nodeType===8){var N=m.data;if(N==="$"||N==="$!"||N==="$?"){if(p===0)return m;p--}else N==="/$"&&p++}m=m.previousSibling}return null}var wu=Math.random().toString(36).slice(2),Yo="__reactFiber$"+wu,kh="__reactProps$"+wu,Vl="__reactContainer$"+wu,Ng="__reactEvents$"+wu,ow="__reactListeners$"+wu,lw="__reactHandles$"+wu;function bu(m){var p=m[Yo];if(p)return p;for(var N=m.parentNode;N;){if(p=N[Vl]||N[Yo]){if(N=p.alternate,p.child!==null||N!==null&&N.child!==null)for(m=wd(m);m!==null;){if(N=m[Yo])return N;m=wd(m)}return p}m=N,N=m.parentNode}return null}function Th(m){return m=m[Yo]||m[Vl],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function va(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(r(33))}function Da(m){return m[kh]||null}var Eg=[],bd=-1;function Lc(m){return{current:m}}function us(m){0>bd||(m.current=Eg[bd],Eg[bd]=null,bd--)}function Qn(m,p){bd++,Eg[bd]=m.current,m.current=p}var ql={},Ka=Lc(ql),ci=Lc(!1),_u=ql;function _d(m,p){var N=m.type.contextTypes;if(!N)return ql;var O=m.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===p)return O.__reactInternalMemoizedMaskedChildContext;var Y={},re;for(re in N)Y[re]=p[re];return O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=p,m.__reactInternalMemoizedMaskedChildContext=Y),Y}function ui(m){return m=m.childContextTypes,m!=null}function U0(){us(ci),us(Ka)}function lx(m,p,N){if(Ka.current!==ql)throw Error(r(168));Qn(Ka,p),Qn(ci,N)}function Ag(m,p,N){var O=m.stateNode;if(p=p.childContextTypes,typeof O.getChildContext!="function")return N;O=O.getChildContext();for(var Y in O)if(!(Y in p))throw Error(r(108,q(m)||"Unknown",Y));return H({},N,O)}function Sd(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||ql,_u=Ka.current,Qn(Ka,m),Qn(ci,ci.current),!0}function cw(m,p,N){var O=m.stateNode;if(!O)throw Error(r(169));N?(m=Ag(m,p,_u),O.__reactInternalMemoizedMergedChildContext=m,us(ci),us(Ka),Qn(Ka,m)):us(ci),Qn(ci,N)}var Kl=null,W0=!1,jg=!1;function Ch(m){Kl===null?Kl=[m]:Kl.push(m)}function Bc(m){W0=!0,Ch(m)}function Su(){if(!jg&&Kl!==null){jg=!0;var m=0,p=un;try{var N=Kl;for(un=1;m<N.length;m++){var O=N[m];do O=O(!0);while(O!==null)}Kl=null,W0=!1}catch(Y){throw Kl!==null&&(Kl=Kl.slice(m+1)),Pe(Ft,Su),Y}finally{un=p,jg=!1}}return null}var Pi=[],kd=0,ku=null,Tu=0,Mi=[],Fi=0,Cu=null,Co=1,_s="";function Td(m,p){Pi[kd++]=Tu,Pi[kd++]=ku,ku=m,Tu=p}function uw(m,p,N){Mi[Fi++]=Co,Mi[Fi++]=_s,Mi[Fi++]=Cu,Cu=m;var O=Co;m=_s;var Y=32-Tr(O)-1;O&=~(1<<Y),N+=1;var re=32-Tr(p)+Y;if(30<re){var xe=Y-Y%5;re=(O&(1<<xe)-1).toString(32),O>>=xe,Y-=xe,Co=1<<32-Tr(p)+Y|N<<Y|O,_s=re+m}else Co=1<<re|N<<Y|O,_s=m}function H0(m){m.return!==null&&(Td(m,1),uw(m,1,0))}function Oa(m){for(;m===ku;)ku=Pi[--kd],Pi[kd]=null,Tu=Pi[--kd],Pi[kd]=null;for(;m===Cu;)Cu=Mi[--Fi],Mi[Fi]=null,_s=Mi[--Fi],Mi[Fi]=null,Co=Mi[--Fi],Mi[Fi]=null}var No=null,vr=null,Vn=!1,Eo=null;function cx(m,p){var N=tc(5,null,null,0);N.elementType="DELETED",N.stateNode=p,N.return=m,p=m.deletions,p===null?(m.deletions=[N],m.flags|=16):p.push(N)}function dw(m,p){switch(m.tag){case 5:var N=m.type;return p=p.nodeType!==1||N.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(m.stateNode=p,No=m,vr=Gl(p.firstChild),!0):!1;case 6:return p=m.pendingProps===""||p.nodeType!==3?null:p,p!==null?(m.stateNode=p,No=m,vr=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(N=Cu!==null?{id:Co,overflow:_s}:null,m.memoizedState={dehydrated:p,treeContext:N,retryLane:1073741824},N=tc(18,null,null,0),N.stateNode=p,N.return=m,m.child=N,No=m,vr=null,!0):!1;default:return!1}}function Cd(m){return(m.mode&1)!==0&&(m.flags&128)===0}function G0(m){if(Vn){var p=vr;if(p){var N=p;if(!dw(m,p)){if(Cd(m))throw Error(r(418));p=Gl(N.nextSibling);var O=No;p&&dw(m,p)?cx(O,N):(m.flags=m.flags&-4097|2,Vn=!1,No=m)}}else{if(Cd(m))throw Error(r(418));m.flags=m.flags&-4097|2,Vn=!1,No=m}}}function Pg(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;No=m}function Nh(m){if(m!==No)return!1;if(!Vn)return Pg(m),Vn=!0,!1;var p;if((p=m.tag!==3)&&!(p=m.tag!==5)&&(p=m.type,p=p!=="head"&&p!=="body"&&!ix(m.type,m.memoizedProps)),p&&(p=vr)){if(Cd(m))throw ux(),Error(r(418));for(;p;)cx(m,p),p=Gl(p.nextSibling)}if(Pg(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));e:{for(m=m.nextSibling,p=0;m;){if(m.nodeType===8){var N=m.data;if(N==="/$"){if(p===0){vr=Gl(m.nextSibling);break e}p--}else N!=="$"&&N!=="$!"&&N!=="$?"||p++}m=m.nextSibling}vr=null}}else vr=No?Gl(m.stateNode.nextSibling):null;return!0}function ux(){for(var m=vr;m;)m=Gl(m.nextSibling)}function Nd(){vr=No=null,Vn=!1}function Eh(m){Eo===null?Eo=[m]:Eo.push(m)}var dx=C.ReactCurrentBatchConfig;function qs(m,p,N){if(m=N.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(r(309));var O=N.stateNode}if(!O)throw Error(r(147,m));var Y=O,re=""+m;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===re?p.ref:(p=function(xe){var Oe=Y.refs;xe===null?delete Oe[re]:Oe[re]=xe},p._stringRef=re,p)}if(typeof m!="string")throw Error(r(284));if(!N._owner)throw Error(r(290,m))}return m}function ro(m,p){throw m=Object.prototype.toString.call(p),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":m))}function bl(m){var p=m._init;return p(m._payload)}function Mg(m){function p(lt,et){if(m){var mt=lt.deletions;mt===null?(lt.deletions=[et],lt.flags|=16):mt.push(et)}}function N(lt,et){if(!m)return null;for(;et!==null;)p(lt,et),et=et.sibling;return null}function O(lt,et){for(lt=new Map;et!==null;)et.key!==null?lt.set(et.key,et):lt.set(et.index,et),et=et.sibling;return lt}function Y(lt,et){return lt=ff(lt,et),lt.index=0,lt.sibling=null,lt}function re(lt,et,mt){return lt.index=mt,m?(mt=lt.alternate,mt!==null?(mt=mt.index,mt<et?(lt.flags|=2,et):mt):(lt.flags|=2,et)):(lt.flags|=1048576,et)}function xe(lt){return m&&lt.alternate===null&&(lt.flags|=2),lt}function Oe(lt,et,mt,ir){return et===null||et.tag!==6?(et=pS(mt,lt.mode,ir),et.return=lt,et):(et=Y(et,mt),et.return=lt,et)}function Ge(lt,et,mt,ir){var Br=mt.type;return Br===P?Kt(lt,et,mt.props.children,ir,mt.key):et!==null&&(et.elementType===Br||typeof Br=="object"&&Br!==null&&Br.$$typeof===te&&bl(Br)===et.type)?(ir=Y(et,mt.props),ir.ref=qs(lt,et,mt),ir.return=lt,ir):(ir=Mw(mt.type,mt.key,mt.props,null,lt.mode,ir),ir.ref=qs(lt,et,mt),ir.return=lt,ir)}function bt(lt,et,mt,ir){return et===null||et.tag!==4||et.stateNode.containerInfo!==mt.containerInfo||et.stateNode.implementation!==mt.implementation?(et=xS(mt,lt.mode,ir),et.return=lt,et):(et=Y(et,mt.children||[]),et.return=lt,et)}function Kt(lt,et,mt,ir,Br){return et===null||et.tag!==7?(et=Bh(mt,lt.mode,ir,Br),et.return=lt,et):(et=Y(et,mt),et.return=lt,et)}function Qt(lt,et,mt){if(typeof et=="string"&&et!==""||typeof et=="number")return et=pS(""+et,lt.mode,mt),et.return=lt,et;if(typeof et=="object"&&et!==null){switch(et.$$typeof){case E:return mt=Mw(et.type,et.key,et.props,null,lt.mode,mt),mt.ref=qs(lt,null,et),mt.return=lt,mt;case j:return et=xS(et,lt.mode,mt),et.return=lt,et;case te:var ir=et._init;return Qt(lt,ir(et._payload),mt)}if(St(et)||I(et))return et=Bh(et,lt.mode,mt,null),et.return=lt,et;ro(lt,et)}return null}function Vt(lt,et,mt,ir){var Br=et!==null?et.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number")return Br!==null?null:Oe(lt,et,""+mt,ir);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case E:return mt.key===Br?Ge(lt,et,mt,ir):null;case j:return mt.key===Br?bt(lt,et,mt,ir):null;case te:return Br=mt._init,Vt(lt,et,Br(mt._payload),ir)}if(St(mt)||I(mt))return Br!==null?null:Kt(lt,et,mt,ir,null);ro(lt,mt)}return null}function Cr(lt,et,mt,ir,Br){if(typeof ir=="string"&&ir!==""||typeof ir=="number")return lt=lt.get(mt)||null,Oe(et,lt,""+ir,Br);if(typeof ir=="object"&&ir!==null){switch(ir.$$typeof){case E:return lt=lt.get(ir.key===null?mt:ir.key)||null,Ge(et,lt,ir,Br);case j:return lt=lt.get(ir.key===null?mt:ir.key)||null,bt(et,lt,ir,Br);case te:var Vr=ir._init;return Cr(lt,et,mt,Vr(ir._payload),Br)}if(St(ir)||I(ir))return lt=lt.get(mt)||null,Kt(et,lt,ir,Br,null);ro(et,ir)}return null}function Or(lt,et,mt,ir){for(var Br=null,Vr=null,qr=et,on=et=0,pi=null;qr!==null&&on<mt.length;on++){qr.index>on?(pi=qr,qr=null):pi=qr.sibling;var Bn=Vt(lt,qr,mt[on],ir);if(Bn===null){qr===null&&(qr=pi);break}m&&qr&&Bn.alternate===null&&p(lt,qr),et=re(Bn,et,on),Vr===null?Br=Bn:Vr.sibling=Bn,Vr=Bn,qr=pi}if(on===mt.length)return N(lt,qr),Vn&&Td(lt,on),Br;if(qr===null){for(;on<mt.length;on++)qr=Qt(lt,mt[on],ir),qr!==null&&(et=re(qr,et,on),Vr===null?Br=qr:Vr.sibling=qr,Vr=qr);return Vn&&Td(lt,on),Br}for(qr=O(lt,qr);on<mt.length;on++)pi=Cr(qr,lt,on,mt[on],ir),pi!==null&&(m&&pi.alternate!==null&&qr.delete(pi.key===null?on:pi.key),et=re(pi,et,on),Vr===null?Br=pi:Vr.sibling=pi,Vr=pi);return m&&qr.forEach(function(hf){return p(lt,hf)}),Vn&&Td(lt,on),Br}function Lr(lt,et,mt,ir){var Br=I(mt);if(typeof Br!="function")throw Error(r(150));if(mt=Br.call(mt),mt==null)throw Error(r(151));for(var Vr=Br=null,qr=et,on=et=0,pi=null,Bn=mt.next();qr!==null&&!Bn.done;on++,Bn=mt.next()){qr.index>on?(pi=qr,qr=null):pi=qr.sibling;var hf=Vt(lt,qr,Bn.value,ir);if(hf===null){qr===null&&(qr=pi);break}m&&qr&&hf.alternate===null&&p(lt,qr),et=re(hf,et,on),Vr===null?Br=hf:Vr.sibling=hf,Vr=hf,qr=pi}if(Bn.done)return N(lt,qr),Vn&&Td(lt,on),Br;if(qr===null){for(;!Bn.done;on++,Bn=mt.next())Bn=Qt(lt,Bn.value,ir),Bn!==null&&(et=re(Bn,et,on),Vr===null?Br=Bn:Vr.sibling=Bn,Vr=Bn);return Vn&&Td(lt,on),Br}for(qr=O(lt,qr);!Bn.done;on++,Bn=mt.next())Bn=Cr(qr,lt,on,Bn.value,ir),Bn!==null&&(m&&Bn.alternate!==null&&qr.delete(Bn.key===null?on:Bn.key),et=re(Bn,et,on),Vr===null?Br=Bn:Vr.sibling=Bn,Vr=Bn);return m&&qr.forEach(function(_J){return p(lt,_J)}),Vn&&Td(lt,on),Br}function Sa(lt,et,mt,ir){if(typeof mt=="object"&&mt!==null&&mt.type===P&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case E:e:{for(var Br=mt.key,Vr=et;Vr!==null;){if(Vr.key===Br){if(Br=mt.type,Br===P){if(Vr.tag===7){N(lt,Vr.sibling),et=Y(Vr,mt.props.children),et.return=lt,lt=et;break e}}else if(Vr.elementType===Br||typeof Br=="object"&&Br!==null&&Br.$$typeof===te&&bl(Br)===Vr.type){N(lt,Vr.sibling),et=Y(Vr,mt.props),et.ref=qs(lt,Vr,mt),et.return=lt,lt=et;break e}N(lt,Vr);break}else p(lt,Vr);Vr=Vr.sibling}mt.type===P?(et=Bh(mt.props.children,lt.mode,ir,mt.key),et.return=lt,lt=et):(ir=Mw(mt.type,mt.key,mt.props,null,lt.mode,ir),ir.ref=qs(lt,et,mt),ir.return=lt,lt=ir)}return xe(lt);case j:e:{for(Vr=mt.key;et!==null;){if(et.key===Vr)if(et.tag===4&&et.stateNode.containerInfo===mt.containerInfo&&et.stateNode.implementation===mt.implementation){N(lt,et.sibling),et=Y(et,mt.children||[]),et.return=lt,lt=et;break e}else{N(lt,et);break}else p(lt,et);et=et.sibling}et=xS(mt,lt.mode,ir),et.return=lt,lt=et}return xe(lt);case te:return Vr=mt._init,Sa(lt,et,Vr(mt._payload),ir)}if(St(mt))return Or(lt,et,mt,ir);if(I(mt))return Lr(lt,et,mt,ir);ro(lt,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"?(mt=""+mt,et!==null&&et.tag===6?(N(lt,et.sibling),et=Y(et,mt),et.return=lt,lt=et):(N(lt,et),et=pS(mt,lt.mode,ir),et.return=lt,lt=et),xe(lt)):N(lt,et)}return Sa}var Ed=Mg(!0),Xo=Mg(!1),Ah=Lc(null),Ao=null,V0=null,Fg=null;function Dg(){Fg=V0=Ao=null}function Og(m){var p=Ah.current;us(Ah),m._currentValue=p}function Rg(m,p,N){for(;m!==null;){var O=m.alternate;if((m.childLanes&p)!==p?(m.childLanes|=p,O!==null&&(O.childLanes|=p)):O!==null&&(O.childLanes&p)!==p&&(O.childLanes|=p),m===N)break;m=m.return}}function $c(m,p){Ao=m,Fg=V0=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&p)!==0&&(oe=!0),m.firstContext=null)}function Di(m){var p=m._currentValue;if(Fg!==m)if(m={context:m,memoizedValue:p,next:null},V0===null){if(Ao===null)throw Error(r(308));V0=m,Ao.dependencies={lanes:0,firstContext:m}}else V0=V0.next=m;return p}var Yl=null;function q0(m){Yl===null?Yl=[m]:Yl.push(m)}function jh(m,p,N,O){var Y=p.interleaved;return Y===null?(N.next=N,q0(p)):(N.next=Y.next,Y.next=N),p.interleaved=N,jo(m,O)}function jo(m,p){m.lanes|=p;var N=m.alternate;for(N!==null&&(N.lanes|=p),N=m,m=m.return;m!==null;)m.childLanes|=p,N=m.alternate,N!==null&&(N.childLanes|=p),N=m,m=m.return;return N.tag===3?N.stateNode:null}var Xl=!1;function Ph(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ig(m,p){m=m.updateQueue,p.updateQueue===m&&(p.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Jl(m,p){return{eventTime:m,lane:p,tag:0,payload:null,callback:null,next:null}}function Ql(m,p,N){var O=m.updateQueue;if(O===null)return null;if(O=O.shared,(On&2)!==0){var Y=O.pending;return Y===null?p.next=p:(p.next=Y.next,Y.next=p),O.pending=p,jo(m,N)}return Y=O.interleaved,Y===null?(p.next=p,q0(O)):(p.next=Y.next,Y.next=p),O.interleaved=p,jo(m,N)}function Lg(m,p,N){if(p=p.updateQueue,p!==null&&(p=p.shared,(N&4194240)!==0)){var O=p.lanes;O&=m.pendingLanes,N|=O,p.lanes=N,li(m,N)}}function Mh(m,p){var N=m.updateQueue,O=m.alternate;if(O!==null&&(O=O.updateQueue,N===O)){var Y=null,re=null;if(N=N.firstBaseUpdate,N!==null){do{var xe={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};re===null?Y=re=xe:re=re.next=xe,N=N.next}while(N!==null);re===null?Y=re=p:re=re.next=p}else Y=re=p;N={baseState:O.baseState,firstBaseUpdate:Y,lastBaseUpdate:re,shared:O.shared,effects:O.effects},m.updateQueue=N;return}m=N.lastBaseUpdate,m===null?N.firstBaseUpdate=p:m.next=p,N.lastBaseUpdate=p}function K0(m,p,N,O){var Y=m.updateQueue;Xl=!1;var re=Y.firstBaseUpdate,xe=Y.lastBaseUpdate,Oe=Y.shared.pending;if(Oe!==null){Y.shared.pending=null;var Ge=Oe,bt=Ge.next;Ge.next=null,xe===null?re=bt:xe.next=bt,xe=Ge;var Kt=m.alternate;Kt!==null&&(Kt=Kt.updateQueue,Oe=Kt.lastBaseUpdate,Oe!==xe&&(Oe===null?Kt.firstBaseUpdate=bt:Oe.next=bt,Kt.lastBaseUpdate=Ge))}if(re!==null){var Qt=Y.baseState;xe=0,Kt=bt=Ge=null,Oe=re;do{var Vt=Oe.lane,Cr=Oe.eventTime;if((O&Vt)===Vt){Kt!==null&&(Kt=Kt.next={eventTime:Cr,lane:0,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null});e:{var Or=m,Lr=Oe;switch(Vt=p,Cr=N,Lr.tag){case 1:if(Or=Lr.payload,typeof Or=="function"){Qt=Or.call(Cr,Qt,Vt);break e}Qt=Or;break e;case 3:Or.flags=Or.flags&-65537|128;case 0:if(Or=Lr.payload,Vt=typeof Or=="function"?Or.call(Cr,Qt,Vt):Or,Vt==null)break e;Qt=H({},Qt,Vt);break e;case 2:Xl=!0}}Oe.callback!==null&&Oe.lane!==0&&(m.flags|=64,Vt=Y.effects,Vt===null?Y.effects=[Oe]:Vt.push(Oe))}else Cr={eventTime:Cr,lane:Vt,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Kt===null?(bt=Kt=Cr,Ge=Qt):Kt=Kt.next=Cr,xe|=Vt;if(Oe=Oe.next,Oe===null){if(Oe=Y.shared.pending,Oe===null)break;Vt=Oe,Oe=Vt.next,Vt.next=null,Y.lastBaseUpdate=Vt,Y.shared.pending=null}}while(!0);if(Kt===null&&(Ge=Qt),Y.baseState=Ge,Y.firstBaseUpdate=bt,Y.lastBaseUpdate=Kt,p=Y.shared.interleaved,p!==null){Y=p;do xe|=Y.lane,Y=Y.next;while(Y!==p)}else re===null&&(Y.shared.lanes=0);Oh|=xe,m.lanes=xe,m.memoizedState=Qt}}function Ls(m,p,N){if(m=p.effects,p.effects=null,m!==null)for(p=0;p<m.length;p++){var O=m[p],Y=O.callback;if(Y!==null){if(O.callback=null,O=N,typeof Y!="function")throw Error(r(191,Y));Y.call(O)}}}var mn={},Zn=Lc(mn),Ss=Lc(mn),Ks=Lc(mn);function wa(m){if(m===mn)throw Error(r(174));return m}function Nu(m,p){switch(Qn(Ks,p),Qn(Ss,m),Qn(Zn,mn),m=p.nodeType,m){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Ve(null,"");break;default:m=m===8?p.parentNode:p,p=m.namespaceURI||null,m=m.tagName,p=Ve(p,m)}us(Zn),Qn(Zn,p)}function ks(){us(Zn),us(Ss),us(Ks)}function Y0(m){wa(Ks.current);var p=wa(Zn.current),N=Ve(p,m.type);p!==N&&(Qn(Ss,m),Qn(Zn,N))}function zc(m){Ss.current===m&&(us(Zn),us(Ss))}var ds=Lc(0);function X0(m){for(var p=m;p!==null;){if(p.tag===13){var N=p.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break;for(;p.sibling===null;){if(p.return===null||p.return===m)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ad=[];function di(){for(var m=0;m<Ad.length;m++)Ad[m]._workInProgressVersionPrimary=null;Ad.length=0}var J0=C.ReactCurrentDispatcher,Fh=C.ReactCurrentBatchConfig,Oi=0,Yn=null,Bs=null,na=null,_l=!1,Eu=!1,Jo=0,Bg=0;function sa(){throw Error(r(321))}function Dh(m,p){if(p===null)return!1;for(var N=0;N<p.length&&N<m.length;N++)if(!to(m[N],p[N]))return!1;return!0}function Q0(m,p,N,O,Y,re){if(Oi=re,Yn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,J0.current=m===null||m.memoizedState===null?J3:Pu,m=N(O,Y),Eu){re=0;do{if(Eu=!1,Jo=0,25<=re)throw Error(r(301));re+=1,na=Bs=null,p.updateQueue=null,J0.current=Hg,m=N(O,Y)}while(Eu)}if(J0.current=rf,p=Bs!==null&&Bs.next!==null,Oi=0,na=Bs=Yn=null,_l=!1,p)throw Error(r(300));return m}function Z0(){var m=Jo!==0;return Jo=0,m}function xs(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return na===null?Yn.memoizedState=na=m:na=na.next=m,na}function ba(){if(Bs===null){var m=Yn.alternate;m=m!==null?m.memoizedState:null}else m=Bs.next;var p=na===null?Yn.memoizedState:na.next;if(p!==null)na=p,Bs=m;else{if(m===null)throw Error(r(310));Bs=m,m={memoizedState:Bs.memoizedState,baseState:Bs.baseState,baseQueue:Bs.baseQueue,queue:Bs.queue,next:null},na===null?Yn.memoizedState=na=m:na=na.next=m}return na}function fi(m,p){return typeof p=="function"?p(m):p}function hi(m){var p=ba(),N=p.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=m;var O=Bs,Y=O.baseQueue,re=N.pending;if(re!==null){if(Y!==null){var xe=Y.next;Y.next=re.next,re.next=xe}O.baseQueue=Y=re,N.pending=null}if(Y!==null){re=Y.next,O=O.baseState;var Oe=xe=null,Ge=null,bt=re;do{var Kt=bt.lane;if((Oi&Kt)===Kt)Ge!==null&&(Ge=Ge.next={lane:0,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),O=bt.hasEagerState?bt.eagerState:m(O,bt.action);else{var Qt={lane:Kt,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null};Ge===null?(Oe=Ge=Qt,xe=O):Ge=Ge.next=Qt,Yn.lanes|=Kt,Oh|=Kt}bt=bt.next}while(bt!==null&&bt!==re);Ge===null?xe=O:Ge.next=Oe,to(O,p.memoizedState)||(oe=!0),p.memoizedState=O,p.baseState=xe,p.baseQueue=Ge,N.lastRenderedState=O}if(m=N.interleaved,m!==null){Y=m;do re=Y.lane,Yn.lanes|=re,Oh|=re,Y=Y.next;while(Y!==m)}else Y===null&&(N.lanes=0);return[p.memoizedState,N.dispatch]}function $g(m){var p=ba(),N=p.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=m;var O=N.dispatch,Y=N.pending,re=p.memoizedState;if(Y!==null){N.pending=null;var xe=Y=Y.next;do re=m(re,xe.action),xe=xe.next;while(xe!==Y);to(re,p.memoizedState)||(oe=!0),p.memoizedState=re,p.baseQueue===null&&(p.baseState=re),N.lastRenderedState=re}return[re,O]}function zg(){}function Ug(m,p){var N=Yn,O=ba(),Y=p(),re=!to(O.memoizedState,Y);if(re&&(O.memoizedState=Y,oe=!0),O=O.queue,gx(fx.bind(null,N,O,m),[m]),O.getSnapshot!==p||re||na!==null&&na.memoizedState.tag&1){if(N.flags|=2048,ef(9,Uc.bind(null,N,O,Y,p),void 0,null),gi===null)throw Error(r(349));(Oi&30)!==0||fw(N,p,Y)}return Y}function fw(m,p,N){m.flags|=16384,m={getSnapshot:p,value:N},p=Yn.updateQueue,p===null?(p={lastEffect:null,stores:null},Yn.updateQueue=p,p.stores=[m]):(N=p.stores,N===null?p.stores=[m]:N.push(m))}function Uc(m,p,N,O){p.value=N,p.getSnapshot=O,hx(p)&&Wg(m)}function fx(m,p,N){return N(function(){hx(p)&&Wg(m)})}function hx(m){var p=m.getSnapshot;m=m.value;try{var N=p();return!to(m,N)}catch{return!0}}function Wg(m){var p=jo(m,1);p!==null&&Vc(p,m,1,-1)}function Au(m){var p=xs();return typeof m=="function"&&(m=m()),p.memoizedState=p.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:m},p.queue=m,m=m.dispatch=yw.bind(null,Yn,m),[p.memoizedState,m]}function ef(m,p,N,O){return m={tag:m,create:p,destroy:N,deps:O,next:null},p=Yn.updateQueue,p===null?(p={lastEffect:null,stores:null},Yn.updateQueue=p,p.lastEffect=m.next=m):(N=p.lastEffect,N===null?p.lastEffect=m.next=m:(O=N.next,N.next=m,m.next=O,p.lastEffect=m)),m}function mx(){return ba().memoizedState}function tf(m,p,N,O){var Y=xs();Yn.flags|=m,Y.memoizedState=ef(1|p,N,void 0,O===void 0?null:O)}function jd(m,p,N,O){var Y=ba();O=O===void 0?null:O;var re=void 0;if(Bs!==null){var xe=Bs.memoizedState;if(re=xe.destroy,O!==null&&Dh(O,xe.deps)){Y.memoizedState=ef(p,N,re,O);return}}Yn.flags|=m,Y.memoizedState=ef(1|p,N,re,O)}function hw(m,p){return tf(8390656,8,m,p)}function gx(m,p){return jd(2048,8,m,p)}function px(m,p){return jd(4,2,m,p)}function xx(m,p){return jd(4,4,m,p)}function ju(m,p){if(typeof p=="function")return m=m(),p(m),function(){p(null)};if(p!=null)return m=m(),p.current=m,function(){p.current=null}}function mw(m,p,N){return N=N!=null?N.concat([m]):null,jd(4,4,ju.bind(null,p,m),N)}function Wc(){}function yx(m,p){var N=ba();p=p===void 0?null:p;var O=N.memoizedState;return O!==null&&p!==null&&Dh(p,O[1])?O[0]:(N.memoizedState=[m,p],m)}function ys(m,p){var N=ba();p=p===void 0?null:p;var O=N.memoizedState;return O!==null&&p!==null&&Dh(p,O[1])?O[0]:(m=m(),N.memoizedState=[m,p],m)}function gw(m,p,N){return(Oi&21)===0?(m.baseState&&(m.baseState=!1,oe=!0),m.memoizedState=N):(to(N,p)||(N=Gn(),Yn.lanes|=N,Oh|=N,m.baseState=!0),p)}function pw(m,p){var N=un;un=N!==0&&4>N?N:4,m(!0);var O=Fh.transition;Fh.transition={};try{m(!1),p()}finally{un=N,Fh.transition=O}}function xw(){return ba().memoizedState}function X3(m,p,N){var O=uf(m);if(N={lane:O,action:N,hasEagerState:!1,eagerState:null,next:null},vx(m))vw(p,N);else if(N=jh(m,p,N,O),N!==null){var Y=Mo();Vc(N,m,O,Y),Po(N,p,O)}}function yw(m,p,N){var O=uf(m),Y={lane:O,action:N,hasEagerState:!1,eagerState:null,next:null};if(vx(m))vw(p,Y);else{var re=m.alternate;if(m.lanes===0&&(re===null||re.lanes===0)&&(re=p.lastRenderedReducer,re!==null))try{var xe=p.lastRenderedState,Oe=re(xe,N);if(Y.hasEagerState=!0,Y.eagerState=Oe,to(Oe,xe)){var Ge=p.interleaved;Ge===null?(Y.next=Y,q0(p)):(Y.next=Ge.next,Ge.next=Y),p.interleaved=Y;return}}catch{}finally{}N=jh(m,p,Y,O),N!==null&&(Y=Mo(),Vc(N,m,O,Y),Po(N,p,O))}}function vx(m){var p=m.alternate;return m===Yn||p!==null&&p===Yn}function vw(m,p){Eu=_l=!0;var N=m.pending;N===null?p.next=p:(p.next=N.next,N.next=p),m.pending=p}function Po(m,p,N){if((N&4194240)!==0){var O=p.lanes;O&=m.pendingLanes,N|=O,p.lanes=N,li(m,N)}}var rf={readContext:Di,useCallback:sa,useContext:sa,useEffect:sa,useImperativeHandle:sa,useInsertionEffect:sa,useLayoutEffect:sa,useMemo:sa,useReducer:sa,useRef:sa,useState:sa,useDebugValue:sa,useDeferredValue:sa,useTransition:sa,useMutableSource:sa,useSyncExternalStore:sa,useId:sa,unstable_isNewReconciler:!1},J3={readContext:Di,useCallback:function(m,p){return xs().memoizedState=[m,p===void 0?null:p],m},useContext:Di,useEffect:hw,useImperativeHandle:function(m,p,N){return N=N!=null?N.concat([m]):null,tf(4194308,4,ju.bind(null,p,m),N)},useLayoutEffect:function(m,p){return tf(4194308,4,m,p)},useInsertionEffect:function(m,p){return tf(4,2,m,p)},useMemo:function(m,p){var N=xs();return p=p===void 0?null:p,m=m(),N.memoizedState=[m,p],m},useReducer:function(m,p,N){var O=xs();return p=N!==void 0?N(p):p,O.memoizedState=O.baseState=p,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:p},O.queue=m,m=m.dispatch=X3.bind(null,Yn,m),[O.memoizedState,m]},useRef:function(m){var p=xs();return m={current:m},p.memoizedState=m},useState:Au,useDebugValue:Wc,useDeferredValue:function(m){return xs().memoizedState=m},useTransition:function(){var m=Au(!1),p=m[0];return m=pw.bind(null,m[1]),xs().memoizedState=m,[p,m]},useMutableSource:function(){},useSyncExternalStore:function(m,p,N){var O=Yn,Y=xs();if(Vn){if(N===void 0)throw Error(r(407));N=N()}else{if(N=p(),gi===null)throw Error(r(349));(Oi&30)!==0||fw(O,p,N)}Y.memoizedState=N;var re={value:N,getSnapshot:p};return Y.queue=re,hw(fx.bind(null,O,re,m),[m]),O.flags|=2048,ef(9,Uc.bind(null,O,re,N,p),void 0,null),N},useId:function(){var m=xs(),p=gi.identifierPrefix;if(Vn){var N=_s,O=Co;N=(O&~(1<<32-Tr(O)-1)).toString(32)+N,p=":"+p+"R"+N,N=Jo++,0<N&&(p+="H"+N.toString(32)),p+=":"}else N=Bg++,p=":"+p+"r"+N.toString(32)+":";return m.memoizedState=p},unstable_isNewReconciler:!1},Pu={readContext:Di,useCallback:yx,useContext:Di,useEffect:gx,useImperativeHandle:mw,useInsertionEffect:px,useLayoutEffect:xx,useMemo:ys,useReducer:hi,useRef:mx,useState:function(){return hi(fi)},useDebugValue:Wc,useDeferredValue:function(m){var p=ba();return gw(p,Bs.memoizedState,m)},useTransition:function(){var m=hi(fi)[0],p=ba().memoizedState;return[m,p]},useMutableSource:zg,useSyncExternalStore:Ug,useId:xw,unstable_isNewReconciler:!1},Hg={readContext:Di,useCallback:yx,useContext:Di,useEffect:gx,useImperativeHandle:mw,useInsertionEffect:px,useLayoutEffect:xx,useMemo:ys,useReducer:$g,useRef:mx,useState:function(){return $g(fi)},useDebugValue:Wc,useDeferredValue:function(m){var p=ba();return Bs===null?p.memoizedState=m:gw(p,Bs.memoizedState,m)},useTransition:function(){var m=$g(fi)[0],p=ba().memoizedState;return[m,p]},useMutableSource:zg,useSyncExternalStore:Ug,useId:xw,unstable_isNewReconciler:!1};function Ya(m,p){if(m&&m.defaultProps){p=H({},p),m=m.defaultProps;for(var N in m)p[N]===void 0&&(p[N]=m[N]);return p}return p}function nf(m,p,N,O){p=m.memoizedState,N=N(O,p),N=N==null?p:H({},p,N),m.memoizedState=N,m.lanes===0&&(m.updateQueue.baseState=N)}var sf={isMounted:function(m){return(m=m._reactInternals)?Se(m)===m:!1},enqueueSetState:function(m,p,N){m=m._reactInternals;var O=Mo(),Y=uf(m),re=Jl(O,Y);re.payload=p,N!=null&&(re.callback=N),p=Ql(m,re,Y),p!==null&&(Vc(p,m,Y,O),Lg(p,m,Y))},enqueueReplaceState:function(m,p,N){m=m._reactInternals;var O=Mo(),Y=uf(m),re=Jl(O,Y);re.tag=1,re.payload=p,N!=null&&(re.callback=N),p=Ql(m,re,Y),p!==null&&(Vc(p,m,Y,O),Lg(p,m,Y))},enqueueForceUpdate:function(m,p){m=m._reactInternals;var N=Mo(),O=uf(m),Y=Jl(N,O);Y.tag=2,p!=null&&(Y.callback=p),p=Ql(m,Y,O),p!==null&&(Vc(p,m,O,N),Lg(p,m,O))}};function Gg(m,p,N,O,Y,re,xe){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(O,re,xe):p.prototype&&p.prototype.isPureReactComponent?!hd(N,O)||!hd(Y,re):!0}function ww(m,p,N){var O=!1,Y=ql,re=p.contextType;return typeof re=="object"&&re!==null?re=Di(re):(Y=ui(p)?_u:Ka.current,O=p.contextTypes,re=(O=O!=null)?_d(m,Y):ql),p=new p(N,re),m.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=sf,m.stateNode=p,p._reactInternals=m,O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=Y,m.__reactInternalMemoizedMaskedChildContext=re),p}function wx(m,p,N,O){m=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(N,O),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(N,O),p.state!==m&&sf.enqueueReplaceState(p,p.state,null)}function Vg(m,p,N,O){var Y=m.stateNode;Y.props=N,Y.state=m.memoizedState,Y.refs={},Ph(m);var re=p.contextType;typeof re=="object"&&re!==null?Y.context=Di(re):(re=ui(p)?_u:Ka.current,Y.context=_d(m,re)),Y.state=m.memoizedState,re=p.getDerivedStateFromProps,typeof re=="function"&&(nf(m,p,re,N),Y.state=m.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(p=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),p!==Y.state&&sf.enqueueReplaceState(Y,Y.state,null),K0(m,N,Y,O),Y.state=m.memoizedState),typeof Y.componentDidMount=="function"&&(m.flags|=4194308)}function Pd(m,p){try{var N="",O=p;do N+=X(O),O=O.return;while(O);var Y=N}catch(re){Y=`
Error generating stack: `+re.message+`
`+re.stack}return{value:m,source:p,stack:Y,digest:null}}function qg(m,p,N){return{value:m,source:null,stack:N??null,digest:p??null}}function af(m,p){try{console.error(p.value)}catch(N){setTimeout(function(){throw N})}}var Q3=typeof WeakMap=="function"?WeakMap:Map;function bw(m,p,N){N=Jl(-1,N),N.tag=3,N.payload={element:null};var O=p.value;return N.callback=function(){Cw||(Cw=!0,lS=O),af(m,p)},N}function w(m,p,N){N=Jl(-1,N),N.tag=3;var O=m.type.getDerivedStateFromError;if(typeof O=="function"){var Y=p.value;N.payload=function(){return O(Y)},N.callback=function(){af(m,p)}}var re=m.stateNode;return re!==null&&typeof re.componentDidCatch=="function"&&(N.callback=function(){af(m,p),typeof O!="function"&&(lf===null?lf=new Set([this]):lf.add(this));var xe=p.stack;this.componentDidCatch(p.value,{componentStack:xe!==null?xe:""})}),N}function S(m,p,N){var O=m.pingCache;if(O===null){O=m.pingCache=new Q3;var Y=new Set;O.set(p,Y)}else Y=O.get(p),Y===void 0&&(Y=new Set,O.set(p,Y));Y.has(N)||(Y.add(N),m=dJ.bind(null,m,p,N),p.then(m,m))}function D(m){do{var p;if((p=m.tag===13)&&(p=m.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return m;m=m.return}while(m!==null);return null}function W(m,p,N,O,Y){return(m.mode&1)===0?(m===p?m.flags|=65536:(m.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(p=Jl(-1,1),p.tag=2,Ql(N,p,1))),N.lanes|=1),m):(m.flags|=65536,m.lanes=Y,m)}var J=C.ReactCurrentOwner,oe=!1;function Ce(m,p,N,O){p.child=m===null?Xo(p,null,N,O):Ed(p,m.child,N,O)}function tt(m,p,N,O,Y){N=N.render;var re=p.ref;return $c(p,Y),O=Q0(m,p,N,O,re,Y),N=Z0(),m!==null&&!oe?(p.updateQueue=m.updateQueue,p.flags&=-2053,m.lanes&=~Y,mi(m,p,Y)):(Vn&&N&&H0(p),p.flags|=1,Ce(m,p,O,Y),p.child)}function _t(m,p,N,O,Y){if(m===null){var re=N.type;return typeof re=="function"&&!gS(re)&&re.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(p.tag=15,p.type=re,sr(m,p,re,O,Y)):(m=Mw(N.type,null,O,p,p.mode,Y),m.ref=p.ref,m.return=p,p.child=m)}if(re=m.child,(m.lanes&Y)===0){var xe=re.memoizedProps;if(N=N.compare,N=N!==null?N:hd,N(xe,O)&&m.ref===p.ref)return mi(m,p,Y)}return p.flags|=1,m=ff(re,O),m.ref=p.ref,m.return=p,p.child=m}function sr(m,p,N,O,Y){if(m!==null){var re=m.memoizedProps;if(hd(re,O)&&m.ref===p.ref)if(oe=!1,p.pendingProps=O=re,(m.lanes&Y)!==0)(m.flags&131072)!==0&&(oe=!0);else return p.lanes=m.lanes,mi(m,p,Y)}return br(m,p,N,O,Y)}function jr(m,p,N){var O=p.pendingProps,Y=O.children,re=m!==null?m.memoizedState:null;if(O.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qn(Yg,Sl),Sl|=N;else{if((N&1073741824)===0)return m=re!==null?re.baseLanes|N:N,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:m,cachePool:null,transitions:null},p.updateQueue=null,Qn(Yg,Sl),Sl|=m,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},O=re!==null?re.baseLanes:N,Qn(Yg,Sl),Sl|=O}else re!==null?(O=re.baseLanes|N,p.memoizedState=null):O=N,Qn(Yg,Sl),Sl|=O;return Ce(m,p,Y,N),p.child}function dn(m,p){var N=p.ref;(m===null&&N!==null||m!==null&&m.ref!==N)&&(p.flags|=512,p.flags|=2097152)}function br(m,p,N,O,Y){var re=ui(N)?_u:Ka.current;return re=_d(p,re),$c(p,Y),N=Q0(m,p,N,O,re,Y),O=Z0(),m!==null&&!oe?(p.updateQueue=m.updateQueue,p.flags&=-2053,m.lanes&=~Y,mi(m,p,Y)):(Vn&&O&&H0(p),p.flags|=1,Ce(m,p,N,Y),p.child)}function fs(m,p,N,O,Y){if(ui(N)){var re=!0;Sd(p)}else re=!1;if($c(p,Y),p.stateNode===null)An(m,p),ww(p,N,O),Vg(p,N,O,Y),O=!0;else if(m===null){var xe=p.stateNode,Oe=p.memoizedProps;xe.props=Oe;var Ge=xe.context,bt=N.contextType;typeof bt=="object"&&bt!==null?bt=Di(bt):(bt=ui(N)?_u:Ka.current,bt=_d(p,bt));var Kt=N.getDerivedStateFromProps,Qt=typeof Kt=="function"||typeof xe.getSnapshotBeforeUpdate=="function";Qt||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Oe!==O||Ge!==bt)&&wx(p,xe,O,bt),Xl=!1;var Vt=p.memoizedState;xe.state=Vt,K0(p,O,xe,Y),Ge=p.memoizedState,Oe!==O||Vt!==Ge||ci.current||Xl?(typeof Kt=="function"&&(nf(p,N,Kt,O),Ge=p.memoizedState),(Oe=Xl||Gg(p,N,Oe,O,Vt,Ge,bt))?(Qt||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(p.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=O,p.memoizedState=Ge),xe.props=O,xe.state=Ge,xe.context=bt,O=Oe):(typeof xe.componentDidMount=="function"&&(p.flags|=4194308),O=!1)}else{xe=p.stateNode,Ig(m,p),Oe=p.memoizedProps,bt=p.type===p.elementType?Oe:Ya(p.type,Oe),xe.props=bt,Qt=p.pendingProps,Vt=xe.context,Ge=N.contextType,typeof Ge=="object"&&Ge!==null?Ge=Di(Ge):(Ge=ui(N)?_u:Ka.current,Ge=_d(p,Ge));var Cr=N.getDerivedStateFromProps;(Kt=typeof Cr=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Oe!==Qt||Vt!==Ge)&&wx(p,xe,O,Ge),Xl=!1,Vt=p.memoizedState,xe.state=Vt,K0(p,O,xe,Y);var Or=p.memoizedState;Oe!==Qt||Vt!==Or||ci.current||Xl?(typeof Cr=="function"&&(nf(p,N,Cr,O),Or=p.memoizedState),(bt=Xl||Gg(p,N,bt,O,Vt,Or,Ge)||!1)?(Kt||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(O,Or,Ge),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(O,Or,Ge)),typeof xe.componentDidUpdate=="function"&&(p.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof xe.componentDidUpdate!="function"||Oe===m.memoizedProps&&Vt===m.memoizedState||(p.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Oe===m.memoizedProps&&Vt===m.memoizedState||(p.flags|=1024),p.memoizedProps=O,p.memoizedState=Or),xe.props=O,xe.state=Or,xe.context=Ge,O=bt):(typeof xe.componentDidUpdate!="function"||Oe===m.memoizedProps&&Vt===m.memoizedState||(p.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Oe===m.memoizedProps&&Vt===m.memoizedState||(p.flags|=1024),O=!1)}return qn(m,p,N,O,re,Y)}function qn(m,p,N,O,Y,re){dn(m,p);var xe=(p.flags&128)!==0;if(!O&&!xe)return Y&&cw(p,N,!1),mi(m,p,re);O=p.stateNode,J.current=p;var Oe=xe&&typeof N.getDerivedStateFromError!="function"?null:O.render();return p.flags|=1,m!==null&&xe?(p.child=Ed(p,m.child,null,re),p.child=Ed(p,null,Oe,re)):Ce(m,p,Oe,re),p.memoizedState=O.state,Y&&cw(p,N,!0),p.child}function Ri(m){var p=m.stateNode;p.pendingContext?lx(m,p.pendingContext,p.pendingContext!==p.context):p.context&&lx(m,p.context,!1),Nu(m,p.containerInfo)}function Zl(m,p,N,O,Y){return Nd(),Eh(Y),p.flags|=256,Ce(m,p,N,O),p.child}var vt={dehydrated:null,treeContext:null,retryLane:0};function st(m){return{baseLanes:m,cachePool:null,transitions:null}}function Mt(m,p,N){var O=p.pendingProps,Y=ds.current,re=!1,xe=(p.flags&128)!==0,Oe;if((Oe=xe)||(Oe=m!==null&&m.memoizedState===null?!1:(Y&2)!==0),Oe?(re=!0,p.flags&=-129):(m===null||m.memoizedState!==null)&&(Y|=1),Qn(ds,Y&1),m===null)return G0(p),m=p.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((p.mode&1)===0?p.lanes=1:m.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(xe=O.children,m=O.fallback,re?(O=p.mode,re=p.child,xe={mode:"hidden",children:xe},(O&1)===0&&re!==null?(re.childLanes=0,re.pendingProps=xe):re=Fw(xe,O,0,null),m=Bh(m,O,N,null),re.return=p,m.return=p,re.sibling=m,p.child=re,p.child.memoizedState=st(N),p.memoizedState=vt,m):Sr(p,xe));if(Y=m.memoizedState,Y!==null&&(Oe=Y.dehydrated,Oe!==null))return yn(m,p,xe,O,Oe,Y,N);if(re){re=O.fallback,xe=p.mode,Y=m.child,Oe=Y.sibling;var Ge={mode:"hidden",children:O.children};return(xe&1)===0&&p.child!==Y?(O=p.child,O.childLanes=0,O.pendingProps=Ge,p.deletions=null):(O=ff(Y,Ge),O.subtreeFlags=Y.subtreeFlags&14680064),Oe!==null?re=ff(Oe,re):(re=Bh(re,xe,N,null),re.flags|=2),re.return=p,O.return=p,O.sibling=re,p.child=O,O=re,re=p.child,xe=m.child.memoizedState,xe=xe===null?st(N):{baseLanes:xe.baseLanes|N,cachePool:null,transitions:xe.transitions},re.memoizedState=xe,re.childLanes=m.childLanes&~N,p.memoizedState=vt,O}return re=m.child,m=re.sibling,O=ff(re,{mode:"visible",children:O.children}),(p.mode&1)===0&&(O.lanes=N),O.return=p,O.sibling=null,m!==null&&(N=p.deletions,N===null?(p.deletions=[m],p.flags|=16):N.push(m)),p.child=O,p.memoizedState=null,O}function Sr(m,p){return p=Fw({mode:"visible",children:p},m.mode,0,null),p.return=m,m.child=p}function zr(m,p,N,O){return O!==null&&Eh(O),Ed(p,m.child,null,N),m=Sr(p,p.pendingProps.children),m.flags|=2,p.memoizedState=null,m}function yn(m,p,N,O,Y,re,xe){if(N)return p.flags&256?(p.flags&=-257,O=qg(Error(r(422))),zr(m,p,xe,O)):p.memoizedState!==null?(p.child=m.child,p.flags|=128,null):(re=O.fallback,Y=p.mode,O=Fw({mode:"visible",children:O.children},Y,0,null),re=Bh(re,Y,xe,null),re.flags|=2,O.return=p,re.return=p,O.sibling=re,p.child=O,(p.mode&1)!==0&&Ed(p,m.child,null,xe),p.child.memoizedState=st(xe),p.memoizedState=vt,re);if((p.mode&1)===0)return zr(m,p,xe,null);if(Y.data==="$!"){if(O=Y.nextSibling&&Y.nextSibling.dataset,O)var Oe=O.dgst;return O=Oe,re=Error(r(419)),O=qg(re,O,void 0),zr(m,p,xe,O)}if(Oe=(xe&m.childLanes)!==0,oe||Oe){if(O=gi,O!==null){switch(xe&-xe){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}Y=(Y&(O.suspendedLanes|xe))!==0?0:Y,Y!==0&&Y!==re.retryLane&&(re.retryLane=Y,jo(m,Y),Vc(O,m,Y,-1))}return mS(),O=qg(Error(r(421))),zr(m,p,xe,O)}return Y.data==="$?"?(p.flags|=128,p.child=m.child,p=fJ.bind(null,m),Y._reactRetry=p,null):(m=re.treeContext,vr=Gl(Y.nextSibling),No=p,Vn=!0,Eo=null,m!==null&&(Mi[Fi++]=Co,Mi[Fi++]=_s,Mi[Fi++]=Cu,Co=m.id,_s=m.overflow,Cu=p),p=Sr(p,O.children),p.flags|=4096,p)}function fn(m,p,N){m.lanes|=p;var O=m.alternate;O!==null&&(O.lanes|=p),Rg(m.return,p,N)}function Mn(m,p,N,O,Y){var re=m.memoizedState;re===null?m.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:O,tail:N,tailMode:Y}:(re.isBackwards=p,re.rendering=null,re.renderingStartTime=0,re.last=O,re.tail=N,re.tailMode=Y)}function _a(m,p,N){var O=p.pendingProps,Y=O.revealOrder,re=O.tail;if(Ce(m,p,O.children,N),O=ds.current,(O&2)!==0)O=O&1|2,p.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=p.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&fn(m,N,p);else if(m.tag===19)fn(m,N,p);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break e;for(;m.sibling===null;){if(m.return===null||m.return===p)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}O&=1}if(Qn(ds,O),(p.mode&1)===0)p.memoizedState=null;else switch(Y){case"forwards":for(N=p.child,Y=null;N!==null;)m=N.alternate,m!==null&&X0(m)===null&&(Y=N),N=N.sibling;N=Y,N===null?(Y=p.child,p.child=null):(Y=N.sibling,N.sibling=null),Mn(p,!1,Y,N,re);break;case"backwards":for(N=null,Y=p.child,p.child=null;Y!==null;){if(m=Y.alternate,m!==null&&X0(m)===null){p.child=Y;break}m=Y.sibling,Y.sibling=N,N=Y,Y=m}Mn(p,!0,N,null,re);break;case"together":Mn(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function An(m,p){(p.mode&1)===0&&m!==null&&(m.alternate=null,p.alternate=null,p.flags|=2)}function mi(m,p,N){if(m!==null&&(p.dependencies=m.dependencies),Oh|=p.lanes,(N&p.childLanes)===0)return null;if(m!==null&&p.child!==m.child)throw Error(r(153));if(p.child!==null){for(m=p.child,N=ff(m,m.pendingProps),p.child=N,N.return=p;m.sibling!==null;)m=m.sibling,N=N.sibling=ff(m,m.pendingProps),N.return=p;N.sibling=null}return p.child}function Z3(m,p,N){switch(p.tag){case 3:Ri(p),Nd();break;case 5:Y0(p);break;case 1:ui(p.type)&&Sd(p);break;case 4:Nu(p,p.stateNode.containerInfo);break;case 10:var O=p.type._context,Y=p.memoizedProps.value;Qn(Ah,O._currentValue),O._currentValue=Y;break;case 13:if(O=p.memoizedState,O!==null)return O.dehydrated!==null?(Qn(ds,ds.current&1),p.flags|=128,null):(N&p.child.childLanes)!==0?Mt(m,p,N):(Qn(ds,ds.current&1),m=mi(m,p,N),m!==null?m.sibling:null);Qn(ds,ds.current&1);break;case 19:if(O=(N&p.childLanes)!==0,(m.flags&128)!==0){if(O)return _a(m,p,N);p.flags|=128}if(Y=p.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),Qn(ds,ds.current),O)break;return null;case 22:case 23:return p.lanes=0,jr(m,p,N)}return mi(m,p,N)}var c9,eS,u9,d9;c9=function(m,p){for(var N=p.child;N!==null;){if(N.tag===5||N.tag===6)m.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},eS=function(){},u9=function(m,p,N,O){var Y=m.memoizedProps;if(Y!==O){m=p.stateNode,wa(Zn.current);var re=null;switch(N){case"input":Y=pe(m,Y),O=pe(m,O),re=[];break;case"select":Y=H({},Y,{value:void 0}),O=H({},O,{value:void 0}),re=[];break;case"textarea":Y=Bt(m,Y),O=Bt(m,O),re=[];break;default:typeof Y.onClick!="function"&&typeof O.onClick=="function"&&(m.onclick=vd)}wr(N,O);var xe;N=null;for(bt in Y)if(!O.hasOwnProperty(bt)&&Y.hasOwnProperty(bt)&&Y[bt]!=null)if(bt==="style"){var Oe=Y[bt];for(xe in Oe)Oe.hasOwnProperty(xe)&&(N||(N={}),N[xe]="")}else bt!=="dangerouslySetInnerHTML"&&bt!=="children"&&bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&bt!=="autoFocus"&&(s.hasOwnProperty(bt)?re||(re=[]):(re=re||[]).push(bt,null));for(bt in O){var Ge=O[bt];if(Oe=Y?.[bt],O.hasOwnProperty(bt)&&Ge!==Oe&&(Ge!=null||Oe!=null))if(bt==="style")if(Oe){for(xe in Oe)!Oe.hasOwnProperty(xe)||Ge&&Ge.hasOwnProperty(xe)||(N||(N={}),N[xe]="");for(xe in Ge)Ge.hasOwnProperty(xe)&&Oe[xe]!==Ge[xe]&&(N||(N={}),N[xe]=Ge[xe])}else N||(re||(re=[]),re.push(bt,N)),N=Ge;else bt==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Oe=Oe?Oe.__html:void 0,Ge!=null&&Oe!==Ge&&(re=re||[]).push(bt,Ge)):bt==="children"?typeof Ge!="string"&&typeof Ge!="number"||(re=re||[]).push(bt,""+Ge):bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&(s.hasOwnProperty(bt)?(Ge!=null&&bt==="onScroll"&&cs("scroll",m),re||Oe===Ge||(re=[])):(re=re||[]).push(bt,Ge))}N&&(re=re||[]).push("style",N);var bt=re;(p.updateQueue=bt)&&(p.flags|=4)}},d9=function(m,p,N,O){N!==O&&(p.flags|=4)};function bx(m,p){if(!Vn)switch(m.tailMode){case"hidden":p=m.tail;for(var N=null;p!==null;)p.alternate!==null&&(N=p),p=p.sibling;N===null?m.tail=null:N.sibling=null;break;case"collapsed":N=m.tail;for(var O=null;N!==null;)N.alternate!==null&&(O=N),N=N.sibling;O===null?p||m.tail===null?m.tail=null:m.tail.sibling=null:O.sibling=null}}function no(m){var p=m.alternate!==null&&m.alternate.child===m.child,N=0,O=0;if(p)for(var Y=m.child;Y!==null;)N|=Y.lanes|Y.childLanes,O|=Y.subtreeFlags&14680064,O|=Y.flags&14680064,Y.return=m,Y=Y.sibling;else for(Y=m.child;Y!==null;)N|=Y.lanes|Y.childLanes,O|=Y.subtreeFlags,O|=Y.flags,Y.return=m,Y=Y.sibling;return m.subtreeFlags|=O,m.childLanes=N,p}function tJ(m,p,N){var O=p.pendingProps;switch(Oa(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(p),null;case 1:return ui(p.type)&&U0(),no(p),null;case 3:return O=p.stateNode,ks(),us(ci),us(Ka),di(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(m===null||m.child===null)&&(Nh(p)?p.flags|=4:m===null||m.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Eo!==null&&(dS(Eo),Eo=null))),eS(m,p),no(p),null;case 5:zc(p);var Y=wa(Ks.current);if(N=p.type,m!==null&&p.stateNode!=null)u9(m,p,N,O,Y),m.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!O){if(p.stateNode===null)throw Error(r(166));return no(p),null}if(m=wa(Zn.current),Nh(p)){O=p.stateNode,N=p.type;var re=p.memoizedProps;switch(O[Yo]=p,O[kh]=re,m=(p.mode&1)!==0,N){case"dialog":cs("cancel",O),cs("close",O);break;case"iframe":case"object":case"embed":cs("load",O);break;case"video":case"audio":for(Y=0;Y<vu.length;Y++)cs(vu[Y],O);break;case"source":cs("error",O);break;case"img":case"image":case"link":cs("error",O),cs("load",O);break;case"details":cs("toggle",O);break;case"input":je(O,re),cs("invalid",O);break;case"select":O._wrapperState={wasMultiple:!!re.multiple},cs("invalid",O);break;case"textarea":Gt(O,re),cs("invalid",O)}wr(N,re),Y=null;for(var xe in re)if(re.hasOwnProperty(xe)){var Oe=re[xe];xe==="children"?typeof Oe=="string"?O.textContent!==Oe&&(re.suppressHydrationWarning!==!0&&_h(O.textContent,Oe,m),Y=["children",Oe]):typeof Oe=="number"&&O.textContent!==""+Oe&&(re.suppressHydrationWarning!==!0&&_h(O.textContent,Oe,m),Y=["children",""+Oe]):s.hasOwnProperty(xe)&&Oe!=null&&xe==="onScroll"&&cs("scroll",O)}switch(N){case"input":Ne(O),Nt(O,re,!0);break;case"textarea":Ne(O),yr(O);break;case"select":case"option":break;default:typeof re.onClick=="function"&&(O.onclick=vd)}O=Y,p.updateQueue=O,O!==null&&(p.flags|=4)}else{xe=Y.nodeType===9?Y:Y.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=it(N)),m==="http://www.w3.org/1999/xhtml"?N==="script"?(m=xe.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof O.is=="string"?m=xe.createElement(N,{is:O.is}):(m=xe.createElement(N),N==="select"&&(xe=m,O.multiple?xe.multiple=!0:O.size&&(xe.size=O.size))):m=xe.createElementNS(m,N),m[Yo]=p,m[kh]=O,c9(m,p,!1,!1),p.stateNode=m;e:{switch(xe=ft(N,O),N){case"dialog":cs("cancel",m),cs("close",m),Y=O;break;case"iframe":case"object":case"embed":cs("load",m),Y=O;break;case"video":case"audio":for(Y=0;Y<vu.length;Y++)cs(vu[Y],m);Y=O;break;case"source":cs("error",m),Y=O;break;case"img":case"image":case"link":cs("error",m),cs("load",m),Y=O;break;case"details":cs("toggle",m),Y=O;break;case"input":je(m,O),Y=pe(m,O),cs("invalid",m);break;case"option":Y=O;break;case"select":m._wrapperState={wasMultiple:!!O.multiple},Y=H({},O,{value:void 0}),cs("invalid",m);break;case"textarea":Gt(m,O),Y=Bt(m,O),cs("invalid",m);break;default:Y=O}wr(N,Y),Oe=Y;for(re in Oe)if(Oe.hasOwnProperty(re)){var Ge=Oe[re];re==="style"?ur(m,Ge):re==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Ge!=null&&pt(m,Ge)):re==="children"?typeof Ge=="string"?(N!=="textarea"||Ge!=="")&&nt(m,Ge):typeof Ge=="number"&&nt(m,""+Ge):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(s.hasOwnProperty(re)?Ge!=null&&re==="onScroll"&&cs("scroll",m):Ge!=null&&b(m,re,Ge,xe))}switch(N){case"input":Ne(m),Nt(m,O,!1);break;case"textarea":Ne(m),yr(m);break;case"option":O.value!=null&&m.setAttribute("value",""+se(O.value));break;case"select":m.multiple=!!O.multiple,re=O.value,re!=null?At(m,!!O.multiple,re,!1):O.defaultValue!=null&&At(m,!!O.multiple,O.defaultValue,!0);break;default:typeof Y.onClick=="function"&&(m.onclick=vd)}switch(N){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}}O&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return no(p),null;case 6:if(m&&p.stateNode!=null)d9(m,p,m.memoizedProps,O);else{if(typeof O!="string"&&p.stateNode===null)throw Error(r(166));if(N=wa(Ks.current),wa(Zn.current),Nh(p)){if(O=p.stateNode,N=p.memoizedProps,O[Yo]=p,(re=O.nodeValue!==N)&&(m=No,m!==null))switch(m.tag){case 3:_h(O.nodeValue,N,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&_h(O.nodeValue,N,(m.mode&1)!==0)}re&&(p.flags|=4)}else O=(N.nodeType===9?N:N.ownerDocument).createTextNode(O),O[Yo]=p,p.stateNode=O}return no(p),null;case 13:if(us(ds),O=p.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Vn&&vr!==null&&(p.mode&1)!==0&&(p.flags&128)===0)ux(),Nd(),p.flags|=98560,re=!1;else if(re=Nh(p),O!==null&&O.dehydrated!==null){if(m===null){if(!re)throw Error(r(318));if(re=p.memoizedState,re=re!==null?re.dehydrated:null,!re)throw Error(r(317));re[Yo]=p}else Nd(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;no(p),re=!1}else Eo!==null&&(dS(Eo),Eo=null),re=!0;if(!re)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=N,p):(O=O!==null,O!==(m!==null&&m.memoizedState!==null)&&O&&(p.child.flags|=8192,(p.mode&1)!==0&&(m===null||(ds.current&1)!==0?Xa===0&&(Xa=3):mS())),p.updateQueue!==null&&(p.flags|=4),no(p),null);case 4:return ks(),eS(m,p),m===null&&xd(p.stateNode.containerInfo),no(p),null;case 10:return Og(p.type._context),no(p),null;case 17:return ui(p.type)&&U0(),no(p),null;case 19:if(us(ds),re=p.memoizedState,re===null)return no(p),null;if(O=(p.flags&128)!==0,xe=re.rendering,xe===null)if(O)bx(re,!1);else{if(Xa!==0||m!==null&&(m.flags&128)!==0)for(m=p.child;m!==null;){if(xe=X0(m),xe!==null){for(p.flags|=128,bx(re,!1),O=xe.updateQueue,O!==null&&(p.updateQueue=O,p.flags|=4),p.subtreeFlags=0,O=N,N=p.child;N!==null;)re=N,m=O,re.flags&=14680066,xe=re.alternate,xe===null?(re.childLanes=0,re.lanes=m,re.child=null,re.subtreeFlags=0,re.memoizedProps=null,re.memoizedState=null,re.updateQueue=null,re.dependencies=null,re.stateNode=null):(re.childLanes=xe.childLanes,re.lanes=xe.lanes,re.child=xe.child,re.subtreeFlags=0,re.deletions=null,re.memoizedProps=xe.memoizedProps,re.memoizedState=xe.memoizedState,re.updateQueue=xe.updateQueue,re.type=xe.type,m=xe.dependencies,re.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),N=N.sibling;return Qn(ds,ds.current&1|2),p.child}m=m.sibling}re.tail!==null&&wt()>Xg&&(p.flags|=128,O=!0,bx(re,!1),p.lanes=4194304)}else{if(!O)if(m=X0(xe),m!==null){if(p.flags|=128,O=!0,N=m.updateQueue,N!==null&&(p.updateQueue=N,p.flags|=4),bx(re,!0),re.tail===null&&re.tailMode==="hidden"&&!xe.alternate&&!Vn)return no(p),null}else 2*wt()-re.renderingStartTime>Xg&&N!==1073741824&&(p.flags|=128,O=!0,bx(re,!1),p.lanes=4194304);re.isBackwards?(xe.sibling=p.child,p.child=xe):(N=re.last,N!==null?N.sibling=xe:p.child=xe,re.last=xe)}return re.tail!==null?(p=re.tail,re.rendering=p,re.tail=p.sibling,re.renderingStartTime=wt(),p.sibling=null,N=ds.current,Qn(ds,O?N&1|2:N&1),p):(no(p),null);case 22:case 23:return hS(),O=p.memoizedState!==null,m!==null&&m.memoizedState!==null!==O&&(p.flags|=8192),O&&(p.mode&1)!==0?(Sl&1073741824)!==0&&(no(p),p.subtreeFlags&6&&(p.flags|=8192)):no(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function rJ(m,p){switch(Oa(p),p.tag){case 1:return ui(p.type)&&U0(),m=p.flags,m&65536?(p.flags=m&-65537|128,p):null;case 3:return ks(),us(ci),us(Ka),di(),m=p.flags,(m&65536)!==0&&(m&128)===0?(p.flags=m&-65537|128,p):null;case 5:return zc(p),null;case 13:if(us(ds),m=p.memoizedState,m!==null&&m.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Nd()}return m=p.flags,m&65536?(p.flags=m&-65537|128,p):null;case 19:return us(ds),null;case 4:return ks(),null;case 10:return Og(p.type._context),null;case 22:case 23:return hS(),null;case 24:return null;default:return null}}var _w=!1,so=!1,nJ=typeof WeakSet=="function"?WeakSet:Set,Pr=null;function Kg(m,p){var N=m.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(O){aa(m,p,O)}else N.current=null}function tS(m,p,N){try{N()}catch(O){aa(m,p,O)}}var f9=!1;function sJ(m,p){if(sx=og,m=ya(),L0(m)){if("selectionStart"in m)var N={start:m.selectionStart,end:m.selectionEnd};else e:{N=(N=m.ownerDocument)&&N.defaultView||window;var O=N.getSelection&&N.getSelection();if(O&&O.rangeCount!==0){N=O.anchorNode;var Y=O.anchorOffset,re=O.focusNode;O=O.focusOffset;try{N.nodeType,re.nodeType}catch{N=null;break e}var xe=0,Oe=-1,Ge=-1,bt=0,Kt=0,Qt=m,Vt=null;t:for(;;){for(var Cr;Qt!==N||Y!==0&&Qt.nodeType!==3||(Oe=xe+Y),Qt!==re||O!==0&&Qt.nodeType!==3||(Ge=xe+O),Qt.nodeType===3&&(xe+=Qt.nodeValue.length),(Cr=Qt.firstChild)!==null;)Vt=Qt,Qt=Cr;for(;;){if(Qt===m)break t;if(Vt===N&&++bt===Y&&(Oe=xe),Vt===re&&++Kt===O&&(Ge=xe),(Cr=Qt.nextSibling)!==null)break;Qt=Vt,Vt=Qt.parentNode}Qt=Cr}N=Oe===-1||Ge===-1?null:{start:Oe,end:Ge}}else N=null}N=N||{start:0,end:0}}else N=null;for(ax={focusedElem:m,selectionRange:N},og=!1,Pr=p;Pr!==null;)if(p=Pr,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,Pr=m;else for(;Pr!==null;){p=Pr;try{var Or=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Or!==null){var Lr=Or.memoizedProps,Sa=Or.memoizedState,lt=p.stateNode,et=lt.getSnapshotBeforeUpdate(p.elementType===p.type?Lr:Ya(p.type,Lr),Sa);lt.__reactInternalSnapshotBeforeUpdate=et}break;case 3:var mt=p.stateNode.containerInfo;mt.nodeType===1?mt.textContent="":mt.nodeType===9&&mt.documentElement&&mt.removeChild(mt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ir){aa(p,p.return,ir)}if(m=p.sibling,m!==null){m.return=p.return,Pr=m;break}Pr=p.return}return Or=f9,f9=!1,Or}function _x(m,p,N){var O=p.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var Y=O=O.next;do{if((Y.tag&m)===m){var re=Y.destroy;Y.destroy=void 0,re!==void 0&&tS(p,N,re)}Y=Y.next}while(Y!==O)}}function Sw(m,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var N=p=p.next;do{if((N.tag&m)===m){var O=N.create;N.destroy=O()}N=N.next}while(N!==p)}}function rS(m){var p=m.ref;if(p!==null){var N=m.stateNode;switch(m.tag){case 5:m=N;break;default:m=N}typeof p=="function"?p(m):p.current=m}}function h9(m){var p=m.alternate;p!==null&&(m.alternate=null,h9(p)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(p=m.stateNode,p!==null&&(delete p[Yo],delete p[kh],delete p[Ng],delete p[ow],delete p[lw])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function m9(m){return m.tag===5||m.tag===3||m.tag===4}function g9(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||m9(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function nS(m,p,N){var O=m.tag;if(O===5||O===6)m=m.stateNode,p?N.nodeType===8?N.parentNode.insertBefore(m,p):N.insertBefore(m,p):(N.nodeType===8?(p=N.parentNode,p.insertBefore(m,N)):(p=N,p.appendChild(m)),N=N._reactRootContainer,N!=null||p.onclick!==null||(p.onclick=vd));else if(O!==4&&(m=m.child,m!==null))for(nS(m,p,N),m=m.sibling;m!==null;)nS(m,p,N),m=m.sibling}function sS(m,p,N){var O=m.tag;if(O===5||O===6)m=m.stateNode,p?N.insertBefore(m,p):N.appendChild(m);else if(O!==4&&(m=m.child,m!==null))for(sS(m,p,N),m=m.sibling;m!==null;)sS(m,p,N),m=m.sibling}var Ii=null,Hc=!1;function of(m,p,N){for(N=N.child;N!==null;)p9(m,p,N),N=N.sibling}function p9(m,p,N){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Ur,N)}catch{}switch(N.tag){case 5:so||Kg(N,p);case 6:var O=Ii,Y=Hc;Ii=null,of(m,p,N),Ii=O,Hc=Y,Ii!==null&&(Hc?(m=Ii,N=N.stateNode,m.nodeType===8?m.parentNode.removeChild(N):m.removeChild(N)):Ii.removeChild(N.stateNode));break;case 18:Ii!==null&&(Hc?(m=Ii,N=N.stateNode,m.nodeType===8?Cg(m.parentNode,N):m.nodeType===1&&Cg(m,N),Zi(m)):Cg(Ii,N.stateNode));break;case 4:O=Ii,Y=Hc,Ii=N.stateNode.containerInfo,Hc=!0,of(m,p,N),Ii=O,Hc=Y;break;case 0:case 11:case 14:case 15:if(!so&&(O=N.updateQueue,O!==null&&(O=O.lastEffect,O!==null))){Y=O=O.next;do{var re=Y,xe=re.destroy;re=re.tag,xe!==void 0&&((re&2)!==0||(re&4)!==0)&&tS(N,p,xe),Y=Y.next}while(Y!==O)}of(m,p,N);break;case 1:if(!so&&(Kg(N,p),O=N.stateNode,typeof O.componentWillUnmount=="function"))try{O.props=N.memoizedProps,O.state=N.memoizedState,O.componentWillUnmount()}catch(Oe){aa(N,p,Oe)}of(m,p,N);break;case 21:of(m,p,N);break;case 22:N.mode&1?(so=(O=so)||N.memoizedState!==null,of(m,p,N),so=O):of(m,p,N);break;default:of(m,p,N)}}function x9(m){var p=m.updateQueue;if(p!==null){m.updateQueue=null;var N=m.stateNode;N===null&&(N=m.stateNode=new nJ),p.forEach(function(O){var Y=hJ.bind(null,m,O);N.has(O)||(N.add(O),O.then(Y,Y))})}}function Gc(m,p){var N=p.deletions;if(N!==null)for(var O=0;O<N.length;O++){var Y=N[O];try{var re=m,xe=p,Oe=xe;e:for(;Oe!==null;){switch(Oe.tag){case 5:Ii=Oe.stateNode,Hc=!1;break e;case 3:Ii=Oe.stateNode.containerInfo,Hc=!0;break e;case 4:Ii=Oe.stateNode.containerInfo,Hc=!0;break e}Oe=Oe.return}if(Ii===null)throw Error(r(160));p9(re,xe,Y),Ii=null,Hc=!1;var Ge=Y.alternate;Ge!==null&&(Ge.return=null),Y.return=null}catch(bt){aa(Y,p,bt)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)y9(p,m),p=p.sibling}function y9(m,p){var N=m.alternate,O=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Gc(p,m),Mu(m),O&4){try{_x(3,m,m.return),Sw(3,m)}catch(Lr){aa(m,m.return,Lr)}try{_x(5,m,m.return)}catch(Lr){aa(m,m.return,Lr)}}break;case 1:Gc(p,m),Mu(m),O&512&&N!==null&&Kg(N,N.return);break;case 5:if(Gc(p,m),Mu(m),O&512&&N!==null&&Kg(N,N.return),m.flags&32){var Y=m.stateNode;try{nt(Y,"")}catch(Lr){aa(m,m.return,Lr)}}if(O&4&&(Y=m.stateNode,Y!=null)){var re=m.memoizedProps,xe=N!==null?N.memoizedProps:re,Oe=m.type,Ge=m.updateQueue;if(m.updateQueue=null,Ge!==null)try{Oe==="input"&&re.type==="radio"&&re.name!=null&&We(Y,re),ft(Oe,xe);var bt=ft(Oe,re);for(xe=0;xe<Ge.length;xe+=2){var Kt=Ge[xe],Qt=Ge[xe+1];Kt==="style"?ur(Y,Qt):Kt==="dangerouslySetInnerHTML"?pt(Y,Qt):Kt==="children"?nt(Y,Qt):b(Y,Kt,Qt,bt)}switch(Oe){case"input":Me(Y,re);break;case"textarea":or(Y,re);break;case"select":var Vt=Y._wrapperState.wasMultiple;Y._wrapperState.wasMultiple=!!re.multiple;var Cr=re.value;Cr!=null?At(Y,!!re.multiple,Cr,!1):Vt!==!!re.multiple&&(re.defaultValue!=null?At(Y,!!re.multiple,re.defaultValue,!0):At(Y,!!re.multiple,re.multiple?[]:"",!1))}Y[kh]=re}catch(Lr){aa(m,m.return,Lr)}}break;case 6:if(Gc(p,m),Mu(m),O&4){if(m.stateNode===null)throw Error(r(162));Y=m.stateNode,re=m.memoizedProps;try{Y.nodeValue=re}catch(Lr){aa(m,m.return,Lr)}}break;case 3:if(Gc(p,m),Mu(m),O&4&&N!==null&&N.memoizedState.isDehydrated)try{Zi(p.containerInfo)}catch(Lr){aa(m,m.return,Lr)}break;case 4:Gc(p,m),Mu(m);break;case 13:Gc(p,m),Mu(m),Y=m.child,Y.flags&8192&&(re=Y.memoizedState!==null,Y.stateNode.isHidden=re,!re||Y.alternate!==null&&Y.alternate.memoizedState!==null||(oS=wt())),O&4&&x9(m);break;case 22:if(Kt=N!==null&&N.memoizedState!==null,m.mode&1?(so=(bt=so)||Kt,Gc(p,m),so=bt):Gc(p,m),Mu(m),O&8192){if(bt=m.memoizedState!==null,(m.stateNode.isHidden=bt)&&!Kt&&(m.mode&1)!==0)for(Pr=m,Kt=m.child;Kt!==null;){for(Qt=Pr=Kt;Pr!==null;){switch(Vt=Pr,Cr=Vt.child,Vt.tag){case 0:case 11:case 14:case 15:_x(4,Vt,Vt.return);break;case 1:Kg(Vt,Vt.return);var Or=Vt.stateNode;if(typeof Or.componentWillUnmount=="function"){O=Vt,N=Vt.return;try{p=O,Or.props=p.memoizedProps,Or.state=p.memoizedState,Or.componentWillUnmount()}catch(Lr){aa(O,N,Lr)}}break;case 5:Kg(Vt,Vt.return);break;case 22:if(Vt.memoizedState!==null){b9(Qt);continue}}Cr!==null?(Cr.return=Vt,Pr=Cr):b9(Qt)}Kt=Kt.sibling}e:for(Kt=null,Qt=m;;){if(Qt.tag===5){if(Kt===null){Kt=Qt;try{Y=Qt.stateNode,bt?(re=Y.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none"):(Oe=Qt.stateNode,Ge=Qt.memoizedProps.style,xe=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null,Oe.style.display=rr("display",xe))}catch(Lr){aa(m,m.return,Lr)}}}else if(Qt.tag===6){if(Kt===null)try{Qt.stateNode.nodeValue=bt?"":Qt.memoizedProps}catch(Lr){aa(m,m.return,Lr)}}else if((Qt.tag!==22&&Qt.tag!==23||Qt.memoizedState===null||Qt===m)&&Qt.child!==null){Qt.child.return=Qt,Qt=Qt.child;continue}if(Qt===m)break e;for(;Qt.sibling===null;){if(Qt.return===null||Qt.return===m)break e;Kt===Qt&&(Kt=null),Qt=Qt.return}Kt===Qt&&(Kt=null),Qt.sibling.return=Qt.return,Qt=Qt.sibling}}break;case 19:Gc(p,m),Mu(m),O&4&&x9(m);break;case 21:break;default:Gc(p,m),Mu(m)}}function Mu(m){var p=m.flags;if(p&2){try{e:{for(var N=m.return;N!==null;){if(m9(N)){var O=N;break e}N=N.return}throw Error(r(160))}switch(O.tag){case 5:var Y=O.stateNode;O.flags&32&&(nt(Y,""),O.flags&=-33);var re=g9(m);sS(m,re,Y);break;case 3:case 4:var xe=O.stateNode.containerInfo,Oe=g9(m);nS(m,Oe,xe);break;default:throw Error(r(161))}}catch(Ge){aa(m,m.return,Ge)}m.flags&=-3}p&4096&&(m.flags&=-4097)}function aJ(m,p,N){Pr=m,v9(m)}function v9(m,p,N){for(var O=(m.mode&1)!==0;Pr!==null;){var Y=Pr,re=Y.child;if(Y.tag===22&&O){var xe=Y.memoizedState!==null||_w;if(!xe){var Oe=Y.alternate,Ge=Oe!==null&&Oe.memoizedState!==null||so;Oe=_w;var bt=so;if(_w=xe,(so=Ge)&&!bt)for(Pr=Y;Pr!==null;)xe=Pr,Ge=xe.child,xe.tag===22&&xe.memoizedState!==null?_9(Y):Ge!==null?(Ge.return=xe,Pr=Ge):_9(Y);for(;re!==null;)Pr=re,v9(re),re=re.sibling;Pr=Y,_w=Oe,so=bt}w9(m)}else(Y.subtreeFlags&8772)!==0&&re!==null?(re.return=Y,Pr=re):w9(m)}}function w9(m){for(;Pr!==null;){var p=Pr;if((p.flags&8772)!==0){var N=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:so||Sw(5,p);break;case 1:var O=p.stateNode;if(p.flags&4&&!so)if(N===null)O.componentDidMount();else{var Y=p.elementType===p.type?N.memoizedProps:Ya(p.type,N.memoizedProps);O.componentDidUpdate(Y,N.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var re=p.updateQueue;re!==null&&Ls(p,re,O);break;case 3:var xe=p.updateQueue;if(xe!==null){if(N=null,p.child!==null)switch(p.child.tag){case 5:N=p.child.stateNode;break;case 1:N=p.child.stateNode}Ls(p,xe,N)}break;case 5:var Oe=p.stateNode;if(N===null&&p.flags&4){N=Oe;var Ge=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ge.autoFocus&&N.focus();break;case"img":Ge.src&&(N.src=Ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var bt=p.alternate;if(bt!==null){var Kt=bt.memoizedState;if(Kt!==null){var Qt=Kt.dehydrated;Qt!==null&&Zi(Qt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}so||p.flags&512&&rS(p)}catch(Vt){aa(p,p.return,Vt)}}if(p===m){Pr=null;break}if(N=p.sibling,N!==null){N.return=p.return,Pr=N;break}Pr=p.return}}function b9(m){for(;Pr!==null;){var p=Pr;if(p===m){Pr=null;break}var N=p.sibling;if(N!==null){N.return=p.return,Pr=N;break}Pr=p.return}}function _9(m){for(;Pr!==null;){var p=Pr;try{switch(p.tag){case 0:case 11:case 15:var N=p.return;try{Sw(4,p)}catch(Ge){aa(p,N,Ge)}break;case 1:var O=p.stateNode;if(typeof O.componentDidMount=="function"){var Y=p.return;try{O.componentDidMount()}catch(Ge){aa(p,Y,Ge)}}var re=p.return;try{rS(p)}catch(Ge){aa(p,re,Ge)}break;case 5:var xe=p.return;try{rS(p)}catch(Ge){aa(p,xe,Ge)}}}catch(Ge){aa(p,p.return,Ge)}if(p===m){Pr=null;break}var Oe=p.sibling;if(Oe!==null){Oe.return=p.return,Pr=Oe;break}Pr=p.return}}var iJ=Math.ceil,kw=C.ReactCurrentDispatcher,aS=C.ReactCurrentOwner,ec=C.ReactCurrentBatchConfig,On=0,gi=null,Ra=null,Li=0,Sl=0,Yg=Lc(0),Xa=0,Sx=null,Oh=0,Tw=0,iS=0,kx=null,Qo=null,oS=0,Xg=1/0,Md=null,Cw=!1,lS=null,lf=null,Nw=!1,cf=null,Ew=0,Tx=0,cS=null,Aw=-1,jw=0;function Mo(){return(On&6)!==0?wt():Aw!==-1?Aw:Aw=wt()}function uf(m){return(m.mode&1)===0?1:(On&2)!==0&&Li!==0?Li&-Li:dx.transition!==null?(jw===0&&(jw=Gn()),jw):(m=un,m!==0||(m=window.event,m=m===void 0?16:H2(m.type)),m)}function Vc(m,p,N,O){if(50<Tx)throw Tx=0,cS=null,Error(r(185));ls(m,N,O),((On&2)===0||m!==gi)&&(m===gi&&((On&2)===0&&(Tw|=N),Xa===4&&df(m,Li)),Zo(m,O),N===1&&On===0&&(p.mode&1)===0&&(Xg=wt()+500,W0&&Su()))}function Zo(m,p){var N=m.callbackNode;Dr(m,p);var O=ke(m,m===gi?Li:0);if(O===0)N!==null&&Be(N),m.callbackNode=null,m.callbackPriority=0;else if(p=O&-O,m.callbackPriority!==p){if(N!=null&&Be(N),p===1)m.tag===0?Bc(k9.bind(null,m)):Ch(k9.bind(null,m)),aw(function(){(On&6)===0&&Su()}),N=null;else{switch(gl(O)){case 1:N=Ft;break;case 4:N=Yt;break;case 16:N=_r;break;case 536870912:N=ar;break;default:N=_r}N=M9(N,S9.bind(null,m))}m.callbackPriority=p,m.callbackNode=N}}function S9(m,p){if(Aw=-1,jw=0,(On&6)!==0)throw Error(r(327));var N=m.callbackNode;if(Jg()&&m.callbackNode!==N)return null;var O=ke(m,m===gi?Li:0);if(O===0)return null;if((O&30)!==0||(O&m.expiredLanes)!==0||p)p=Pw(m,O);else{p=O;var Y=On;On|=2;var re=C9();(gi!==m||Li!==p)&&(Md=null,Xg=wt()+500,Ih(m,p));do try{cJ();break}catch(Oe){T9(m,Oe)}while(!0);Dg(),kw.current=re,On=Y,Ra!==null?p=0:(gi=null,Li=0,p=Xa)}if(p!==0){if(p===2&&(Y=Jr(m),Y!==0&&(O=Y,p=uS(m,Y))),p===1)throw N=Sx,Ih(m,0),df(m,O),Zo(m,wt()),N;if(p===6)df(m,O);else{if(Y=m.current.alternate,(O&30)===0&&!oJ(Y)&&(p=Pw(m,O),p===2&&(re=Jr(m),re!==0&&(O=re,p=uS(m,re))),p===1))throw N=Sx,Ih(m,0),df(m,O),Zo(m,wt()),N;switch(m.finishedWork=Y,m.finishedLanes=O,p){case 0:case 1:throw Error(r(345));case 2:Lh(m,Qo,Md);break;case 3:if(df(m,O),(O&130023424)===O&&(p=oS+500-wt(),10<p)){if(ke(m,0)!==0)break;if(Y=m.suspendedLanes,(Y&O)!==O){Mo(),m.pingedLanes|=m.suspendedLanes&Y;break}m.timeoutHandle=To(Lh.bind(null,m,Qo,Md),p);break}Lh(m,Qo,Md);break;case 4:if(df(m,O),(O&4194240)===O)break;for(p=m.eventTimes,Y=-1;0<O;){var xe=31-Tr(O);re=1<<xe,xe=p[xe],xe>Y&&(Y=xe),O&=~re}if(O=Y,O=wt()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*iJ(O/1960))-O,10<O){m.timeoutHandle=To(Lh.bind(null,m,Qo,Md),O);break}Lh(m,Qo,Md);break;case 5:Lh(m,Qo,Md);break;default:throw Error(r(329))}}}return Zo(m,wt()),m.callbackNode===N?S9.bind(null,m):null}function uS(m,p){var N=kx;return m.current.memoizedState.isDehydrated&&(Ih(m,p).flags|=256),m=Pw(m,p),m!==2&&(p=Qo,Qo=N,p!==null&&dS(p)),m}function dS(m){Qo===null?Qo=m:Qo.push.apply(Qo,m)}function oJ(m){for(var p=m;;){if(p.flags&16384){var N=p.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var O=0;O<N.length;O++){var Y=N[O],re=Y.getSnapshot;Y=Y.value;try{if(!to(re(),Y))return!1}catch{return!1}}}if(N=p.child,p.subtreeFlags&16384&&N!==null)N.return=p,p=N;else{if(p===m)break;for(;p.sibling===null;){if(p.return===null||p.return===m)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function df(m,p){for(p&=~iS,p&=~Tw,m.suspendedLanes|=p,m.pingedLanes&=~p,m=m.expirationTimes;0<p;){var N=31-Tr(p),O=1<<N;m[N]=-1,p&=~O}}function k9(m){if((On&6)!==0)throw Error(r(327));Jg();var p=ke(m,0);if((p&1)===0)return Zo(m,wt()),null;var N=Pw(m,p);if(m.tag!==0&&N===2){var O=Jr(m);O!==0&&(p=O,N=uS(m,O))}if(N===1)throw N=Sx,Ih(m,0),df(m,p),Zo(m,wt()),N;if(N===6)throw Error(r(345));return m.finishedWork=m.current.alternate,m.finishedLanes=p,Lh(m,Qo,Md),Zo(m,wt()),null}function fS(m,p){var N=On;On|=1;try{return m(p)}finally{On=N,On===0&&(Xg=wt()+500,W0&&Su())}}function Rh(m){cf!==null&&cf.tag===0&&(On&6)===0&&Jg();var p=On;On|=1;var N=ec.transition,O=un;try{if(ec.transition=null,un=1,m)return m()}finally{un=O,ec.transition=N,On=p,(On&6)===0&&Su()}}function hS(){Sl=Yg.current,us(Yg)}function Ih(m,p){m.finishedWork=null,m.finishedLanes=0;var N=m.timeoutHandle;if(N!==-1&&(m.timeoutHandle=-1,ox(N)),Ra!==null)for(N=Ra.return;N!==null;){var O=N;switch(Oa(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&U0();break;case 3:ks(),us(ci),us(Ka),di();break;case 5:zc(O);break;case 4:ks();break;case 13:us(ds);break;case 19:us(ds);break;case 10:Og(O.type._context);break;case 22:case 23:hS()}N=N.return}if(gi=m,Ra=m=ff(m.current,null),Li=Sl=p,Xa=0,Sx=null,iS=Tw=Oh=0,Qo=kx=null,Yl!==null){for(p=0;p<Yl.length;p++)if(N=Yl[p],O=N.interleaved,O!==null){N.interleaved=null;var Y=O.next,re=N.pending;if(re!==null){var xe=re.next;re.next=Y,O.next=xe}N.pending=O}Yl=null}return m}function T9(m,p){do{var N=Ra;try{if(Dg(),J0.current=rf,_l){for(var O=Yn.memoizedState;O!==null;){var Y=O.queue;Y!==null&&(Y.pending=null),O=O.next}_l=!1}if(Oi=0,na=Bs=Yn=null,Eu=!1,Jo=0,aS.current=null,N===null||N.return===null){Xa=1,Sx=p,Ra=null;break}e:{var re=m,xe=N.return,Oe=N,Ge=p;if(p=Li,Oe.flags|=32768,Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var bt=Ge,Kt=Oe,Qt=Kt.tag;if((Kt.mode&1)===0&&(Qt===0||Qt===11||Qt===15)){var Vt=Kt.alternate;Vt?(Kt.updateQueue=Vt.updateQueue,Kt.memoizedState=Vt.memoizedState,Kt.lanes=Vt.lanes):(Kt.updateQueue=null,Kt.memoizedState=null)}var Cr=D(xe);if(Cr!==null){Cr.flags&=-257,W(Cr,xe,Oe,re,p),Cr.mode&1&&S(re,bt,p),p=Cr,Ge=bt;var Or=p.updateQueue;if(Or===null){var Lr=new Set;Lr.add(Ge),p.updateQueue=Lr}else Or.add(Ge);break e}else{if((p&1)===0){S(re,bt,p),mS();break e}Ge=Error(r(426))}}else if(Vn&&Oe.mode&1){var Sa=D(xe);if(Sa!==null){(Sa.flags&65536)===0&&(Sa.flags|=256),W(Sa,xe,Oe,re,p),Eh(Pd(Ge,Oe));break e}}re=Ge=Pd(Ge,Oe),Xa!==4&&(Xa=2),kx===null?kx=[re]:kx.push(re),re=xe;do{switch(re.tag){case 3:re.flags|=65536,p&=-p,re.lanes|=p;var lt=bw(re,Ge,p);Mh(re,lt);break e;case 1:Oe=Ge;var et=re.type,mt=re.stateNode;if((re.flags&128)===0&&(typeof et.getDerivedStateFromError=="function"||mt!==null&&typeof mt.componentDidCatch=="function"&&(lf===null||!lf.has(mt)))){re.flags|=65536,p&=-p,re.lanes|=p;var ir=w(re,Oe,p);Mh(re,ir);break e}}re=re.return}while(re!==null)}E9(N)}catch(Br){p=Br,Ra===N&&N!==null&&(Ra=N=N.return);continue}break}while(!0)}function C9(){var m=kw.current;return kw.current=rf,m===null?rf:m}function mS(){(Xa===0||Xa===3||Xa===2)&&(Xa=4),gi===null||(Oh&268435455)===0&&(Tw&268435455)===0||df(gi,Li)}function Pw(m,p){var N=On;On|=2;var O=C9();(gi!==m||Li!==p)&&(Md=null,Ih(m,p));do try{lJ();break}catch(Y){T9(m,Y)}while(!0);if(Dg(),On=N,kw.current=O,Ra!==null)throw Error(r(261));return gi=null,Li=0,Xa}function lJ(){for(;Ra!==null;)N9(Ra)}function cJ(){for(;Ra!==null&&!Ye();)N9(Ra)}function N9(m){var p=P9(m.alternate,m,Sl);m.memoizedProps=m.pendingProps,p===null?E9(m):Ra=p,aS.current=null}function E9(m){var p=m;do{var N=p.alternate;if(m=p.return,(p.flags&32768)===0){if(N=tJ(N,p,Sl),N!==null){Ra=N;return}}else{if(N=rJ(N,p),N!==null){N.flags&=32767,Ra=N;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Xa=6,Ra=null;return}}if(p=p.sibling,p!==null){Ra=p;return}Ra=p=m}while(p!==null);Xa===0&&(Xa=5)}function Lh(m,p,N){var O=un,Y=ec.transition;try{ec.transition=null,un=1,uJ(m,p,N,O)}finally{ec.transition=Y,un=O}return null}function uJ(m,p,N,O){do Jg();while(cf!==null);if((On&6)!==0)throw Error(r(327));N=m.finishedWork;var Y=m.finishedLanes;if(N===null)return null;if(m.finishedWork=null,m.finishedLanes=0,N===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0;var re=N.lanes|N.childLanes;if(Vs(m,re),m===gi&&(Ra=gi=null,Li=0),(N.subtreeFlags&2064)===0&&(N.flags&2064)===0||Nw||(Nw=!0,M9(_r,function(){return Jg(),null})),re=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||re){re=ec.transition,ec.transition=null;var xe=un;un=1;var Oe=On;On|=4,aS.current=null,sJ(m,N),y9(N,m),yh(ax),og=!!sx,ax=sx=null,m.current=N,aJ(N),ot(),On=Oe,un=xe,ec.transition=re}else m.current=N;if(Nw&&(Nw=!1,cf=m,Ew=Y),re=m.pendingLanes,re===0&&(lf=null),$r(N.stateNode),Zo(m,wt()),p!==null)for(O=m.onRecoverableError,N=0;N<p.length;N++)Y=p[N],O(Y.value,{componentStack:Y.stack,digest:Y.digest});if(Cw)throw Cw=!1,m=lS,lS=null,m;return(Ew&1)!==0&&m.tag!==0&&Jg(),re=m.pendingLanes,(re&1)!==0?m===cS?Tx++:(Tx=0,cS=m):Tx=0,Su(),null}function Jg(){if(cf!==null){var m=gl(Ew),p=ec.transition,N=un;try{if(ec.transition=null,un=16>m?16:m,cf===null)var O=!1;else{if(m=cf,cf=null,Ew=0,(On&6)!==0)throw Error(r(331));var Y=On;for(On|=4,Pr=m.current;Pr!==null;){var re=Pr,xe=re.child;if((Pr.flags&16)!==0){var Oe=re.deletions;if(Oe!==null){for(var Ge=0;Ge<Oe.length;Ge++){var bt=Oe[Ge];for(Pr=bt;Pr!==null;){var Kt=Pr;switch(Kt.tag){case 0:case 11:case 15:_x(8,Kt,re)}var Qt=Kt.child;if(Qt!==null)Qt.return=Kt,Pr=Qt;else for(;Pr!==null;){Kt=Pr;var Vt=Kt.sibling,Cr=Kt.return;if(h9(Kt),Kt===bt){Pr=null;break}if(Vt!==null){Vt.return=Cr,Pr=Vt;break}Pr=Cr}}}var Or=re.alternate;if(Or!==null){var Lr=Or.child;if(Lr!==null){Or.child=null;do{var Sa=Lr.sibling;Lr.sibling=null,Lr=Sa}while(Lr!==null)}}Pr=re}}if((re.subtreeFlags&2064)!==0&&xe!==null)xe.return=re,Pr=xe;else e:for(;Pr!==null;){if(re=Pr,(re.flags&2048)!==0)switch(re.tag){case 0:case 11:case 15:_x(9,re,re.return)}var lt=re.sibling;if(lt!==null){lt.return=re.return,Pr=lt;break e}Pr=re.return}}var et=m.current;for(Pr=et;Pr!==null;){xe=Pr;var mt=xe.child;if((xe.subtreeFlags&2064)!==0&&mt!==null)mt.return=xe,Pr=mt;else e:for(xe=et;Pr!==null;){if(Oe=Pr,(Oe.flags&2048)!==0)try{switch(Oe.tag){case 0:case 11:case 15:Sw(9,Oe)}}catch(Br){aa(Oe,Oe.return,Br)}if(Oe===xe){Pr=null;break e}var ir=Oe.sibling;if(ir!==null){ir.return=Oe.return,Pr=ir;break e}Pr=Oe.return}}if(On=Y,Su(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Ur,m)}catch{}O=!0}return O}finally{un=N,ec.transition=p}}return!1}function A9(m,p,N){p=Pd(N,p),p=bw(m,p,1),m=Ql(m,p,1),p=Mo(),m!==null&&(ls(m,1,p),Zo(m,p))}function aa(m,p,N){if(m.tag===3)A9(m,m,N);else for(;p!==null;){if(p.tag===3){A9(p,m,N);break}else if(p.tag===1){var O=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(lf===null||!lf.has(O))){m=Pd(N,m),m=w(p,m,1),p=Ql(p,m,1),m=Mo(),p!==null&&(ls(p,1,m),Zo(p,m));break}}p=p.return}}function dJ(m,p,N){var O=m.pingCache;O!==null&&O.delete(p),p=Mo(),m.pingedLanes|=m.suspendedLanes&N,gi===m&&(Li&N)===N&&(Xa===4||Xa===3&&(Li&130023424)===Li&&500>wt()-oS?Ih(m,0):iS|=N),Zo(m,p)}function j9(m,p){p===0&&((m.mode&1)===0?p=1:(p=os,os<<=1,(os&130023424)===0&&(os=4194304)));var N=Mo();m=jo(m,p),m!==null&&(ls(m,p,N),Zo(m,N))}function fJ(m){var p=m.memoizedState,N=0;p!==null&&(N=p.retryLane),j9(m,N)}function hJ(m,p){var N=0;switch(m.tag){case 13:var O=m.stateNode,Y=m.memoizedState;Y!==null&&(N=Y.retryLane);break;case 19:O=m.stateNode;break;default:throw Error(r(314))}O!==null&&O.delete(p),j9(m,N)}var P9;P9=function(m,p,N){if(m!==null)if(m.memoizedProps!==p.pendingProps||ci.current)oe=!0;else{if((m.lanes&N)===0&&(p.flags&128)===0)return oe=!1,Z3(m,p,N);oe=(m.flags&131072)!==0}else oe=!1,Vn&&(p.flags&1048576)!==0&&uw(p,Tu,p.index);switch(p.lanes=0,p.tag){case 2:var O=p.type;An(m,p),m=p.pendingProps;var Y=_d(p,Ka.current);$c(p,N),Y=Q0(null,p,O,m,Y,N);var re=Z0();return p.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ui(O)?(re=!0,Sd(p)):re=!1,p.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Ph(p),Y.updater=sf,p.stateNode=Y,Y._reactInternals=p,Vg(p,O,m,N),p=qn(null,p,O,!0,re,N)):(p.tag=0,Vn&&re&&H0(p),Ce(null,p,Y,N),p=p.child),p;case 16:O=p.elementType;e:{switch(An(m,p),m=p.pendingProps,Y=O._init,O=Y(O._payload),p.type=O,Y=p.tag=gJ(O),m=Ya(O,m),Y){case 0:p=br(null,p,O,m,N);break e;case 1:p=fs(null,p,O,m,N);break e;case 11:p=tt(null,p,O,m,N);break e;case 14:p=_t(null,p,O,Ya(O.type,m),N);break e}throw Error(r(306,O,""))}return p;case 0:return O=p.type,Y=p.pendingProps,Y=p.elementType===O?Y:Ya(O,Y),br(m,p,O,Y,N);case 1:return O=p.type,Y=p.pendingProps,Y=p.elementType===O?Y:Ya(O,Y),fs(m,p,O,Y,N);case 3:e:{if(Ri(p),m===null)throw Error(r(387));O=p.pendingProps,re=p.memoizedState,Y=re.element,Ig(m,p),K0(p,O,null,N);var xe=p.memoizedState;if(O=xe.element,re.isDehydrated)if(re={element:O,isDehydrated:!1,cache:xe.cache,pendingSuspenseBoundaries:xe.pendingSuspenseBoundaries,transitions:xe.transitions},p.updateQueue.baseState=re,p.memoizedState=re,p.flags&256){Y=Pd(Error(r(423)),p),p=Zl(m,p,O,N,Y);break e}else if(O!==Y){Y=Pd(Error(r(424)),p),p=Zl(m,p,O,N,Y);break e}else for(vr=Gl(p.stateNode.containerInfo.firstChild),No=p,Vn=!0,Eo=null,N=Xo(p,null,O,N),p.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Nd(),O===Y){p=mi(m,p,N);break e}Ce(m,p,O,N)}p=p.child}return p;case 5:return Y0(p),m===null&&G0(p),O=p.type,Y=p.pendingProps,re=m!==null?m.memoizedProps:null,xe=Y.children,ix(O,Y)?xe=null:re!==null&&ix(O,re)&&(p.flags|=32),dn(m,p),Ce(m,p,xe,N),p.child;case 6:return m===null&&G0(p),null;case 13:return Mt(m,p,N);case 4:return Nu(p,p.stateNode.containerInfo),O=p.pendingProps,m===null?p.child=Ed(p,null,O,N):Ce(m,p,O,N),p.child;case 11:return O=p.type,Y=p.pendingProps,Y=p.elementType===O?Y:Ya(O,Y),tt(m,p,O,Y,N);case 7:return Ce(m,p,p.pendingProps,N),p.child;case 8:return Ce(m,p,p.pendingProps.children,N),p.child;case 12:return Ce(m,p,p.pendingProps.children,N),p.child;case 10:e:{if(O=p.type._context,Y=p.pendingProps,re=p.memoizedProps,xe=Y.value,Qn(Ah,O._currentValue),O._currentValue=xe,re!==null)if(to(re.value,xe)){if(re.children===Y.children&&!ci.current){p=mi(m,p,N);break e}}else for(re=p.child,re!==null&&(re.return=p);re!==null;){var Oe=re.dependencies;if(Oe!==null){xe=re.child;for(var Ge=Oe.firstContext;Ge!==null;){if(Ge.context===O){if(re.tag===1){Ge=Jl(-1,N&-N),Ge.tag=2;var bt=re.updateQueue;if(bt!==null){bt=bt.shared;var Kt=bt.pending;Kt===null?Ge.next=Ge:(Ge.next=Kt.next,Kt.next=Ge),bt.pending=Ge}}re.lanes|=N,Ge=re.alternate,Ge!==null&&(Ge.lanes|=N),Rg(re.return,N,p),Oe.lanes|=N;break}Ge=Ge.next}}else if(re.tag===10)xe=re.type===p.type?null:re.child;else if(re.tag===18){if(xe=re.return,xe===null)throw Error(r(341));xe.lanes|=N,Oe=xe.alternate,Oe!==null&&(Oe.lanes|=N),Rg(xe,N,p),xe=re.sibling}else xe=re.child;if(xe!==null)xe.return=re;else for(xe=re;xe!==null;){if(xe===p){xe=null;break}if(re=xe.sibling,re!==null){re.return=xe.return,xe=re;break}xe=xe.return}re=xe}Ce(m,p,Y.children,N),p=p.child}return p;case 9:return Y=p.type,O=p.pendingProps.children,$c(p,N),Y=Di(Y),O=O(Y),p.flags|=1,Ce(m,p,O,N),p.child;case 14:return O=p.type,Y=Ya(O,p.pendingProps),Y=Ya(O.type,Y),_t(m,p,O,Y,N);case 15:return sr(m,p,p.type,p.pendingProps,N);case 17:return O=p.type,Y=p.pendingProps,Y=p.elementType===O?Y:Ya(O,Y),An(m,p),p.tag=1,ui(O)?(m=!0,Sd(p)):m=!1,$c(p,N),ww(p,O,Y),Vg(p,O,Y,N),qn(null,p,O,!0,m,N);case 19:return _a(m,p,N);case 22:return jr(m,p,N)}throw Error(r(156,p.tag))};function M9(m,p){return Pe(m,p)}function mJ(m,p,N,O){this.tag=m,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tc(m,p,N,O){return new mJ(m,p,N,O)}function gS(m){return m=m.prototype,!(!m||!m.isReactComponent)}function gJ(m){if(typeof m=="function")return gS(m)?1:0;if(m!=null){if(m=m.$$typeof,m===V)return 11;if(m===Z)return 14}return 2}function ff(m,p){var N=m.alternate;return N===null?(N=tc(m.tag,p,m.key,m.mode),N.elementType=m.elementType,N.type=m.type,N.stateNode=m.stateNode,N.alternate=m,m.alternate=N):(N.pendingProps=p,N.type=m.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=m.flags&14680064,N.childLanes=m.childLanes,N.lanes=m.lanes,N.child=m.child,N.memoizedProps=m.memoizedProps,N.memoizedState=m.memoizedState,N.updateQueue=m.updateQueue,p=m.dependencies,N.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},N.sibling=m.sibling,N.index=m.index,N.ref=m.ref,N}function Mw(m,p,N,O,Y,re){var xe=2;if(O=m,typeof m=="function")gS(m)&&(xe=1);else if(typeof m=="string")xe=5;else e:switch(m){case P:return Bh(N.children,Y,re,p);case A:xe=8,Y|=8;break;case M:return m=tc(12,N,p,Y|2),m.elementType=M,m.lanes=re,m;case ee:return m=tc(13,N,p,Y),m.elementType=ee,m.lanes=re,m;case ae:return m=tc(19,N,p,Y),m.elementType=ae,m.lanes=re,m;case L:return Fw(N,Y,re,p);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case F:xe=10;break e;case B:xe=9;break e;case V:xe=11;break e;case Z:xe=14;break e;case te:xe=16,O=null;break e}throw Error(r(130,m==null?m:typeof m,""))}return p=tc(xe,N,p,Y),p.elementType=m,p.type=O,p.lanes=re,p}function Bh(m,p,N,O){return m=tc(7,m,O,p),m.lanes=N,m}function Fw(m,p,N,O){return m=tc(22,m,O,p),m.elementType=L,m.lanes=N,m.stateNode={isHidden:!1},m}function pS(m,p,N){return m=tc(6,m,null,p),m.lanes=N,m}function xS(m,p,N){return p=tc(4,m.children!==null?m.children:[],m.key,p),p.lanes=N,p.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},p}function pJ(m,p,N,O,Y){this.tag=p,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=En(0),this.expirationTimes=En(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=En(0),this.identifierPrefix=O,this.onRecoverableError=Y,this.mutableSourceEagerHydrationData=null}function yS(m,p,N,O,Y,re,xe,Oe,Ge){return m=new pJ(m,p,N,Oe,Ge),p===1?(p=1,re===!0&&(p|=8)):p=0,re=tc(3,null,null,p),m.current=re,re.stateNode=m,re.memoizedState={element:O,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(re),m}function xJ(m,p,N){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:O==null?null:""+O,children:m,containerInfo:p,implementation:N}}function F9(m){if(!m)return ql;m=m._reactInternals;e:{if(Se(m)!==m||m.tag!==1)throw Error(r(170));var p=m;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ui(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(m.tag===1){var N=m.type;if(ui(N))return Ag(m,N,p)}return p}function D9(m,p,N,O,Y,re,xe,Oe,Ge){return m=yS(N,O,!0,m,Y,re,xe,Oe,Ge),m.context=F9(null),N=m.current,O=Mo(),Y=uf(N),re=Jl(O,Y),re.callback=p??null,Ql(N,re,Y),m.current.lanes=Y,ls(m,Y,O),Zo(m,O),m}function Dw(m,p,N,O){var Y=p.current,re=Mo(),xe=uf(Y);return N=F9(N),p.context===null?p.context=N:p.pendingContext=N,p=Jl(re,xe),p.payload={element:m},O=O===void 0?null:O,O!==null&&(p.callback=O),m=Ql(Y,p,xe),m!==null&&(Vc(m,Y,xe,re),Lg(m,Y,xe)),xe}function Ow(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function O9(m,p){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var N=m.retryLane;m.retryLane=N!==0&&N<p?N:p}}function vS(m,p){O9(m,p),(m=m.alternate)&&O9(m,p)}function yJ(){return null}var R9=typeof reportError=="function"?reportError:function(m){console.error(m)};function wS(m){this._internalRoot=m}Rw.prototype.render=wS.prototype.render=function(m){var p=this._internalRoot;if(p===null)throw Error(r(409));Dw(m,p,null,null)},Rw.prototype.unmount=wS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var p=m.containerInfo;Rh(function(){Dw(null,m,null,null)}),p[Vl]=null}};function Rw(m){this._internalRoot=m}Rw.prototype.unstable_scheduleHydration=function(m){if(m){var p=qe();m={blockedOn:null,target:m,priority:p};for(var N=0;N<nr.length&&p!==0&&p<nr[N].priority;N++);nr.splice(N,0,m),N===0&&_n(m)}};function bS(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Iw(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function I9(){}function vJ(m,p,N,O,Y){if(Y){if(typeof O=="function"){var re=O;O=function(){var bt=Ow(xe);re.call(bt)}}var xe=D9(p,O,m,0,null,!1,!1,"",I9);return m._reactRootContainer=xe,m[Vl]=xe.current,xd(m.nodeType===8?m.parentNode:m),Rh(),xe}for(;Y=m.lastChild;)m.removeChild(Y);if(typeof O=="function"){var Oe=O;O=function(){var bt=Ow(Ge);Oe.call(bt)}}var Ge=yS(m,0,!1,null,null,!1,!1,"",I9);return m._reactRootContainer=Ge,m[Vl]=Ge.current,xd(m.nodeType===8?m.parentNode:m),Rh(function(){Dw(p,Ge,N,O)}),Ge}function Lw(m,p,N,O,Y){var re=N._reactRootContainer;if(re){var xe=re;if(typeof Y=="function"){var Oe=Y;Y=function(){var Ge=Ow(xe);Oe.call(Ge)}}Dw(p,xe,m,Y)}else xe=vJ(N,p,m,Y,O);return Ow(xe)}Ie=function(m){switch(m.tag){case 3:var p=m.stateNode;if(p.current.memoizedState.isDehydrated){var N=hn(p.pendingLanes);N!==0&&(li(p,N|1),Zo(p,wt()),(On&6)===0&&(Xg=wt()+500,Su()))}break;case 13:Rh(function(){var O=jo(m,1);if(O!==null){var Y=Mo();Vc(O,m,1,Y)}}),vS(m,1)}},Pt=function(m){if(m.tag===13){var p=jo(m,134217728);if(p!==null){var N=Mo();Vc(p,m,134217728,N)}vS(m,134217728)}},De=function(m){if(m.tag===13){var p=uf(m),N=jo(m,p);if(N!==null){var O=Mo();Vc(N,m,p,O)}vS(m,p)}},qe=function(){return un},Lt=function(m,p){var N=un;try{return un=m,p()}finally{un=N}},he=function(m,p,N){switch(p){case"input":if(Me(m,N),p=N.name,N.type==="radio"&&p!=null){for(N=m;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<N.length;p++){var O=N[p];if(O!==m&&O.form===m.form){var Y=Da(O);if(!Y)throw Error(r(90));ce(O),Me(O,Y)}}}break;case"textarea":or(m,N);break;case"select":p=N.value,p!=null&&At(m,!!N.multiple,p,!1)}},lr=fS,Ke=Rh;var wJ={usingClientEntryPoint:!1,Events:[Th,va,Da,xt,$t,fS]},Cx={findFiberByHostInstance:bu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bJ={bundleType:Cx.bundleType,version:Cx.version,rendererPackageName:Cx.rendererPackageName,rendererConfig:Cx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=de(m),m===null?null:m.stateNode},findFiberByHostInstance:Cx.findFiberByHostInstance||yJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bw.isDisabled&&Bw.supportsFiber)try{Ur=Bw.inject(bJ),Fr=Bw}catch{}}return el.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wJ,el.createPortal=function(m,p){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bS(p))throw Error(r(200));return xJ(m,p,null,N)},el.createRoot=function(m,p){if(!bS(m))throw Error(r(299));var N=!1,O="",Y=R9;return p!=null&&(p.unstable_strictMode===!0&&(N=!0),p.identifierPrefix!==void 0&&(O=p.identifierPrefix),p.onRecoverableError!==void 0&&(Y=p.onRecoverableError)),p=yS(m,1,!1,null,null,N,!1,O,Y),m[Vl]=p.current,xd(m.nodeType===8?m.parentNode:m),new wS(p)},el.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var p=m._reactInternals;if(p===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=de(p),m=m===null?null:m.stateNode,m},el.flushSync=function(m){return Rh(m)},el.hydrate=function(m,p,N){if(!Iw(p))throw Error(r(200));return Lw(null,m,p,!0,N)},el.hydrateRoot=function(m,p,N){if(!bS(m))throw Error(r(405));var O=N!=null&&N.hydratedSources||null,Y=!1,re="",xe=R9;if(N!=null&&(N.unstable_strictMode===!0&&(Y=!0),N.identifierPrefix!==void 0&&(re=N.identifierPrefix),N.onRecoverableError!==void 0&&(xe=N.onRecoverableError)),p=D9(p,null,m,1,N??null,Y,!1,re,xe),m[Vl]=p.current,xd(m),O)for(m=0;m<O.length;m++)N=O[m],Y=N._getVersion,Y=Y(N._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[N,Y]:p.mutableSourceEagerHydrationData.push(N,Y);return new Rw(p)},el.render=function(m,p,N){if(!Iw(p))throw Error(r(200));return Lw(null,m,p,!1,N)},el.unmountComponentAtNode=function(m){if(!Iw(m))throw Error(r(40));return m._reactRootContainer?(Rh(function(){Lw(null,null,m,!1,function(){m._reactRootContainer=null,m[Vl]=null})}),!0):!1},el.unstable_batchedUpdates=fS,el.unstable_renderSubtreeIntoContainer=function(m,p,N,O){if(!Iw(N))throw Error(r(200));if(m==null||m._reactInternals===void 0)throw Error(r(38));return Lw(m,p,N,!1,O)},el.version="18.3.1-next-f1338f8080-20240426",el}var G9;function eB(){if(G9)return kS.exports;G9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kS.exports=EJ(),kS.exports}var V9;function AJ(){if(V9)return $w;V9=1;var e=eB();return $w.createRoot=e.createRoot,$w.hydrateRoot=e.hydrateRoot,$w}var jJ=AJ();const PJ=Ec(jJ);var Tk=eB();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lv.apply(this,arguments)}var kf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(kf||(kf={}));const q9="popstate";function MJ(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return Ck("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:r4(s)}return DJ(t,r,null,e)}function Aa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tB(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function FJ(){return Math.random().toString(36).substr(2,8)}function K9(e,t){return{usr:e.state,key:e.key,idx:t}}function Ck(e,t,r,n){return r===void 0&&(r=null),lv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?s1(t):t,{state:r,key:t&&t.key||n||FJ()})}function r4(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function s1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function DJ(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=kf.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(lv({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=kf.Pop;let v=d(),T=v==null?null:v-u;u=v,c&&c({action:o,location:y.location,delta:T})}function h(v,T){o=kf.Push;let k=Ck(y.location,v,T);u=d()+1;let b=K9(k,u),C=y.createHref(k);try{i.pushState(b,"",C)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(C)}a&&c&&c({action:o,location:y.location,delta:1})}function g(v,T){o=kf.Replace;let k=Ck(y.location,v,T);u=d();let b=K9(k,u),C=y.createHref(k);i.replaceState(b,"",C),a&&c&&c({action:o,location:y.location,delta:0})}function x(v){let T=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof v=="string"?v:r4(v);return k=k.replace(/ $/,"%20"),Aa(T,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,T)}let y={get action(){return o},get location(){return e(s,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(q9,f),c=v,()=>{s.removeEventListener(q9,f),c=null}},createHref(v){return t(s,v)},createURL:x,encodeLocation(v){let T=x(v);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:h,replace:g,go(v){return i.go(v)}};return y}var Y9;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Y9||(Y9={}));function OJ(e,t,r){return r===void 0&&(r="/"),RJ(e,t,r)}function RJ(e,t,r,n){let s=typeof t=="string"?s1(t):t,a=HT(s.pathname||"/",r);if(a==null)return null;let i=rB(e);IJ(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let u=YJ(a);o=VJ(i[c],u)}return o}function rB(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(Aa(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Pf([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(Aa(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),rB(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:HJ(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let c of nB(a.path))s(a,i,c)}),t}function nB(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=nB(n.join("/")),o=[];return o.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function IJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:GJ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const LJ=/^:[\w-]+$/,BJ=3,$J=2,zJ=1,UJ=10,WJ=-2,X9=e=>e==="*";function HJ(e,t){let r=e.split("/"),n=r.length;return r.some(X9)&&(n+=WJ),t&&(n+=$J),r.filter(s=>!X9(s)).reduce((s,a)=>s+(LJ.test(a)?BJ:a===""?zJ:UJ),n)}function GJ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function VJ(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=qJ({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:Pf([a,f.pathname]),pathnameBase:ZJ(Pf([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=Pf([a,f.pathnameBase]))}return i}function qJ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=KJ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let y=o[f]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[f];return g&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function KJ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),tB(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function YJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tB(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function HT(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function XJ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?s1(e):e;return{pathname:r?r.startsWith("/")?r:JJ(r,t):t,search:eQ(n),hash:tQ(s)}}function JJ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function NS(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QJ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function GT(e,t){let r=QJ(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function VT(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=s1(e):(s=lv({},e),Aa(!s.pathname||!s.pathname.includes("?"),NS("?","pathname","search",s)),Aa(!s.pathname||!s.pathname.includes("#"),NS("#","pathname","hash",s)),Aa(!s.search||!s.search.includes("#"),NS("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=XJ(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Pf=e=>e.join("/").replace(/\/\/+/g,"/"),ZJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function rQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const sB=["post","put","patch","delete"];new Set(sB);const nQ=["get",...sB];new Set(nQ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cv(){return cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cv.apply(this,arguments)}const qT=_.createContext(null),sQ=_.createContext(null),Xf=_.createContext(null),A_=_.createContext(null),x0=_.createContext({outlet:null,matches:[],isDataRoute:!1}),aB=_.createContext(null);function aQ(e,t){let{relative:r}=t===void 0?{}:t;a1()||Aa(!1);let{basename:n,navigator:s}=_.useContext(Xf),{hash:a,pathname:i,search:o}=oB(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:Pf([n,i])),s.createHref({pathname:c,search:o,hash:a})}function a1(){return _.useContext(A_)!=null}function y0(){return a1()||Aa(!1),_.useContext(A_).location}function iB(e){_.useContext(Xf).static||_.useLayoutEffect(e)}function Wo(){let{isDataRoute:e}=_.useContext(x0);return e?yQ():iQ()}function iQ(){a1()||Aa(!1);let e=_.useContext(qT),{basename:t,future:r,navigator:n}=_.useContext(Xf),{matches:s}=_.useContext(x0),{pathname:a}=y0(),i=JSON.stringify(GT(s,r.v7_relativeSplatPath)),o=_.useRef(!1);return iB(()=>{o.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=VT(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Pf([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,a,e])}function j_(){let{matches:e}=_.useContext(x0),t=e[e.length-1];return t?t.params:{}}function oB(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=_.useContext(Xf),{matches:s}=_.useContext(x0),{pathname:a}=y0(),i=JSON.stringify(GT(s,n.v7_relativeSplatPath));return _.useMemo(()=>VT(e,JSON.parse(i),a,r==="path"),[e,i,a,r])}function oQ(e,t){return lQ(e,t)}function lQ(e,t,r,n){a1()||Aa(!1);let{navigator:s}=_.useContext(Xf),{matches:a}=_.useContext(x0),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=y0(),d;if(t){var f;let v=typeof t=="string"?s1(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Aa(!1),d=v}else d=u;let h=d.pathname||"/",g=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=OJ(e,{pathname:g}),y=hQ(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Pf([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Pf([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&y?_.createElement(A_.Provider,{value:{location:cv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:kf.Pop}},y):y}function cQ(){let e=xQ(),t=rQ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:s},r):null,null)}const uQ=_.createElement(cQ,null);class dQ extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(x0.Provider,{value:this.props.routeContext},_.createElement(aB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fQ(e){let{routeContext:t,match:r,children:n}=e,s=_.useContext(qT);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(x0.Provider,{value:t},n)}function hQ(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||Aa(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:g}=r,x=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let g,x=!1,y=null,v=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||uQ,c&&(u<0&&h===0?(vQ("route-fallback"),x=!0,v=null):u===h&&(x=!0,v=f.route.hydrateFallbackElement||null)));let T=t.concat(i.slice(0,h+1)),k=()=>{let b;return g?b=y:x?b=v:f.route.Component?b=_.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,_.createElement(fQ,{match:f,routeContext:{outlet:d,matches:T,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?_.createElement(dQ,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:k(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):k()},null)}var lB=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(lB||{}),cB=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(cB||{});function mQ(e){let t=_.useContext(qT);return t||Aa(!1),t}function gQ(e){let t=_.useContext(sQ);return t||Aa(!1),t}function pQ(e){let t=_.useContext(x0);return t||Aa(!1),t}function uB(e){let t=pQ(),r=t.matches[t.matches.length-1];return r.route.id||Aa(!1),r.route.id}function xQ(){var e;let t=_.useContext(aB),r=gQ(),n=uB();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function yQ(){let{router:e}=mQ(lB.UseNavigateStable),t=uB(cB.UseNavigateStable),r=_.useRef(!1);return iB(()=>{r.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,cv({fromRouteId:t},a)))},[e,t])}const J9={};function vQ(e,t,r){J9[e]||(J9[e]=!0)}function wQ(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Lp(e){let{to:t,replace:r,state:n,relative:s}=e;a1()||Aa(!1);let{future:a,static:i}=_.useContext(Xf),{matches:o}=_.useContext(x0),{pathname:c}=y0(),u=Wo(),d=VT(t,GT(o,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return _.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Xs(e){Aa(!1)}function bQ(e){let{basename:t="/",children:r=null,location:n,navigationType:s=kf.Pop,navigator:a,static:i=!1,future:o}=e;a1()&&Aa(!1);let c=t.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:a,static:i,future:cv({v7_relativeSplatPath:!1},o)}),[c,o,a,i]);typeof n=="string"&&(n=s1(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:x="default"}=n,y=_.useMemo(()=>{let v=HT(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:g,key:x},navigationType:s}},[c,d,f,h,g,x,s]);return y==null?null:_.createElement(Xf.Provider,{value:u},_.createElement(A_.Provider,{children:r,value:y}))}function KT(e){let{children:t,location:r}=e;return oQ(Nk(t),r)}new Promise(()=>{});function Nk(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,s)=>{if(!_.isValidElement(n))return;let a=[...t,s];if(n.type===_.Fragment){r.push.apply(r,Nk(n.props.children,a));return}n.type!==Xs&&Aa(!1),!n.props.index||!n.props.children||Aa(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Nk(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ek(){return Ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ek.apply(this,arguments)}function _Q(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function SQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function kQ(e,t){return e.button===0&&(!t||t==="_self")&&!SQ(e)}const TQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CQ="6";try{window.__reactRouterVersion=CQ}catch{}const NQ="startTransition",Q9=ZL[NQ];function EQ(e){let{basename:t,children:r,future:n,window:s}=e,a=_.useRef();a.current==null&&(a.current=MJ({window:s,v5Compat:!0}));let i=a.current,[o,c]=_.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=_.useCallback(f=>{u&&Q9?Q9(()=>c(f)):c(f)},[c,u]);return _.useLayoutEffect(()=>i.listen(d),[i,d]),_.useEffect(()=>wQ(n),[n]),_.createElement(bQ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const AQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dB=_.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:i,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=_Q(t,TQ),{basename:g}=_.useContext(Xf),x,y=!1;if(typeof u=="string"&&jQ.test(u)&&(x=u,AQ))try{let b=new URL(window.location.href),C=u.startsWith("//")?new URL(b.protocol+u):new URL(u),E=HT(C.pathname,g);C.origin===b.origin&&E!=null?u=E+C.search+C.hash:y=!0}catch{}let v=aQ(u,{relative:s}),T=PQ(u,{replace:i,state:o,target:c,preventScrollReset:d,relative:s,viewTransition:f});function k(b){n&&n(b),b.defaultPrevented||T(b)}return _.createElement("a",Ek({},h,{href:x||v,onClick:y||a?n:k,ref:r,target:c}))});var Z9;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Z9||(Z9={}));var eA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(eA||(eA={}));function PQ(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o}=t===void 0?{}:t,c=Wo(),u=y0(),d=oB(e,{relative:i});return _.useCallback(f=>{if(kQ(f,r)){f.preventDefault();let h=n!==void 0?n:r4(u)===r4(d);c(e,{replace:h,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[u,c,d,n,s,r,e,a,i,o])}const as={student_subjects:1800*1e3,student_active_tests:180*1e3,student_results_table:300*1e3,teacher_subjects:900*1e3,teacher_classes:900*1e3,teacher_tests:600*1e3,teacher_results_table:600*1e3,admin_users:1200*1e3,admin_teachers:1200*1e3,admin_subjects:1800*1e3,admin_academic_years:3600*1e3,admin_tests:900*1e3,admin_results_table:null,admin_teacher_id:3600*1e3,all_tests:1200*1e3,subjects_dropdown:1800*1e3,grades_classes:3600*1e3,test_progress:120*1e3,anti_cheating:120*1e3,word_matching_test:600*1e3,speaking_test_data:3600*1e3},YT=(e,t={})=>{const{includeExpired:r=!1}=t;try{const n=localStorage.getItem(e);if(!n)return console.log(" Cache: No data found for key:",e),null;const s=JSON.parse(n),{data:a,timestamp:i,ttl:o}=s,c=Date.now()-i,d=typeof o=="number"&&Number.isFinite(o)?c>o:!1;return d&&!r?(console.log(" Cache: Data expired for key:",e,"age:",c,"ttl:",o),localStorage.removeItem(e),null):(console.log(" Cache: Entry found for key:",e,"age:",c,"ttl:",o,"expired:",d),{data:a,timestamp:i,ttl:o,age:c,isExpired:d})}catch(n){return console.log(" Cache: Corrupted data for key:",e,n),localStorage.removeItem(e),null}},Ts=e=>{const t=YT(e);return t?t.data:null},hs=(e,t,r)=>{try{console.log(" Cache: Setting data for key:",e,"ttl:",r),localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:typeof r=="number"&&Number.isFinite(r)?r:r===null?null:void 0})),console.log(" Cache: Data cached successfully for key:",e)}catch{console.log(" Cache: Storage full, cleaning old data for key:",e),fB();try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:typeof r=="number"&&Number.isFinite(r)?r:r===null?null:void 0})),console.log(" Cache: Data cached after cleanup for key:",e)}catch{console.warn("Storage full, cannot cache data")}}},fB=()=>{const e=Date.now(),t=Object.keys(localStorage);t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i,ttl:o}=JSON.parse(a);e-i>o&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const r=e-10080*60*1e3;t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i}=JSON.parse(a);i<r&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const n=Object.keys(localStorage);if(n.length>0){const s=n.map(i=>{try{const o=localStorage.getItem(i);if(o){const{timestamp:c}=JSON.parse(o);return{key:i,timestamp:c}}}catch{return{key:i,timestamp:0}}return{key:i,timestamp:0}}),a=Math.ceil(s.length*.25);s.sort((i,o)=>i.timestamp-o.timestamp).slice(0,a).forEach(({key:i})=>localStorage.removeItem(i))}},XT=e=>{Object.keys(localStorage).forEach(r=>{r.includes(e)&&localStorage.removeItem(r)})},i1=(e,t,r)=>{const n=`test_progress_${e}_${t}_${r}`,s=`anti_cheating_${e}_${t}_${r}`;if(localStorage.removeItem(n),localStorage.removeItem(s),t==="speaking_test_data"){const a=`speaking_test_data_${e}_${r}`;localStorage.removeItem(a),console.log(`Cleared speaking test data cache for ${r}`)}console.log(`Cleared test data for ${t}_${r}`)},hp=Object.freeze(Object.defineProperty({__proto__:null,CACHE_TTL:as,cleanupOldData:fB,clearTestData:i1,clearUserData:XT,getCachedData:Ts,getCachedEntry:YT,setCachedData:hs},Symbol.toStringTag,{value:"Module"}));let qc=null,Ex=null;function Bb(){if(Ex!==null)return Ex;try{const e="_test";localStorage.setItem(e,"test");const t=localStorage.getItem(e);localStorage.removeItem(e),Ex=t==="test"}catch(e){console.warn("localStorage unavailable, falling back to sessionStorage",e),Ex=!1}return Ex}function uv(){return Bb()?localStorage:sessionStorage}async function JT(e){try{const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}catch(t){return console.warn("Hash computation failed",t),btoa(e).replace(/[^a-zA-Z0-9]/g,"").substring(0,64)}}async function MQ(e,t){try{const r=uv();return r.setItem(e,t),r.getItem(e)===t}catch(r){return console.warn("Storage write failed",r),!1}}async function FQ(e,t){try{const r=uv(),n=await JT(t);return r.setItem(`${e}_hash`,n),await MQ(e,t)}catch(r){return console.warn("Failed to store with hash",r),!1}}async function DQ(e){try{const t=uv(),r=t.getItem(e),n=t.getItem(`${e}_hash`);return!r||!n?!1:await JT(r)===n}catch(t){return console.warn("Hash verification failed",t),!1}}async function OQ(e,t=3,r=200){for(let n=0;n<t;n++){if(await e())return!0;await new Promise(a=>setTimeout(a,r))}return!1}const ua={async set(e){const t=Bb(),r=uv();if(!t){console.warn(" localStorage unavailable - using sessionStorage (less persistent)");try{r.setItem("auth_token",e);const a=r.getItem("auth_token")===e;return a&&(qc=e),a}catch(s){return console.error("sessionStorage fallback failed",s),!1}}const n=await OQ(()=>FQ("auth_token",e));return n&&(qc=e),n},async get(){if(qc)return qc;const e=uv();if(!Bb())try{const t=e.getItem("auth_token");return qc=t,t}catch(t){return console.error("sessionStorage fallback read failed",t),null}try{const t=e.getItem("auth_token");if(!t)return qc=null,null;if(e.getItem("auth_token_hash")){if(!await DQ("auth_token"))return qc=null,null}else{console.log("Migrating legacy token to secure storage format...");try{const n=await JT(t);if(e.setItem("auth_token_hash",n),e.getItem("auth_token_hash")!==n)return console.warn("Failed to store hash during migration"),t}catch(n){console.warn("Failed to migrate token hash:",n)}}return qc=t,t}catch(t){return console.warn("Failed to get token",t),qc=null,null}},async clear(){try{Bb()&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_token_hash"))}catch{}try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token_hash")}catch{}qc=null},clearCache(){qc=null}},n4=Object.freeze(Object.defineProperty({__proto__:null,SecureToken:ua},Symbol.toStringTag,{value:"Module"})),hB=_.createContext(),mB=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState(null),[a,i]=_.useState(null),[o,c]=_.useState(!1),[u,d]=_.useState(!0),[f,h]=_.useState(null);_.useEffect(()=>{console.log("[AUTH] Initializing application session..."),v()},[]),_.useEffect(()=>{if(o&&a){console.log("[AUTH] Setting up proactive token refresh...");let U=!1;const R=setInterval(async()=>{if(o&&a&&!U){U=!0;try{const z=a||await(window.tokenManager?.getToken()||ua.get());if(z&&g(z))console.log("[AUTH] Token expired, attempting refresh..."),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in");else if(z)try{const X=JSON.parse(atob(z.split(".")[1])).exp*1e3,ne=Date.now(),q=X-ne;q<300*1e3&&q>0&&(console.log(`[AUTH] Token expires in ${Math.round(q/1e3)} seconds, refreshing...`),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in"))}catch(G){console.error("[AUTH] Error parsing token for expiration check:",G)}}catch(z){console.error("[AUTH] Error in proactive refresh:",z)}finally{U=!1}}},300*1e3);return()=>{console.log("[AUTH] Clearing proactive token refresh interval"),clearInterval(R)}}},[o,a]);const g=U=>{if(!U)return!0;try{if(typeof U!="string"||!U.includes("."))return console.warn("[AUTH] Invalid token format - not a JWT"),!0;const R=U.split(".");if(R.length!==3)return console.warn("[AUTH] Invalid token format - not 3 parts"),!0;const z=JSON.parse(atob(R[1])),G=Date.now()/1e3;return z.exp<=G}catch(R){if(console.error("[AUTH] Error decoding token:",R),console.warn("[AUTH] Token appears to be corrupted - clearing authentication"),ua.clear().catch(()=>{}),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userData"),window.tokenManager)try{window.tokenManager.clearAuth()}catch(z){console.warn("[AUTH] Error clearing token manager:",z)}return!0}},x=async()=>{const U=localStorage.getItem("refresh_token");if(!U)return console.log("[AUTH] No refresh token found"),!1;try{const R=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:U})});if(R.ok){const z=await R.json();console.log("[AUTH] Token refresh successful"),await ua.set(z.accessToken),localStorage.setItem("refresh_token",z.refreshToken),localStorage.setItem("accessToken",z.accessToken);try{window.tokenManager&&(await window.tokenManager.setToken(z.accessToken),z.refreshToken&&window.tokenManager.setRefreshToken(z.refreshToken))}catch{}return i(z.accessToken),!0}else return console.error("[AUTH] Token refresh failed:",R.status),!1}catch(R){return console.error("[AUTH] Token refresh error:",R),!1}},y=async(U,R={})=>{const z=a||await(window.tokenManager?.getToken()||ua.get());if(!z)throw new Error("No authentication token found");const G={"Content-Type":"application/json",Authorization:`Bearer ${z}`,...R.headers},X=await fetch(U,{...R,headers:G});if(X.status===401)if(console.log("[AUTH] 401 error, attempting token refresh..."),await x()){const q=await(window.tokenManager?.getToken()||ua.get());return G.Authorization=`Bearer ${q}`,fetch(U,{...R,headers:G})}else throw console.log("[AUTH] Token refresh failed, returning 401 response"),new Error("Authentication failed - please login again");return X},v=async()=>{try{console.log("[AUTH] Starting session initialization..."),d(!0);const U=await(window.tokenManager?.getToken()||ua.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),R=localStorage.getItem("user_data")||localStorage.getItem("userData"),z=R?JSON.parse(R).role:null;if(console.log("[AUTH] Found stored data:",{hasToken:!!U,hasUser:!!R,role:z}),U&&z&&R)try{const G=JSON.parse(R);if(g(U))if(console.log("[AUTH] Token expired, attempting refresh..."),await x()){console.log("[AUTH] Token refreshed successfully");const ne=await(window.tokenManager?.getToken()||ua.get());i(ne)}else console.log("[AUTH] Token refresh failed, but continuing with existing token..."),i(U);else i(U);s(z),r(G);try{if(window.tokenManager&&U){await window.tokenManager.setToken(U);const X=localStorage.getItem("refresh_token");X&&window.tokenManager.setRefreshToken(X)}}catch{}c(!0),await b(G,z)}catch(G){console.error("[AUTH] Error parsing stored user data:",G),console.log("[AUTH] Invalid user data, but not forcing logout - continuing with empty state"),c(!1)}}catch(U){console.error("[AUTH] Session initialization error:",U),console.log("[AUTH] Initialization error, but not forcing logout - continuing with empty state"),c(!1)}finally{console.log("[AUTH] Session initialization complete"),d(!1)}},T=async U=>{try{if(d(!0),h(null),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),h("Please wait for the logout process to complete.");return}console.log("Attempting login with:",U.username);let R,z;U.username==="admin"?(R={ok:!0,json:()=>({success:!0,token:"test-token"})},z="admin"):(R=await authService.teacherLogin(U),z="teacher");const G=await R.json();await k(R,z,G)}catch(R){A(R)}finally{d(!1)}},k=async(U,R,z)=>{try{if(U.ok&&z.success&&z.token){i(z.token),s(R),r(z),c(!0);const G=z.accessToken||z.token;await ua.set(G),localStorage.setItem("refresh_token",z.refreshToken),localStorage.setItem("user_data",JSON.stringify(z)),localStorage.setItem("accessToken",G);try{window.tokenManager&&(await window.tokenManager.setToken(G),z.refreshToken&&window.tokenManager.setRefreshToken(z.refreshToken))}catch{}try{const X=Date.now(),ne=10080*60*1e3,q=[];for(let se=0;se<localStorage.length;se++){const ue=localStorage.key(se);if(!(!ue||!(ue.startsWith("test_progress_")||ue.startsWith("test_timer_")||ue.startsWith("test_shuffle_order_")||ue.startsWith("student_results_table_")||ue.startsWith("anti_cheating_"))))try{const Ne=localStorage.getItem(ue);if(!Ne){q.push(ue);continue}let ce=null;if(Ne.startsWith("{")||Ne.startsWith("[")){const Ue=JSON.parse(Ne),pe=Ue.timestamp||Ue.lastSaved||Ue.lastTickAt||Ue.createdAt||Ue.updatedAt||Ue.startedAt||Ue.started_at;pe&&(ce=new Date(pe).getTime())}if(!ce){const Ue=`${ue}__ts`,pe=localStorage.getItem(Ue);pe&&(ce=parseInt(pe)||null)}if(!ce)continue;X-ce>ne&&q.push(ue)}catch{}}q.forEach(se=>{try{localStorage.removeItem(se)}catch{}})}catch(X){console.warn("LocalStorage cleanup skipped:",X)}return await b(z,R),!0}else{const G=z.message||U.statusText||"Login failed";return A(new Error(G)),!1}}catch(G){return A(G),!1}},b=async(U,R)=>{try{switch(R){case"admin":console.log("Admin login successful, role:",U.role),console.log("Admin logged in:",U);break;case"teacher":console.log("Teacher login successful, role:",U.role),console.log("Teacher data:",U.teacher),await E(U),await P();break;case"student":console.log("Student login successful"),C(U);break;default:console.warn("Unknown user role:",R)}}catch(z){console.error("Post-login actions error:",z)}},C=U=>{r(U),console.log("Student info populated:",U)},E=async U=>{r(U),console.log("Teacher info populated:",U)},j=async()=>{try{console.log("Initializing teacher cabinet...")}catch(U){console.error("Error initializing teacher cabinet:",U)}},P=async()=>{try{console.log("Checking teacher subjects...")}catch(U){console.error("Error checking teacher subjects:",U)}},A=U=>{h(U.message||"Login failed"),M()},M=()=>{h(null),d(!1)},F=_.useCallback(()=>{B()},[]),B=async()=>{r(null),s(null),i(null),c(!1),h(null);const U=t?.student_id||t?.teacher_id||t?.admin_id||t?.id;U&&XT(U),await ua.clear(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("user_data"),localStorage.removeItem("user_role"),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("testProgress"),localStorage.removeItem("formData"),window.tokenManager&&await window.tokenManager.clearAuth(),setTimeout(()=>{V()},100)},V=()=>{console.log("Interface reset after session clear - redirecting to login"),window.location.replace("/login")},ee=()=>t?.id||null,ae=()=>n==="admin"?t:null,Z=()=>n==="admin",te=()=>Z()?t?.admin_id:null,L=()=>n==="teacher"?t?.username:null,K=()=>{console.log("Auth functions available:",{handleUnifiedLogin:typeof T,logout:typeof F,getCurrentTeacherId:typeof ee,isAdmin:typeof Z,getCurrentAdmin:typeof ae,getCurrentAdminId:typeof te,getCurrentTeacherUsername:typeof L})};_.useEffect(()=>(window.logout=F,window.getCurrentTeacherId=ee,window.getCurrentAdmin=ae,window.isAdmin=Z,window.getCurrentAdminId=te,window.getCurrentTeacherUsername=L,window.checkFunctionAvailability=K,()=>{delete window.logout,delete window.getCurrentTeacherId,delete window.getCurrentAdmin,delete window.isAdmin,delete window.getCurrentAdminId,delete window.getCurrentTeacherUsername,delete window.checkFunctionAvailability}),[F]);const I=_.useCallback(U=>{console.log("Setting user data from external auth:",U),r(U),s(U.role),i(U.token),c(!0),d(!1),h(null),ua.set(U.token).catch(R=>{console.error("[AUTH] Failed to store token securely:",R)}),localStorage.setItem("user_data",JSON.stringify(U)),localStorage.setItem("accessToken",U.token),window.tokenManager&&window.tokenManager.setToken(U.token).catch(()=>{})},[]),H={user:t,role:n,token:a,isAuthenticated:o,isLoading:u,error:f,login:T,setUserData:I,logout:F,resetLoginForm:M,forceCompleteLogout:B,initializeApplicationSession:v,makeAuthenticatedRequest:y,populateStudentInfo:C,populateTeacherInfo:E,initializeTeacherCabinet:j,checkTeacherSubjects:P,getCurrentTeacherId:ee,getCurrentAdmin:ae,isAdmin:Z,getCurrentAdminId:te,getCurrentTeacherUsername:L,handleLoginResponse:k,handlePostLoginActions:b,handleLoginFailure:A,resetInterfaceAfterSessionClear:V,checkFunctionAvailability:K};return l.jsx(hB.Provider,{value:H,children:e})},Os=()=>{const e=_.useContext(hB);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class RQ{constructor(){this.baseURL="https://mathayomwatsing.netlify.app/.netlify/functions.",this.timeout=1e4,this.retryCount=3,this.retryDelay=1e3}async getHeaders(){const t=await(window.tokenManager?.getToken()||ua.get())||localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async sendRequest(t,r){try{return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(n){throw console.error(" Network error:",n),n}}async request(t,r={}){const n=`${this.baseURL}${t}`,a={method:"GET",headers:await this.getHeaders(),timeout:this.timeout,...r};let i;for(let o=0;o<this.retryCount;o++)try{const c=new AbortController,u=setTimeout(()=>c.abort(),this.timeout),d=await fetch(n,{...a,signal:c.signal});if(clearTimeout(u),!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(c){if(i=c,c.name==="AbortError")throw new Error("Request timeout");o<this.retryCount-1&&(console.warn(`Request failed, retrying in ${this.retryDelay}ms... (attempt ${o+1}/${this.retryCount})`),await new Promise(u=>setTimeout(u,this.retryDelay*Math.pow(2,o))))}throw i}async get(t,r={}){return this.request(t,{...r,method:"GET"})}async post(t,r,n={}){return this.request(t,{...n,method:"POST",body:JSON.stringify(r)})}async put(t,r,n={}){return this.request(t,{...n,method:"PUT",body:JSON.stringify(r)})}async delete(t,r={}){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,n={}){return this.request(t,{...n,method:"PATCH",body:JSON.stringify(r)})}async uploadFile(t,r,n={}){const s=new FormData;s.append("file",r);const a=`${this.baseURL}${t}`,i=await(window.tokenManager?.getToken()||ua.get())||localStorage.getItem("token"),o={method:"POST",headers:{...i&&{Authorization:`Bearer ${i}`}},body:s,...n};try{const c=await fetch(a,o);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return await c.json()}catch(c){throw c}}async downloadFile(t,r,n={}){const s=`${this.baseURL}${t}`,i={method:"GET",headers:await this.getHeaders(),...n};try{const o=await fetch(s,i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const c=await o.blob(),u=window.URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}catch(o){throw o}}ensureDebugOutput(){let t=document.getElementById("debug-output");return t||(t=document.createElement("div"),t.id="debug-output",t.className="fixed top-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 overflow-auto",t.innerHTML='<div class="text-sm font-mono text-gray-800">Debug Output</div>',document.body.appendChild(t)),t}async testDbConnection(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/test-db-connection")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Database Connection Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,message:"Database connection successful",data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Database Connection Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,message:"Database connection failed",error:t.message}}}async testStudentLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"51706",password:"1"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Student Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Student Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testTeacherLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"Aleksandr_Petrov",password:"465"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Teacher Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Teacher Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testAdminLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Admin Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Admin Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetTeacherSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-teacher-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Teacher Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Teacher Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetClassResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-class-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Class Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Class Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentTestResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-test-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Test Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Test Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testEndpoints(){const t=["/debug/test-student-login","/debug/test-teacher-login","/debug/test-admin-login","/debug/test-get-subjects","/debug/test-get-teacher-subjects","/debug/test-get-class-results","/debug/test-get-student-subjects","/debug/test-get-student-test-results"],r={};for(const n of t)try{const s=await this.get(n);r[n]={success:!0,data:s}}catch(s){r[n]={success:!1,error:s.message}}return r}async debugFunction(t){const r=this.ensureDebugOutput();try{let n;switch(t){case"testDbConnection":n=await this.testDbConnection();break;case"testStudentLogin":n=await this.testStudentLogin();break;case"testTeacherLogin":n=await this.testTeacherLogin();break;case"testAdminLogin":n=await this.testAdminLogin();break;case"testGetSubjects":n=await this.testGetSubjects();break;case"testGetTeacherSubjects":n=await this.testGetTeacherSubjects();break;case"testGetClassResults":n=await this.testGetClassResults();break;case"testGetStudentSubjects":n=await this.testGetStudentSubjects();break;case"testGetStudentTestResults":n=await this.testGetStudentTestResults();break;default:throw new Error(`Unknown debug function: ${t}`)}return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Debug Function: ${t}</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),n}catch(n){throw r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Debug Function Error: ${t}</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${n.message}</pre>
        `),n}}showDebugFunctions(){const t=this.ensureDebugOutput(),r=`
      <div class="text-sm font-mono text-gray-800 mb-4">Debug Functions</div>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="apiClient.testDbConnection()" class="px-3 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors">
          Test DB Connection
        </button>
        <button onclick="apiClient.testStudentLogin()" class="px-3 py-2 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors">
          Test Student Login
        </button>
        <button onclick="apiClient.testTeacherLogin()" class="px-3 py-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors">
          Test Teacher Login
        </button>
        <button onclick="apiClient.testAdminLogin()" class="px-3 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors">
          Test Admin Login
        </button>
        <button onclick="apiClient.testGetSubjects()" class="px-3 py-2 bg-purple-500 text-white text-xs rounded hover:bg-purple-600 transition-colors">
          Test Get Subjects
        </button>
        <button onclick="apiClient.testGetTeacherSubjects()" class="px-3 py-2 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600 transition-colors">
          Test Get Teacher Subjects
        </button>
        <button onclick="apiClient.testGetClassResults()" class="px-3 py-2 bg-pink-500 text-white text-xs rounded hover:bg-pink-600 transition-colors">
          Test Get Class Results
        </button>
        <button onclick="apiClient.testGetStudentSubjects()" class="px-3 py-2 bg-teal-500 text-white text-xs rounded hover:bg-teal-600 transition-colors">
          Test Get Student Subjects
        </button>
        <button onclick="apiClient.testGetStudentTestResults()" class="px-3 py-2 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors">
          Test Get Student Test Results
        </button>
        <button onclick="apiClient.testEndpoints()" class="px-3 py-2 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors">
          Test All Endpoints
        </button>
      </div>
    `;t.innerHTML=r}}const oa=new RQ,QT=_.createContext({});function ZT(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const eC=typeof window<"u",gB=eC?_.useLayoutEffect:_.useEffect,P_=_.createContext(null);function tC(e,t){e.indexOf(t)===-1&&e.push(t)}function rC(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const a0=(e,t,r)=>r>t?t:r<e?e:r;let nC=()=>{};const i0={},pB=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function xB(e){return typeof e=="object"&&e!==null}const yB=e=>/^0[^.\s]+$/u.test(e);function sC(e){let t;return()=>(t===void 0&&(t=e()),t)}const yc=e=>e,IQ=(e,t)=>r=>t(e(r)),e2=(...e)=>e.reduce(IQ),dv=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class aC{constructor(){this.subscriptions=[]}add(t){return tC(this.subscriptions,t),()=>rC(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vu=e=>e*1e3,qu=e=>e/1e3;function vB(e,t){return t?e*(1e3/t):0}const wB=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,LQ=1e-7,BQ=12;function $Q(e,t,r,n,s){let a,i,o=0;do i=t+(r-t)/2,a=wB(i,n,s)-e,a>0?r=i:t=i;while(Math.abs(a)>LQ&&++o<BQ);return i}function t2(e,t,r,n){if(e===t&&r===n)return yc;const s=a=>$Q(a,0,1,e,r);return a=>a===0||a===1?a:wB(s(a),t,n)}const bB=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,_B=e=>t=>1-e(1-t),SB=t2(.33,1.53,.69,.99),iC=_B(SB),kB=bB(iC),TB=e=>(e*=2)<1?.5*iC(e):.5*(2-Math.pow(2,-10*(e-1))),oC=e=>1-Math.sin(Math.acos(e)),CB=_B(oC),NB=bB(oC),zQ=t2(.42,0,1,1),UQ=t2(0,0,.58,1),EB=t2(.42,0,.58,1),WQ=e=>Array.isArray(e)&&typeof e[0]!="number",AB=e=>Array.isArray(e)&&typeof e[0]=="number",HQ={linear:yc,easeIn:zQ,easeInOut:EB,easeOut:UQ,circIn:oC,circInOut:NB,circOut:CB,backIn:iC,backInOut:kB,backOut:SB,anticipate:TB},GQ=e=>typeof e=="string",tA=e=>{if(AB(e)){nC(e.length===4);const[t,r,n,s]=e;return t2(t,r,n,s)}else if(GQ(e))return HQ[e];return e},zw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function VQ(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,h=!1)=>{const x=h&&s?r:n;return f&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const qQ=40;function jB(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=zw.reduce((b,C)=>(b[C]=VQ(a),b),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:g,postRender:x}=i,y=()=>{const b=i0.useManualTiming?s.timestamp:performance.now();r=!1,i0.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(b-s.timestamp,qQ),1)),s.timestamp=b,s.isProcessing=!0,o.process(s),c.process(s),u.process(s),d.process(s),f.process(s),h.process(s),g.process(s),x.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(y))},v=()=>{r=!0,n=!0,s.isProcessing||e(y)};return{schedule:zw.reduce((b,C)=>{const E=i[C];return b[C]=(j,P=!1,A=!1)=>(r||v(),E.schedule(j,P,A)),b},{}),cancel:b=>{for(let C=0;C<zw.length;C++)i[zw[C]].cancel(b)},state:s,steps:i}}const{schedule:Us,cancel:Lf,state:zi,steps:ES}=jB(typeof requestAnimationFrame<"u"?requestAnimationFrame:yc,!0);let $b;function KQ(){$b=void 0}const ol={now:()=>($b===void 0&&ol.set(zi.isProcessing||i0.useManualTiming?zi.timestamp:performance.now()),$b),set:e=>{$b=e,queueMicrotask(KQ)}},PB=e=>t=>typeof t=="string"&&t.startsWith(e),lC=PB("--"),YQ=PB("var(--"),cC=e=>YQ(e)?XQ.test(e.split("/*")[0].trim()):!1,XQ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,o1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},fv={...o1,transform:e=>a0(0,1,e)},Uw={...o1,default:1},zy=e=>Math.round(e*1e5)/1e5,uC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function JQ(e){return e==null}const QQ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dC=(e,t)=>r=>!!(typeof r=="string"&&QQ.test(r)&&r.startsWith(e)||t&&!JQ(r)&&Object.prototype.hasOwnProperty.call(r,t)),MB=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match(uC);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},ZQ=e=>a0(0,255,e),AS={...o1,transform:e=>Math.round(ZQ(e))},Zh={test:dC("rgb","red"),parse:MB("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+AS.transform(e)+", "+AS.transform(t)+", "+AS.transform(r)+", "+zy(fv.transform(n))+")"};function eZ(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Ak={test:dC("#"),parse:eZ,transform:Zh.transform},r2=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),vf=r2("deg"),Ku=r2("%"),rn=r2("px"),tZ=r2("vh"),rZ=r2("vw"),rA={...Ku,parse:e=>Ku.parse(e)/100,transform:e=>Ku.transform(e*100)},mp={test:dC("hsl","hue"),parse:MB("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ku.transform(zy(t))+", "+Ku.transform(zy(r))+", "+zy(fv.transform(n))+")"},$a={test:e=>Zh.test(e)||Ak.test(e)||mp.test(e),parse:e=>Zh.test(e)?Zh.parse(e):mp.test(e)?mp.parse(e):Ak.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Zh.transform(e):mp.transform(e),getAnimatableNone:e=>{const t=$a.parse(e);return t.alpha=0,$a.transform(t)}},nZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sZ(e){return isNaN(e)&&typeof e=="string"&&(e.match(uC)?.length||0)+(e.match(nZ)?.length||0)>0}const FB="number",DB="color",aZ="var",iZ="var(",nA="${}",oZ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hv(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(oZ,c=>($a.test(c)?(n.color.push(a),s.push(DB),r.push($a.parse(c))):c.startsWith(iZ)?(n.var.push(a),s.push(aZ),r.push(c)):(n.number.push(a),s.push(FB),r.push(parseFloat(c))),++a,nA)).split(nA);return{values:r,split:o,indexes:n,types:s}}function OB(e){return hv(e).values}function RB(e){const{split:t,types:r}=hv(e),n=t.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=t[i],s[i]!==void 0){const o=r[i];o===FB?a+=zy(s[i]):o===DB?a+=$a.transform(s[i]):a+=s[i]}return a}}const lZ=e=>typeof e=="number"?0:$a.test(e)?$a.getAnimatableNone(e):e;function cZ(e){const t=OB(e);return RB(e)(t.map(lZ))}const Bf={test:sZ,parse:OB,createTransformer:RB,getAnimatableNone:cZ};function jS(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function uZ({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,a=0,i=0;if(!t)s=a=i=r;else{const o=r<.5?r*(1+t):r+t-r*t,c=2*r-o;s=jS(c,o,e+1/3),a=jS(c,o,e),i=jS(c,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function s4(e,t){return r=>r>0?t:e}const Qs=(e,t,r)=>e+(t-e)*r,PS=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},dZ=[Ak,Zh,mp],fZ=e=>dZ.find(t=>t.test(e));function sA(e){const t=fZ(e);if(!t)return!1;let r=t.parse(e);return t===mp&&(r=uZ(r)),r}const aA=(e,t)=>{const r=sA(e),n=sA(t);if(!r||!n)return s4(e,t);const s={...r};return a=>(s.red=PS(r.red,n.red,a),s.green=PS(r.green,n.green,a),s.blue=PS(r.blue,n.blue,a),s.alpha=Qs(r.alpha,n.alpha,a),Zh.transform(s))},jk=new Set(["none","hidden"]);function hZ(e,t){return jk.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function mZ(e,t){return r=>Qs(e,t,r)}function fC(e){return typeof e=="number"?mZ:typeof e=="string"?cC(e)?s4:$a.test(e)?aA:xZ:Array.isArray(e)?IB:typeof e=="object"?$a.test(e)?aA:gZ:s4}function IB(e,t){const r=[...e],n=r.length,s=e.map((a,i)=>fC(a)(a,t[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function gZ(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=fC(e[s])(e[s],t[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function pZ(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}const xZ=(e,t)=>{const r=Bf.createTransformer(t),n=hv(e),s=hv(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?jk.has(e)&&!s.values.length||jk.has(t)&&!n.values.length?hZ(e,t):e2(IB(pZ(n,s),s.values),r):s4(e,t)};function LB(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Qs(e,t,r):fC(e)(e,t)}const yZ=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Us.update(t,r),stop:()=>Lf(t),now:()=>zi.isProcessing?zi.timestamp:ol.now()}},BB=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},a4=2e4;function hC(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<a4;)t+=r,n=e.next(t);return t>=a4?1/0:t}function vZ(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(hC(n),a4);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:qu(s)}}const wZ=5;function $B(e,t,r){const n=Math.max(t-wZ,0);return vB(r-e(n),t-n)}const da={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},MS=.001;function bZ({duration:e=da.duration,bounce:t=da.bounce,velocity:r=da.velocity,mass:n=da.mass}){let s,a,i=1-t;i=a0(da.minDamping,da.maxDamping,i),e=a0(da.minDuration,da.maxDuration,qu(e)),i<1?(s=u=>{const d=u*i,f=d*e,h=d-r,g=Pk(u,i),x=Math.exp(-f);return MS-h/g*x},a=u=>{const f=u*i*e,h=f*r+r,g=Math.pow(i,2)*Math.pow(u,2)*e,x=Math.exp(-f),y=Pk(Math.pow(u,2),i);return(-s(u)+MS>0?-1:1)*((h-g)*x)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-MS+d*f},a=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const o=5/e,c=SZ(s,a,o);if(e=Vu(e),isNaN(c))return{stiffness:da.stiffness,damping:da.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const _Z=12;function SZ(e,t,r){let n=r;for(let s=1;s<_Z;s++)n=n-e(n)/t(n);return n}function Pk(e,t){return e*Math.sqrt(1-t*t)}const kZ=["duration","bounce"],TZ=["stiffness","damping","mass"];function iA(e,t){return t.some(r=>e[r]!==void 0)}function CZ(e){let t={velocity:da.velocity,stiffness:da.stiffness,damping:da.damping,mass:da.mass,isResolvedFromDuration:!1,...e};if(!iA(e,TZ)&&iA(e,kZ))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*a0(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:da.mass,stiffness:s,damping:a}}else{const r=bZ(e);t={...t,...r,mass:da.mass},t.isResolvedFromDuration=!0}return t}function i4(e=da.visualDuration,t=da.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:g}=CZ({...r,velocity:-qu(r.velocity||0)}),x=h||0,y=u/(2*Math.sqrt(c*d)),v=i-a,T=qu(Math.sqrt(c/d)),k=Math.abs(v)<5;n||(n=k?da.restSpeed.granular:da.restSpeed.default),s||(s=k?da.restDelta.granular:da.restDelta.default);let b;if(y<1){const E=Pk(T,y);b=j=>{const P=Math.exp(-y*T*j);return i-P*((x+y*T*v)/E*Math.sin(E*j)+v*Math.cos(E*j))}}else if(y===1)b=E=>i-Math.exp(-T*E)*(v+(x+T*v)*E);else{const E=T*Math.sqrt(y*y-1);b=j=>{const P=Math.exp(-y*T*j),A=Math.min(E*j,300);return i-P*((x+y*T*v)*Math.sinh(A)+E*v*Math.cosh(A))/E}}const C={calculatedDuration:g&&f||null,next:E=>{const j=b(E);if(g)o.done=E>=f;else{let P=E===0?x:0;y<1&&(P=E===0?Vu(x):$B(b,E,j));const A=Math.abs(P)<=n,M=Math.abs(i-j)<=s;o.done=A&&M}return o.value=o.done?i:j,o},toString:()=>{const E=Math.min(hC(C),a4),j=BB(P=>C.next(E*P).value,E,30);return E+"ms "+j},toTransition:()=>{}};return C}i4.applyToOptions=e=>{const t=vZ(e,100,i4);return e.ease=t.ease,e.duration=Vu(t.duration),e.type="keyframes",e};function Mk({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},g=A=>o!==void 0&&A<o||c!==void 0&&A>c,x=A=>o===void 0?c:c===void 0||Math.abs(o-A)<Math.abs(c-A)?o:c;let y=r*t;const v=f+y,T=i===void 0?v:i(v);T!==v&&(y=T-f);const k=A=>-y*Math.exp(-A/n),b=A=>T+k(A),C=A=>{const M=k(A),F=b(A);h.done=Math.abs(M)<=u,h.value=h.done?T:F};let E,j;const P=A=>{g(h.value)&&(E=A,j=i4({keyframes:[h.value,x(h.value)],velocity:$B(b,A,h.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:A=>{let M=!1;return!j&&E===void 0&&(M=!0,C(A),P(A)),E!==void 0&&A>=E?j.next(A-E):(!M&&C(A),h)}}}function NZ(e,t,r){const n=[],s=r||i0.mix||LB,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||yc:t;o=e2(c,o)}n.push(o)}return n}function EZ(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(nC(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=NZ(t,n,s),c=o.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=dv(e[f],e[f+1],d);return o[f](h)};return r?d=>u(a0(e[0],e[a-1],d)):u}function AZ(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=dv(0,t,n);e.push(Qs(r,1,s))}}function jZ(e){const t=[0];return AZ(t,e.length-1),t}function PZ(e,t){return e.map(r=>r*t)}function MZ(e,t){return e.map(()=>t||EB).splice(0,e.length-1)}function Uy({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=WQ(n)?n.map(tA):tA(n),a={done:!1,value:t[0]},i=PZ(r&&r.length===t.length?r:jZ(t),e),o=EZ(i,t,{ease:Array.isArray(s)?s:MZ(t,s)});return{calculatedDuration:e,next:c=>(a.value=o(c),a.done=c>=e,a)}}const FZ=e=>e!==null;function mC(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter(FZ),o=s<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const DZ={decay:Mk,inertia:Mk,tween:Uy,keyframes:Uy,spring:i4};function zB(e){typeof e.type=="string"&&(e.type=DZ[e.type])}class gC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const OZ=e=>e/100;class pC extends gC{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==ol.now()&&this.tick(ol.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;zB(t);const{type:r=Uy,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const c=r||Uy;c!==Uy&&typeof o[0]!="number"&&(this.mixKeyframes=e2(OZ,LB(o[0],o[1])),o=[0,100]);const u=c({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=hC(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:g,type:x,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?T<0:T>s;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,C=n;if(f){const A=Math.min(this.currentTime,s)/o;let M=Math.floor(A),F=A%1;!F&&A>=1&&(F=1),F===1&&M--,M=Math.min(M,f+1),!!(M%2)&&(h==="reverse"?(F=1-F,g&&(F-=g/o)):h==="mirror"&&(C=i)),b=a0(0,1,F)*o}const E=k?{done:!1,value:d[0]}:C.next(b);a&&(E.value=a(E.value));let{done:j}=E;!k&&c!==null&&(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return P&&x!==Mk&&(E.value=mC(d,this.options,v,this.speed)),y&&y(E.value),P&&this.finish(),E}then(t,r){return this.finished.then(t,r)}get duration(){return qu(this.calculatedDuration)}get time(){return qu(this.currentTime)}set time(t){t=Vu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ol.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=qu(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=yZ,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ol.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function RZ(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const em=e=>e*180/Math.PI,Fk=e=>{const t=em(Math.atan2(e[1],e[0]));return Dk(t)},IZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Fk,rotateZ:Fk,skewX:e=>em(Math.atan(e[1])),skewY:e=>em(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Dk=e=>(e=e%360,e<0&&(e+=360),e),oA=Fk,lA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),cA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),LZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lA,scaleY:cA,scale:e=>(lA(e)+cA(e))/2,rotateX:e=>Dk(em(Math.atan2(e[6],e[5]))),rotateY:e=>Dk(em(Math.atan2(-e[2],e[0]))),rotateZ:oA,rotate:oA,skewX:e=>em(Math.atan(e[4])),skewY:e=>em(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Ok(e){return e.includes("scale")?1:0}function Rk(e,t){if(!e||e==="none")return Ok(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=LZ,s=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=IZ,s=o}if(!s)return Ok(t);const a=n[t],i=s[1].split(",").map($Z);return typeof a=="function"?a(i):i[a]}const BZ=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Rk(r,t)};function $Z(e){return parseFloat(e.trim())}const l1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],c1=new Set(l1),uA=e=>e===o1||e===rn,zZ=new Set(["x","y","z"]),UZ=l1.filter(e=>!zZ.has(e));function WZ(e){const t=[];return UZ.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const om={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Rk(t,"x"),y:(e,{transform:t})=>Rk(t,"y")};om.translateX=om.x;om.translateY=om.y;const lm=new Set;let Ik=!1,Lk=!1,Bk=!1;function UB(){if(Lk){const e=Array.from(lm).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=WZ(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Lk=!1,Ik=!1,lm.forEach(e=>e.complete(Bk)),lm.clear()}function WB(){lm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Lk=!0)})}function HZ(){Bk=!0,WB(),UB(),Bk=!1}class xC{constructor(t,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(lm.add(this),Ik||(Ik=!0,Us.read(WB),Us.resolveKeyframes(UB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}RZ(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),lm.delete(this)}cancel(){this.state==="scheduled"&&(lm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const GZ=e=>e.startsWith("--");function VZ(e,t,r){GZ(t)?e.style.setProperty(t,r):e.style[t]=r}const qZ=sC(()=>window.ScrollTimeline!==void 0),KZ={};function YZ(e,t){const r=sC(e);return()=>KZ[t]??r()}const HB=YZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Py=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,dA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Py([0,.65,.55,1]),circOut:Py([.55,0,1,.45]),backIn:Py([.31,.01,.66,-.59]),backOut:Py([.33,1.53,.69,.99])};function GB(e,t){if(e)return typeof e=="function"?HB()?BB(e,t):"ease-out":AB(e)?Py(e):Array.isArray(e)?e.map(r=>GB(r,t)||dA.easeOut):dA[e]}function XZ(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const f=GB(o,s);Array.isArray(f)&&(d.easing=f);const h={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function VB(e){return typeof e=="function"&&"applyToOptions"in e}function JZ({type:e,...t}){return VB(e)&&HB()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class QZ extends gC{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,nC(typeof t.type!="string");const u=JZ(t);this.animation=XZ(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=mC(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):VZ(r,n,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return qu(Number(t))}get time(){return qu(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Vu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&qZ()?(this.animation.timeline=t,yc):r(this)}}const qB={anticipate:TB,backInOut:kB,circInOut:NB};function ZZ(e){return e in qB}function eee(e){typeof e.ease=="string"&&ZZ(e.ease)&&(e.ease=qB[e.ease])}const fA=10;class tee extends QZ{constructor(t){eee(t),zB(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new pC({...i,autoplay:!1}),c=Vu(this.finishedTime??this.time);r.setWithVelocity(o.sample(c-fA).value,o.sample(c).value,fA),o.stop()}}const hA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Bf.test(e)||e==="0")&&!e.startsWith("url("));function ree(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function nee(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=hA(s,t),o=hA(a,t);return!i||!o?!1:ree(e)||(r==="spring"||VB(r))&&n}function $k(e){e.duration=0,e.type}const see=new Set(["opacity","clipPath","filter","transform"]),aee=sC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function iee(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return aee()&&r&&see.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const oee=40;class lee extends gC{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:c,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ol.now();const h={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:c,motionValue:u,element:d,...f},g=d?.KeyframeResolver||xC;this.keyframeResolver=new g(o,(x,y,v)=>this.onKeyframesResolved(x,y,h,!v),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=ol.now(),nee(t,a,i,o)||((i0.instantAnimations||!c)&&d?.(mC(t,n,r)),t[0]=t[t.length-1],$k(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>oee?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},g=!u&&iee(h)?new tee({...h,element:h.motionValue.owner.current}):new pC(h);g.finished.then(()=>this.notifyFinished()).catch(yc),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),HZ()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const cee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uee(e){const t=cee.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function KB(e,t,r=1){const[n,s]=uee(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const i=a.trim();return pB(i)?parseFloat(i):i}return cC(s)?KB(s,t,r+1):s}function yC(e,t){return e?.[t]??e?.default??e}const YB=new Set(["width","height","top","left","right","bottom",...l1]),dee={test:e=>e==="auto",parse:e=>e},XB=e=>t=>t.test(e),JB=[o1,rn,Ku,vf,rZ,tZ,dee],mA=e=>JB.find(XB(e));function fee(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||yB(e):!0}const hee=new Set(["brightness","contrast","saturate","opacity"]);function mee(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(uC)||[];if(!n)return e;const s=r.replace(n,"");let a=hee.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const gee=/\b([a-z-]*)\(.*?\)/gu,zk={...Bf,getAnimatableNone:e=>{const t=e.match(gee);return t?t.map(mee).join(" "):e}},gA={...o1,transform:Math.round},pee={rotate:vf,rotateX:vf,rotateY:vf,rotateZ:vf,scale:Uw,scaleX:Uw,scaleY:Uw,scaleZ:Uw,skew:vf,skewX:vf,skewY:vf,distance:rn,translateX:rn,translateY:rn,translateZ:rn,x:rn,y:rn,z:rn,perspective:rn,transformPerspective:rn,opacity:fv,originX:rA,originY:rA,originZ:rn},vC={borderWidth:rn,borderTopWidth:rn,borderRightWidth:rn,borderBottomWidth:rn,borderLeftWidth:rn,borderRadius:rn,radius:rn,borderTopLeftRadius:rn,borderTopRightRadius:rn,borderBottomRightRadius:rn,borderBottomLeftRadius:rn,width:rn,maxWidth:rn,height:rn,maxHeight:rn,top:rn,right:rn,bottom:rn,left:rn,padding:rn,paddingTop:rn,paddingRight:rn,paddingBottom:rn,paddingLeft:rn,margin:rn,marginTop:rn,marginRight:rn,marginBottom:rn,marginLeft:rn,backgroundPositionX:rn,backgroundPositionY:rn,...pee,zIndex:gA,fillOpacity:fv,strokeOpacity:fv,numOctaves:gA},xee={...vC,color:$a,backgroundColor:$a,outlineColor:$a,fill:$a,stroke:$a,borderColor:$a,borderTopColor:$a,borderRightColor:$a,borderBottomColor:$a,borderLeftColor:$a,filter:zk,WebkitFilter:zk},QB=e=>xee[e];function ZB(e,t){let r=QB(e);return r!==zk&&(r=Bf),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const yee=new Set(["auto","none","0"]);function vee(e,t,r){let n=0,s;for(;n<e.length&&!s;){const a=e[n];typeof a=="string"&&!yee.has(a)&&hv(a).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=ZB(r,s)}class wee extends xC{constructor(t,r,n,s,a){super(t,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),cC(u))){const d=KB(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!YB.has(n)||t.length!==2)return;const[s,a]=t,i=mA(s),o=mA(a);if(i!==o)if(uA(i)&&uA(o))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else om[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||fee(t[s]))&&n.push(s);n.length&&vee(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=om[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=om[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{t.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function bee(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=r?.[e]??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const e$=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function t$(e){return xB(e)&&"offsetHeight"in e}const pA=30,_ee=e=>!isNaN(parseFloat(e));class See{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=ol.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=ol.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=_ee(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new aC);const n=this.events[t].add(r);return t==="change"?()=>{n(),Us.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ol.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>pA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,pA);return vB(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bp(e,t){return new See(e,t)}const{schedule:wC}=jB(queueMicrotask,!1),Xc={x:!1,y:!1};function r$(){return Xc.x||Xc.y}function kee(e){return e==="x"||e==="y"?Xc[e]?null:(Xc[e]=!0,()=>{Xc[e]=!1}):Xc.x||Xc.y?null:(Xc.x=Xc.y=!0,()=>{Xc.x=Xc.y=!1})}function n$(e,t){const r=bee(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function xA(e){return!(e.pointerType==="touch"||r$())}function Tee(e,t,r={}){const[n,s,a]=n$(e,r),i=o=>{if(!xA(o))return;const{target:c}=o,u=t(c,o);if(typeof u!="function"||!c)return;const d=f=>{xA(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const s$=(e,t)=>t?e===t?!0:s$(e,t.parentElement):!1,bC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Cee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Nee(e){return Cee.has(e.tagName)||e.tabIndex!==-1}const zb=new WeakSet;function yA(e){return t=>{t.key==="Enter"&&e(t)}}function FS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Eee=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=yA(()=>{if(zb.has(r))return;FS(r,"down");const s=yA(()=>{FS(r,"up")}),a=()=>FS(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function vA(e){return bC(e)&&!r$()}function Aee(e,t,r={}){const[n,s,a]=n$(e,r),i=o=>{const c=o.currentTarget;if(!vA(o))return;zb.add(c);const u=t(c,o),d=(g,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),zb.has(c)&&zb.delete(c),vA(g)&&typeof u=="function"&&u(g,{success:x})},f=g=>{d(g,c===window||c===document||r.useGlobalTarget||s$(c,g.target))},h=g=>{d(g,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),t$(o)&&(o.addEventListener("focus",u=>Eee(u,s)),!Nee(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function a$(e){return xB(e)&&"ownerSVGElement"in e}function jee(e){return a$(e)&&e.tagName==="svg"}const mo=e=>!!(e&&e.getVelocity),Pee=[...JB,$a,Bf],Mee=e=>Pee.find(XB(e)),_C=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Fee extends _.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=t$(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Dee({children:e,isPresent:t,anchorX:r,root:n}){const s=_.useId(),a=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=_.useContext(_C);return _.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:f,right:h}=i.current;if(t||!a.current||!c||!u)return;const g=r==="left"?`left: ${f}`:`right: ${h}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const y=n??document.head;return y.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(x)&&y.removeChild(x)}},[t]),l.jsx(Fee,{isPresent:t,childRef:a,sizeRef:i,children:_.cloneElement(e,{ref:a})})}const Oee=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:c})=>{const u=ZT(Ree),d=_.useId();let f=!0,h=_.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:g=>{u.set(g,!0);for(const x of u.values())if(!x)return;n&&n()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,n]);return a&&f&&(h={...h}),_.useMemo(()=>{u.forEach((g,x)=>u.set(x,!1))},[r]),_.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(e=l.jsx(Dee,{isPresent:r,anchorX:o,root:c,children:e})),l.jsx(P_.Provider,{value:h,children:e})};function Ree(){return new Map}function i$(e=!0){const t=_.useContext(P_);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=_.useId();_.useEffect(()=>{if(e)return s(a)},[e]);const i=_.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}const Ww=e=>e.key||"";function wA(e){const t=[];return _.Children.forEach(e,r=>{_.isValidElement(r)&&t.push(r)}),t}const il=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:c})=>{const[u,d]=i$(i),f=_.useMemo(()=>wA(e),[e]),h=i&&!u?[]:f.map(Ww),g=_.useRef(!0),x=_.useRef(f),y=ZT(()=>new Map),[v,T]=_.useState(f),[k,b]=_.useState(f);gB(()=>{g.current=!1,x.current=f;for(let j=0;j<k.length;j++){const P=Ww(k[j]);h.includes(P)?y.delete(P):y.get(P)!==!0&&y.set(P,!1)}},[k,h.length,h.join("-")]);const C=[];if(f!==v){let j=[...f];for(let P=0;P<k.length;P++){const A=k[P],M=Ww(A);h.includes(M)||(j.splice(P,0,A),C.push(A))}return a==="wait"&&C.length&&(j=C),b(wA(j)),T(f),null}const{forceRender:E}=_.useContext(QT);return l.jsx(l.Fragment,{children:k.map(j=>{const P=Ww(j),A=i&&!u?!1:f===k||h.includes(P),M=()=>{if(y.has(P))y.set(P,!0);else return;let F=!0;y.forEach(B=>{B||(F=!1)}),F&&(E?.(),b(x.current),i&&d?.(),n&&n())};return l.jsx(Oee,{isPresent:A,initial:!g.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:A?void 0:M,anchorX:o,children:j},P)})})},o$=_.createContext({strict:!1}),bA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$p={};for(const e in bA)$p[e]={isEnabled:t=>bA[e].some(r=>!!t[r])};function Iee(e){for(const t in e)$p[t]={...$p[t],...e[t]}}const Lee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function o4(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Lee.has(e)}let l$=e=>!o4(e);function Bee(e){typeof e=="function"&&(l$=t=>t.startsWith("on")?!o4(t):e(t))}try{Bee(require("@emotion/is-prop-valid").default)}catch{}function $ee(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(l$(s)||r===!0&&o4(s)||!t&&!o4(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const M_=_.createContext({});function F_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function mv(e){return typeof e=="string"||Array.isArray(e)}const SC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kC=["initial",...SC];function D_(e){return F_(e.animate)||kC.some(t=>mv(e[t]))}function c$(e){return!!(D_(e)||e.variants)}function zee(e,t){if(D_(e)){const{initial:r,animate:n}=e;return{initial:r===!1||mv(r)?r:void 0,animate:mv(n)?n:void 0}}return e.inherit!==!1?t:{}}function Uee(e){const{initial:t,animate:r}=zee(e,_.useContext(M_));return _.useMemo(()=>({initial:t,animate:r}),[_A(t),_A(r)])}function _A(e){return Array.isArray(e)?e.join(" "):e}const gv={};function Wee(e){for(const t in e)gv[t]=e[t],lC(t)&&(gv[t].isCSSVariable=!0)}function u$(e,{layout:t,layoutId:r}){return c1.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!gv[e]||e==="opacity")}const Hee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gee=l1.length;function Vee(e,t,r){let n="",s=!0;for(let a=0;a<Gee;a++){const i=l1[a],o=e[i];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(i.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||r){const u=e$(o,vC[i]);if(!c){s=!1;const d=Hee[i]||i;n+=`${d}(${u}) `}r&&(t[i]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function TC(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const c in t){const u=t[c];if(c1.has(c)){i=!0;continue}else if(lC(c)){s[c]=u;continue}else{const d=e$(u,vC[c]);c.startsWith("origin")?(o=!0,a[c]=d):n[c]=d}}if(t.transform||(i||r?n.transform=Vee(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${u} ${d}`}}const CC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function d$(e,t,r){for(const n in t)!mo(t[n])&&!u$(n,r)&&(e[n]=t[n])}function qee({transformTemplate:e},t){return _.useMemo(()=>{const r=CC();return TC(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Kee(e,t){const r=e.style||{},n={};return d$(n,r,e),Object.assign(n,qee(e,t)),n}function Yee(e,t){const r={},n=Kee(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Xee={offset:"stroke-dashoffset",array:"stroke-dasharray"},Jee={offset:"strokeDashoffset",array:"strokeDasharray"};function Qee(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?Xee:Jee;e[a.offset]=rn.transform(-n);const i=rn.transform(t),o=rn.transform(r);e[a.array]=`${i} ${o}`}function f$(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},c,u,d){if(TC(e,o,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&Qee(f,s,a,i,!1)}const h$=()=>({...CC(),attrs:{}}),m$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Zee(e,t,r,n){const s=_.useMemo(()=>{const a=h$();return f$(a,t,m$(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};d$(a,e.style,e),s.style={...a,...s.style}}return s}const ete=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function NC(e){return typeof e!="string"||e.includes("-")?!1:!!(ete.indexOf(e)>-1||/[A-Z]/u.test(e))}function tte(e,t,r,{latestValues:n},s,a=!1){const o=(NC(e)?Zee:Yee)(t,n,s,e),c=$ee(t,typeof e=="string",a),u=e!==_.Fragment?{...c,...o,ref:r}:{},{children:d}=t,f=_.useMemo(()=>mo(d)?d.get():d,[d]);return _.createElement(e,{...u,children:f})}function SA(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function EC(e,t,r,n){if(typeof t=="function"){const[s,a]=SA(n);t=t(r!==void 0?r:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=SA(n);t=t(r!==void 0?r:e.custom,s,a)}return t}function Ub(e){return mo(e)?e.get():e}function rte({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:nte(r,n,s,e),renderState:t()}}function nte(e,t,r,n){const s={},a=n(e,{});for(const h in a)s[h]=Ub(a[h]);let{initial:i,animate:o}=e;const c=D_(e),u=c$(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!F_(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const x=EC(e,h[g]);if(x){const{transitionEnd:y,transition:v,...T}=x;for(const k in T){let b=T[k];if(Array.isArray(b)){const C=d?b.length-1:0;b=b[C]}b!==null&&(s[k]=b)}for(const k in y)s[k]=y[k]}}}return s}const g$=e=>(t,r)=>{const n=_.useContext(M_),s=_.useContext(P_),a=()=>rte(e,t,n,s);return r?a():ZT(a)};function AC(e,t,r){const{style:n}=e,s={};for(const a in n)(mo(n[a])||t.style&&mo(t.style[a])||u$(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const ste=g$({scrapeMotionValuesFromProps:AC,createRenderState:CC});function p$(e,t,r){const n=AC(e,t,r);for(const s in e)if(mo(e[s])||mo(t[s])){const a=l1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=e[s]}return n}const ate=g$({scrapeMotionValuesFromProps:p$,createRenderState:h$}),ite=Symbol.for("motionComponentSymbol");function gp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ote(e,t,r){return _.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):gp(r)&&(r.current=n))},[t])}const jC=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lte="framerAppearId",x$="data-"+jC(lte),y$=_.createContext({});function cte(e,t,r,n,s){const{visualElement:a}=_.useContext(M_),i=_.useContext(o$),o=_.useContext(P_),c=_.useContext(_C).reducedMotion,u=_.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,f=_.useContext(y$);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&ute(u.current,r,s,f);const h=_.useRef(!1);_.useInsertionEffect(()=>{d&&h.current&&d.update(r,o)});const g=r[x$],x=_.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return gB(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),_.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),x.current=!1),d.enteringChildren=void 0)}),d}function ute(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:v$(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&gp(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function v$(e){if(e)return e.options.allowProjection!==!1?e.projection:v$(e.parent)}function DS(e,{forwardMotionProps:t=!1}={},r,n){r&&Iee(r);const s=NC(e)?ate:ste;function a(o,c){let u;const d={..._.useContext(_C),...o,layoutId:dte(o)},{isStatic:f}=d,h=Uee(o),g=s(o,f);if(!f&&eC){fte();const x=hte(d);u=x.MeasureLayout,h.visualElement=cte(e,g,d,n,x.ProjectionNode)}return l.jsxs(M_.Provider,{value:h,children:[u&&h.visualElement?l.jsx(u,{visualElement:h.visualElement,...d}):null,tte(e,o,ote(g,h.visualElement,c),g,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=_.forwardRef(a);return i[ite]=e,i}function dte({layoutId:e}){const t=_.useContext(QT).id;return t&&e!==void 0?t+"-"+e:e}function fte(e,t){_.useContext(o$).strict}function hte(e){const{drag:t,layout:r}=$p;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function mte(e,t){if(typeof Proxy>"u")return DS;const r=new Map,n=(a,i)=>DS(a,i,e,t),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,DS(i,void 0,e,t)),r.get(i))})}function w$({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function gte({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function pte(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function OS(e){return e===void 0||e===1}function Uk({scale:e,scaleX:t,scaleY:r}){return!OS(e)||!OS(t)||!OS(r)}function qh(e){return Uk(e)||b$(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function b$(e){return kA(e.x)||kA(e.y)}function kA(e){return e&&e!=="0%"}function l4(e,t,r){const n=e-r,s=t*n;return r+s}function TA(e,t,r,n,s){return s!==void 0&&(e=l4(e,s,n)),l4(e,r,n)+t}function Wk(e,t=0,r=1,n,s){e.min=TA(e.min,t,r,n,s),e.max=TA(e.max,t,r,n,s)}function _$(e,{x:t,y:r}){Wk(e.x,t.translate,t.scale,t.originPoint),Wk(e.y,r.translate,r.scale,r.originPoint)}const CA=.999999999999,NA=1.0000000000001;function xte(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&xp(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,_$(e,i)),n&&qh(a.latestValues)&&xp(e,a.latestValues))}t.x<NA&&t.x>CA&&(t.x=1),t.y<NA&&t.y>CA&&(t.y=1)}function pp(e,t){e.min=e.min+t,e.max=e.max+t}function EA(e,t,r,n,s=.5){const a=Qs(e.min,e.max,s);Wk(e,t,r,a,n)}function xp(e,t){EA(e.x,t.x,t.scaleX,t.scale,t.originX),EA(e.y,t.y,t.scaleY,t.scale,t.originY)}function S$(e,t){return w$(pte(e.getBoundingClientRect(),t))}function yte(e,t,r){const n=S$(e,r),{scroll:s}=t;return s&&(pp(n.x,s.offset.x),pp(n.y,s.offset.y)),n}const AA=()=>({translate:0,scale:1,origin:0,originPoint:0}),yp=()=>({x:AA(),y:AA()}),jA=()=>({min:0,max:0}),Ca=()=>({x:jA(),y:jA()}),Hk={current:null},k$={current:!1};function vte(){if(k$.current=!0,!!eC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Hk.current=e.matches;e.addEventListener("change",t),t()}else Hk.current=!1}const wte=new WeakMap;function bte(e,t,r){for(const n in t){const s=t[n],a=r[n];if(mo(s))e.addValue(n,s);else if(mo(a))e.addValue(n,Bp(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(n);e.addValue(n,Bp(i!==void 0?i:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const PA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _te{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ol.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Us.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=D_(r),this.isVariantNode=c$(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const g=f[h];c[h]!==void 0&&mo(g)&&g.set(c[h])}}mount(t){this.current=t,wte.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),k$.current||vte(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Lf(this.notifyUpdate),Lf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=c1.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Us.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in $p){const r=$p[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ca()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<PA.length;n++){const s=PA[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=bte(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Bp(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(pB(n)||yB(n))?n=parseFloat(n):!Mee(n)&&Bf.test(r)&&(n=ZB(t,r)),this.setBaseTarget(t,mo(n)?n.get():n)),mo(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=EC(this.props,r,this.presenceContext?.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!mo(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new aC),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){wC.render(this.render)}}class T$ extends _te{constructor(){super(...arguments),this.KeyframeResolver=wee}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mo(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function C$(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function Ste(e){return window.getComputedStyle(e)}class kte extends T${constructor(){super(...arguments),this.type="html",this.renderInstance=C$}readValueFromInstance(t,r){if(c1.has(r))return this.projection?.isProjecting?Ok(r):BZ(t,r);{const n=Ste(t),s=(lC(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return S$(t,r)}build(t,r,n){TC(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return AC(t,r,n)}}const N$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Tte(e,t,r,n){C$(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(N$.has(s)?s:jC(s),t.attrs[s])}class Cte extends T${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ca}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(c1.has(r)){const n=QB(r);return n&&n.default||0}return r=N$.has(r)?r:jC(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return p$(t,r,n)}build(t,r,n){f$(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){Tte(t,r,n,s)}mount(t){this.isSVGTag=m$(t.tagName),super.mount(t)}}const Nte=(e,t)=>NC(e)?new Cte(t):new kte(t,{allowProjection:e!==_.Fragment});function kp(e,t,r){const n=e.getProps();return EC(n,t,r!==void 0?r:n.custom,e)}const Gk=e=>Array.isArray(e);function Ete(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Bp(r))}function Ate(e){return Gk(e)?e[e.length-1]||0:e}function jte(e,t){const r=kp(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=Ate(a[i]);Ete(e,i,o)}}function Pte(e){return!!(mo(e)&&e.add)}function Vk(e,t){const r=e.getValue("willChange");if(Pte(r))return r.add(t);if(!r&&i0.WillChange){const n=new i0.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function E$(e){return e.props[x$]}const Mte=e=>e!==null;function Fte(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(Mte),a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const Dte={type:"spring",stiffness:500,damping:25,restSpeed:10},Ote=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Rte={type:"keyframes",duration:.8},Ite={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Lte=(e,{keyframes:t})=>t.length>2?Rte:c1.has(e)?e.startsWith("scale")?Ote(t[1]):Dte:Ite;function Bte({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const PC=(e,t,r,n={},s,a)=>i=>{const o=yC(n,e)||{},c=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Vu(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};Bte(o)||Object.assign(d,Lte(e,d)),d.duration&&(d.duration=Vu(d.duration)),d.repeatDelay&&(d.repeatDelay=Vu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&($k(d),d.delay===0&&(f=!0)),(i0.instantAnimations||i0.skipAnimations)&&(f=!0,$k(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const h=Fte(d.keyframes,o);if(h!==void 0){Us.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new pC(d):new lee(d)};function $te({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function A$(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),h=o[d];if(h===void 0||u&&$te(u,d))continue;const g={delay:r,...yC(a||{},d)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===x&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const T=E$(e);if(T){const k=window.MotionHandoffAnimation(T,d,Us);k!==null&&(g.startTime=k,y=!0)}}Vk(e,d),f.start(PC(d,f,h,e.shouldReduceMotion&&YB.has(d)?{type:!1}:g,e,y));const v=f.animation;v&&c.push(v)}return i&&Promise.all(c).then(()=>{Us.update(()=>{i&&jte(e,i)})}),c}function j$(e,t,r,n=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function qk(e,t,r={}){const n=kp(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(A$(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return zte(e,t,c,u,d,f,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[c,u]=o==="beforeChildren"?[a,i]:[i,a];return c().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function zte(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),o.push(qk(c,t,{...i,delay:r+(typeof n=="function"?0:n)+j$(e.variantChildren,c,n,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(o)}function Ute(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>qk(e,a,r));n=Promise.all(s)}else if(typeof t=="string")n=qk(e,t,r);else{const s=typeof t=="function"?kp(e,t,r.custom):t;n=Promise.all(A$(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function P$(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Wte=kC.length;function M$(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?M$(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Wte;r++){const n=kC[r],s=e.props[n];(mv(s)||s===!1)&&(t[n]=s)}return t}const Hte=[...SC].reverse(),Gte=SC.length;function Vte(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Ute(e,r,n)))}function qte(e){let t=Vte(e),r=MA(),n=!0;const s=c=>(u,d)=>{const f=kp(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:g,...x}=f;u={...u,...x,...g}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,d=M$(e.parent)||{},f=[],h=new Set;let g={},x=1/0;for(let v=0;v<Gte;v++){const T=Hte[v],k=r[T],b=u[T]!==void 0?u[T]:d[T],C=mv(b),E=T===c?k.isActive:null;E===!1&&(x=v);let j=b===d[T]&&b!==u[T]&&C;if(j&&n&&e.manuallyAnimateOnMount&&(j=!1),k.protectedKeys={...g},!k.isActive&&E===null||!b&&!k.prevProp||F_(b)||typeof b=="boolean")continue;const P=Kte(k.prevProp,b);let A=P||T===c&&k.isActive&&!j&&C||v>x&&C,M=!1;const F=Array.isArray(b)?b:[b];let B=F.reduce(s(T),{});E===!1&&(B={});const{prevResolvedValues:V={}}=k,ee={...V,...B},ae=L=>{A=!0,h.has(L)&&(M=!0,h.delete(L)),k.needsAnimating[L]=!0;const K=e.getValue(L);K&&(K.liveStyle=!1)};for(const L in ee){const K=B[L],I=V[L];if(g.hasOwnProperty(L))continue;let H=!1;Gk(K)&&Gk(I)?H=!P$(K,I):H=K!==I,H?K!=null?ae(L):h.add(L):K!==void 0&&h.has(L)?ae(L):k.protectedKeys[L]=!0}k.prevProp=b,k.prevResolvedValues=B,k.isActive&&(g={...g,...B}),n&&e.blockInitialAnimation&&(A=!1);const Z=j&&P;A&&(!Z||M)&&f.push(...F.map(L=>{const K={type:T};if(typeof L=="string"&&n&&!Z&&e.manuallyAnimateOnMount&&e.parent){const{parent:I}=e,H=kp(I,L);if(I.enteringChildren&&H){const{delayChildren:U}=H.transition||{};K.delay=j$(I.enteringChildren,e,U)}}return{animation:L,options:K}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const T=kp(e,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(v.transition=T.transition)}h.forEach(T=>{const k=e.getBaseTarget(T),b=e.getValue(T);b&&(b.liveStyle=!0),v[T]=k??null}),f.push({animation:v})}let y=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(f):Promise.resolve()}function o(c,u){if(r[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(c,u)),r[c].isActive=u;const d=i(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=MA(),n=!0}}}function Kte(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!P$(t,e):!1}function $h(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function MA(){return{animate:$h(!0),whileInView:$h(),whileHover:$h(),whileTap:$h(),whileDrag:$h(),whileFocus:$h(),exit:$h()}}class Jf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Yte extends Jf{constructor(t){super(t),t.animationState||(t.animationState=qte(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();F_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Xte=0;class Jte extends Jf{constructor(){super(...arguments),this.id=Xte++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Qte={animation:{Feature:Yte},exit:{Feature:Jte}};function pv(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function n2(e){return{point:{x:e.pageX,y:e.pageY}}}const Zte=e=>t=>bC(t)&&e(t,n2(t));function Wy(e,t,r,n){return pv(e,t,Zte(r),n)}const F$=1e-4,ere=1-F$,tre=1+F$,D$=.01,rre=0-D$,nre=0+D$;function Io(e){return e.max-e.min}function sre(e,t,r){return Math.abs(e-t)<=r}function FA(e,t,r,n=.5){e.origin=n,e.originPoint=Qs(t.min,t.max,e.origin),e.scale=Io(r)/Io(t),e.translate=Qs(r.min,r.max,e.origin)-e.originPoint,(e.scale>=ere&&e.scale<=tre||isNaN(e.scale))&&(e.scale=1),(e.translate>=rre&&e.translate<=nre||isNaN(e.translate))&&(e.translate=0)}function Hy(e,t,r,n){FA(e.x,t.x,r.x,n?n.originX:void 0),FA(e.y,t.y,r.y,n?n.originY:void 0)}function DA(e,t,r){e.min=r.min+t.min,e.max=e.min+Io(t)}function are(e,t,r){DA(e.x,t.x,r.x),DA(e.y,t.y,r.y)}function OA(e,t,r){e.min=t.min-r.min,e.max=e.min+Io(t)}function Gy(e,t,r){OA(e.x,t.x,r.x),OA(e.y,t.y,r.y)}function cc(e){return[e("x"),e("y")]}const O$=({current:e})=>e?e.ownerDocument.defaultView:null,RA=(e,t)=>Math.abs(e-t);function ire(e,t){const r=RA(e.x,t.x),n=RA(e.y,t.y);return Math.sqrt(r**2+n**2)}class R${constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=IS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=ire(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:y}=h,{timestamp:v}=zi;this.history.push({...y,timestamp:v});const{onStart:T,onMove:k}=this.handlers;g||(T&&T(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=RS(g,this.transformPagePoint),Us.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:x,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=IS(h.type==="pointercancel"?this.lastMoveEventInfo:RS(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,T),y&&y(h,T)},!bC(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=n2(t),c=RS(o,this.transformPagePoint),{point:u}=c,{timestamp:d}=zi;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,IS(c,this.history)),this.removeListeners=e2(Wy(this.contextWindow,"pointermove",this.handlePointerMove),Wy(this.contextWindow,"pointerup",this.handlePointerUp),Wy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Lf(this.updatePoint)}}function RS(e,t){return t?{point:t(e.point)}:e}function IA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function IS({point:e},t){return{point:e,delta:IA(e,I$(t)),offset:IA(e,ore(t)),velocity:lre(t,.1)}}function ore(e){return e[0]}function I$(e){return e[e.length-1]}function lre(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=I$(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Vu(t)));)r--;if(!n)return{x:0,y:0};const a=qu(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function cre(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Qs(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Qs(r,e,n.max):Math.min(e,r)),e}function LA(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function ure(e,{top:t,left:r,bottom:n,right:s}){return{x:LA(e.x,r,s),y:LA(e.y,t,n)}}function BA(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function dre(e,t){return{x:BA(e.x,t.x),y:BA(e.y,t.y)}}function fre(e,t){let r=.5;const n=Io(e),s=Io(t);return s>n?r=dv(t.min,t.max-n,e.min):n>s&&(r=dv(e.min,e.max-s,t.min)),a0(0,1,r)}function hre(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Kk=.35;function mre(e=Kk){return e===!1?e=0:e===!0&&(e=Kk),{x:$A(e,"left","right"),y:$A(e,"top","bottom")}}function $A(e,t,r){return{min:zA(e,t),max:zA(e,r)}}function zA(e,t){return typeof e=="number"?e:e[t]||0}const gre=new WeakMap;class pre{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ca(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(n2(f).point)},i=(f,h)=>{const{drag:g,dragPropagation:x,onDragStart:y}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kee(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cc(T=>{let k=this.getAxisMotionValue(T).get()||0;if(Ku.test(k)){const{projection:b}=this.visualElement;if(b&&b.layout){const C=b.layout.layoutBox[T];C&&(k=Io(C)*(parseFloat(k)/100))}}this.originPoint[T]=k}),y&&Us.postRender(()=>y(f,h)),Vk(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:y,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:T}=h;if(x&&this.currentDirection===null){this.currentDirection=xre(T),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,T),this.updateAxis("y",h.point,T),this.visualElement.render(),v&&v(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>cc(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new R$(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:O$(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Us.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Hw(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=cre(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&gp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=ure(n.layoutBox,t):this.constraints=!1,this.elastic=mre(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&cc(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=hre(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!gp(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=yte(n,s.root,this.visualElement.getTransformPagePoint());let i=dre(s.layout.layoutBox,a);if(r){const o=r(gte(i));this.hasMutatedConstraints=!!o,o&&(i=w$(o))}return i}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=cc(d=>{if(!Hw(d,r,this.currentDirection))return;let f=c&&c[d]||{};i&&(f={min:0,max:0});const h=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Vk(this.visualElement,t),n.start(PC(t,n,0,r,this.visualElement,!1))}stopAnimation(){cc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cc(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){cc(r=>{const{drag:n}=this.getProps();if(!Hw(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(t[r]-Qs(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!gp(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};cc(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const c=o.get();s[i]=fre({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cc(i=>{if(!Hw(i,t,null))return;const o=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];o.set(Qs(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;gre.set(this.visualElement,this);const t=this.visualElement.current,r=Wy(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();gp(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Us.read(n);const i=pv(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(cc(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=Kk,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function Hw(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function xre(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class yre extends Jf{constructor(t){super(t),this.removeGroupControls=yc,this.removeListeners=yc,this.controls=new pre(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yc}unmount(){this.removeGroupControls(),this.removeListeners()}}const UA=e=>(t,r)=>{e&&Us.postRender(()=>e(t,r))};class vre extends Jf{constructor(){super(...arguments),this.removePointerDownListener=yc}onPointerDown(t){this.session=new R$(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:O$(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:UA(t),onStart:UA(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&Us.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=Wy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ax={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(rn.test(e))e=parseFloat(e);else return e;const r=WA(e,t.target.x),n=WA(e,t.target.y);return`${r}% ${n}%`}},wre={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Bf.parse(e);if(s.length>5)return n;const a=Bf.createTransformer(e),i=typeof s[0]!="number"?1:0,o=r.x.scale*t.x,c=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=c;const u=Qs(o,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let LS=!1;class bre extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;Wee(_re),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),LS&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Wb.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,LS=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Us.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),wC.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;LS=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function L$(e){const[t,r]=i$(),n=_.useContext(QT);return l.jsx(bre,{...e,layoutGroup:n,switchLayoutGroup:_.useContext(y$),isPresent:t,safeToRemove:r})}const _re={borderRadius:{...Ax,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ax,borderTopRightRadius:Ax,borderBottomLeftRadius:Ax,borderBottomRightRadius:Ax,boxShadow:wre};function Sre(e,t,r){const n=mo(e)?e:Bp(e);return n.start(PC("",n,t,r)),n.animation}const kre=(e,t)=>e.depth-t.depth;class Tre{constructor(){this.children=[],this.isDirty=!1}add(t){tC(this.children,t),this.isDirty=!0}remove(t){rC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kre),this.isDirty=!1,this.children.forEach(t)}}function Cre(e,t){const r=ol.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(Lf(n),e(a-t))};return Us.setup(n,!0),()=>Lf(n)}const B$=["TopLeft","TopRight","BottomLeft","BottomRight"],Nre=B$.length,HA=e=>typeof e=="string"?parseFloat(e):e,GA=e=>typeof e=="number"||rn.test(e);function Ere(e,t,r,n,s,a){s?(e.opacity=Qs(0,r.opacity??1,Are(n)),e.opacityExit=Qs(t.opacity??1,0,jre(n))):a&&(e.opacity=Qs(t.opacity??1,r.opacity??1,n));for(let i=0;i<Nre;i++){const o=`border${B$[i]}Radius`;let c=VA(t,o),u=VA(r,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||GA(c)===GA(u)?(e[o]=Math.max(Qs(HA(c),HA(u),n),0),(Ku.test(u)||Ku.test(c))&&(e[o]+="%")):e[o]=u}(t.rotate||r.rotate)&&(e.rotate=Qs(t.rotate||0,r.rotate||0,n))}function VA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Are=$$(0,.5,CB),jre=$$(.5,.95,yc);function $$(e,t,r){return n=>n<e?0:n>t?1:r(dv(e,t,n))}function qA(e,t){e.min=t.min,e.max=t.max}function rc(e,t){qA(e.x,t.x),qA(e.y,t.y)}function KA(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function YA(e,t,r,n,s){return e-=t,e=l4(e,1/r,n),s!==void 0&&(e=l4(e,1/s,n)),e}function Pre(e,t=0,r=1,n=.5,s,a=e,i=e){if(Ku.test(t)&&(t=parseFloat(t),t=Qs(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=Qs(a.min,a.max,n);e===a&&(o-=t),e.min=YA(e.min,t,r,o,s),e.max=YA(e.max,t,r,o,s)}function XA(e,t,[r,n,s],a,i){Pre(e,t[r],t[n],t[s],t.scale,a,i)}const Mre=["x","scaleX","originX"],Fre=["y","scaleY","originY"];function JA(e,t,r,n){XA(e.x,t,Mre,r?r.x:void 0,n?n.x:void 0),XA(e.y,t,Fre,r?r.y:void 0,n?n.y:void 0)}function QA(e){return e.translate===0&&e.scale===1}function z$(e){return QA(e.x)&&QA(e.y)}function ZA(e,t){return e.min===t.min&&e.max===t.max}function Dre(e,t){return ZA(e.x,t.x)&&ZA(e.y,t.y)}function ej(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function U$(e,t){return ej(e.x,t.x)&&ej(e.y,t.y)}function tj(e){return Io(e.x)/Io(e.y)}function rj(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Ore{constructor(){this.members=[]}add(t){tC(this.members,t),t.scheduleRender()}remove(t){if(rC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Rre(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:g,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),g&&(n+=`skewX(${g}deg) `),x&&(n+=`skewY(${x}deg) `)}const o=e.x.scale*t.x,c=e.y.scale*t.y;return(o!==1||c!==1)&&(n+=`scale(${o}, ${c})`),n||"none"}const BS=["","X","Y","Z"],Ire=1e3;let Lre=0;function $S(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function W$(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=E$(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Us,!(s||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&W$(n)}function H$({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=Lre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zre),this.nodes.forEach(Gre),this.nodes.forEach(Vre),this.nodes.forEach(Ure)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Tre)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new aC),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const c=this.eventHandlers.get(i);c&&c.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=a$(i)&&!jee(i),this.instance=i;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;Us.read(()=>{f=window.innerWidth}),e(i,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,d&&d(),d=Cre(h,250),Wb.hasAnimatedSinceResize&&(Wb.hasAnimatedSinceResize=!1,this.nodes.forEach(aj)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Jre,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),T=!this.targetLayout||!U$(this.targetLayout,g),k=!f&&h;if(this.options.layoutRoot||this.resumeFrom||k||f&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...yC(x,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,k)}else f||aj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Lf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qre),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&W$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(sj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Hre),this.nodes.forEach(Bre),this.nodes.forEach($re)):this.nodes.forEach(sj),this.clearAllSnapshots();const o=ol.now();zi.delta=a0(0,1e3/60,o-zi.timestamp),zi.timestamp=o,zi.isProcessing=!0,ES.update.process(zi),ES.preRender.process(zi),ES.render.process(zi),zi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Wre),this.sharedNodes.forEach(Kre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Us.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Us.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Io(this.snapshot.measuredBox.x)&&!Io(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ca(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!z$(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||qh(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return i&&(c=this.removeTransform(c)),Qre(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Ca();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Zre))){const{scroll:u}=this.root;u&&(pp(o.x,u.offset.x),pp(o.y,u.offset.y))}return o}removeElementScroll(i){const o=Ca();if(rc(o,i),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&rc(o,i),pp(o.x,d.offset.x),pp(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const c=Ca();rc(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&xp(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qh(d.latestValues)&&xp(c,d.latestValues)}return qh(this.latestValues)&&xp(c,this.latestValues),c}removeTransform(i){const o=Ca();rc(o,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!qh(u.latestValues))continue;Uk(u.latestValues)&&u.updateSnapshot();const d=Ca(),f=u.measurePageBox();rc(d,f),JA(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return qh(this.latestValues)&&JA(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=zi.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ca(),this.relativeTargetOrigin=Ca(),Gy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),rc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ca(),this.targetWithTransforms=Ca()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),are(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rc(this.target,this.layout.layoutBox),_$(this.target,this.targetDelta)):rc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ca(),this.relativeTargetOrigin=Ca(),Gy(this.relativeTargetOrigin,this.target,h.target),rc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Uk(this.parent.latestValues)||b$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===zi.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;rc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;xte(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Ca());const{target:g}=i;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(KA(this.prevProjectionDelta.x,this.projectionDelta.x),KA(this.prevProjectionDelta.y,this.projectionDelta.y)),Hy(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!rj(this.projectionDelta.x,this.prevProjectionDelta.x)||!rj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yp(),this.projectionDelta=yp(),this.projectionDeltaWithTransform=yp()}setAnimationOrigin(i,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=yp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Ca(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,y=g!==x,v=this.getStack(),T=!v||v.members.length<=1,k=!!(y&&!T&&this.options.crossfade===!0&&!this.path.some(Xre));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const E=C/1e3;ij(f.x,i.x,E),ij(f.y,i.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Yre(this.relativeTarget,this.relativeTargetOrigin,h,E),b&&Dre(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ca()),rc(b,this.relativeTarget)),y&&(this.animationValues=d,Ere(d,u,this.latestValues,E,k,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Lf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Us.update(()=>{Wb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bp(0)),this.currentAnimation=Sre(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ire),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=i;if(!(!o||!c||!u)){if(this!==i&&this.layout&&u&&G$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ca();const f=Io(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+f;const h=Io(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+h}rc(o,c),xp(o,d),Hy(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Ore),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&$S("z",i,u,this.animationValues);for(let d=0;d<BS.length;d++)$S(`rotate${BS[d]}`,i,u,this.animationValues),$S(`skew${BS[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Ub(o?.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Ub(o?.pointerEvents)||""),this.hasProjected&&!qh(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=Rre(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),i.transform=f;const{x:h,y:g}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in gv){if(d[x]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:T}=gv[x],k=f==="none"?d[x]:y(d[x],u);if(v){const b=v.length;for(let C=0;C<b;C++)i[v[C]]=k}else T?this.options.visualElement.renderState.vars[x]=k:i[x]=k}this.options.layoutId&&(i.pointerEvents=u===this?Ub(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(nj),this.root.sharedNodes.clear()}}}function Bre(e){e.updateLayout()}function $re(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?cc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Io(f);f.min=r[d].min,f.max=f.min+h}):G$(s,t.layoutBox,r)&&cc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Io(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const i=yp();Hy(i,r,t.layoutBox);const o=yp();a?Hy(o,e.applyTransform(n,!0),t.measuredBox):Hy(o,r,t.layoutBox);const c=!z$(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const g=Ca();Gy(g,t.layoutBox,f.layoutBox);const x=Ca();Gy(x,r,h.layoutBox),U$(g,x)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function zre(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Ure(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Wre(e){e.clearSnapshot()}function nj(e){e.clearMeasurements()}function sj(e){e.isLayoutDirty=!1}function Hre(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function aj(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Gre(e){e.resolveTargetDelta()}function Vre(e){e.calcProjection()}function qre(e){e.resetSkewAndRotation()}function Kre(e){e.removeLeadSnapshot()}function ij(e,t,r){e.translate=Qs(t.translate,0,r),e.scale=Qs(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function oj(e,t,r,n){e.min=Qs(t.min,r.min,n),e.max=Qs(t.max,r.max,n)}function Yre(e,t,r,n){oj(e.x,t.x,r.x,n),oj(e.y,t.y,r.y,n)}function Xre(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Jre={duration:.45,ease:[.4,0,.1,1]},lj=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),cj=lj("applewebkit/")&&!lj("chrome/")?Math.round:yc;function uj(e){e.min=cj(e.min),e.max=cj(e.max)}function Qre(e){uj(e.x),uj(e.y)}function G$(e,t,r){return e==="position"||e==="preserve-aspect"&&!sre(tj(t),tj(r),.2)}function Zre(e){return e!==e.root&&e.scroll?.wasRoot}const ene=H$({attachResizeListener:(e,t)=>pv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zS={current:void 0},V$=H$({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!zS.current){const e=new ene({});e.mount(window),e.setOptions({layoutScroll:!0}),zS.current=e}return zS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),tne={pan:{Feature:vre},drag:{Feature:yre,ProjectionNode:V$,MeasureLayout:L$}};function dj(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&Us.postRender(()=>a(t,n2(t)))}class rne extends Jf{mount(){const{current:t}=this.node;t&&(this.unmount=Tee(t,(r,n)=>(dj(this.node,n,"Start"),s=>dj(this.node,s,"End"))))}unmount(){}}class nne extends Jf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=e2(pv(this.node.current,"focus",()=>this.onFocus()),pv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fj(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&Us.postRender(()=>a(t,n2(t)))}class sne extends Jf{mount(){const{current:t}=this.node;t&&(this.unmount=Aee(t,(r,n)=>(fj(this.node,n,"Start"),(s,{success:a})=>fj(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Yk=new WeakMap,US=new WeakMap,ane=e=>{const t=Yk.get(e.target);t&&t(e)},ine=e=>{e.forEach(ane)};function one({root:e,...t}){const r=e||document;US.has(r)||US.set(r,{});const n=US.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(ine,{root:e,...t})),n[s]}function lne(e,t,r){const n=one(t);return Yk.set(e,r),n.observe(e),()=>{Yk.delete(e),n.unobserve(e)}}const cne={some:0,all:1};class une extends Jf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=t,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:cne[s]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return lne(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(dne(t,r))&&this.startObserver()}unmount(){}}function dne({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const fne={inView:{Feature:une},tap:{Feature:sne},focus:{Feature:nne},hover:{Feature:rne}},hne={layout:{ProjectionNode:V$,MeasureLayout:L$}},mne={...Qte,...fne,...tne,...hne},dt=mte(mne,Nte),rt=({children:e,variant:t="primary",size:r="md",onClick:n,disabled:s=!1,className:a="",...i})=>{const o="font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer",c={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",outline:"bg-transparent text-blue-600 border-2 border-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-700 focus:ring-gray-500"},u={xs:"px-2 py-1 text-xs",sm:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm",md:"px-3 py-1.5 text-sm sm:px-4 sm:py-2 sm:text-base",lg:"px-4 py-2 text-base sm:px-6 sm:py-3 sm:text-lg",icon:"p-0 flex items-center justify-center"},d=s?"opacity-50 cursor-not-allowed":"";return l.jsx(dt.button,{className:`${o} ${c[t]} ${u[r]} ${d} ${a}`,onClick:n,disabled:s,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...i,children:e})},cn=({size:e="md",color:t="blue",className:r=""})=>{const n={sm:"w-4 h-4",small:"w-4 h-4",md:"w-6 h-6",medium:"w-6 h-6",lg:"w-8 h-8",large:"w-8 h-8",xl:"w-12 h-12"},s={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",gray:"border-gray-600"};return l.jsx(dt.div,{className:`
        inline-block border-2 border-gray-300 border-t-current rounded-full animate-spin
        ${n[e]} ${s[t]} ${r}
      `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},ou=({type:e="info",message:t="",duration:r=3e3,closable:n=!0,onClose:s,className:a="",...i})=>{const[o,c]=_.useState(!0),[u,d]=_.useState(!1),f=_.useRef(null),h=_.useRef(null);_.useEffect(()=>{if(r>0)return h.current=setTimeout(()=>{g()},r),()=>{h.current&&clearTimeout(h.current)}},[r]);const g=_.useCallback(()=>{u||(d(!0),h.current&&clearTimeout(h.current),setTimeout(()=>{c(!1),s&&s()},300))},[u,s]),x=_.useCallback(T=>{T.key==="Escape"&&g()},[g]);if(!o)return null;const y=["notification",`notification-${e}`,o?"notification-visible":"",u?"notification-exiting":"",a].filter(Boolean).join(" "),v=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{ref:f,className:y,role:"alert","aria-live":"polite",onKeyDown:x,tabIndex:-1,...i,children:l.jsxs("div",{className:"notification-content",children:[l.jsx("div",{className:"notification-icon","aria-hidden":"true",children:v()}),l.jsx("div",{className:"notification-body",children:l.jsx("div",{className:"notification-message",children:t})}),n&&l.jsx("button",{className:"notification-close",onClick:g,type:"button","aria-label":"Close notification",children:""})]})})},ai=()=>{const[e,t]=_.useState([]),r=_.useCallback((a,i="info",o={})=>{const c=Date.now()+Math.random(),u={id:c,message:a,type:i,...o};return t(d=>[...d,u]),o.duration!==0&&setTimeout(()=>{n(c)},o.duration||3e3),c},[]),n=_.useCallback(a=>{t(i=>i.filter(o=>o.id!==a))},[]),s=_.useCallback(()=>{t([])},[]);return{notifications:e,showNotification:r,removeNotification:n,clearAllNotifications:s}},zl=()=>{const[e,t]=_.useState(!1),[r,n]=_.useState(null),[s,a]=_.useState(null),i=_.useRef(null);_.useRef(new Map);const o=_.useRef(0),c=3,u=1e3,d=_.useCallback(()=>{i.current&&(i.current.abort(),i.current=null)},[]);_.useEffect(()=>d,[d]);const f=_.useCallback(async(R,z={})=>{try{t(!0),n(null),i.current=new AbortController;const G=z.method||"POST",X={method:G,headers:{"Content-Type":"application/json",...z.headers},signal:i.current.signal,...z};G!=="GET"&&G!=="HEAD"&&(X.body=JSON.stringify(z.data||{})),console.log(`[API] Making request to: ${R}`,X);const ne=await fetch(R,X);if(!ne.ok)throw new Error(`HTTP error! status: ${ne.status}`);const q=await ne.json();if(console.log("[API] Response received:",q),q.success)return a(q),o.current=0,q;throw new Error(q.error||q.message||"Request failed")}catch(G){if(G.name==="AbortError")return console.log("[API] Request was aborted"),null;if(console.error("[API] Request failed:",G),n(G.message||"Request failed"),o.current<c){o.current++;const X=u*Math.pow(2,o.current-1);return console.log(`[API] Retrying in ${X}ms (attempt ${o.current}/${c})`),await new Promise(ne=>setTimeout(ne,X)),f(R,z)}throw G}finally{t(!1),i.current=null}},[]),h=_.useCallback(async(R,z={})=>{try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())throw new Error("No valid authentication token found");return await window.tokenManager.makeAuthenticatedRequest(R,z)}catch(G){throw console.error("[API] Authenticated request failed:",G),G}},[]),g=_.useCallback(async(R,z)=>{try{const G=`/.netlify/functions/get-test-questions?test_type=${R}&test_id=${z}`;console.log(`[API] Getting test info for ${R}_${z}`);const ne=await(await h(G)).json();if(ne.success)return console.log("[API] Test info retrieved successfully:",ne.test_info),ne.test_info;throw new Error(ne.error||"Failed to get test info")}catch(G){throw console.error("[API] Failed to get test info:",G),G}},[h]),x=_.useCallback(async(R,z)=>{try{const G=`/.netlify/functions/get-test-questions?test_type=${R}&test_id=${z}`;console.log(`[API] Getting test questions for ${R}_${z}`);const ne=await(await h(G)).json();if(ne.success)return console.log("[API] Test questions retrieved successfully:",ne.questions),ne.questions;throw new Error(ne.error||"Failed to get test questions")}catch(G){throw console.error("[API] Failed to get test questions:",G),G}},[h]),y=_.useCallback(async()=>{try{const R="/.netlify/functions/get-student-active-tests";console.log("[API] Loading student active tests");const G=await(await h(R)).json();if(G.success)return console.log("[API] Student active tests loaded successfully:",G.tests),G.tests;throw new Error(G.error||"Failed to load student active tests")}catch(R){throw console.error("[API] Failed to load student active tests:",R),R}},[h]),v=_.useCallback(async(R,z,G)=>{try{let X;switch(R){case"true_false":X="/.netlify/functions/submit-true-false-test";break;case"multiple_choice":X="/.netlify/functions/submit-multiple-choice-test";break;case"input":X="/.netlify/functions/submit-input-test";break;case"matching_type":X="/.netlify/functions/submit-matching-type-test";break;case"speaking":X="/.netlify/functions/submit-speaking-test";break;default:throw new Error(`Unknown test type: ${R}`)}console.log(`[API] Submitting ${R} test:`,G);const q=await(await h(X,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).json();if(q.success)return console.log("[API] Test submitted successfully:",q),q;throw new Error(q.error||"Failed to submit test")}catch(X){throw console.error("[API] Failed to submit test:",X),X}},[h]),T=_.useCallback(async R=>{try{const z="/.netlify/functions/save-multiple-choice-test";console.log("[API] Saving multiple choice test:",R);const X=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(X.success)return console.log("[API] Multiple choice test saved successfully:",X),X;throw new Error(X.error||"Failed to save multiple choice test")}catch(z){throw console.error("[API] Failed to save multiple choice test:",z),z}},[h]),k=_.useCallback(async R=>{try{const z="/.netlify/functions/save-true-false-test";console.log("[API] Saving true/false test:",R);const X=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(X.success)return console.log("[API] True/false test saved successfully:",X),X;throw new Error(X.error||"Failed to save true/false test")}catch(z){throw console.error("[API] Failed to save true/false test:",z),z}},[h]),b=_.useCallback(async R=>{try{const z="/.netlify/functions/save-input-test";console.log("[API] Saving input test:",R);const X=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(X.success)return console.log("[API] Input test saved successfully:",X),X;throw new Error(X.error||"Failed to save input test")}catch(z){throw console.error("[API] Failed to save input test:",z),z}},[h]),C=_.useCallback(async R=>{try{const z="/.netlify/functions/assign-test";console.log("[API] Assigning test to classes:",R);const X=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(X.success)return console.log("[API] Test assigned successfully:",X),X;throw new Error(X.error||"Failed to assign test")}catch(z){throw console.error("[API] Failed to assign test:",z),z}},[h]),E=_.useCallback(async()=>{try{const R="/.netlify/functions/get-teacher-active-tests";console.log("[API] Loading teacher active tests");const G=await(await h(R)).json();if(G.success)return console.log("[API] Teacher active tests loaded successfully:",G.tests),G.tests;throw new Error(G.error||"Failed to load teacher active tests")}catch(R){throw console.error("[API] Failed to load teacher active tests:",R),R}},[h]),j=_.useCallback(async()=>{try{const R="/.netlify/functions/get-all-users";console.log("[API] Getting all users");const G=await(await h(R)).json();if(G.success)return console.log("[API] All users loaded successfully:",G.users),G.users;throw new Error(G.error||"Failed to get all users")}catch(R){throw console.error("[API] Failed to get all users:",R),R}},[h]),P=_.useCallback(async()=>{try{const R="/.netlify/functions/get-all-teachers";console.log("[API] Getting all teachers");const G=await(await h(R)).json();if(G.success)return console.log("[API] All teachers loaded successfully:",G.teachers),G.teachers;throw new Error(G.error||"Failed to get all teachers")}catch(R){throw console.error("[API] Failed to get all teachers:",R),R}},[h]),A=_.useCallback(async()=>{try{const R="/.netlify/functions/get-all-subjects";console.log("[API] Getting all subjects");const G=await(await h(R)).json();if(G.success)return console.log("[API] All subjects loaded successfully:",G.subjects),G.subjects;throw new Error(G.error||"Failed to get all subjects")}catch(R){throw console.error("[API] Failed to get all subjects:",R),R}},[h]),M=_.useCallback(()=>{n(null)},[]),F=_.useCallback(()=>{a(null)},[]),B=_.useCallback(()=>{t(!1),n(null),a(null),o.current=0,d()},[d]),V=_.useCallback(async(R,z={})=>{const X=await(await h(R,{...z,method:"GET"})).json();if(X.success)return X;throw new Error(X.error||"Request failed")},[h]),ee=_.useCallback(async(R,z,G={})=>{const ne=await(await h(R,{...G,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(ne.success)return ne;throw new Error(ne.error||"Request failed")},[h]),ae=_.useCallback(async(R,z,G={})=>{const ne=await(await h(R,{...G,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(ne.success)return ne;throw new Error(ne.error||"Request failed")},[h]),Z=_.useCallback(async(R,z={})=>{const X=await(await h(R,{...z,method:"DELETE"})).json();if(X.success)return X;throw new Error(X.error||"Request failed")},[h]),te=_.useCallback(async R=>{try{const z="/.netlify/functions/submit-speaking-test";console.log("[API] Submitting speaking test:",R);const X=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(X.success)return console.log("[API] Speaking test submitted successfully:",X),X;throw new Error(X.error||"Failed to submit speaking test")}catch(z){throw console.error("[API] Failed to submit speaking test:",z),z}},[h]),L=_.useCallback(async R=>{try{const z=`/.netlify/functions/get-speaking-test-new?action=test&test_id=${R}`;console.log("[API] Getting speaking test:",R);const X=await(await h(z,{method:"GET"})).json();if(X.success)return console.log("[API] Speaking test loaded successfully:",X),X;throw new Error(X.error||"Failed to load speaking test")}catch(z){throw console.error("[API] Failed to load speaking test:",z),z}},[h]),K=_.useCallback(async R=>{try{const z=`/.netlify/functions/get-speaking-test-new?action=questions&test_id=${R}`;console.log("[API] Getting speaking test questions:",R);const X=await(await h(z,{method:"GET"})).json();if(X.success)return console.log("[API] Speaking test questions loaded successfully:",X),X;throw new Error(X.error||"Failed to load speaking test questions")}catch(z){throw console.error("[API] Failed to load speaking test questions:",z),z}},[h]),I=_.useCallback(async R=>{try{const z="/.netlify/functions/upload-speaking-audio";console.log("[API] Uploading speaking audio");const X=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(X.success)return console.log("[API] Audio uploaded successfully:",X),X;throw new Error(X.error||"Failed to upload audio")}catch(z){throw console.error("[API] Failed to upload audio:",z),z}},[h]),H=_.useCallback(async R=>{try{const z=`/.netlify/functions/get-speaking-test-new?action=audio&file_path=${encodeURIComponent(R)}`;console.log("[API] Getting speaking audio:",R);const X=await(await h(z,{method:"GET"})).json();if(X.success)return console.log("[API] Audio URL retrieved successfully:",X),X;throw new Error(X.error||"Failed to get audio")}catch(z){throw console.error("[API] Failed to get audio:",z),z}},[h]),U=_.useCallback(async(R,z)=>{try{const G=`/.netlify/functions/check-test-completion?test_id=${R}&test_type=${z}`;console.log("[API] Checking test completion:",R,z);const ne=await(await h(G,{method:"GET"})).json();if(ne.success)return console.log("[API] Test completion status:",ne),ne;throw new Error(ne.error||"Failed to check test completion")}catch(G){throw console.error("[API] Failed to check test completion:",G),G}},[h]);return{loading:e,error:r,data:s,sendRequest:f,makeAuthenticatedRequest:h,get:V,post:ee,put:ae,delete:Z,getTestInfo:g,getTestQuestions:x,loadStudentActiveTests:y,submitTest:v,submitSpeakingTest:te,getSpeakingTest:L,getSpeakingTestQuestions:K,uploadSpeakingAudio:I,getSpeakingAudio:H,checkTestCompletion:U,saveMultipleChoiceTest:T,saveTrueFalseTest:k,saveInputTest:b,assignTestToClasses:C,loadTeacherActiveTests:E,getAllUsers:j,getAllTeachers:P,getAllSubjects:A,clearError:M,clearData:F,reset:B,cleanup:d}},gne="modulepreload",pne=function(e){return"/"+e},hj={},Za=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var i=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=u(r.map(d=>{if(d=pne(d),d in hj)return;hj[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":gne,f||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((x,y)=>{g.addEventListener("load",x),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};var Hb={exports:{}},jx={},WS={},HS={},mj;function Tn(){return mj||(mj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof t4<"u"?t4:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:r(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(HS)),HS}var GS={},gj;function pa(){return gj||(gj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Tn();class r{constructor(C=[1,0,0,1,0,0]){this.dirty=!1,this.m=C&&C.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(C){C.m[0]=this.m[0],C.m[1]=this.m[1],C.m[2]=this.m[2],C.m[3]=this.m[3],C.m[4]=this.m[4],C.m[5]=this.m[5]}point(C){const E=this.m;return{x:E[0]*C.x+E[2]*C.y+E[4],y:E[1]*C.x+E[3]*C.y+E[5]}}translate(C,E){return this.m[4]+=this.m[0]*C+this.m[2]*E,this.m[5]+=this.m[1]*C+this.m[3]*E,this}scale(C,E){return this.m[0]*=C,this.m[1]*=C,this.m[2]*=E,this.m[3]*=E,this}rotate(C){const E=Math.cos(C),j=Math.sin(C),P=this.m[0]*E+this.m[2]*j,A=this.m[1]*E+this.m[3]*j,M=this.m[0]*-j+this.m[2]*E,F=this.m[1]*-j+this.m[3]*E;return this.m[0]=P,this.m[1]=A,this.m[2]=M,this.m[3]=F,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(C,E){const j=this.m[0]+this.m[2]*E,P=this.m[1]+this.m[3]*E,A=this.m[2]+this.m[0]*C,M=this.m[3]+this.m[1]*C;return this.m[0]=j,this.m[1]=P,this.m[2]=A,this.m[3]=M,this}multiply(C){const E=this.m[0]*C.m[0]+this.m[2]*C.m[1],j=this.m[1]*C.m[0]+this.m[3]*C.m[1],P=this.m[0]*C.m[2]+this.m[2]*C.m[3],A=this.m[1]*C.m[2]+this.m[3]*C.m[3],M=this.m[0]*C.m[4]+this.m[2]*C.m[5]+this.m[4],F=this.m[1]*C.m[4]+this.m[3]*C.m[5]+this.m[5];return this.m[0]=E,this.m[1]=j,this.m[2]=P,this.m[3]=A,this.m[4]=M,this.m[5]=F,this}invert(){const C=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),E=this.m[3]*C,j=-this.m[1]*C,P=-this.m[2]*C,A=this.m[0]*C,M=C*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),F=C*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=E,this.m[1]=j,this.m[2]=P,this.m[3]=A,this.m[4]=M,this.m[5]=F,this}getMatrix(){return this.m}decompose(){const C=this.m[0],E=this.m[1],j=this.m[2],P=this.m[3],A=this.m[4],M=this.m[5],F=C*P-E*j,B={x:A,y:M,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(C!=0||E!=0){const V=Math.sqrt(C*C+E*E);B.rotation=E>0?Math.acos(C/V):-Math.acos(C/V),B.scaleX=V,B.scaleY=F/V,B.skewX=(C*j+E*P)/F,B.skewY=0}else if(j!=0||P!=0){const V=Math.sqrt(j*j+P*P);B.rotation=Math.PI/2-(P>0?Math.acos(-j/V):-Math.acos(j/V)),B.scaleX=F/V,B.scaleY=V,B.skewX=0,B.skewY=(C*j+E*P)/F}return B.rotation=e.Util._getRotation(B.rotation),B}}e.Transform=r;const n="[object Array]",s="[object Number]",a="[object String]",i="[object Boolean]",o=Math.PI/180,c=180/Math.PI,u="#",d="",f="0",h="Konva warning: ",g="Konva error: ",x="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let T=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(b){setTimeout(b,60)};e.Util={_isElement(b){return!!(b&&b.nodeType==1)},_isFunction(b){return!!(b&&b.constructor&&b.call&&b.apply)},_isPlainObject(b){return!!b&&b.constructor===Object},_isArray(b){return Object.prototype.toString.call(b)===n},_isNumber(b){return Object.prototype.toString.call(b)===s&&!isNaN(b)&&isFinite(b)},_isString(b){return Object.prototype.toString.call(b)===a},_isBoolean(b){return Object.prototype.toString.call(b)===i},isObject(b){return b instanceof Object},isValidSelector(b){if(typeof b!="string")return!1;const C=b[0];return C==="#"||C==="."||C===C.toUpperCase()},_sign(b){return b===0||b>0?1:-1},requestAnimFrame(b){T.push(b),T.length===1&&k(function(){const C=T;T=[],C.forEach(function(E){E()})})},createCanvasElement(){const b=document.createElement("canvas");try{b.style=b.style||{}}catch{}return b},createImageElement(){return document.createElement("img")},_isInDocument(b){for(;b=b.parentNode;)if(b==document)return!0;return!1},_urlToImage(b,C){const E=e.Util.createImageElement();E.onload=function(){C(E)},E.src=b},_rgbToHex(b,C,E){return((1<<24)+(b<<16)+(C<<8)+E).toString(16).slice(1)},_hexToRgb(b){b=b.replace(u,d);const C=parseInt(b,16);return{r:C>>16&255,g:C>>8&255,b:C&255}},getRandomColor(){let b=(Math.random()*16777215<<0).toString(16);for(;b.length<6;)b=f+b;return u+b},getRGB(b){let C;return b in y?(C=y[b],{r:C[0],g:C[1],b:C[2]}):b[0]===u?this._hexToRgb(b.substring(1)):b.substr(0,4)===x?(C=v.exec(b.replace(/ /g,"")),{r:parseInt(C[1],10),g:parseInt(C[2],10),b:parseInt(C[3],10)}):{r:0,g:0,b:0}},colorToRGBA(b){return b=b||"black",e.Util._namedColorToRBA(b)||e.Util._hex3ColorToRGBA(b)||e.Util._hex4ColorToRGBA(b)||e.Util._hex6ColorToRGBA(b)||e.Util._hex8ColorToRGBA(b)||e.Util._rgbColorToRGBA(b)||e.Util._rgbaColorToRGBA(b)||e.Util._hslColorToRGBA(b)},_namedColorToRBA(b){const C=y[b.toLowerCase()];return C?{r:C[0],g:C[1],b:C[2],a:1}:null},_rgbColorToRGBA(b){if(b.indexOf("rgb(")===0){b=b.match(/rgb\(([^)]+)\)/)[1];const C=b.split(/ *, */).map(Number);return{r:C[0],g:C[1],b:C[2],a:1}}},_rgbaColorToRGBA(b){if(b.indexOf("rgba(")===0){b=b.match(/rgba\(([^)]+)\)/)[1];const C=b.split(/ *, */).map((E,j)=>E.slice(-1)==="%"?j===3?parseInt(E)/100:parseInt(E)/100*255:Number(E));return{r:C[0],g:C[1],b:C[2],a:C[3]}}},_hex8ColorToRGBA(b){if(b[0]==="#"&&b.length===9)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:parseInt(b.slice(7,9),16)/255}},_hex6ColorToRGBA(b){if(b[0]==="#"&&b.length===7)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:1}},_hex4ColorToRGBA(b){if(b[0]==="#"&&b.length===5)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:parseInt(b[4]+b[4],16)/255}},_hex3ColorToRGBA(b){if(b[0]==="#"&&b.length===4)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:1}},_hslColorToRGBA(b){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(b)){const[C,...E]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b),j=Number(E[0])/360,P=Number(E[1])/100,A=Number(E[2])/100;let M,F,B;if(P===0)return B=A*255,{r:Math.round(B),g:Math.round(B),b:Math.round(B),a:1};A<.5?M=A*(1+P):M=A+P-A*P;const V=2*A-M,ee=[0,0,0];for(let ae=0;ae<3;ae++)F=j+1/3*-(ae-1),F<0&&F++,F>1&&F--,6*F<1?B=V+(M-V)*6*F:2*F<1?B=M:3*F<2?B=V+(M-V)*(2/3-F)*6:B=V,ee[ae]=B*255;return{r:Math.round(ee[0]),g:Math.round(ee[1]),b:Math.round(ee[2]),a:1}}},haveIntersection(b,C){return!(C.x>b.x+b.width||C.x+C.width<b.x||C.y>b.y+b.height||C.y+C.height<b.y)},cloneObject(b){const C={};for(const E in b)this._isPlainObject(b[E])?C[E]=this.cloneObject(b[E]):this._isArray(b[E])?C[E]=this.cloneArray(b[E]):C[E]=b[E];return C},cloneArray(b){return b.slice(0)},degToRad(b){return b*o},radToDeg(b){return b*c},_degToRad(b){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(b)},_radToDeg(b){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(b)},_getRotation(b){return t.Konva.angleDeg?e.Util.radToDeg(b):b},_capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)},throw(b){throw new Error(g+b)},error(b){console.error(g+b)},warn(b){t.Konva.showWarnings&&console.warn(h+b)},each(b,C){for(const E in b)C(E,b[E])},_inRange(b,C,E){return C<=b&&b<E},_getProjectionToSegment(b,C,E,j,P,A){let M,F,B;const V=(b-E)*(b-E)+(C-j)*(C-j);if(V==0)M=b,F=C,B=(P-E)*(P-E)+(A-j)*(A-j);else{const ee=((P-b)*(E-b)+(A-C)*(j-C))/V;ee<0?(M=b,F=C,B=(b-P)*(b-P)+(C-A)*(C-A)):ee>1?(M=E,F=j,B=(E-P)*(E-P)+(j-A)*(j-A)):(M=b+ee*(E-b),F=C+ee*(j-C),B=(M-P)*(M-P)+(F-A)*(F-A))}return[M,F,B]},_getProjectionToLine(b,C,E){const j=e.Util.cloneObject(b);let P=Number.MAX_VALUE;return C.forEach(function(A,M){if(!E&&M===C.length-1)return;const F=C[(M+1)%C.length],B=e.Util._getProjectionToSegment(A.x,A.y,F.x,F.y,b.x,b.y),V=B[0],ee=B[1],ae=B[2];ae<P&&(j.x=V,j.y=ee,P=ae)}),j},_prepareArrayForTween(b,C,E){const j=[],P=[];if(b.length>C.length){const M=C;C=b,b=M}for(let M=0;M<b.length;M+=2)j.push({x:b[M],y:b[M+1]});for(let M=0;M<C.length;M+=2)P.push({x:C[M],y:C[M+1]});const A=[];return P.forEach(function(M){const F=e.Util._getProjectionToLine(M,j,E);A.push(F.x),A.push(F.y)}),A},_prepareToStringify(b){let C;b.visitedByCircularReferenceRemoval=!0;for(const E in b)if(b.hasOwnProperty(E)&&b[E]&&typeof b[E]=="object"){if(C=Object.getOwnPropertyDescriptor(b,E),b[E].visitedByCircularReferenceRemoval||e.Util._isElement(b[E]))if(C.configurable)delete b[E];else return null;else if(e.Util._prepareToStringify(b[E])===null)if(C.configurable)delete b[E];else return null}return delete b.visitedByCircularReferenceRemoval,b},_assign(b,C){for(const E in C)b[E]=C[E];return b},_getFirstPointerId(b){return b.touches?b.changedTouches[0].identifier:b.pointerId||999},releaseCanvas(...b){t.Konva.releaseCanvasOnDestroy&&b.forEach(C=>{C.width=0,C.height=0})},drawRoundedRectPath(b,C,E,j){let P=0,A=0,M=0,F=0;typeof j=="number"?P=A=M=F=Math.min(j,C/2,E/2):(P=Math.min(j[0]||0,C/2,E/2),A=Math.min(j[1]||0,C/2,E/2),F=Math.min(j[2]||0,C/2,E/2),M=Math.min(j[3]||0,C/2,E/2)),b.moveTo(P,0),b.lineTo(C-A,0),b.arc(C-A,A,A,Math.PI*3/2,0,!1),b.lineTo(C,E-F),b.arc(C-F,E-F,F,0,Math.PI/2,!1),b.lineTo(M,E),b.arc(M,E-M,M,Math.PI/2,Math.PI,!1),b.lineTo(0,P),b.arc(P,P,P,Math.PI,Math.PI*3/2,!1)}}})(GS)),GS}var Px={},Fd={},Dd={},pj;function q$(){if(pj)return Dd;pj=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.HitContext=Dd.SceneContext=Dd.Context=void 0;const e=pa(),t=Tn();function r(T){const k=[],b=T.length,C=e.Util;for(let E=0;E<b;E++){let j=T[E];C._isNumber(j)?j=Math.round(j*1e3)/1e3:C._isString(j)||(j=j+""),k.push(j)}return k}const n=",",s="(",a=")",i="([",o="])",c=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],h=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let x=class{constructor(k){this.canvas=k,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(k){k.fillEnabled()&&this._fill(k)}_fill(k){}strokeShape(k){k.hasStroke()&&this._stroke(k)}_stroke(k){}fillStrokeShape(k){k.attrs.fillAfterStrokeEnabled?(this.strokeShape(k),this.fillShape(k)):(this.fillShape(k),this.strokeShape(k))}getTrace(k,b){let C=this.traceArr,E=C.length,j="",P,A,M,F;for(P=0;P<E;P++)A=C[P],M=A.method,M?(F=A.args,j+=M,k?j+=u:e.Util._isArray(F[0])?j+=i+F.join(n)+o:(b&&(F=F.map(B=>typeof B=="number"?Math.floor(B):B)),j+=s+F.join(n)+a)):(j+=A.property,k||(j+=d+A.val)),j+=c;return j}clearTrace(){this.traceArr=[]}_trace(k){let b=this.traceArr,C;b.push(k),C=b.length,C>=g&&b.shift()}reset(){const k=this.getCanvas().getPixelRatio();this.setTransform(1*k,0,0,1*k,0,0)}getCanvas(){return this.canvas}clear(k){const b=this.getCanvas();k?this.clearRect(k.x||0,k.y||0,k.width||0,k.height||0):this.clearRect(0,0,b.getWidth()/b.pixelRatio,b.getHeight()/b.pixelRatio)}_applyLineCap(k){const b=k.attrs.lineCap;b&&this.setAttr("lineCap",b)}_applyOpacity(k){const b=k.getAbsoluteOpacity();b!==1&&this.setAttr("globalAlpha",b)}_applyLineJoin(k){const b=k.attrs.lineJoin;b&&this.setAttr("lineJoin",b)}setAttr(k,b){this._context[k]=b}arc(k,b,C,E,j,P){this._context.arc(k,b,C,E,j,P)}arcTo(k,b,C,E,j){this._context.arcTo(k,b,C,E,j)}beginPath(){this._context.beginPath()}bezierCurveTo(k,b,C,E,j,P){this._context.bezierCurveTo(k,b,C,E,j,P)}clearRect(k,b,C,E){this._context.clearRect(k,b,C,E)}clip(...k){this._context.clip.apply(this._context,k)}closePath(){this._context.closePath()}createImageData(k,b){const C=arguments;if(C.length===2)return this._context.createImageData(k,b);if(C.length===1)return this._context.createImageData(k)}createLinearGradient(k,b,C,E){return this._context.createLinearGradient(k,b,C,E)}createPattern(k,b){return this._context.createPattern(k,b)}createRadialGradient(k,b,C,E,j,P){return this._context.createRadialGradient(k,b,C,E,j,P)}drawImage(k,b,C,E,j,P,A,M,F){const B=arguments,V=this._context;B.length===3?V.drawImage(k,b,C):B.length===5?V.drawImage(k,b,C,E,j):B.length===9&&V.drawImage(k,b,C,E,j,P,A,M,F)}ellipse(k,b,C,E,j,P,A,M){this._context.ellipse(k,b,C,E,j,P,A,M)}isPointInPath(k,b,C,E){return C?this._context.isPointInPath(C,k,b,E):this._context.isPointInPath(k,b,E)}fill(...k){this._context.fill.apply(this._context,k)}fillRect(k,b,C,E){this._context.fillRect(k,b,C,E)}strokeRect(k,b,C,E){this._context.strokeRect(k,b,C,E)}fillText(k,b,C,E){E?this._context.fillText(k,b,C,E):this._context.fillText(k,b,C)}measureText(k){return this._context.measureText(k)}getImageData(k,b,C,E){return this._context.getImageData(k,b,C,E)}lineTo(k,b){this._context.lineTo(k,b)}moveTo(k,b){this._context.moveTo(k,b)}rect(k,b,C,E){this._context.rect(k,b,C,E)}roundRect(k,b,C,E,j){this._context.roundRect(k,b,C,E,j)}putImageData(k,b,C){this._context.putImageData(k,b,C)}quadraticCurveTo(k,b,C,E){this._context.quadraticCurveTo(k,b,C,E)}restore(){this._context.restore()}rotate(k){this._context.rotate(k)}save(){this._context.save()}scale(k,b){this._context.scale(k,b)}setLineDash(k){this._context.setLineDash?this._context.setLineDash(k):"mozDash"in this._context?this._context.mozDash=k:"webkitLineDash"in this._context&&(this._context.webkitLineDash=k)}getLineDash(){return this._context.getLineDash()}setTransform(k,b,C,E,j,P){this._context.setTransform(k,b,C,E,j,P)}stroke(k){k?this._context.stroke(k):this._context.stroke()}strokeText(k,b,C,E){this._context.strokeText(k,b,C,E)}transform(k,b,C,E,j,P){this._context.transform(k,b,C,E,j,P)}translate(k,b){this._context.translate(k,b)}_enableTrace(){let k=this,b=f.length,C=this.setAttr,E,j;const P=function(A){let M=k[A],F;k[A]=function(){return j=r(Array.prototype.slice.call(arguments,0)),F=M.apply(k,arguments),k._trace({method:A,args:j}),F}};for(E=0;E<b;E++)P(f[E]);k.setAttr=function(){C.apply(k,arguments);const A=arguments[0];let M=arguments[1];(A==="shadowOffsetX"||A==="shadowOffsetY"||A==="shadowBlur")&&(M=M/this.canvas.getPixelRatio()),k._trace({property:A,val:M})}}_applyGlobalCompositeOperation(k){const b=k.attrs.globalCompositeOperation;!b||b==="source-over"||this.setAttr("globalCompositeOperation",b)}};Dd.Context=x,h.forEach(function(T){Object.defineProperty(x.prototype,T,{get(){return this._context[T]},set(k){this._context[T]=k}})});class y extends x{constructor(k,{willReadFrequently:b=!1}={}){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:b})}_fillColor(k){const b=k.fill();this.setAttr("fillStyle",b),k._fillFunc(this)}_fillPattern(k){this.setAttr("fillStyle",k._getFillPattern()),k._fillFunc(this)}_fillLinearGradient(k){const b=k._getLinearGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fillRadialGradient(k){const b=k._getRadialGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fill(k){const b=k.fill(),C=k.getFillPriority();if(b&&C==="color"){this._fillColor(k);return}const E=k.getFillPatternImage();if(E&&C==="pattern"){this._fillPattern(k);return}const j=k.getFillLinearGradientColorStops();if(j&&C==="linear-gradient"){this._fillLinearGradient(k);return}const P=k.getFillRadialGradientColorStops();if(P&&C==="radial-gradient"){this._fillRadialGradient(k);return}b?this._fillColor(k):E?this._fillPattern(k):j?this._fillLinearGradient(k):P&&this._fillRadialGradient(k)}_strokeLinearGradient(k){const b=k.getStrokeLinearGradientStartPoint(),C=k.getStrokeLinearGradientEndPoint(),E=k.getStrokeLinearGradientColorStops(),j=this.createLinearGradient(b.x,b.y,C.x,C.y);if(E){for(let P=0;P<E.length;P+=2)j.addColorStop(E[P],E[P+1]);this.setAttr("strokeStyle",j)}}_stroke(k){const b=k.dash(),C=k.getStrokeScaleEnabled();if(k.hasStroke()){if(!C){this.save();const j=this.getCanvas().getPixelRatio();this.setTransform(j,0,0,j,0,0)}this._applyLineCap(k),b&&k.dashEnabled()&&(this.setLineDash(b),this.setAttr("lineDashOffset",k.dashOffset())),this.setAttr("lineWidth",k.strokeWidth()),k.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),k.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(k):this.setAttr("strokeStyle",k.stroke()),k._strokeFunc(this),C||this.restore()}}_applyShadow(k){var b,C,E;const j=(b=k.getShadowRGBA())!==null&&b!==void 0?b:"black",P=(C=k.getShadowBlur())!==null&&C!==void 0?C:5,A=(E=k.getShadowOffset())!==null&&E!==void 0?E:{x:0,y:0},M=k.getAbsoluteScale(),F=this.canvas.getPixelRatio(),B=M.x*F,V=M.y*F;this.setAttr("shadowColor",j),this.setAttr("shadowBlur",P*Math.min(Math.abs(B),Math.abs(V))),this.setAttr("shadowOffsetX",A.x*B),this.setAttr("shadowOffsetY",A.y*V)}}Dd.SceneContext=y;class v extends x{constructor(k){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:!0})}_fill(k){this.save(),this.setAttr("fillStyle",k.colorKey),k._fillFuncHit(this),this.restore()}strokeShape(k){k.hasHitStroke()&&this._stroke(k)}_stroke(k){if(k.hasHitStroke()){const b=k.getStrokeScaleEnabled();if(!b){this.save();const j=this.getCanvas().getPixelRatio();this.setTransform(j,0,0,j,0,0)}this._applyLineCap(k);const C=k.hitStrokeWidth(),E=C==="auto"?k.strokeWidth():C;this.setAttr("lineWidth",E),this.setAttr("strokeStyle",k.colorKey),k._strokeFuncHit(this),b||this.restore()}}}return Dd.HitContext=v,Dd}var xj;function O_(){if(xj)return Fd;xj=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.HitCanvas=Fd.SceneCanvas=Fd.Canvas=void 0;const e=pa(),t=q$(),r=Tn();let n;function s(){if(n)return n;const c=e.Util.createCanvasElement(),u=c.getContext("2d");return n=(function(){const d=r.Konva._global.devicePixelRatio||1,f=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return d/f})(),e.Util.releaseCanvas(c),n}let a=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const f=(u||{}).pixelRatio||r.Konva.pixelRatio||s();this.pixelRatio=f,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const d=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,d){this.setWidth(u||0),this.setHeight(d||0)}toDataURL(u,d){try{return this._canvas.toDataURL(u,d)}catch{try{return this._canvas.toDataURL()}catch(h){return e.Util.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Fd.Canvas=a;class i extends a{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new t.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Fd.SceneCanvas=i;class o extends a{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(u.width,u.height)}}return Fd.HitCanvas=o,Fd}var VS={},yj;function MC(){return yj||(yj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Tn(),r=pa();e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((a,i)=>{const{node:o}=a,c=o.getStage();c.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const u=c._changedPointerPositions.find(d=>d.id===a.pointerId);if(u){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-a.startPointerPos.x),Math.abs(u.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),s.push(o)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:i}=a,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const u=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(a=>{a.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(VS)),VS}var qS={},tl={},vj;function Fn(){if(vj)return tl;vj=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.RGBComponent=n,tl.alphaComponent=s,tl.getNumberValidator=a,tl.getNumberOrArrayOfNumbersValidator=i,tl.getNumberOrAutoValidator=o,tl.getStringValidator=c,tl.getStringOrGradientValidator=u,tl.getFunctionValidator=d,tl.getNumberArrayValidator=f,tl.getBooleanValidator=h,tl.getComponentValidator=g;const e=Tn(),t=pa();function r(x){return t.Util._isString(x)?'"'+x+'"':Object.prototype.toString.call(x)==="[object Number]"||t.Util._isBoolean(x)?x:Object.prototype.toString.call(x)}function n(x){return x>255?255:x<0?0:Math.round(x)}function s(x){return x>1?1:x<1e-4?1e-4:x}function a(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),x}}function i(x){if(e.Konva.isUnminified)return function(y,v){let T=t.Util._isNumber(y),k=t.Util._isArray(y)&&y.length==x;return!T&&!k&&t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+x+")"),y}}function o(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||x==="auto"||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),x}}function c(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isString(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),x}}function u(){if(e.Konva.isUnminified)return function(x,y){const v=t.Util._isString(x),T=Object.prototype.toString.call(x)==="[object CanvasGradient]"||x&&x.addColorStop;return v||T||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),x}}function d(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isFunction(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),x}}function f(){if(e.Konva.isUnminified)return function(x,y){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&x instanceof v||(t.Util._isArray(x)?x.forEach(function(T){t.Util._isNumber(T)||t.Util.warn('"'+y+'" attribute has non numeric element '+T+". Make sure that all elements are numbers.")}):t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),x}}function h(){if(e.Konva.isUnminified)return function(x,y){return x===!0||x===!1||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),x}}function g(x){if(e.Konva.isUnminified)return function(y,v){return y==null||t.Util.isObject(y)||t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+x),y}}return tl}var wj;function jn(){return wj||(wj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=pa(),r=Fn(),n="get",s="set";e.Factory={addGetterSetter(a,i,o,c,u){e.Factory.addGetter(a,i,o),e.Factory.addSetter(a,i,c,u),e.Factory.addOverloadedGetterSetter(a,i)},addGetter(a,i,o){const c=n+t.Util._capitalize(i);a.prototype[c]=a.prototype[c]||function(){const u=this.attrs[i];return u===void 0?o:u}},addSetter(a,i,o,c){const u=s+t.Util._capitalize(i);a.prototype[u]||e.Factory.overWriteSetter(a,i,o,c)},overWriteSetter(a,i,o,c){const u=s+t.Util._capitalize(i);a.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,i)),this._setAttr(i,d),c&&c.call(this),this}},addComponentsGetterSetter(a,i,o,c,u){const d=o.length,f=t.Util._capitalize,h=n+f(i),g=s+f(i);a.prototype[h]=function(){const y={};for(let v=0;v<d;v++){const T=o[v];y[T]=this.getAttr(i+f(T))}return y};const x=(0,r.getComponentValidator)(o);a.prototype[g]=function(y){const v=this.attrs[i];c&&(y=c.call(this,y,i)),x&&x.call(this,y,i);for(const T in y)y.hasOwnProperty(T)&&this._setAttr(i+f(T),y[T]);return y||o.forEach(T=>{this._setAttr(i+f(T),void 0)}),this._fireChangeEvent(i,v,y),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(a,i)},addOverloadedGetterSetter(a,i){const o=t.Util._capitalize(i),c=s+o,u=n+o;a.prototype[i]=function(){return arguments.length?(this[c](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(a,i,o,c){t.Util.error("Adding deprecated "+i);const u=n+t.Util._capitalize(i),d=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[u]=function(){t.Util.error(d);const f=this.attrs[i];return f===void 0?o:f},e.Factory.addSetter(a,i,c,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(a,i)},backCompat(a,i){t.Util.each(i,function(o,c){const u=a.prototype[c],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function h(){u.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}a.prototype[o]=h,a.prototype[d]=h,a.prototype[f]=h})},afterSetFilter(){this._filterUpToDate=!1}}})(qS)),qS}var bj;function Pa(){if(bj)return Px;bj=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.Node=void 0;const e=O_(),t=MC(),r=jn(),n=Tn(),s=pa(),a=Fn(),i="absoluteOpacity",o="allEventListeners",c="absoluteTransform",u="absoluteScale",d="canvas",f="Change",h="children",g="konva",x="listening",y="mouseenter",v="mouseleave",T="pointerenter",k="pointerleave",b="touchenter",C="touchleave",E="set",j="Shape",P=" ",A="stage",M="transform",F="Stage",B="visible",V=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(P);let ee=1,ae=class Xk{constructor(L){this._id=ee++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(L),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(L){(L===M||L===c)&&this._cache.get(L)?this._cache.get(L).dirty=!0:L?this._cache.delete(L):this._cache.clear()}_getCache(L,K){let I=this._cache.get(L);return(I===void 0||(L===M||L===c)&&I.dirty===!0)&&(I=K.call(this),this._cache.set(L,I)),I}_calculate(L,K,I){if(!this._attachedDepsListeners.get(L)){const H=K.map(U=>U+"Change.konva").join(P);this.on(H,()=>{this._clearCache(L)}),this._attachedDepsListeners.set(L,!0)}return this._getCache(L,I)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(L){this._clearCache(L),L===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:L,filter:K,hit:I,buffer:H}=this._cache.get(d);s.Util.releaseCanvas(L,K,I,H),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(L){const K=L||{};let I={};(K.x===void 0||K.y===void 0||K.width===void 0||K.height===void 0)&&(I=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let H=Math.ceil(K.width||I.width),U=Math.ceil(K.height||I.height),R=K.pixelRatio,z=K.x===void 0?Math.floor(I.x):K.x,G=K.y===void 0?Math.floor(I.y):K.y,X=K.offset||0,ne=K.drawBorder||!1,q=K.hitCanvasPixelRatio||1;if(!H||!U){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const se=Math.abs(Math.round(I.x)-z)>.5?1:0,ue=Math.abs(Math.round(I.y)-G)>.5?1:0;H+=X*2+se,U+=X*2+ue,z-=X,G-=X;const me=new e.SceneCanvas({pixelRatio:R,width:H,height:U}),Ne=new e.SceneCanvas({pixelRatio:R,width:0,height:0,willReadFrequently:!0}),ce=new e.HitCanvas({pixelRatio:q,width:H,height:U}),Ue=me.getContext(),pe=ce.getContext(),je=new e.SceneCanvas({width:me.width/me.pixelRatio+Math.abs(z),height:me.height/me.pixelRatio+Math.abs(G),pixelRatio:me.pixelRatio}),We=je.getContext();return ce.isCache=!0,me.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,K.imageSmoothingEnabled===!1&&(me.getContext()._context.imageSmoothingEnabled=!1,Ne.getContext()._context.imageSmoothingEnabled=!1),Ue.save(),pe.save(),We.save(),Ue.translate(-z,-G),pe.translate(-z,-G),We.translate(-z,-G),je.x=z,je.y=G,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this.drawScene(me,this,je),this.drawHit(ce,this),this._isUnderCache=!1,Ue.restore(),pe.restore(),ne&&(Ue.save(),Ue.beginPath(),Ue.rect(0,0,H,U),Ue.closePath(),Ue.setAttr("strokeStyle","red"),Ue.setAttr("lineWidth",5),Ue.stroke(),Ue.restore()),this._cache.set(d,{scene:me,filter:Ne,hit:ce,buffer:je,x:z,y:G}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(L){throw new Error('abstract "getClientRect" method call')}_transformedRect(L,K){const I=[{x:L.x,y:L.y},{x:L.x+L.width,y:L.y},{x:L.x+L.width,y:L.y+L.height},{x:L.x,y:L.y+L.height}];let H=1/0,U=1/0,R=-1/0,z=-1/0;const G=this.getAbsoluteTransform(K);return I.forEach(function(X){const ne=G.point(X);H===void 0&&(H=R=ne.x,U=z=ne.y),H=Math.min(H,ne.x),U=Math.min(U,ne.y),R=Math.max(R,ne.x),z=Math.max(z,ne.y)}),{x:H,y:U,width:R-H,height:z-U}}_drawCachedSceneCanvas(L){L.save(),L._applyOpacity(this),L._applyGlobalCompositeOperation(this);const K=this._getCanvasCache();L.translate(K.x,K.y);const I=this._getCachedSceneCanvas(),H=I.pixelRatio;L.drawImage(I._canvas,0,0,I.width/H,I.height/H),L.restore()}_drawCachedHitCanvas(L){const K=this._getCanvasCache(),I=K.hit;L.save(),L.translate(K.x,K.y),L.drawImage(I._canvas,0,0,I.width/I.pixelRatio,I.height/I.pixelRatio),L.restore()}_getCachedSceneCanvas(){let L=this.filters(),K=this._getCanvasCache(),I=K.scene,H=K.filter,U=H.getContext(),R,z,G,X;if(L){if(!this._filterUpToDate){const ne=I.pixelRatio;H.setSize(I.width/I.pixelRatio,I.height/I.pixelRatio);try{for(R=L.length,U.clear(),U.drawImage(I._canvas,0,0,I.getWidth()/ne,I.getHeight()/ne),z=U.getImageData(0,0,H.getWidth(),H.getHeight()),G=0;G<R;G++){if(X=L[G],typeof X!="function"){s.Util.error("Filter should be type of function, but got "+typeof X+" instead. Please check correct filters");continue}X.call(this,z),U.putImageData(z,0,0)}}catch(q){s.Util.error("Unable to apply filter. "+q.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return H}return I}on(L,K){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const I=L.split(P);for(let H=0;H<I.length;H++){const R=I[H].split("."),z=R[0],G=R[1]||"";this.eventListeners[z]||(this.eventListeners[z]=[]),this.eventListeners[z].push({name:G,handler:K})}return this}off(L,K){let I=(L||"").split(P),H=I.length,U,R,z,G,X,ne;if(this._cache&&this._cache.delete(o),!L)for(R in this.eventListeners)this._off(R);for(U=0;U<H;U++)if(z=I[U],G=z.split("."),X=G[0],ne=G[1],X)this.eventListeners[X]&&this._off(X,ne,K);else for(R in this.eventListeners)this._off(R,ne,K);return this}dispatchEvent(L){const K={target:this,type:L.type,evt:L};return this.fire(L.type,K),this}addEventListener(L,K){return this.on(L,function(I){K.call(this,I.evt)}),this}removeEventListener(L){return this.off(L),this}_delegate(L,K,I){const H=this;this.on(L,function(U){const R=U.target.findAncestors(K,!0,H);for(let z=0;z<R.length;z++)U=s.Util.cloneObject(U),U.currentTarget=R[z],I.call(R[z],U)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(A),this._clearSelfAndDescendantCache(B),this._clearSelfAndDescendantCache(x)}_remove(){this._clearCaches();const L=this.getParent();L&&L.children&&(L.children.splice(this.index,1),L._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(L){const K="get"+s.Util._capitalize(L);return s.Util._isFunction(this[K])?this[K]():this.attrs[L]}getAncestors(){let L=this.getParent(),K=[];for(;L;)K.push(L),L=L.getParent();return K}getAttrs(){return this.attrs||{}}setAttrs(L){return this._batchTransformChanges(()=>{let K,I;if(!L)return this;for(K in L)K!==h&&(I=E+s.Util._capitalize(K),s.Util._isFunction(this[I])?this[I](L[K]):this._setAttr(K,L[K]))}),this}isListening(){return this._getCache(x,this._isListening)}_isListening(L){if(!this.listening())return!1;const I=this.getParent();return I&&I!==L&&this!==L?I._isListening(L):!0}isVisible(){return this._getCache(B,this._isVisible)}_isVisible(L){if(!this.visible())return!1;const I=this.getParent();return I&&I!==L&&this!==L?I._isVisible(L):!0}shouldDrawHit(L,K=!1){if(L)return this._isVisible(L)&&this._isListening(L);const I=this.getLayer();let H=!1;t.DD._dragElements.forEach(R=>{R.dragStatus==="dragging"&&(R.node.nodeType==="Stage"||R.node.getLayer()===I)&&(H=!0)});const U=!K&&!n.Konva.hitOnDragEnabled&&(H||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!U}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let L=this.getDepth(),K=this,I=0,H,U,R,z;function G(ne){for(H=[],U=ne.length,R=0;R<U;R++)z=ne[R],I++,z.nodeType!==j&&(H=H.concat(z.getChildren().slice())),z._id===K._id&&(R=U);H.length>0&&H[0].getDepth()<=L&&G(H)}const X=this.getStage();return K.nodeType!==F&&X&&G(X.getChildren()),I}getDepth(){let L=0,K=this.parent;for(;K;)L++,K=K.parent;return L}_batchTransformChanges(L){this._batchingTransformChange=!0,L(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(M),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(L){return this._batchTransformChanges(()=>{this.x(L.x),this.y(L.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const L=this.getStage();if(!L)return null;const K=L.getPointerPosition();if(!K)return null;const I=this.getAbsoluteTransform().copy();return I.invert(),I.point(K)}getAbsolutePosition(L){let K=!1,I=this.parent;for(;I;){if(I.isCached()){K=!0;break}I=I.parent}K&&!L&&(L=!0);const H=this.getAbsoluteTransform(L).getMatrix(),U=new s.Transform,R=this.offset();return U.m=H.slice(),U.translate(R.x,R.y),U.getTranslation()}setAbsolutePosition(L){const{x:K,y:I,...H}=this._clearTransform();this.attrs.x=K,this.attrs.y=I,this._clearCache(M);const U=this._getAbsoluteTransform().copy();return U.invert(),U.translate(L.x,L.y),L={x:this.attrs.x+U.getTranslation().x,y:this.attrs.y+U.getTranslation().y},this._setTransform(H),this.setPosition({x:L.x,y:L.y}),this._clearCache(M),this._clearSelfAndDescendantCache(c),this}_setTransform(L){let K;for(K in L)this.attrs[K]=L[K]}_clearTransform(){const L={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,L}move(L){let K=L.x,I=L.y,H=this.x(),U=this.y();return K!==void 0&&(H+=K),I!==void 0&&(U+=I),this.setPosition({x:H,y:U}),this}_eachAncestorReverse(L,K){let I=[],H=this.getParent(),U,R;if(!(K&&K._id===this._id)){for(I.unshift(this);H&&(!K||H._id!==K._id);)I.unshift(H),H=H.parent;for(U=I.length,R=0;R<U;R++)L(I[R])}}rotate(L){return this.rotation(this.rotation()+L),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const L=this.index,K=this.parent.getChildren().length;return L<K-1?(this.parent.children.splice(L,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const L=this.index,K=this.parent.getChildren().length;return L<K-1?(this.parent.children.splice(L,1),this.parent.children.splice(L+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const L=this.index;return L>0?(this.parent.children.splice(L,1),this.parent.children.splice(L-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const L=this.index;return L>0?(this.parent.children.splice(L,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(L){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(L<0||L>=this.parent.children.length)&&s.Util.warn("Unexpected value "+L+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const K=this.index;return this.parent.children.splice(K,1),this.parent.children.splice(L,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let L=this.opacity();const K=this.getParent();return K&&!K._isUnderCache&&(L*=K.getAbsoluteOpacity()),L}moveTo(L){return this.getParent()!==L&&(this._remove(),L.add(this)),this}toObject(){let L=this.getAttrs(),K,I,H,U,R;const z={attrs:{},className:this.getClassName()};for(K in L)I=L[K],R=s.Util.isObject(I)&&!s.Util._isPlainObject(I)&&!s.Util._isArray(I),!R&&(H=typeof this[K]=="function"&&this[K],delete L[K],U=H?H.call(this):null,L[K]=I,U!==I&&(z.attrs[K]=I));return s.Util._prepareToStringify(z)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(L,K,I){const H=[];K&&this._isMatch(L)&&H.push(this);let U=this.parent;for(;U;){if(U===I)return H;U._isMatch(L)&&H.push(U),U=U.parent}return H}isAncestorOf(L){return!1}findAncestor(L,K,I){return this.findAncestors(L,K,I)[0]}_isMatch(L){if(!L)return!1;if(typeof L=="function")return L(this);let K=L.replace(/ /g,"").split(","),I=K.length,H,U;for(H=0;H<I;H++)if(U=K[H],s.Util.isValidSelector(U)||(s.Util.warn('Selector "'+U+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),U.charAt(0)==="#"){if(this.id()===U.slice(1))return!0}else if(U.charAt(0)==="."){if(this.hasName(U.slice(1)))return!0}else if(this.className===U||this.nodeType===U)return!0;return!1}getLayer(){const L=this.getParent();return L?L.getLayer():null}getStage(){return this._getCache(A,this._getStage)}_getStage(){const L=this.getParent();return L?L.getStage():null}fire(L,K={},I){return K.target=K.target||this,I?this._fireAndBubble(L,K):this._fire(L,K),this}getAbsoluteTransform(L){return L?this._getAbsoluteTransform(L):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(L){let K;if(L)return K=new s.Transform,this._eachAncestorReverse(function(I){const H=I.transformsEnabled();H==="all"?K.multiply(I.getTransform()):H==="position"&&K.translate(I.x()-I.offsetX(),I.y()-I.offsetY())},L),K;{K=this._cache.get(c)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(K):K.reset();const I=this.transformsEnabled();if(I==="all")K.multiply(this.getTransform());else if(I==="position"){const H=this.attrs.x||0,U=this.attrs.y||0,R=this.attrs.offsetX||0,z=this.attrs.offsetY||0;K.translate(H-R,U-z)}return K.dirty=!1,K}}getAbsoluteScale(L){let K=this;for(;K;)K._isUnderCache&&(L=K),K=K.getParent();const H=this.getAbsoluteTransform(L).decompose();return{x:H.scaleX,y:H.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(M,this._getTransform)}_getTransform(){var L,K;const I=this._cache.get(M)||new s.Transform;I.reset();const H=this.x(),U=this.y(),R=n.Konva.getAngle(this.rotation()),z=(L=this.attrs.scaleX)!==null&&L!==void 0?L:1,G=(K=this.attrs.scaleY)!==null&&K!==void 0?K:1,X=this.attrs.skewX||0,ne=this.attrs.skewY||0,q=this.attrs.offsetX||0,se=this.attrs.offsetY||0;return(H!==0||U!==0)&&I.translate(H,U),R!==0&&I.rotate(R),(X!==0||ne!==0)&&I.skew(X,ne),(z!==1||G!==1)&&I.scale(z,G),(q!==0||se!==0)&&I.translate(-1*q,-1*se),I.dirty=!1,I}clone(L){let K=s.Util.cloneObject(this.attrs),I,H,U,R,z;for(I in L)K[I]=L[I];const G=new this.constructor(K);for(I in this.eventListeners)for(H=this.eventListeners[I],U=H.length,R=0;R<U;R++)z=H[R],z.name.indexOf(g)<0&&(G.eventListeners[I]||(G.eventListeners[I]=[]),G.eventListeners[I].push(z));return G}_toKonvaCanvas(L){L=L||{};const K=this.getClientRect(),I=this.getStage(),H=L.x!==void 0?L.x:Math.floor(K.x),U=L.y!==void 0?L.y:Math.floor(K.y),R=L.pixelRatio||1,z=new e.SceneCanvas({width:L.width||Math.ceil(K.width)||(I?I.width():0),height:L.height||Math.ceil(K.height)||(I?I.height():0),pixelRatio:R}),G=z.getContext(),X=new e.SceneCanvas({width:z.width/z.pixelRatio+Math.abs(H),height:z.height/z.pixelRatio+Math.abs(U),pixelRatio:z.pixelRatio});return L.imageSmoothingEnabled===!1&&(G._context.imageSmoothingEnabled=!1),G.save(),(H||U)&&G.translate(-1*H,-1*U),this.drawScene(z,void 0,X),G.restore(),z}toCanvas(L){return this._toKonvaCanvas(L)._canvas}toDataURL(L){L=L||{};const K=L.mimeType||null,I=L.quality||null,H=this._toKonvaCanvas(L).toDataURL(K,I);return L.callback&&L.callback(H),H}toImage(L){return new Promise((K,I)=>{try{const H=L?.callback;H&&delete L.callback,s.Util._urlToImage(this.toDataURL(L),function(U){K(U),H?.(U)})}catch(H){I(H)}})}toBlob(L){return new Promise((K,I)=>{try{const H=L?.callback;H&&delete L.callback,this.toCanvas(L).toBlob(U=>{K(U),H?.(U)},L?.mimeType,L?.quality)}catch(H){I(H)}})}setSize(L){return this.width(L.width),this.height(L.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(L,K,I){let H=this.eventListeners[L],U,R,z;for(U=0;U<H.length;U++)if(R=H[U].name,z=H[U].handler,(R!=="konva"||K==="konva")&&(!K||R===K)&&(!I||I===z)){if(H.splice(U,1),H.length===0){delete this.eventListeners[L];break}U--}}_fireChangeEvent(L,K,I){this._fire(L+f,{oldVal:K,newVal:I})}addName(L){if(!this.hasName(L)){const K=this.name(),I=K?K+" "+L:L;this.name(I)}return this}hasName(L){if(!L)return!1;const K=this.name();return K?(K||"").split(/\s/g).indexOf(L)!==-1:!1}removeName(L){const K=(this.name()||"").split(/\s/g),I=K.indexOf(L);return I!==-1&&(K.splice(I,1),this.name(K.join(" "))),this}setAttr(L,K){const I=this[E+s.Util._capitalize(L)];return s.Util._isFunction(I)?I.call(this,K):this._setAttr(L,K),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const L=this.getLayer()||this.getStage();L?.batchDraw()}}_setAttr(L,K){const I=this.attrs[L];I===K&&!s.Util.isObject(K)||(K==null?delete this.attrs[L]:this.attrs[L]=K,this._shouldFireChangeEvents&&this._fireChangeEvent(L,I,K),this._requestDraw())}_setComponentAttr(L,K,I){let H;I!==void 0&&(H=this.attrs[L],H||(this.attrs[L]=this.getAttr(L)),this.attrs[L][K]=I,this._fireChangeEvent(L,H,I))}_fireAndBubble(L,K,I){K&&this.nodeType===j&&(K.target=this);const H=[y,v,T,k,b,C];if(!(H.indexOf(L)!==-1&&(I&&(this===I||this.isAncestorOf&&this.isAncestorOf(I))||this.nodeType==="Stage"&&!I))){this._fire(L,K);const R=H.indexOf(L)!==-1&&I&&I.isAncestorOf&&I.isAncestorOf(this)&&!I.isAncestorOf(this.parent);(K&&!K.cancelBubble||!K)&&this.parent&&this.parent.isListening()&&!R&&(I&&I.parent?this._fireAndBubble.call(this.parent,L,K,I):this._fireAndBubble.call(this.parent,L,K))}}_getProtoListeners(L){var K,I,H;const U=(K=this._cache.get(o))!==null&&K!==void 0?K:{};let R=U?.[L];if(R===void 0){R=[];let z=Object.getPrototypeOf(this);for(;z;){const G=(H=(I=z.eventListeners)===null||I===void 0?void 0:I[L])!==null&&H!==void 0?H:[];R.push(...G),z=Object.getPrototypeOf(z)}U[L]=R,this._cache.set(o,U)}return R}_fire(L,K){K=K||{},K.currentTarget=this,K.type=L;const I=this._getProtoListeners(L);if(I)for(let U=0;U<I.length;U++)I[U].handler.call(this,K);const H=this.eventListeners[L];if(H)for(let U=0;U<H.length;U++)H[U].handler.call(this,K)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(L){const K=L?L.pointerId:void 0,I=this.getStage(),H=this.getAbsolutePosition();if(!I)return;const U=I._getPointerById(K)||I._changedPointerPositions[0]||H;t.DD._dragElements.set(this._id,{node:this,startPointerPos:U,offset:{x:U.x-H.x,y:U.y-H.y},dragStatus:"ready",pointerId:K})}startDrag(L,K=!0){t.DD._dragElements.has(this._id)||this._createDragElement(L);const I=t.DD._dragElements.get(this._id);I.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:L&&L.evt},K)}_setDragPosition(L,K){const I=this.getStage()._getPointerById(K.pointerId);if(!I)return;let H={x:I.x-K.offset.x,y:I.y-K.offset.y};const U=this.dragBoundFunc();if(U!==void 0){const R=U.call(this,H,L);R?H=R:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==H.x||this._lastPos.y!==H.y)&&(this.setAbsolutePosition(H),this._requestDraw()),this._lastPos=H}stopDrag(L){const K=t.DD._dragElements.get(this._id);K&&(K.dragStatus="stopped"),t.DD._endDragBefore(L),t.DD._endDragAfter(L)}setDraggable(L){this._setAttr("draggable",L),this._dragChange()}isDragging(){const L=t.DD._dragElements.get(this._id);return L?L.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(L){if(!(!(L.evt.button!==void 0)||n.Konva.dragButtons.indexOf(L.evt.button)>=0)||this.isDragging())return;let H=!1;t.DD._dragElements.forEach(U=>{this.isAncestorOf(U.node)&&(H=!0)}),H||this._createDragElement(L)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const K=t.DD._dragElements.get(this._id),I=K&&K.dragStatus==="dragging",H=K&&K.dragStatus==="ready";I?this.stopDrag():H&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(L={x:0,y:0}){const K=this.getStage();if(!K)return!1;const I={x:-L.x,y:-L.y,width:K.width()+2*L.x,height:K.height()+2*L.y};return s.Util.haveIntersection(I,this.getClientRect())}static create(L,K){return s.Util._isString(L)&&(L=JSON.parse(L)),this._createNode(L,K)}static _createNode(L,K){let I=Xk.prototype.getClassName.call(L),H=L.children,U,R,z;K&&(L.attrs.container=K),n.Konva[I]||(s.Util.warn('Can not find a node with class name "'+I+'". Fallback to "Shape".'),I="Shape");const G=n.Konva[I];if(U=new G(L.attrs),H)for(R=H.length,z=0;z<R;z++)U.add(Xk._createNode(H[z]));return U}};Px.Node=ae,ae.prototype.nodeType="Node",ae.prototype._attrsAffectingSize=[],ae.prototype.eventListeners={},ae.prototype.on.call(ae.prototype,V,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(M),this._clearSelfAndDescendantCache(c)}),ae.prototype.on.call(ae.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(B)}),ae.prototype.on.call(ae.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x)}),ae.prototype.on.call(ae.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const Z=r.Factory.addGetterSetter;return Z(ae,"zIndex"),Z(ae,"absolutePosition"),Z(ae,"position"),Z(ae,"x",0,(0,a.getNumberValidator)()),Z(ae,"y",0,(0,a.getNumberValidator)()),Z(ae,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),Z(ae,"opacity",1,(0,a.getNumberValidator)()),Z(ae,"name","",(0,a.getStringValidator)()),Z(ae,"id","",(0,a.getStringValidator)()),Z(ae,"rotation",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ae,"scale",["x","y"]),Z(ae,"scaleX",1,(0,a.getNumberValidator)()),Z(ae,"scaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ae,"skew",["x","y"]),Z(ae,"skewX",0,(0,a.getNumberValidator)()),Z(ae,"skewY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ae,"offset",["x","y"]),Z(ae,"offsetX",0,(0,a.getNumberValidator)()),Z(ae,"offsetY",0,(0,a.getNumberValidator)()),Z(ae,"dragDistance",void 0,(0,a.getNumberValidator)()),Z(ae,"width",0,(0,a.getNumberValidator)()),Z(ae,"height",0,(0,a.getNumberValidator)()),Z(ae,"listening",!0,(0,a.getBooleanValidator)()),Z(ae,"preventDefault",!0,(0,a.getBooleanValidator)()),Z(ae,"filters",void 0,function(te){return this._filterUpToDate=!1,te}),Z(ae,"visible",!0,(0,a.getBooleanValidator)()),Z(ae,"transformsEnabled","all",(0,a.getStringValidator)()),Z(ae,"size"),Z(ae,"dragBoundFunc"),Z(ae,"draggable",!1,(0,a.getBooleanValidator)()),r.Factory.backCompat(ae,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Px}var Mx={},_j;function R_(){if(_j)return Mx;_j=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.Container=void 0;const e=jn(),t=Pa(),r=Fn();let n=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){const i=this.children||[];return a?i.filter(a):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const i=a[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const i=this._generalFind(a,!0);return i.length>0?i[0]:void 0}_generalFind(a,i){const o=[];return this._descendants(c=>{const u=c._isMatch(a);return u&&o.push(c),!!(u&&i)}),o}_descendants(a){let i=!1;const o=this.getChildren();for(const c of o){if(i=a(c),i)return!0;if(c.hasChildren()&&(i=c._descendants(a),i))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(i=>{a.children.push(i.toObject())}),a}isAncestorOf(a){let i=a.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(a){const i=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(a){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&i.push(o)}),i}_clearSelfAndDescendantCache(a){var i;super._clearSelfAndDescendantCache(a),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(a,i,o){const c=this.getLayer(),u=a||c&&c.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),h=f&&f.scene,g=u&&u.isCache;if(!this.isVisible()&&!g)return this;if(h){d.save();const x=this.getAbsoluteTransform(i).getMatrix();d.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,i,o);return this}drawHit(a,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),c=a||o&&o.hitCanvas,u=c&&c.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const h=this.getAbsoluteTransform(i).getMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",c,i);return this}_drawChildren(a,i,o,c){var u;const d=i&&i.getContext(),f=this.clipWidth(),h=this.clipHeight(),g=this.clipFunc(),x=typeof f=="number"&&typeof h=="number"||g,y=o===this;if(x){d.save();const T=this.getAbsoluteTransform(o);let k=T.getMatrix();d.transform(k[0],k[1],k[2],k[3],k[4],k[5]),d.beginPath();let b;if(g)b=g.call(this,d,this);else{const C=this.clipX(),E=this.clipY();d.rect(C||0,E||0,f,h)}d.clip.apply(d,b),k=T.copy().invert().getMatrix(),d.transform(k[0],k[1],k[2],k[3],k[4],k[5])}const v=!y&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(T){T[a](i,o,c)}),v&&d.restore(),x&&d.restore()}getClientRect(a={}){var i;const o=a.skipTransform,c=a.relativeTo;let u,d,f,h,g={x:1/0,y:1/0,width:0,height:0};const x=this;(i=this.children)===null||i===void 0||i.forEach(function(T){if(!T.visible())return;const k=T.getClientRect({relativeTo:x,skipShadow:a.skipShadow,skipStroke:a.skipStroke});k.width===0&&k.height===0||(u===void 0?(u=k.x,d=k.y,f=k.x+k.width,h=k.y+k.height):(u=Math.min(u,k.x),d=Math.min(d,k.y),f=Math.max(f,k.x+k.width),h=Math.max(h,k.y+k.height)))});const y=this.find("Shape");let v=!1;for(let T=0;T<y.length;T++)if(y[T]._isVisible(this)){v=!0;break}return v&&u!==void 0?g={x:u,y:d,width:f-u,height:h-d}:g={x:0,y:0,width:0,height:0},o?g:this._transformedRect(g,c)}};return Mx.Container=n,e.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipFunc"),Mx}var KS={},mf={},Sj;function K$(){if(Sj)return mf;Sj=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.getCapturedShape=n,mf.createEvent=s,mf.hasPointerCapture=a,mf.setPointerCapture=i,mf.releaseCapture=o;const e=Tn(),t=new Map,r=e.Konva._global.PointerEvent!==void 0;function n(c){return t.get(c)}function s(c){return{evt:c,pointerId:c.pointerId}}function a(c,u){return t.get(c)===u}function i(c,u){o(c),u.getStage()&&(t.set(c,u),r&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function o(c,u){const d=t.get(c);if(!d)return;const f=d.getStage();f&&f.content,t.delete(c),r&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return mf}var kj;function xne(){return kj||(kj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=pa(),r=jn(),n=R_(),s=Tn(),a=O_(),i=MC(),o=Tn(),c=K$(),u="Stage",d="string",f="px",h="mouseout",g="mouseleave",x="mouseover",y="mouseenter",v="mousemove",T="mousedown",k="mouseup",b="pointermove",C="pointerdown",E="pointerup",j="pointercancel",P="lostpointercapture",A="pointerout",M="pointerleave",F="pointerover",B="pointerenter",V="contextmenu",ee="touchstart",ae="touchend",Z="touchmove",te="touchcancel",L="wheel",K=5,I=[[y,"_pointerenter"],[T,"_pointerdown"],[v,"_pointermove"],[k,"_pointerup"],[g,"_pointerleave"],[ee,"_pointerdown"],[Z,"_pointermove"],[ae,"_pointerup"],[te,"_pointercancel"],[x,"_pointerover"],[L,"_wheel"],[V,"_contextmenu"],[C,"_pointerdown"],[b,"_pointermove"],[E,"_pointerup"],[j,"_pointercancel"],[M,"_pointerleave"],[P,"_lostpointercapture"]],H={mouse:{[A]:h,[M]:g,[F]:x,[B]:y,[b]:v,[C]:T,[E]:k,[j]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[M]:"touchleave",[F]:"touchover",[B]:"touchenter",[b]:Z,[C]:ee,[E]:ae,[j]:te,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[M]:M,[F]:F,[B]:B,[b]:b,[C]:C,[E]:E,[j]:j,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},U=ne=>ne.indexOf("pointer")>=0?"pointer":ne.indexOf("touch")>=0?"touch":"mouse",R=ne=>{const q=U(ne);if(q==="pointer")return s.Konva.pointerEventsEnabled&&H.pointer;if(q==="touch")return H.touch;if(q==="mouse")return H.mouse};function z(ne={}){return(ne.clipFunc||ne.clipWidth||ne.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ne}const G="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class X extends n.Container{constructor(q){super(z(q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{z(this.attrs)}),this._checkVisibility()}_validateAdd(q){const se=q.getType()==="Layer",ue=q.getType()==="FastLayer";se||ue||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const q=this.visible()?"":"none";this.content.style.display=q}setContainer(q){if(typeof q===d){let se;if(q.charAt(0)==="."){const ue=q.slice(1);q=document.getElementsByClassName(ue)[0]}else q.charAt(0)!=="#"?se=q:se=q.slice(1),q=document.getElementById(se);if(!q)throw"Can not find container in document with id "+se}return this._setAttr("container",q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const q=this.children,se=q.length;for(let ue=0;ue<se;ue++)q[ue].clear();return this}clone(q){return q||(q={}),q.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,q)}destroy(){super.destroy();const q=this.content;q&&t.Util._isInDocument(q)&&this.container().removeChild(q);const se=e.stages.indexOf(this);return se>-1&&e.stages.splice(se,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const q=this._pointerPositions[0]||this._changedPointerPositions[0];return q?{x:q.x,y:q.y}:(t.Util.warn(G),null)}_getPointerById(q){return this._pointerPositions.find(se=>se.id===q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(q){q=q||{},q.x=q.x||0,q.y=q.y||0,q.width=q.width||this.width(),q.height=q.height||this.height();const se=new a.SceneCanvas({width:q.width,height:q.height,pixelRatio:q.pixelRatio||1}),ue=se.getContext()._context,me=this.children;return(q.x||q.y)&&ue.translate(-1*q.x,-1*q.y),me.forEach(function(Ne){if(!Ne.isVisible())return;const ce=Ne._toKonvaCanvas(q);ue.drawImage(ce._canvas,q.x,q.y,ce.getWidth()/ce.getPixelRatio(),ce.getHeight()/ce.getPixelRatio())}),se}getIntersection(q){if(!q)return null;const se=this.children,ue=se.length,me=ue-1;for(let Ne=me;Ne>=0;Ne--){const ce=se[Ne].getIntersection(q);if(ce)return ce}return null}_resizeDOM(){const q=this.width(),se=this.height();this.content&&(this.content.style.width=q+f,this.content.style.height=se+f),this.bufferCanvas.setSize(q,se),this.bufferHitCanvas.setSize(q,se),this.children.forEach(ue=>{ue.setSize({width:q,height:se}),ue.draw()})}add(q,...se){if(arguments.length>1){for(let me=0;me<arguments.length;me++)this.add(arguments[me]);return this}super.add(q);const ue=this.children.length;return ue>K&&t.Util.warn("The stage has "+ue+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),q.setSize({width:this.width(),height:this.height()}),q.draw(),s.Konva.isBrowser&&this.content.appendChild(q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(q){return c.hasPointerCapture(q,this)}setPointerCapture(q){c.setPointerCapture(q,this)}releaseCapture(q){c.releaseCapture(q,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&I.forEach(([q,se])=>{this.content.addEventListener(q,ue=>{this[se](ue)},{passive:!1})})}_pointerenter(q){this.setPointersPositions(q);const se=R(q.type);se&&this._fire(se.pointerenter,{evt:q,target:this,currentTarget:this})}_pointerover(q){this.setPointersPositions(q);const se=R(q.type);se&&this._fire(se.pointerover,{evt:q,target:this,currentTarget:this})}_getTargetShape(q){let se=this[q+"targetShape"];return se&&!se.getStage()&&(se=null),se}_pointerleave(q){const se=R(q.type),ue=U(q.type);if(!se)return;this.setPointersPositions(q);const me=this._getTargetShape(ue),Ne=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;me&&Ne?(me._fireAndBubble(se.pointerout,{evt:q}),me._fireAndBubble(se.pointerleave,{evt:q}),this._fire(se.pointerleave,{evt:q,target:this,currentTarget:this}),this[ue+"targetShape"]=null):Ne&&(this._fire(se.pointerleave,{evt:q,target:this,currentTarget:this}),this._fire(se.pointerout,{evt:q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(q){const se=R(q.type),ue=U(q.type);if(!se)return;this.setPointersPositions(q);let me=!1;this._changedPointerPositions.forEach(Ne=>{const ce=this.getIntersection(Ne);if(i.DD.justDragged=!1,s.Konva["_"+ue+"ListenClick"]=!0,!ce||!ce.isListening()){this[ue+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&ce.setPointerCapture(Ne.id),this[ue+"ClickStartShape"]=ce,ce._fireAndBubble(se.pointerdown,{evt:q,pointerId:Ne.id}),me=!0;const Ue=q.type.indexOf("touch")>=0;ce.preventDefault()&&q.cancelable&&Ue&&q.preventDefault()}),me||this._fire(se.pointerdown,{evt:q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(q){const se=R(q.type),ue=U(q.type);if(!se||(s.Konva.isDragging()&&i.DD.node.preventDefault()&&q.cancelable&&q.preventDefault(),this.setPointersPositions(q),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const Ne={};let ce=!1;const Ue=this._getTargetShape(ue);this._changedPointerPositions.forEach(pe=>{const je=c.getCapturedShape(pe.id)||this.getIntersection(pe),We=pe.id,Me={evt:q,pointerId:We},Nt=Ue!==je;if(Nt&&Ue&&(Ue._fireAndBubble(se.pointerout,{...Me},je),Ue._fireAndBubble(se.pointerleave,{...Me},je)),je){if(Ne[je._id])return;Ne[je._id]=!0}je&&je.isListening()?(ce=!0,Nt&&(je._fireAndBubble(se.pointerover,{...Me},Ue),je._fireAndBubble(se.pointerenter,{...Me},Ue),this[ue+"targetShape"]=je),je._fireAndBubble(se.pointermove,{...Me})):Ue&&(this._fire(se.pointerover,{evt:q,target:this,currentTarget:this,pointerId:We}),this[ue+"targetShape"]=null)}),ce||this._fire(se.pointermove,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(q){const se=R(q.type),ue=U(q.type);if(!se)return;this.setPointersPositions(q);const me=this[ue+"ClickStartShape"],Ne=this[ue+"ClickEndShape"],ce={};let Ue=!1;this._changedPointerPositions.forEach(pe=>{const je=c.getCapturedShape(pe.id)||this.getIntersection(pe);if(je){if(je.releaseCapture(pe.id),ce[je._id])return;ce[je._id]=!0}const We=pe.id,Me={evt:q,pointerId:We};let Nt=!1;s.Konva["_"+ue+"InDblClickWindow"]?(Nt=!0,clearTimeout(this[ue+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+ue+"InDblClickWindow"]=!0,clearTimeout(this[ue+"DblTimeout"])),this[ue+"DblTimeout"]=setTimeout(function(){s.Konva["_"+ue+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),je&&je.isListening()?(Ue=!0,this[ue+"ClickEndShape"]=je,je._fireAndBubble(se.pointerup,{...Me}),s.Konva["_"+ue+"ListenClick"]&&me&&me===je&&(je._fireAndBubble(se.pointerclick,{...Me}),Nt&&Ne&&Ne===je&&je._fireAndBubble(se.pointerdblclick,{...Me}))):(this[ue+"ClickEndShape"]=null,s.Konva["_"+ue+"ListenClick"]&&this._fire(se.pointerclick,{evt:q,target:this,currentTarget:this,pointerId:We}),Nt&&this._fire(se.pointerdblclick,{evt:q,target:this,currentTarget:this,pointerId:We}))}),Ue||this._fire(se.pointerup,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+ue+"ListenClick"]=!1,q.cancelable&&ue!=="touch"&&ue!=="pointer"&&q.preventDefault()}_contextmenu(q){this.setPointersPositions(q);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(V,{evt:q}):this._fire(V,{evt:q,target:this,currentTarget:this})}_wheel(q){this.setPointersPositions(q);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(L,{evt:q}):this._fire(L,{evt:q,target:this,currentTarget:this})}_pointercancel(q){this.setPointersPositions(q);const se=c.getCapturedShape(q.pointerId)||this.getIntersection(this.getPointerPosition());se&&se._fireAndBubble(E,c.createEvent(q)),c.releaseCapture(q.pointerId)}_lostpointercapture(q){c.releaseCapture(q.pointerId)}setPointersPositions(q){const se=this._getContentPosition();let ue=null,me=null;q=q||window.event,q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(q.touches,Ne=>{this._pointerPositions.push({id:Ne.identifier,x:(Ne.clientX-se.left)/se.scaleX,y:(Ne.clientY-se.top)/se.scaleY})}),Array.prototype.forEach.call(q.changedTouches||q.touches,Ne=>{this._changedPointerPositions.push({id:Ne.identifier,x:(Ne.clientX-se.left)/se.scaleX,y:(Ne.clientY-se.top)/se.scaleY})})):(ue=(q.clientX-se.left)/se.scaleX,me=(q.clientY-se.top)/se.scaleY,this.pointerPos={x:ue,y:me},this._pointerPositions=[{x:ue,y:me,id:t.Util._getFirstPointerId(q)}],this._changedPointerPositions=[{x:ue,y:me,id:t.Util._getFirstPointerId(q)}])}_setPointerPosition(q){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const q=this.content.getBoundingClientRect();return{top:q.top,left:q.left,scaleX:q.width/this.content.clientWidth||1,scaleY:q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const q=this.container();if(!q)throw"Stage has no container. A container is required.";q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),q.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(q){q.batchDraw()}),this}}e.Stage=X,X.prototype.nodeType=u,(0,o._registerNode)(X),r.Factory.addGetterSetter(X,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(ne=>{ne.batchDraw()})})})(KS)),KS}var Fx={},YS={},Tj;function Ti(){return Tj||(Tj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Tn(),r=pa(),n=jn(),s=Pa(),a=Fn(),i=Tn(),o=K$(),c="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",h="radialGradient";let g;function x(){return g||(g=r.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function y(M){const F=this.attrs.fillRule;F?M.fill(F):M.fill()}function v(M){M.stroke()}function T(M){const F=this.attrs.fillRule;F?M.fill(F):M.fill()}function k(M){M.stroke()}function b(){this._clearCache(c)}function C(){this._clearCache(u)}function E(){this._clearCache(d)}function j(){this._clearCache(f)}function P(){this._clearCache(h)}class A extends s.Node{constructor(F){super(F);let B;for(;B=r.Util.getRandomColor(),!(B&&!(B in e.shapes)););this.colorKey=B,e.shapes[B]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const B=x().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(B&&B.setTransform){const V=new r.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(t.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ee=V.getMatrix(),ae=typeof DOMMatrix>"u"?{a:ee[0],b:ee[1],c:ee[2],d:ee[3],e:ee[4],f:ee[5]}:new DOMMatrix(ee);B.setTransform(ae)}return B}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const F=this.fillLinearGradientColorStops();if(F){const B=x(),V=this.fillLinearGradientStartPoint(),ee=this.fillLinearGradientEndPoint(),ae=B.createLinearGradient(V.x,V.y,ee.x,ee.y);for(let Z=0;Z<F.length;Z+=2)ae.addColorStop(F[Z],F[Z+1]);return ae}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const F=this.fillRadialGradientColorStops();if(F){const B=x(),V=this.fillRadialGradientStartPoint(),ee=this.fillRadialGradientEndPoint(),ae=B.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),ee.x,ee.y,this.fillRadialGradientEndRadius());for(let Z=0;Z<F.length;Z+=2)ae.addColorStop(F[Z],F[Z+1]);return ae}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const F=r.Util.colorToRGBA(this.shadowColor());if(F)return"rgba("+F.r+","+F.g+","+F.b+","+F.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const F=this.hitStrokeWidth();return F==="auto"?this.hasStroke():this.strokeEnabled()&&!!F}intersects(F){const B=this.getStage();if(!B)return!1;const V=B.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(F.x),Math.round(F.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(F){var B;if(!((B=this.attrs.perfectDrawEnabled)!==null&&B!==void 0?B:!0))return!1;const ee=F||this.hasFill(),ae=this.hasStroke(),Z=this.getAbsoluteOpacity()!==1;if(ee&&ae&&Z)return!0;const te=this.hasShadow(),L=this.shadowForStrokeEnabled();return!!(ee&&ae&&te&&L)}setStrokeHitEnabled(F){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),F?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const F=this.size();return{x:this._centroid?-F.width/2:0,y:this._centroid?-F.height/2:0,width:F.width,height:F.height}}getClientRect(F={}){let B=!1,V=this.getParent();for(;V;){if(V.isCached()){B=!0;break}V=V.getParent()}const ee=F.skipTransform,ae=F.relativeTo||B&&this.getStage()||void 0,Z=this.getSelfRect(),L=!F.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,K=Z.width+L,I=Z.height+L,H=!F.skipShadow&&this.hasShadow(),U=H?this.shadowOffsetX():0,R=H?this.shadowOffsetY():0,z=K+Math.abs(U),G=I+Math.abs(R),X=H&&this.shadowBlur()||0,ne=z+X*2,q=G+X*2,se={width:ne,height:q,x:-(L/2+X)+Math.min(U,0)+Z.x,y:-(L/2+X)+Math.min(R,0)+Z.y};return ee?se:this._transformedRect(se,ae)}drawScene(F,B,V){const ee=this.getLayer(),ae=F||ee.getCanvas(),Z=ae.getContext(),te=this._getCanvasCache(),L=this.getSceneFunc(),K=this.hasShadow();let I;const H=B===this;if(!this.isVisible()&&!H)return this;if(te){Z.save();const U=this.getAbsoluteTransform(B).getMatrix();return Z.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedSceneCanvas(Z),Z.restore(),this}if(!L)return this;if(Z.save(),this._useBufferCanvas()){I=this.getStage();const U=V||I.bufferCanvas,R=U.getContext();R.clear(),R.save(),R._applyLineJoin(this);const z=this.getAbsoluteTransform(B).getMatrix();R.transform(z[0],z[1],z[2],z[3],z[4],z[5]),L.call(this,R,this),R.restore();const G=U.pixelRatio;K&&Z._applyShadow(this),Z._applyOpacity(this),Z._applyGlobalCompositeOperation(this),Z.drawImage(U._canvas,U.x||0,U.y||0,U.width/G,U.height/G)}else{if(Z._applyLineJoin(this),!H){const U=this.getAbsoluteTransform(B).getMatrix();Z.transform(U[0],U[1],U[2],U[3],U[4],U[5]),Z._applyOpacity(this),Z._applyGlobalCompositeOperation(this)}K&&Z._applyShadow(this),L.call(this,Z,this)}return Z.restore(),this}drawHit(F,B,V=!1){if(!this.shouldDrawHit(B,V))return this;const ee=this.getLayer(),ae=F||ee.hitCanvas,Z=ae&&ae.getContext(),te=this.hitFunc()||this.sceneFunc(),L=this._getCanvasCache(),K=L&&L.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),K){Z.save();const H=this.getAbsoluteTransform(B).getMatrix();return Z.transform(H[0],H[1],H[2],H[3],H[4],H[5]),this._drawCachedHitCanvas(Z),Z.restore(),this}if(!te)return this;if(Z.save(),Z._applyLineJoin(this),!(this===B)){const H=this.getAbsoluteTransform(B).getMatrix();Z.transform(H[0],H[1],H[2],H[3],H[4],H[5])}return te.call(this,Z,this),Z.restore(),this}drawHitFromCache(F=0){const B=this._getCanvasCache(),V=this._getCachedSceneCanvas(),ee=B.hit,ae=ee.getContext(),Z=ee.getWidth(),te=ee.getHeight();ae.clear(),ae.drawImage(V._canvas,0,0,Z,te);try{const L=ae.getImageData(0,0,Z,te),K=L.data,I=K.length,H=r.Util._hexToRgb(this.colorKey);for(let U=0;U<I;U+=4)K[U+3]>F?(K[U]=H.r,K[U+1]=H.g,K[U+2]=H.b,K[U+3]=255):K[U+3]=0;ae.putImageData(L,0,0)}catch(L){r.Util.error("Unable to draw hit graph from cached scene canvas. "+L.message)}return this}hasPointerCapture(F){return o.hasPointerCapture(F,this)}setPointerCapture(F){o.setPointerCapture(F,this)}releaseCapture(F){o.releaseCapture(F,this)}}e.Shape=A,A.prototype._fillFunc=y,A.prototype._strokeFunc=v,A.prototype._fillFuncHit=T,A.prototype._strokeFuncHit=k,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,i._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",C),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",E),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",j),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",P),n.Factory.addGetterSetter(A,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(A,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(A,"lineJoin"),n.Factory.addGetterSetter(A,"lineCap"),n.Factory.addGetterSetter(A,"sceneFunc"),n.Factory.addGetterSetter(A,"hitFunc"),n.Factory.addGetterSetter(A,"dash"),n.Factory.addGetterSetter(A,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(A,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillPatternImage"),n.Factory.addGetterSetter(A,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(A,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(A,"fillEnabled",!0),n.Factory.addGetterSetter(A,"strokeEnabled",!0),n.Factory.addGetterSetter(A,"shadowEnabled",!0),n.Factory.addGetterSetter(A,"dashEnabled",!0),n.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(A,"fillPriority","color"),n.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(A,"fillPatternRotation",0),n.Factory.addGetterSetter(A,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(YS)),YS}var Cj;function Y$(){if(Cj)return Fx;Cj=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.Layer=void 0;const e=pa(),t=R_(),r=Pa(),n=jn(),s=O_(),a=Fn(),i=Ti(),o=Tn(),c="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h=f.length;class g extends t.Container{constructor(y){super(y),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),y<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[y+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),y&&y.parentNode&&e.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:v}){return this.canvas.setSize(y,v),this.hitCanvas.setSize(y,v),this._setSmoothEnabled(),this}_validateAdd(y){const v=y.getType();v!=="Group"&&v!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let v=1,T=!1;for(;;){for(let k=0;k<h;k++){const b=f[k],C=this._getIntersection({x:y.x+b.x*v,y:y.y+b.y*v}),E=C.shape;if(E)return E;if(T=!!C.antialiased,!C.antialiased)break}if(T)v+=1;else return null}}_getIntersection(y){const v=this.hitCanvas.pixelRatio,T=this.hitCanvas.context.getImageData(Math.round(y.x*v),Math.round(y.y*v),1,1).data,k=T[3];if(k===255){const b=e.Util._rgbToHex(T[0],T[1],T[2]),C=i.shapes[c+b];return C?{shape:C}:{antialiased:!0}}else if(k>0)return{antialiased:!0};return{}}drawScene(y,v,T){const k=this.getLayer(),b=y||k&&k.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&b.getContext().clear(),t.Container.prototype.drawScene.call(this,b,v,T),this._fire(d,{node:this}),this}drawHit(y,v){const T=this.getLayer(),k=y||T&&T.hitCanvas;return T&&T.clearBeforeDraw()&&T.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,k,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Fx.Layer=g,g.prototype.nodeType="Layer",(0,o._registerNode)(g),n.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(g,"clearBeforeDraw",!0),n.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),Fx}var Dx={},Nj;function yne(){if(Nj)return Dx;Nj=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.FastLayer=void 0;const e=pa(),t=Y$(),r=Tn();class n extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}return Dx.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n),Dx}var Ox={},Ej;function FC(){if(Ej)return Ox;Ej=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.Group=void 0;const e=pa(),t=R_(),r=Tn();class n extends t.Container{_validateAdd(a){const i=a.getType();i!=="Group"&&i!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return Ox.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n),Ox}var Rx={},Aj;function DC(){if(Aj)return Rx;Aj=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.Animation=void 0;const e=Tn(),t=pa(),r=(function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class ip{constructor(a,i){this.id=ip.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=a,this.setLayers(i)}setLayers(a){let i=[];return a&&(i=Array.isArray(a)?a:[a]),this.layers=i,this}getLayers(){return this.layers}addLayer(a){const i=this.layers,o=i.length;for(let c=0;c<o;c++)if(i[c]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const i=ip.animations,o=i.length;for(let c=0;c<o;c++)if(i[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),ip._addAnimation(this),this}stop(){return ip._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const i=a.id,o=this.animations,c=o.length;for(let u=0;u<c;u++)if(o[u].id===i){this.animations.splice(u,1);break}}static _runFrames(){const a={},i=this.animations;for(let o=0;o<i.length;o++){const c=i[o],u=c.layers,d=c.func;c._updateFrameObject(r());const f=u.length;let h;if(d?h=d.call(c,c.frame)!==!1:h=!0,!!h)for(let g=0;g<f;g++){const x=u[g];x._id!==void 0&&(a[x._id]=x)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=ip;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Rx.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,Rx}var XS={},jj;function vne(){return jj||(jj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=pa(),r=DC(),n=Pa(),s=Tn(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=1,o=2,c=3,u=["fill","stroke","shadowColor"];let d=0;class f{constructor(x,y,v,T,k,b,C){this.prop=x,this.propFunc=y,this.begin=T,this._pos=T,this.duration=b,this._change=0,this.prevPos=0,this.yoyo=C,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=k-this.begin,this.pause()}fire(x){const y=this[x];y&&y()}setTime(x){x>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():x<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=x,this.update())}getTime(){return this._time}setPosition(x){this.prevPos=this._pos,this.propFunc(x),this._pos=x}getPosition(x){return x===void 0&&(x=this._time),this.func(x,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(x){this.pause(),this._time=x,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const x=this.getTimer()-this._startTime;this.state===o?this.setTime(x):this.state===c&&this.setTime(this.duration-x)}pause(){this.state=i,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(x){const y=this,v=x.node,T=v._id,k=x.easing||e.Easings.Linear,b=!!x.yoyo;let C,E;typeof x.duration>"u"?C=.3:x.duration===0?C=.001:C=x.duration,this.node=v,this._id=d++;const j=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);j||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){y.tween.onEnterFrame()},j),this.tween=new f(E,function(P){y._tweenFunc(P)},k,0,1,C*1e3,b),this._addListeners(),h.attrs[T]||(h.attrs[T]={}),h.attrs[T][this._id]||(h.attrs[T][this._id]={}),h.tweens[T]||(h.tweens[T]={});for(E in x)a[E]===void 0&&this._addAttr(E,x[E]);this.reset(),this.onFinish=x.onFinish,this.onReset=x.onReset,this.onUpdate=x.onUpdate}_addAttr(x,y){const v=this.node,T=v._id;let k,b,C,E,j;const P=h.tweens[T][x];P&&delete h.attrs[T][P][x];let A=v.getAttr(x);if(t.Util._isArray(y))if(k=[],b=Math.max(y.length,A.length),x==="points"&&y.length!==A.length&&(y.length>A.length?(E=A,A=t.Util._prepareArrayForTween(A,y,v.closed())):(C=y,y=t.Util._prepareArrayForTween(y,A,v.closed()))),x.indexOf("fill")===0)for(let M=0;M<b;M++)if(M%2===0)k.push(y[M]-A[M]);else{const F=t.Util.colorToRGBA(A[M]);j=t.Util.colorToRGBA(y[M]),A[M]=F,k.push({r:j.r-F.r,g:j.g-F.g,b:j.b-F.b,a:j.a-F.a})}else for(let M=0;M<b;M++)k.push(y[M]-A[M]);else u.indexOf(x)!==-1?(A=t.Util.colorToRGBA(A),j=t.Util.colorToRGBA(y),k={r:j.r-A.r,g:j.g-A.g,b:j.b-A.b,a:j.a-A.a}):k=y-A;h.attrs[T][this._id][x]={start:A,diff:k,end:y,trueEnd:C,trueStart:E},h.tweens[T][x]=this._id}_tweenFunc(x){const y=this.node,v=h.attrs[y._id][this._id];let T,k,b,C,E,j,P,A;for(T in v){if(k=v[T],b=k.start,C=k.diff,A=k.end,t.Util._isArray(b))if(E=[],P=Math.max(b.length,A.length),T.indexOf("fill")===0)for(j=0;j<P;j++)j%2===0?E.push((b[j]||0)+C[j]*x):E.push("rgba("+Math.round(b[j].r+C[j].r*x)+","+Math.round(b[j].g+C[j].g*x)+","+Math.round(b[j].b+C[j].b*x)+","+(b[j].a+C[j].a*x)+")");else for(j=0;j<P;j++)E.push((b[j]||0)+C[j]*x);else u.indexOf(T)!==-1?E="rgba("+Math.round(b.r+C.r*x)+","+Math.round(b.g+C.g*x)+","+Math.round(b.b+C.b*x)+","+(b.a+C.a*x)+")":E=b+C*x;y.setAttr(T,E)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const x=this.node,y=h.attrs[x._id][this._id];y.points&&y.points.trueEnd&&x.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const x=this.node,y=h.attrs[x._id][this._id];y.points&&y.points.trueStart&&x.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(x){return this.tween.seek(x*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const x=this.node._id,y=this._id,v=h.tweens[x];this.pause(),this.anim&&this.anim.stop();for(const T in v)delete h.tweens[x][T];delete h.attrs[x][y],h.tweens[x]&&(Object.keys(h.tweens[x]).length===0&&delete h.tweens[x],Object.keys(h.attrs[x]).length===0&&delete h.attrs[x])}}e.Tween=h,h.attrs={},h.tweens={},n.Node.prototype.to=function(g){const x=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),x&&x()},new h(g).play()},e.Easings={BackEaseIn(g,x,y,v){return y*(g/=v)*g*((1.70158+1)*g-1.70158)+x},BackEaseOut(g,x,y,v){return y*((g=g/v-1)*g*((1.70158+1)*g+1.70158)+1)+x},BackEaseInOut(g,x,y,v){let T=1.70158;return(g/=v/2)<1?y/2*(g*g*(((T*=1.525)+1)*g-T))+x:y/2*((g-=2)*g*(((T*=1.525)+1)*g+T)+2)+x},ElasticEaseIn(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v)===1?x+y:(k||(k=v*.3),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),-(T*Math.pow(2,10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k))+x)},ElasticEaseOut(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v)===1?x+y:(k||(k=v*.3),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),T*Math.pow(2,-10*g)*Math.sin((g*v-b)*(2*Math.PI)/k)+y+x)},ElasticEaseInOut(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v/2)===2?x+y:(k||(k=v*(.3*1.5)),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),g<1?-.5*(T*Math.pow(2,10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k))+x:T*Math.pow(2,-10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k)*.5+y+x)},BounceEaseOut(g,x,y,v){return(g/=v)<1/2.75?y*(7.5625*g*g)+x:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+x:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+x:y*(7.5625*(g-=2.625/2.75)*g+.984375)+x},BounceEaseIn(g,x,y,v){return y-e.Easings.BounceEaseOut(v-g,0,y,v)+x},BounceEaseInOut(g,x,y,v){return g<v/2?e.Easings.BounceEaseIn(g*2,0,y,v)*.5+x:e.Easings.BounceEaseOut(g*2-v,0,y,v)*.5+y*.5+x},EaseIn(g,x,y,v){return y*(g/=v)*g+x},EaseOut(g,x,y,v){return-y*(g/=v)*(g-2)+x},EaseInOut(g,x,y,v){return(g/=v/2)<1?y/2*g*g+x:-y/2*(--g*(g-2)-1)+x},StrongEaseIn(g,x,y,v){return y*(g/=v)*g*g*g*g+x},StrongEaseOut(g,x,y,v){return y*((g=g/v-1)*g*g*g*g+1)+x},StrongEaseInOut(g,x,y,v){return(g/=v/2)<1?y/2*g*g*g*g*g+x:y/2*((g-=2)*g*g*g*g+2)+x},Linear(g,x,y,v){return y*g/v+x}}})(XS)),XS}var Pj;function Jk(){return Pj||(Pj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Tn(),r=pa(),n=Pa(),s=R_(),a=xne(),i=Y$(),o=yne(),c=FC(),u=MC(),d=Ti(),f=DC(),h=vne(),g=q$(),x=O_();e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:c.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:h.Tween,Easings:h.Easings,Context:g.Context,Canvas:x.Canvas}),e.default=e.Konva})(WS)),WS}var Ix={},Mj;function wne(){if(Mj)return Ix;Mj=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.Arc=void 0;const e=jn(),t=Ti(),r=Tn(),n=Fn(),s=Tn();class a extends t.Shape{_sceneFunc(o){const c=r.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,c,u),o.arc(0,0,this.innerRadius(),c,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),c=this.outerRadius(),u=this.clockwise(),d=r.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),h=1,g=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),x=Math.sin(Math.min(d,Math.PI/2)),y=f*(f>0?o:c),v=h*c,T=g*(g>0?o:c),k=x*(x>0?c:o);return{x:y,y:u?-1*k:T,width:v-y,height:k-T}}}return Ix.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,n.getBooleanValidator)()),Ix}var Lx={},Bx={},Fj;function X$(){if(Fj)return Bx;Fj=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.Line=void 0;const e=jn(),t=Tn(),r=Ti(),n=Fn();function s(o,c,u,d,f,h,g){const x=Math.sqrt(Math.pow(u-o,2)+Math.pow(d-c,2)),y=Math.sqrt(Math.pow(f-u,2)+Math.pow(h-d,2)),v=g*x/(x+y),T=g*y/(x+y),k=u-v*(f-o),b=d-v*(h-c),C=u+T*(f-o),E=d+T*(h-c);return[k,b,C,E]}function a(o,c){const u=o.length,d=[];for(let f=2;f<u-2;f+=2){const h=s(o[f-2],o[f-1],o[f],o[f+1],o[f+2],o[f+3],c);isNaN(h[0])||(d.push(h[0]),d.push(h[1]),d.push(o[f]),d.push(o[f+1]),d.push(h[2]),d.push(h[3]))}return d}class i extends r.Shape{constructor(c){super(c),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(c){const u=this.points(),d=u.length,f=this.tension(),h=this.closed(),g=this.bezier();if(!d)return;let x=0;if(c.beginPath(),c.moveTo(u[0],u[1]),f!==0&&d>4){const y=this.getTensionPoints(),v=y.length;for(x=h?0:4,h||c.quadraticCurveTo(y[0],y[1],y[2],y[3]);x<v-2;)c.bezierCurveTo(y[x++],y[x++],y[x++],y[x++],y[x++],y[x++]);h||c.quadraticCurveTo(y[v-2],y[v-1],u[d-2],u[d-1])}else if(g)for(x=2;x<d;)c.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]);else for(x=2;x<d;x+=2)c.lineTo(u[x],u[x+1]);h?(c.closePath(),c.fillStrokeShape(this)):c.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const c=this.points(),u=c.length,d=this.tension(),f=s(c[u-2],c[u-1],c[0],c[1],c[2],c[3],d),h=s(c[u-4],c[u-3],c[u-2],c[u-1],c[0],c[1],d),g=a(c,d);return[f[2],f[3]].concat(g).concat([h[0],h[1],c[u-2],c[u-1],h[2],h[3],f[0],f[1],c[0],c[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};this.tension()!==0?c=[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:c=this.points();let u=c[0],d=c[0],f=c[1],h=c[1],g,x;for(let y=0;y<c.length/2;y++)g=c[y*2],x=c[y*2+1],u=Math.min(u,g),d=Math.max(d,g),f=Math.min(f,x),h=Math.max(h,x);return{x:u,y:f,width:d-u,height:h-f}}}return Bx.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,n.getNumberArrayValidator)()),Bx}var $x={},JS={},Dj;function bne(){return Dj||(Dj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(i,o,c)=>{let u,d;const h=c/2;u=0;for(let g=0;g<20;g++)d=h*e.tValues[20][g]+h,u+=e.cValues[20][g]*n(i,o,d);return h*u};e.getCubicArcLength=t;const r=(i,o,c)=>{c===void 0&&(c=1);const u=i[0]-2*i[1]+i[2],d=o[0]-2*o[1]+o[2],f=2*i[1]-2*i[0],h=2*o[1]-2*o[0],g=4*(u*u+d*d),x=4*(u*f+d*h),y=f*f+h*h;if(g===0)return c*Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(o[2]-o[0],2));const v=x/(2*g),T=y/g,k=c+v,b=T-v*v,C=k*k+b>0?Math.sqrt(k*k+b):0,E=v*v+b>0?Math.sqrt(v*v+b):0,j=v+Math.sqrt(v*v+b)!==0?b*Math.log(Math.abs((k+C)/(v+E))):0;return Math.sqrt(g)/2*(k*C-v*E+j)};e.getQuadraticArcLength=r;function n(i,o,c){const u=s(1,c,i),d=s(1,c,o),f=u*u+d*d;return Math.sqrt(f)}const s=(i,o,c)=>{const u=c.length-1;let d,f;if(u===0)return 0;if(i===0){f=0;for(let h=0;h<=u;h++)f+=e.binomialCoefficients[u][h]*Math.pow(1-o,u-h)*Math.pow(o,h)*c[h];return f}else{d=new Array(u);for(let h=0;h<u;h++)d[h]=u*(c[h+1]-c[h]);return s(i-1,o,d)}},a=(i,o,c)=>{let u=1,d=i/o,f=(i-c(d))/o,h=0;for(;u>.001;){const g=c(d+f),x=Math.abs(i-g)/o;if(x<u)u=x,d+=f;else{const y=c(d-f),v=Math.abs(i-y)/o;v<u?(u=v,d-=f):f/=2}if(h++,h>500)break}return d};e.t2length=a})(JS)),JS}var Oj;function OC(){if(Oj)return $x;Oj=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.Path=void 0;const e=jn(),t=Tn(),r=Ti(),n=bne();class s extends r.Shape{constructor(i){super(i),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(i){const o=this.dataArray;i.beginPath();let c=!1;for(let u=0;u<o.length;u++){const d=o[u].command,f=o[u].points;switch(d){case"L":i.lineTo(f[0],f[1]);break;case"M":i.moveTo(f[0],f[1]);break;case"C":i.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":i.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const h=f[0],g=f[1],x=f[2],y=f[3],v=f[4],T=f[5],k=f[6],b=f[7],C=x>y?x:y,E=x>y?1:x/y,j=x>y?y/x:1;i.translate(h,g),i.rotate(k),i.scale(E,j),i.arc(0,0,C,v,v+T,1-b),i.scale(1/E,1/j),i.rotate(-k),i.translate(-h,-g);break;case"z":c=!0,i.closePath();break}}!c&&!this.hasFill()?i.strokeShape(this):i.fillStrokeShape(this)}getSelfRect(){let i=[];this.dataArray.forEach(function(g){if(g.command==="A"){const x=g.points[4],y=g.points[5],v=g.points[4]+y;let T=Math.PI/180;if(Math.abs(x-v)<T&&(T=Math.abs(x-v)),y<0)for(let k=x-T;k>v;k-=T){const b=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],k,0);i.push(b.x,b.y)}else for(let k=x+T;k<v;k+=T){const b=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],k,0);i.push(b.x,b.y)}}else if(g.command==="C")for(let x=0;x<=1;x+=.01){const y=s.getPointOnCubicBezier(x,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);i.push(y.x,y.y)}else i=i.concat(g.points)});let o=i[0],c=i[0],u=i[1],d=i[1],f,h;for(let g=0;g<i.length/2;g++)f=i[g*2],h=i[g*2+1],isNaN(f)||(o=Math.min(o,f),c=Math.max(c,f)),isNaN(h)||(u=Math.min(u,h),d=Math.max(d,h));return{x:o,y:u,width:c-o,height:d-u}}getLength(){return this.pathLength}getPointAtLength(i){return s.getPointAtLengthOfDataArray(i,this.dataArray)}static getLineLength(i,o,c,u){return Math.sqrt((c-i)*(c-i)+(u-o)*(u-o))}static getPathLength(i){let o=0;for(let c=0;c<i.length;++c)o+=i[c].pathLength;return o}static getPointAtLengthOfDataArray(i,o){let c,u=0,d=o.length;if(!d)return null;for(;u<d&&i>o[u].pathLength;)i-=o[u].pathLength,++u;if(u===d)return c=o[u-1].points.slice(-2),{x:c[0],y:c[1]};if(i<.01)return o[u].command==="M"?(c=o[u].points.slice(0,2),{x:c[0],y:c[1]}):{x:o[u].start.x,y:o[u].start.y};const f=o[u],h=f.points;switch(f.command){case"L":return s.getPointOnLine(i,f.start.x,f.start.y,h[0],h[1]);case"C":return s.getPointOnCubicBezier((0,n.t2length)(i,s.getPathLength(o),C=>(0,n.getCubicArcLength)([f.start.x,h[0],h[2],h[4]],[f.start.y,h[1],h[3],h[5]],C)),f.start.x,f.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return s.getPointOnQuadraticBezier((0,n.t2length)(i,s.getPathLength(o),C=>(0,n.getQuadraticArcLength)([f.start.x,h[0],h[2]],[f.start.y,h[1],h[3]],C)),f.start.x,f.start.y,h[0],h[1],h[2],h[3]);case"A":const g=h[0],x=h[1],y=h[2],v=h[3],T=h[5],k=h[6];let b=h[4];return b+=T*i/f.pathLength,s.getPointOnEllipticalArc(g,x,y,v,b,k)}return null}static getPointOnLine(i,o,c,u,d,f,h){f=f??o,h=h??c;const g=this.getLineLength(o,c,u,d);if(g<1e-10)return{x:o,y:c};if(u===o)return{x:f,y:h+(d>c?i:-i)};const x=(d-c)/(u-o),y=Math.sqrt(i*i/(1+x*x))*(u<o?-1:1),v=x*y;if(Math.abs(h-c-x*(f-o))<1e-10)return{x:f+y,y:h+v};const T=((f-o)*(u-o)+(h-c)*(d-c))/(g*g),k=o+T*(u-o),b=c+T*(d-c),C=this.getLineLength(f,h,k,b),E=Math.sqrt(i*i-C*C),j=Math.sqrt(E*E/(1+x*x))*(u<o?-1:1),P=x*j;return{x:k+j,y:b+P}}static getPointOnCubicBezier(i,o,c,u,d,f,h,g,x){function y(E){return E*E*E}function v(E){return 3*E*E*(1-E)}function T(E){return 3*E*(1-E)*(1-E)}function k(E){return(1-E)*(1-E)*(1-E)}const b=g*y(i)+f*v(i)+u*T(i)+o*k(i),C=x*y(i)+h*v(i)+d*T(i)+c*k(i);return{x:b,y:C}}static getPointOnQuadraticBezier(i,o,c,u,d,f,h){function g(k){return k*k}function x(k){return 2*k*(1-k)}function y(k){return(1-k)*(1-k)}const v=f*g(i)+u*x(i)+o*y(i),T=h*g(i)+d*x(i)+c*y(i);return{x:v,y:T}}static getPointOnEllipticalArc(i,o,c,u,d,f){const h=Math.cos(f),g=Math.sin(f),x={x:c*Math.cos(d),y:u*Math.sin(d)};return{x:i+(x.x*h-x.y*g),y:o+(x.x*g+x.y*h)}}static parsePathData(i){if(!i)return[];let o=i;const c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let v=0;v<c.length;v++)o=o.replace(new RegExp(c[v],"g"),"|"+c[v]);const u=o.split("|"),d=[],f=[];let h=0,g=0;const x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let v=1;v<u.length;v++){let T=u[v],k=T.charAt(0);for(T=T.slice(1),f.length=0;y=x.exec(T);)f.push(y[0]);const b=[];for(let C=0,E=f.length;C<E;C++){if(f[C]==="00"){b.push(0,0);continue}const j=parseFloat(f[C]);isNaN(j)?b.push(0):b.push(j)}for(;b.length>0&&!isNaN(b[0]);){let C="",E=[];const j=h,P=g;let A,M,F,B,V,ee,ae,Z,te,L;switch(k){case"l":h+=b.shift(),g+=b.shift(),C="L",E.push(h,g);break;case"L":h=b.shift(),g=b.shift(),E.push(h,g);break;case"m":const K=b.shift(),I=b.shift();if(h+=K,g+=I,C="M",d.length>2&&d[d.length-1].command==="z"){for(let H=d.length-2;H>=0;H--)if(d[H].command==="M"){h=d[H].points[0]+K,g=d[H].points[1]+I;break}}E.push(h,g),k="l";break;case"M":h=b.shift(),g=b.shift(),C="M",E.push(h,g),k="L";break;case"h":h+=b.shift(),C="L",E.push(h,g);break;case"H":h=b.shift(),C="L",E.push(h,g);break;case"v":g+=b.shift(),C="L",E.push(h,g);break;case"V":g=b.shift(),C="L",E.push(h,g);break;case"C":E.push(b.shift(),b.shift(),b.shift(),b.shift()),h=b.shift(),g=b.shift(),E.push(h,g);break;case"c":E.push(h+b.shift(),g+b.shift(),h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),C="C",E.push(h,g);break;case"S":M=h,F=g,A=d[d.length-1],A.command==="C"&&(M=h+(h-A.points[2]),F=g+(g-A.points[3])),E.push(M,F,b.shift(),b.shift()),h=b.shift(),g=b.shift(),C="C",E.push(h,g);break;case"s":M=h,F=g,A=d[d.length-1],A.command==="C"&&(M=h+(h-A.points[2]),F=g+(g-A.points[3])),E.push(M,F,h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),C="C",E.push(h,g);break;case"Q":E.push(b.shift(),b.shift()),h=b.shift(),g=b.shift(),E.push(h,g);break;case"q":E.push(h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),C="Q",E.push(h,g);break;case"T":M=h,F=g,A=d[d.length-1],A.command==="Q"&&(M=h+(h-A.points[0]),F=g+(g-A.points[1])),h=b.shift(),g=b.shift(),C="Q",E.push(M,F,h,g);break;case"t":M=h,F=g,A=d[d.length-1],A.command==="Q"&&(M=h+(h-A.points[0]),F=g+(g-A.points[1])),h+=b.shift(),g+=b.shift(),C="Q",E.push(M,F,h,g);break;case"A":B=b.shift(),V=b.shift(),ee=b.shift(),ae=b.shift(),Z=b.shift(),te=h,L=g,h=b.shift(),g=b.shift(),C="A",E=this.convertEndpointToCenterParameterization(te,L,h,g,ae,Z,B,V,ee);break;case"a":B=b.shift(),V=b.shift(),ee=b.shift(),ae=b.shift(),Z=b.shift(),te=h,L=g,h+=b.shift(),g+=b.shift(),C="A",E=this.convertEndpointToCenterParameterization(te,L,h,g,ae,Z,B,V,ee);break}d.push({command:C||k,points:E,start:{x:j,y:P},pathLength:this.calcLength(j,P,C||k,E)})}(k==="z"||k==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(i,o,c,u){let d,f,h,g;const x=s;switch(c){case"L":return x.getLineLength(i,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([i,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([i,u[0],u[2]],[o,u[1],u[3]],1);case"A":d=0;const y=u[4],v=u[5],T=u[4]+v;let k=Math.PI/180;if(Math.abs(y-T)<k&&(k=Math.abs(y-T)),f=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),v<0)for(g=y-k;g>T;g-=k)h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),f=h;else for(g=y+k;g<T;g+=k)h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),f=h;return h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],T,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),d}return 0}static convertEndpointToCenterParameterization(i,o,c,u,d,f,h,g,x){const y=x*(Math.PI/180),v=Math.cos(y)*(i-c)/2+Math.sin(y)*(o-u)/2,T=-1*Math.sin(y)*(i-c)/2+Math.cos(y)*(o-u)/2,k=v*v/(h*h)+T*T/(g*g);k>1&&(h*=Math.sqrt(k),g*=Math.sqrt(k));let b=Math.sqrt((h*h*(g*g)-h*h*(T*T)-g*g*(v*v))/(h*h*(T*T)+g*g*(v*v)));d===f&&(b*=-1),isNaN(b)&&(b=0);const C=b*h*T/g,E=b*-g*v/h,j=(i+c)/2+Math.cos(y)*C-Math.sin(y)*E,P=(o+u)/2+Math.sin(y)*C+Math.cos(y)*E,A=function(Z){return Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1])},M=function(Z,te){return(Z[0]*te[0]+Z[1]*te[1])/(A(Z)*A(te))},F=function(Z,te){return(Z[0]*te[1]<Z[1]*te[0]?-1:1)*Math.acos(M(Z,te))},B=F([1,0],[(v-C)/h,(T-E)/g]),V=[(v-C)/h,(T-E)/g],ee=[(-1*v-C)/h,(-1*T-E)/g];let ae=F(V,ee);return M(V,ee)<=-1&&(ae=Math.PI),M(V,ee)>=1&&(ae=0),f===0&&ae>0&&(ae=ae-2*Math.PI),f===1&&ae<0&&(ae=ae+2*Math.PI),[j,P,h,g,B,ae,y,f]}}return $x.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),$x}var Rj;function _ne(){if(Rj)return Lx;Rj=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.Arrow=void 0;const e=jn(),t=X$(),r=Fn(),n=Tn(),s=OC();class a extends t.Line{_sceneFunc(o){super._sceneFunc(o);const c=Math.PI*2,u=this.points();let d=u;const f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());const h=this.pointerLength(),g=u.length;let x,y;if(f){const k=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[g-2],u[g-1]],b=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",k),C=s.Path.getPointOnQuadraticBezier(Math.min(1,1-h/b),k[0],k[1],k[2],k[3],k[4],k[5]);x=u[g-2]-C.x,y=u[g-1]-C.y}else x=u[g-2]-u[g-4],y=u[g-1]-u[g-3];const v=(Math.atan2(y,x)+c)%c,T=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[g-2],u[g-1]),o.rotate(v),o.moveTo(0,0),o.lineTo(-h,T/2),o.lineTo(-h,-T/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),f?(x=(d[0]+d[2])/2-u[0],y=(d[1]+d[3])/2-u[1]):(x=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-x)+c)%c),o.moveTo(0,0),o.lineTo(-h,T/2),o.lineTo(-h,-T/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),c=this.pointerWidth()/2;return{x:o.x,y:o.y-c,width:o.width,height:o.height+c*2}}}return Lx.Arrow=a,a.prototype.className="Arrow",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),Lx}var zx={},Ij;function Sne(){if(Ij)return zx;Ij=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.Circle=void 0;const e=jn(),t=Ti(),r=Fn(),n=Tn();class s extends t.Shape{_sceneFunc(i){i.beginPath(),i.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius()!==i/2&&this.radius(i/2)}setHeight(i){this.radius()!==i/2&&this.radius(i/2)}}return zx.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),zx}var Ux={},Lj;function kne(){if(Lj)return Ux;Lj=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.Ellipse=void 0;const e=jn(),t=Ti(),r=Fn(),n=Tn();class s extends t.Shape{_sceneFunc(i){const o=this.radiusX(),c=this.radiusY();i.beginPath(),i.save(),o!==c&&i.scale(1,c/o),i.arc(0,0,o,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(i){this.radiusX(i/2)}setHeight(i){this.radiusY(i/2)}}return Ux.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,r.getNumberValidator)()),Ux}var Wx={},Bj;function Tne(){if(Bj)return Wx;Bj=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.Image=void 0;const e=pa(),t=jn(),r=Ti(),n=Tn(),s=Fn();class a extends r.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",c=>{this._removeImageLoad(c.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),c=this.hasShadow();return o&&c?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const c=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let h;if(f){const g=this.attrs.cropWidth,x=this.attrs.cropHeight;g&&x?h=[f,this.cropX(),this.cropY(),g,x,0,0,c,u]:h=[f,0,0,c,u]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?e.Util.drawRoundedRectPath(o,c,u,d):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)),f&&(d&&o.clip(),o.drawImage.apply(o,h))}_hitFunc(o){const c=this.width(),u=this.height(),d=this.cornerRadius();o.beginPath(),d?e.Util.drawRoundedRectPath(o,c,u,d):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,c;return(o=this.attrs.width)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.width}getHeight(){var o,c;return(o=this.attrs.height)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.height}static fromURL(o,c,u=null){const d=e.Util.createImageElement();d.onload=function(){const f=new a({image:d});c(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=o}}return Wx.Image=a,a.prototype.className="Image",(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),Wx}var zh={},$j;function Cne(){if($j)return zh;$j=1,Object.defineProperty(zh,"__esModule",{value:!0}),zh.Tag=zh.Label=void 0;const e=jn(),t=Ti(),r=FC(),n=Fn(),s=Tn(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="Change.konva",o="none",c="up",u="right",d="down",f="left",h=a.length;class g extends r.Group{constructor(v){super(v),this.on("add.konva",function(T){this._addListeners(T.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let T=this,k;const b=function(){T._sync()};for(k=0;k<h;k++)v.on(a[k]+i,b)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),T=this.getTag(),k,b,C,E,j,P,A;if(v&&T){switch(k=v.width(),b=v.height(),C=T.pointerDirection(),E=T.pointerWidth(),A=T.pointerHeight(),j=0,P=0,C){case c:j=k/2,P=-1*A;break;case u:j=k+E,P=b/2;break;case d:j=k/2,P=b+A;break;case f:j=-1*E,P=b/2;break}T.setAttrs({x:-1*j,y:-1*P,width:k,height:b}),v.setAttrs({x:-1*j,y:-1*P})}}}zh.Label=g,g.prototype.className="Label",(0,s._registerNode)(g);class x extends t.Shape{_sceneFunc(v){const T=this.width(),k=this.height(),b=this.pointerDirection(),C=this.pointerWidth(),E=this.pointerHeight(),j=this.cornerRadius();let P=0,A=0,M=0,F=0;typeof j=="number"?P=A=M=F=Math.min(j,T/2,k/2):(P=Math.min(j[0]||0,T/2,k/2),A=Math.min(j[1]||0,T/2,k/2),F=Math.min(j[2]||0,T/2,k/2),M=Math.min(j[3]||0,T/2,k/2)),v.beginPath(),v.moveTo(P,0),b===c&&(v.lineTo((T-C)/2,0),v.lineTo(T/2,-1*E),v.lineTo((T+C)/2,0)),v.lineTo(T-A,0),v.arc(T-A,A,A,Math.PI*3/2,0,!1),b===u&&(v.lineTo(T,(k-E)/2),v.lineTo(T+C,k/2),v.lineTo(T,(k+E)/2)),v.lineTo(T,k-F),v.arc(T-F,k-F,F,0,Math.PI/2,!1),b===d&&(v.lineTo((T+C)/2,k),v.lineTo(T/2,k+E),v.lineTo((T-C)/2,k)),v.lineTo(M,k),v.arc(M,k-M,M,Math.PI/2,Math.PI,!1),b===f&&(v.lineTo(0,(k+E)/2),v.lineTo(-1*C,k/2),v.lineTo(0,(k-E)/2)),v.lineTo(0,P),v.arc(P,P,P,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,T=0,k=this.pointerWidth(),b=this.pointerHeight(),C=this.pointerDirection(),E=this.width(),j=this.height();return C===c?(T-=b,j+=b):C===d?j+=b:C===f?(v-=k*1.5,E+=k):C===u&&(E+=k*1.5),{x:v,y:T,width:E,height:j}}}return zh.Tag=x,x.prototype.className="Tag",(0,s._registerNode)(x),e.Factory.addGetterSetter(x,"pointerDirection",o),e.Factory.addGetterSetter(x,"pointerWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"pointerHeight",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),zh}var Hx={},zj;function J$(){if(zj)return Hx;zj=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.Rect=void 0;const e=jn(),t=Ti(),r=Tn(),n=pa(),s=Fn();class a extends t.Shape{_sceneFunc(o){const c=this.cornerRadius(),u=this.width(),d=this.height();o.beginPath(),c?n.Util.drawRoundedRectPath(o,u,d,c):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}}return Hx.Rect=a,a.prototype.className="Rect",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Hx}var Gx={},Uj;function Nne(){if(Uj)return Gx;Uj=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.RegularPolygon=void 0;const e=jn(),t=Ti(),r=Fn(),n=Tn();class s extends t.Shape{_sceneFunc(i){const o=this._getPoints();i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let c=1;c<o.length;c++)i.lineTo(o[c].x,o[c].y);i.closePath(),i.fillStrokeShape(this)}_getPoints(){const i=this.attrs.sides,o=this.attrs.radius||0,c=[];for(let u=0;u<i;u++)c.push({x:o*Math.sin(u*2*Math.PI/i),y:-1*o*Math.cos(u*2*Math.PI/i)});return c}getSelfRect(){const i=this._getPoints();let o=i[0].x,c=i[0].y,u=i[0].x,d=i[0].y;return i.forEach(f=>{o=Math.min(o,f.x),c=Math.max(c,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:o,y:u,width:c-o,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius(i/2)}setHeight(i){this.radius(i/2)}}return Gx.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,r.getNumberValidator)()),Gx}var Vx={},Wj;function Ene(){if(Wj)return Vx;Wj=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.Ring=void 0;const e=jn(),t=Ti(),r=Fn(),n=Tn(),s=Math.PI*2;class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,s,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),s,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}return Vx.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),Vx}var qx={},Hj;function Ane(){if(Hj)return qx;Hj=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.Sprite=void 0;const e=jn(),t=Ti(),r=DC(),n=Fn(),s=Tn();class a extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new r.Animation(()=>{const c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],h=this.frameOffsets(),g=f[d+0],x=f[d+1],y=f[d+2],v=f[d+3],T=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,v),o.closePath(),o.fillStrokeShape(this)),T)if(h){const k=h[c],b=u*2;o.drawImage(T,g,x,y,v,k[b+0],k[b+1],y,v)}else o.drawImage(T,g,x,y,v,0,0,y,v)}_hitFunc(o){const c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],h=this.frameOffsets(),g=f[d+2],x=f[d+3];if(o.beginPath(),h){const y=h[c],v=u*2;o.rect(y[v+0],y[v+1],g,x)}else o.rect(0,0,g,x);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),c=this.animation(),u=this.animations(),d=u[c],f=d.length/4;o<f-1?this.frameIndex(o+1):this.frameIndex(0)}}return qx.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,n.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),qx}var Kx={},Gj;function jne(){if(Gj)return Kx;Gj=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.Star=void 0;const e=jn(),t=Ti(),r=Fn(),n=Tn();class s extends t.Shape{_sceneFunc(i){const o=this.innerRadius(),c=this.outerRadius(),u=this.numPoints();i.beginPath(),i.moveTo(0,0-c);for(let d=1;d<u*2;d++){const f=d%2===0?c:o,h=f*Math.sin(d*Math.PI/u),g=-1*f*Math.cos(d*Math.PI/u);i.lineTo(h,g)}i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(i){this.outerRadius(i/2)}setHeight(i){this.outerRadius(i/2)}}return Kx.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),Kx}var Qg={},Vj;function Q$(){if(Vj)return Qg;Vj=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.Text=void 0,Qg.stringToArray=i;const e=pa(),t=jn(),r=Ti(),n=Tn(),s=Fn(),a=Tn();function i(R){return[...R].reduce((z,G,X,ne)=>{if(new RegExp("\\p{Emoji}","u").test(G)){const q=ne[X+1];q&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(q)?(z.push(G+q),ne[X+1]=""):z.push(G)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(G+(ne[X+1]||""))?z.push(G+ne[X+1]):X>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(G)?z[z.length-1]+=G:G&&z.push(G);return z},[])}const o="auto",c="center",u="inherit",d="justify",f="Change.konva",h="2d",g="-",x="left",y="text",v="Text",T="top",k="bottom",b="middle",C="normal",E="px ",j=" ",P="right",A="rtl",M="word",F="char",B="none",V="",ee=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],ae=ee.length;function Z(R){return R.split(",").map(z=>{z=z.trim();const G=z.indexOf(" ")>=0,X=z.indexOf('"')>=0||z.indexOf("'")>=0;return G&&!X&&(z=`"${z}"`),z}).join(", ")}let te;function L(){return te||(te=e.Util.createCanvasElement().getContext(h),te)}function K(R){R.fillText(this._partialText,this._partialTextX,this._partialTextY)}function I(R){R.setAttr("miterLimit",2),R.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function H(R){return R=R||{},!R.fillLinearGradientColorStops&&!R.fillRadialGradientColorStops&&!R.fillPatternImage&&(R.fill=R.fill||"black"),R}class U extends r.Shape{constructor(z){super(H(z)),this._partialTextX=0,this._partialTextY=0;for(let G=0;G<ae;G++)this.on(ee[G]+f,this._setTextData);this._setTextData()}_sceneFunc(z){const G=this.textArr,X=G.length;if(!this.text())return;let ne=this.padding(),q=this.fontSize(),se=this.lineHeight()*q,ue=this.verticalAlign(),me=this.direction(),Ne=0,ce=this.align(),Ue=this.getWidth(),pe=this.letterSpacing(),je=this.fill(),We=this.textDecoration(),Me=We.indexOf("underline")!==-1,Nt=We.indexOf("line-through")!==-1,$e;me=me===u?z.direction:me;let St=se/2,At=b;if(n.Konva._fixTextRendering){const Bt=this.measureSize("M");At="alphabetic",St=(Bt.fontBoundingBoxAscent-Bt.fontBoundingBoxDescent)/2+se/2}for(me===A&&z.setAttr("direction",me),z.setAttr("font",this._getContextFont()),z.setAttr("textBaseline",At),z.setAttr("textAlign",x),ue===b?Ne=(this.getHeight()-X*se-ne*2)/2:ue===k&&(Ne=this.getHeight()-X*se-ne*2),z.translate(ne,Ne+ne),$e=0;$e<X;$e++){let Bt=0,Gt=0;const or=G[$e],yr=or.text,it=or.width,Ve=or.lastInParagraph;if(z.save(),ce===P?Bt+=Ue-it-ne*2:ce===c&&(Bt+=(Ue-it-ne*2)/2),Me){z.save(),z.beginPath();const at=n.Konva._fixTextRendering?Math.round(q/4):Math.round(q/2),pt=Bt,nt=St+Gt+at;z.moveTo(pt,nt);const kt=ce===d&&!Ve?Ue-ne*2:it;z.lineTo(pt+Math.round(kt),nt),z.lineWidth=q/15;const Wt=this._getLinearGradient();z.strokeStyle=Wt||je,z.stroke(),z.restore()}if(Nt){z.save(),z.beginPath();const at=n.Konva._fixTextRendering?-Math.round(q/4):0;z.moveTo(Bt,St+Gt+at);const pt=ce===d&&!Ve?Ue-ne*2:it;z.lineTo(Bt+Math.round(pt),St+Gt+at),z.lineWidth=q/15;const nt=this._getLinearGradient();z.strokeStyle=nt||je,z.stroke(),z.restore()}if(me!==A&&(pe!==0||ce===d)){const at=yr.split(" ").length-1,pt=i(yr);for(let nt=0;nt<pt.length;nt++){const kt=pt[nt];kt===" "&&!Ve&&ce===d&&(Bt+=(Ue-ne*2-it)/at),this._partialTextX=Bt,this._partialTextY=St+Gt,this._partialText=kt,z.fillStrokeShape(this),Bt+=this.measureSize(kt).width+pe}}else pe!==0&&z.setAttr("letterSpacing",`${pe}px`),this._partialTextX=Bt,this._partialTextY=St+Gt,this._partialText=yr,z.fillStrokeShape(this);z.restore(),X>1&&(St+=se)}}_hitFunc(z){const G=this.getWidth(),X=this.getHeight();z.beginPath(),z.rect(0,0,G,X),z.closePath(),z.fillStrokeShape(this)}setText(z){const G=e.Util._isString(z)?z:z==null?"":z+"";return this._setAttr(y,G),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(z){var G,X,ne,q,se,ue,me,Ne,ce,Ue,pe;let je=L(),We=this.fontSize(),Me;je.save(),je.font=this._getContextFont(),Me=je.measureText(z),je.restore();const Nt=We/100;return{actualBoundingBoxAscent:(G=Me.actualBoundingBoxAscent)!==null&&G!==void 0?G:71.58203125*Nt,actualBoundingBoxDescent:(X=Me.actualBoundingBoxDescent)!==null&&X!==void 0?X:0,actualBoundingBoxLeft:(ne=Me.actualBoundingBoxLeft)!==null&&ne!==void 0?ne:-7.421875*Nt,actualBoundingBoxRight:(q=Me.actualBoundingBoxRight)!==null&&q!==void 0?q:75.732421875*Nt,alphabeticBaseline:(se=Me.alphabeticBaseline)!==null&&se!==void 0?se:0,emHeightAscent:(ue=Me.emHeightAscent)!==null&&ue!==void 0?ue:100*Nt,emHeightDescent:(me=Me.emHeightDescent)!==null&&me!==void 0?me:-20*Nt,fontBoundingBoxAscent:(Ne=Me.fontBoundingBoxAscent)!==null&&Ne!==void 0?Ne:91*Nt,fontBoundingBoxDescent:(ce=Me.fontBoundingBoxDescent)!==null&&ce!==void 0?ce:21*Nt,hangingBaseline:(Ue=Me.hangingBaseline)!==null&&Ue!==void 0?Ue:72.80000305175781*Nt,ideographicBaseline:(pe=Me.ideographicBaseline)!==null&&pe!==void 0?pe:-21*Nt,width:Me.width,height:We}}_getContextFont(){return this.fontStyle()+j+this.fontVariant()+j+(this.fontSize()+E)+Z(this.fontFamily())}_addTextLine(z){this.align()===d&&(z=z.trim());const X=this._getTextWidth(z);return this.textArr.push({text:z,width:X,lastInParagraph:!1})}_getTextWidth(z){const G=this.letterSpacing(),X=z.length;return L().measureText(z).width+G*X}_setTextData(){let z=this.text().split(`
`),G=+this.fontSize(),X=0,ne=this.lineHeight()*G,q=this.attrs.width,se=this.attrs.height,ue=q!==o&&q!==void 0,me=se!==o&&se!==void 0,Ne=this.padding(),ce=q-Ne*2,Ue=se-Ne*2,pe=0,je=this.wrap(),We=je!==B,Me=je!==F&&We,Nt=this.ellipsis();this.textArr=[],L().font=this._getContextFont();const $e=Nt?this._getTextWidth(V):0;for(let St=0,At=z.length;St<At;++St){let Bt=z[St],Gt=this._getTextWidth(Bt);if(ue&&Gt>ce)for(;Bt.length>0;){let or=0,yr=i(Bt).length,it="",Ve=0;for(;or<yr;){const at=or+yr>>>1,pt=i(Bt),nt=pt.slice(0,at+1).join(""),kt=this._getTextWidth(nt);(Nt&&me&&pe+ne>Ue?kt+$e:kt)<=ce?(or=at+1,it=nt,Ve=kt):yr=at}if(it){if(Me){const nt=i(Bt),kt=i(it),Wt=nt[kt.length],rr=Wt===j||Wt===g;let ur;if(rr&&Ve<=ce)ur=kt.length;else{const Nr=kt.lastIndexOf(j),wr=kt.lastIndexOf(g);ur=Math.max(Nr,wr)+1}ur>0&&(or=ur,it=nt.slice(0,or).join(""),Ve=this._getTextWidth(it))}if(it=it.trimRight(),this._addTextLine(it),X=Math.max(X,Ve),pe+=ne,this._shouldHandleEllipsis(pe)){this._tryToAddEllipsisToLastLine();break}if(Bt=i(Bt).slice(or).join("").trimLeft(),Bt.length>0&&(Gt=this._getTextWidth(Bt),Gt<=ce)){this._addTextLine(Bt),pe+=ne,X=Math.max(X,Gt);break}}else break}else this._addTextLine(Bt),pe+=ne,X=Math.max(X,Gt),this._shouldHandleEllipsis(pe)&&St<At-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),me&&pe+ne>Ue)break}this.textHeight=G,this.textWidth=X}_shouldHandleEllipsis(z){const G=+this.fontSize(),X=this.lineHeight()*G,ne=this.attrs.height,q=ne!==o&&ne!==void 0,se=this.padding(),ue=ne-se*2;return!(this.wrap()!==B)||q&&z+X>ue}_tryToAddEllipsisToLastLine(){const z=this.attrs.width,G=z!==o&&z!==void 0,X=this.padding(),ne=z-X*2,q=this.ellipsis(),se=this.textArr[this.textArr.length-1];!se||!q||(G&&(this._getTextWidth(se.text+V)<ne||(se.text=se.text.slice(0,se.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(se.text+V))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const z=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,G=this.hasShadow();return z&&G?!0:super._useBufferCanvas()}}return Qg.Text=U,U.prototype._fillFunc=K,U.prototype._strokeFunc=I,U.prototype.className=v,U.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(U),t.Factory.overWriteSetter(U,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(U,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(U,"direction",u),t.Factory.addGetterSetter(U,"fontFamily","Arial"),t.Factory.addGetterSetter(U,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(U,"fontStyle",C),t.Factory.addGetterSetter(U,"fontVariant",C),t.Factory.addGetterSetter(U,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(U,"align",x),t.Factory.addGetterSetter(U,"verticalAlign",T),t.Factory.addGetterSetter(U,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(U,"wrap",M),t.Factory.addGetterSetter(U,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(U,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(U,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(U,"textDecoration",""),Qg}var Yx={},qj;function Pne(){if(qj)return Yx;qj=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.TextPath=void 0;const e=pa(),t=jn(),r=Ti(),n=OC(),s=Q$(),a=Fn(),i=Tn(),o="",c="normal";function u(h){h.fillText(this.partialText,0,0)}function d(h){h.strokeText(this.partialText,0,0)}class f extends r.Shape{constructor(g){super(g),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const x=this.pathLength;return g-1>x?null:n.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const x=this.textDecoration(),y=this.fill(),v=this.fontSize(),T=this.glyphInfo;x==="underline"&&g.beginPath();for(let k=0;k<T.length;k++){g.save();const b=T[k].p0;g.translate(b.x,b.y),g.rotate(T[k].rotation),this.partialText=T[k].text,g.fillStrokeShape(this),x==="underline"&&(k===0&&g.moveTo(0,v/2+1),g.lineTo(v,v/2+1)),g.restore()}x==="underline"&&(g.strokeStyle=y,g.lineWidth=v/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const x=this.glyphInfo;if(x.length>=1){const y=x[0].p0;g.moveTo(y.x,y.y)}for(let y=0;y<x.length;y++){const v=x[y].p1;g.lineTo(v.x,v.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return s.Text.prototype.setText.call(this,g)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(g){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const v=y.measureText(g);return y.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:x}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=x,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),v=this.align(),T=this.kerningFunc(),k=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let b=0;v==="center"&&(b=Math.max(0,this.pathLength/2-k/2)),v==="right"&&(b=Math.max(0,this.pathLength-k));const C=(0,s.stringToArray)(this.text());let E=b;for(let j=0;j<C.length;j++){const P=this._getPointAtLength(E);if(!P)return;let A=this._getTextSize(C[j]).width+y;if(C[j]===" "&&v==="justify"){const ae=this.text().split(" ").length-1;A+=(this.pathLength-k)/ae}const M=this._getPointAtLength(E+A);if(!M)return;const F=n.Path.getLineLength(P.x,P.y,M.x,M.y);let B=0;if(T)try{B=T(C[j-1],C[j])*this.fontSize()}catch{B=0}P.x+=B,M.x+=B,this.textWidth+=B;const V=n.Path.getPointOnLine(B+F/2,P.x,P.y,M.x,M.y),ee=Math.atan2(M.y-P.y,M.x-P.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:C[j],rotation:ee,p0:P,p1:M}),E+=A}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(E){g.push(E.p0.x),g.push(E.p0.y),g.push(E.p1.x),g.push(E.p1.y)});let x=g[0]||0,y=g[0]||0,v=g[1]||0,T=g[1]||0,k,b;for(let E=0;E<g.length/2;E++)k=g[E*2],b=g[E*2+1],x=Math.min(x,k),y=Math.max(y,k),v=Math.min(v,b),T=Math.max(T,b);const C=this.fontSize();return{x:x-C/2,y:v-C/2,width:y-x+C,height:T-v+C}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return Yx.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",c),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",c),t.Factory.addGetterSetter(f,"text",o),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),Yx}var Xx={},Kj;function Mne(){if(Kj)return Xx;Kj=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.Transformer=void 0;const e=pa(),t=jn(),r=Pa(),n=Ti(),s=J$(),a=FC(),i=Tn(),o=Fn(),c=Tn(),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(A=>A+`.${u}`).join(" "),f="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},x="ontouchstart"in i.Konva._global;function y(A,M,F){if(A==="rotater")return F;M+=e.Util.degToRad(g[A]||0);const B=(e.Util.radToDeg(M)%360+360)%360;return e.Util._inRange(B,315+22.5,360)||e.Util._inRange(B,0,22.5)?"ns-resize":e.Util._inRange(B,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(B,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(B,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(B,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(B,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(B,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(B,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+B),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function T(A){return{x:A.x+A.width/2*Math.cos(A.rotation)+A.height/2*Math.sin(-A.rotation),y:A.y+A.height/2*Math.cos(A.rotation)+A.width/2*Math.sin(A.rotation)}}function k(A,M,F){const B=F.x+(A.x-F.x)*Math.cos(M)-(A.y-F.y)*Math.sin(M),V=F.y+(A.x-F.x)*Math.sin(M)+(A.y-F.y)*Math.cos(M);return{...A,rotation:A.rotation+M,x:B,y:V}}function b(A,M){const F=T(A);return k(A,M,F)}function C(A,M,F){let B=M;for(let V=0;V<A.length;V++){const ee=i.Konva.getAngle(A[V]),ae=Math.abs(ee-M)%(Math.PI*2);Math.min(ae,Math.PI*2-ae)<F&&(B=ee)}return B}let E=0;class j extends a.Group{constructor(M){super(M),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(M){return this.setNode(M),this}setNode(M){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([M])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(M=[]){this._nodes&&this._nodes.length&&this.detach();const F=M.filter(V=>V.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=M=F,M.length===1&&this.useSingleNodeRotation()?this.rotation(M[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(V=>{const ee=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(V._attrsAffectingSize.length){const ae=V._attrsAffectingSize.map(Z=>Z+"Change."+this._getEventNamespace()).join(" ");V.on(ae,ee)}V.on(h.map(ae=>ae+`.${this._getEventNamespace()}`).join(" "),ee),V.on(`absoluteTransformChange.${this._getEventNamespace()}`,ee),this._proxyDrag(V)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(M){let F;M.on(`dragstart.${this._getEventNamespace()}`,B=>{F=M.getAbsolutePosition(),!this.isDragging()&&M!==this.findOne(".back")&&this.startDrag(B,!1)}),M.on(`dragmove.${this._getEventNamespace()}`,B=>{if(!F)return;const V=M.getAbsolutePosition(),ee=V.x-F.x,ae=V.y-F.y;this.nodes().forEach(Z=>{if(Z===M||Z.isDragging())return;const te=Z.getAbsolutePosition();Z.setAbsolutePosition({x:te.x+ee,y:te.y+ae}),Z.startDrag(B)}),F=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(M=>{M.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(M,F=this.rotation(),B){const V=M.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ee=M.getAbsoluteScale(B),ae=M.getAbsolutePosition(B),Z=V.x*ee.x-M.offsetX()*ee.x,te=V.y*ee.y-M.offsetY()*ee.y,L=(i.Konva.getAngle(M.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),K={x:ae.x+Z*Math.cos(L)+te*Math.sin(-L),y:ae.y+te*Math.cos(L)+Z*Math.sin(L),width:V.width*ee.x,height:V.height*ee.y,rotation:L};return k(K,-i.Konva.getAngle(F),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const F=[];this.nodes().map(L=>{const K=L.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),I=[{x:K.x,y:K.y},{x:K.x+K.width,y:K.y},{x:K.x+K.width,y:K.y+K.height},{x:K.x,y:K.y+K.height}],H=L.getAbsoluteTransform();I.forEach(function(U){const R=H.point(U);F.push(R)})});const B=new e.Transform;B.rotate(-i.Konva.getAngle(this.rotation()));let V=1/0,ee=1/0,ae=-1/0,Z=-1/0;F.forEach(function(L){const K=B.point(L);V===void 0&&(V=ae=K.x,ee=Z=K.y),V=Math.min(V,K.x),ee=Math.min(ee,K.y),ae=Math.max(ae,K.x),Z=Math.max(Z,K.y)}),B.invert();const te=B.point({x:V,y:ee});return{x:te.x,y:te.y,width:ae-V,height:Z-ee,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(M=>{this._createAnchor(M)}),this._createAnchor("rotater")}_createAnchor(M){const F=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:M+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:x?10:"auto"}),B=this;F.on("mousedown touchstart",function(V){B._handleMouseDown(V)}),F.on("dragstart",V=>{F.stopDrag(),V.cancelBubble=!0}),F.on("dragend",V=>{V.cancelBubble=!0}),F.on("mouseenter",()=>{const V=i.Konva.getAngle(this.rotation()),ee=this.rotateAnchorCursor(),ae=y(M,V,ee);F.getStage().content&&(F.getStage().content.style.cursor=ae),this._cursorChange=!0}),F.on("mouseout",()=>{F.getStage().content&&(F.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(F)}_createBack(){const M=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(F,B){const V=B.getParent(),ee=V.padding();F.beginPath(),F.rect(-ee,-ee,B.width()+ee*2,B.height()+ee*2),F.moveTo(B.width()/2,-ee),V.rotateEnabled()&&V.rotateLineVisible()&&F.lineTo(B.width()/2,-V.rotateAnchorOffset()*e.Util._sign(B.height())-ee),F.fillStrokeShape(B)},hitFunc:(F,B)=>{if(!this.shouldOverdrawWholeArea())return;const V=this.padding();F.beginPath(),F.rect(-V,-V,B.width()+V*2,B.height()+V*2),F.fillStrokeShape(B)}});this.add(M),this._proxyDrag(M),M.on("dragstart",F=>{F.cancelBubble=!0}),M.on("dragmove",F=>{F.cancelBubble=!0}),M.on("dragend",F=>{F.cancelBubble=!0}),this.on("dragmove",F=>{this.update()})}_handleMouseDown(M){if(this._transforming)return;this._movingAnchorName=M.target.name().split(" ")[0];const F=this._getNodeRect(),B=F.width,V=F.height,ee=Math.sqrt(Math.pow(B,2)+Math.pow(V,2));this.sin=Math.abs(V/ee),this.cos=Math.abs(B/ee),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const ae=M.target.getAbsolutePosition(),Z=M.target.getStage().getPointerPosition();this._anchorDragOffset={x:Z.x-ae.x,y:Z.y-ae.y},E++,this._fire("transformstart",{evt:M.evt,target:this.getNode()}),this._nodes.forEach(te=>{te._fire("transformstart",{evt:M.evt,target:te})})}_handleMouseMove(M){let F,B,V;const ee=this.findOne("."+this._movingAnchorName),ae=ee.getStage();ae.setPointersPositions(M);const Z=ae.getPointerPosition();let te={x:Z.x-this._anchorDragOffset.x,y:Z.y-this._anchorDragOffset.y};const L=ee.getAbsolutePosition();this.anchorDragBoundFunc()&&(te=this.anchorDragBoundFunc()(L,te,M)),ee.setAbsolutePosition(te);const K=ee.getAbsolutePosition();if(L.x===K.x&&L.y===K.y)return;if(this._movingAnchorName==="rotater"){const ne=this._getNodeRect();F=ee.x()-ne.width/2,B=-ee.y()+ne.height/2;let q=Math.atan2(-B,F)+Math.PI/2;ne.height<0&&(q-=Math.PI);const ue=i.Konva.getAngle(this.rotation())+q,me=i.Konva.getAngle(this.rotationSnapTolerance()),ce=C(this.rotationSnaps(),ue,me)-ne.rotation,Ue=b(ne,ce);this._fitNodesInto(Ue,M);return}const I=this.shiftBehavior();let H;I==="inverted"?H=this.keepRatio()&&!M.shiftKey:I==="none"?H=this.keepRatio():H=this.keepRatio()||M.shiftKey;let U=this.centeredScaling()||M.altKey;if(this._movingAnchorName==="top-left"){if(H){const ne=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};V=Math.sqrt(Math.pow(ne.x-ee.x(),2)+Math.pow(ne.y-ee.y(),2));const q=this.findOne(".top-left").x()>ne.x?-1:1,se=this.findOne(".top-left").y()>ne.y?-1:1;F=V*this.cos*q,B=V*this.sin*se,this.findOne(".top-left").x(ne.x-F),this.findOne(".top-left").y(ne.y-B)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(ee.y());else if(this._movingAnchorName==="top-right"){if(H){const ne=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};V=Math.sqrt(Math.pow(ee.x()-ne.x,2)+Math.pow(ne.y-ee.y(),2));const q=this.findOne(".top-right").x()<ne.x?-1:1,se=this.findOne(".top-right").y()>ne.y?-1:1;F=V*this.cos*q,B=V*this.sin*se,this.findOne(".top-right").x(ne.x+F),this.findOne(".top-right").y(ne.y-B)}var R=ee.position();this.findOne(".top-left").y(R.y),this.findOne(".bottom-right").x(R.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(ee.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(ee.x());else if(this._movingAnchorName==="bottom-left"){if(H){const ne=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};V=Math.sqrt(Math.pow(ne.x-ee.x(),2)+Math.pow(ee.y()-ne.y,2));const q=ne.x<ee.x()?-1:1,se=ee.y()<ne.y?-1:1;F=V*this.cos*q,B=V*this.sin*se,ee.x(ne.x-F),ee.y(ne.y+B)}R=ee.position(),this.findOne(".top-left").x(R.x),this.findOne(".bottom-right").y(R.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(ee.y());else if(this._movingAnchorName==="bottom-right"){if(H){const ne=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};V=Math.sqrt(Math.pow(ee.x()-ne.x,2)+Math.pow(ee.y()-ne.y,2));const q=this.findOne(".bottom-right").x()<ne.x?-1:1,se=this.findOne(".bottom-right").y()<ne.y?-1:1;F=V*this.cos*q,B=V*this.sin*se,this.findOne(".bottom-right").x(ne.x+F),this.findOne(".bottom-right").y(ne.y+B)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(U=this.centeredScaling()||M.altKey,U){const ne=this.findOne(".top-left"),q=this.findOne(".bottom-right"),se=ne.x(),ue=ne.y(),me=this.getWidth()-q.x(),Ne=this.getHeight()-q.y();q.move({x:-se,y:-ue}),ne.move({x:me,y:Ne})}const z=this.findOne(".top-left").getAbsolutePosition();F=z.x,B=z.y;const G=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),X=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:F,y:B,width:G,height:X,rotation:i.Konva.getAngle(this.rotation())},M)}_handleMouseUp(M){this._removeEvents(M)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(M){var F;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const B=this.getNode();E--,this._fire("transformend",{evt:M,target:B}),(F=this.getLayer())===null||F===void 0||F.batchDraw(),B&&this._nodes.forEach(V=>{var ee;V._fire("transformend",{evt:M,target:V}),(ee=V.getLayer())===null||ee===void 0||ee.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(M,F){const B=this._getNodeRect(),V=1;if(e.Util._inRange(M.width,-this.padding()*2-V,V)){this.update();return}if(e.Util._inRange(M.height,-this.padding()*2-V,V)){this.update();return}const ee=new e.Transform;if(ee.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&M.width<0&&this._movingAnchorName.indexOf("left")>=0){const H=ee.point({x:-this.padding()*2,y:0});M.x+=H.x,M.y+=H.y,M.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y}else if(this._movingAnchorName&&M.width<0&&this._movingAnchorName.indexOf("right")>=0){const H=ee.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,M.width+=this.padding()*2}if(this._movingAnchorName&&M.height<0&&this._movingAnchorName.indexOf("top")>=0){const H=ee.point({x:0,y:-this.padding()*2});M.x+=H.x,M.y+=H.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,M.height+=this.padding()*2}else if(this._movingAnchorName&&M.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const H=ee.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,M.height+=this.padding()*2}if(this.boundBoxFunc()){const H=this.boundBoxFunc()(B,M);H?M=H:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const ae=1e7,Z=new e.Transform;Z.translate(B.x,B.y),Z.rotate(B.rotation),Z.scale(B.width/ae,B.height/ae);const te=new e.Transform,L=M.width/ae,K=M.height/ae;this.flipEnabled()===!1?(te.translate(M.x,M.y),te.rotate(M.rotation),te.translate(M.width<0?M.width:0,M.height<0?M.height:0),te.scale(Math.abs(L),Math.abs(K))):(te.translate(M.x,M.y),te.rotate(M.rotation),te.scale(L,K));const I=te.multiply(Z.invert());this._nodes.forEach(H=>{var U;const R=H.getParent().getAbsoluteTransform(),z=H.getTransform().copy();z.translate(H.offsetX(),H.offsetY());const G=new e.Transform;G.multiply(R.copy().invert()).multiply(I).multiply(R).multiply(z);const X=G.decompose();H.setAttrs(X),(U=H.getLayer())===null||U===void 0||U.batchDraw()}),this.rotation(e.Util._getRotation(M.rotation)),this._nodes.forEach(H=>{this._fire("transform",{evt:F,target:H}),H._fire("transform",{evt:F,target:H})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(M,F){this.findOne(M).setAttrs(F)}update(){var M;const F=this._getNodeRect();this.rotation(e.Util._getRotation(F.rotation));const B=F.width,V=F.height,ee=this.enabledAnchors(),ae=this.resizeEnabled(),Z=this.padding(),te=this.anchorSize(),L=this.find("._anchor");L.forEach(I=>{I.setAttrs({width:te,height:te,offsetX:te/2,offsetY:te/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:te/2+Z,offsetY:te/2+Z,visible:ae&&ee.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:B/2,y:0,offsetY:te/2+Z,visible:ae&&ee.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:B,y:0,offsetX:te/2-Z,offsetY:te/2+Z,visible:ae&&ee.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:V/2,offsetX:te/2+Z,visible:ae&&ee.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:B,y:V/2,offsetX:te/2-Z,visible:ae&&ee.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:V,offsetX:te/2+Z,offsetY:te/2-Z,visible:ae&&ee.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:B/2,y:V,offsetY:te/2-Z,visible:ae&&ee.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:B,y:V,offsetX:te/2-Z,offsetY:te/2-Z,visible:ae&&ee.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:B/2,y:-this.rotateAnchorOffset()*e.Util._sign(V)-Z,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:B,height:V,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const K=this.anchorStyleFunc();K&&L.forEach(I=>{K(I)}),(M=this.getLayer())===null||M===void 0||M.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const M=this.findOne("."+this._movingAnchorName);M&&M.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(M){return r.Node.prototype.clone.call(this,M)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Xx.Transformer=j,j.isTransforming=()=>E>0;function P(A){return A instanceof Array||e.Util.warn("enabledAnchors value should be an array"),A instanceof Array&&A.forEach(function(M){v.indexOf(M)===-1&&e.Util.warn("Unknown anchor name: "+M+". Available names are: "+v.join(", "))}),A||[]}return j.prototype.className="Transformer",(0,c._registerNode)(j),t.Factory.addGetterSetter(j,"enabledAnchors",v,P),t.Factory.addGetterSetter(j,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(j,"resizeEnabled",!0),t.Factory.addGetterSetter(j,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(j,"rotateEnabled",!0),t.Factory.addGetterSetter(j,"rotateLineVisible",!0),t.Factory.addGetterSetter(j,"rotationSnaps",[]),t.Factory.addGetterSetter(j,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(j,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(j,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderEnabled",!0),t.Factory.addGetterSetter(j,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(j,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(j,"anchorFill","white"),t.Factory.addGetterSetter(j,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(j,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderDash"),t.Factory.addGetterSetter(j,"keepRatio",!0),t.Factory.addGetterSetter(j,"shiftBehavior","default"),t.Factory.addGetterSetter(j,"centeredScaling",!1),t.Factory.addGetterSetter(j,"ignoreStroke",!1),t.Factory.addGetterSetter(j,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(j,"nodes"),t.Factory.addGetterSetter(j,"node"),t.Factory.addGetterSetter(j,"boundBoxFunc"),t.Factory.addGetterSetter(j,"anchorDragBoundFunc"),t.Factory.addGetterSetter(j,"anchorStyleFunc"),t.Factory.addGetterSetter(j,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(j,"useSingleNodeRotation",!0),t.Factory.backCompat(j,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Xx}var Jx={},Yj;function Fne(){if(Yj)return Jx;Yj=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.Wedge=void 0;const e=jn(),t=Ti(),r=Tn(),n=Fn(),s=Tn();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}return Jx.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Jx}var Qx={},Xj;function Dne(){if(Xj)return Qx;Xj=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.Blur=void 0;const e=jn(),t=Pa(),r=Fn();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(c,u){const d=c.data,f=c.width,h=c.height;let g,x,y,v,T,k,b,C,E,j,P,A,M,F,B,V,ee,ae,Z,te;const L=u+u+1,K=f-1,I=h-1,H=u+1,U=H*(H+1)/2,R=new n,z=s[u],G=a[u];let X=null,ne=R,q=null,se=null;for(let ue=1;ue<L;ue++)ne=ne.next=new n,ue===H&&(X=ne);ne.next=R,y=x=0;for(let ue=0;ue<h;ue++){A=M=F=B=v=T=k=b=0,C=H*(V=d[x]),E=H*(ee=d[x+1]),j=H*(ae=d[x+2]),P=H*(Z=d[x+3]),v+=U*V,T+=U*ee,k+=U*ae,b+=U*Z,ne=R;for(let me=0;me<H;me++)ne.r=V,ne.g=ee,ne.b=ae,ne.a=Z,ne=ne.next;for(let me=1;me<H;me++)g=x+((K<me?K:me)<<2),v+=(ne.r=V=d[g])*(te=H-me),T+=(ne.g=ee=d[g+1])*te,k+=(ne.b=ae=d[g+2])*te,b+=(ne.a=Z=d[g+3])*te,A+=V,M+=ee,F+=ae,B+=Z,ne=ne.next;q=R,se=X;for(let me=0;me<f;me++)d[x+3]=Z=b*z>>G,Z!==0?(Z=255/Z,d[x]=(v*z>>G)*Z,d[x+1]=(T*z>>G)*Z,d[x+2]=(k*z>>G)*Z):d[x]=d[x+1]=d[x+2]=0,v-=C,T-=E,k-=j,b-=P,C-=q.r,E-=q.g,j-=q.b,P-=q.a,g=y+((g=me+u+1)<K?g:K)<<2,A+=q.r=d[g],M+=q.g=d[g+1],F+=q.b=d[g+2],B+=q.a=d[g+3],v+=A,T+=M,k+=F,b+=B,q=q.next,C+=V=se.r,E+=ee=se.g,j+=ae=se.b,P+=Z=se.a,A-=V,M-=ee,F-=ae,B-=Z,se=se.next,x+=4;y+=f}for(let ue=0;ue<f;ue++){M=F=B=A=T=k=b=v=0,x=ue<<2,C=H*(V=d[x]),E=H*(ee=d[x+1]),j=H*(ae=d[x+2]),P=H*(Z=d[x+3]),v+=U*V,T+=U*ee,k+=U*ae,b+=U*Z,ne=R;for(let Ne=0;Ne<H;Ne++)ne.r=V,ne.g=ee,ne.b=ae,ne.a=Z,ne=ne.next;let me=f;for(let Ne=1;Ne<=u;Ne++)x=me+ue<<2,v+=(ne.r=V=d[x])*(te=H-Ne),T+=(ne.g=ee=d[x+1])*te,k+=(ne.b=ae=d[x+2])*te,b+=(ne.a=Z=d[x+3])*te,A+=V,M+=ee,F+=ae,B+=Z,ne=ne.next,Ne<I&&(me+=f);x=ue,q=R,se=X;for(let Ne=0;Ne<h;Ne++)g=x<<2,d[g+3]=Z=b*z>>G,Z>0?(Z=255/Z,d[g]=(v*z>>G)*Z,d[g+1]=(T*z>>G)*Z,d[g+2]=(k*z>>G)*Z):d[g]=d[g+1]=d[g+2]=0,v-=C,T-=E,k-=j,b-=P,C-=q.r,E-=q.g,j-=q.b,P-=q.a,g=ue+((g=Ne+H)<I?g:I)*f<<2,v+=A+=q.r=d[g],T+=M+=q.g=d[g+1],k+=F+=q.b=d[g+2],b+=B+=q.a=d[g+3],q=q.next,C+=V=se.r,E+=ee=se.g,j+=ae=se.b,P+=Z=se.a,A-=V,M-=ee,F-=ae,B-=Z,se=se.next,x+=f}}const o=function(u){const d=Math.round(this.blurRadius());d>0&&i(u,d)};return Qx.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Qx}var Zx={},Jj;function One(){if(Jj)return Zx;Jj=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.Brighten=void 0;const e=jn(),t=Pa(),r=Fn(),n=function(s){const a=this.brightness()*255,i=s.data,o=i.length;for(let c=0;c<o;c+=4)i[c]+=a,i[c+1]+=a,i[c+2]+=a};return Zx.Brighten=n,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Zx}var ey={},Qj;function Rne(){if(Qj)return ey;Qj=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.Contrast=void 0;const e=jn(),t=Pa(),r=Fn(),n=function(s){const a=Math.pow((this.contrast()+100)/100,2),i=s.data,o=i.length;let c=150,u=150,d=150;for(let f=0;f<o;f+=4)c=i[f],u=i[f+1],d=i[f+2],c/=255,c-=.5,c*=a,c+=.5,c*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,c=c<0?0:c>255?255:c,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,i[f]=c,i[f+1]=u,i[f+2]=d};return ey.Contrast=n,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ey}var ty={},Zj;function Ine(){if(Zj)return ty;Zj=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.Emboss=void 0;const e=jn(),t=Pa(),r=pa(),n=Fn(),s=function(a){const i=this.embossStrength()*10,o=this.embossWhiteLevel()*255,c=this.embossDirection(),u=this.embossBlend(),d=a.data,f=a.width,h=a.height,g=f*4;let x=0,y=0,v=h;switch(c){case"top-left":x=-1,y=-1;break;case"top":x=-1,y=0;break;case"top-right":x=-1,y=1;break;case"right":x=0,y=1;break;case"bottom-right":x=1,y=1;break;case"bottom":x=1,y=0;break;case"bottom-left":x=1,y=-1;break;case"left":x=0,y=-1;break;default:r.Util.error("Unknown emboss direction: "+c)}do{const T=(v-1)*g;let k=x;v+k<1&&(k=0),v+k>h&&(k=0);const b=(v-1+k)*f*4;let C=f;do{const E=T+(C-1)*4;let j=y;C+j<1&&(j=0),C+j>f&&(j=0);const P=b+(C-1+j)*4,A=d[E]-d[P],M=d[E+1]-d[P+1],F=d[E+2]-d[P+2];let B=A;const V=B>0?B:-B,ee=M>0?M:-M,ae=F>0?F:-F;if(ee>V&&(B=M),ae>V&&(B=F),B*=i,u){const Z=d[E]+B,te=d[E+1]+B,L=d[E+2]+B;d[E]=Z>255?255:Z<0?0:Z,d[E+1]=te>255?255:te<0?0:te,d[E+2]=L>255?255:L<0?0:L}else{let Z=o-B;Z<0?Z=0:Z>255&&(Z=255),d[E]=d[E+1]=d[E+2]=Z}}while(--C)}while(--v)};return ty.Emboss=s,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),ty}var ry={},eP;function Lne(){if(eP)return ry;eP=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.Enhance=void 0;const e=jn(),t=Pa(),r=Fn();function n(a,i,o,c,u){const d=o-i,f=u-c;if(d===0)return c+f/2;if(f===0)return c;let h=(a-i)/d;return h=f*h+c,h}const s=function(a){const i=a.data,o=i.length;let c=i[0],u=c,d,f=i[1],h=f,g,x=i[2],y=x,v;const T=this.enhance();if(T===0)return;for(let A=0;A<o;A+=4)d=i[A+0],d<c?c=d:d>u&&(u=d),g=i[A+1],g<f?f=g:g>h&&(h=g),v=i[A+2],v<x?x=v:v>y&&(y=v);u===c&&(u=255,c=0),h===f&&(h=255,f=0),y===x&&(y=255,x=0);let k,b,C,E,j,P;if(T>0)k=u+T*(255-u),b=c-T*(c-0),C=h+T*(255-h),E=f-T*(f-0),j=y+T*(255-y),P=x-T*(x-0);else{const A=(u+c)*.5;k=u+T*(u-A),b=c+T*(c-A);const M=(h+f)*.5;C=h+T*(h-M),E=f+T*(f-M);const F=(y+x)*.5;j=y+T*(y-F),P=x+T*(x-F)}for(let A=0;A<o;A+=4)i[A+0]=n(i[A+0],c,u,b,k),i[A+1]=n(i[A+1],f,h,E,C),i[A+2]=n(i[A+2],x,y,P,j)};return ry.Enhance=s,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ry}var ny={},tP;function Bne(){if(tP)return ny;tP=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.Grayscale=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=.34*r[s]+.5*r[s+1]+.16*r[s+2];r[s]=a,r[s+1]=a,r[s+2]=a}};return ny.Grayscale=e,ny}var sy={},rP;function $ne(){if(rP)return sy;rP=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.HSL=void 0;const e=jn(),t=Pa(),r=Fn();e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter);const n=function(s){const a=s.data,i=a.length,o=1,c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=o*c*Math.cos(u*Math.PI/180),h=o*c*Math.sin(u*Math.PI/180),g=.299*o+.701*f+.167*h,x=.587*o-.587*f+.33*h,y=.114*o-.114*f-.497*h,v=.299*o-.299*f-.328*h,T=.587*o+.413*f+.035*h,k=.114*o-.114*f+.293*h,b=.299*o-.3*f+1.25*h,C=.587*o-.586*f-1.05*h,E=.114*o+.886*f-.2*h;let j,P,A,M;for(let F=0;F<i;F+=4)j=a[F+0],P=a[F+1],A=a[F+2],M=a[F+3],a[F+0]=g*j+x*P+y*A+d,a[F+1]=v*j+T*P+k*A+d,a[F+2]=b*j+C*P+E*A+d,a[F+3]=M};return sy.HSL=n,sy}var ay={},nP;function zne(){if(nP)return ay;nP=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.HSV=void 0;const e=jn(),t=Pa(),r=Fn(),n=function(s){const a=s.data,i=a.length,o=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=o*c*Math.cos(u*Math.PI/180),f=o*c*Math.sin(u*Math.PI/180),h=.299*o+.701*d+.167*f,g=.587*o-.587*d+.33*f,x=.114*o-.114*d-.497*f,y=.299*o-.299*d-.328*f,v=.587*o+.413*d+.035*f,T=.114*o-.114*d+.293*f,k=.299*o-.3*d+1.25*f,b=.587*o-.586*d-1.05*f,C=.114*o+.886*d-.2*f;for(let E=0;E<i;E+=4){const j=a[E+0],P=a[E+1],A=a[E+2],M=a[E+3];a[E+0]=h*j+g*P+x*A,a[E+1]=y*j+v*P+T*A,a[E+2]=k*j+b*P+C*A,a[E+3]=M}};return ay.HSV=n,e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ay}var iy={},sP;function Une(){if(sP)return iy;sP=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.Invert=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]};return iy.Invert=e,iy}var oy={},aP;function Wne(){if(aP)return oy;aP=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.Kaleidoscope=void 0;const e=jn(),t=Pa(),r=pa(),n=Fn(),s=function(o,c,u){const d=o.data,f=c.data,h=o.width,g=o.height,x=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(x*x+y*y),T=h-x,k=g-y;const b=Math.sqrt(T*T+k*k);v=b>v?b:v;const C=g,E=h,j=360/E*Math.PI/180;for(let P=0;P<E;P+=1){const A=Math.sin(P*j),M=Math.cos(P*j);for(let F=0;F<C;F+=1){T=Math.floor(x+v*F/C*M),k=Math.floor(y+v*F/C*A);let B=(k*h+T)*4;const V=d[B+0],ee=d[B+1],ae=d[B+2],Z=d[B+3];B=(P+F*h)*4,f[B+0]=V,f[B+1]=ee,f[B+2]=ae,f[B+3]=Z}}},a=function(o,c,u){const d=o.data,f=c.data,h=o.width,g=o.height,x=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(x*x+y*y),T=h-x,k=g-y;const b=Math.sqrt(T*T+k*k);v=b>v?b:v;const C=g,E=h,j=0;let P,A;for(T=0;T<h;T+=1)for(k=0;k<g;k+=1){const M=T-x,F=k-y,B=Math.sqrt(M*M+F*F)*C/v;let V=(Math.atan2(F,M)*180/Math.PI+360+j)%360;V=V*E/360,P=Math.floor(V),A=Math.floor(B);let ee=(A*h+P)*4;const ae=d[ee+0],Z=d[ee+1],te=d[ee+2],L=d[ee+3];ee=(k*h+T)*4,f[ee+0]=ae,f[ee+1]=Z,f[ee+2]=te,f[ee+3]=L}},i=function(o){const c=o.width,u=o.height;let d,f,h,g,x,y,v,T,k,b,C=Math.round(this.kaleidoscopePower());const E=Math.round(this.kaleidoscopeAngle()),j=Math.floor(c*(E%360)/360);if(C<1)return;const P=r.Util.createCanvasElement();P.width=c,P.height=u;const A=P.getContext("2d").getImageData(0,0,c,u);r.Util.releaseCanvas(P),s(o,A,{polarCenterX:c/2,polarCenterY:u/2});let M=c/Math.pow(2,C);for(;M<=8;)M=M*2,C-=1;M=Math.ceil(M);let F=M,B=0,V=F,ee=1;for(j+M>c&&(B=F,V=0,ee=-1),f=0;f<u;f+=1)for(d=B;d!==V;d+=ee)h=Math.round(d+j)%c,k=(c*f+h)*4,x=A.data[k+0],y=A.data[k+1],v=A.data[k+2],T=A.data[k+3],b=(c*f+d)*4,A.data[b+0]=x,A.data[b+1]=y,A.data[b+2]=v,A.data[b+3]=T;for(f=0;f<u;f+=1)for(F=Math.floor(M),g=0;g<C;g+=1){for(d=0;d<F+1;d+=1)k=(c*f+d)*4,x=A.data[k+0],y=A.data[k+1],v=A.data[k+2],T=A.data[k+3],b=(c*f+F*2-d-1)*4,A.data[b+0]=x,A.data[b+1]=y,A.data[b+2]=v,A.data[b+3]=T;F*=2}a(A,o,{})};return oy.Kaleidoscope=i,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),oy}var ly={},iP;function Hne(){if(iP)return ly;iP=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.Mask=void 0;const e=jn(),t=Pa(),r=Fn();function n(h,g,x){let y=(x*h.width+g)*4;const v=[];return v.push(h.data[y++],h.data[y++],h.data[y++],h.data[y++]),v}function s(h,g){return Math.sqrt(Math.pow(h[0]-g[0],2)+Math.pow(h[1]-g[1],2)+Math.pow(h[2]-g[2],2))}function a(h){const g=[0,0,0];for(let x=0;x<h.length;x++)g[0]+=h[x][0],g[1]+=h[x][1],g[2]+=h[x][2];return g[0]/=h.length,g[1]/=h.length,g[2]/=h.length,g}function i(h,g){const x=n(h,0,0),y=n(h,h.width-1,0),v=n(h,0,h.height-1),T=n(h,h.width-1,h.height-1),k=g||10;if(s(x,y)<k&&s(y,T)<k&&s(T,v)<k&&s(v,x)<k){const b=a([y,x,T,v]),C=[];for(let E=0;E<h.width*h.height;E++){const j=s(b,[h.data[E*4],h.data[E*4+1],h.data[E*4+2]]);C[E]=j<k?0:255}return C}}function o(h,g){for(let x=0;x<h.width*h.height;x++)h.data[4*x+3]=g[x]}function c(h,g,x){const y=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let C=0;C<g;C++){const E=b*g+C;let j=0;for(let P=0;P<v;P++)for(let A=0;A<v;A++){const M=b+P-T,F=C+A-T;if(M>=0&&M<x&&F>=0&&F<g){const B=M*g+F,V=y[P*v+A];j+=h[B]*V}}k[E]=j===2040?255:0}return k}function u(h,g,x){const y=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let C=0;C<g;C++){const E=b*g+C;let j=0;for(let P=0;P<v;P++)for(let A=0;A<v;A++){const M=b+P-T,F=C+A-T;if(M>=0&&M<x&&F>=0&&F<g){const B=M*g+F,V=y[P*v+A];j+=h[B]*V}}k[E]=j>=1020?255:0}return k}function d(h,g,x){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let C=0;C<g;C++){const E=b*g+C;let j=0;for(let P=0;P<v;P++)for(let A=0;A<v;A++){const M=b+P-T,F=C+A-T;if(M>=0&&M<x&&F>=0&&F<g){const B=M*g+F,V=y[P*v+A];j+=h[B]*V}}k[E]=j}return k}const f=function(h){const g=this.threshold();let x=i(h,g);return x&&(x=c(x,h.width,h.height),x=u(x,h.width,h.height),x=d(x,h.width,h.height),o(h,x)),h};return ly.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ly}var cy={},oP;function Gne(){if(oP)return cy;oP=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.Noise=void 0;const e=jn(),t=Pa(),r=Fn(),n=function(s){const a=this.noise()*255,i=s.data,o=i.length,c=a/2;for(let u=0;u<o;u+=4)i[u+0]+=c-2*c*Math.random(),i[u+1]+=c-2*c*Math.random(),i[u+2]+=c-2*c*Math.random()};return cy.Noise=n,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),cy}var uy={},lP;function Vne(){if(lP)return uy;lP=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.Pixelate=void 0;const e=jn(),t=pa(),r=Pa(),n=Fn(),s=function(a){let i=Math.ceil(this.pixelSize()),o=a.width,c=a.height,u=Math.ceil(o/i),d=Math.ceil(c/i),f=a.data;if(i<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let h=0;h<u;h+=1)for(let g=0;g<d;g+=1){let x=0,y=0,v=0,T=0;const k=h*i,b=k+i,C=g*i,E=C+i;let j=0;for(let P=k;P<b;P+=1)if(!(P>=o))for(let A=C;A<E;A+=1){if(A>=c)continue;const M=(o*A+P)*4;x+=f[M+0],y+=f[M+1],v+=f[M+2],T+=f[M+3],j+=1}x=x/j,y=y/j,v=v/j,T=T/j;for(let P=k;P<b;P+=1)if(!(P>=o))for(let A=C;A<E;A+=1){if(A>=c)continue;const M=(o*A+P)*4;f[M+0]=x,f[M+1]=y,f[M+2]=v,f[M+3]=T}}};return uy.Pixelate=s,e.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),uy}var dy={},cP;function qne(){if(cP)return dy;cP=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.Posterize=void 0;const e=jn(),t=Pa(),r=Fn(),n=function(s){const a=Math.round(this.levels()*254)+1,i=s.data,o=i.length,c=255/a;for(let u=0;u<o;u+=1)i[u]=Math.floor(i[u]/c)*c};return dy.Posterize=n,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),dy}var fy={},uP;function Kne(){if(uP)return fy;uP=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.RGB=void 0;const e=jn(),t=Pa(),r=Fn(),n=function(s){const a=s.data,i=a.length,o=this.red(),c=this.green(),u=this.blue();for(let d=0;d<i;d+=4){const f=(.34*a[d]+.5*a[d+1]+.16*a[d+2])/255;a[d]=f*o,a[d+1]=f*c,a[d+2]=f*u,a[d+3]=a[d+3]}};return fy.RGB=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),fy}var hy={},dP;function Yne(){if(dP)return hy;dP=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.RGBA=void 0;const e=jn(),t=Pa(),r=Fn(),n=function(s){const a=s.data,i=a.length,o=this.red(),c=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<i;f+=4){const h=1-d;a[f]=o*d+a[f]*h,a[f+1]=c*d+a[f+1]*h,a[f+2]=u*d+a[f+2]*h}};return hy.RGBA=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),hy}var my={},fP;function Xne(){if(fP)return my;fP=1,Object.defineProperty(my,"__esModule",{value:!0}),my.Sepia=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=r[s+0],i=r[s+1],o=r[s+2];r[s+0]=Math.min(255,a*.393+i*.769+o*.189),r[s+1]=Math.min(255,a*.349+i*.686+o*.168),r[s+2]=Math.min(255,a*.272+i*.534+o*.131)}};return my.Sepia=e,my}var gy={},hP;function Jne(){if(hP)return gy;hP=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.Solarize=void 0;const e=function(t){const r=t.data,n=t.width,s=t.height,a=n*4;let i=s;do{const o=(i-1)*a;let c=n;do{const u=o+(c-1)*4;let d=r[u],f=r[u+1],h=r[u+2];d>127&&(d=255-d),f>127&&(f=255-f),h>127&&(h=255-h),r[u]=d,r[u+1]=f,r[u+2]=h}while(--c)}while(--i)};return gy.Solarize=e,gy}var py={},mP;function Qne(){if(mP)return py;mP=1,Object.defineProperty(py,"__esModule",{value:!0}),py.Threshold=void 0;const e=jn(),t=Pa(),r=Fn(),n=function(s){const a=this.threshold()*255,i=s.data,o=i.length;for(let c=0;c<o;c+=1)i[c]=i[c]<a?0:255};return py.Threshold=n,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),py}var gP;function Zne(){if(gP)return jx;gP=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.Konva=void 0;const e=Jk(),t=wne(),r=_ne(),n=Sne(),s=kne(),a=Tne(),i=Cne(),o=X$(),c=OC(),u=J$(),d=Nne(),f=Ene(),h=Ane(),g=jne(),x=Q$(),y=Pne(),v=Mne(),T=Fne(),k=Dne(),b=One(),C=Rne(),E=Ine(),j=Lne(),P=Bne(),A=$ne(),M=zne(),F=Une(),B=Wne(),V=Hne(),ee=Gne(),ae=Vne(),Z=qne(),te=Kne(),L=Yne(),K=Xne(),I=Jne(),H=Qne();return jx.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:c.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:h.Sprite,Star:g.Star,Text:x.Text,TextPath:y.TextPath,Transformer:v.Transformer,Wedge:T.Wedge,Filters:{Blur:k.Blur,Brighten:b.Brighten,Contrast:C.Contrast,Emboss:E.Emboss,Enhance:j.Enhance,Grayscale:P.Grayscale,HSL:A.HSL,HSV:M.HSV,Invert:F.Invert,Kaleidoscope:B.Kaleidoscope,Mask:V.Mask,Noise:ee.Noise,Pixelate:ae.Pixelate,Posterize:Z.Posterize,RGB:te.RGB,RGBA:L.RGBA,Sepia:K.Sepia,Solarize:I.Solarize,Threshold:H.Threshold}}),jx}var ese=Hb.exports,pP;function tse(){if(pP)return Hb.exports;pP=1,Object.defineProperty(ese,"__esModule",{value:!0});const e=Zne();return Hb.exports=e.Konva,Hb.exports}var Z$=tse();const rse=Ec(Z$),nse=QL({__proto__:null,default:rse},[Z$]);var Gw={exports:{}},xP;function sse(){return xP||(xP=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=Jk();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=Jk();e.exports=n.Konva})(Gw,Gw.exports)),Gw.exports}var ase=sse();const xv=Ec(ase);var QS={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS,yP;function ise(){return yP||(yP=1,ZS=function(t){var r={},n=Gm(),s=WT(),a=Object.assign;function i(w){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+w,D=1;D<arguments.length;D++)S+="&args[]="+encodeURIComponent(arguments[D]);return"Minified React error #"+w+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),E=Symbol.iterator;function j(w){return w===null||typeof w!="object"?null:(w=E&&w[E]||w["@@iterator"],typeof w=="function"?w:null)}function P(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case d:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case T:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case x:return(w.displayName||"Context")+".Consumer";case g:return(w._context.displayName||"Context")+".Provider";case y:var S=w.render;return w=w.displayName,w||(w=S.displayName||S.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case k:return S=w.displayName||null,S!==null?S:P(w.type)||"Memo";case b:S=w._payload,w=w._init;try{return P(w(S))}catch{}}return null}function A(w){var S=w.type;switch(w.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=S.render,w=w.displayName||w.name||"",S.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(S);case 8:return S===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function M(w){var S=w,D=w;if(w.alternate)for(;S.return;)S=S.return;else{w=S;do S=w,(S.flags&4098)!==0&&(D=S.return),w=S.return;while(w)}return S.tag===3?D:null}function F(w){if(M(w)!==w)throw Error(i(188))}function B(w){var S=w.alternate;if(!S){if(S=M(w),S===null)throw Error(i(188));return S!==w?null:w}for(var D=w,W=S;;){var J=D.return;if(J===null)break;var oe=J.alternate;if(oe===null){if(W=J.return,W!==null){D=W;continue}break}if(J.child===oe.child){for(oe=J.child;oe;){if(oe===D)return F(J),w;if(oe===W)return F(J),S;oe=oe.sibling}throw Error(i(188))}if(D.return!==W.return)D=J,W=oe;else{for(var Ce=!1,tt=J.child;tt;){if(tt===D){Ce=!0,D=J,W=oe;break}if(tt===W){Ce=!0,W=J,D=oe;break}tt=tt.sibling}if(!Ce){for(tt=oe.child;tt;){if(tt===D){Ce=!0,D=oe,W=J;break}if(tt===W){Ce=!0,W=oe,D=J;break}tt=tt.sibling}if(!Ce)throw Error(i(189))}}if(D.alternate!==W)throw Error(i(190))}if(D.tag!==3)throw Error(i(188));return D.stateNode.current===D?w:S}function V(w){return w=B(w),w!==null?ee(w):null}function ee(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var S=ee(w);if(S!==null)return S;w=w.sibling}return null}function ae(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var S=ae(w);if(S!==null)return S}w=w.sibling}return null}var Z=Array.isArray,te=t.getPublicInstance,L=t.getRootHostContext,K=t.getChildHostContext,I=t.prepareForCommit,H=t.resetAfterCommit,U=t.createInstance,R=t.appendInitialChild,z=t.finalizeInitialChildren,G=t.prepareUpdate,X=t.shouldSetTextContent,ne=t.createTextInstance,q=t.scheduleTimeout,se=t.cancelTimeout,ue=t.noTimeout,me=t.isPrimaryRenderer,Ne=t.supportsMutation,ce=t.supportsPersistence,Ue=t.supportsHydration,pe=t.getInstanceFromNode,je=t.preparePortalMount,We=t.getCurrentEventPriority,Me=t.detachDeletedInstance,Nt=t.supportsMicrotasks,$e=t.scheduleMicrotask,St=t.supportsTestSelectors,At=t.findFiberRoot,Bt=t.getBoundingRect,Gt=t.getTextContent,or=t.isHiddenSubtree,yr=t.matchAccessibilityRole,it=t.setFocusIfFocusable,Ve=t.setupIntersectionObserver,at=t.appendChild,pt=t.appendChildToContainer,nt=t.commitTextUpdate,kt=t.commitMount,Wt=t.commitUpdate,rr=t.insertBefore,ur=t.insertInContainerBefore,Nr=t.removeChild,wr=t.removeChildFromContainer,ft=t.resetTextContent,Tt=t.hideInstance,Ot=t.hideTextInstance,he=t.unhideInstance,Ee=t.unhideTextInstance,Ae=t.clearContainer,Fe=t.cloneInstance,xt=t.createContainerChildSet,$t=t.appendChildToContainerChildSet,lr=t.finalizeContainerChildren,Ke=t.replaceContainerChildren,ct=t.cloneHiddenInstance,yt=t.cloneHiddenTextInstance,Jt=t.canHydrateInstance,cr=t.canHydrateTextInstance,Rr=t.canHydrateSuspenseInstance,Hr=t.isSuspenseInstancePending,He=t.isSuspenseInstanceFallback,Ct=t.getSuspenseInstanceFallbackErrorDetails,le=t.registerSuspenseInstanceRetry,ve=t.getNextHydratableSibling,ge=t.getFirstHydratableChild,we=t.getFirstHydratableChildWithinContainer,Te=t.getFirstHydratableChildWithinSuspenseInstance,Se=t.hydrateInstance,Ze=t.hydrateTextInstance,ut=t.hydrateSuspenseInstance,Je=t.getNextHydratableInstanceAfterSuspenseInstance,de=t.commitHydratedContainer,ye=t.commitHydratedSuspenseInstance,Pe=t.clearSuspenseBoundary,Be=t.clearSuspenseBoundaryFromContainer,Ye=t.shouldDeleteUnhydratedTailInstances,ot=t.didNotMatchHydratedContainerTextInstance,wt=t.didNotMatchHydratedTextInstance,er;function Ft(w){if(er===void 0)try{throw Error()}catch(D){var S=D.stack.trim().match(/\n( *(at )?)/);er=S&&S[1]||""}return`
`+er+w}var Yt=!1;function _r(w,S){if(!w||Yt)return"";Yt=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(sr){var W=sr}Reflect.construct(w,[],S)}else{try{S.call()}catch(sr){W=sr}w.call(S.prototype)}else{try{throw Error()}catch(sr){W=sr}w()}}catch(sr){if(sr&&W&&typeof sr.stack=="string"){for(var J=sr.stack.split(`
`),oe=W.stack.split(`
`),Ce=J.length-1,tt=oe.length-1;1<=Ce&&0<=tt&&J[Ce]!==oe[tt];)tt--;for(;1<=Ce&&0<=tt;Ce--,tt--)if(J[Ce]!==oe[tt]){if(Ce!==1||tt!==1)do if(Ce--,tt--,0>tt||J[Ce]!==oe[tt]){var _t=`
`+J[Ce].replace(" at new "," at ");return w.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",w.displayName)),_t}while(1<=Ce&&0<=tt);break}}}finally{Yt=!1,Error.prepareStackTrace=D}return(w=w?w.displayName||w.name:"")?Ft(w):""}var Ir=Object.prototype.hasOwnProperty,ar=[],Ur=-1;function Fr(w){return{current:w}}function $r(w){0>Ur||(w.current=ar[Ur],ar[Ur]=null,Ur--)}function Tr(w,S){Ur++,ar[Ur]=w.current,w.current=S}var Is={},sn=Fr(Is),Jn=Fr(!1),Hn=Is;function os(w,S){var D=w.type.contextTypes;if(!D)return Is;var W=w.stateNode;if(W&&W.__reactInternalMemoizedUnmaskedChildContext===S)return W.__reactInternalMemoizedMaskedChildContext;var J={},oe;for(oe in D)J[oe]=S[oe];return W&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=S,w.__reactInternalMemoizedMaskedChildContext=J),J}function hn(w){return w=w.childContextTypes,w!=null}function ke(){$r(Jn),$r(sn)}function jt(w,S,D){if(sn.current!==Is)throw Error(i(168));Tr(sn,S),Tr(Jn,D)}function Dr(w,S,D){var W=w.stateNode;if(S=S.childContextTypes,typeof W.getChildContext!="function")return D;W=W.getChildContext();for(var J in W)if(!(J in S))throw Error(i(108,A(w)||"Unknown",J));return a({},D,W)}function Jr(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||Is,Hn=sn.current,Tr(sn,w),Tr(Jn,Jn.current),!0}function Gn(w,S,D){var W=w.stateNode;if(!W)throw Error(i(169));D?(w=Dr(w,S,Hn),W.__reactInternalMemoizedMergedChildContext=w,$r(Jn),$r(sn),Tr(sn,w)):$r(Jn),Tr(Jn,D)}var En=Math.clz32?Math.clz32:li,ls=Math.log,Vs=Math.LN2;function li(w){return w>>>=0,w===0?32:31-(ls(w)/Vs|0)|0}var un=64,gl=4194304;function Ie(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function Pt(w,S){var D=w.pendingLanes;if(D===0)return 0;var W=0,J=w.suspendedLanes,oe=w.pingedLanes,Ce=D&268435455;if(Ce!==0){var tt=Ce&~J;tt!==0?W=Ie(tt):(oe&=Ce,oe!==0&&(W=Ie(oe)))}else Ce=D&~J,Ce!==0?W=Ie(Ce):oe!==0&&(W=Ie(oe));if(W===0)return 0;if(S!==0&&S!==W&&(S&J)===0&&(J=W&-W,oe=S&-S,J>=oe||J===16&&(oe&4194240)!==0))return S;if((W&4)!==0&&(W|=D&16),S=w.entangledLanes,S!==0)for(w=w.entanglements,S&=W;0<S;)D=31-En(S),J=1<<D,W|=w[D],S&=~J;return W}function De(w,S){switch(w){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qe(w,S){for(var D=w.suspendedLanes,W=w.pingedLanes,J=w.expirationTimes,oe=w.pendingLanes;0<oe;){var Ce=31-En(oe),tt=1<<Ce,_t=J[Ce];_t===-1?((tt&D)===0||(tt&W)!==0)&&(J[Ce]=De(tt,S)):_t<=S&&(w.expiredLanes|=tt),oe&=~tt}}function Lt(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function gt(){var w=un;return un<<=1,(un&4194240)===0&&(un=64),w}function xr(w){for(var S=[],D=0;31>D;D++)S.push(w);return S}function Et(w,S,D){w.pendingLanes|=S,S!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,S=31-En(S),w[S]=D}function Gr(w,S){var D=w.pendingLanes&~S;w.pendingLanes=S,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=S,w.mutableReadLanes&=S,w.entangledLanes&=S,S=w.entanglements;var W=w.eventTimes;for(w=w.expirationTimes;0<D;){var J=31-En(D),oe=1<<J;S[J]=0,W[J]=-1,w[J]=-1,D&=~oe}}function Pn(w,S){var D=w.entangledLanes|=S;for(w=w.entanglements;D;){var W=31-En(D),J=1<<W;J&S|w[W]&S&&(w[W]|=S),D&=~J}}var ze=0;function hr(w){return w&=-w,1<w?4<w?(w&268435455)!==0?16:536870912:4:1}var nr=s.unstable_scheduleCallback,gs=s.unstable_cancelCallback,pn=s.unstable_shouldYield,an=s.unstable_requestPaint,xn=s.unstable_now,_n=s.unstable_ImmediatePriority,Hl=s.unstable_UserBlockingPriority,Ei=s.unstable_NormalPriority,dh=s.unstable_IdlePriority,fu=null,Zi=null;function P0(w){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(fu,w,void 0,(w.current.flags&128)===128)}catch{}}function og(w,S){return w===S&&(w!==0||1/w===1/S)||w!==w&&S!==S}var pl=typeof Object.is=="function"?Object.is:og,Fc=null,M0=!1,F0=!1;function lg(w){Fc===null?Fc=[w]:Fc.push(w)}function H2(w){M0=!0,lg(w)}function Ga(){if(!F0&&Fc!==null){F0=!0;var w=0,S=ze;try{var D=Fc;for(ze=1;w<D.length;w++){var W=D[w];do W=W(!0);while(W!==null)}Fc=null,M0=!1}catch(J){throw Fc!==null&&(Fc=Fc.slice(w+1)),nr(_n,Ga),J}finally{ze=S,F0=!1}}return null}var hu=[],Dc=0,fh=null,od=0,Ai=[],bo=0,xa=null,eo=1,xl="";function yl(w,S){hu[Dc++]=od,hu[Dc++]=fh,fh=w,od=S}function G2(w,S,D){Ai[bo++]=eo,Ai[bo++]=xl,Ai[bo++]=xa,xa=w;var W=eo;w=xl;var J=32-En(W)-1;W&=~(1<<J),D+=1;var oe=32-En(S)+J;if(30<oe){var Ce=J-J%5;oe=(W&(1<<Ce)-1).toString(32),W>>=Ce,J-=Ce,eo=1<<32-En(S)+J|D<<J|W,xl=oe+w}else eo=1<<oe|D<<J|W,xl=w}function hh(w){w.return!==null&&(yl(w,1),G2(w,1,0))}function mh(w){for(;w===fh;)fh=hu[--Dc],hu[Dc]=null,od=hu[--Dc],hu[Dc]=null;for(;w===xa;)xa=Ai[--bo],Ai[bo]=null,xl=Ai[--bo],Ai[bo]=null,eo=Ai[--bo],Ai[bo]=null}var Va=null,ji=null,ps=!1,gh=!1,vl=null;function V2(w,S){var D=Po(5,null,null,0);D.elementType="DELETED",D.stateNode=S,D.return=w,S=w.deletions,S===null?(w.deletions=[D],w.flags|=16):S.push(D)}function cg(w,S){switch(w.tag){case 5:return S=Jt(S,w.type,w.pendingProps),S!==null?(w.stateNode=S,Va=w,ji=ge(S),!0):!1;case 6:return S=cr(S,w.pendingProps),S!==null?(w.stateNode=S,Va=w,ji=null,!0):!1;case 13:if(S=Rr(S),S!==null){var D=xa!==null?{id:eo,overflow:xl}:null;return w.memoizedState={dehydrated:S,treeContext:D,retryLane:1073741824},D=Po(18,null,null,0),D.stateNode=S,D.return=w,w.child=D,Va=w,ji=null,!0}return!1;default:return!1}}function L1(w){return(w.mode&1)!==0&&(w.flags&128)===0}function B1(w){if(ps){var S=ji;if(S){var D=S;if(!cg(w,S)){if(L1(w))throw Error(i(418));S=ve(D);var W=Va;S&&cg(w,S)?V2(W,D):(w.flags=w.flags&-4097|2,ps=!1,Va=w)}}else{if(L1(w))throw Error(i(418));w.flags=w.flags&-4097|2,ps=!1,Va=w}}}function q2(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;Va=w}function ug(w){if(!Ue||w!==Va)return!1;if(!ps)return q2(w),ps=!0,!1;if(w.tag!==3&&(w.tag!==5||Ye(w.type)&&!X(w.type,w.memoizedProps))){var S=ji;if(S){if(L1(w))throw K2(),Error(i(418));for(;S;)V2(w,S),S=ve(S)}}if(q2(w),w.tag===13){if(!Ue)throw Error(i(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));ji=Je(w)}else ji=Va?ve(w.stateNode):null;return!0}function K2(){for(var w=ji;w;)w=ve(w)}function ld(){Ue&&(ji=Va=null,gh=ps=!1)}function $1(w){vl===null?vl=[w]:vl.push(w)}var q3=o.ReactCurrentBatchConfig;function dg(w,S){if(pl(w,S))return!0;if(typeof w!="object"||w===null||typeof S!="object"||S===null)return!1;var D=Object.keys(w),W=Object.keys(S);if(D.length!==W.length)return!1;for(W=0;W<D.length;W++){var J=D[W];if(!Ir.call(S,J)||!pl(w[J],S[J]))return!1}return!0}function K3(w){switch(w.tag){case 5:return Ft(w.type);case 16:return Ft("Lazy");case 13:return Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 2:case 15:return w=_r(w.type,!1),w;case 11:return w=_r(w.type.render,!1),w;case 1:return w=_r(w.type,!0),w;default:return""}}function cd(w,S,D){if(w=D.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(D._owner){if(D=D._owner,D){if(D.tag!==1)throw Error(i(309));var W=D.stateNode}if(!W)throw Error(i(147,w));var J=W,oe=""+w;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===oe?S.ref:(S=function(Ce){var tt=J.refs;Ce===null?delete tt[oe]:tt[oe]=Ce},S._stringRef=oe,S)}if(typeof w!="string")throw Error(i(284));if(!D._owner)throw Error(i(290,w))}return w}function fg(w,S){throw w=Object.prototype.toString.call(S),Error(i(31,w==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":w))}function Y2(w){var S=w._init;return S(w._payload)}function X2(w){function S(vt,st){if(w){var Mt=vt.deletions;Mt===null?(vt.deletions=[st],vt.flags|=16):Mt.push(st)}}function D(vt,st){if(!w)return null;for(;st!==null;)S(vt,st),st=st.sibling;return null}function W(vt,st){for(vt=new Map;st!==null;)st.key!==null?vt.set(st.key,st):vt.set(st.index,st),st=st.sibling;return vt}function J(vt,st){return vt=Pu(vt,st),vt.index=0,vt.sibling=null,vt}function oe(vt,st,Mt){return vt.index=Mt,w?(Mt=vt.alternate,Mt!==null?(Mt=Mt.index,Mt<st?(vt.flags|=2,st):Mt):(vt.flags|=2,st)):(vt.flags|=1048576,st)}function Ce(vt){return w&&vt.alternate===null&&(vt.flags|=2),vt}function tt(vt,st,Mt,Sr){return st===null||st.tag!==6?(st=sf(Mt,vt.mode,Sr),st.return=vt,st):(st=J(st,Mt),st.return=vt,st)}function _t(vt,st,Mt,Sr){var zr=Mt.type;return zr===d?jr(vt,st,Mt.props.children,Sr,Mt.key):st!==null&&(st.elementType===zr||typeof zr=="object"&&zr!==null&&zr.$$typeof===b&&Y2(zr)===st.type)?(Sr=J(st,Mt.props),Sr.ref=cd(vt,st,Mt),Sr.return=vt,Sr):(Sr=Hg(Mt.type,Mt.key,Mt.props,null,vt.mode,Sr),Sr.ref=cd(vt,st,Mt),Sr.return=vt,Sr)}function sr(vt,st,Mt,Sr){return st===null||st.tag!==4||st.stateNode.containerInfo!==Mt.containerInfo||st.stateNode.implementation!==Mt.implementation?(st=Gg(Mt,vt.mode,Sr),st.return=vt,st):(st=J(st,Mt.children||[]),st.return=vt,st)}function jr(vt,st,Mt,Sr,zr){return st===null||st.tag!==7?(st=Ya(Mt,vt.mode,Sr,zr),st.return=vt,st):(st=J(st,Mt),st.return=vt,st)}function dn(vt,st,Mt){if(typeof st=="string"&&st!==""||typeof st=="number")return st=sf(""+st,vt.mode,Mt),st.return=vt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case c:return Mt=Hg(st.type,st.key,st.props,null,vt.mode,Mt),Mt.ref=cd(vt,null,st),Mt.return=vt,Mt;case u:return st=Gg(st,vt.mode,Mt),st.return=vt,st;case b:var Sr=st._init;return dn(vt,Sr(st._payload),Mt)}if(Z(st)||j(st))return st=Ya(st,vt.mode,Mt,null),st.return=vt,st;fg(vt,st)}return null}function br(vt,st,Mt,Sr){var zr=st!==null?st.key:null;if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return zr!==null?null:tt(vt,st,""+Mt,Sr);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case c:return Mt.key===zr?_t(vt,st,Mt,Sr):null;case u:return Mt.key===zr?sr(vt,st,Mt,Sr):null;case b:return zr=Mt._init,br(vt,st,zr(Mt._payload),Sr)}if(Z(Mt)||j(Mt))return zr!==null?null:jr(vt,st,Mt,Sr,null);fg(vt,Mt)}return null}function fs(vt,st,Mt,Sr,zr){if(typeof Sr=="string"&&Sr!==""||typeof Sr=="number")return vt=vt.get(Mt)||null,tt(st,vt,""+Sr,zr);if(typeof Sr=="object"&&Sr!==null){switch(Sr.$$typeof){case c:return vt=vt.get(Sr.key===null?Mt:Sr.key)||null,_t(st,vt,Sr,zr);case u:return vt=vt.get(Sr.key===null?Mt:Sr.key)||null,sr(st,vt,Sr,zr);case b:var yn=Sr._init;return fs(vt,st,Mt,yn(Sr._payload),zr)}if(Z(Sr)||j(Sr))return vt=vt.get(Mt)||null,jr(st,vt,Sr,zr,null);fg(st,Sr)}return null}function qn(vt,st,Mt,Sr){for(var zr=null,yn=null,fn=st,Mn=st=0,_a=null;fn!==null&&Mn<Mt.length;Mn++){fn.index>Mn?(_a=fn,fn=null):_a=fn.sibling;var An=br(vt,fn,Mt[Mn],Sr);if(An===null){fn===null&&(fn=_a);break}w&&fn&&An.alternate===null&&S(vt,fn),st=oe(An,st,Mn),yn===null?zr=An:yn.sibling=An,yn=An,fn=_a}if(Mn===Mt.length)return D(vt,fn),ps&&yl(vt,Mn),zr;if(fn===null){for(;Mn<Mt.length;Mn++)fn=dn(vt,Mt[Mn],Sr),fn!==null&&(st=oe(fn,st,Mn),yn===null?zr=fn:yn.sibling=fn,yn=fn);return ps&&yl(vt,Mn),zr}for(fn=W(vt,fn);Mn<Mt.length;Mn++)_a=fs(fn,vt,Mn,Mt[Mn],Sr),_a!==null&&(w&&_a.alternate!==null&&fn.delete(_a.key===null?Mn:_a.key),st=oe(_a,st,Mn),yn===null?zr=_a:yn.sibling=_a,yn=_a);return w&&fn.forEach(function(mi){return S(vt,mi)}),ps&&yl(vt,Mn),zr}function Ri(vt,st,Mt,Sr){var zr=j(Mt);if(typeof zr!="function")throw Error(i(150));if(Mt=zr.call(Mt),Mt==null)throw Error(i(151));for(var yn=zr=null,fn=st,Mn=st=0,_a=null,An=Mt.next();fn!==null&&!An.done;Mn++,An=Mt.next()){fn.index>Mn?(_a=fn,fn=null):_a=fn.sibling;var mi=br(vt,fn,An.value,Sr);if(mi===null){fn===null&&(fn=_a);break}w&&fn&&mi.alternate===null&&S(vt,fn),st=oe(mi,st,Mn),yn===null?zr=mi:yn.sibling=mi,yn=mi,fn=_a}if(An.done)return D(vt,fn),ps&&yl(vt,Mn),zr;if(fn===null){for(;!An.done;Mn++,An=Mt.next())An=dn(vt,An.value,Sr),An!==null&&(st=oe(An,st,Mn),yn===null?zr=An:yn.sibling=An,yn=An);return ps&&yl(vt,Mn),zr}for(fn=W(vt,fn);!An.done;Mn++,An=Mt.next())An=fs(fn,vt,Mn,An.value,Sr),An!==null&&(w&&An.alternate!==null&&fn.delete(An.key===null?Mn:An.key),st=oe(An,st,Mn),yn===null?zr=An:yn.sibling=An,yn=An);return w&&fn.forEach(function(Z3){return S(vt,Z3)}),ps&&yl(vt,Mn),zr}function Zl(vt,st,Mt,Sr){if(typeof Mt=="object"&&Mt!==null&&Mt.type===d&&Mt.key===null&&(Mt=Mt.props.children),typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case c:e:{for(var zr=Mt.key,yn=st;yn!==null;){if(yn.key===zr){if(zr=Mt.type,zr===d){if(yn.tag===7){D(vt,yn.sibling),st=J(yn,Mt.props.children),st.return=vt,vt=st;break e}}else if(yn.elementType===zr||typeof zr=="object"&&zr!==null&&zr.$$typeof===b&&Y2(zr)===yn.type){D(vt,yn.sibling),st=J(yn,Mt.props),st.ref=cd(vt,yn,Mt),st.return=vt,vt=st;break e}D(vt,yn);break}else S(vt,yn);yn=yn.sibling}Mt.type===d?(st=Ya(Mt.props.children,vt.mode,Sr,Mt.key),st.return=vt,vt=st):(Sr=Hg(Mt.type,Mt.key,Mt.props,null,vt.mode,Sr),Sr.ref=cd(vt,st,Mt),Sr.return=vt,vt=Sr)}return Ce(vt);case u:e:{for(yn=Mt.key;st!==null;){if(st.key===yn)if(st.tag===4&&st.stateNode.containerInfo===Mt.containerInfo&&st.stateNode.implementation===Mt.implementation){D(vt,st.sibling),st=J(st,Mt.children||[]),st.return=vt,vt=st;break e}else{D(vt,st);break}else S(vt,st);st=st.sibling}st=Gg(Mt,vt.mode,Sr),st.return=vt,vt=st}return Ce(vt);case b:return yn=Mt._init,Zl(vt,st,yn(Mt._payload),Sr)}if(Z(Mt))return qn(vt,st,Mt,Sr);if(j(Mt))return Ri(vt,st,Mt,Sr);fg(vt,Mt)}return typeof Mt=="string"&&Mt!==""||typeof Mt=="number"?(Mt=""+Mt,st!==null&&st.tag===6?(D(vt,st.sibling),st=J(st,Mt),st.return=vt,vt=st):(D(vt,st),st=sf(Mt,vt.mode,Sr),st.return=vt,vt=st),Ce(vt)):D(vt,st)}return Zl}var ud=X2(!0),J2=X2(!1),hg=Fr(null),mg=null,D0=null,z1=null;function U1(){z1=D0=mg=null}function Q2(w,S,D){me?(Tr(hg,S._currentValue),S._currentValue=D):(Tr(hg,S._currentValue2),S._currentValue2=D)}function ph(w){var S=hg.current;$r(hg),me?w._currentValue=S:w._currentValue2=S}function dd(w,S,D){for(;w!==null;){var W=w.alternate;if((w.childLanes&S)!==S?(w.childLanes|=S,W!==null&&(W.childLanes|=S)):W!==null&&(W.childLanes&S)!==S&&(W.childLanes|=S),w===D)break;w=w.return}}function O0(w,S){mg=w,z1=D0=null,w=w.dependencies,w!==null&&w.firstContext!==null&&((w.lanes&S)!==0&&(va=!0),w.firstContext=null)}function _o(w){var S=me?w._currentValue:w._currentValue2;if(z1!==w)if(w={context:w,memoizedValue:S,next:null},D0===null){if(mg===null)throw Error(i(308));D0=w,mg.dependencies={lanes:0,firstContext:w}}else D0=D0.next=w;return S}var mu=null;function gg(w){mu===null?mu=[w]:mu.push(w)}function W1(w,S,D,W){var J=S.interleaved;return J===null?(D.next=D,gg(S)):(D.next=J.next,J.next=D),S.interleaved=D,wl(w,W)}function wl(w,S){w.lanes|=S;var D=w.alternate;for(D!==null&&(D.lanes|=S),D=w,w=w.return;w!==null;)w.childLanes|=S,D=w.alternate,D!==null&&(D.childLanes|=S),D=w,w=w.return;return D.tag===3?D.stateNode:null}var So=!1;function H1(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z2(w,S){w=w.updateQueue,S.updateQueue===w&&(S.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function Oc(w,S){return{eventTime:w,lane:S,tag:0,payload:null,callback:null,next:null}}function Rc(w,S,D){var W=w.updateQueue;if(W===null)return null;if(W=W.shared,(mn&2)!==0){var J=W.pending;return J===null?S.next=S:(S.next=J.next,J.next=S),W.pending=S,wl(w,D)}return J=W.interleaved,J===null?(S.next=S,gg(W)):(S.next=J.next,J.next=S),W.interleaved=S,wl(w,D)}function xh(w,S,D){if(S=S.updateQueue,S!==null&&(S=S.shared,(D&4194240)!==0)){var W=S.lanes;W&=w.pendingLanes,D|=W,S.lanes=D,Pn(w,D)}}function R0(w,S){var D=w.updateQueue,W=w.alternate;if(W!==null&&(W=W.updateQueue,D===W)){var J=null,oe=null;if(D=D.firstBaseUpdate,D!==null){do{var Ce={eventTime:D.eventTime,lane:D.lane,tag:D.tag,payload:D.payload,callback:D.callback,next:null};oe===null?J=oe=Ce:oe=oe.next=Ce,D=D.next}while(D!==null);oe===null?J=oe=S:oe=oe.next=S}else J=oe=S;D={baseState:W.baseState,firstBaseUpdate:J,lastBaseUpdate:oe,shared:W.shared,effects:W.effects},w.updateQueue=D;return}w=D.lastBaseUpdate,w===null?D.firstBaseUpdate=S:w.next=S,D.lastBaseUpdate=S}function gu(w,S,D,W){var J=w.updateQueue;So=!1;var oe=J.firstBaseUpdate,Ce=J.lastBaseUpdate,tt=J.shared.pending;if(tt!==null){J.shared.pending=null;var _t=tt,sr=_t.next;_t.next=null,Ce===null?oe=sr:Ce.next=sr,Ce=_t;var jr=w.alternate;jr!==null&&(jr=jr.updateQueue,tt=jr.lastBaseUpdate,tt!==Ce&&(tt===null?jr.firstBaseUpdate=sr:tt.next=sr,jr.lastBaseUpdate=_t))}if(oe!==null){var dn=J.baseState;Ce=0,jr=sr=_t=null,tt=oe;do{var br=tt.lane,fs=tt.eventTime;if((W&br)===br){jr!==null&&(jr=jr.next={eventTime:fs,lane:0,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null});e:{var qn=w,Ri=tt;switch(br=S,fs=D,Ri.tag){case 1:if(qn=Ri.payload,typeof qn=="function"){dn=qn.call(fs,dn,br);break e}dn=qn;break e;case 3:qn.flags=qn.flags&-65537|128;case 0:if(qn=Ri.payload,br=typeof qn=="function"?qn.call(fs,dn,br):qn,br==null)break e;dn=a({},dn,br);break e;case 2:So=!0}}tt.callback!==null&&tt.lane!==0&&(w.flags|=64,br=J.effects,br===null?J.effects=[tt]:br.push(tt))}else fs={eventTime:fs,lane:br,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null},jr===null?(sr=jr=fs,_t=dn):jr=jr.next=fs,Ce|=br;if(tt=tt.next,tt===null){if(tt=J.shared.pending,tt===null)break;br=tt,tt=br.next,br.next=null,J.lastBaseUpdate=br,J.shared.pending=null}}while(!0);if(jr===null&&(_t=dn),J.baseState=_t,J.firstBaseUpdate=sr,J.lastBaseUpdate=jr,S=J.shared.interleaved,S!==null){J=S;do Ce|=J.lane,J=J.next;while(J!==S)}else oe===null&&(J.shared.lanes=0);zc|=Ce,w.lanes=Ce,w.memoizedState=dn}}function ew(w,S,D){if(w=S.effects,S.effects=null,w!==null)for(S=0;S<w.length;S++){var W=w[S],J=W.callback;if(J!==null){if(W.callback=null,W=D,typeof J!="function")throw Error(i(191,J));J.call(W)}}}var pu={},qo=Fr(pu),I0=Fr(pu),xu=Fr(pu);function Ko(w){if(w===pu)throw Error(i(174));return w}function pg(w,S){Tr(xu,S),Tr(I0,w),Tr(qo,pu),w=L(S),$r(qo),Tr(qo,w)}function fd(){$r(qo),$r(I0),$r(xu)}function G1(w){var S=Ko(xu.current),D=Ko(qo.current);S=K(D,w.type,S),D!==S&&(Tr(I0,w),Tr(qo,S))}function V1(w){I0.current===w&&($r(qo),$r(I0))}var Ns=Fr(0);function xg(w){for(var S=w;S!==null;){if(S.tag===13){var D=S.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||Hr(D)||He(D)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if((S.flags&128)!==0)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var q1=[];function K1(){for(var w=0;w<q1.length;w++){var S=q1[w];me?S._workInProgressVersionPrimary=null:S._workInProgressVersionSecondary=null}q1.length=0}var to=o.ReactCurrentDispatcher,hd=o.ReactCurrentBatchConfig,yu=0,bs=null,ra=null,ya=null,L0=!1,yh=!1,vh=0,B0=0;function Fa(){throw Error(i(321))}function md(w,S){if(S===null)return!1;for(var D=0;D<S.length&&D<w.length;D++)if(!pl(w[D],S[D]))return!1;return!0}function wh(w,S,D,W,J,oe){if(yu=oe,bs=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,to.current=w===null||w.memoizedState===null?sx:ax,w=D(W,J),yh){oe=0;do{if(yh=!1,vh=0,25<=oe)throw Error(i(301));oe+=1,ya=ra=null,S.updateQueue=null,to.current=ix,w=D(W,J)}while(yh)}if(to.current=vd,S=ra!==null&&ra.next!==null,yu=0,ya=ra=bs=null,L0=!1,S)throw Error(i(300));return w}function yg(){var w=vh!==0;return vh=0,w}function ko(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ya===null?bs.memoizedState=ya=w:ya=ya.next=w,ya}function qa(){if(ra===null){var w=bs.alternate;w=w!==null?w.memoizedState:null}else w=ra.next;var S=ya===null?bs.memoizedState:ya.next;if(S!==null)ya=S,ra=w;else{if(w===null)throw Error(i(310));ra=w,w={memoizedState:ra.memoizedState,baseState:ra.baseState,baseQueue:ra.baseQueue,queue:ra.queue,next:null},ya===null?bs.memoizedState=ya=w:ya=ya.next=w}return ya}function gd(w,S){return typeof S=="function"?S(w):S}function vg(w){var S=qa(),D=S.queue;if(D===null)throw Error(i(311));D.lastRenderedReducer=w;var W=ra,J=W.baseQueue,oe=D.pending;if(oe!==null){if(J!==null){var Ce=J.next;J.next=oe.next,oe.next=Ce}W.baseQueue=J=oe,D.pending=null}if(J!==null){oe=J.next,W=W.baseState;var tt=Ce=null,_t=null,sr=oe;do{var jr=sr.lane;if((yu&jr)===jr)_t!==null&&(_t=_t.next={lane:0,action:sr.action,hasEagerState:sr.hasEagerState,eagerState:sr.eagerState,next:null}),W=sr.hasEagerState?sr.eagerState:w(W,sr.action);else{var dn={lane:jr,action:sr.action,hasEagerState:sr.hasEagerState,eagerState:sr.eagerState,next:null};_t===null?(tt=_t=dn,Ce=W):_t=_t.next=dn,bs.lanes|=jr,zc|=jr}sr=sr.next}while(sr!==null&&sr!==oe);_t===null?Ce=W:_t.next=tt,pl(W,S.memoizedState)||(va=!0),S.memoizedState=W,S.baseState=Ce,S.baseQueue=_t,D.lastRenderedState=W}if(w=D.interleaved,w!==null){J=w;do oe=J.lane,bs.lanes|=oe,zc|=oe,J=J.next;while(J!==w)}else J===null&&(D.lanes=0);return[S.memoizedState,D.dispatch]}function $0(w){var S=qa(),D=S.queue;if(D===null)throw Error(i(311));D.lastRenderedReducer=w;var W=D.dispatch,J=D.pending,oe=S.memoizedState;if(J!==null){D.pending=null;var Ce=J=J.next;do oe=w(oe,Ce.action),Ce=Ce.next;while(Ce!==J);pl(oe,S.memoizedState)||(va=!0),S.memoizedState=oe,S.baseQueue===null&&(S.baseState=oe),D.lastRenderedState=oe}return[oe,W]}function Y1(){}function X1(w,S){var D=bs,W=qa(),J=S(),oe=!pl(W.memoizedState,J);if(oe&&(W.memoizedState=J,va=!0),W=W.queue,_g(Z1.bind(null,D,W,w),[w]),W.getSnapshot!==S||oe||ya!==null&&ya.memoizedState.tag&1){if(D.flags|=2048,pd(9,Q1.bind(null,D,W,J,S),void 0,null),Zn===null)throw Error(i(349));(yu&30)!==0||J1(D,S,J)}return J}function J1(w,S,D){w.flags|=16384,w={getSnapshot:S,value:D},S=bs.updateQueue,S===null?(S={lastEffect:null,stores:null},bs.updateQueue=S,S.stores=[w]):(D=S.stores,D===null?S.stores=[w]:D.push(w))}function Q1(w,S,D,W){S.value=D,S.getSnapshot=W,ex(S)&&Ic(w)}function Z1(w,S,D){return D(function(){ex(S)&&Ic(w)})}function ex(w){var S=w.getSnapshot;w=w.value;try{var D=S();return!pl(w,D)}catch{return!0}}function Ic(w){var S=wl(w,1);S!==null&&fi(S,w,1,-1)}function wg(w){var S=ko();return typeof w=="function"&&(w=w()),S.memoizedState=S.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:w},S.queue=w,w=w.dispatch=Y3.bind(null,bs,w),[S.memoizedState,w]}function pd(w,S,D,W){return w={tag:w,create:S,destroy:D,deps:W,next:null},S=bs.updateQueue,S===null?(S={lastEffect:null,stores:null},bs.updateQueue=S,S.lastEffect=w.next=w):(D=S.lastEffect,D===null?S.lastEffect=w.next=w:(W=D.next,D.next=w,w.next=W,S.lastEffect=w)),w}function tw(){return qa().memoizedState}function bg(w,S,D,W){var J=ko();bs.flags|=w,J.memoizedState=pd(1|S,D,void 0,W===void 0?null:W)}function vu(w,S,D,W){var J=qa();W=W===void 0?null:W;var oe=void 0;if(ra!==null){var Ce=ra.memoizedState;if(oe=Ce.destroy,W!==null&&md(W,Ce.deps)){J.memoizedState=pd(S,D,oe,W);return}}bs.flags|=w,J.memoizedState=pd(1|S,D,oe,W)}function rw(w,S){return bg(8390656,8,w,S)}function _g(w,S){return vu(2048,8,w,S)}function tx(w,S){return vu(4,2,w,S)}function cs(w,S){return vu(4,4,w,S)}function Sg(w,S){if(typeof S=="function")return w=w(),S(w),function(){S(null)};if(S!=null)return w=w(),S.current=w,function(){S.current=null}}function bh(w,S,D){return D=D!=null?D.concat([w]):null,vu(4,4,Sg.bind(null,S,w),D)}function xd(){}function rx(w,S){var D=qa();S=S===void 0?null:S;var W=D.memoizedState;return W!==null&&S!==null&&md(S,W[1])?W[0]:(D.memoizedState=[w,S],w)}function kg(w,S){var D=qa();S=S===void 0?null:S;var W=D.memoizedState;return W!==null&&S!==null&&md(S,W[1])?W[0]:(w=w(),D.memoizedState=[w,S],w)}function z0(w,S,D){return(yu&21)===0?(w.baseState&&(w.baseState=!1,va=!0),w.memoizedState=D):(pl(D,S)||(D=gt(),bs.lanes|=D,zc|=D,w.baseState=!0),S)}function Tg(w,S){var D=ze;ze=D!==0&&4>D?D:4,w(!0);var W=hd.transition;hd.transition={};try{w(!1),S()}finally{ze=D,hd.transition=W}}function yd(){return qa().memoizedState}function nw(w,S,D){var W=ba(w);if(D={lane:W,action:D,hasEagerState:!1,eagerState:null,next:null},sw(w))nx(S,D);else if(D=W1(w,S,D,W),D!==null){var J=xs();fi(D,w,W,J),_h(D,S,W)}}function Y3(w,S,D){var W=ba(w),J={lane:W,action:D,hasEagerState:!1,eagerState:null,next:null};if(sw(w))nx(S,J);else{var oe=w.alternate;if(w.lanes===0&&(oe===null||oe.lanes===0)&&(oe=S.lastRenderedReducer,oe!==null))try{var Ce=S.lastRenderedState,tt=oe(Ce,D);if(J.hasEagerState=!0,J.eagerState=tt,pl(tt,Ce)){var _t=S.interleaved;_t===null?(J.next=J,gg(S)):(J.next=_t.next,_t.next=J),S.interleaved=J;return}}catch{}finally{}D=W1(w,S,J,W),D!==null&&(J=xs(),fi(D,w,W,J),_h(D,S,W))}}function sw(w){var S=w.alternate;return w===bs||S!==null&&S===bs}function nx(w,S){yh=L0=!0;var D=w.pending;D===null?S.next=S:(S.next=D.next,D.next=S),w.pending=S}function _h(w,S,D){if((D&4194240)!==0){var W=S.lanes;W&=w.pendingLanes,D|=W,S.lanes=D,Pn(w,D)}}var vd={readContext:_o,useCallback:Fa,useContext:Fa,useEffect:Fa,useImperativeHandle:Fa,useInsertionEffect:Fa,useLayoutEffect:Fa,useMemo:Fa,useReducer:Fa,useRef:Fa,useState:Fa,useDebugValue:Fa,useDeferredValue:Fa,useTransition:Fa,useMutableSource:Fa,useSyncExternalStore:Fa,useId:Fa,unstable_isNewReconciler:!1},sx={readContext:_o,useCallback:function(w,S){return ko().memoizedState=[w,S===void 0?null:S],w},useContext:_o,useEffect:rw,useImperativeHandle:function(w,S,D){return D=D!=null?D.concat([w]):null,bg(4194308,4,Sg.bind(null,S,w),D)},useLayoutEffect:function(w,S){return bg(4194308,4,w,S)},useInsertionEffect:function(w,S){return bg(4,2,w,S)},useMemo:function(w,S){var D=ko();return S=S===void 0?null:S,w=w(),D.memoizedState=[w,S],w},useReducer:function(w,S,D){var W=ko();return S=D!==void 0?D(S):S,W.memoizedState=W.baseState=S,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:S},W.queue=w,w=w.dispatch=nw.bind(null,bs,w),[W.memoizedState,w]},useRef:function(w){var S=ko();return w={current:w},S.memoizedState=w},useState:wg,useDebugValue:xd,useDeferredValue:function(w){return ko().memoizedState=w},useTransition:function(){var w=wg(!1),S=w[0];return w=Tg.bind(null,w[1]),ko().memoizedState=w,[S,w]},useMutableSource:function(){},useSyncExternalStore:function(w,S,D){var W=bs,J=ko();if(ps){if(D===void 0)throw Error(i(407));D=D()}else{if(D=S(),Zn===null)throw Error(i(349));(yu&30)!==0||J1(W,S,D)}J.memoizedState=D;var oe={value:D,getSnapshot:S};return J.queue=oe,rw(Z1.bind(null,W,oe,w),[w]),W.flags|=2048,pd(9,Q1.bind(null,W,oe,D,S),void 0,null),D},useId:function(){var w=ko(),S=Zn.identifierPrefix;if(ps){var D=xl,W=eo;D=(W&~(1<<32-En(W)-1)).toString(32)+D,S=":"+S+"R"+D,D=vh++,0<D&&(S+="H"+D.toString(32)),S+=":"}else D=B0++,S=":"+S+"r"+D.toString(32)+":";return w.memoizedState=S},unstable_isNewReconciler:!1},ax={readContext:_o,useCallback:rx,useContext:_o,useEffect:_g,useImperativeHandle:bh,useInsertionEffect:tx,useLayoutEffect:cs,useMemo:kg,useReducer:vg,useRef:tw,useState:function(){return vg(gd)},useDebugValue:xd,useDeferredValue:function(w){var S=qa();return z0(S,ra.memoizedState,w)},useTransition:function(){var w=vg(gd)[0],S=qa().memoizedState;return[w,S]},useMutableSource:Y1,useSyncExternalStore:X1,useId:yd,unstable_isNewReconciler:!1},ix={readContext:_o,useCallback:rx,useContext:_o,useEffect:_g,useImperativeHandle:bh,useInsertionEffect:tx,useLayoutEffect:cs,useMemo:kg,useReducer:$0,useRef:tw,useState:function(){return $0(gd)},useDebugValue:xd,useDeferredValue:function(w){var S=qa();return ra===null?S.memoizedState=w:z0(S,ra.memoizedState,w)},useTransition:function(){var w=$0(gd)[0],S=qa().memoizedState;return[w,S]},useMutableSource:Y1,useSyncExternalStore:X1,useId:yd,unstable_isNewReconciler:!1};function To(w,S){if(w&&w.defaultProps){S=a({},S),w=w.defaultProps;for(var D in w)S[D]===void 0&&(S[D]=w[D]);return S}return S}function ox(w,S,D,W){S=w.memoizedState,D=D(W,S),D=D==null?S:a({},S,D),w.memoizedState=D,w.lanes===0&&(w.updateQueue.baseState=D)}var Sh={isMounted:function(w){return(w=w._reactInternals)?M(w)===w:!1},enqueueSetState:function(w,S,D){w=w._reactInternals;var W=xs(),J=ba(w),oe=Oc(W,J);oe.payload=S,D!=null&&(oe.callback=D),S=Rc(w,oe,J),S!==null&&(fi(S,w,J,W),xh(S,w,J))},enqueueReplaceState:function(w,S,D){w=w._reactInternals;var W=xs(),J=ba(w),oe=Oc(W,J);oe.tag=1,oe.payload=S,D!=null&&(oe.callback=D),S=Rc(w,oe,J),S!==null&&(fi(S,w,J,W),xh(S,w,J))},enqueueForceUpdate:function(w,S){w=w._reactInternals;var D=xs(),W=ba(w),J=Oc(D,W);J.tag=2,S!=null&&(J.callback=S),S=Rc(w,J,W),S!==null&&(fi(S,w,W,D),xh(S,w,W))}};function aw(w,S,D,W,J,oe,Ce){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(W,oe,Ce):S.prototype&&S.prototype.isPureReactComponent?!dg(D,W)||!dg(J,oe):!0}function iw(w,S,D){var W=!1,J=Is,oe=S.contextType;return typeof oe=="object"&&oe!==null?oe=_o(oe):(J=hn(S)?Hn:sn.current,W=S.contextTypes,oe=(W=W!=null)?os(w,J):Is),S=new S(D,oe),w.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Sh,w.stateNode=S,S._reactInternals=w,W&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=J,w.__reactInternalMemoizedMaskedChildContext=oe),S}function Cg(w,S,D,W){w=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(D,W),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(D,W),S.state!==w&&Sh.enqueueReplaceState(S,S.state,null)}function Gl(w,S,D,W){var J=w.stateNode;J.props=D,J.state=w.memoizedState,J.refs={},H1(w);var oe=S.contextType;typeof oe=="object"&&oe!==null?J.context=_o(oe):(oe=hn(S)?Hn:sn.current,J.context=os(w,oe)),J.state=w.memoizedState,oe=S.getDerivedStateFromProps,typeof oe=="function"&&(ox(w,S,oe,D),J.state=w.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(S=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),S!==J.state&&Sh.enqueueReplaceState(J,J.state,null),gu(w,D,J,W),J.state=w.memoizedState),typeof J.componentDidMount=="function"&&(w.flags|=4194308)}function wd(w,S){try{var D="",W=S;do D+=K3(W),W=W.return;while(W);var J=D}catch(oe){J=`
Error generating stack: `+oe.message+`
`+oe.stack}return{value:w,source:S,stack:J,digest:null}}function wu(w,S,D){return{value:w,source:null,stack:D??null,digest:S??null}}function Yo(w,S){try{console.error(S.value)}catch(D){setTimeout(function(){throw D})}}var kh=typeof WeakMap=="function"?WeakMap:Map;function Vl(w,S,D){D=Oc(-1,D),D.tag=3,D.payload={element:null};var W=S.value;return D.callback=function(){Bs||(Bs=!0,na=W),Yo(w,S)},D}function Ng(w,S,D){D=Oc(-1,D),D.tag=3;var W=w.type.getDerivedStateFromError;if(typeof W=="function"){var J=S.value;D.payload=function(){return W(J)},D.callback=function(){Yo(w,S)}}var oe=w.stateNode;return oe!==null&&typeof oe.componentDidCatch=="function"&&(D.callback=function(){Yo(w,S),typeof W!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var Ce=S.stack;this.componentDidCatch(S.value,{componentStack:Ce!==null?Ce:""})}),D}function ow(w,S,D){var W=w.pingCache;if(W===null){W=w.pingCache=new kh;var J=new Set;W.set(S,J)}else J=W.get(S),J===void 0&&(J=new Set,W.set(S,J));J.has(D)||(J.add(D),w=gw.bind(null,w,S,D),S.then(w,w))}function lw(w){do{var S;if((S=w.tag===13)&&(S=w.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return w;w=w.return}while(w!==null);return null}function bu(w,S,D,W,J){return(w.mode&1)===0?(w===S?w.flags|=65536:(w.flags|=128,D.flags|=131072,D.flags&=-52805,D.tag===1&&(D.alternate===null?D.tag=17:(S=Oc(-1,1),S.tag=2,Rc(D,S,1))),D.lanes|=1),w):(w.flags|=65536,w.lanes=J,w)}var Th=o.ReactCurrentOwner,va=!1;function Da(w,S,D,W){S.child=w===null?J2(S,null,D,W):ud(S,w.child,D,W)}function Eg(w,S,D,W,J){D=D.render;var oe=S.ref;return O0(S,J),W=wh(w,S,D,W,oe,J),D=yg(),w!==null&&!va?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~J,Bc(w,S,J)):(ps&&D&&hh(S),S.flags|=1,Da(w,S,W,J),S.child)}function bd(w,S,D,W,J){if(w===null){var oe=D.type;return typeof oe=="function"&&!rf(oe)&&oe.defaultProps===void 0&&D.compare===null&&D.defaultProps===void 0?(S.tag=15,S.type=oe,Lc(w,S,oe,W,J)):(w=Hg(D.type,null,W,S,S.mode,J),w.ref=S.ref,w.return=S,S.child=w)}if(oe=w.child,(w.lanes&J)===0){var Ce=oe.memoizedProps;if(D=D.compare,D=D!==null?D:dg,D(Ce,W)&&w.ref===S.ref)return Bc(w,S,J)}return S.flags|=1,w=Pu(oe,W),w.ref=S.ref,w.return=S,S.child=w}function Lc(w,S,D,W,J){if(w!==null){var oe=w.memoizedProps;if(dg(oe,W)&&w.ref===S.ref)if(va=!1,S.pendingProps=W=oe,(w.lanes&J)!==0)(w.flags&131072)!==0&&(va=!0);else return S.lanes=w.lanes,Bc(w,S,J)}return ql(w,S,D,W,J)}function us(w,S,D){var W=S.pendingProps,J=W.children,oe=w!==null?w.memoizedState:null;if(W.mode==="hidden")if((S.mode&1)===0)S.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Nu,wa),wa|=D;else{if((D&1073741824)===0)return w=oe!==null?oe.baseLanes|D:D,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:w,cachePool:null,transitions:null},S.updateQueue=null,Tr(Nu,wa),wa|=w,null;S.memoizedState={baseLanes:0,cachePool:null,transitions:null},W=oe!==null?oe.baseLanes:D,Tr(Nu,wa),wa|=W}else oe!==null?(W=oe.baseLanes|D,S.memoizedState=null):W=D,Tr(Nu,wa),wa|=W;return Da(w,S,J,D),S.child}function Qn(w,S){var D=S.ref;(w===null&&D!==null||w!==null&&w.ref!==D)&&(S.flags|=512,S.flags|=2097152)}function ql(w,S,D,W,J){var oe=hn(D)?Hn:sn.current;return oe=os(S,oe),O0(S,J),D=wh(w,S,D,W,oe,J),W=yg(),w!==null&&!va?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~J,Bc(w,S,J)):(ps&&W&&hh(S),S.flags|=1,Da(w,S,D,J),S.child)}function Ka(w,S,D,W,J){if(hn(D)){var oe=!0;Jr(S)}else oe=!1;if(O0(S,J),S.stateNode===null)Ch(w,S),iw(S,D,W),Gl(S,D,W,J),W=!0;else if(w===null){var Ce=S.stateNode,tt=S.memoizedProps;Ce.props=tt;var _t=Ce.context,sr=D.contextType;typeof sr=="object"&&sr!==null?sr=_o(sr):(sr=hn(D)?Hn:sn.current,sr=os(S,sr));var jr=D.getDerivedStateFromProps,dn=typeof jr=="function"||typeof Ce.getSnapshotBeforeUpdate=="function";dn||typeof Ce.UNSAFE_componentWillReceiveProps!="function"&&typeof Ce.componentWillReceiveProps!="function"||(tt!==W||_t!==sr)&&Cg(S,Ce,W,sr),So=!1;var br=S.memoizedState;Ce.state=br,gu(S,W,Ce,J),_t=S.memoizedState,tt!==W||br!==_t||Jn.current||So?(typeof jr=="function"&&(ox(S,D,jr,W),_t=S.memoizedState),(tt=So||aw(S,D,tt,W,br,_t,sr))?(dn||typeof Ce.UNSAFE_componentWillMount!="function"&&typeof Ce.componentWillMount!="function"||(typeof Ce.componentWillMount=="function"&&Ce.componentWillMount(),typeof Ce.UNSAFE_componentWillMount=="function"&&Ce.UNSAFE_componentWillMount()),typeof Ce.componentDidMount=="function"&&(S.flags|=4194308)):(typeof Ce.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=W,S.memoizedState=_t),Ce.props=W,Ce.state=_t,Ce.context=sr,W=tt):(typeof Ce.componentDidMount=="function"&&(S.flags|=4194308),W=!1)}else{Ce=S.stateNode,Z2(w,S),tt=S.memoizedProps,sr=S.type===S.elementType?tt:To(S.type,tt),Ce.props=sr,dn=S.pendingProps,br=Ce.context,_t=D.contextType,typeof _t=="object"&&_t!==null?_t=_o(_t):(_t=hn(D)?Hn:sn.current,_t=os(S,_t));var fs=D.getDerivedStateFromProps;(jr=typeof fs=="function"||typeof Ce.getSnapshotBeforeUpdate=="function")||typeof Ce.UNSAFE_componentWillReceiveProps!="function"&&typeof Ce.componentWillReceiveProps!="function"||(tt!==dn||br!==_t)&&Cg(S,Ce,W,_t),So=!1,br=S.memoizedState,Ce.state=br,gu(S,W,Ce,J);var qn=S.memoizedState;tt!==dn||br!==qn||Jn.current||So?(typeof fs=="function"&&(ox(S,D,fs,W),qn=S.memoizedState),(sr=So||aw(S,D,sr,W,br,qn,_t)||!1)?(jr||typeof Ce.UNSAFE_componentWillUpdate!="function"&&typeof Ce.componentWillUpdate!="function"||(typeof Ce.componentWillUpdate=="function"&&Ce.componentWillUpdate(W,qn,_t),typeof Ce.UNSAFE_componentWillUpdate=="function"&&Ce.UNSAFE_componentWillUpdate(W,qn,_t)),typeof Ce.componentDidUpdate=="function"&&(S.flags|=4),typeof Ce.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof Ce.componentDidUpdate!="function"||tt===w.memoizedProps&&br===w.memoizedState||(S.flags|=4),typeof Ce.getSnapshotBeforeUpdate!="function"||tt===w.memoizedProps&&br===w.memoizedState||(S.flags|=1024),S.memoizedProps=W,S.memoizedState=qn),Ce.props=W,Ce.state=qn,Ce.context=_t,W=sr):(typeof Ce.componentDidUpdate!="function"||tt===w.memoizedProps&&br===w.memoizedState||(S.flags|=4),typeof Ce.getSnapshotBeforeUpdate!="function"||tt===w.memoizedProps&&br===w.memoizedState||(S.flags|=1024),W=!1)}return ci(w,S,D,W,oe,J)}function ci(w,S,D,W,J,oe){Qn(w,S);var Ce=(S.flags&128)!==0;if(!W&&!Ce)return J&&Gn(S,D,!1),Bc(w,S,oe);W=S.stateNode,Th.current=S;var tt=Ce&&typeof D.getDerivedStateFromError!="function"?null:W.render();return S.flags|=1,w!==null&&Ce?(S.child=ud(S,w.child,null,oe),S.child=ud(S,null,tt,oe)):Da(w,S,tt,oe),S.memoizedState=W.state,J&&Gn(S,D,!0),S.child}function _u(w){var S=w.stateNode;S.pendingContext?jt(w,S.pendingContext,S.pendingContext!==S.context):S.context&&jt(w,S.context,!1),pg(w,S.containerInfo)}function _d(w,S,D,W,J){return ld(),$1(J),S.flags|=256,Da(w,S,D,W),S.child}var ui={dehydrated:null,treeContext:null,retryLane:0};function U0(w){return{baseLanes:w,cachePool:null,transitions:null}}function lx(w,S,D){var W=S.pendingProps,J=Ns.current,oe=!1,Ce=(S.flags&128)!==0,tt;if((tt=Ce)||(tt=w!==null&&w.memoizedState===null?!1:(J&2)!==0),tt?(oe=!0,S.flags&=-129):(w===null||w.memoizedState!==null)&&(J|=1),Tr(Ns,J&1),w===null)return B1(S),w=S.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?((S.mode&1)===0?S.lanes=1:He(w)?S.lanes=8:S.lanes=1073741824,null):(Ce=W.children,w=W.fallback,oe?(W=S.mode,oe=S.child,Ce={mode:"hidden",children:Ce},(W&1)===0&&oe!==null?(oe.childLanes=0,oe.pendingProps=Ce):oe=nf(Ce,W,0,null),w=Ya(w,W,D,null),oe.return=S,w.return=S,oe.sibling=w,S.child=oe,S.child.memoizedState=U0(D),S.memoizedState=ui,w):Ag(S,Ce));if(J=w.memoizedState,J!==null&&(tt=J.dehydrated,tt!==null))return cw(w,S,Ce,W,tt,J,D);if(oe){oe=W.fallback,Ce=S.mode,J=w.child,tt=J.sibling;var _t={mode:"hidden",children:W.children};return(Ce&1)===0&&S.child!==J?(W=S.child,W.childLanes=0,W.pendingProps=_t,S.deletions=null):(W=Pu(J,_t),W.subtreeFlags=J.subtreeFlags&14680064),tt!==null?oe=Pu(tt,oe):(oe=Ya(oe,Ce,D,null),oe.flags|=2),oe.return=S,W.return=S,W.sibling=oe,S.child=W,W=oe,oe=S.child,Ce=w.child.memoizedState,Ce=Ce===null?U0(D):{baseLanes:Ce.baseLanes|D,cachePool:null,transitions:Ce.transitions},oe.memoizedState=Ce,oe.childLanes=w.childLanes&~D,S.memoizedState=ui,W}return oe=w.child,w=oe.sibling,W=Pu(oe,{mode:"visible",children:W.children}),(S.mode&1)===0&&(W.lanes=D),W.return=S,W.sibling=null,w!==null&&(D=S.deletions,D===null?(S.deletions=[w],S.flags|=16):D.push(w)),S.child=W,S.memoizedState=null,W}function Ag(w,S){return S=nf({mode:"visible",children:S},w.mode,0,null),S.return=w,w.child=S}function Sd(w,S,D,W){return W!==null&&$1(W),ud(S,w.child,null,D),w=Ag(S,S.pendingProps.children),w.flags|=2,S.memoizedState=null,w}function cw(w,S,D,W,J,oe,Ce){if(D)return S.flags&256?(S.flags&=-257,W=wu(Error(i(422))),Sd(w,S,Ce,W)):S.memoizedState!==null?(S.child=w.child,S.flags|=128,null):(oe=W.fallback,J=S.mode,W=nf({mode:"visible",children:W.children},J,0,null),oe=Ya(oe,J,Ce,null),oe.flags|=2,W.return=S,oe.return=S,W.sibling=oe,S.child=W,(S.mode&1)!==0&&ud(S,w.child,null,Ce),S.child.memoizedState=U0(Ce),S.memoizedState=ui,oe);if((S.mode&1)===0)return Sd(w,S,Ce,null);if(He(J))return W=Ct(J).digest,oe=Error(i(419)),W=wu(oe,W,void 0),Sd(w,S,Ce,W);if(D=(Ce&w.childLanes)!==0,va||D){if(W=Zn,W!==null){switch(Ce&-Ce){case 4:J=2;break;case 16:J=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:J=32;break;case 536870912:J=268435456;break;default:J=0}J=(J&(W.suspendedLanes|Ce))!==0?0:J,J!==0&&J!==oe.retryLane&&(oe.retryLane=J,wl(w,J),fi(W,w,J,-1))}return tf(),W=wu(Error(i(421))),Sd(w,S,Ce,W)}return Hr(J)?(S.flags|=128,S.child=w.child,S=xw.bind(null,w),le(J,S),null):(w=oe.treeContext,Ue&&(ji=Te(J),Va=S,ps=!0,vl=null,gh=!1,w!==null&&(Ai[bo++]=eo,Ai[bo++]=xl,Ai[bo++]=xa,eo=w.id,xl=w.overflow,xa=S)),S=Ag(S,W.children),S.flags|=4096,S)}function Kl(w,S,D){w.lanes|=S;var W=w.alternate;W!==null&&(W.lanes|=S),dd(w.return,S,D)}function W0(w,S,D,W,J){var oe=w.memoizedState;oe===null?w.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:W,tail:D,tailMode:J}:(oe.isBackwards=S,oe.rendering=null,oe.renderingStartTime=0,oe.last=W,oe.tail=D,oe.tailMode=J)}function jg(w,S,D){var W=S.pendingProps,J=W.revealOrder,oe=W.tail;if(Da(w,S,W.children,D),W=Ns.current,(W&2)!==0)W=W&1|2,S.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=S.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&Kl(w,D,S);else if(w.tag===19)Kl(w,D,S);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===S)break e;for(;w.sibling===null;){if(w.return===null||w.return===S)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}W&=1}if(Tr(Ns,W),(S.mode&1)===0)S.memoizedState=null;else switch(J){case"forwards":for(D=S.child,J=null;D!==null;)w=D.alternate,w!==null&&xg(w)===null&&(J=D),D=D.sibling;D=J,D===null?(J=S.child,S.child=null):(J=D.sibling,D.sibling=null),W0(S,!1,J,D,oe);break;case"backwards":for(D=null,J=S.child,S.child=null;J!==null;){if(w=J.alternate,w!==null&&xg(w)===null){S.child=J;break}w=J.sibling,J.sibling=D,D=J,J=w}W0(S,!0,D,null,oe);break;case"together":W0(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function Ch(w,S){(S.mode&1)===0&&w!==null&&(w.alternate=null,S.alternate=null,S.flags|=2)}function Bc(w,S,D){if(w!==null&&(S.dependencies=w.dependencies),zc|=S.lanes,(D&S.childLanes)===0)return null;if(w!==null&&S.child!==w.child)throw Error(i(153));if(S.child!==null){for(w=S.child,D=Pu(w,w.pendingProps),S.child=D,D.return=S;w.sibling!==null;)w=w.sibling,D=D.sibling=Pu(w,w.pendingProps),D.return=S;D.sibling=null}return S.child}function Su(w,S,D){switch(S.tag){case 3:_u(S),ld();break;case 5:G1(S);break;case 1:hn(S.type)&&Jr(S);break;case 4:pg(S,S.stateNode.containerInfo);break;case 10:Q2(S,S.type._context,S.memoizedProps.value);break;case 13:var W=S.memoizedState;if(W!==null)return W.dehydrated!==null?(Tr(Ns,Ns.current&1),S.flags|=128,null):(D&S.child.childLanes)!==0?lx(w,S,D):(Tr(Ns,Ns.current&1),w=Bc(w,S,D),w!==null?w.sibling:null);Tr(Ns,Ns.current&1);break;case 19:if(W=(D&S.childLanes)!==0,(w.flags&128)!==0){if(W)return jg(w,S,D);S.flags|=128}var J=S.memoizedState;if(J!==null&&(J.rendering=null,J.tail=null,J.lastEffect=null),Tr(Ns,Ns.current),W)break;return null;case 22:case 23:return S.lanes=0,us(w,S,D)}return Bc(w,S,D)}function Pi(w){w.flags|=4}function kd(w,S){if(w!==null&&w.child===S.child)return!0;if((S.flags&16)!==0)return!1;for(w=S.child;w!==null;){if((w.flags&12854)!==0||(w.subtreeFlags&12854)!==0)return!1;w=w.sibling}return!0}var ku,Tu,Mi,Fi;if(Ne)ku=function(w,S){for(var D=S.child;D!==null;){if(D.tag===5||D.tag===6)R(w,D.stateNode);else if(D.tag!==4&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===S)break;for(;D.sibling===null;){if(D.return===null||D.return===S)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},Tu=function(){},Mi=function(w,S,D,W,J){if(w=w.memoizedProps,w!==W){var oe=S.stateNode,Ce=Ko(qo.current);D=G(oe,D,w,W,J,Ce),(S.updateQueue=D)&&Pi(S)}},Fi=function(w,S,D,W){D!==W&&Pi(S)};else if(ce){ku=function(w,S,D,W){for(var J=S.child;J!==null;){if(J.tag===5){var oe=J.stateNode;D&&W&&(oe=ct(oe,J.type,J.memoizedProps,J)),R(w,oe)}else if(J.tag===6)oe=J.stateNode,D&&W&&(oe=yt(oe,J.memoizedProps,J)),R(w,oe);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)oe=J.child,oe!==null&&(oe.return=J),ku(w,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===S)break;for(;J.sibling===null;){if(J.return===null||J.return===S)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};var Cu=function(w,S,D,W){for(var J=S.child;J!==null;){if(J.tag===5){var oe=J.stateNode;D&&W&&(oe=ct(oe,J.type,J.memoizedProps,J)),$t(w,oe)}else if(J.tag===6)oe=J.stateNode,D&&W&&(oe=yt(oe,J.memoizedProps,J)),$t(w,oe);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)oe=J.child,oe!==null&&(oe.return=J),Cu(w,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===S)break;for(;J.sibling===null;){if(J.return===null||J.return===S)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};Tu=function(w,S){var D=S.stateNode;if(!kd(w,S)){w=D.containerInfo;var W=xt(w);Cu(W,S,!1,!1),D.pendingChildren=W,Pi(S),lr(w,W)}},Mi=function(w,S,D,W,J){var oe=w.stateNode,Ce=w.memoizedProps;if((w=kd(w,S))&&Ce===W)S.stateNode=oe;else{var tt=S.stateNode,_t=Ko(qo.current),sr=null;Ce!==W&&(sr=G(tt,D,Ce,W,J,_t)),w&&sr===null?S.stateNode=oe:(oe=Fe(oe,sr,D,Ce,W,S,w,tt),z(oe,D,W,J,_t)&&Pi(S),S.stateNode=oe,w?Pi(S):ku(oe,S,!1,!1))}},Fi=function(w,S,D,W){D!==W?(w=Ko(xu.current),D=Ko(qo.current),S.stateNode=ne(W,w,D,S),Pi(S)):S.stateNode=w.stateNode}}else Tu=function(){},Mi=function(){},Fi=function(){};function Co(w,S){if(!ps)switch(w.tailMode){case"hidden":S=w.tail;for(var D=null;S!==null;)S.alternate!==null&&(D=S),S=S.sibling;D===null?w.tail=null:D.sibling=null;break;case"collapsed":D=w.tail;for(var W=null;D!==null;)D.alternate!==null&&(W=D),D=D.sibling;W===null?S||w.tail===null?w.tail=null:w.tail.sibling=null:W.sibling=null}}function _s(w){var S=w.alternate!==null&&w.alternate.child===w.child,D=0,W=0;if(S)for(var J=w.child;J!==null;)D|=J.lanes|J.childLanes,W|=J.subtreeFlags&14680064,W|=J.flags&14680064,J.return=w,J=J.sibling;else for(J=w.child;J!==null;)D|=J.lanes|J.childLanes,W|=J.subtreeFlags,W|=J.flags,J.return=w,J=J.sibling;return w.subtreeFlags|=W,w.childLanes=D,S}function Td(w,S,D){var W=S.pendingProps;switch(mh(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(S),null;case 1:return hn(S.type)&&ke(),_s(S),null;case 3:return D=S.stateNode,fd(),$r(Jn),$r(sn),K1(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(w===null||w.child===null)&&(ug(S)?Pi(S):w===null||w.memoizedState.isDehydrated&&(S.flags&256)===0||(S.flags|=1024,vl!==null&&(Ug(vl),vl=null))),Tu(w,S),_s(S),null;case 5:V1(S),D=Ko(xu.current);var J=S.type;if(w!==null&&S.stateNode!=null)Mi(w,S,J,W,D),w.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!W){if(S.stateNode===null)throw Error(i(166));return _s(S),null}if(w=Ko(qo.current),ug(S)){if(!Ue)throw Error(i(175));w=Se(S.stateNode,S.type,S.memoizedProps,D,w,S,!gh),S.updateQueue=w,w!==null&&Pi(S)}else{var oe=U(J,W,D,w,S);ku(oe,S,!1,!1),S.stateNode=oe,z(oe,J,W,D,w)&&Pi(S)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return _s(S),null;case 6:if(w&&S.stateNode!=null)Fi(w,S,w.memoizedProps,W);else{if(typeof W!="string"&&S.stateNode===null)throw Error(i(166));if(w=Ko(xu.current),D=Ko(qo.current),ug(S)){if(!Ue)throw Error(i(176));if(w=S.stateNode,D=S.memoizedProps,(W=Ze(w,D,S,!gh))&&(J=Va,J!==null))switch(J.tag){case 3:ot(J.stateNode.containerInfo,w,D,(J.mode&1)!==0);break;case 5:wt(J.type,J.memoizedProps,J.stateNode,w,D,(J.mode&1)!==0)}W&&Pi(S)}else S.stateNode=ne(W,w,D,S)}return _s(S),null;case 13:if($r(Ns),W=S.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(ps&&ji!==null&&(S.mode&1)!==0&&(S.flags&128)===0)K2(),ld(),S.flags|=98560,J=!1;else if(J=ug(S),W!==null&&W.dehydrated!==null){if(w===null){if(!J)throw Error(i(318));if(!Ue)throw Error(i(344));if(J=S.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(i(317));ut(J,S)}else ld(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;_s(S),J=!1}else vl!==null&&(Ug(vl),vl=null),J=!0;if(!J)return S.flags&65536?S:null}return(S.flags&128)!==0?(S.lanes=D,S):(D=W!==null,D!==(w!==null&&w.memoizedState!==null)&&D&&(S.child.flags|=8192,(S.mode&1)!==0&&(w===null||(Ns.current&1)!==0?ks===0&&(ks=3):tf())),S.updateQueue!==null&&(S.flags|=4),_s(S),null);case 4:return fd(),Tu(w,S),w===null&&je(S.stateNode.containerInfo),_s(S),null;case 10:return ph(S.type._context),_s(S),null;case 17:return hn(S.type)&&ke(),_s(S),null;case 19:if($r(Ns),J=S.memoizedState,J===null)return _s(S),null;if(W=(S.flags&128)!==0,oe=J.rendering,oe===null)if(W)Co(J,!1);else{if(ks!==0||w!==null&&(w.flags&128)!==0)for(w=S.child;w!==null;){if(oe=xg(w),oe!==null){for(S.flags|=128,Co(J,!1),w=oe.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),S.subtreeFlags=0,w=D,D=S.child;D!==null;)W=D,J=w,W.flags&=14680066,oe=W.alternate,oe===null?(W.childLanes=0,W.lanes=J,W.child=null,W.subtreeFlags=0,W.memoizedProps=null,W.memoizedState=null,W.updateQueue=null,W.dependencies=null,W.stateNode=null):(W.childLanes=oe.childLanes,W.lanes=oe.lanes,W.child=oe.child,W.subtreeFlags=0,W.deletions=null,W.memoizedProps=oe.memoizedProps,W.memoizedState=oe.memoizedState,W.updateQueue=oe.updateQueue,W.type=oe.type,J=oe.dependencies,W.dependencies=J===null?null:{lanes:J.lanes,firstContext:J.firstContext}),D=D.sibling;return Tr(Ns,Ns.current&1|2),S.child}w=w.sibling}J.tail!==null&&xn()>Fh&&(S.flags|=128,W=!0,Co(J,!1),S.lanes=4194304)}else{if(!W)if(w=xg(oe),w!==null){if(S.flags|=128,W=!0,w=w.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),Co(J,!0),J.tail===null&&J.tailMode==="hidden"&&!oe.alternate&&!ps)return _s(S),null}else 2*xn()-J.renderingStartTime>Fh&&D!==1073741824&&(S.flags|=128,W=!0,Co(J,!1),S.lanes=4194304);J.isBackwards?(oe.sibling=S.child,S.child=oe):(w=J.last,w!==null?w.sibling=oe:S.child=oe,J.last=oe)}return J.tail!==null?(S=J.tail,J.rendering=S,J.tail=S.sibling,J.renderingStartTime=xn(),S.sibling=null,w=Ns.current,Tr(Ns,W?w&1|2:w&1),S):(_s(S),null);case 22:case 23:return Wg(),D=S.memoizedState!==null,w!==null&&w.memoizedState!==null!==D&&(S.flags|=8192),D&&(S.mode&1)!==0?(wa&1073741824)!==0&&(_s(S),Ne&&S.subtreeFlags&6&&(S.flags|=8192)):_s(S),null;case 24:return null;case 25:return null}throw Error(i(156,S.tag))}function uw(w,S){switch(mh(S),S.tag){case 1:return hn(S.type)&&ke(),w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 3:return fd(),$r(Jn),$r(sn),K1(),w=S.flags,(w&65536)!==0&&(w&128)===0?(S.flags=w&-65537|128,S):null;case 5:return V1(S),null;case 13:if($r(Ns),w=S.memoizedState,w!==null&&w.dehydrated!==null){if(S.alternate===null)throw Error(i(340));ld()}return w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 19:return $r(Ns),null;case 4:return fd(),null;case 10:return ph(S.type._context),null;case 22:case 23:return Wg(),null;case 24:return null;default:return null}}var H0=!1,Oa=!1,No=typeof WeakSet=="function"?WeakSet:Set,vr=null;function Vn(w,S){var D=w.ref;if(D!==null)if(typeof D=="function")try{D(null)}catch(W){ys(w,S,W)}else D.current=null}function Eo(w,S,D){try{D()}catch(W){ys(w,S,W)}}var cx=!1;function dw(w,S){for(I(w.containerInfo),vr=S;vr!==null;)if(w=vr,S=w.child,(w.subtreeFlags&1028)!==0&&S!==null)S.return=w,vr=S;else for(;vr!==null;){w=vr;try{var D=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var W=D.memoizedProps,J=D.memoizedState,oe=w.stateNode,Ce=oe.getSnapshotBeforeUpdate(w.elementType===w.type?W:To(w.type,W),J);oe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:Ne&&Ae(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(tt){ys(w,w.return,tt)}if(S=w.sibling,S!==null){S.return=w.return,vr=S;break}vr=w.return}return D=cx,cx=!1,D}function Cd(w,S,D){var W=S.updateQueue;if(W=W!==null?W.lastEffect:null,W!==null){var J=W=W.next;do{if((J.tag&w)===w){var oe=J.destroy;J.destroy=void 0,oe!==void 0&&Eo(S,D,oe)}J=J.next}while(J!==W)}}function G0(w,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var D=S=S.next;do{if((D.tag&w)===w){var W=D.create;D.destroy=W()}D=D.next}while(D!==S)}}function Pg(w){var S=w.ref;if(S!==null){var D=w.stateNode;switch(w.tag){case 5:w=te(D);break;default:w=D}typeof S=="function"?S(w):S.current=w}}function Nh(w){var S=w.alternate;S!==null&&(w.alternate=null,Nh(S)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(S=w.stateNode,S!==null&&Me(S)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function ux(w){return w.tag===5||w.tag===3||w.tag===4}function Nd(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||ux(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function Eh(w,S,D){var W=w.tag;if(W===5||W===6)w=w.stateNode,S?ur(D,w,S):pt(D,w);else if(W!==4&&(w=w.child,w!==null))for(Eh(w,S,D),w=w.sibling;w!==null;)Eh(w,S,D),w=w.sibling}function dx(w,S,D){var W=w.tag;if(W===5||W===6)w=w.stateNode,S?rr(D,w,S):at(D,w);else if(W!==4&&(w=w.child,w!==null))for(dx(w,S,D),w=w.sibling;w!==null;)dx(w,S,D),w=w.sibling}var qs=null,ro=!1;function bl(w,S,D){for(D=D.child;D!==null;)Mg(w,S,D),D=D.sibling}function Mg(w,S,D){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(fu,D)}catch{}switch(D.tag){case 5:Oa||Vn(D,S);case 6:if(Ne){var W=qs,J=ro;qs=null,bl(w,S,D),qs=W,ro=J,qs!==null&&(ro?wr(qs,D.stateNode):Nr(qs,D.stateNode))}else bl(w,S,D);break;case 18:Ne&&qs!==null&&(ro?Be(qs,D.stateNode):Pe(qs,D.stateNode));break;case 4:Ne?(W=qs,J=ro,qs=D.stateNode.containerInfo,ro=!0,bl(w,S,D),qs=W,ro=J):(ce&&(W=D.stateNode.containerInfo,J=xt(W),Ke(W,J)),bl(w,S,D));break;case 0:case 11:case 14:case 15:if(!Oa&&(W=D.updateQueue,W!==null&&(W=W.lastEffect,W!==null))){J=W=W.next;do{var oe=J,Ce=oe.destroy;oe=oe.tag,Ce!==void 0&&((oe&2)!==0||(oe&4)!==0)&&Eo(D,S,Ce),J=J.next}while(J!==W)}bl(w,S,D);break;case 1:if(!Oa&&(Vn(D,S),W=D.stateNode,typeof W.componentWillUnmount=="function"))try{W.props=D.memoizedProps,W.state=D.memoizedState,W.componentWillUnmount()}catch(tt){ys(D,S,tt)}bl(w,S,D);break;case 21:bl(w,S,D);break;case 22:D.mode&1?(Oa=(W=Oa)||D.memoizedState!==null,bl(w,S,D),Oa=W):bl(w,S,D);break;default:bl(w,S,D)}}function Ed(w){var S=w.updateQueue;if(S!==null){w.updateQueue=null;var D=w.stateNode;D===null&&(D=w.stateNode=new No),S.forEach(function(W){var J=X3.bind(null,w,W);D.has(W)||(D.add(W),W.then(J,J))})}}function Xo(w,S){var D=S.deletions;if(D!==null)for(var W=0;W<D.length;W++){var J=D[W];try{var oe=w,Ce=S;if(Ne){var tt=Ce;e:for(;tt!==null;){switch(tt.tag){case 5:qs=tt.stateNode,ro=!1;break e;case 3:qs=tt.stateNode.containerInfo,ro=!0;break e;case 4:qs=tt.stateNode.containerInfo,ro=!0;break e}tt=tt.return}if(qs===null)throw Error(i(160));Mg(oe,Ce,J),qs=null,ro=!1}else Mg(oe,Ce,J);var _t=J.alternate;_t!==null&&(_t.return=null),J.return=null}catch(sr){ys(J,S,sr)}}if(S.subtreeFlags&12854)for(S=S.child;S!==null;)Ah(S,w),S=S.sibling}function Ah(w,S){var D=w.alternate,W=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:if(Xo(S,w),Ao(w),W&4){try{Cd(3,w,w.return),G0(3,w)}catch(br){ys(w,w.return,br)}try{Cd(5,w,w.return)}catch(br){ys(w,w.return,br)}}break;case 1:Xo(S,w),Ao(w),W&512&&D!==null&&Vn(D,D.return);break;case 5:if(Xo(S,w),Ao(w),W&512&&D!==null&&Vn(D,D.return),Ne){if(w.flags&32){var J=w.stateNode;try{ft(J)}catch(br){ys(w,w.return,br)}}if(W&4&&(J=w.stateNode,J!=null)){var oe=w.memoizedProps;if(D=D!==null?D.memoizedProps:oe,W=w.type,S=w.updateQueue,w.updateQueue=null,S!==null)try{Wt(J,S,W,D,oe,w)}catch(br){ys(w,w.return,br)}}}break;case 6:if(Xo(S,w),Ao(w),W&4&&Ne){if(w.stateNode===null)throw Error(i(162));J=w.stateNode,oe=w.memoizedProps,D=D!==null?D.memoizedProps:oe;try{nt(J,D,oe)}catch(br){ys(w,w.return,br)}}break;case 3:if(Xo(S,w),Ao(w),W&4){if(Ne&&Ue&&D!==null&&D.memoizedState.isDehydrated)try{de(S.containerInfo)}catch(br){ys(w,w.return,br)}if(ce){J=S.containerInfo,oe=S.pendingChildren;try{Ke(J,oe)}catch(br){ys(w,w.return,br)}}}break;case 4:if(Xo(S,w),Ao(w),W&4&&ce){oe=w.stateNode,J=oe.containerInfo,oe=oe.pendingChildren;try{Ke(J,oe)}catch(br){ys(w,w.return,br)}}break;case 13:Xo(S,w),Ao(w),J=w.child,J.flags&8192&&(oe=J.memoizedState!==null,J.stateNode.isHidden=oe,!oe||J.alternate!==null&&J.alternate.memoizedState!==null||(J0=xn())),W&4&&Ed(w);break;case 22:var Ce=D!==null&&D.memoizedState!==null;if(w.mode&1?(Oa=(D=Oa)||Ce,Xo(S,w),Oa=D):Xo(S,w),Ao(w),W&8192){if(D=w.memoizedState!==null,(w.stateNode.isHidden=D)&&!Ce&&(w.mode&1)!==0)for(vr=w,W=w.child;W!==null;){for(S=vr=W;vr!==null;){Ce=vr;var tt=Ce.child;switch(Ce.tag){case 0:case 11:case 14:case 15:Cd(4,Ce,Ce.return);break;case 1:Vn(Ce,Ce.return);var _t=Ce.stateNode;if(typeof _t.componentWillUnmount=="function"){var sr=Ce,jr=Ce.return;try{var dn=sr;_t.props=dn.memoizedProps,_t.state=dn.memoizedState,_t.componentWillUnmount()}catch(br){ys(sr,jr,br)}}break;case 5:Vn(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){Og(S);continue}}tt!==null?(tt.return=Ce,vr=tt):Og(S)}W=W.sibling}if(Ne){e:if(W=null,Ne)for(S=w;;){if(S.tag===5){if(W===null){W=S;try{J=S.stateNode,D?Tt(J):he(S.stateNode,S.memoizedProps)}catch(br){ys(w,w.return,br)}}}else if(S.tag===6){if(W===null)try{oe=S.stateNode,D?Ot(oe):Ee(oe,S.memoizedProps)}catch(br){ys(w,w.return,br)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===w)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break e;for(;S.sibling===null;){if(S.return===null||S.return===w)break e;W===S&&(W=null),S=S.return}W===S&&(W=null),S.sibling.return=S.return,S=S.sibling}}}break;case 19:Xo(S,w),Ao(w),W&4&&Ed(w);break;case 21:break;default:Xo(S,w),Ao(w)}}function Ao(w){var S=w.flags;if(S&2){try{if(Ne){e:{for(var D=w.return;D!==null;){if(ux(D)){var W=D;break e}D=D.return}throw Error(i(160))}switch(W.tag){case 5:var J=W.stateNode;W.flags&32&&(ft(J),W.flags&=-33);var oe=Nd(w);dx(w,oe,J);break;case 3:case 4:var Ce=W.stateNode.containerInfo,tt=Nd(w);Eh(w,tt,Ce);break;default:throw Error(i(161))}}}catch(_t){ys(w,w.return,_t)}w.flags&=-3}S&4096&&(w.flags&=-4097)}function V0(w,S,D){vr=w,Fg(w)}function Fg(w,S,D){for(var W=(w.mode&1)!==0;vr!==null;){var J=vr,oe=J.child;if(J.tag===22&&W){var Ce=J.memoizedState!==null||H0;if(!Ce){var tt=J.alternate,_t=tt!==null&&tt.memoizedState!==null||Oa;tt=H0;var sr=Oa;if(H0=Ce,(Oa=_t)&&!sr)for(vr=J;vr!==null;)Ce=vr,_t=Ce.child,Ce.tag===22&&Ce.memoizedState!==null?Rg(J):_t!==null?(_t.return=Ce,vr=_t):Rg(J);for(;oe!==null;)vr=oe,Fg(oe),oe=oe.sibling;vr=J,H0=tt,Oa=sr}Dg(w)}else(J.subtreeFlags&8772)!==0&&oe!==null?(oe.return=J,vr=oe):Dg(w)}}function Dg(w){for(;vr!==null;){var S=vr;if((S.flags&8772)!==0){var D=S.alternate;try{if((S.flags&8772)!==0)switch(S.tag){case 0:case 11:case 15:Oa||G0(5,S);break;case 1:var W=S.stateNode;if(S.flags&4&&!Oa)if(D===null)W.componentDidMount();else{var J=S.elementType===S.type?D.memoizedProps:To(S.type,D.memoizedProps);W.componentDidUpdate(J,D.memoizedState,W.__reactInternalSnapshotBeforeUpdate)}var oe=S.updateQueue;oe!==null&&ew(S,oe,W);break;case 3:var Ce=S.updateQueue;if(Ce!==null){if(D=null,S.child!==null)switch(S.child.tag){case 5:D=te(S.child.stateNode);break;case 1:D=S.child.stateNode}ew(S,Ce,D)}break;case 5:var tt=S.stateNode;D===null&&S.flags&4&&kt(tt,S.type,S.memoizedProps,S);break;case 6:break;case 4:break;case 12:break;case 13:if(Ue&&S.memoizedState===null){var _t=S.alternate;if(_t!==null){var sr=_t.memoizedState;if(sr!==null){var jr=sr.dehydrated;jr!==null&&ye(jr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Oa||S.flags&512&&Pg(S)}catch(dn){ys(S,S.return,dn)}}if(S===w){vr=null;break}if(D=S.sibling,D!==null){D.return=S.return,vr=D;break}vr=S.return}}function Og(w){for(;vr!==null;){var S=vr;if(S===w){vr=null;break}var D=S.sibling;if(D!==null){D.return=S.return,vr=D;break}vr=S.return}}function Rg(w){for(;vr!==null;){var S=vr;try{switch(S.tag){case 0:case 11:case 15:var D=S.return;try{G0(4,S)}catch(_t){ys(S,D,_t)}break;case 1:var W=S.stateNode;if(typeof W.componentDidMount=="function"){var J=S.return;try{W.componentDidMount()}catch(_t){ys(S,J,_t)}}var oe=S.return;try{Pg(S)}catch(_t){ys(S,oe,_t)}break;case 5:var Ce=S.return;try{Pg(S)}catch(_t){ys(S,Ce,_t)}}}catch(_t){ys(S,S.return,_t)}if(S===w){vr=null;break}var tt=S.sibling;if(tt!==null){tt.return=S.return,vr=tt;break}vr=S.return}}var $c=0,Di=1,Yl=2,q0=3,jh=4;if(typeof Symbol=="function"&&Symbol.for){var jo=Symbol.for;$c=jo("selector.component"),Di=jo("selector.has_pseudo_class"),Yl=jo("selector.role"),q0=jo("selector.test_id"),jh=jo("selector.text")}function Xl(w){var S=pe(w);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(i(364));return S}if(w=At(w),w===null)throw Error(i(362));return w.stateNode.current}function Ph(w,S){switch(S.$$typeof){case $c:if(w.type===S.value)return!0;break;case Di:e:{S=S.value,w=[w,0];for(var D=0;D<w.length;){var W=w[D++],J=w[D++],oe=S[J];if(W.tag!==5||!or(W)){for(;oe!=null&&Ph(W,oe);)J++,oe=S[J];if(J===S.length){S=!0;break e}else for(W=W.child;W!==null;)w.push(W,J),W=W.sibling}}S=!1}return S;case Yl:if(w.tag===5&&yr(w.stateNode,S.value))return!0;break;case jh:if((w.tag===5||w.tag===6)&&(w=Gt(w),w!==null&&0<=w.indexOf(S.value)))return!0;break;case q0:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Ig(w){switch(w.$$typeof){case $c:return"<"+(P(w.value)||"Unknown")+">";case Di:return":has("+(Ig(w)||"")+")";case Yl:return'[role="'+w.value+'"]';case jh:return'"'+w.value+'"';case q0:return'[data-testname="'+w.value+'"]';default:throw Error(i(365))}}function Jl(w,S){var D=[];w=[w,0];for(var W=0;W<w.length;){var J=w[W++],oe=w[W++],Ce=S[oe];if(J.tag!==5||!or(J)){for(;Ce!=null&&Ph(J,Ce);)oe++,Ce=S[oe];if(oe===S.length)D.push(J);else for(J=J.child;J!==null;)w.push(J,oe),J=J.sibling}}return D}function Ql(w,S){if(!St)throw Error(i(363));w=Xl(w),w=Jl(w,S),S=[],w=Array.from(w);for(var D=0;D<w.length;){var W=w[D++];if(W.tag===5)or(W)||S.push(W.stateNode);else for(W=W.child;W!==null;)w.push(W),W=W.sibling}return S}var Lg=Math.ceil,Mh=o.ReactCurrentDispatcher,K0=o.ReactCurrentOwner,Ls=o.ReactCurrentBatchConfig,mn=0,Zn=null,Ss=null,Ks=0,wa=0,Nu=Fr(0),ks=0,Y0=null,zc=0,ds=0,X0=0,Ad=null,di=null,J0=0,Fh=1/0,Oi=null;function Yn(){Fh=xn()+500}var Bs=!1,na=null,_l=null,Eu=!1,Jo=null,Bg=0,sa=0,Dh=null,Q0=-1,Z0=0;function xs(){return(mn&6)!==0?xn():Q0!==-1?Q0:Q0=xn()}function ba(w){return(w.mode&1)===0?1:(mn&2)!==0&&Ks!==0?Ks&-Ks:q3.transition!==null?(Z0===0&&(Z0=gt()),Z0):(w=ze,w!==0?w:We())}function fi(w,S,D,W){if(50<sa)throw sa=0,Dh=null,Error(i(185));Et(w,D,W),((mn&2)===0||w!==Zn)&&(w===Zn&&((mn&2)===0&&(ds|=D),ks===4&&Uc(w,Ks)),hi(w,W),D===1&&mn===0&&(S.mode&1)===0&&(Yn(),M0&&Ga()))}function hi(w,S){var D=w.callbackNode;qe(w,S);var W=Pt(w,w===Zn?Ks:0);if(W===0)D!==null&&gs(D),w.callbackNode=null,w.callbackPriority=0;else if(S=W&-W,w.callbackPriority!==S){if(D!=null&&gs(D),S===1)w.tag===0?H2(fx.bind(null,w)):lg(fx.bind(null,w)),Nt?$e(function(){(mn&6)===0&&Ga()}):nr(_n,Ga),D=null;else{switch(hr(W)){case 1:D=_n;break;case 4:D=Hl;break;case 16:D=Ei;break;case 536870912:D=dh;break;default:D=Ei}D=vx(D,$g.bind(null,w))}w.callbackPriority=S,w.callbackNode=D}}function $g(w,S){if(Q0=-1,Z0=0,(mn&6)!==0)throw Error(i(327));var D=w.callbackNode;if(Wc()&&w.callbackNode!==D)return null;var W=Pt(w,w===Zn?Ks:0);if(W===0)return null;if((W&30)!==0||(W&w.expiredLanes)!==0||S)S=jd(w,W);else{S=W;var J=mn;mn|=2;var oe=mx();(Zn!==w||Ks!==S)&&(Oi=null,Yn(),Au(w,S));do try{gx();break}catch(tt){ef(w,tt)}while(!0);U1(),Mh.current=oe,mn=J,Ss!==null?S=0:(Zn=null,Ks=0,S=ks)}if(S!==0){if(S===2&&(J=Lt(w),J!==0&&(W=J,S=zg(w,J))),S===1)throw D=Y0,Au(w,0),Uc(w,W),hi(w,xn()),D;if(S===6)Uc(w,W);else{if(J=w.current.alternate,(W&30)===0&&!fw(J)&&(S=jd(w,W),S===2&&(oe=Lt(w),oe!==0&&(W=oe,S=zg(w,oe))),S===1))throw D=Y0,Au(w,0),Uc(w,W),hi(w,xn()),D;switch(w.finishedWork=J,w.finishedLanes=W,S){case 0:case 1:throw Error(i(345));case 2:ju(w,di,Oi);break;case 3:if(Uc(w,W),(W&130023424)===W&&(S=J0+500-xn(),10<S)){if(Pt(w,0)!==0)break;if(J=w.suspendedLanes,(J&W)!==W){xs(),w.pingedLanes|=w.suspendedLanes&J;break}w.timeoutHandle=q(ju.bind(null,w,di,Oi),S);break}ju(w,di,Oi);break;case 4:if(Uc(w,W),(W&4194240)===W)break;for(S=w.eventTimes,J=-1;0<W;){var Ce=31-En(W);oe=1<<Ce,Ce=S[Ce],Ce>J&&(J=Ce),W&=~oe}if(W=J,W=xn()-W,W=(120>W?120:480>W?480:1080>W?1080:1920>W?1920:3e3>W?3e3:4320>W?4320:1960*Lg(W/1960))-W,10<W){w.timeoutHandle=q(ju.bind(null,w,di,Oi),W);break}ju(w,di,Oi);break;case 5:ju(w,di,Oi);break;default:throw Error(i(329))}}}return hi(w,xn()),w.callbackNode===D?$g.bind(null,w):null}function zg(w,S){var D=Ad;return w.current.memoizedState.isDehydrated&&(Au(w,S).flags|=256),w=jd(w,S),w!==2&&(S=di,di=D,S!==null&&Ug(S)),w}function Ug(w){di===null?di=w:di.push.apply(di,w)}function fw(w){for(var S=w;;){if(S.flags&16384){var D=S.updateQueue;if(D!==null&&(D=D.stores,D!==null))for(var W=0;W<D.length;W++){var J=D[W],oe=J.getSnapshot;J=J.value;try{if(!pl(oe(),J))return!1}catch{return!1}}}if(D=S.child,S.subtreeFlags&16384&&D!==null)D.return=S,S=D;else{if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function Uc(w,S){for(S&=~X0,S&=~ds,w.suspendedLanes|=S,w.pingedLanes&=~S,w=w.expirationTimes;0<S;){var D=31-En(S),W=1<<D;w[D]=-1,S&=~W}}function fx(w){if((mn&6)!==0)throw Error(i(327));Wc();var S=Pt(w,0);if((S&1)===0)return hi(w,xn()),null;var D=jd(w,S);if(w.tag!==0&&D===2){var W=Lt(w);W!==0&&(S=W,D=zg(w,W))}if(D===1)throw D=Y0,Au(w,0),Uc(w,S),hi(w,xn()),D;if(D===6)throw Error(i(345));return w.finishedWork=w.current.alternate,w.finishedLanes=S,ju(w,di,Oi),hi(w,xn()),null}function hx(w){Jo!==null&&Jo.tag===0&&(mn&6)===0&&Wc();var S=mn;mn|=1;var D=Ls.transition,W=ze;try{if(Ls.transition=null,ze=1,w)return w()}finally{ze=W,Ls.transition=D,mn=S,(mn&6)===0&&Ga()}}function Wg(){wa=Nu.current,$r(Nu)}function Au(w,S){w.finishedWork=null,w.finishedLanes=0;var D=w.timeoutHandle;if(D!==ue&&(w.timeoutHandle=ue,se(D)),Ss!==null)for(D=Ss.return;D!==null;){var W=D;switch(mh(W),W.tag){case 1:W=W.type.childContextTypes,W!=null&&ke();break;case 3:fd(),$r(Jn),$r(sn),K1();break;case 5:V1(W);break;case 4:fd();break;case 13:$r(Ns);break;case 19:$r(Ns);break;case 10:ph(W.type._context);break;case 22:case 23:Wg()}D=D.return}if(Zn=w,Ss=w=Pu(w.current,null),Ks=wa=S,ks=0,Y0=null,X0=ds=zc=0,di=Ad=null,mu!==null){for(S=0;S<mu.length;S++)if(D=mu[S],W=D.interleaved,W!==null){D.interleaved=null;var J=W.next,oe=D.pending;if(oe!==null){var Ce=oe.next;oe.next=J,W.next=Ce}D.pending=W}mu=null}return w}function ef(w,S){do{var D=Ss;try{if(U1(),to.current=vd,L0){for(var W=bs.memoizedState;W!==null;){var J=W.queue;J!==null&&(J.pending=null),W=W.next}L0=!1}if(yu=0,ya=ra=bs=null,yh=!1,vh=0,K0.current=null,D===null||D.return===null){ks=1,Y0=S,Ss=null;break}e:{var oe=w,Ce=D.return,tt=D,_t=S;if(S=Ks,tt.flags|=32768,_t!==null&&typeof _t=="object"&&typeof _t.then=="function"){var sr=_t,jr=tt,dn=jr.tag;if((jr.mode&1)===0&&(dn===0||dn===11||dn===15)){var br=jr.alternate;br?(jr.updateQueue=br.updateQueue,jr.memoizedState=br.memoizedState,jr.lanes=br.lanes):(jr.updateQueue=null,jr.memoizedState=null)}var fs=lw(Ce);if(fs!==null){fs.flags&=-257,bu(fs,Ce,tt,oe,S),fs.mode&1&&ow(oe,sr,S),S=fs,_t=sr;var qn=S.updateQueue;if(qn===null){var Ri=new Set;Ri.add(_t),S.updateQueue=Ri}else qn.add(_t);break e}else{if((S&1)===0){ow(oe,sr,S),tf();break e}_t=Error(i(426))}}else if(ps&&tt.mode&1){var Zl=lw(Ce);if(Zl!==null){(Zl.flags&65536)===0&&(Zl.flags|=256),bu(Zl,Ce,tt,oe,S),$1(wd(_t,tt));break e}}oe=_t=wd(_t,tt),ks!==4&&(ks=2),Ad===null?Ad=[oe]:Ad.push(oe),oe=Ce;do{switch(oe.tag){case 3:oe.flags|=65536,S&=-S,oe.lanes|=S;var vt=Vl(oe,_t,S);R0(oe,vt);break e;case 1:tt=_t;var st=oe.type,Mt=oe.stateNode;if((oe.flags&128)===0&&(typeof st.getDerivedStateFromError=="function"||Mt!==null&&typeof Mt.componentDidCatch=="function"&&(_l===null||!_l.has(Mt)))){oe.flags|=65536,S&=-S,oe.lanes|=S;var Sr=Ng(oe,tt,S);R0(oe,Sr);break e}}oe=oe.return}while(oe!==null)}xx(D)}catch(zr){S=zr,Ss===D&&D!==null&&(Ss=D=D.return);continue}break}while(!0)}function mx(){var w=Mh.current;return Mh.current=vd,w===null?vd:w}function tf(){(ks===0||ks===3||ks===2)&&(ks=4),Zn===null||(zc&268435455)===0&&(ds&268435455)===0||Uc(Zn,Ks)}function jd(w,S){var D=mn;mn|=2;var W=mx();(Zn!==w||Ks!==S)&&(Oi=null,Au(w,S));do try{hw();break}catch(J){ef(w,J)}while(!0);if(U1(),mn=D,Mh.current=W,Ss!==null)throw Error(i(261));return Zn=null,Ks=0,ks}function hw(){for(;Ss!==null;)px(Ss)}function gx(){for(;Ss!==null&&!pn();)px(Ss)}function px(w){var S=yw(w.alternate,w,wa);w.memoizedProps=w.pendingProps,S===null?xx(w):Ss=S,K0.current=null}function xx(w){var S=w;do{var D=S.alternate;if(w=S.return,(S.flags&32768)===0){if(D=Td(D,S,wa),D!==null){Ss=D;return}}else{if(D=uw(D,S),D!==null){D.flags&=32767,Ss=D;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{ks=6,Ss=null;return}}if(S=S.sibling,S!==null){Ss=S;return}Ss=S=w}while(S!==null);ks===0&&(ks=5)}function ju(w,S,D){var W=ze,J=Ls.transition;try{Ls.transition=null,ze=1,mw(w,S,D,W)}finally{Ls.transition=J,ze=W}return null}function mw(w,S,D,W){do Wc();while(Jo!==null);if((mn&6)!==0)throw Error(i(327));D=w.finishedWork;var J=w.finishedLanes;if(D===null)return null;if(w.finishedWork=null,w.finishedLanes=0,D===w.current)throw Error(i(177));w.callbackNode=null,w.callbackPriority=0;var oe=D.lanes|D.childLanes;if(Gr(w,oe),w===Zn&&(Ss=Zn=null,Ks=0),(D.subtreeFlags&2064)===0&&(D.flags&2064)===0||Eu||(Eu=!0,vx(Ei,function(){return Wc(),null})),oe=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||oe){oe=Ls.transition,Ls.transition=null;var Ce=ze;ze=1;var tt=mn;mn|=4,K0.current=null,dw(w,D),Ah(D,w),H(w.containerInfo),w.current=D,V0(D),an(),mn=tt,ze=Ce,Ls.transition=oe}else w.current=D;if(Eu&&(Eu=!1,Jo=w,Bg=J),oe=w.pendingLanes,oe===0&&(_l=null),P0(D.stateNode),hi(w,xn()),S!==null)for(W=w.onRecoverableError,D=0;D<S.length;D++)J=S[D],W(J.value,{componentStack:J.stack,digest:J.digest});if(Bs)throw Bs=!1,w=na,na=null,w;return(Bg&1)!==0&&w.tag!==0&&Wc(),oe=w.pendingLanes,(oe&1)!==0?w===Dh?sa++:(sa=0,Dh=w):sa=0,Ga(),null}function Wc(){if(Jo!==null){var w=hr(Bg),S=Ls.transition,D=ze;try{if(Ls.transition=null,ze=16>w?16:w,Jo===null)var W=!1;else{if(w=Jo,Jo=null,Bg=0,(mn&6)!==0)throw Error(i(331));var J=mn;for(mn|=4,vr=w.current;vr!==null;){var oe=vr,Ce=oe.child;if((vr.flags&16)!==0){var tt=oe.deletions;if(tt!==null){for(var _t=0;_t<tt.length;_t++){var sr=tt[_t];for(vr=sr;vr!==null;){var jr=vr;switch(jr.tag){case 0:case 11:case 15:Cd(8,jr,oe)}var dn=jr.child;if(dn!==null)dn.return=jr,vr=dn;else for(;vr!==null;){jr=vr;var br=jr.sibling,fs=jr.return;if(Nh(jr),jr===sr){vr=null;break}if(br!==null){br.return=fs,vr=br;break}vr=fs}}}var qn=oe.alternate;if(qn!==null){var Ri=qn.child;if(Ri!==null){qn.child=null;do{var Zl=Ri.sibling;Ri.sibling=null,Ri=Zl}while(Ri!==null)}}vr=oe}}if((oe.subtreeFlags&2064)!==0&&Ce!==null)Ce.return=oe,vr=Ce;else e:for(;vr!==null;){if(oe=vr,(oe.flags&2048)!==0)switch(oe.tag){case 0:case 11:case 15:Cd(9,oe,oe.return)}var vt=oe.sibling;if(vt!==null){vt.return=oe.return,vr=vt;break e}vr=oe.return}}var st=w.current;for(vr=st;vr!==null;){Ce=vr;var Mt=Ce.child;if((Ce.subtreeFlags&2064)!==0&&Mt!==null)Mt.return=Ce,vr=Mt;else e:for(Ce=st;vr!==null;){if(tt=vr,(tt.flags&2048)!==0)try{switch(tt.tag){case 0:case 11:case 15:G0(9,tt)}}catch(zr){ys(tt,tt.return,zr)}if(tt===Ce){vr=null;break e}var Sr=tt.sibling;if(Sr!==null){Sr.return=tt.return,vr=Sr;break e}vr=tt.return}}if(mn=J,Ga(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(fu,w)}catch{}W=!0}return W}finally{ze=D,Ls.transition=S}}return!1}function yx(w,S,D){S=wd(D,S),S=Vl(w,S,1),w=Rc(w,S,1),S=xs(),w!==null&&(Et(w,1,S),hi(w,S))}function ys(w,S,D){if(w.tag===3)yx(w,w,D);else for(;S!==null;){if(S.tag===3){yx(S,w,D);break}else if(S.tag===1){var W=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof W.componentDidCatch=="function"&&(_l===null||!_l.has(W))){w=wd(D,w),w=Ng(S,w,1),S=Rc(S,w,1),w=xs(),S!==null&&(Et(S,1,w),hi(S,w));break}}S=S.return}}function gw(w,S,D){var W=w.pingCache;W!==null&&W.delete(S),S=xs(),w.pingedLanes|=w.suspendedLanes&D,Zn===w&&(Ks&D)===D&&(ks===4||ks===3&&(Ks&130023424)===Ks&&500>xn()-J0?Au(w,0):X0|=D),hi(w,S)}function pw(w,S){S===0&&((w.mode&1)===0?S=1:(S=gl,gl<<=1,(gl&130023424)===0&&(gl=4194304)));var D=xs();w=wl(w,S),w!==null&&(Et(w,S,D),hi(w,D))}function xw(w){var S=w.memoizedState,D=0;S!==null&&(D=S.retryLane),pw(w,D)}function X3(w,S){var D=0;switch(w.tag){case 13:var W=w.stateNode,J=w.memoizedState;J!==null&&(D=J.retryLane);break;case 19:W=w.stateNode;break;default:throw Error(i(314))}W!==null&&W.delete(S),pw(w,D)}var yw;yw=function(w,S,D){if(w!==null)if(w.memoizedProps!==S.pendingProps||Jn.current)va=!0;else{if((w.lanes&D)===0&&(S.flags&128)===0)return va=!1,Su(w,S,D);va=(w.flags&131072)!==0}else va=!1,ps&&(S.flags&1048576)!==0&&G2(S,od,S.index);switch(S.lanes=0,S.tag){case 2:var W=S.type;Ch(w,S),w=S.pendingProps;var J=os(S,sn.current);O0(S,D),J=wh(null,S,W,w,J,D);var oe=yg();return S.flags|=1,typeof J=="object"&&J!==null&&typeof J.render=="function"&&J.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,hn(W)?(oe=!0,Jr(S)):oe=!1,S.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,H1(S),J.updater=Sh,S.stateNode=J,J._reactInternals=S,Gl(S,W,w,D),S=ci(null,S,W,!0,oe,D)):(S.tag=0,ps&&oe&&hh(S),Da(null,S,J,D),S=S.child),S;case 16:W=S.elementType;e:{switch(Ch(w,S),w=S.pendingProps,J=W._init,W=J(W._payload),S.type=W,J=S.tag=J3(W),w=To(W,w),J){case 0:S=ql(null,S,W,w,D);break e;case 1:S=Ka(null,S,W,w,D);break e;case 11:S=Eg(null,S,W,w,D);break e;case 14:S=bd(null,S,W,To(W.type,w),D);break e}throw Error(i(306,W,""))}return S;case 0:return W=S.type,J=S.pendingProps,J=S.elementType===W?J:To(W,J),ql(w,S,W,J,D);case 1:return W=S.type,J=S.pendingProps,J=S.elementType===W?J:To(W,J),Ka(w,S,W,J,D);case 3:e:{if(_u(S),w===null)throw Error(i(387));W=S.pendingProps,oe=S.memoizedState,J=oe.element,Z2(w,S),gu(S,W,null,D);var Ce=S.memoizedState;if(W=Ce.element,Ue&&oe.isDehydrated)if(oe={element:W,isDehydrated:!1,cache:Ce.cache,pendingSuspenseBoundaries:Ce.pendingSuspenseBoundaries,transitions:Ce.transitions},S.updateQueue.baseState=oe,S.memoizedState=oe,S.flags&256){J=wd(Error(i(423)),S),S=_d(w,S,W,D,J);break e}else if(W!==J){J=wd(Error(i(424)),S),S=_d(w,S,W,D,J);break e}else for(Ue&&(ji=we(S.stateNode.containerInfo),Va=S,ps=!0,vl=null,gh=!1),D=J2(S,null,W,D),S.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(ld(),W===J){S=Bc(w,S,D);break e}Da(w,S,W,D)}S=S.child}return S;case 5:return G1(S),w===null&&B1(S),W=S.type,J=S.pendingProps,oe=w!==null?w.memoizedProps:null,Ce=J.children,X(W,J)?Ce=null:oe!==null&&X(W,oe)&&(S.flags|=32),Qn(w,S),Da(w,S,Ce,D),S.child;case 6:return w===null&&B1(S),null;case 13:return lx(w,S,D);case 4:return pg(S,S.stateNode.containerInfo),W=S.pendingProps,w===null?S.child=ud(S,null,W,D):Da(w,S,W,D),S.child;case 11:return W=S.type,J=S.pendingProps,J=S.elementType===W?J:To(W,J),Eg(w,S,W,J,D);case 7:return Da(w,S,S.pendingProps,D),S.child;case 8:return Da(w,S,S.pendingProps.children,D),S.child;case 12:return Da(w,S,S.pendingProps.children,D),S.child;case 10:e:{if(W=S.type._context,J=S.pendingProps,oe=S.memoizedProps,Ce=J.value,Q2(S,W,Ce),oe!==null)if(pl(oe.value,Ce)){if(oe.children===J.children&&!Jn.current){S=Bc(w,S,D);break e}}else for(oe=S.child,oe!==null&&(oe.return=S);oe!==null;){var tt=oe.dependencies;if(tt!==null){Ce=oe.child;for(var _t=tt.firstContext;_t!==null;){if(_t.context===W){if(oe.tag===1){_t=Oc(-1,D&-D),_t.tag=2;var sr=oe.updateQueue;if(sr!==null){sr=sr.shared;var jr=sr.pending;jr===null?_t.next=_t:(_t.next=jr.next,jr.next=_t),sr.pending=_t}}oe.lanes|=D,_t=oe.alternate,_t!==null&&(_t.lanes|=D),dd(oe.return,D,S),tt.lanes|=D;break}_t=_t.next}}else if(oe.tag===10)Ce=oe.type===S.type?null:oe.child;else if(oe.tag===18){if(Ce=oe.return,Ce===null)throw Error(i(341));Ce.lanes|=D,tt=Ce.alternate,tt!==null&&(tt.lanes|=D),dd(Ce,D,S),Ce=oe.sibling}else Ce=oe.child;if(Ce!==null)Ce.return=oe;else for(Ce=oe;Ce!==null;){if(Ce===S){Ce=null;break}if(oe=Ce.sibling,oe!==null){oe.return=Ce.return,Ce=oe;break}Ce=Ce.return}oe=Ce}Da(w,S,J.children,D),S=S.child}return S;case 9:return J=S.type,W=S.pendingProps.children,O0(S,D),J=_o(J),W=W(J),S.flags|=1,Da(w,S,W,D),S.child;case 14:return W=S.type,J=To(W,S.pendingProps),J=To(W.type,J),bd(w,S,W,J,D);case 15:return Lc(w,S,S.type,S.pendingProps,D);case 17:return W=S.type,J=S.pendingProps,J=S.elementType===W?J:To(W,J),Ch(w,S),S.tag=1,hn(W)?(w=!0,Jr(S)):w=!1,O0(S,D),iw(S,W,J),Gl(S,W,J,D),ci(null,S,W,!0,w,D);case 19:return jg(w,S,D);case 22:return us(w,S,D)}throw Error(i(156,S.tag))};function vx(w,S){return nr(w,S)}function vw(w,S,D,W){this.tag=w,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=W,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(w,S,D,W){return new vw(w,S,D,W)}function rf(w){return w=w.prototype,!(!w||!w.isReactComponent)}function J3(w){if(typeof w=="function")return rf(w)?1:0;if(w!=null){if(w=w.$$typeof,w===y)return 11;if(w===k)return 14}return 2}function Pu(w,S){var D=w.alternate;return D===null?(D=Po(w.tag,S,w.key,w.mode),D.elementType=w.elementType,D.type=w.type,D.stateNode=w.stateNode,D.alternate=w,w.alternate=D):(D.pendingProps=S,D.type=w.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=w.flags&14680064,D.childLanes=w.childLanes,D.lanes=w.lanes,D.child=w.child,D.memoizedProps=w.memoizedProps,D.memoizedState=w.memoizedState,D.updateQueue=w.updateQueue,S=w.dependencies,D.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},D.sibling=w.sibling,D.index=w.index,D.ref=w.ref,D}function Hg(w,S,D,W,J,oe){var Ce=2;if(W=w,typeof w=="function")rf(w)&&(Ce=1);else if(typeof w=="string")Ce=5;else e:switch(w){case d:return Ya(D.children,J,oe,S);case f:Ce=8,J|=8;break;case h:return w=Po(12,D,S,J|2),w.elementType=h,w.lanes=oe,w;case v:return w=Po(13,D,S,J),w.elementType=v,w.lanes=oe,w;case T:return w=Po(19,D,S,J),w.elementType=T,w.lanes=oe,w;case C:return nf(D,J,oe,S);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case g:Ce=10;break e;case x:Ce=9;break e;case y:Ce=11;break e;case k:Ce=14;break e;case b:Ce=16,W=null;break e}throw Error(i(130,w==null?w:typeof w,""))}return S=Po(Ce,D,S,J),S.elementType=w,S.type=W,S.lanes=oe,S}function Ya(w,S,D,W){return w=Po(7,w,W,S),w.lanes=D,w}function nf(w,S,D,W){return w=Po(22,w,W,S),w.elementType=C,w.lanes=D,w.stateNode={isHidden:!1},w}function sf(w,S,D){return w=Po(6,w,null,S),w.lanes=D,w}function Gg(w,S,D){return S=Po(4,w.children!==null?w.children:[],w.key,S),S.lanes=D,S.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},S}function ww(w,S,D,W,J){this.tag=S,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xr(0),this.expirationTimes=xr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xr(0),this.identifierPrefix=W,this.onRecoverableError=J,Ue&&(this.mutableSourceEagerHydrationData=null)}function wx(w,S,D,W,J,oe,Ce,tt,_t){return w=new ww(w,S,D,tt,_t),S===1?(S=1,oe===!0&&(S|=8)):S=0,oe=Po(3,null,null,S),w.current=oe,oe.stateNode=w,oe.memoizedState={element:W,isDehydrated:D,cache:null,transitions:null,pendingSuspenseBoundaries:null},H1(oe),w}function Vg(w){if(!w)return Is;w=w._reactInternals;e:{if(M(w)!==w||w.tag!==1)throw Error(i(170));var S=w;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(hn(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(i(171))}if(w.tag===1){var D=w.type;if(hn(D))return Dr(w,D,S)}return S}function Pd(w){var S=w._reactInternals;if(S===void 0)throw typeof w.render=="function"?Error(i(188)):(w=Object.keys(w).join(","),Error(i(268,w)));return w=V(S),w===null?null:w.stateNode}function qg(w,S){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var D=w.retryLane;w.retryLane=D!==0&&D<S?D:S}}function af(w,S){qg(w,S),(w=w.alternate)&&qg(w,S)}function Q3(w){return w=V(w),w===null?null:w.stateNode}function bw(){return null}return r.attemptContinuousHydration=function(w){if(w.tag===13){var S=wl(w,134217728);if(S!==null){var D=xs();fi(S,w,134217728,D)}af(w,134217728)}},r.attemptDiscreteHydration=function(w){if(w.tag===13){var S=wl(w,1);if(S!==null){var D=xs();fi(S,w,1,D)}af(w,1)}},r.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var S=ba(w),D=wl(w,S);if(D!==null){var W=xs();fi(D,w,S,W)}af(w,S)}},r.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var S=w.stateNode;if(S.current.memoizedState.isDehydrated){var D=Ie(S.pendingLanes);D!==0&&(Pn(S,D|1),hi(S,xn()),(mn&6)===0&&(Yn(),Ga()))}break;case 13:hx(function(){var W=wl(w,1);if(W!==null){var J=xs();fi(W,w,1,J)}}),af(w,1)}},r.batchedUpdates=function(w,S){var D=mn;mn|=1;try{return w(S)}finally{mn=D,mn===0&&(Yn(),M0&&Ga())}},r.createComponentSelector=function(w){return{$$typeof:$c,value:w}},r.createContainer=function(w,S,D,W,J,oe,Ce){return wx(w,S,!1,null,D,W,J,oe,Ce)},r.createHasPseudoClassSelector=function(w){return{$$typeof:Di,value:w}},r.createHydrationContainer=function(w,S,D,W,J,oe,Ce,tt,_t){return w=wx(D,W,!0,w,J,oe,Ce,tt,_t),w.context=Vg(null),D=w.current,W=xs(),J=ba(D),oe=Oc(W,J),oe.callback=S??null,Rc(D,oe,J),w.current.lanes=J,Et(w,J,W),hi(w,W),w},r.createPortal=function(w,S,D){var W=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:W==null?null:""+W,children:w,containerInfo:S,implementation:D}},r.createRoleSelector=function(w){return{$$typeof:Yl,value:w}},r.createTestNameSelector=function(w){return{$$typeof:q0,value:w}},r.createTextSelector=function(w){return{$$typeof:jh,value:w}},r.deferredUpdates=function(w){var S=ze,D=Ls.transition;try{return Ls.transition=null,ze=16,w()}finally{ze=S,Ls.transition=D}},r.discreteUpdates=function(w,S,D,W,J){var oe=ze,Ce=Ls.transition;try{return Ls.transition=null,ze=1,w(S,D,W,J)}finally{ze=oe,Ls.transition=Ce,mn===0&&Yn()}},r.findAllNodes=Ql,r.findBoundingRects=function(w,S){if(!St)throw Error(i(363));S=Ql(w,S),w=[];for(var D=0;D<S.length;D++)w.push(Bt(S[D]));for(S=w.length-1;0<S;S--){D=w[S];for(var W=D.x,J=W+D.width,oe=D.y,Ce=oe+D.height,tt=S-1;0<=tt;tt--)if(S!==tt){var _t=w[tt],sr=_t.x,jr=sr+_t.width,dn=_t.y,br=dn+_t.height;if(W>=sr&&oe>=dn&&J<=jr&&Ce<=br){w.splice(S,1);break}else if(W!==sr||D.width!==_t.width||br<oe||dn>Ce){if(!(oe!==dn||D.height!==_t.height||jr<W||sr>J)){sr>W&&(_t.width+=sr-W,_t.x=W),jr<J&&(_t.width=J-sr),w.splice(S,1);break}}else{dn>oe&&(_t.height+=dn-oe,_t.y=oe),br<Ce&&(_t.height=Ce-dn),w.splice(S,1);break}}}return w},r.findHostInstance=Pd,r.findHostInstanceWithNoPortals=function(w){return w=B(w),w=w!==null?ae(w):null,w===null?null:w.stateNode},r.findHostInstanceWithWarning=function(w){return Pd(w)},r.flushControlled=function(w){var S=mn;mn|=1;var D=Ls.transition,W=ze;try{Ls.transition=null,ze=1,w()}finally{ze=W,Ls.transition=D,mn=S,mn===0&&(Yn(),Ga())}},r.flushPassiveEffects=Wc,r.flushSync=hx,r.focusWithin=function(w,S){if(!St)throw Error(i(363));for(w=Xl(w),S=Jl(w,S),S=Array.from(S),w=0;w<S.length;){var D=S[w++];if(!or(D)){if(D.tag===5&&it(D.stateNode))return!0;for(D=D.child;D!==null;)S.push(D),D=D.sibling}}return!1},r.getCurrentUpdatePriority=function(){return ze},r.getFindAllNodesFailureDescription=function(w,S){if(!St)throw Error(i(363));var D=0,W=[];w=[Xl(w),0];for(var J=0;J<w.length;){var oe=w[J++],Ce=w[J++],tt=S[Ce];if((oe.tag!==5||!or(oe))&&(Ph(oe,tt)&&(W.push(Ig(tt)),Ce++,Ce>D&&(D=Ce)),Ce<S.length))for(oe=oe.child;oe!==null;)w.push(oe,Ce),oe=oe.sibling}if(D<S.length){for(w=[];D<S.length;D++)w.push(Ig(S[D]));return`findAllNodes was able to match part of the selector:
  `+(W.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},r.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return te(w.child.stateNode);default:return w.child.stateNode}},r.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Q3,findFiberByHostInstance:w.findFiberByHostInstance||bw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)w=!0;else{try{fu=S.inject(w),Zi=S}catch{}w=!!S.checkDCE}}return w},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(w,S,D,W){if(!St)throw Error(i(363));w=Ql(w,S);var J=Ve(w,D,W).disconnect;return{disconnect:function(){J()}}},r.registerMutableSourceForHydration=function(w,S){var D=S._getVersion;D=D(S._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[S,D]:w.mutableSourceEagerHydrationData.push(S,D)},r.runWithPriority=function(w,S){var D=ze;try{return ze=w,S()}finally{ze=D}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(w,S,D,W){var J=S.current,oe=xs(),Ce=ba(J);return D=Vg(D),S.context===null?S.context=D:S.pendingContext=D,S=Oc(oe,Ce),S.payload={element:w},W=W===void 0?null:W,W!==null&&(S.callback=W),w=Rc(J,S,Ce),w!==null&&(fi(w,J,Ce,oe),xh(w,J,Ce)),Ce},r}),ZS}var vP;function ose(){return vP||(vP=1,QS.exports=ise()),QS.exports}var lse=ose();const cse=Ec(lse);var e5={exports:{}},gf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wP;function use(){return wP||(wP=1,gf.ConcurrentRoot=1,gf.ContinuousEventPriority=4,gf.DefaultEventPriority=16,gf.DiscreteEventPriority=1,gf.IdleEventPriority=536870912,gf.LegacyRoot=0),gf}var bP;function dse(){return bP||(bP=1,e5.exports=use()),e5.exports}var ez=dse(),fse=Tn();const _P={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let SP=!1,kP=!1;const RC=".react-konva-event";let tz=!1;function hse(e){tz=e}const mse=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,gse=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,pse={};function I_(e,t,r=pse){if(!SP&&"zIndex"in t&&(console.warn(gse),SP=!0),!kP&&t.draggable){var n=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;n&&!s&&(console.warn(mse),kP=!0)}for(var a in r)if(!_P[a]){var i=a.slice(0,2)==="on",o=r[a]!==t[a];if(i&&o){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e.off(c,r[a])}var u=!t.hasOwnProperty(a);u&&e.setAttr(a,void 0)}var d=tz||t._useStrictMode,f={},h=!1;const g={};for(var a in t)if(!_P[a]){var i=a.slice(0,2)==="on",x=r[a]!==t[a];if(i&&x){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t[a]&&(g[c]=t[a])}!i&&(t[a]!==r[a]||d&&t[a]!==e.getAttr(a))&&(h=!0,f[a]=t[a])}h&&(e.setAttrs(f),Qf(e));for(var c in g)e.on(c+RC,g[c])}function Qf(e){if(!fse.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var t5=WT();const rz={},xse={};xv.Node.prototype._applyProps=I_;function yse(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),Qf(e)}function vse(e,t,r){let n=xv[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=xv.Group);const s={},a={};for(var i in t){var o=i.slice(0,2)==="on";o?a[i]=t[i]:s[i]=t[i]}const c=new n(s);return I_(c,a),c}function wse(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function bse(e,t,r){return!1}function _se(e){return e}function Sse(){return null}function kse(){return null}function Tse(e,t,r,n){return xse}function Cse(){}function Nse(e){}function Ese(e,t){return!1}function Ase(){return rz}function jse(){return rz}const Pse=setTimeout,Mse=clearTimeout,Fse=-1;function Dse(e,t){return!1}const Ose=!1,Rse=!0,Ise=!0;function Lse(e,t){t.parent===e?t.moveToTop():e.add(t),Qf(e)}function Bse(e,t){t.parent===e?t.moveToTop():e.add(t),Qf(e)}function nz(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),Qf(e)}function $se(e,t,r){nz(e,t,r)}function zse(e,t){t.destroy(),t.off(RC),Qf(e)}function Use(e,t){t.destroy(),t.off(RC),Qf(e)}function Wse(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function Hse(e,t,r){}function Gse(e,t,r,n,s){I_(e,s,n)}function Vse(e){e.hide(),Qf(e)}function qse(e){}function Kse(e,t){(t.visible==null||t.visible)&&e.show()}function Yse(e,t){}function Xse(e){}function Jse(){}const Qse=()=>ez.DefaultEventPriority,Zse=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Lse,appendChildToContainer:Bse,appendInitialChild:yse,cancelTimeout:Mse,clearContainer:Xse,commitMount:Hse,commitTextUpdate:Wse,commitUpdate:Gse,createInstance:vse,createTextInstance:wse,detachDeletedInstance:Jse,finalizeInitialChildren:bse,getChildHostContext:jse,getCurrentEventPriority:Qse,getPublicInstance:_se,getRootHostContext:Ase,hideInstance:Vse,hideTextInstance:qse,idlePriority:t5.unstable_IdlePriority,insertBefore:nz,insertInContainerBefore:$se,isPrimaryRenderer:Ose,noTimeout:Fse,now:t5.unstable_now,prepareForCommit:Sse,preparePortalMount:kse,prepareUpdate:Tse,removeChild:zse,removeChildFromContainer:Use,resetAfterCommit:Cse,resetTextContent:Nse,run:t5.unstable_runWithPriority,scheduleTimeout:Pse,shouldDeprioritizeSubtree:Ese,shouldSetTextContent:Dse,supportsMutation:Ise,unhideInstance:Kse,unhideTextInstance:Yse,warnsIfNotActing:Rse},Symbol.toStringTag,{value:"Module"}));var eae=Object.defineProperty,tae=Object.defineProperties,rae=Object.getOwnPropertyDescriptors,TP=Object.getOwnPropertySymbols,nae=Object.prototype.hasOwnProperty,sae=Object.prototype.propertyIsEnumerable,CP=(e,t,r)=>t in e?eae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,NP=(e,t)=>{for(var r in t||(t={}))nae.call(t,r)&&CP(e,r,t[r]);if(TP)for(var r of TP(t))sae.call(t,r)&&CP(e,r,t[r]);return e},aae=(e,t)=>tae(e,rae(t)),EP,AP;typeof window<"u"&&((EP=window.document)!=null&&EP.createElement||((AP=window.navigator)==null?void 0:AP.product)==="ReactNative")?_.useLayoutEffect:_.useEffect;function sz(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=e.child;for(;n;){const s=sz(n,t,r);if(s)return s;n=n.sibling}}function az(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const jP=console.error;console.error=function(){const e=[...arguments].join("");if(e?.startsWith("Warning:")&&e.includes("useContext")){console.error=jP;return}return jP.apply(this,arguments)};const IC=az(_.createContext(null));class iz extends _.Component{render(){return _.createElement(IC.Provider,{value:this._reactInternals},this.props.children)}}function iae(){const e=_.useContext(IC);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=_.useId();return _.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const s=sz(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(s)return s}},[e,t])}function oae(){const e=iae(),[t]=_.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const s=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;s&&s!==IC&&!t.has(s)&&t.set(s,_.useContext(az(s)))}r=r.return}return t}function oz(){const e=oae();return _.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>_.createElement(t,null,_.createElement(r.Provider,aae(NP({},n),{value:e.get(r)}))),t=>_.createElement(iz,NP({},t))),[e])}function lae(e){const t=zs.useRef({});return zs.useLayoutEffect(()=>{t.current=e}),zs.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const cae=e=>{const t=zs.useRef(null),r=zs.useRef(null),n=zs.useRef(null),s=lae(e),a=oz(),i=o=>{const{forwardedRef:c}=e;c&&(typeof c=="function"?c(o):c.current=o)};return zs.useLayoutEffect(()=>(r.current=new xv.Stage({width:e.width,height:e.height,container:t.current}),i(r.current),n.current=vp.createContainer(r.current,ez.LegacyRoot,!1,null),vp.updateContainer(zs.createElement(a,{},e.children),n.current),()=>{xv.isBrowser&&(i(null),vp.updateContainer(null,n.current,null),r.current.destroy())}),[]),zs.useLayoutEffect(()=>{i(r.current),I_(r.current,e,s),vp.updateContainer(zs.createElement(a,{},e.children),n.current,null)}),zs.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},wm="Layer",uae="FastLayer",tu="Group",dae="Label",_i="Rect",Mf="Circle",fae="Ellipse",hae="Wedge",Ui="Line",mae="Sprite",lz="Image",$u="Text",gae="TextPath",pae="Star",xae="Ring",yae="Arc",vae="Tag",wae="Path",bae="RegularPolygon",Qk="Arrow",_ae="Shape",cz="Transformer",Sae="18.2.13",vp=cse(Zse);vp.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:zs.version,rendererPackageName:"react-konva"});const bm=zs.forwardRef((e,t)=>zs.createElement(iz,{},zs.createElement(cae,{...e,forwardedRef:t}))),kae=hse,Tae=Object.freeze(Object.defineProperty({__proto__:null,Arc:yae,Arrow:Qk,Circle:Mf,Ellipse:fae,FastLayer:uae,Group:tu,Image:lz,KonvaRenderer:vp,Label:dae,Layer:wm,Line:Ui,Path:wae,Rect:_i,RegularPolygon:bae,Ring:xae,Shape:_ae,Sprite:mae,Stage:bm,Star:pae,Tag:vae,Text:$u,TextPath:gae,Transformer:cz,Wedge:hae,useContextBridge:oz,useStrictMode:kae,version:Sae},Symbol.toStringTag,{value:"Module"})),zt=({children:e,hover:t=!0,className:r="",paddingClass:n="p-6",...s})=>{const a=`
    bg-white rounded-xl shadow-md border border-gray-200 ${n}
    ${t?"hover:shadow-lg hover:-translate-y-1 transition-all duration-200":""}
    ${r}
  `;return l.jsx(dt.div,{className:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},...s,children:e})},Cae=({children:e,className:t=""})=>l.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${t}`,children:e}),Nae=({children:e,className:t=""})=>l.jsx("h3",{className:`text-xl font-semibold text-gray-800 ${t}`,children:e}),Eae=({children:e,className:t=""})=>l.jsx("div",{className:`py-4 ${t}`,children:e}),Aae=({children:e,className:t=""})=>l.jsx("div",{className:`border-t border-gray-200 pt-4 mt-4 ${t}`,children:e});zt.Header=Cae;zt.Title=Nae;zt.Body=Eae;zt.Footer=Aae;const Na=({isOpen:e=!1,onClose:t,title:r="",children:n,size:s="medium",showCloseButton:a=!0,closeOnBackdropClick:i=!0,className:o="",...c})=>{const u=f=>{i&&f.target===f.currentTarget&&t()};zs.useEffect(()=>{const f=x=>{x.key==="Escape"&&t()},h=window;h.__modalOpenCount||(h.__modalOpenCount=0);let g;return e&&(document.addEventListener("keydown",f),g=document.body.style.overflow,h.__modalOpenCount===0&&(document.body.style.overflow="hidden"),h.__modalOpenCount+=1),()=>{document.removeEventListener("keydown",f),h.__modalOpenCount&&h.__modalOpenCount>0&&(h.__modalOpenCount-=1),h.__modalOpenCount===0&&(g!==void 0?document.body.style.overflow=g||"":document.body.style.overflow="")}},[e,t]);const d={small:"max-w-md",medium:"max-w-lg",large:"max-w-4xl"};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:u,role:"dialog","aria-modal":"true","aria-label":r,...c,children:l.jsxs("div",{className:`
          bg-white rounded-xl shadow-md border border-gray-200 p-8
          hover:shadow-lg hover:-translate-y-1 transition-all duration-200
          w-full ${d[s]} mx-auto
          ${o}
        `,onClick:f=>f.stopPropagation(),children:[(r||a)&&l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r&&l.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:r}),a&&l.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 rounded-full p-2 text-2xl font-bold leading-none","aria-label":"Close modal",children:""})]}),l.jsx("div",{className:"space-y-6",children:n})]})}):null},jae=e=>{const[t,r]=_.useState({width:800,height:600}),n=_.useRef(null),s=_.useCallback(()=>{if(e.current){e.current.getBoundingClientRect();const a=Math.min(1200,window.innerWidth*.8),i=Math.min(800,window.innerHeight*.6),o=4/3;let c=a,u=c/o;u>i&&(u=i,c=u*o),r({width:c,height:u})}},[e]);return _.useEffect(()=>(s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),{canvasSize:t,stageRef:n,updateCanvasSize:s}},Pae=e=>{const[t,r]=_.useState({width:800,height:600}),[n,s]=_.useState({}),a=_.useCallback(()=>{if(e.current){const o=e.current.getBoundingClientRect();r({width:o.width,height:Math.max(400,o.height)})}},[e]),i=_.useCallback(o=>o<480?{stageHeight:300,blockMinSize:50,fontSize:12,padding:10,touchTargetSize:44,arrowThickness:4}:o<768?{stageHeight:400,blockMinSize:60,fontSize:14,padding:15,touchTargetSize:44,arrowThickness:4}:o<1024?{stageHeight:500,blockMinSize:70,fontSize:16,padding:20,touchTargetSize:40,arrowThickness:3}:{stageHeight:600,blockMinSize:80,fontSize:18,padding:25,touchTargetSize:32,arrowThickness:2},[]);return _.useEffect(()=>{const o=i(t.width);s(o)},[t.width,i]),_.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[a]),{containerSize:t,responsiveSettings:n,updateSize:a}},PP={convertToOriginal:(e,t,r)=>r?{x:Number(((e-r.x)/r.scale).toFixed(4)),y:Number(((t-r.y)/r.scale).toFixed(4))}:{x:e,y:t},convertToCanvas:(e,t,r)=>r?{x:Number((r.x+e*r.scale).toFixed(4)),y:Number((r.y+t*r.scale).toFixed(4))}:{x:e,y:t},isPointInImage:(e,t)=>t?e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height:!1,calculateImageScale:(e,t)=>{if(!e||!t)return 1;const r=40,n=t.width-r,s=t.height-r;return Math.min(n/e.width,s/e.height)},calculateImageInfo:(e,t)=>{if(!e||!t)return null;const r=40,n=t.width-r,s=t.height-r,a=Math.min(n/e.width,s/e.height),i=e.width*a,o=e.height*a,c=(t.width-i)/2,u=(t.height-o)/2;return{x:c,y:u,width:i,height:o,scale:a,originalWidth:e.width,originalHeight:e.height}}},Mae=e=>{const t=_.useCallback((n,s)=>PP.convertToOriginal(n,s,e),[e]),r=_.useCallback((n,s)=>PP.convertToCanvas(n,s,e),[e]);return{convertToOriginal:t,convertToCanvas:r}},xy={create:(e,t,r,n,s)=>({id:s,x:e-r/2,y:t-n/2,width:Math.max(r,30),height:Math.max(n,10),fill:"rgba(0, 123, 255, 0.15)",stroke:"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),validate:e=>e.width>0&&e.height>0,findAtPosition:(e,t,r)=>e.find(n=>t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height),generateId:()=>`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},op={create:(e,t,r,n,s,a,i)=>({id:i,startX:e,startY:t,endX:r,endY:n,startBlock:s,endBlock:a,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,pointerLength:10,pointerWidth:10}),snapToNearestBlock:(e,t,r,n=60)=>{let s=null,a=1/0;for(const i of r){const o=i.x+i.width/2,c=i.y+i.height/2,u=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-c,2));u<=n&&u<a&&(a=u,s=i)}return s?{x:s.x+s.width/2,y:s.y+s.height/2,blockId:s.id,block:s,distance:a}:null},validate:(e,t,r,n,s)=>op.snapToNearestBlock(e,t,s)!==null,generateId:()=>`arrow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},r5={create:(e,t,r)=>({id:r,blockId:e,word:t}),update:(e,t,r)=>e.map(n=>n.blockId===t?{...n,word:r}:n),delete:(e,t)=>e.filter(r=>r.blockId!==t),generateId:e=>`word_${e}`,validate:e=>e&&e.trim().length>0},Fae=async e=>{const t=[];if(e.size>512e3){const n=(e.size/1024).toFixed(1);t.push(`Image is too large (${n}KB). Maximum allowed size is 500KB. Please compress or resize your image.`)}return new Promise(n=>{const s=new Image;s.onload=()=>{(s.width>4e3||s.height>4e3)&&t.push(`Image is too large (${s.width}x${s.height} pixels). Maximum allowed dimensions are 4000x4000 pixels. Please resize your image.`),n({valid:t.length===0,errors:t,dimensions:{width:s.width,height:s.height}})},s.onerror=()=>{t.push("Invalid image file"),n({valid:!1,errors:t})},s.src=URL.createObjectURL(e)})},Dae=(e,t=500)=>new Promise(r=>{const n=document.createElement("canvas"),s=n.getContext("2d"),a=new Image;a.onload=()=>{let{width:i,height:o}=a;const c=2e3;if(i>c||o>c){const f=Math.min(c/i,c/o);i*=f,o*=f}n.width=i,n.height=o,s.drawImage(a,0,0,i,o);let u=.8;const d=()=>{n.toBlob(f=>{f.size<=t*1024||u<=.1?r(f):(u-=.1,d())},"image/jpeg",u)};d()},a.onerror=()=>{r(e)},a.src=URL.createObjectURL(e)}),Oae=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=s=>t(s.target.result),n.onerror=s=>r(s),n.readAsDataURL(e)}),Rae=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return{blockMinSize:e?60:40,arrowThickness:e?4:2,touchTargetSize:e?44:32,doubleTapDelay:e?300:200,isMobile:e}},Iae={testData:{blocks:[],words:[],arrows:[],imageUrl:null},canvas:{size:{width:800,height:600},image:null,imageInfo:null,selectedTool:"edit"},creation:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null},ui:{selectedBlock:null,showWordPanel:!1,isLoading:!1,error:null,showImageSizeModal:!1,imageSizeError:null}},Lae=(e,t)=>{switch(t.type){case"SET_CANVAS_SIZE":return{...e,canvas:{...e.canvas,size:t.payload}};case"SET_IMAGE":return{...e,canvas:{...e.canvas,image:t.payload}};case"SET_IMAGE_INFO":return{...e,canvas:{...e.canvas,imageInfo:t.payload}};case"SET_SELECTED_TOOL":return{...e,canvas:{...e.canvas,selectedTool:t.payload}};case"ADD_BLOCK":return{...e,testData:{...e.testData,blocks:[...e.testData.blocks,t.payload]}};case"ADD_WORD":return{...e,testData:{...e.testData,words:[...e.testData.words,t.payload]}};case"ADD_ARROW":return{...e,testData:{...e.testData,arrows:[...e.testData.arrows,t.payload]}};case"UPDATE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)}};case"DELETE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.filter(r=>r.id!==t.payload),words:e.testData.words.filter(r=>r.blockId!==t.payload),arrows:e.testData.arrows.filter(r=>r.startBlock!==t.payload&&r.endBlock!==t.payload)}};case"UPDATE_WORDS":return{...e,testData:{...e.testData,words:t.payload}};case"SET_CREATION_STATE":return{...e,creation:{...e.creation,...t.payload}};case"SET_UI_STATE":return{...e,ui:{...e.ui,...t.payload}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:t.payload}};case"SET_ERROR":return{...e,ui:{...e.ui,error:t.payload}};case"SHOW_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!0,imageSizeError:t.payload}};case"HIDE_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!1,imageSizeError:null}};case"RESET_TESTDATA":return{...e,testData:{blocks:[],words:[],arrows:[],imageUrl:e.testData.imageUrl}};default:return e}},Bae=({testName:e="",showQuestionCount:t=!0,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const[o,c]=_.useReducer(Lae,Iae),{showNotification:u}=ai(),{makeAuthenticatedRequest:d}=zl(),{user:f}=Os(),h=_.useRef(null),g=_.useRef(null),x=_.useRef(null),y=_.useRef({}),v=_.useRef({}),{canvasSize:T,stageRef:k}=jae(h),{containerSize:b,responsiveSettings:C}=Pae(h),[E,j]=_.useState(null),P=C?.stageHeight??600,A=_.useMemo(()=>P+150,[P]),M=C?.padding??20;_.useEffect(()=>{if(!o.canvas.image||!h.current)return;const G=h.current?.clientWidth||800,X=h.current?.clientHeight||600,ne=G/o.canvas.image.width,q=X/o.canvas.image.height,se=Math.min(ne,q,1),ue=o.canvas.image.width*se,me=o.canvas.image.height*se,Ne=(G-ue)/2,ce=(X-me)/2;j({x:Ne,y:ce,width:ue,height:me,scaleX:se,scaleY:se,scale:se,image:o.canvas.image})},[o.canvas.image,h.current?.clientWidth,h.current?.clientHeight]);const{convertToOriginal:F}=Mae(E);_.useEffect(()=>{c({type:"SET_CANVAS_SIZE",payload:T})},[T]),_.useEffect(()=>{E&&c({type:"SET_IMAGE_INFO",payload:E})},[E]),_.useEffect(()=>{const G=x.current;if(!G)return;const X=o.ui.selectedBlock?.id?y.current[o.ui.selectedBlock.id]:null;X?(G.nodes([X]),G.getLayer()?.batchDraw()):(G.nodes([]),G.getLayer()?.batchDraw())},[o.ui.selectedBlock]);const B=_.useCallback(()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:null}}),c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null}}),c({type:"RESET_TESTDATA"}),c({type:"SET_ERROR",payload:null})},[]),V=_.useCallback(async G=>{const X=G.target.files[0];if(!X){u("Please select a file","error");return}try{c({type:"SET_LOADING",payload:!0});const ne=await Fae(X);if(!ne.valid){c({type:"SHOW_IMAGE_SIZE_MODAL",payload:{errors:ne.errors,fileSize:(X.size/1024).toFixed(1),dimensions:ne.dimensions}});return}let q=X;if(X.size>500*1024){u("Image is large, compressing to meet size requirements...","info");try{q=await Dae(X,500);const me=(X.size/1024).toFixed(1),Ne=(q.size/1024).toFixed(1);u(`Image compressed from ${me}KB to ${Ne}KB`,"success")}catch{u("Failed to compress image. Please try a smaller image.","error");return}}const se=await Oae(q),ue=new Image;ue.crossOrigin="anonymous",ue.onload=()=>{c({type:"SET_IMAGE",payload:ue}),c({type:"SET_UI_STATE",payload:{imageUrl:se}}),u("Image uploaded successfully!","success")},ue.onerror=()=>{u("Failed to load image","error")},ue.src=se}catch(ne){console.error("Image upload error:",ne),u("Error processing image","error")}finally{c({type:"SET_LOADING",payload:!1})}},[u]),ee=_.useCallback(G=>{const X=k.current;if(!X)return;const ne=X.getPointerPosition();if(ne){if(o.canvas.selectedTool==="create"){const q=xy.findAtPosition(o.testData.blocks,ne.x,ne.y);if(q){c({type:"SET_UI_STATE",payload:{selectedBlock:q}});return}c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!0,blockCreationStart:{x:ne.x,y:ne.y}}})}else if(o.canvas.selectedTool==="edit"){const q=xy.findAtPosition(o.testData.blocks,ne.x,ne.y);c(q?{type:"SET_UI_STATE",payload:{selectedBlock:q}}:{type:"SET_UI_STATE",payload:{selectedBlock:null}})}else if(o.canvas.selectedTool==="arrow"){const q=G.target===X,se=xy.findAtPosition(o.testData.blocks,ne.x,ne.y);(q||!se)&&c({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!0,arrowStart:{x:ne.x,y:ne.y}}})}}},[o.canvas.selectedTool,E,o.testData.blocks]),ae=_.useCallback(G=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const X=k.current;if(!X)return;const ne=X.getPointerPosition();if(!ne)return;const q=Math.abs(ne.x-o.creation.blockCreationStart.x),se=Math.abs(ne.y-o.creation.blockCreationStart.y),ue=10,me=Math.max(q,ue),Ne=Math.max(se,ue);c({type:"SET_CREATION_STATE",payload:{previewBlock:{x:Math.min(ne.x,o.creation.blockCreationStart.x),y:Math.min(ne.y,o.creation.blockCreationStart.y),width:me,height:Ne,fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,dash:[5,5],opacity:.7}}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const X=k.current;if(!X)return;const ne=X.getPointerPosition();if(!ne)return;c({type:"SET_CREATION_STATE",payload:{previewArrow:{startX:o.creation.arrowStart.x,startY:o.creation.arrowStart.y,endX:ne.x,endY:ne.y,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,dash:[5,5],opacity:.7}}})}},[o.creation]),Z=_.useCallback(G=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const X=k.current;if(!X)return;const ne=X.getPointerPosition();if(!ne)return;const q=Math.abs(ne.x-o.creation.blockCreationStart.x),se=Math.abs(ne.y-o.creation.blockCreationStart.y),ue=10,me=Math.max(q,ue),Ne=Math.max(se,ue),ce=Math.min(ne.x,o.creation.blockCreationStart.x)+me/2,Ue=Math.min(ne.y,o.creation.blockCreationStart.y)+Ne/2,pe=xy.generateId(),je=xy.create(ce,Ue,me,Ne,pe),We=r5.create(pe,`Word ${o.testData.blocks.length+1}`,r5.generateId(pe));c({type:"ADD_BLOCK",payload:je}),c({type:"ADD_WORD",payload:We}),c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,blockCreationStart:null,previewBlock:null}}),o.testData.blocks.length===0&&c({type:"SET_UI_STATE",payload:{showWordPanel:!0}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const X=k.current;if(!X)return;const ne=X.getPointerPosition();if(!ne)return;if(op.validate(o.creation.arrowStart.x,o.creation.arrowStart.y,ne.x,ne.y,o.testData.blocks)){const q=op.snapToNearestBlock(o.creation.arrowStart.x,o.creation.arrowStart.y,o.testData.blocks),se=op.snapToNearestBlock(ne.x,ne.y,o.testData.blocks),ue=q?q.x:o.creation.arrowStart.x,me=q?q.y:o.creation.arrowStart.y,Ne=se?se.x:ne.x,ce=se?se.y:ne.y,Ue=op.generateId(),pe=Rae(),je=op.create(ue,me,Ne,ce,q?q.blockId:null,se?se.blockId:null,Ue,{strokeWidth:pe.arrowThickness,isMobile:pe.isMobile});c({type:"ADD_ARROW",payload:je}),u("Arrow created successfully!","success")}else u("Arrow must start near a block!","error");c({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!1,arrowStart:null,previewArrow:null}})}},[o.creation,o.testData.blocks,u]),te=_.useCallback(G=>{G.evt.preventDefault(),ee(G)},[ee]),L=_.useCallback(G=>{G.evt.preventDefault(),ae(G)},[ae]),K=_.useCallback(G=>{G.evt.preventDefault(),Z(G)},[Z]),I=_.useCallback(async()=>{console.log(" [MatchingTestCreator] handleSaveTest clicked");const G=H();if(Object.keys(G).length>0){console.warn(" [MatchingTestCreator] Validation errors:",G),u("Please fix validation errors before saving","error");return}try{console.log(" [MatchingTestCreator] Preparing data to save...",{blocks:o.testData.blocks.length,words:o.testData.words.length,arrows:o.testData.arrows.length,imageUrl:o.ui.imageUrl?"present":"missing"}),c({type:"SET_LOADING",payload:!0});let X=o.ui.imageUrl;if(o.ui.imageUrl&&o.ui.imageUrl.startsWith("data:")){const q=await d("/.netlify/functions/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:o.ui.imageUrl,folder:"matching_tests"})}),se=await q.json();if(q.ok&&se.success&&se.url)X=se.url;else throw new Error(se.message||"Upload failed")}const ne=o.testData.blocks.map((q,se)=>{let ue;if(E){const ce=F(q.x,q.y),Ue=F(q.x+q.width,q.y+q.height);ue={x:ce.x,y:ce.y,width:Number((Ue.x-ce.x).toFixed(4)),height:Number((Ue.y-ce.y).toFixed(4))}}else ue={x:Number(q.x.toFixed(4)),y:Number(q.y.toFixed(4)),width:Number(q.width.toFixed(4)),height:Number(q.height.toFixed(4))};const me=o.testData.words.find(ce=>ce.blockId===q.id),Ne=o.testData.arrows.find(ce=>ce.startBlock===q.id);return{question_id:se+1,word:me?.word||`Word ${se+1}`,block_coordinates:ue,has_arrow:!!Ne,arrow:Ne&&E?(()=>{const ce=F(Ne.startX,Ne.startY),Ue=F(Ne.endX,Ne.endY),pe=ce.x/E.originalWidth*100,je=ce.y/E.originalHeight*100,We=Ue.x/E.originalWidth*100,Me=Ue.y/E.originalHeight*100;return{start_x:Number(ce.x.toFixed(4)),start_y:Number(ce.y.toFixed(4)),end_x:Number(Ue.x.toFixed(4)),end_y:Number(Ue.y.toFixed(4)),rel_start_x:Number(pe.toFixed(4)),rel_start_y:Number(je.toFixed(4)),rel_end_x:Number(We.toFixed(4)),rel_end_y:Number(Me.toFixed(4)),image_width:E.originalWidth,image_height:E.originalHeight,style:Ne.style||{color:"#dc3545",thickness:3}}})():null}});r&&(console.log(" [MatchingTestCreator] Calling onTestSaved with processed data"),r({success:!0,message:"Test data prepared for assignment",blocks:o.testData.blocks,words:o.testData.words,arrows:o.testData.arrows,imageUrl:X,processedQuestions:ne}))}catch(X){console.error("Save error:",X),u(`Error saving test: ${X.message}`,"error")}finally{c({type:"SET_LOADING",payload:!1})}},[o.testData,o.ui.imageUrl,E,F,d,r,u,e,f]),H=_.useCallback(()=>{const G={};return e.trim()||(G.testName="Test name is required"),o.testData.blocks.length===0&&(G.blocks="At least one block is required"),G},[e,o.testData.blocks.length]),U=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border-b",children:[l.jsx(rt,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"create"}),variant:o.canvas.selectedTool==="create"?"primary":"secondary",size:"sm",children:" Create Blocks"}),l.jsx(rt,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"edit"}),variant:o.canvas.selectedTool==="edit"?"primary":"secondary",size:"sm",children:" Edit Blocks"}),l.jsx(rt,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"arrow"}),variant:o.canvas.selectedTool==="arrow"?"primary":"secondary",size:"sm",children:" Draw Arrows"}),l.jsx(rt,{onClick:B,variant:"secondary",size:"sm",children:" Reset"}),l.jsx(rt,{onClick:()=>g.current?.click(),variant:"secondary",size:"sm",children:" Upload Image"}),l.jsx("div",{className:"text-xs text-gray-500 text-center col-span-full",children:"Max size: 500KB  Max dimensions: 4000x4000px"})]}),R=()=>l.jsx(bm,{width:b.width,height:A,ref:k,onMouseDown:ee,onMouseMove:ae,onMouseUp:Z,onTouchStart:te,onTouchMove:L,onTouchEnd:K,className:o.canvas.selectedTool==="arrow"||o.canvas.selectedTool==="create"?"cursor-crosshair":"cursor-default",children:l.jsxs(wm,{children:[o.canvas.image&&E&&l.jsx(lz,{image:o.canvas.image,x:E.x,y:E.y,width:E.width,height:E.height}),o.testData.blocks.map(G=>l.jsxs(tu,{ref:X=>{X&&(v.current[G.id]=X)},draggable:o.canvas.selectedTool==="edit",x:G.x,y:G.y,onMouseEnter:X=>{const ne=X.target.getStage()?.container();ne&&(ne.style.cursor=o.ui.selectedBlock?.id===G.id?"nwse-resize":"move")},onMouseLeave:X=>{const ne=X.target.getStage()?.container();ne&&(ne.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onDragStart:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:G}})},onDragEnd:X=>{const{x:ne,y:q}=X.target.position();c({type:"UPDATE_BLOCK",payload:{id:G.id,updates:{x:ne,y:q}}})},onClick:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:G}})},onTap:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:G}})},children:[l.jsx(_i,{ref:X=>{X&&(y.current[G.id]=X)},width:G.width,height:G.height,fill:G.fill,stroke:G.stroke,strokeWidth:G.strokeWidth,cornerRadius:G.cornerRadius,shadowColor:G.shadowColor,shadowBlur:G.shadowBlur,shadowOffset:G.shadowOffset,shadowOpacity:G.shadowOpacity,draggable:o.canvas.selectedTool==="edit",onDragEnd:X=>{const{x:ne,y:q}=X.target.getParent().position();c({type:"UPDATE_BLOCK",payload:{id:G.id,updates:{x:ne,y:q}}})},onMouseEnter:X=>{const ne=X.target.getStage()?.container();ne&&(ne.style.cursor=o.ui.selectedBlock?.id===G.id?"nwse-resize":"move")},onMouseLeave:X=>{const ne=X.target.getStage()?.container();ne&&(ne.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onTransformEnd:X=>{const ne=y.current[G.id];if(!ne)return;const q=Math.max(10,ne.width()*ne.scaleX()),se=Math.max(10,ne.height()*ne.scaleY());ne.scaleX(1),ne.scaleY(1),c({type:"UPDATE_BLOCK",payload:{id:G.id,updates:{width:q,height:se}}})}}),l.jsx($u,{x:2,y:2,text:`${o.testData.blocks.indexOf(G)+1}`,fontSize:Math.min(C.fontSize,Math.max(8,G.width/4)),fontFamily:"Arial",fill:"#333",fontStyle:"bold",listening:!1})]},G.id)),l.jsx(cz,{ref:x,rotateEnabled:!1,flipEnabled:!1,boundBoxFunc:(G,X)=>({...X,width:Math.max(X.width,10),height:Math.max(X.height,10)})}),o.testData.arrows.map(G=>l.jsx(Qk,{points:[G.startX,G.startY,G.endX,G.endY],stroke:G.stroke,fill:G.fill,strokeWidth:G.strokeWidth||C.arrowThickness,pointerLength:G.pointerLength,pointerWidth:G.pointerWidth},G.id)),o.creation.previewBlock&&l.jsx(_i,{x:o.creation.previewBlock.x,y:o.creation.previewBlock.y,width:o.creation.previewBlock.width,height:o.creation.previewBlock.height,fill:o.creation.previewBlock.fill,stroke:o.creation.previewBlock.stroke,strokeWidth:o.creation.previewBlock.strokeWidth,dash:o.creation.previewBlock.dash,opacity:o.creation.previewBlock.opacity}),o.creation.previewArrow&&l.jsx(Qk,{points:[o.creation.previewArrow.startX,o.creation.previewArrow.startY,o.creation.previewArrow.endX,o.creation.previewArrow.endY],stroke:o.creation.previewArrow.stroke,fill:o.creation.previewArrow.fill,strokeWidth:o.creation.previewArrow.strokeWidth,dash:o.creation.previewArrow.dash,opacity:o.creation.previewArrow.opacity})]})}),z=_.useMemo(()=>o.testData.blocks.length===0?null:l.jsxs("div",{className:"word-panel bg-gray-50 border-t border-gray-200 p-4 w-full flex-shrink-0",style:{height:"clamp(420px, 55vh, 640px)",overflowY:"auto"},children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Words (Auto-created with blocks)"}),l.jsx("div",{className:"space-y-2",children:o.testData.words.map(G=>{const X=o.testData.blocks.find(ne=>ne.id===G.blockId);return l.jsxs("div",{className:"p-2 bg-white rounded border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:["Block ",o.testData.blocks.indexOf(X)+1]}),l.jsx("button",{onClick:()=>c({type:"DELETE_BLOCK",payload:X.id}),className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),l.jsx("input",{type:"text",value:G.word,onChange:ne=>{const q=r5.update(o.testData.words,G.blockId,ne.target.value);c({type:"UPDATE_WORDS",payload:q})},className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter word text"})]},G.blockId)})})]}),[o.testData.words,o.testData.blocks]);return l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-screen bg-gray-100",children:[l.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("div",{children:l.jsx("div",{className:"mt-2 text-sm text-gray-600",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Questions:"})," ",o.testData.blocks.length," (auto-generated from blocks)"]})]})})})})}),U(),l.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto gap-4",children:[l.jsx("div",{ref:h,className:"bg-white border overflow-hidden flex-none",style:{height:`${A}px`,minHeight:`${A}px`,maxHeight:`${A+60}px`,padding:`${M}px`},children:R()}),z]}),l.jsx("div",{className:"bg-white border-t p-4",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(rt,{onClick:I,disabled:a||o.ui.isLoading,variant:"primary",size:"lg",children:a||o.ui.isLoading?l.jsx(cn,{size:"sm"}):"Save Test"})})}),l.jsx("input",{ref:g,type:"file",accept:"image/*,application/pdf",onChange:V,className:"hidden"}),l.jsx(Na,{isOpen:o.ui.showImageSizeModal,onClose:()=>c({type:"HIDE_IMAGE_SIZE_MODAL"}),title:" Image Too Large",size:"medium",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("span",{className:"text-red-600 text-2xl mr-2",children:""}),l.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Image Size Issues"})]}),l.jsx("div",{className:"text-red-700",children:o.ui.imageSizeError?.errors.map((G,X)=>l.jsxs("div",{className:"mb-2",children:[" ",G]},X))})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Current Image Details:"}),l.jsxs("div",{className:"text-blue-700 space-y-1",children:[l.jsxs("div",{children:[" File size: ",o.ui.imageSizeError?.fileSize,"KB"]}),o.ui.imageSizeError?.dimensions&&l.jsxs("div",{children:[" Dimensions: ",o.ui.imageSizeError.dimensions.width,"  ",o.ui.imageSizeError.dimensions.height," pixels"]})]})]}),l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Requirements:"}),l.jsxs("div",{className:"text-green-700 space-y-1",children:[l.jsx("div",{children:" Maximum file size: 500KB"}),l.jsx("div",{children:" Maximum dimensions: 4000  4000 pixels"}),l.jsx("div",{children:" Supported formats: All image formats (JPEG, PNG, WebP, etc.)"})]})]}),l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:" How to Fix:"}),l.jsxs("div",{className:"text-yellow-700 space-y-1",children:[l.jsx("div",{children:" Use an image editor to resize your image"}),l.jsx("div",{children:" Compress the image using online tools"}),l.jsx("div",{children:" Try a different image with smaller dimensions"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(rt,{onClick:()=>c({type:"HIDE_IMAGE_SIZE_MODAL"}),variant:"secondary",children:"Close"}),l.jsx(rt,{onClick:()=>{c({type:"HIDE_IMAGE_SIZE_MODAL"}),g.current?.click()},variant:"primary",children:"Try Another Image"})]})]})})]})},u1=_.createContext(null);function $ae(e,t){return{getTheme:function(){return t??null}}}function td(){const e=_.useContext(u1);return e==null&&(function(t,...r){const n=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of r)s.append("v",a);throw n.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),e}function Xt(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const du=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,zae=du&&"documentMode"in document?document.documentMode:null,Lu=du&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),_m=du&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),c4=!(!du||!("InputEvent"in window)||zae)&&"getTargetRanges"in new window.InputEvent("input"),yv=du&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),zp=du&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Uae=du&&/Android/.test(navigator.userAgent),uz=du&&/^(?=.*Chrome).*/i.test(navigator.userAgent),MP=du&&Uae&&uz,u4=du&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!uz;function dz(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const Wae=1,Hae=3,Gae=9,Vae=11,Sm=0,fz=1,Up=2,qae=0,Kae=1,Yae=2,d4=4,f4=8,LC=128,Xae=1792|(112|(3|d4|f4)|LC),BC=1,$C=2,zC=3,UC=4,WC=5,HC=6,L_=yv||zp||u4?"":"",o0=`

`,Jae=_m?"":L_,km={bold:1,capitalize:1024,code:16,highlight:LC,italic:2,lowercase:256,strikethrough:d4,subscript:32,superscript:64,underline:f4,uppercase:512},Qae={directionless:1,unmergeable:2},FP={center:$C,end:HC,justify:UC,left:BC,right:zC,start:WC},Zae={[$C]:"center",[HC]:"end",[UC]:"justify",[BC]:"left",[zC]:"right",[WC]:"start"},eie={normal:0,segmented:2,token:1},tie={[qae]:"normal",[Yae]:"segmented",[Kae]:"token"},DP="$config";function hz(e,t,r,n,s,a){let i=e.getFirstChild();for(;i!==null;){const o=i.__key;i.__parent===t&&(Dt(i)&&hz(i,o,r,n,s,a),r.has(o)||a.delete(o),s.push(o)),i=i.getNextSibling()}}const rie=100;let Zk=!1,GC=0;function nie(e){GC=e.timeStamp}function n5(e,t,r){const n=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||n&&e.previousSibling===s)||n&&K_(e,r)!==void 0}function sie(e,t,r){const n=lu(wc(r));let s=null,a=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,a=n.focusOffset);const i=e.nodeValue;i!==null&&d7(t,i,s,a,!1)}function aie(e,t,r){if(Ht(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return v0(t)&&r.isAttached()}function iie(e,t,r,n){for(let s=e;s&&!ioe(s);s=u2(s)){const a=K_(s,t);if(a!==void 0){const i=za(a,r);if(i)return zn(i)||!Ps(s)?void 0:[s,i]}else if(s===n)return[n,cU(r)]}}function mz(e,t,r){Zk=!0;const n=performance.now()-GC>rie;try{Nl(e,(()=>{const s=mr()||(function(h){return h.getEditorState().read((()=>{const g=mr();return g!==null?g.clone():null}))})(e),a=new Map,i=e.getRootElement(),o=e._editorState,c=e._blockCursorElement;let u=!1,d="";for(let h=0;h<t.length;h++){const g=t[h],x=g.type,y=g.target,v=iie(y,e,o,i);if(!v)continue;const[T,k]=v;if(x==="characterData")n&&gr(k)&&v0(y)&&aie(s,y,k)&&sie(y,k,e);else if(x==="childList"){u=!0;const b=g.addedNodes;for(let j=0;j<b.length;j++){const P=b[j],A=oU(P),M=P.parentNode;if(M!=null&&P!==c&&A===null&&!n5(P,M,e)){if(_m){const F=(Ps(P)?P.innerText:null)||P.nodeValue;F&&(d+=F)}M.removeChild(P)}}const C=g.removedNodes,E=C.length;if(E>0){let j=0;for(let P=0;P<E;P++){const A=C[P];(n5(A,y,e)||c===A)&&(y.appendChild(A),j++)}E!==j&&a.set(T,k)}}}if(a.size>0)for(const[h,g]of a)g.reconcileObservedMutation(h,e);const f=r.takeRecords();if(f.length>0){for(let h=0;h<f.length;h++){const g=f[h],x=g.addedNodes,y=g.target;for(let v=0;v<x.length;v++){const T=x[v],k=T.parentNode;k==null||T.nodeName!=="BR"||n5(T,y,e)||k.removeChild(T)}}r.takeRecords()}s!==null&&(u&&Xi(s),_m&&hU(e)&&s.insertRawText(d))}))}finally{Zk=!1}}function gz(e){const t=e._observer;t!==null&&mz(e,t.takeRecords(),t)}function pz(e){(function(t){GC===0&&wc(t).addEventListener("textInput",nie,!0)})(e),e._observer=new MutationObserver(((t,r)=>{mz(e,t,r)}))}function oie(e){const t=new Map,r=new Set;for(let n=typeof e=="function"?e:e.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:s}=p7(n);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&r.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:r,sharedConfigMap:t}}let lie=class xz{constructor(t,r,n=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=r,this.unknownState=n,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,o=a!==void 0?a:(function(c,u,d){let f=d.size;if(u)for(const h in u){const g=c.get(h);g&&d.has(g)||f++}return f})(i,n,s);this.size=o}getValue(t){const r=this.knownState.get(t);if(r!==void 0)return r;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(n=t.parse(s)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},r={};for(const[n,s]of this.knownState)n.isEqual(s,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(s);for(const n of this.sharedNodeState.flatKeys)n in t&&(r[n]=t[n],delete t[n]);return OP(t)&&(r.$=t),r}getWritable(t){if(this.node===t)return this;const{sharedNodeState:r,unknownState:n}=this,s=new Map(this.knownState);return new xz(t,r,(function(a,i,o){let c;if(o)for(const[u,d]of Object.entries(o)){const f=a.get(u);f?i.has(f)||i.set(f,f.parse(d)):(c=c||{},c[u]=d)}return c})(r.sharedConfigMap,s,n),s,this.size)}updateFromKnown(t,r){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&n in a||(a&&(delete a[n],this.unknownState=OP(a)),this.size++),s.set(t,r)}updateFromUnknown(t,r){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(r)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=r)}updateFromJSON(t){const{knownState:r}=this;for(const n of r.keys())r.set(n,n.defaultValue);if(this.size=r.size,this.unknownState=void 0,t)for(const[n,s]of Object.entries(t))this.updateFromUnknown(n,s)}};function cie(e){const t=e.getWritable(),r=t.__state?t.__state.getWritable(t):new lie(t,yz(t));return t.__state=r,r}function yz(e){return e.__state?e.__state.sharedNodeState:sU(d2(),e.getType()).sharedNodeState}function OP(e){if(e)for(const t in e)return e}function RP(e,t,r){for(const[n,s]of t.knownState){if(e.has(n.key))continue;e.add(n.key);const a=r?r.getValue(n):n.defaultValue;if(a!==s&&!n.isEqual(a,s))return!0}return!1}function IP(e,t,r){const{unknownState:n}=t,s=r?r.unknownState:void 0;if(n){for(const[a,i]of Object.entries(n))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function LP(e,t){const r=e.__state;return r&&r.node===e?r.getWritable(t):r}function BP(e,t){const r=e.__mode,n=e.__format,s=e.__style,a=t.__mode,i=t.__format,o=t.__style,c=e.__state,u=t.__state;return(r===null||r===a)&&(n===null||n===i)&&(s===null||s===o)&&(e.__state===null||c===u||(function(d,f){if(d===f)return!0;if(d&&f&&d.size!==f.size)return!1;const h=new Set;return!(d&&RP(h,d,f)||f&&RP(h,f,d)||d&&IP(h,d,f)||f&&IP(h,f,d))})(c,u))}function $P(e,t){const r=e.mergeWithSibling(t),n=ta()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function zP(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&gr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(BP(t,n)){n=$P(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&gr(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(BP(n,r)){n=$P(n,r);break}break}r.remove()}}else n.remove()}function h4(e){return UP(e.anchor),UP(e.focus),e}function UP(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),gr(n)){e.set(n.__key,s?n.getTextContentSize():0,"text",!0);break}if(!Dt(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element",!0)}}let Tm,po,vv,B_,e8,t8,Cm,su,r8,wv,Qa="",Ru=null,Iu="",$d="",lp=!1,m4=!1;function g4(e,t){const r=Cm.get(e);if(t!==null){const n=i8(e);n.parentNode===t&&t.removeChild(n)}if(su.has(e)||po._keyToDOMMap.delete(e),Dt(r)){const n=x4(r,Cm);n8(n,0,n.length-1,null)}r!==void 0&&f7(wv,vv,B_,r,"destroyed")}function n8(e,t,r,n){let s=t;for(;s<=r;++s){const a=e[s];a!==void 0&&g4(a,n)}}function Uh(e,t){e.setProperty("text-align",t)}const uie="40px";function vz(e,t){const r=Tm.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||uie;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function wz(e,t){const r=e.style;t===0?Uh(r,""):t===BC?Uh(r,"left"):t===$C?Uh(r,"center"):t===zC?Uh(r,"right"):t===UC?Uh(r,"justify"):t===WC?Uh(r,"start"):t===HC&&Uh(r,"end")}function s8(e,t){const r=(function(n){const s=n.__dir;if(s!==null)return s;if(ri(n))return null;const a=n.getParentOrThrow();return ri(a)&&a.__dir===null?"auto":null})(t);r!==null?e.dir=r:e.removeAttribute("dir")}function p4(e,t){const r=su.get(e);r===void 0&&Xt(60);const n=r.createDOM(Tm,po);if((function(s,a,i){const o=i._keyToDOMMap;(function(c,u,d){const f=`__lexicalKey_${u._key}`;c[f]=d})(a,i,s),o.set(s,a)})(e,n,po),gr(r)?n.setAttribute("data-lexical-text","true"):zn(r)&&n.setAttribute("data-lexical-decorator","true"),Dt(r)){const s=r.__indent,a=r.__size;if(s8(n,r),s!==0&&vz(n,s),a!==0){const o=a-1;a8(x4(r,su),r,0,o,r.getDOMSlot(n))}const i=r.__format;i!==0&&wz(n,i),r.isInline()||bz(null,r,n),Y_(r)&&(Qa+=o0,$d+=o0)}else{const s=r.getTextContent();if(zn(r)){const a=r.decorate(po,Tm);a!==null&&_z(e,a),n.contentEditable="false"}Qa+=s,$d+=s}return t!==null&&t.insertChild(n),f7(wv,vv,B_,r,"created"),n}function a8(e,t,r,n,s){const a=Qa;Qa="";let i=r;for(;i<=n;++i){p4(e[i],s);const o=su.get(e[i]);o!==null&&gr(o)&&(Ru===null&&(Ru=o.getFormat()),Iu===""&&(Iu=o.getStyle()))}Y_(t)&&(Qa+=o0),s.element.__lexicalTextContent=Qa,Qa=a+Qa}function WP(e,t){if(e){const r=e.__last;if(r){const n=t.get(r);if(n)return Jd(n)?"line-break":zn(n)&&n.isInline()?"decorator":null}return"empty"}return null}function bz(e,t,r){const n=WP(e,Cm),s=WP(t,su);n!==s&&t.getDOMSlot(r).setManagedLineBreak(s)}function die(e,t,r){var n;Ru=null,Iu="",(function(s,a,i){const o=Qa,c=s.__size,u=a.__size;Qa="";const d=i.element;if(c===1&&u===1){const f=s.__first,h=a.__first;if(f===h)My(f,d);else{const x=i8(f),y=p4(h,null);try{d.replaceChild(y,x)}catch(v){if(typeof v=="object"&&v!=null){const T=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${h}}, old child: {tag: ${x.tagName}, key: ${f}}.`;throw new Error(T)}throw v}g4(f,null)}const g=su.get(h);gr(g)&&(Ru===null&&(Ru=g.getFormat()),Iu===""&&(Iu=g.getStyle()))}else{const f=x4(s,Cm),h=x4(a,su);if(f.length!==c&&Xt(227),h.length!==u&&Xt(228),c===0)u!==0&&a8(h,a,0,u-1,i);else if(u===0){if(c!==0){const g=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;n8(f,0,c-1,g?null:d),g&&(d.textContent="")}}else(function(g,x,y,v,T,k){const b=v-1,C=T-1;let E,j,P=k.getFirstChild(),A=0,M=0;for(;A<=b&&M<=C;){const V=x[A],ee=y[M];if(V===ee)P=s5(My(ee,k.element)),A++,M++;else{E===void 0&&(E=new Set(x)),j===void 0&&(j=new Set(y));const Z=j.has(V),te=E.has(ee);if(Z)if(te){const L=Nm(po,ee);L===P?P=s5(My(ee,k.element)):(k.withBefore(P).insertChild(L),My(ee,k.element)),A++,M++}else p4(ee,k.withBefore(P)),M++;else P=s5(i8(V)),g4(V,k.element),A++}const ae=su.get(ee);ae!==null&&gr(ae)&&(Ru===null&&(Ru=ae.getFormat()),Iu===""&&(Iu=ae.getStyle()))}const F=A>b,B=M>C;if(F&&!B){const V=y[C+1],ee=V===void 0?null:po.getElementByKey(V);a8(y,g,M,C,k.withBefore(ee))}else B&&!F&&n8(x,A,b,k.element)})(a,f,h,c,u,i)}Y_(a)&&(Qa+=o0),d.__lexicalTextContent=Qa,Qa=o+Qa})(e,t,t.getDOMSlot(r)),n=t,Ru==null||Ru===n.__textFormat||m4||n.setTextFormat(Ru),(function(s){Iu===""||Iu===s.__textStyle||m4||s.setTextStyle(Iu)})(t)}function x4(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&Xt(101),r.push(n),n=s.__next}return r}function My(e,t){const r=Cm.get(e);let n=su.get(e);r!==void 0&&n!==void 0||Xt(61);const s=lp||t8.has(e)||e8.has(e),a=Nm(po,e);if(r===n&&!s){if(Dt(r)){const i=a.__lexicalTextContent;i!==void 0&&(Qa+=i,$d+=i)}else{const i=r.getTextContent();$d+=i,Qa+=i}return a}if(r!==n&&s&&f7(wv,vv,B_,n,"updated"),n.updateDOM(r,a,Tm)){const i=p4(e,null);return t===null&&Xt(62),t.replaceChild(i,a),g4(e,null),i}if(Dt(r)&&Dt(n)){const i=n.__indent;(lp||i!==r.__indent)&&vz(a,i);const o=n.__format;if((lp||o!==r.__format)&&wz(a,o),s&&(die(r,n,a),ri(n)||n.isInline()||bz(r,n,a)),Y_(n)&&(Qa+=o0,$d+=o0),(lp||n.__dir!==r.__dir)&&(s8(a,n),ri(n)&&!lp))for(const c of n.getChildren())Dt(c)&&s8(Nm(po,c.getKey()),c)}else{const i=n.getTextContent();if(zn(n)){const o=n.decorate(po,Tm);o!==null&&_z(e,o)}Qa+=i,$d+=i}if(!m4&&ri(n)&&n.__cachedText!==$d){const i=n.getWritable();i.__cachedText=$d,n=i}return a}function _z(e,t){let r=po._pendingDecorators;const n=po._decorators;if(r===null){if(n[e]===t)return;r=lU(po)}r[e]=t}function s5(e){let t=e.nextSibling;return t!==null&&t===po._blockCursorElement&&(t=t.nextSibling),t}function fie(e,t,r,n,s,a){Qa="",$d="",lp=n===Up,po=r,Tm=r._config,vv=r._nodes,B_=po._listeners.mutation,e8=s,t8=a,Cm=e._nodeMap,su=t._nodeMap,m4=t._readOnly,r8=new Map(r._keyToDOMMap);const i=new Map;return wv=i,My("root",null),po=void 0,vv=void 0,e8=void 0,t8=void 0,Cm=void 0,su=void 0,Tm=void 0,r8=void 0,wv=void 0,i}function i8(e){const t=r8.get(e);return t===void 0&&Xt(75,e),t}function Zr(e){return{type:e}}const Sz=Zr("SELECTION_CHANGE_COMMAND"),hie=Zr("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),VC=Zr("CLICK_COMMAND"),cm=Zr("DELETE_CHARACTER_COMMAND"),Tp=Zr("INSERT_LINE_BREAK_COMMAND"),bv=Zr("INSERT_PARAGRAPH_COMMAND"),Cp=Zr("CONTROLLED_TEXT_INSERTION_COMMAND"),qC=Zr("PASTE_COMMAND"),o8=Zr("REMOVE_TEXT_COMMAND"),_v=Zr("DELETE_WORD_COMMAND"),Sv=Zr("DELETE_LINE_COMMAND"),go=Zr("FORMAT_TEXT_COMMAND"),KC=Zr("UNDO_COMMAND"),YC=Zr("REDO_COMMAND"),mie=Zr("KEYDOWN_COMMAND"),kz=Zr("KEY_ARROW_RIGHT_COMMAND"),gie=Zr("MOVE_TO_END"),Tz=Zr("KEY_ARROW_LEFT_COMMAND"),pie=Zr("MOVE_TO_START"),Cz=Zr("KEY_ARROW_UP_COMMAND"),Nz=Zr("KEY_ARROW_DOWN_COMMAND"),y4=Zr("KEY_ENTER_COMMAND"),Ez=Zr("KEY_SPACE_COMMAND"),Az=Zr("KEY_BACKSPACE_COMMAND"),jz=Zr("KEY_ESCAPE_COMMAND"),Pz=Zr("KEY_DELETE_COMMAND"),Mz=Zr("KEY_TAB_COMMAND"),xie=Zr("INSERT_TAB_COMMAND"),yie=Zr("INDENT_CONTENT_COMMAND"),HP=Zr("OUTDENT_CONTENT_COMMAND"),Fz=Zr("DROP_COMMAND"),Dz=Zr("FORMAT_ELEMENT_COMMAND"),Oz=Zr("DRAGSTART_COMMAND"),Rz=Zr("DRAGOVER_COMMAND"),vie=Zr("DRAGEND_COMMAND"),$_=Zr("COPY_COMMAND"),XC=Zr("CUT_COMMAND"),l8=Zr("SELECT_ALL_COMMAND"),wie=Zr("CLEAR_EDITOR_COMMAND"),bie=Zr("CLEAR_HISTORY_COMMAND"),Vw=Zr("CAN_REDO_COMMAND"),qw=Zr("CAN_UNDO_COMMAND"),_ie=Zr("FOCUS_COMMAND"),Sie=Zr("BLUR_COMMAND"),kie=Zr("KEY_MODIFIER_COMMAND"),Od=Object.freeze({}),c8=30,u8=[["keydown",function(e,t){if(Vy=e.timeStamp,Iz=e.key,!t.isComposing()&&!Er(t,mie,e)&&e.key!=null){if(a5&&yM(e))return Nl(t,(()=>{Kw(t,i5)})),a5=!1,void(i5="");if((function(r){return es(r,"ArrowRight",{shiftKey:"any"})})(e))Er(t,kz,e);else if((function(r){return es(r,"ArrowRight",Ld)})(e))Er(t,gie,e);else if((function(r){return es(r,"ArrowLeft",{shiftKey:"any"})})(e))Er(t,Tz,e);else if((function(r){return es(r,"ArrowLeft",Ld)})(e))Er(t,pie,e);else if((function(r){return es(r,"ArrowUp",{altKey:"any",shiftKey:"any"})})(e))Er(t,Cz,e);else if((function(r){return es(r,"ArrowDown",{altKey:"any",shiftKey:"any"})})(e))Er(t,Nz,e);else if((function(r){return es(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(e))qy=!0,Er(t,y4,e);else if((function(r){return r.key===" "})(e))Er(t,Ez,e);else if((function(r){return Lu&&es(r,"o",{ctrlKey:!0})})(e))e.preventDefault(),qy=!0,Er(t,Tp,!0);else if((function(r){return es(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(e))qy=!1,Er(t,y4,e);else if((function(r){return es(r,"Backspace",{shiftKey:"any"})||Lu&&es(r,"h",{ctrlKey:!0})})(e))yM(e)?Er(t,Az,e):(e.preventDefault(),Er(t,cm,!0));else if((function(r){return r.key==="Escape"})(e))Er(t,jz,e);else if((function(r){return es(r,"Delete",{})||Lu&&es(r,"d",{ctrlKey:!0})})(e))(function(r){return r.key==="Delete"})(e)?Er(t,Pz,e):(e.preventDefault(),Er(t,cm,!1));else if((function(r){return es(r,"Backspace",xM)})(e))e.preventDefault(),Er(t,_v,!0);else if((function(r){return es(r,"Delete",xM)})(e))e.preventDefault(),Er(t,_v,!1);else if((function(r){return Lu&&es(r,"Backspace",{metaKey:!0})})(e))e.preventDefault(),Er(t,Sv,!0);else if((function(r){return Lu&&(es(r,"Delete",{metaKey:!0})||es(r,"k",{ctrlKey:!0}))})(e))e.preventDefault(),Er(t,Sv,!1);else if((function(r){return es(r,"b",Ld)})(e))e.preventDefault(),Er(t,go,"bold");else if((function(r){return es(r,"u",Ld)})(e))e.preventDefault(),Er(t,go,"underline");else if((function(r){return es(r,"i",Ld)})(e))e.preventDefault(),Er(t,go,"italic");else if((function(r){return es(r,"Tab",{shiftKey:"any"})})(e))Er(t,Mz,e);else if((function(r){return es(r,"z",Ld)})(e))e.preventDefault(),Er(t,KC,void 0);else if((function(r){return Lu?es(r,"z",{metaKey:!0,shiftKey:!0}):es(r,"y",{ctrlKey:!0})||es(r,"z",{ctrlKey:!0,shiftKey:!0})})(e))e.preventDefault(),Er(t,YC,void 0);else{const r=t._editorState._selection;r===null||Ht(r)?vM(e)&&(e.preventDefault(),Er(t,l8,e)):(function(n){return es(n,"c",Ld)})(e)?(e.preventDefault(),Er(t,$_,e)):(function(n){return es(n,"x",Ld)})(e)?(e.preventDefault(),Er(t,XC,e)):vM(e)&&(e.preventDefault(),Er(t,l8,e))}(function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey})(e)&&Er(t,kie,e)}}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;m1(r)&&n!=="touch"&&n!=="pen"&&e.button===0&&Nl(t,(()=>{mM(r)||(f8=!0)}))}],["compositionstart",function(e,t){Nl(t,(()=>{const r=mr();if(Ht(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();Vi(n.key),(e.timeStamp<Vy+c8||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||gr(s)&&s.getStyle()!==r.style)&&Er(t,Cp,Jae)}}))}],["compositionend",function(e,t){_m?yy=!0:zp||!yv&&!u4?Nl(t,(()=>{Kw(t,e.data)})):(a5=!0,i5=e.data)}],["input",function(e,t){e.stopPropagation(),Nl(t,(()=>{if(Ps(e.target)&&mM(e.target))return;const r=mr(),n=e.data,s=Uz(e);if(n!=null&&Ht(r)&&$z(r,s,n,e.timeStamp,!1)){yy&&(Kw(t,n),yy=!1);const a=r.anchor.getNode(),i=lu(wc(t));if(i===null)return;const o=r.isBackward(),c=o?r.anchor.offset:r.focus.offset,u=o?r.focus.offset:r.anchor.offset;c4&&!r.isCollapsed()&&gr(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,c)+n+a.getTextContent().slice(c+u)===fU(i.anchorNode)||Er(t,Cp,n);const d=n.length;_m&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=d),yv||zp||u4||!t.isComposing()||(Vy=0,Vi(null))}else u7(!1,t,n!==null?n:void 0),yy&&(Kw(t,n||void 0),yy=!1);(function(){Gi();const a=ta();gz(a)})()}),{event:e}),cp=null}],["click",function(e,t){Nl(t,(()=>{const r=mr(),n=lu(wc(t)),s=h1();if(n){if(Ht(r)){const a=r.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&r.isCollapsed()&&!ri(i)&&Hs().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s))n.removeAllRanges(),r.dirty=!0;else if(e.detail===3&&!r.isCollapsed()&&i!==r.focus.getNode()){const o=(function(c,u){let d=c;for(;d!==Hs()&&d!=null;){if(u(d))return d;d=d.getParent()}return null})(i,(c=>Dt(c)&&!c.isInline()));Dt(o)&&o.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=n.anchorNode;(Ps(a)||v0(a))&&Xi(ZC(s,n,t,e))}}Er(t,VC,e)}))}],["cut",Od],["copy",Od],["dragstart",Od],["dragover",Od],["dragend",Od],["paste",Od],["focus",Od],["blur",Od],["drop",Od]];c4&&u8.push(["beforeinput",(e,t)=>(function(r,n){const s=r.inputType,a=Uz(r);s==="deleteCompositionText"||_m&&hU(n)||s!=="insertCompositionText"&&Nl(n,(()=>{const i=mr();if(s==="deleteContentBackward"){if(i===null){const g=h1();if(!Ht(g))return;Xi(g.clone())}if(Ht(i)){const g=i.anchor.key===i.focus.key;if(o=r.timeStamp,Iz==="MediaLast"&&o<Vy+c8&&n.isComposing()&&g){if(Vi(null),Vy=0,setTimeout((()=>{Nl(n,(()=>{Vi(null)}))}),c8),Ht(i)){const x=i.anchor.getNode();x.markDirty(),gr(x)||Xt(142),zz(i,x)}}else{Vi(null),r.preventDefault();const x=i.anchor.getNode(),y=x.getTextContent(),v=x.canInsertTextAfter(),T=i.anchor.offset===0&&i.focus.offset===y.length;let k=MP&&g&&!T&&v;if(k&&i.isCollapsed()&&(k=!zn(x8(i.anchor,!0))),!k){Er(n,cm,!0);const b=mr();MP&&Ht(b)&&b.isCollapsed()&&(Jh=b,setTimeout((()=>Jh=null)))}}return}}var o;if(!Ht(i))return;const c=r.data;cp!==null&&u7(!1,n,cp),i.dirty&&cp===null||!i.isCollapsed()||ri(i.anchor.getNode())||a===null||i.applyDOMRange(a),cp=null;const u=i.anchor,d=i.focus,f=u.getNode(),h=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Er(n,Cp,r);break;case"insertFromComposition":Vi(null),Er(n,Cp,r);break;case"insertLineBreak":Vi(null),Er(n,Tp,!1);break;case"insertParagraph":Vi(null),qy&&!zp?(qy=!1,Er(n,Tp,!1)):Er(n,bv,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Er(n,qC,r);break;case"deleteByComposition":(function(g,x){return g!==x||Dt(g)||Dt(x)||!um(g)||!um(x)})(f,h)&&Er(n,o8,r);break;case"deleteByDrag":case"deleteByCut":Er(n,o8,r);break;case"deleteContent":Er(n,cm,!1);break;case"deleteWordBackward":Er(n,_v,!0);break;case"deleteWordForward":Er(n,_v,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Er(n,Sv,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Er(n,Sv,!1);break;case"formatStrikeThrough":Er(n,go,"strikethrough");break;case"formatBold":Er(n,go,"bold");break;case"formatItalic":Er(n,go,"italic");break;case"formatUnderline":Er(n,go,"underline");break;case"historyUndo":Er(n,KC,void 0);break;case"historyRedo":Er(n,YC,void 0)}else{if(c===`
`)r.preventDefault(),Er(n,Tp,!1);else if(c===o0)r.preventDefault(),Er(n,bv,void 0);else if(c==null&&r.dataTransfer){const g=r.dataTransfer.getData("text/plain");r.preventDefault(),i.insertRawText(g)}else c!=null&&$z(i,a,c,r.timeStamp,!0)?(r.preventDefault(),Er(n,Cp,c)):cp=c;Lz=r.timeStamp}}))})(e,t)]);let Vy=0,Iz=null,Lz=0,cp=null;const v4=new WeakMap;let d8=!1,f8=!1,qy=!1,yy=!1,a5=!1,i5="",Jh=null,Bz=[0,"",0,"root",0];function $z(e,t,r,n,s){const a=e.anchor,i=e.focus,o=a.getNode(),c=ta(),u=lu(wc(c)),d=u!==null?u.anchorNode:null,f=a.key,h=c.getElementByKey(f),g=r.length;return f!==i.key||!gr(o)||(!s&&(!c4||Lz<n+50)||o.isDirty()&&g<2||uU(r))&&a.offset!==i.offset&&!o.isComposing()||Bd(o)||o.isDirty()&&g>1||(s||!c4)&&h!==null&&!o.isComposing()&&d!==Wp(h)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||(function(x,y){if(y.isSegmented())return!0;if(!x.isCollapsed())return!1;const v=x.anchor.offset,T=y.getParentOrThrow(),k=um(y);return v===0?!y.canInsertTextBefore()||!T.canInsertTextBefore()&&!y.isComposing()||k||(function(b){const C=b.getPreviousSibling();return(gr(C)||Dt(C)&&C.isInline())&&!C.canInsertTextAfter()})(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!T.canInsertTextAfter()&&!y.isComposing()||k)})(e,o)}function GP(e,t){return v0(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function VP(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:i}=e;d8&&(d8=!1,GP(n,s)&&GP(a,i)&&!Jh)||Nl(t,(()=>{if(!r)return void Xi(null);if(!c2(t,n,a))return;let o=mr();if(Jh&&Ht(o)&&o.isCollapsed()){const c=o.anchor,u=Jh.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(o=Jh.clone(),Xi(o))}if(Jh=null,Ht(o)){const c=o.anchor,u=c.getNode();if(o.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(o.dirty=!0);const d=wc(t).event,f=d?d.timeStamp:performance.now(),[h,g,x,y,v]=Bz,T=Hs(),k=t.isComposing()===!1&&T.getTextContent()==="";if(f<v+200&&c.offset===x&&c.key===y)Gb(o,h,g);else if(c.type==="text")gr(u)||Xt(141),zz(o,u);else if(c.type==="element"&&!k){Dt(u)||Xt(259);const b=c.getNode();b.isEmpty()?(function(C,E){const j=E.getTextFormat(),P=E.getTextStyle();Gb(C,j,P)})(o,b):Gb(o,0,"")}}else{const d=c.key,f=o.focus.key,h=o.getNodes(),g=h.length,x=o.isBackward(),y=x?i:s,v=x?s:i,T=x?f:d,k=x?d:f;let b=Xae,C=!1;for(let E=0;E<g;E++){const j=h[E],P=j.getTextContentSize();if(gr(j)&&P!==0&&!(E===0&&j.__key===T&&y===P||E===g-1&&j.__key===k&&v===0)&&(C=!0,b&=j.getFormat(),b===0))break}o.format=C?b:0}}Er(t,Sz,void 0)}))}function Gb(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function zz(e,t){Gb(e,t.getFormat(),t.getStyle())}function Uz(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function Kw(e,t){const r=e._compositionKey;if(Vi(null),r!==null&&t!=null){if(t===""){const n=za(r),s=Wp(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&gr(n)&&d7(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=mr();if(Ht(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Er(e,y4,null)}}}u7(!0,e,t)}function Wz(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Np=new Map;function Hz(e){const t=noe(e.target);if(t===null)return;const r=aU(t.anchorNode);if(r===null)return;f8&&(f8=!1,Nl(r,(()=>{const c=h1(),u=t.anchorNode;(Ps(u)||v0(u))&&Xi(ZC(c,t,r,e))})));const n=c7(r),s=n[n.length-1],a=s._key,i=Np.get(a),o=i||s;o!==r&&VP(t,o,!1),VP(t,r,!0),r!==s?Np.set(a,r):i&&Np.delete(a)}function qP(e){e._lexicalHandled=!0}function KP(e){return e._lexicalHandled===!0}function Tie(e){const t=e.ownerDocument,r=v4.get(t);if(r===void 0)return;const n=r-1;n>=0||Xt(164),v4.set(t,n),n===0&&t.removeEventListener("selectionchange",Hz);const s=q_(e);l7(s)?((function(i){if(i._parentEditor!==null){const o=c7(i),c=o[o.length-1]._key;Np.get(c)===i&&Np.delete(c)}else Np.delete(i._key)})(s),e.__lexicalEditor=null):s&&Xt(198);const a=Wz(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function h8(e,t,r){Gi();const n=e.__key,s=e.getParent();if(s===null)return;const a=(function(o){const c=mr();if(!Ht(c)||!Dt(o))return c;const{anchor:u,focus:d}=c,f=u.getNode(),h=d.getNode();return y8(f,o)&&u.set(o.__key,0,"element"),y8(h,o)&&d.set(o.__key,0,"element"),c})(e);let i=!1;if(Ht(a)&&t){const o=a.anchor,c=a.focus;o.key===n&&(b4(o,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),c.key===n&&(b4(c,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else io(a)&&t&&e.isSelected()&&e.selectPrevious();if(Ht(a)&&t&&!i){const o=e.getIndexWithinParent();dm(e),w4(a,s,o,-1)}else dm(e);r||$o(s)||s.canBeEmpty()||!s.isEmpty()||h8(s,t),t&&a&&ri(s)&&s.isEmpty()&&s.selectEnd()}class d1{static getType(){const{ownNodeType:t}=p7(this);return t===void 0&&Xt(64,this.name),t}static clone(t){Xt(65,this.name)}$config(){return{}}config(t,r){const n=r.extends||Object.getPrototypeOf(this.constructor);return Object.assign(r,{extends:n,type:t}),{[t]:r}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Yie(this,t)}getType(){return this.__type}isInline(){Xt(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=za(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||mr();if(r==null)return!1;const n=r.getNodes().some((s=>s.__key===this.__key));if(gr(this))return n;if(Ht(r)&&r.anchor.type==="element"&&r.focus.type==="element"){if(r.isCollapsed())return!1;const s=this.getParent();if(zn(this)&&this.isInline()&&s){const a=r.isBackward()?r.focus:r.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:za(t)}getParentOrThrow(){const t=this.getParent();return t===null&&Xt(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if($o(r))return Dt(t)||t===this&&zn(t)||Xt(194),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&Xt(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:za(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:za(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=Dt(this)?this:this.getParent(),n=Dt(t)?t:t.getParent(),s=r&&n?qb(r,n):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const r=qb(this,t);return r!==null&&(r.type==="descendant"||(r.type==="branch"?xU(r)===-1:(r.type!=="same"&&r.type!=="ancestor"&&Xt(279),!1)))}isParentOf(t){const r=qb(this,t);return r!==null&&r.type==="ancestor"}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),n.push(a)),a===t)break;const o=Dt(a)?r?a.getFirstChild():a.getLastChild():null;if(o!==null){a=o;continue}const c=r?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||n.push(u),u===t)break;let d=null,f=u;do{if(f===null&&Xt(68),d=r?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;d!==null||s.has(f.__key)||n.push(f)}while(d===null);a=d}return r||n.reverse(),n}isDirty(){const t=ta()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=za(this.__key);return t===null&&Xt(113),t}getWritable(){Gi();const t=eh(),r=ta(),n=t._nodeMap,s=this.__key,a=this.getLatest(),i=r._cloneNotNeeded,o=mr();if(o!==null&&o.setCachedNodes(null),i.has(s))return k4(a),a;const c=m7(a);return i.add(s),k4(c),n.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){Xt(70)}updateDOM(t,r,n){Xt(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){Xt(18,this.name)}updateFromJSON(t){return(function(r,n){const s=r.getWritable(),a=n.$;let i=a;for(const o of yz(s).flatKeys)o in n&&(i!==void 0&&i!==a||(i={...a}),i[o]=n[o]);return(s.__state||i)&&cie(r).updateFromJSON(i),s})(this,t)}static transform(){return null}remove(t){h8(this,!0,t)}replace(t,r){Gi();let n=mr();n!==null&&(n=n.clone()),f5(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,o=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;dm(o);const d=s.getPreviousSibling(),f=s.getNextSibling(),h=s.__prev,g=s.__next,x=s.__parent;if(h8(s,!1,!0),d===null?c.__first=i:d.getWritable().__next=i,o.__prev=h,f===null?c.__last=i:f.getWritable().__prev=i,o.__next=g,o.__parent=x,c.__size=u,r&&(Dt(this)&&Dt(o)||Xt(139),this.getChildren().forEach((y=>{o.append(y)}))),Ht(n)){Xi(n);const y=n.anchor,v=n.focus;y.key===a&&QP(y,o),v.key===a&&QP(v,o)}return Tf()===a&&Vi(i),o}insertAfter(t,r=!0){Gi(),f5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=mr();let o=!1,c=!1;if(a!==null){const g=t.getIndexWithinParent();if(dm(s),Ht(i)){const x=a.__key,y=i.anchor,v=i.focus;o=y.type==="element"&&y.key===x&&y.offset===g+1,c=v.type==="element"&&v.key===x&&v.offset===g+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),f=s.__key,h=n.__next;if(u===null?d.__last=f:u.getWritable().__prev=f,d.__size++,n.__next=f,s.__next=h,s.__prev=n.__key,s.__parent=n.__parent,r&&Ht(i)){const g=this.getIndexWithinParent();w4(i,d,g+1);const x=d.__key;o&&i.anchor.set(x,g+2,"element"),c&&i.focus.set(x,g+2,"element")}return t}insertBefore(t,r=!0){Gi(),f5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.__key;dm(s);const i=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),c=n.__prev,u=this.getIndexWithinParent();i===null?o.__first=a:i.getWritable().__next=a,o.__size++,n.__prev=a,s.__prev=c,s.__next=n.__key,s.__parent=n.__parent;const d=mr();return r&&Ht(d)&&w4(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return js()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){Gi();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(Dt(n))return n.select();if(!gr(n)){const a=n.getIndexWithinParent()+1;return s.select(a,a)}return n.select(t,r)}selectNext(t,r){Gi();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(Dt(n))return n.select(0,0);if(!gr(n)){const a=n.getIndexWithinParent();return s.select(a,a)}return n.select(t,r)}markDirty(){this.getWritable()}reconcileObservedMutation(t,r){this.markDirty()}}class s2 extends d1{static getType(){return"linebreak"}static clone(t){return new s2(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(r){const n=r.parentElement;if(n!==null&&T4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&Yw(s)){const a=n.lastChild;if(a===r||a.previousSibling===r&&Yw(a))return!0}}return!1})(t)||(function(r){const n=r.parentElement;if(n!==null&&T4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&Yw(s))return!1;const a=n.lastChild;if(a===r||a.previousSibling===r&&Yw(a))return!0}return!1})(t)?null:{conversion:Cie,priority:0}}}static importJSON(t){return Ju().updateFromJSON(t)}}function Cie(e){return{node:Ju()}}function Ju(){return Ho(new s2)}function Jd(e){return e instanceof s2}function Yw(e){return v0(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function o5(e,t){return 16&t?"code":t&LC?"mark":32&t?"sub":64&t?"sup":null}function l5(e,t){return 1&t?"strong":2&t?"em":"span"}function Gz(e,t,r,n,s){const a=n.classList;let i=Ep(s,"base");i!==void 0&&a.add(...i),i=Ep(s,"underlineStrikethrough");let o=!1;const c=t&f4&&t&d4;i!==void 0&&(r&f4&&r&d4?(o=!0,c||a.add(...i)):c&&a.remove(...i));for(const u in km){const d=km[u];if(i=Ep(s,u),i!==void 0)if(r&d){if(o&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function Vz(e,t,r){const n=t.firstChild,s=r.isComposing(),a=e+(s?L_:"");if(n==null)t.textContent=a;else{const i=n.nodeValue;if(i!==a)if(s||_m){const[o,c,u]=(function(d,f){const h=d.length,g=f.length;let x=0,y=0;for(;x<h&&x<g&&d[x]===f[x];)x++;for(;y+x<h&&y+x<g&&d[h-y-1]===f[g-y-1];)y++;return[x,h-x-y,f.slice(x,g-y)]})(i,a);c!==0&&n.deleteData(o,c),n.insertData(o,u)}else n.nodeValue=a}}function YP(e,t,r,n,s,a){Vz(s,e,t);const i=a.theme.text;i!==void 0&&Gz(0,0,n,e,i)}function Xw(e,t){const r=document.createElement(t);return r.appendChild(e),r}class Zf extends d1{static getType(){return"text"}static clone(t){return new Zf(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return tie[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Tf()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=km[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return S4(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const n=this.__format,s=o5(0,n),a=l5(0,n),i=s===null?a:s,o=document.createElement(i);let c=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),o.appendChild(c)),YP(c,this,0,n,this.__text,t);const u=this.__style;return u!==""&&(o.style.cssText=u),o}updateDOM(t,r,n){const s=this.__text,a=t.__format,i=this.__format,o=o5(0,a),c=o5(0,i),u=l5(0,a),d=l5(0,i);if((o===null?u:o)!==(c===null?d:c))return!0;if(o===c&&u!==d){const y=r.firstChild;y==null&&Xt(48);const v=document.createElement(d);return YP(v,this,0,i,s,n),r.replaceChild(v,y),!1}let f=r;c!==null&&o!==null&&(f=r.firstChild,f==null&&Xt(49)),Vz(s,f,this);const h=n.theme.text;h!==void 0&&a!==i&&Gz(0,a,i,f,h);const g=t.__style,x=this.__style;return g!==x&&(r.style.cssText=x),!1}static importDOM(){return{"#text":()=>({conversion:jie,priority:0}),b:()=>({conversion:Eie,priority:0}),code:()=>({conversion:Rd,priority:0}),em:()=>({conversion:Rd,priority:0}),i:()=>({conversion:Rd,priority:0}),mark:()=>({conversion:Rd,priority:0}),s:()=>({conversion:Rd,priority:0}),span:()=>({conversion:Nie,priority:0}),strong:()=>({conversion:Rd,priority:0}),sub:()=>({conversion:Rd,priority:0}),sup:()=>({conversion:Rd,priority:0}),u:()=>({conversion:Rd,priority:0})}}static importJSON(t){return fa().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return Ps(r)||Xt(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=Xw(r,"b")),this.hasFormat("italic")&&(r=Xw(r,"i")),this.hasFormat("strikethrough")&&(r=Xw(r,"s")),this.hasFormat("underline")&&(r=Xw(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?km[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?Qae[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=S4(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=eie[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){Gi();let n=t,s=r;const a=mr(),i=this.getTextContent(),o=this.__key;if(typeof i=="string"){const c=i.length;n===void 0&&(n=c),s===void 0&&(s=c)}else n=0,s=0;if(!Ht(a))return Yz(o,n,o,s,"text","text");{const c=Tf();c!==a.anchor.key&&c!==a.focus.key||Vi(o),a.setTextNodeRange(this,n,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const a=this.getWritable(),i=a.__text,o=n.length;let c=t;c<0&&(c=o+c,c<0&&(c=0));const u=mr();if(s&&Ht(u)){const f=t+o;u.setTextNodeRange(a,f,a,f)}const d=i.slice(0,c)+n+i.slice(c+r);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Gi();const r=this.getLatest(),n=r.getTextContent();if(n==="")return[];const s=r.__key,a=Tf(),i=n.length;t.sort(((A,M)=>A-M)),t.push(i);const o=[],c=t.length;for(let A=0,M=0;A<i&&M<=c;M++){const F=t[M];F>A&&(o.push(n.slice(A,F)),A=F)}const u=o.length;if(u===1)return[r];const d=o[0],f=r.getParent();let h;const g=r.getFormat(),x=r.getStyle(),y=r.__detail;let v=!1,T=null,k=null;const b=mr();if(Ht(b)){const[A,M]=b.isBackward()?[b.focus,b.anchor]:[b.anchor,b.focus];A.type==="text"&&A.key===s&&(T=A),M.type==="text"&&M.key===s&&(k=M)}r.isSegmented()?(h=fa(d),h.__format=g,h.__style=x,h.__detail=y,h.__state=LP(r,h),v=!0):h=r.setTextContent(d);const C=[h];for(let A=1;A<u;A++){const M=fa(o[A]);M.__format=g,M.__style=x,M.__detail=y,M.__state=LP(r,M);const F=M.__key;a===s&&Vi(F),C.push(M)}const E=T?T.offset:null,j=k?k.offset:null;let P=0;for(const A of C){if(!T&&!k)break;const M=P+A.getTextContentSize();if(T!==null&&E!==null&&E<=M&&E>=P&&(T.set(A.getKey(),E-P,"text"),E<M&&(T=null)),k!==null&&j!==null&&j<=M&&j>=P){k.set(A.getKey(),j-P,"text");break}P=M}if(f!==null){(function(F){const B=F.getPreviousSibling(),V=F.getNextSibling();B!==null&&k4(B),V!==null&&k4(V)})(this);const A=f.getWritable(),M=this.getIndexWithinParent();v?(A.splice(M,0,C),this.remove()):A.splice(M,1,C),Ht(b)&&w4(b,f,M,u-1)}return C}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||Xt(50);const n=this.__key,s=t.__key,a=this.__text,i=a.length;Tf()===s&&Vi(n);const o=mr();if(Ht(o)){const f=o.anchor,h=o.focus;f!==null&&f.key===s&&aM(f,r,n,t,i),h!==null&&h.key===s&&aM(h,r,n,t,i)}const c=t.__text,u=r?c+a:a+c;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function Nie(e){return{forChild:JC(e.style),node:null}}function Eie(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:JC(t.style,r?void 0:"bold"),node:null}}const XP=new WeakMap;function Aie(e){if(!Ps(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function jie(e){const t=e;e.parentElement===null&&Xt(129);let r=t.textContent||"";if((function(n){let s,a=n.parentNode;const i=[n];for(;a!==null&&(s=XP.get(a))===void 0&&!Aie(a);)i.push(a),a=a.parentNode;const o=s===void 0?a:s;for(let c=0;c<i.length;c++)XP.set(i[c],o);return o})(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],a=n.length;for(let i=0;i<a;i++){const o=n[i];o===`
`||o===`\r
`?s.push(Ju()):o==="	"?s.push(f1()):o!==""&&s.push(fa(o))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=JP(n,!1))!==null;){const a=n.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=JP(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:fa(r)}}function JP(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const a=r.parentElement;if(a===null)return null;r=a}if(r=n,Ps(r)){const a=r.style.display;if(a===""&&!b8(r)||a!==""&&!a.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(v0(r))return r;if(r.nodeName==="BR")return null}}const Pie={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Rd(e){const t=Pie[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:JC(e.style,t),node:null}}function fa(e=""){return Ho(new Zf(e))}function gr(e){return e instanceof Zf}function JC(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",a=n.includes("line-through"),i=e.fontStyle==="italic",o=n.includes("underline"),c=e.verticalAlign;return u=>(gr(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),o&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class a2 extends Zf{static getType(){return"tab"}static clone(t){return new a2(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const r=super.createDOM(t),n=Ep(t.theme,"tab");return n!==void 0&&r.classList.add(...n),r}static importJSON(t){return f1().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&Xt(126),super.setTextContent("	")}spliceText(t,r,n,s){return n===""&&r===0||n==="	"&&r===1||Xt(286),this}setDetail(t){return t!==2&&Xt(127),this}setMode(t){return t!=="normal"&&Xt(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function f1(){return Ho(new a2)}function z_(e){return e instanceof a2}class Mie{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:pU(mc(l0(this,"next")),mc(l0(t,"next")))<0}getNode(){const t=za(this.key);return t===null&&Xt(20),t}set(t,r,n,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===r&&this.type===n||(this.key=t,this.offset=r,this.type=n,i2()||(Tf()===i&&Vi(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function Qu(e,t,r){return new Mie(e,t,r)}function c5(e,t){let r=t.__key,n=e.offset,s="element";if(gr(t)){s="text";const a=t.getTextContentSize();n>a&&(n=a)}else if(!Dt(t)){const a=t.getNextSibling();if(gr(a))r=a.__key,n=0,s="text";else{const i=t.getParent();i&&(r=i.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function QP(e,t){if(Dt(t)){const r=t.getLastDescendant();Dt(r)||gr(r)?c5(e,r):c5(e,t)}else c5(e,t)}class U_{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!io(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every((s=>n.has(s)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new U_(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let a;if(gr(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<n;i++)r[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const a=za(s);a!==null&&n.push(a)}return i2()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}deleteNodes(){const t=this.getNodes();if((mr()||h1())===this&&t[0]){const r=Yi(t[0],"next");poe(zf(r,r))}for(const r of t)r.remove()}}function Ht(e){return e instanceof Vm}class Vm{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Ht(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=(function(n){const s=[],[a,i]=n.getTextSlices();a&&s.push(a.caret.origin);const o=new Set,c=new Set;for(const u of n)if(Yu(u)){const{origin:d}=u;s.length===0?o.add(d):(c.add(d),s.push(d))}else{const{origin:d}=u;Dt(d)&&c.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),jm(n.focus)&&Dt(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=bc(n.focus.origin,"previous");Yu(u)&&o.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=v7(u))o.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Dt(u)||c.has(u)||u.isEmpty()||o.has(u))break;s.pop()}if(s.length===0&&n.isCollapsed()){const u=mc(n.anchor),d=mc(n.anchor.getFlipped()),f=g=>Ff(g)?g.origin:g.getNodeAtCaret(),h=f(u)||f(d)||(n.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(h)}return s})(vU(TM(this),"next"));return i2()||(this._cachedNodes=r),r}setTextNodeRange(t,r,n,s){this.anchor.set(t.__key,r,"text"),this.focus.set(n.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[o,c]=m8(this);let u="",d=!0;for(let f=0;f<t.length;f++){const h=t[f];if(Dt(h)&&!h.isInline())d||(u+=`
`),d=!h.isEmpty();else if(d=!1,gr(h)){let g=h.getTextContent();h===r?h===n?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(g=o<c?g.slice(o,c):g.slice(c,o)):g=i?g.slice(o):g.slice(c):h===n&&(g=i?g.slice(0,c):g.slice(0,o)),u+=g}else!zn(h)&&!Jd(h)||h===n&&this.isCollapsed()||(u+=h.getTextContent())}return u}applyDOMRange(t){const r=ta(),n=r.getEditorState()._selection,s=Kz(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),h4(this)}clone(){const t=this.anchor,r=this.focus;return new Vm(Qu(t.key,t.offset,t.type),Qu(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=S4(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=km[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let a=0;a<s;a++){const i=r[a];i===`
`||i===`\r
`?n.push(Ju()):i==="	"?n.push(f1()):n.push(fa(i))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,a=this.style;let i=r,o=n;!this.isCollapsed()&&n.isBefore(r)&&(i=n,o=r),i.type==="element"&&(function(v,T,k,b){const C=v.getNode(),E=C.getChildAtIndex(v.offset),j=fa();if(j.setFormat(k),j.setStyle(b),s7(E))E.splice(0,0,[j]);else{const P=ri(C)?js().append(j):j;E===null?C.append(P):E.insertBefore(P)}v.is(T)&&T.set(j.__key,0,"text"),v.set(j.__key,0,"text")})(i,o,s,a),o.type==="element"&&Mm(o,mc(l0(o,"next")));const c=i.offset;let u=o.offset;const d=this.getNodes(),f=d.length;let h=d[0];gr(h)||Xt(26);const g=h.getTextContent().length,x=h.getParentOrThrow();let y=d[f-1];if(f===1&&o.type==="element"&&(u=g,o.set(i.key,u,"text")),this.isCollapsed()&&c===g&&(Bd(h)||!h.canInsertTextAfter()||!x.canInsertTextAfter()&&h.getNextSibling()===null)){let v=h.getNextSibling();if(gr(v)&&v.canInsertTextBefore()&&!Bd(v)||(v=fa(),v.setFormat(s),v.setStyle(a),x.canInsertTextAfter()?h.insertAfter(v):x.insertAfter(v)),v.select(0,0),h=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(Bd(h)||!h.canInsertTextBefore()||!x.canInsertTextBefore()&&h.getPreviousSibling()===null)){let v=h.getPreviousSibling();if(gr(v)&&!Bd(v)||(v=fa(),v.setFormat(s),x.canInsertTextBefore()?h.insertBefore(v):x.insertBefore(v)),v.select(),h=v,t!=="")return void this.insertText(t)}else if(h.isSegmented()&&c!==g){const v=fa(h.getTextContent());v.setFormat(s),h.replace(v),h=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!x.canInsertTextBefore()||!x.canInsertTextAfter()||Dt(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),qz(this.anchor,this.focus,null),void this.insertText(t)}if(f===1){if(um(h)){const b=fa(t);return b.select(),void h.replace(b)}const v=h.getFormat(),T=h.getStyle();if(c!==u||v===s&&T===a){if(z_(h)){const b=fa(t);return b.setFormat(s),b.setStyle(a),b.select(),void h.replace(b)}}else{if(h.getTextContent()!==""){const b=fa(t);if(b.setFormat(s),b.setStyle(a),b.select(),c===0)h.insertBefore(b,!1);else{const[C]=h.splitText(c);C.insertAfter(b,!1)}return void(b.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}h.setFormat(s),h.setStyle(a)}const k=u-c;h=h.spliceText(c,k,t,!0),h.getTextContent()===""?h.remove():this.anchor.type==="text"&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=T))}else{const v=new Set([...h.getParentKeys(),...y.getParentKeys()]),T=Dt(h)?h:h.getParentOrThrow();let k=Dt(y)?y:y.getParentOrThrow(),b=y;if(!T.is(k)&&k.isInline())do b=k,k=k.getParentOrThrow();while(k.isInline());if(o.type==="text"&&(u!==0||y.getTextContent()==="")||o.type==="element"&&y.getIndexWithinParent()<u)if(gr(y)&&!um(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const A=fa(y.getTextContent());y.replace(A),y=A}ri(o.getNode())||o.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const A=y.getParentOrThrow();A.canBeEmpty()||A.getChildrenSize()!==1?y.remove():A.remove()}else v.add(y.__key);const C=k.getChildren(),E=new Set(d),j=T.is(k),P=T.isInline()&&h.getNextSibling()===null?T:h;for(let A=C.length-1;A>=0;A--){const M=C[A];if(M.is(h)||Dt(M)&&M.isParentOf(h))break;M.isAttached()&&(!E.has(M)||M.is(b)?j||P.insertAfter(M,!1):M.remove())}if(!j){let A=k,M=null;for(;A!==null;){const F=A.getChildren(),B=F.length;(B===0||F[B-1].is(M))&&(v.delete(A.__key),M=A),A=A.getParent()}}if(um(h))if(c===g)h.select();else{const A=fa(t);A.select(),h.replace(A)}else h=h.spliceText(c,g-c,t,!0),h.getTextContent()===""?h.remove():h.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let A=1;A<f;A++){const M=d[A],F=M.__key;v.has(F)||M.remove()}}}removeText(){const t=mr()===this;Kb(this,xoe(TM(this))),t&&mr()!==this&&Xi(this)}formatText(t,r=null){if(this.isCollapsed())return this.toggleFormat(t),void Vi(null);const n=this.getNodes(),s=[];for(const C of n)gr(C)&&s.push(C);const a=C=>{n.forEach((E=>{if(Dt(E)){const j=E.getFormatFlags(t,C);E.setTextFormat(j)}}))},i=s.length;if(i===0)return this.toggleFormat(t),Vi(null),void a(r);const o=this.anchor,c=this.focus,u=this.isBackward(),d=u?c:o,f=u?o:c;let h=0,g=s[0],x=d.type==="element"?0:d.offset;if(d.type==="text"&&x===g.getTextContentSize()&&(h=1,g=s[1],x=0),g==null)return;const y=g.getFormatFlags(t,r);a(y);const v=i-1;let T=s[v];const k=f.type==="text"?f.offset:T.getTextContentSize();if(g.is(T)){if(x===k)return;if(Bd(g)||x===0&&k===g.getTextContentSize())g.setFormat(y);else{const C=g.splitText(x,k),E=x===0?C[0]:C[1];E.setFormat(y),d.type==="text"&&d.set(E.__key,0,"text"),f.type==="text"&&f.set(E.__key,k-x,"text")}return void(this.format=y)}x===0||Bd(g)||([,g]=g.splitText(x),x=0),g.setFormat(y);const b=T.getFormatFlags(t,y);k>0&&(k===T.getTextContentSize()||Bd(T)||([T]=T.splitText(k)),T.setFormat(b));for(let C=h+1;C<v;C++){const E=s[C],j=E.getFormatFlags(t,b);E.setFormat(j)}d.type==="text"&&d.set(g.__key,x,"text"),f.type==="text"&&f.set(T.__key,k,"text"),this.format=y|b}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const x=mr();return Ht(x)||Xt(134),x.insertNodes(t)}const r=(this.isBackward()?this.focus:this.anchor).getNode(),n=m5(r,hc),s=t[t.length-1];if(Dt(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const x=u5(this);n.splice(x,0,t),s.selectEnd()}return}if(!t.some((x=>(Dt(x)||zn(x))&&!x.isInline()))){Dt(n)||Xt(211,r.constructor.name,r.getType());const x=u5(this);return n.splice(x,0,t),void s.selectEnd()}const a=(function(x){const y=js();let v=null;for(let T=0;T<x.length;T++){const k=x[T],b=Jd(k);if(b||zn(k)&&k.isInline()||Dt(k)&&k.isInline()||gr(k)||k.isParentRequired()){if(v===null&&(v=k.createParentElementNode(),y.append(v),b))continue;v!==null&&v.append(k)}else y.append(k),v=null}return y})(t),i=a.getLastDescendant(),o=a.getChildren(),c=!Dt(n)||!n.isEmpty()?this.insertParagraph():null,u=o[o.length-1];let d=o[0];var f;Dt(f=d)&&hc(f)&&!f.isEmpty()&&Dt(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(Dt(n)||Xt(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(n===null&&Xt(212,r.constructor.name,r.getType()),(function(x,y,v){const T=y.getParentOrThrow().getLastChild();let k=y;const b=[y];for(;k!==T;)k.getNextSibling()||Xt(140),k=k.getNextSibling(),b.push(k);let C=x;for(const E of b)C=C.insertAfter(E)})(n,d));const h=m5(i,hc);c&&Dt(h)&&(c.canMergeWhenEmpty()||hc(u))&&(h.append(...c.getChildren()),c.remove()),Dt(n)&&n.isEmpty()&&n.remove(),i.selectEnd();const g=Dt(n)?n.getLastChild():null;Jd(g)&&h!==n&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=js();return Hs().splice(this.anchor.offset,0,[i]),i.select(),i}const t=u5(this),r=m5(this.anchor.getNode(),hc);Dt(r)||Xt(213);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],a=r.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const r=Ju();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,a=this.focus;let i=t[0],o=t[n];const[c,u]=m8(this);if(r===0)return[];if(r===1){if(gr(i)&&!this.isCollapsed()){const f=c>u?u:c,h=c>u?c:u,g=i.splitText(f,h),x=f===0?g[0]:g[1];return x!=null?[x]:[]}return[i]}const d=s.isBefore(a);if(gr(i)){const f=d?c:u;f===i.getTextContentSize()?t.shift():f!==0&&([,i]=i.splitText(f),t[0]=i)}if(gr(o)){const f=o.getTextContent().length,h=d?u:c;h===0?t.pop():h!==f&&([o]=o.splitText(h),t[n]=o)}return t}modify(t,r,n){if(iM(this,t,r,n))return;const s=t==="move",a=ta(),i=lu(wc(a));if(!i)return;const o=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||o===null||!Dt(u)||u.isInline()||u.canBeEmpty()||v8(o,a,c),this.dirty){let d=Nm(a,this.anchor.key),f=Nm(a,this.focus.key);this.anchor.type==="text"&&(d=Wp(d)),this.focus.type==="text"&&(f=Wp(f)),d&&f&&Xz(i,d,this.anchor.offset,f,this.focus.offset)}if((function(d,f,h,g){d.modify(f,h,g)})(i,t,r?"backward":"forward",n),i.rangeCount>0){const d=i.getRangeAt(0),f=this.anchor.getNode(),h=ri(f)?f:toe(f);if(this.applyDOMRange(d),this.dirty=!0,!s){const g=this.getNodes(),x=[];let y=!1;for(let v=0;v<g.length;v++){const T=g[v];y8(T,h)?x.push(T):y=!0}if(y&&x.length>0)if(r){const v=x[0];Dt(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=x[x.length-1];Dt(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||(function(v){const T=v.focus,k=v.anchor,b=k.key,C=k.offset,E=k.type;k.set(T.key,T.offset,T.type,!0),T.set(b,C,E,!0)})(this)}}n==="lineboundary"&&iM(this,t,r,n,"decorators")}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&Dt(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),a=r.getNextSibling()||(s===null?null:s.getNextSibling());if(Dt(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const a=b7(l0(n,t?"previous":"next"));if(a.getTextSlices().every((o=>o===null||o.distance===0))){let o={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(Yu(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(o.type==="merge-block")break;if(Dt(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=mc(c);Kb(this,zf(u,u)),a.anchor.origin.remove()}return}o.type!=="merge-next-block"&&o.type!=="merge-block"||(o={block:o.block,caret:c,type:"merge-block"})}}else{if(o.type==="merge-block")break;if(jm(c)){if(Dt(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else o={block:c.origin,type:"merge-next-block"};continue}if(zn(c.origin)){if(!c.origin.isIsolated())if(o.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Dt(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=QC();u.add(c.origin.getKey()),Xi(u)}else c.origin.remove();return}break}}if(o.type==="merge-block"){const{caret:c,block:u}=o;return Kb(this,zf(!c.origin.isEmpty()&&u.isEmpty()?S7(Yi(u,c.direction)):a.anchor,c)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&eM(this,n.getNode()))return}else{const o=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){const c=i.offset,u=o.getTextContentSize();if(o.is(s)||t&&c!==u||!t&&c!==0)return void tM(o,t,c)}else if(s!==null&&s.isSegmented()){const c=n.offset,u=s.getTextContentSize();if(s.is(o)||t&&c!==0||!t&&c!==u)return void tM(s,t,c)}(function(c,u){const d=c.anchor,f=c.focus,h=d.getNode(),g=f.getNode();if(h===g&&d.type==="text"&&f.type==="text"){const x=d.offset,y=f.offset,v=x<y,T=v?x:y,k=v?y:x,b=k-1;T!==b&&(function(C){return!(uU(C)||Fie(C))})(h.getTextContent().slice(T,k))&&(u?f.set(f.key,b,f.type):d.set(d.key,b,d.type))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&ri(n.getParent())&&n.getPreviousSibling()===null&&eM(this,n)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function io(e){return e instanceof U_}function ZP(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function m8(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[ZP(r),ZP(n)]}function eM(e,t){for(let r=t;r;r=r.getParent()){if(Dt(r)){if(r.collapseAtStart(e))return!0;if($o(r))break}if(r.getPreviousSibling())break}return!1}const Fie=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function tM(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,o=0;for(let u=0;u<a;u++){const d=u===a-1;if(o=i,i+=s[u].length,t&&i===r||i>r||d){s.splice(u,1),d&&(o=void 0);break}}const c=s.join("").trim();c===""?n.remove():(n.setTextContent(c),n.select(o,o))}function rM(e,t,r,n){let s,a=t;if(Ps(e)){let i=!1;const o=e.childNodes,c=o.length,u=n._blockCursorElement;a===c&&(i=!0,a=c-1);let d=o[a],f=!1;if(d===u)d=o[a+1],f=!0;else if(u!==null){const h=u.parentNode;e===h&&t>Array.prototype.indexOf.call(h.children,u)&&a--}if(s=wp(d),gr(s))a=Df(s,i?"next":"previous");else{let h=wp(e);if(h===null)return null;if(Dt(h)){const g=n.getElementByKey(h.getKey());g===null&&Xt(214),[h,a]=h.getDOMSlot(g).resolveChildIndex(h,g,e,t),Dt(h)||Xt(215),i&&a>=h.getChildrenSize()&&(a=Math.max(0,h.getChildrenSize()-1));let y=h.getChildAtIndex(a);if(Dt(y)&&(function(v,T,k){const b=v.getParent();return k===null||b===null||!b.canBeEmpty()||b!==k.getNode()})(y,0,r)){const v=i?y.getLastDescendant():y.getFirstDescendant();v===null?h=y:(y=v,h=Dt(y)?y:y.getParentOrThrow()),a=0}gr(y)?(s=y,h=null,a=Df(y,i?"next":"previous")):y!==h&&i&&!f&&(Dt(h)||Xt(216),a=Math.min(h.getChildrenSize(),a+1))}else{const g=h.getIndexWithinParent();a=t===0&&zn(h)&&wp(e)===h?g:g+1,h=h.getParentOrThrow()}if(Dt(h))return Qu(h.__key,a,"element")}}else s=wp(e);return gr(s)?Qu(s.__key,Df(s,a,"clamp"),"text"):null}function nM(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((r||!t)&&a===null&&Dt(i)&&i.isInline()){const o=i.getPreviousSibling();gr(o)&&e.set(o.__key,o.getTextContent().length,"text")}}else Dt(a)&&!r&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):gr(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(n===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&Dt(a)&&a.isInline())e.set(a.__key,0,"element");else if((r||t)&&a===null&&Dt(i)&&i.isInline()&&!i.canInsertTextAfter()){const o=i.getNextSibling();gr(o)&&e.set(o.__key,0,"text")}}}function qz(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);nM(e,n,s),nM(t,!n,s),s&&t.set(e.key,e.offset,e.type);const a=ta();if(a.isComposing()&&a._compositionKey!==e.key&&Ht(r)){const i=r.anchor,o=r.focus;e.set(i.key,i.offset,i.type,!0),t.set(o.key,o.offset,o.type,!0)}}}function Kz(e,t,r,n,s,a){if(e===null||r===null||!c2(s,e,r))return null;const i=rM(e,t,Ht(a)?a.anchor:null,s);if(i===null)return null;const o=rM(r,n,Ht(a)?a.focus:null,s);if(o===null)return null;if(i.type==="element"&&o.type==="element"){const c=wp(e),u=wp(r);if(zn(c)&&zn(u))return null}return qz(i,o,a),[i,o]}function g8(e){return Dt(e)&&!e.isInline()}function Yz(e,t,r,n,s,a){const i=eh(),o=new Vm(Qu(e,t,s),Qu(r,n,a),0,"");return o.dirty=!0,i._selection=o,o}function W_(){const e=Qu("root",0,"element"),t=Qu("root",0,"element");return new Vm(e,t,0,"")}function QC(){return new U_(new Set)}function ZC(e,t,r,n){const s=r._window;if(s===null)return null;const a=n||s.event,i=a?a.type:void 0,o=i==="selectionchange",c=!Zk&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,f,h;if(Ht(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,f=t.anchorOffset,h=t.focusOffset,o&&Ht(e)&&!c2(r,u,d))return e.clone();const g=Kz(u,f,d,h,r,e);if(g===null)return null;const[x,y]=g;return new Vm(x,y,Ht(e)?e.format:0,Ht(e)?e.style:"")}function mr(){return eh()._selection}function h1(){return ta()._editorState._selection}function w4(e,t,r,n=1){const s=e.anchor,a=e.focus,i=s.getNode(),o=a.getNode();if(!t.is(i)&&!t.is(o))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(r<=u&&n>0||r<u&&n<0){const d=Math.max(0,u+n);s.set(c,d,"element"),a.set(c,d,"element"),sM(e)}}else{const u=e.isBackward(),d=u?a:s,f=d.getNode(),h=u?s:a,g=h.getNode();if(t.is(f)){const x=d.offset;(r<=x&&n>0||r<x&&n<0)&&d.set(c,Math.max(0,x+n),"element")}if(t.is(g)){const x=h.offset;(r<=x&&n>0||r<x&&n<0)&&h.set(c,Math.max(0,x+n),"element")}}sM(e)}function sM(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,a=t.getNode(),i=n.getNode();if(e.isCollapsed()){if(!Dt(a))return;const o=a.getChildrenSize(),c=r>=o,u=c?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(gr(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),n.set(u.__key,d,"text")}}else{if(Dt(a)){const o=a.getChildrenSize(),c=r>=o,u=c?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(gr(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(Dt(i)){const o=i.getChildrenSize(),c=s>=o,u=c?i.getChildAtIndex(o-1):i.getChildAtIndex(s);if(gr(u)){let d=0;c&&(d=u.getTextContentSize()),n.set(u.__key,d,"text")}}}}function b4(e,t,r,n,s){let a=null,i=0,o=null;n!==null?(a=n.__key,gr(n)?(i=n.getTextContentSize(),o="text"):Dt(n)&&(i=n.getChildrenSize(),o="element")):s!==null&&(a=s.__key,gr(s)?o="text":Dt(s)&&(o="element")),a!==null&&o!==null?e.set(a,i,o):(i=t.getIndexWithinParent(),i===-1&&(i=r.getChildrenSize()),e.set(r.__key,i,"element"))}function aM(e,t,r,n,s){e.type==="text"?e.set(r,e.offset+(t?0:s),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function Xz(e,t,r,n,s){try{e.setBaseAndExtent(t,r,n,s)}catch{}}function Die(e,t,r,n,s,a,i){const o=n.anchorNode,c=n.focusNode,u=n.anchorOffset,d=n.focusOffset,f=document.activeElement;if(s.has(rU)&&f!==a||f!==null&&o7(f))return;if(!Ht(t))return void(e!==null&&c2(r,o,c)&&n.removeAllRanges());const h=t.anchor,g=t.focus,x=h.key,y=g.key,v=Nm(r,x),T=Nm(r,y),k=h.offset,b=g.offset,C=t.format,E=t.style,j=t.isCollapsed();let P=v,A=T,M=!1;if(h.type==="text"){P=Wp(v);const Z=h.getNode();M=Z.getFormat()!==C||Z.getStyle()!==E}else Ht(e)&&e.anchor.type==="text"&&(M=!0);var F,B,V,ee,ae;if(g.type==="text"&&(A=Wp(T)),P!==null&&A!==null&&(j&&(e===null||M||Ht(e)&&(e.format!==C||e.style!==E))&&(F=C,B=E,V=k,ee=x,ae=performance.now(),Bz=[F,B,V,ee,ae]),u!==k||d!==b||o!==P||c!==A||n.type==="Range"&&j||(f!==null&&a.contains(f)||a.focus({preventScroll:!0}),h.type==="element"))){if(Xz(n,P,k,A,b),!s.has(zie)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const Z=Ht(t)&&t.anchor.type==="element"?P.childNodes[k]||null:n.rangeCount>0?n.getRangeAt(0):null;if(Z!==null){let te;if(Z instanceof Text){const L=document.createRange();L.selectNode(Z),te=L.getBoundingClientRect()}else te=Z.getBoundingClientRect();(function(L,K,I){const H=mU(I),U=h7(H);if(H===null||U===null)return;let{top:R,bottom:z}=K,G=0,X=0,ne=I;for(;ne!==null;){const q=ne===H.body;if(q)G=0,X=wc(L).innerHeight;else{const ue=ne.getBoundingClientRect();G=ue.top,X=ue.bottom}let se=0;if(R<G?se=-(G-R):z>X&&(se=z-X),se!==0)if(q)U.scrollBy(0,se);else{const ue=ne.scrollTop;ne.scrollTop+=se;const me=ne.scrollTop-ue;R-=me,z-=me}if(q)break;ne=u2(ne)}})(r,te,a)}}d8=!0}}function Oie(e){let t=mr()||h1();t===null&&(t=Hs().selectEnd()),t.insertNodes(e)}function u5(e){let t=e;e.isCollapsed()||t.removeText();const r=mr();Ht(r)&&(t=r),Ht(t)||Xt(161);const n=t.anchor;let s=n.getNode(),a=n.offset;for(;!hc(s);){const i=s;if([s,a]=Rie(s,a),i.is(s))break}return a}function Rie(e,t){const r=e.getParent();if(!r){const s=js();return Hs().append(s),s.select(),[Hs(),0]}if(gr(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const a=t===0?0:1;return[r,s[0].getIndexWithinParent()+a]}if(!Dt(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new Vm(Qu(e.__key,t,"element"),Qu(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}function iM(e,t,r,n,s="decorators-and-blocks"){if(t==="move"&&n==="character"&&!e.isCollapsed()){const[d,f]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return f.set(d.key,d.offset,d.type),!0}const a=l0(e.focus,r?"previous":"next"),i=n==="lineboundary",o=t==="move";let c=a,u=s==="decorators-and-blocks";if(!yU(c)){for(const d of c){u=!1;const{origin:f}=d;if(!zn(f)||f.isIsolated()||(c=d,!i||!f.isInline()))break}if(u)for(const d of b7(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(Yu(d))d.origin.isInline()||(c=d);else{if(Dt(d.origin))continue;zn(d.origin)&&!d.origin.isInline()&&(c=d)}break}}if(c===a)return!1;if(o&&!i&&zn(c.origin)&&c.origin.isKeyboardSelectable()){const d=QC();return d.add(c.origin.getKey()),Xi(d),!0}return c=mc(c),o&&Mm(e.anchor,c),Mm(e.focus,c),u||!i}let vi=null,wi=null,cl=!1,d5=!1,Vb=0;const oM={characterData:!0,childList:!0,subtree:!0};function i2(){return cl||vi!==null&&vi._readOnly}function Gi(){cl&&Xt(13)}function Jz(){Vb>99&&Xt(14)}function eh(){return vi===null&&Xt(195,Qz()),vi}function ta(){return wi===null&&Xt(196,Qz()),wi}function Qz(){let e=0;const t=new Set,r=V_.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=q_(s);if(l7(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===r&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function Iie(){return wi}function lM(e,t,r){const n=t.__type,s=sU(e,n);let a=r.get(n);a===void 0&&(a=Array.from(s.transforms),r.set(n,a));const i=a.length;for(let o=0;o<i&&(a[o](t),t.isAttached());o++);}function cM(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function Zz(e,t){if(!t)return;const r=e._updateTags;let n=t;Array.isArray(t)||(n=[t]);for(const s of n)r.add(s)}function Lie(e){return e7(e,ta()._nodes)}function e7(e,t){const r=e.type,n=t.get(r);n===void 0&&Xt(17,r);const s=n.klass;e.type!==s.getType()&&Xt(18,s.name);const a=s.importJSON(e),i=e.children;if(Dt(a)&&Array.isArray(i))for(let o=0;o<i.length;o++){const c=e7(i[o],t);a.append(c)}return a}function uM(e,t,r){const n=vi,s=cl,a=wi;vi=t,cl=!0,wi=e;try{return r()}finally{vi=n,cl=s,wi=a}}function Ud(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const a=e._editorState,i=a._selection,o=r._selection,c=e._dirtyType!==Sm,u=vi,d=cl,f=wi,h=e._updating,g=e._observer;let x=null;if(e._pendingEditorState=null,e._editorState=r,!s&&c&&g!==null){wi=e,vi=r,cl=!1,e._updating=!0;try{const j=e._dirtyType,P=e._dirtyElements,A=e._dirtyLeaves;g.disconnect(),x=fie(a,r,e,j,P,A)}catch(j){if(j instanceof Error&&e._onError(j),d5)throw j;return nU(e,null,n,r),pz(e),e._dirtyType=Up,d5=!0,Ud(e,a),void(d5=!1)}finally{g.observe(n,oM),e._updating=h,vi=u,cl=d,wi=f}}r._readOnly||(r._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,T=e._normalizedNodes,k=e._updateTags,b=e._deferred;c&&(e._dirtyType=Sm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),(function(j,P){const A=j._decorators;let M=j._pendingDecorators||A;const F=P._nodeMap;let B;for(B in M)F.has(B)||(M===A&&(M=lU(j)),delete M[B])})(e,r);const C=s?null:lu(wc(e));if(e._editable&&C!==null&&(c||o===null||o.dirty)&&n!==null&&!k.has(Uie)){wi=e,vi=r;try{if(g!==null&&g.disconnect(),c||o===null||o.dirty){const j=e._blockCursorElement;j!==null&&v8(j,e,n),Die(i,o,e,C,k,n)}(function(j,P,A){let M=j._blockCursorElement;if(Ht(A)&&A.isCollapsed()&&A.anchor.type==="element"&&P.contains(document.activeElement)){const F=A.anchor,B=F.getNode(),V=F.offset;let ee=!1,ae=null;if(V===B.getChildrenSize())h5(B.getChildAtIndex(V-1))&&(ee=!0);else{const Z=B.getChildAtIndex(V);if(Z!==null&&h5(Z)){const te=Z.getPreviousSibling();(te===null||h5(te))&&(ee=!0,ae=j.getElementByKey(Z.__key))}}if(ee){const Z=j.getElementByKey(B.__key);return M===null&&(j._blockCursorElement=M=(function(te){const L=te.theme,K=document.createElement("div");K.contentEditable="false",K.setAttribute("data-lexical-cursor","true");let I=L.blockCursor;if(I!==void 0){if(typeof I=="string"){const H=dz(I);I=L.blockCursor=H}I!==void 0&&K.classList.add(...I)}return K})(j._config)),P.style.caretColor="transparent",void(ae===null?Z.appendChild(M):Z.insertBefore(M,ae))}}M!==null&&v8(M,j,P)})(e,n,o)}finally{g!==null&&g.observe(n,oM),wi=f,vi=u}}x!==null&&(function(j,P,A,M,F){const B=Array.from(j._listeners.mutation),V=B.length;for(let ee=0;ee<V;ee++){const[ae,Z]=B[ee];for(const te of Z){const L=P.get(te);L!==void 0&&ae(L,{dirtyLeaves:M,prevEditorState:F,updateTags:A})}}})(e,x,k,y,a),Ht(o)||o===null||i!==null&&i.is(o)||e.dispatchCommand(Sz,void 0);const E=e._pendingDecorators;E!==null&&(e._decorators=E,e._pendingDecorators=null,Ky("decorator",e,!0,E)),(function(j,P,A){const M=gM(P),F=gM(A);M!==F&&Ky("textcontent",j,!0,F)})(e,t||a,r),Ky("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:r,mutatedNodes:x,normalizedNodes:T,prevEditorState:t||a,tags:k}),(function(j,P){if(j._deferred=[],P.length!==0){const A=j._updating;j._updating=!0;try{for(let M=0;M<P.length;M++)P[M]()}finally{j._updating=A}}})(e,b),(function(j){const P=j._updates;if(P.length!==0){const A=P.shift();if(A){const[M,F]=A;H_(j,M,F)}}})(e)}function Ky(e,t,r,...n){const s=t._updating;t._updating=r;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,n)}finally{t._updating=s}}function dM(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[a,i]=s,o=e._pendingEditorState;let c;i!==void 0&&(c=i.onUpdate,i.skipTransforms&&(n=!0),i.discrete&&(o===null&&Xt(191),o._flushSync=!0),c&&e._deferred.push(c),Zz(e,i.tag)),o==null?H_(e,a,i):a()}}return n}function H_(e,t,r){const n=e._updateTags;let s,a=!1,i=!1;r!==void 0&&(s=r.onUpdate,Zz(e,r.tag),a=r.skipTransforms||!1,i=r.discrete||!1),s&&e._deferred.push(s);const o=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=eU(c||o),u=!0),c._flushSync=i;const d=vi,f=cl,h=wi,g=e._updating;vi=c,cl=!1,e._updating=!0,wi=e;const x=e._headless||e.getRootElement()===null;a7(null);try{u&&(x?o._selection!==null&&(c._selection=o._selection.clone()):c._selection=(function(k,b){const C=k.getEditorState()._selection,E=lu(wc(k));return Ht(C)||C==null?ZC(C,E,k,b):C.clone()})(e,r&&r.event||null));const v=e._compositionKey;t(),a=dM(e,a),(function(k,b){const C=b.getEditorState()._selection,E=k._selection;if(Ht(E)){const j=E.anchor,P=E.focus;let A;if(j.type==="text"&&(A=j.getNode(),A.selectionTransform(C,E)),P.type==="text"){const M=P.getNode();A!==M&&M.selectionTransform(C,E)}}})(c,e),e._dirtyType!==Sm&&(a?(function(k,b){const C=b._dirtyLeaves,E=k._nodeMap;for(const j of C){const P=E.get(j);gr(P)&&P.isAttached()&&P.isSimpleText()&&!P.isUnmergeable()&&zP(P)}})(c,e):(function(k,b){const C=b._dirtyLeaves,E=b._dirtyElements,j=k._nodeMap,P=Tf(),A=new Map;let M=C,F=M.size,B=E,V=B.size;for(;F>0||V>0;){if(F>0){b._dirtyLeaves=new Set;for(const ee of M){const ae=j.get(ee);gr(ae)&&ae.isAttached()&&ae.isSimpleText()&&!ae.isUnmergeable()&&zP(ae),ae!==void 0&&cM(ae,P)&&lM(b,ae,A),C.add(ee)}if(M=b._dirtyLeaves,F=M.size,F>0){Vb++;continue}}b._dirtyLeaves=new Set,b._dirtyElements=new Map,B.delete("root")&&B.set("root",!0);for(const ee of B){const ae=ee[0],Z=ee[1];if(E.set(ae,Z),!Z)continue;const te=j.get(ae);te!==void 0&&cM(te,P)&&lM(b,te,A)}M=b._dirtyLeaves,F=M.size,B=b._dirtyElements,V=B.size,Vb++}b._dirtyLeaves=C,b._dirtyElements=E})(c,e),dM(e),(function(k,b,C,E){const j=k._nodeMap,P=b._nodeMap,A=[];for(const[M]of E){const F=P.get(M);F!==void 0&&(F.isAttached()||(Dt(F)&&hz(F,M,j,P,A,E),j.has(M)||E.delete(M),A.push(M)))}for(const M of A)P.delete(M);for(const M of C){const F=P.get(M);F===void 0||F.isAttached()||(j.has(M)||C.delete(M),P.delete(M))}})(o,c,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(c._flushSync=!0);const T=c._selection;if(Ht(T)){const k=c._nodeMap,b=T.anchor.key,C=T.focus.key;k.get(b)!==void 0&&k.get(C)!==void 0||Xt(19)}else io(T)&&T._nodes.size===0&&(c._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=o,e._dirtyType=Up,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Ud(e)}finally{vi=d,cl=f,wi=h,e._updating=g,Vb=0}e._dirtyType!==Sm||e._deferred.length>0||(function(v,T){const k=T.getEditorState()._selection,b=v._selection;if(b!==null){if(b.dirty||!b.is(k))return!0}else if(k!==null)return!0;return!1})(c,e)?c._flushSync?(c._flushSync=!1,Ud(e)):u&&qie((()=>{Ud(e)})):(c._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function Nl(e,t,r){wi===e&&r===void 0?t():H_(e,t,r)}class Yy{constructor(t,r,n){this.element=t,this.before=r||null,this.after=n||null}withBefore(t){return new Yy(this.element,t,this.after)}withAfter(t){return new Yy(this.element,this.before,t)}withElement(t){return this.element===t?this:new Yy(t,this.before,this.after)}insertChild(t){const r=this.before||this.getManagedLineBreak();return r!==null&&r.parentElement!==this.element&&Xt(222),this.element.insertBefore(t,r),this}removeChild(t){return t.parentElement!==this.element&&Xt(223),this.element.removeChild(t),this}replaceChild(t,r){return r.parentElement!==this.element&&Xt(224),this.element.replaceChild(t,r),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const r=t==="decorator"&&(zp||yv);this.insertManagedLineBreak(r)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const r=this.element,n=t.nodeName==="IMG"?t.nextSibling:null;n&&r.removeChild(n),r.removeChild(t),r.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const r=this.getManagedLineBreak();if(r){if(t===(r.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,s=this.before,a=document.createElement("br");if(n.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",n.insertBefore(i,a),n.__lexicalLineBreak=i}else n.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let r=this.after;r!==null;r=r.previousSibling)t++;return t}resolveChildIndex(t,r,n,s){if(n===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=fM(r,n);a.push(s);const i=fM(r,this.element);let o=t.getIndexWithinParent();for(let c=0;c<i.length;c++){const u=a[c],d=i[c];if(u===void 0||u<d)break;if(u>d){o+=1;break}}return[t.getParentOrThrow(),o]}}function fM(e,t){const r=[];let n=t;for(;n!==e&&n!==null;n=n.parentNode){let s=0;for(let a=n.previousSibling;a!==null;a=a.previousSibling)s++;r.push(s)}return n!==e&&Xt(225),r.reverse()}class yo extends d1{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return Zae[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=ta()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(gr(r)&&t.push(r),Dt(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Dt(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;Dt(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const a=r[n-1];return Dt(a)&&a.getLastDescendant()||a||null}const s=r[t];return Dt(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:za(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&Xt(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:za(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&Xt(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContent(),Dt(a)&&s!==n-1&&!a.isInline()&&(t+=o0)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContentSize(),Dt(a)&&s!==n-1&&!a.isInline()&&(t+=o0.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=FP[t];return!!(this.getFormat()&r)}return!1}hasTextFormat(t){const r=km[t];return!!(this.getTextFormat()&r)}getFormatFlags(t,r){return S4(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){Gi();const n=mr();let s=t,a=r;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const c=this.getFirstChild();if(gr(c)||Dt(c))return c.select(0,0)}else if(!(t!==void 0&&t!==i||r!==void 0&&r!==i)){const c=this.getLastChild();if(gr(c)||Dt(c))return c.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const o=this.__key;return Ht(n)?(n.anchor.set(o,s,"element"),n.focus.set(o,a,"element"),n.dirty=!0,n):Yz(o,s,o,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((r=>r.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?FP[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,a=this.getChildrenSize(),i=this.getWritable();t+r<=a||Xt(226,String(t),String(r),String(a));const o=i.__key,c=[],u=[],d=this.getChildAtIndex(t+r);let f=null,h=a-r+s;if(t!==0)if(t===a)f=this.getLastChild();else{const x=this.getChildAtIndex(t);x!==null&&(f=x.getPreviousSibling())}if(r>0){let x=f===null?this.getFirstChild():f.getNextSibling();for(let y=0;y<r;y++){x===null&&Xt(100);const v=x.getNextSibling(),T=x.__key;dm(x.getWritable()),u.push(T),x=v}}let g=f;for(let x=0;x<s;x++){const y=n[x];g!==null&&y.is(g)&&(f=g=g.getPreviousSibling());const v=y.getWritable();v.__parent===o&&h--,dm(v);const T=y.__key;if(g===null)i.__first=T,v.__prev=null;else{const k=g.getWritable();k.__next=T,v.__prev=k.__key}y.__key===o&&Xt(76),v.__parent=o,c.push(T),g=y}if(t+r===a)g!==null&&(g.getWritable().__next=null,i.__last=g.__key);else if(d!==null){const x=d.getWritable();if(g!==null){const y=g.getWritable();x.__prev=g.__key,y.__next=d.__key}else x.__prev=null}if(i.__size=h,u.length){const x=mr();if(Ht(x)){const y=new Set(u),v=new Set(c),{anchor:T,focus:k}=x;hM(T,y,v)&&b4(T,T.getNode(),this,f,d),hM(k,y,v)&&b4(k,k.getNode(),this,f,d),h!==0||this.canBeEmpty()||$o(this)||this.remove()}}return i}getDOMSlot(t){return new Yy(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ps(r)){const n=this.getIndent();n>0&&(r.style.paddingInlineStart=40*n+"px");const s=this.getDirection();s&&(r.dir=s)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),n=this.getTextStyle();return r!==0&&(t.textFormat=r),n!==""&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const n=this.getDOMSlot(t);let s=n.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=r.getElementByKey(a.getKey());i!==null&&(s==null?(n.insertChild(i),s=i):s!==i&&n.replaceChild(i,s),s=s.nextSibling)}}}function Dt(e){return e instanceof yo}function hM(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}let t7=class extends d1{decorate(t,r){Xt(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function zn(e){return e instanceof t7}class o2 extends yo{static getType(){return"root"}static clone(){return new o2}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){Xt(51)}getTextContent(){const t=this.__cachedText;return!i2()&&ta()._dirtyType!==Sm||t===null?super.getTextContent():t}remove(){Xt(52)}replace(t){Xt(53)}insertBefore(t){Xt(54)}insertAfter(t){Xt(55)}updateDOM(t,r){return!1}splice(t,r,n){for(const s of n)Dt(s)||zn(s)||Xt(282);return super.splice(t,r,n)}static importJSON(t){return Hs().updateFromJSON(t)}collapseAtStart(){return!0}}function ri(e){return e instanceof o2}function eU(e){return new G_(new Map(e._nodeMap))}function r7(){return new G_(new Map([["root",new o2]]))}function tU(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&Xt(130,r.name),Dt(e)){const n=t.children;Array.isArray(n)||Xt(59,r.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=tU(s[a]);n.push(i)}}return t}class G_{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,r){return uM(r&&r.editor||null,this,t)}clone(t){const r=new G_(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return uM(null,this,(()=>({root:tU(Hs())})))}}const _4="historic",Bie="history-push",Xy="history-merge",$ie="paste",rU="collaboration",zie="skip-scroll-into-view",Uie="skip-dom-selection";class n7 extends yo{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class l2 extends yo{static getType(){return"paragraph"}static clone(t){return new l2(t.__key)}createDOM(t){const r=document.createElement("p"),n=Ep(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:Wie,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ps(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n)}return{element:r}}static importJSON(t){return js().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,r){const n=js();n.setTextFormat(t.format),n.setTextStyle(t.style);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||gr(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Wie(e){const t=js();return e.style&&(t.setFormat(e.style.textAlign),g7(e,t)),{node:t}}function js(){return Ho(new l2)}function s7(e){return e instanceof l2}const Dn=0,up=1,Hie=4;function nU(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=r7(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=Sm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function Gie(e){const t=e||{},r=Iie(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,a=t.disableEvents||!1,i=r7(),o=t.namespace||(s!==null?s._config.namespace:dU()),c=t.editorState,u=[o2,Zf,s2,a2,l2,n7,...t.nodes||[]],{onError:d,html:f}=t,h=t.editable===void 0||t.editable;let g;if(e===void 0&&r!==null)g=r._nodes;else{g=new Map;for(let y=0;y<u.length;y++){let v=u[y],T=null,k=null;if(typeof v!="function"){const P=v;v=P.replace,T=P.with,k=P.withKlass||null}const{ownNodeConfig:b}=p7(v),C=v.getType(),E=v.transform(),j=new Set;b&&b.$transform&&j.add(b.$transform),E!==null&&j.add(E),g.set(C,{exportDOM:f&&f.export?f.export.get(v):void 0,klass:v,replace:T,replaceWithKlass:k,sharedNodeState:oie(u[y]),transforms:j})}}const x=new V_(i,s,g,{disableEvents:a,namespace:o,theme:n},d||console.error,(function(y,v){const T=new Map,k=new Set,b=C=>{Object.keys(C).forEach((E=>{let j=T.get(E);j===void 0&&(j=[],T.set(E,j)),j.push(C[E])}))};return y.forEach((C=>{const E=C.klass.importDOM;if(E==null||k.has(E))return;k.add(E);const j=E.call(C.klass);j!==null&&b(j)})),v&&b(v),T})(g,f?f.import:void 0),h,e);return c!==void 0&&(x._pendingEditorState=c,x._dirtyType=Up),x}class V_{constructor(t,r,n,s,a,i,o,c){this._createEditorArgs=c,this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Sm,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=dU(),this._onError=a,this._htmlConversions=i,this._editable=o,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&Xt(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&Xt(36,String(t));const i=a[n];return i.add(r),()=>{i.delete(r),a.every((o=>o.size===0))&&s.delete(t)}}registerMutationListener(t,r,n){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(r);i===void 0&&(i=new Set,a.set(r,i)),i.add(s);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(r,s),()=>{i.delete(s),i.size===0&&a.delete(r)}}getRegisteredNode(t){const r=this._nodes.get(t.getType());return r===void 0&&Xt(37,t.name),r}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,r){const n=this._editorState,s=_M(n).get(r.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,r){const n=this.getRegisteredNode(t);return n.transforms.add(r),n}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],a=n.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,r);s.push(i)}return(function(i,o){const c=_M(i.getEditorState()),u=[];for(const d of o){const f=c.get(d);f&&u.push(f)}u.length!==0&&i.update((()=>{for(const d of u)for(const f of d.keys()){const h=za(f);h&&h.markDirty()}}),i._pendingEditorState===null?{tag:Xy}:void 0)})(this,s.map((i=>i.klass.getType()))),()=>{s.forEach((i=>i.transforms.delete(r)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Er(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=Ep(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,nU(this,r,t,s),r!==null&&(this._config.disableEvents||Tie(r),n!=null&&r.classList.remove(...n)),t!==null){const a=h7(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=Up,pz(this),this._updateTags.add(Xy),Ud(this),this._config.disableEvents||(function(o,c){const u=o.ownerDocument,d=v4.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",Hz),v4.set(u,(d||0)+1),o.__lexicalEditor=c;const f=Wz(o);for(let h=0;h<u8.length;h++){const[g,x]=u8[h],y=typeof x=="function"?v=>{KP(v)||(qP(v),(c.isEditable()||g==="click")&&x(v,c))}:v=>{if(KP(v))return;qP(v);const T=c.isEditable();switch(g){case"cut":return T&&Er(c,XC,v);case"copy":return Er(c,$_,v);case"paste":return T&&Er(c,qC,v);case"dragstart":return T&&Er(c,Oz,v);case"dragover":return T&&Er(c,Rz,v);case"dragend":return T&&Er(c,vie,v);case"focus":return T&&Er(c,_ie,v);case"blur":return T&&Er(c,Sie,v);case"drop":return T&&Er(c,Fz,v)}};o.addEventListener(g,y),f.push((()=>{o.removeEventListener(g,y)}))}})(t,this),n!=null&&t.classList.add(...n)}else this._window=null,this._updateTags.add(Xy),Ud(this);Ky("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&Xt(38);let n=t;n._readOnly&&(n=eU(t),n._selection=t._selection?t._selection.clone():null),gz(this);const s=this._pendingEditorState,a=this._updateTags,i=r!==void 0?r.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),Ud(this)),this._pendingEditorState=n,this._dirtyType=Up,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||Ud(this)}parseEditorState(t,r){return(function(n,s,a){const i=r7(),o=vi,c=cl,u=wi,d=s._dirtyElements,f=s._dirtyLeaves,h=s._cloneNotNeeded,g=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,vi=i,cl=!1,wi=s,a7(null);try{const x=s._nodes;e7(n.root,x),a&&a(),i._readOnly=!0}catch(x){x instanceof Error&&s._onError(x)}finally{s._dirtyElements=d,s._dirtyLeaves=f,s._cloneNotNeeded=h,s._dirtyType=g,vi=o,cl=c,wi=u}return i})(typeof t=="string"?JSON.parse(t):t,this,r)}read(t){return Ud(this),this.getEditorState().read(t,{editor:this})}update(t,r){(function(n,s,a){n._updating?n._updates.push([s,a]):H_(n,s,a)})(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),Nl(this,(()=>{const s=mr(),a=Hs();s!==null?s.dirty||Xi(s.clone()):a.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),Qie("focus"),Zie((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=lu(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Ky("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}V_.version="0.35.0+prod.esm";let p8=null;function a7(e){p8=e}let Vie=1;function sU(e,t){const r=i7(e,t);return r===void 0&&Xt(30,t),r}function i7(e,t){return e._nodes.get(t)}const qie=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function mM(e){return zn($f(e))}function o7(e){const t=document.activeElement;if(!Ps(t))return!1;const r=t.nodeName;return zn($f(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&q_(t)==null)}function c2(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!o7(t)&&aU(t)===e}catch{return!1}}function l7(e){return e instanceof V_}function aU(e){let t=e;for(;t!=null;){const r=q_(t);if(l7(r))return r;t=u2(t)}return null}function q_(e){return e?e.__lexicalEditor:null}function um(e){return z_(e)||e.isToken()}function Bd(e){return um(e)||e.isSegmented()}function v0(e){return m1(e)&&e.nodeType===Hae}function Kie(e){return m1(e)&&e.nodeType===Gae}function Wp(e){let t=e;for(;t!=null;){if(v0(t))return t;t=t.firstChild}return null}function S4(e,t,r){const n=km[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function iU(e){return gr(e)||Jd(e)||zn(e)}function Yie(e,t){const r=(function(){const i=p8;return p8=null,i})();if((t=t||r&&r.__key)!=null)return void(e.__key=t);Gi(),Jz();const n=ta(),s=eh(),a=""+Vie++;s._nodeMap.set(a,e),Dt(e)?n._dirtyElements.set(a,!0):n._dirtyLeaves.add(a),n._cloneNotNeeded.add(a),n._dirtyType=fz,e.__key=a}function dm(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,o=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(n.__first=i),a===null&&(n.__last=o),c!==null&&(c.__next=i),u!==null&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function k4(e){Jz();const t=e.getLatest(),r=t.__parent,n=eh(),s=ta(),a=n._nodeMap,i=s._dirtyElements;r!==null&&(function(c,u,d){let f=c;for(;f!==null;){if(d.has(f))return;const h=u.get(f);if(h===void 0)break;d.set(f,!1),f=h.__parent}})(r,a,i);const o=t.__key;s._dirtyType=fz,Dt(e)?i.set(o,!0):s._dirtyLeaves.add(o)}function Vi(e){Gi();const t=ta(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=za(r);n!==null&&n.getWritable()}if(e!==null){const n=za(e);n!==null&&n.getWritable()}}}function Tf(){return i2()?null:ta()._compositionKey}function za(e,t){const r=(t||eh())._nodeMap.get(e);return r===void 0?null:r}function oU(e,t){const r=K_(e,ta());return r!==void 0?za(r,t):null}function K_(e,t){return e[`__lexicalKey_${t._key}`]}function $f(e,t){let r=e;for(;r!=null;){const n=oU(r,t);if(n!==null)return n;r=u2(r)}return null}function lU(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function gM(e){return e.read((()=>Hs().getTextContent()))}function Hs(){return cU(eh())}function cU(e){return e._nodeMap.get("root")}function Xi(e){Gi();const t=eh();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function wp(e){const t=ta(),r=(function(n,s){let a=n;for(;a!=null;){const i=K_(a,s);if(i!==void 0)return i;a=u2(a)}return null})(e,t);return r===null?e===t.getRootElement()?za("root"):null:za(r)}function uU(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function c7(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function dU(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function fU(e){return v0(e)?e.nodeValue:null}function u7(e,t,r){const n=lu(wc(t));if(n===null)return;const s=n.anchorNode;let{anchorOffset:a,focusOffset:i}=n;if(s!==null){let o=fU(s);const c=$f(s);if(o!==null&&gr(c)){if(o===L_&&r){const u=r.length;o=r,a=u,i=u}o!==null&&d7(c,o,a,i,e)}}}function d7(e,t,r,n,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let o=t;(i||s)&&t[t.length-1]===L_&&(o=t.slice(0,-1));const c=a.getTextContent();if(s||o!==c){if(o===""){if(Vi(null),yv||zp||u4)a.remove();else{const y=ta();setTimeout((()=>{y.update((()=>{a.isAttached()&&a.remove()}))}),20)}return}const u=a.getParent(),d=h1(),f=a.getTextContentSize(),h=Tf(),g=a.getKey();if(a.isToken()||h!==null&&g===h&&!i||Ht(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===f&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const x=mr();if(!Ht(x)||r===null||n===null)return void pM(a,o,x);if(x.setTextNodeRange(a,r,a,n),a.isSegmented()){const y=fa(a.getTextContent());a.replace(y),a=y}pM(a,o,x)}}}function pM(e,t,r){if(e.setTextContent(t),Ht(r)){const n=e.getKey();for(const s of["anchor","focus"]){const a=r[s];a.type==="text"&&a.key===n&&(a.offset=Df(e,a.offset,"clamp"))}}}function Jw(e,t,r){const n=t[r]||!1;return n==="any"||n===e[r]}function Xie(e,t){return Jw(e,t,"altKey")&&Jw(e,t,"ctrlKey")&&Jw(e,t,"shiftKey")&&Jw(e,t,"metaKey")}function es(e,t,r){return Xie(e,r)&&e.key.toLowerCase()===t.toLowerCase()}const Ld={ctrlKey:!Lu,metaKey:Lu},xM={altKey:Lu,ctrlKey:!Lu};function yM(e){return e.key==="Backspace"}function vM(e){return es(e,"a",Ld)}function Jie(e){const t=Hs();if(Ht(e)){const r=e.anchor,n=e.focus,s=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();return r.set(s.getKey(),0,"element"),n.set(s.getKey(),s.getChildrenSize(),"element"),h4(e),e}{const r=t.select(0,t.getChildrenSize());return Xi(h4(r)),r}}function Ep(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const a=dz(s);return r[t]=a,a}return s}function f7(e,t,r,n,s){if(r.size===0)return;const a=n.__type,i=n.__key,o=t.get(a);o===void 0&&Xt(33,a);const c=o.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const d=u.get(i),f=d==="destroyed"&&s==="created";(d===void 0||f)&&u.set(i,f?"updated":s)}function wM(e,t,r){const n=e.getParent();let s=r,a=e;return n!==null&&(t&&r===0?(s=a.getIndexWithinParent(),a=n):t||r!==a.getChildrenSize()||(s=a.getIndexWithinParent()+1,a=n)),a.getChildAtIndex(t?s-1:s)}function x8(e,t){const r=e.offset;if(e.type==="element")return wM(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?wM(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function hU(e){const t=wc(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Er(e,t,r){return(function(n,s,a){const i=c7(n);for(let o=4;o>=0;o--)for(let c=0;c<i.length;c++){const u=i[c],d=u._commands.get(s);if(d!==void 0){const f=d[o];if(f!==void 0){const h=Array.from(f),g=h.length;let x=!1;if(Nl(u,(()=>{for(let y=0;y<g;y++)if(h[y](a,n))return void(x=!0)})),x)return x}}}return!1})(e,t,r)}function Y_(e){return!ri(e)&&!e.isLastChild()&&!e.isInline()}function Nm(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&Xt(75,t),r}function u2(e){const t=e.assignedSlot||e.parentElement;return w8(t)?t.host:t}function mU(e){return Kie(e)?e:Ps(e)?e.ownerDocument:null}function Qie(e){Gi(),ta()._updateTags.add(e)}function Zie(e){Gi(),ta()._deferred.push(e)}function y8(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function h7(e){const t=mU(e);return t?t.defaultView:null}function wc(e){const t=e._window;return t===null&&Xt(78),t}function eoe(e){return Dt(e)&&e.isInline()||zn(e)&&e.isInline()}function toe(e){let t=e.getParentOrThrow();for(;t!==null;){if($o(t))return t;t=t.getParentOrThrow()}return t}function $o(e){return ri(e)||Dt(e)&&e.isShadowRoot()}function Ho(e){const t=ta(),r=e.getType(),n=i7(t,r);n===void 0&&Xt(200,e.constructor.name,r);const{replace:s,replaceWithKlass:a}=n;if(s!==null){const i=s(e),o=i.constructor;return a!==null?i instanceof a||Xt(201,a.name,a.getType(),o.name,o.getType(),e.constructor.name,r):i instanceof e.constructor&&o!==e.constructor||Xt(202,o.name,o.getType(),e.constructor.name,r),i.__key===e.__key&&Xt(203,e.constructor.name,r,o.name,o.getType()),i}return e}function f5(e,t){!ri(e.getParent())||Dt(t)||zn(t)||Xt(99)}function roe(e){const t=za(e);return t===null&&Xt(63,e),t}function h5(e){return(zn(e)||Dt(e)&&!e.canBeEmpty())&&!e.isInline()}function v8(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function lu(e){return du?(e||window).getSelection():null}function noe(e){const t=h7(e);return t?t.getSelection():null}function gU(e){return Ps(e)&&e.tagName==="A"}function Ps(e){return m1(e)&&e.nodeType===Wae}function m1(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function w8(e){return m1(e)&&e.nodeType===Vae}function b8(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function T4(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function hc(e){if(zn(e)&&!e.isInline())return!0;if(!Dt(e)||$o(e))return!1;const t=e.getFirstChild(),r=t===null||Jd(t)||gr(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function m5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function d2(){return ta()}const bM=new WeakMap,soe=new Map;function _M(e){if(!e._readOnly&&e.isEmpty())return soe;e._readOnly||Xt(192);let t=bM.get(e);return t||(t=(function(r){const n=new Map;for(const[s,a]of r._nodeMap){const i=a.__type;let o=n.get(i);o||(o=new Map,n.set(i,o)),o.set(s,a)}return n})(e),bM.set(e,t)),t}function m7(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function g7(e,t){const r=parseInt(e.style.paddingInlineStart,10)||0,n=Math.round(r/40);t.setIndent(n)}function aoe(e){e.__lexicalUnmanaged=!0}function ioe(e){return e.__lexicalUnmanaged===!0}function vy(e,t){return(function(r,n){return Object.prototype.hasOwnProperty.call(r,n)})(e,t)&&e[t]!==d1[t]}function p7(e){const t=DP in e.prototype?e.prototype[DP]():void 0,r=(function(i){return i===t7||i===yo||i===d1})(e),n=!r&&vy(e,"getType")?e.getType():void 0;let s,a=n;if(t)if(n)s=t[n];else for(const[i,o]of Object.entries(t))a=i,s=o;if(!r&&a&&(vy(e,"getType")||(e.getType=()=>a),vy(e,"clone")||(e.clone=i=>(a7(i),new e)),vy(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!vy(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function ooe(e){const t=d2();return Gi(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const loe={next:"previous",previous:"next"};class x7{constructor(t){this.origin=t}[Symbol.iterator](){return _7({hasNext:jm,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return Yi(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Yi(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,r){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(n===null?this.insert(t):n.replace(t,r)),this}splice(t,r,n="next"){const s=n===this.direction?r:Array.from(r).reverse();let a=this;const i=this.getParentAtCaret(),o=new Map;for(let c=a.getAdjacentCaret();c!==null&&o.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();o.set(u.getKey(),u)}for(const c of s){if(o.size>0){const u=a.getNodeAtCaret();if(u){if(o.delete(u.getKey()),o.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const d=c.getParent();d&&d.is(i)&&c.remove(),u.replace(c)}}else u===null&&Xt(263,Array.from(o).join(" "))}else a.insert(c);a=Yi(c,this.direction)}for(const c of o.values())c.remove();return this}}class kv extends x7{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:bc(t,this.direction)}getParentCaret(t="root"){return Yi(y7(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=g1(this.direction);return Yi(this.getNodeAtCaret(),t)||bc(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof kv&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const coe={root:ri,shadowRoot:$o};function g1(e){return loe[e]}function y7(e,t="root"){return coe[t](e)?null:e}class Em extends x7{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Yi(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Dt(this.origin)?bc(this.origin,this.direction):null}getParentCaret(t="root"){return Yi(y7(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=g1(this.direction);return Yi(this.getNodeAtCaret(),t)||bc(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof Em&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof Em||t instanceof Am)&&this.direction===t.direction&&this.origin.is(t.origin)}}class Am extends x7{type="text";constructor(t,r){super(t),this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Pm(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Yi(y7(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Pm(this.origin,g1(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Am&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof Em||t instanceof Am)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Yi(this.origin,this.direction)}}function Ff(e){return e instanceof Am}function jm(e){return e instanceof Em}function Yu(e){return e instanceof kv}const uoe={next:class extends Am{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Am{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},doe={next:class extends Em{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Em{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},foe={next:class extends kv{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends kv{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Yi(e,t){return e?new doe[t](e):null}function Pm(e,t,r){return e?new uoe[t](e,Df(e,r)):null}function Df(e,t,r="error"){const n=e.getTextContentSize();let s=t==="next"?n:t==="previous"?0:t;return(s<0||s>n)&&(r!=="clamp"&&(function(a,...i){const o=new URL("https://lexical.dev/docs/error"),c=new URLSearchParams;c.append("code",a);for(const u of i)c.append("v",u);o.search=c.toString(),console.warn(`Minified Lexical warning #${a}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(t),String(n),e.getKey()),s=s<0?0:n),s}function SM(e,t){return new moe(e,t)}function bc(e,t){return Dt(e)?new foe[t](e):null}function hoe(e){return e&&e.getChildCaret()||e}function v7(e){return e&&hoe(e.getAdjacentCaret())}class w7{type="node-caret-range";constructor(t,r,n){this.anchor=t,this.focus=r,this.direction=n}getLatest(){const t=this.anchor.getLatest(),r=this.focus.getLatest();return t===this.anchor&&r===this.focus?this:new w7(t,r,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return Ff(a)?(function(i,o){const{direction:c,origin:u}=i,d=Df(u,o==="focus"?g1(c):c);return SM(i,d-i.offset)})(a,s):null},r=t("anchor"),n=t("focus");if(r&&n){const{caret:s}=r,{caret:a}=n;if(s.isSameNodeCaret(a))return[SM(s,a.offset-s.offset),null]}return[r,n]}iterNodeCarets(t="root"){const r=Ff(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),s=Ff(n),a=i=>i.isSameNodeCaret(n)?null:v7(i)||i.getParentCaret(t);return _7({hasNext:i=>i!==null&&!(s&&n.isSameNodeCaret(i)),initial:r.isSameNodeCaret(n)?null:a(r),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class moe{type="slice";constructor(t,r){this.caret=t,this.distance=r}getSliceIndices(){const{distance:t,caret:{offset:r}}=this,n=r+t;return n<r?[n,r]:[r,n]}getTextContent(){const[t,r]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,r)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:r}}=this,[n,s]=this.getSliceIndices(),a=t.getTextContent();return Pm(t.setTextContent(a.slice(0,n)+a.slice(s)),r,n)}}function b7(e){return zf(e,Yi(Hs(),e.direction))}function goe(e){return zf(e,e)}function zf(e,t){return e.direction!==t.direction&&Xt(265),new w7(e,t,e.direction)}function _7(e){const{initial:t,hasNext:r,step:n,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!r(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=n(a),i}}}function pU(e,t){const r=qb(e.origin,t.origin);switch(r===null&&Xt(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{const n=e.type==="text",s=t.type==="text";return n&&s?(function(a,i){return Math.sign(a-i)})(e.offset,t.offset):e.type===t.type?0:n?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return xU(r)}}function xU(e){const{a:t,b:r}=e,n=t.__key,s=r.__key;let a=t,i=r;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===n)return 1}return a===null?1:-1}function Qw(e,t){return t.is(e)}function kM(e){return Dt(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function qb(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const r=new Map;for(let[n,s]=kM(e);n;s=n,n=n.getParent())r.set(n,s);for(let[n,s]=kM(t);n;s=n,n=n.getParent()){const a=r.get(n);if(a!==void 0)return a===null?(Qw(e,n)||Xt(276),{commonAncestor:n,type:"ancestor"}):s===null?(Qw(t,n)||Xt(277),{commonAncestor:n,type:"descendant"}):((Dt(a)||Qw(e,a))&&(Dt(s)||Qw(t,s))&&n.is(a.getParent())&&n.is(s.getParent())||Xt(278),{a,b:s,commonAncestor:n,type:"branch"})}return null}function l0(e,t){const{type:r,key:n,offset:s}=e,a=roe(e.key);return r==="text"?(gr(a)||Xt(266,a.getType(),n),Pm(a,t,s)):(Dt(a)||Xt(267,a.getType(),n),yoe(a,e.offset,t))}function Mm(e,t){const{origin:r,direction:n}=t,s=n==="next";Ff(t)?e.set(r.getKey(),t.offset,"text"):jm(t)?gr(r)?e.set(r.getKey(),Df(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(s?1:0),"element"):(Yu(t)&&Dt(r)||Xt(268),e.set(r.getKey(),s?0:r.getChildrenSize(),"element"))}function poe(e){const t=mr(),r=Ht(t)?t:W_();return Kb(r,e),Xi(r),r}function Kb(e,t){Mm(e.anchor,t.anchor),Mm(e.focus,t.focus)}function TM(e){const{anchor:t,focus:r}=e,n=l0(t,"next"),s=l0(r,"next"),a=pU(n,s)<=0?"next":"previous";return zf(Hp(n,a),Hp(s,a))}function S7(e){const{direction:t,origin:r}=e,n=Yi(r,g1(t)).getNodeAtCaret();return n?Yi(n,t):bc(r.getParentOrThrow(),t)}function CM(e,t="root"){const r=[e];for(let n=Yu(e)?e.getParentCaret(t):e.getSiblingCaret();n!==null;n=n.getParentCaret(t))r.push(S7(n));return r}function g5(e){return!!e&&e.origin.isAttached()}function xoe(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const r="root",n="next";let s=t;const a=vU(e,n),i=CM(a.anchor,r),o=CM(a.focus.getFlipped(),r),c=new Set,u=[];for(const x of a.iterNodeCarets(r))if(Yu(x))c.add(x.origin.getKey());else if(jm(x)){const{origin:y}=x;Dt(y)&&!c.has(y.getKey())||u.push(y)}for(const x of u)x.remove();for(const x of a.getTextSlices()){if(!x)continue;const{origin:y}=x.caret,v=y.getTextContentSize(),T=S7(Yi(y,n)),k=y.getMode();if(Math.abs(x.distance)===v&&s==="removeEmptySlices"||k==="token"&&x.distance!==0)T.remove();else if(x.distance!==0){s="removeEmptySlices";let b=x.removeTextSlice();const C=x.caret.origin;if(k==="segmented"){const E=b.origin,j=fa(E.getTextContent()).setStyle(E.getStyle()).setFormat(E.getFormat());T.replaceOrInsert(j),b=Pm(j,n,b.offset)}C.is(i[0].origin)&&(i[0]=b),C.is(o[0].origin)&&(o[0]=b.getFlipped())}}let d,f;for(const x of i)if(g5(x)){d=mc(x);break}for(const x of o)if(g5(x)){f=mc(x);break}const h=(function(x,y,v){if(!x||!y)return null;const T=x.getParentAtCaret(),k=y.getParentAtCaret();if(!T||!k)return null;const b=T.getParents().reverse();b.push(T);const C=k.getParents().reverse();C.push(k);const E=Math.min(b.length,C.length);let j;for(j=0;j<E&&b[j]===C[j];j++);const P=(F,B)=>{let V;for(let ee=j;ee<F.length;ee++){const ae=F[ee];if($o(ae))return;!V&&B(ae)&&(V=ae)}return V},A=P(b,hc),M=A&&P(C,(F=>v.has(F.getKey())&&hc(F)));return A&&M?[A,M]:null})(d,f,c);if(h){const[x,y]=h;bc(x,"previous").splice(0,y.getChildren()),y.remove()}const g=[d,f,...i,...o].find(g5);if(g)return goe(Hp(mc(g),e.direction));Xt(269,JSON.stringify(i.map((x=>x.origin.__key))))}function mc(e){const t=(function(s){let a=s;for(;Yu(a);){const i=v7(a);if(!Yu(i))break;a=i}return a})(e.getLatest()),{direction:r}=t;if(gr(t.origin))return Ff(t)?t:Pm(t.origin,r,r);const n=t.getAdjacentCaret();return jm(n)&&gr(n.origin)?Pm(n.origin,r,g1(r)):t}function yU(e){return Ff(e)&&e.offset!==Df(e.origin,e.direction)}function Hp(e,t){return e.direction===t?e:e.getFlipped()}function vU(e,t){return e.direction===t?e:zf(Hp(e.focus,t),Hp(e.anchor,t))}function yoe(e,t,r){let n=bc(e,"next");for(let s=0;s<t;s++){const a=n.getAdjacentCaret();if(a===null)break;n=a}return Hp(n,r)}const wU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,voe=wU?_.useLayoutEffect:_.useEffect,Zw={tag:Xy};function bU({initialConfig:e,children:t}){const r=_.useMemo((()=>{const{theme:n,namespace:s,nodes:a,onError:i,editorState:o,html:c}=e,u=$ae(null,n),d=Gie({editable:e.editable,html:c,namespace:s,nodes:a,onError:f=>i(f,d),theme:n});return(function(f,h){if(h!==null){if(h===void 0)f.update((()=>{const g=Hs();if(g.isEmpty()){const x=js();g.append(x);const y=wU?document.activeElement:null;(mr()!==null||y!==null&&y===f.getRootElement())&&x.select()}}),Zw);else if(h!==null)switch(typeof h){case"string":{const g=f.parseEditorState(h);f.setEditorState(g,Zw);break}case"object":f.setEditorState(h,Zw);break;case"function":f.update((()=>{Hs().isEmpty()&&h(f)}),Zw)}}})(d,o),[d,u]}),[]);return voe((()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)}),[]),l.jsx(u1.Provider,{value:r,children:t})}const woe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function boe(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function _oe(){return(function(e){const[t]=td(),r=_.useMemo((()=>e(t)),[t,e]),[n,s]=_.useState((()=>r.initialValueFn())),a=_.useRef(n);return woe((()=>{const{initialValueFn:i,subscribe:o}=r,c=i();return a.current!==c&&(a.current=c,s(c)),o((u=>{a.current=u,s(u)}))}),[r,e]),n})(boe)}function Soe(){return Hs().getTextContent()}function koe(e,t=!0){if(e)return!1;let r=Soe();return t&&(r=r.trim()),r===""}function Toe(e){if(!koe(e,!1))return!1;const t=Hs().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(zn(s))return!1;if(Dt(s)){if(!s7(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let o=0;o<i;o++){const c=a[n];if(!gr(c))return!1}}}return!0}function _U(e){return()=>Toe(e)}const _8=new Map;function SU(e){const t={};if(!e)return t;const r=e.split(";");for(const n of r)if(n!==""){const[s,a]=n.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function NM(e){let t=_8.get(e);return t===void 0&&(t=SU(e),_8.set(e,t)),t}function kU(e){const t=d2().getElementByKey(e.getKey());if(t===null)return null;const r=t.ownerDocument.defaultView;return r===null?null:r.getComputedStyle(t)}function TU(e){return kU(ri(e)?e:e.getParentOrThrow())}function EM(e){const t=TU(e);return t!==null&&t.direction==="rtl"}function CU(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!Bd(t)&&r!==null){const[n,s]=r,a=e.isBackward(),i=n.getNode(),o=s.getNode(),c=t.is(i),u=t.is(o);if(c||u){const[d,f]=m8(e),h=i.is(o),g=t.is(a?o:i),x=t.is(a?i:o);let y,v=0;h?(v=d>f?f:d,y=d>f?d:f):g?(v=a?f:d,y=void 0):x&&(v=0,y=a?d:f),t.__text=t.__text.slice(v,y)}}return t}function Coe(e){const t=e.getStyle(),r=SU(t);_8.set(t,r)}function Noe(e,t){const r=e.getFormatType(),n=e.getIndent();r!==t.getFormatType()&&t.setFormat(r),n!==t.getIndent()&&t.setIndent(n)}function Ap(e,t,r=Noe){if(e===null)return;const n=e.getStartEndPoints(),s=new Map;let a=null;if(n){const[i,o]=n;a=W_(),a.anchor.set(i.key,i.offset,i.type),a.focus.set(o.key,o.offset,o.type);const c=p5(i.getNode(),hc),u=p5(o.getNode(),hc);Dt(c)&&s.set(c.getKey(),c),Dt(u)&&s.set(u.getKey(),u)}for(const i of e.getNodes())if(Dt(i)&&hc(i))s.set(i.getKey(),i);else if(n===null){const o=p5(i,hc);Dt(o)&&s.set(o.getKey(),o)}for(const[i,o]of s){const c=t();r(o,c),o.replace(c,!0),a&&(i===a.anchor.key&&a.anchor.set(c.getKey(),a.anchor.offset,a.anchor.type),i===a.focus.key&&a.focus.set(c.getKey(),a.focus.offset,a.focus.type))}a&&e.is(mr())&&Xi(a)}function NU(e){const t=EU(e);return t!==null&&t.writingMode==="vertical-rl"}function EU(e){const t=e.anchor.getNode();return Dt(t)?kU(t):TU(t)}function AM(e,t){let r=NU(e)?!t:t;AU(e)&&(r=!r);const n=l0(e.focus,r?"previous":"next");if(yU(n))return!1;for(const s of b7(n)){if(Yu(s))return!s.origin.isInline();if(!Dt(s.origin)){if(zn(s.origin))return!0;break}}return!1}function Eoe(e,t,r,n){e.modify(t?"extend":"move",r,n)}function AU(e){const t=EU(e);return t!==null&&t.direction==="rtl"}function jM(e,t,r){const n=AU(e);let s;s=NU(e)||n?!r:r,Eoe(e,t,s,"character")}function p5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function Aoe(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const jU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,joe=jU&&"documentMode"in document?document.documentMode:null;!(!jU||!("InputEvent"in window)||joe)&&"getTargetRanges"in new window.InputEvent("input");function PU(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}function qm(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function ei(e,...t){const r=PU(...t);r.length>0&&e.classList.add(...r)}function Of(e,...t){const r=PU(...t);r.length>0&&e.classList.remove(...r)}function Poe(e){return e?e.getAdjacentCaret():null}function Moe(e,t){let r=e;for(;r!=null;){if(r instanceof t)return r;r=r.getParent()}return null}function Foe(e){const t=X_(e,(r=>Dt(r)&&!r.isInline()));return Dt(t)||Aoe(4,e.__key),t}const X_=(e,t)=>{let r=e;for(;r!==Hs()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function tm(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function MU(e,t){const r=[],n=Array.from(e).reverse();for(let s=n.pop();s!==void 0;s=n.pop())if(t(s))r.push(s);else if(Dt(s))for(const a of Doe(s))n.push(a);return r}function Doe(e){return Ooe(bc(e,"previous"))}function Ooe(e){return _7({hasNext:jm,initial:e.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function Roe(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=n.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const o=i.payload;if(o&&o.functionId==="makeChanges"){const c=o.args;if(c){const[u,d,f,h,g,x]=c;e.update((()=>{const y=mr();if(Ht(y)){const v=y.anchor;let T=v.getNode(),k=0,b=0;if(gr(T)&&u>=0&&d>=0&&(k=u,b=u+d,y.setTextNodeRange(T,k,T,b)),k===b&&f===""||(y.insertRawText(f),T=v.getNode()),gr(T)){k=h,b=h+g;const C=T.getTextContentSize();k=k>C?C:k,b=b>C?C:b,y.setTextNodeRange(T,k,T,b)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function Ioe(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(!DU.has(i.nodeName)){const o=OU(i,e,s,!1);o!==null&&(n=n.concat(o))}}return(function(a){for(const i of a)i.getNextSibling()instanceof n7&&i.insertAfter(Ju());for(const i of a){const o=i.getChildren();for(const c of o)i.insertBefore(c);i.remove()}})(s),n}function Loe(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=Hs().getChildren();for(let s=0;s<n.length;s++)FU(e,n[s],r,t);return r.innerHTML}function FU(e,t,r,n=null){let s=n===null||t.isSelected(n);const a=Dt(t)&&t.excludeFromCopy("html");let i=t;if(n!==null){let g=m7(t);g=gr(g)&&n!==null?CU(n,g):g,i=g}const o=Dt(i)?i.getChildren():[],c=i7(e,i.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,i):i.exportDOM(e);const{element:d,after:f}=u;if(!d)return!1;const h=document.createDocumentFragment();for(let g=0;g<o.length;g++){const x=o[g],y=FU(e,x,h,n);!s&&Dt(t)&&y&&t.extractWithChild(x,n,"html")&&(s=!0)}if(s&&!a){if((Ps(d)||w8(d))&&d.append(h),r.append(d),f){const g=f.call(i,d);g&&(w8(d)?d.replaceChildren(g):d.replaceWith(g))}}else r.append(h);return s}const DU=new Set(["STYLE","SCRIPT"]);function OU(e,t,r,n,s=new Map,a){let i=[];if(DU.has(e.nodeName))return i;let o=null;const c=(function(x,y){const{nodeName:v}=x,T=y._htmlConversions.get(v.toLowerCase());let k=null;if(T!==void 0)for(const b of T){const C=b(x);C!==null&&(k===null||(k.priority||0)<=(C.priority||0))&&(k=C)}return k!==null?k.conversion:null})(e,t),u=c?c(e):null;let d=null;if(u!==null){d=u.after;const x=u.node;if(o=Array.isArray(x)?x[x.length-1]:x,o!==null){for(const[,y]of s)if(o=y(o,a),!o)break;o&&i.push(...Array.isArray(x)?x:[o])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const f=e.childNodes;let h=[];const g=(o==null||!$o(o))&&(o!=null&&g8(o)||n);for(let x=0;x<f.length;x++)h.push(...OU(f[x],t,r,g,new Map(s),o));return d!=null&&(h=d(h)),T4(e)&&(h=Boe(e,h,g?()=>{const x=new n7;return r.push(x),x}:js)),o==null?h.length>0?i=i.concat(h):T4(e)&&(function(x){return x.nextSibling==null||x.previousSibling==null?!1:b8(x.nextSibling)&&b8(x.previousSibling)})(e)&&(i=i.concat(Ju())):Dt(o)&&o.append(...h),i}function Boe(e,t,r){const n=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const o=t[i];if(g8(o))n&&!o.getFormat()&&o.setFormat(n),s.push(o);else if(a.push(o),i===t.length-1||i<t.length-1&&g8(t[i+1])){const c=r();c.setFormat(n),c.append(...a),s.push(c),a=[]}}return s}function C4(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function $oe(e,t=mr()){return t==null&&C4(166),Ht(t)&&t.isCollapsed()||t.getNodes().length===0?"":Loe(e,t)}function zoe(e,t=mr()){return t==null&&C4(166),Ht(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(Uoe(e,t))}function PM(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return MM(r,Woe(o.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const o=new DOMParser().parseFromString((function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c})(s),"text/html");return MM(r,Ioe(r,o),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(Ht(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let c=0;c<o.length;c++){const u=mr();if(Ht(u)){const d=o[c];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([f1()]):u.insertText(d)}}}else t.insertRawText(i)}function MM(e,t,r){e.dispatchCommand(hie,{nodes:t,selection:r})||(r.insertNodes(t),(function(n){if(Ht(n)&&n.isCollapsed()){const s=n.anchor;let a=null;const i=l0(s,"previous");if(i)if(Ff(i))a=i.origin;else{const o=zf(i,bc(Hs(),"next").getFlipped());for(const c of o){if(gr(c.origin)){a=c.origin;break}if(Dt(c.origin)&&!c.origin.isInline())break}}if(a&&gr(a)){const o=a.getFormat(),c=a.getStyle();n.format===o&&n.style===c||(n.format=o,n.style=c,n.dirty=!0)}}})(r))}function RU(e,t,r,n=[]){let s=t===null||r.isSelected(t);const a=Dt(r)&&r.excludeFromCopy("html");let i=r;if(t!==null){let u=m7(r);u=gr(u)&&t!==null?CU(t,u):u,i=u}const o=Dt(i)?i.getChildren():[],c=(function(u){const d=u.exportJSON(),f=u.constructor;if(d.type!==f.getType()&&C4(58,f.name),Dt(u)){const h=d.children;Array.isArray(h)||C4(59,f.name)}return d})(i);if(gr(i)){const u=i.__text;u.length>0?c.text=u:s=!1}for(let u=0;u<o.length;u++){const d=o[u],f=RU(e,t,d,c.children);!s&&Dt(r)&&f&&r.extractWithChild(d,t,"clone")&&(s=!0)}if(s&&!a)n.push(c);else if(Array.isArray(c.children))for(let u=0;u<c.children.length;u++){const d=c.children[u];n.push(d)}return s}function Uoe(e,t){const r=[],n=Hs().getChildren();for(let s=0;s<n.length;s++)RU(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function Woe(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=Lie(n);gr(s)&&Coe(s),t.push(s)}return t}let Zg=null;async function FM(e,t,r){if(Zg!==null)return!1;if(t!==null)return new Promise(((u,d)=>{e.update((()=>{u(DM(e,t,r))}))}));const n=e.getRootElement(),s=e._window||window,a=window.document,i=lu(s);if(n===null||i===null)return!1;const o=a.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(a.createTextNode("#")),n.append(o);const c=new Range;return c.setStart(o,0),c.setEnd(o,1),i.removeAllRanges(),i.addRange(c),new Promise(((u,d)=>{const f=e.registerCommand($_,(h=>(tm(h,ClipboardEvent)&&(f(),Zg!==null&&(window.clearTimeout(Zg),Zg=null),u(DM(e,h,r))),!0)),Hie);Zg=window.setTimeout((()=>{f(),Zg=null,u(!1)}),50),a.execCommand("copy"),o.remove()}))}function DM(e,t,r){if(r===void 0){const s=lu(e._window);if(!s)return!1;const a=s.anchorNode,i=s.focusNode;if(a!==null&&i!==null&&!c2(e,a,i))return!1;const o=mr();if(o===null)return!1;r=Goe(o)}t.preventDefault();const n=t.clipboardData;return n!==null&&(Voe(n,r),!0)}const Hoe=[["text/html",$oe],["application/x-lexical-editor",zoe]];function Goe(e=mr()){const t={"text/plain":e?e.getTextContent():""};if(e){const r=d2();for(const[n,s]of Hoe){const a=s(r,e);a!==null&&(t[n]=a)}}return t}function Voe(e,t){for(const r in t){const n=t[r];n!==void 0&&e.setData(r,n)}}function OM(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const p1=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,qoe=p1&&"documentMode"in document?document.documentMode:null,Koe=!(!p1||!("InputEvent"in window)||qoe)&&"getTargetRanges"in new window.InputEvent("input"),Yoe=p1&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),RM=p1&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Xoe=p1&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Joe=p1&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Xoe,IM=Zr("DRAG_DROP_PASTE_FILE");let f2=class IU extends yo{static getType(){return"quote"}static clone(t){return new IU(t.__key)}createDOM(t){const r=document.createElement("blockquote");return ei(r,t.theme.quote),r}updateDOM(t,r){return!1}static importDOM(){return{blockquote:t=>({conversion:Qoe,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ps(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return h2().updateFromJSON(t)}insertNewAfter(t,r){const n=js(),s=this.getDirection();return n.setDirection(s),this.insertAfter(n,r),n}collapseAtStart(){const t=js();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function h2(){return Ho(new f2)}function LM(e){return e instanceof f2}let m2=class LU extends yo{static getType(){return"heading"}static clone(t){return new LU(t.__tag,t.__key)}constructor(t,r){super(r),this.__tag=t}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,n=document.createElement(r),s=t.theme.heading;if(s!==void 0){const a=s[r];ei(n,a)}return n}updateDOM(t,r,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:ep,priority:0}),h2:t=>({conversion:ep,priority:0}),h3:t=>({conversion:ep,priority:0}),h4:t=>({conversion:ep,priority:0}),h5:t=>({conversion:ep,priority:0}),h6:t=>({conversion:ep,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&BM(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>BM(t)?{conversion:r=>({node:Cf("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ps(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return Cf(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const n=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&n===s.getTextContentSize()||!t?js():Cf(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,r),n===0&&!this.isEmpty()&&t){const o=js();o.select(),this.replace(o,!0)}return a}collapseAtStart(){const t=this.isEmpty()?js():Cf(this.getTag());return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}extractWithChild(){return!0}};function BM(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function ep(e){const t=e.nodeName.toLowerCase();let r=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(r=Cf(t),e.style!==null&&(g7(e,r),r.setFormat(e.style.textAlign))),{node:r}}function Qoe(e){const t=h2();return e.style!==null&&(t.setFormat(e.style.textAlign),g7(e,t)),{node:t}}function Cf(e="h1"){return Ho(new m2(e))}function Zoe(e){return e instanceof m2}function eb(e){let t=null;if(tm(e,DragEvent)?t=e.dataTransfer:tm(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function $M(e){const t=mr();if(!Ht(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const a=n[s],i=a.getKey();if(r.has(i))continue;const o=X_(a,(u=>Dt(u)&&!u.isInline()));if(o===null)continue;const c=o.getKey();o.canIndent()&&!r.has(c)&&(r.add(c),e(o))}return r.size>0}function zM(e){const t=$f(e);return zn(t)}function x5(e){for(const t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function ele(e){return qm(e.registerCommand(VC,(t=>{const r=mr();return!!io(r)&&(r.clear(),!0)}),Dn),e.registerCommand(cm,(t=>{const r=mr();return Ht(r)?(r.deleteCharacter(t),!0):!!io(r)&&(r.deleteNodes(),!0)}),Dn),e.registerCommand(_v,(t=>{const r=mr();return!!Ht(r)&&(r.deleteWord(t),!0)}),Dn),e.registerCommand(Sv,(t=>{const r=mr();return!!Ht(r)&&(r.deleteLine(t),!0)}),Dn),e.registerCommand(Cp,(t=>{const r=mr();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)PM(n,r,e);else if(Ht(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0}),Dn),e.registerCommand(o8,(()=>{const t=mr();return!!Ht(t)&&(t.removeText(),!0)}),Dn),e.registerCommand(go,(t=>{const r=mr();return!!Ht(r)&&(r.formatText(t),!0)}),Dn),e.registerCommand(Dz,(t=>{const r=mr();if(!Ht(r)&&!io(r))return!1;const n=r.getNodes();for(const s of n){const a=X_(s,(i=>Dt(i)&&!i.isInline()));a!==null&&a.setFormat(t)}return!0}),Dn),e.registerCommand(Tp,(t=>{const r=mr();return!!Ht(r)&&(r.insertLineBreak(t),!0)}),Dn),e.registerCommand(bv,(()=>{const t=mr();return!!Ht(t)&&(t.insertParagraph(),!0)}),Dn),e.registerCommand(xie,(()=>(Oie([f1()]),!0)),Dn),e.registerCommand(yie,(()=>$M((t=>{const r=t.getIndent();t.setIndent(r+1)}))),Dn),e.registerCommand(HP,(()=>$M((t=>{const r=t.getIndent();r>0&&t.setIndent(Math.max(0,r-1))}))),Dn),e.registerCommand(Cz,(t=>{const r=mr();if(io(r)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(Ht(r)){const n=x8(r.focus,!0);if(!t.shiftKey&&zn(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),Dn),e.registerCommand(Nz,(t=>{const r=mr();if(io(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(Ht(r)){if((function(s){const a=s.focus;return a.key==="root"&&a.offset===Hs().getChildrenSize()})(r))return t.preventDefault(),!0;const n=x8(r.focus,!1);if(!t.shiftKey&&zn(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),Dn),e.registerCommand(Tz,(t=>{const r=mr();if(io(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),EM(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!Ht(r))return!1;if(AM(r,!0)){const n=t.shiftKey;return t.preventDefault(),jM(r,n,!0),!0}return!1}),Dn),e.registerCommand(kz,(t=>{const r=mr();if(io(r)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),EM(s[0])?s[0].selectPrevious():s[0].selectNext(0,0),!0}if(!Ht(r))return!1;const n=t.shiftKey;return!!AM(r,!1)&&(t.preventDefault(),jM(r,n,!1),!0)}),Dn),e.registerCommand(Az,(t=>{if(zM(t.target))return!1;const r=mr();if(Ht(r)){if((function(n){if(!n.isCollapsed())return!1;const{anchor:s}=n;if(s.offset!==0)return!1;const a=s.getNode();if(ri(a))return!1;const i=Foe(a);return i.getIndent()>0&&(i.is(a)||a.is(i.getFirstDescendant()))})(r))return t.preventDefault(),e.dispatchCommand(HP,void 0);if(RM&&navigator.language==="ko-KR")return!1}else if(!io(r))return!1;return t.preventDefault(),e.dispatchCommand(cm,!0)}),Dn),e.registerCommand(Pz,(t=>{if(zM(t.target))return!1;const r=mr();return!(!Ht(r)&&!io(r))&&(t.preventDefault(),e.dispatchCommand(cm,!1))}),Dn),e.registerCommand(y4,(t=>{const r=mr();if(!Ht(r))return!1;if(x5(r),t!==null){if((RM||Yoe||Joe)&&Koe)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(Tp,!1)}return e.dispatchCommand(bv,void 0)}),Dn),e.registerCommand(jz,(()=>{const t=mr();return!!Ht(t)&&(e.blur(),!0)}),Dn),e.registerCommand(Fz,(t=>{const[,r]=eb(t);if(r.length>0){const s=OM(t.clientX,t.clientY);if(s!==null){const{offset:a,node:i}=s,o=$f(i);if(o!==null){const c=W_();if(gr(o))c.anchor.set(o.getKey(),a,"text"),c.focus.set(o.getKey(),a,"text");else{const d=o.getParentOrThrow().getKey(),f=o.getIndexWithinParent()+1;c.anchor.set(d,f,"element"),c.focus.set(d,f,"element")}const u=h4(c);Xi(u)}e.dispatchCommand(IM,r)}return t.preventDefault(),!0}const n=mr();return!!Ht(n)}),Dn),e.registerCommand(Oz,(t=>{const[r]=eb(t),n=mr();return!(r&&!Ht(n))}),Dn),e.registerCommand(Rz,(t=>{const[r]=eb(t),n=mr();if(r&&!Ht(n))return!1;const s=OM(t.clientX,t.clientY);if(s!==null){const a=$f(s.node);zn(a)&&t.preventDefault()}return!0}),Dn),e.registerCommand(l8,(()=>(Jie(),!0)),Dn),e.registerCommand($_,(t=>(FM(e,tm(t,ClipboardEvent)?t:null),!0)),Dn),e.registerCommand(XC,(t=>((async function(r,n){await FM(n,tm(r,ClipboardEvent)?r:null),n.update((()=>{const s=mr();Ht(s)?s.removeText():io(s)&&s.getNodes().forEach((a=>a.remove()))}))})(t,e),!0)),Dn),e.registerCommand(qC,(t=>{const[,r,n]=eb(t);return r.length>0&&!n?(e.dispatchCommand(IM,r),!0):m1(t.target)&&o7(t.target)?!1:mr()!==null&&((function(s,a){s.preventDefault(),a.update((()=>{const i=mr(),o=tm(s,InputEvent)||tm(s,KeyboardEvent)?null:s.clipboardData;o!=null&&i!==null&&PM(o,i,a)}),{tag:$ie})})(t,e),!0)}),Dn),e.registerCommand(Ez,(t=>{const r=mr();return Ht(r)&&x5(r),!1}),Dn),e.registerCommand(Mz,(t=>{const r=mr();return Ht(r)&&x5(r),!1}),Dn))}const S8=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function UM(e){return e.getEditorState().read(_U(e.isComposing()))}function BU({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){const[n]=td(),s=(function(a,i){const[o,c]=_.useState((()=>a.getDecorators()));return S8((()=>a.registerDecoratorListener((u=>{Tk.flushSync((()=>{c(u)}))}))),[a]),_.useEffect((()=>{c(a.getDecorators())}),[a]),_.useMemo((()=>{const u=[],d=Object.keys(o);for(let f=0;f<d.length;f++){const h=d[f],g=l.jsx(i,{onError:y=>a._onError(y),children:l.jsx(_.Suspense,{fallback:null,children:o[h]})}),x=a.getElementByKey(h);x!==null&&u.push(Tk.createPortal(g,x,h))}return u}),[i,o,a])})(n,r);return(function(a){S8((()=>qm(ele(a),Roe(a))),[a])})(n),l.jsxs(l.Fragment,{children:[e,l.jsx(tle,{content:t}),s]})}function tle({content:e}){const[t]=td(),r=(function(s){const[a,i]=_.useState((()=>UM(s)));return S8((()=>{function o(){const c=UM(s);i(c)}return o(),qm(s.registerUpdateListener((()=>{o()})),s.registerEditableListener((()=>{o()})))}),[s]),a})(t),n=_oe();return r?typeof e=="function"?e(n):e:null}const $U=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function rle({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:o,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:f,ariaRequired:h,autoCapitalize:g,className:x,id:y,role:v="textbox",spellCheck:T=!0,style:k,tabIndex:b,"data-testid":C,...E},j){const[P,A]=_.useState(e.isEditable()),M=_.useCallback((B=>{B&&B.ownerDocument&&B.ownerDocument.defaultView?e.setRootElement(B):e.setRootElement(null)}),[e]),F=_.useMemo((()=>(function(...B){return V=>{B.forEach((ee=>{typeof ee=="function"?ee(V):ee!=null&&(ee.current=V)}))}})(j,M)),[M,j]);return $U((()=>(A(e.isEditable()),e.registerEditableListener((B=>{A(B)})))),[e]),l.jsx("div",{"aria-activedescendant":P?t:void 0,"aria-autocomplete":P?r:"none","aria-controls":P?n:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":P&&v==="combobox"?!!i:void 0,...o!=null?{"aria-invalid":o}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":P?f:void 0,"aria-readonly":!P||void 0,"aria-required":h,autoCapitalize:g,className:x,contentEditable:P,"data-testid":C,id:y,ref:F,role:v,spellCheck:T,style:k,tabIndex:b,...E})}const nle=_.forwardRef(rle);function WM(e){return e.getEditorState().read(_U(e.isComposing()))}const zU=_.forwardRef(sle);function sle(e,t){const{placeholder:r,...n}=e,[s]=td();return l.jsxs(l.Fragment,{children:[l.jsx(nle,{editor:s,...n,ref:t}),r!=null&&l.jsx(ale,{editor:s,content:r})]})}function ale({content:e,editor:t}){const r=(function(i){const[o,c]=_.useState((()=>WM(i)));return $U((()=>{function u(){const d=WM(i);c(d)}return u(),qm(i.registerUpdateListener((()=>{u()})),i.registerEditableListener((()=>{u()})))}),[i]),o})(t),[n,s]=_.useState(t.isEditable());if(_.useLayoutEffect((()=>(s(t.isEditable()),t.registerEditableListener((i=>{s(i)})))),[t]),!r)return null;let a=null;return typeof e=="function"?a=e(n):e!==null&&(a=e),a===null?null:l.jsx("div",{"aria-hidden":!0,children:a})}const tb=0,k8=1,T8=2,Jc=0,ile=1,HM=2,ole=3,lle=4;function cle(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return Jc;const a=t._selection,i=e._selection;if(s)return ile;if(!(Ht(a)&&Ht(i)&&i.isCollapsed()&&a.isCollapsed()))return Jc;const o=(function(T,k,b){const C=T._nodeMap,E=[];for(const j of k){const P=C.get(j);P!==void 0&&E.push(P)}for(const[j,P]of b){if(!P)continue;const A=C.get(j);A===void 0||ri(A)||E.push(A)}return E})(t,r,n);if(o.length===0)return Jc;if(o.length>1){const T=t._nodeMap,k=T.get(a.anchor.key),b=T.get(i.anchor.key);return k&&b&&!e._nodeMap.has(k.__key)&&gr(k)&&k.__text.length===1&&a.anchor.offset===1?HM:Jc}const c=o[0],u=e._nodeMap.get(c.__key);if(!gr(u)||!gr(c)||u.__mode!==c.__mode)return Jc;const d=u.__text,f=c.__text;if(d===f)return Jc;const h=a.anchor,g=i.anchor;if(h.key!==g.key||h.type!=="text")return Jc;const x=h.offset,y=g.offset,v=f.length-d.length;return v===1&&y===x-1?HM:v===-1&&y===x+1?ole:v===-1&&y===x?lle:Jc}function ule(e,t){let r=Date.now(),n=Jc;return(s,a,i,o,c,u)=>{const d=Date.now();if(u.has(_4))return n=Jc,r=d,T8;const f=cle(s,a,o,c,e.isComposing()),h=(()=>{const g=i===null||i.editor===e,x=u.has(Bie);if(!x&&g&&u.has(Xy))return tb;if(s===null)return k8;const y=a._selection;return o.size>0||c.size>0?x===!1&&f!==Jc&&f===n&&d<r+t&&g||o.size===1&&(function(v,T,k){const b=T._nodeMap.get(v),C=k._nodeMap.get(v),E=T._selection,j=k._selection;return!(Ht(E)&&Ht(j)&&E.anchor.type==="element"&&E.focus.type==="element"&&j.anchor.type==="text"&&j.focus.type==="text"||!gr(b)||!gr(C)||b.__parent!==C.__parent)&&JSON.stringify(T.read((()=>b.exportJSON())))===JSON.stringify(k.read((()=>C.exportJSON())))})(Array.from(o)[0],s,a)?tb:k8:y!==null?tb:T8})();return r=d,n=f,h}}function GM(e){e.undoStack=[],e.redoStack=[],e.current=null}function dle(e,t,r){const n=ule(e,r);return qm(e.registerCommand(KC,(()=>((function(a,i){const o=i.redoStack,c=i.undoStack;if(c.length!==0){const u=i.current,d=c.pop();u!==null&&(o.push(u),a.dispatchCommand(Vw,!0)),c.length===0&&a.dispatchCommand(qw,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:_4})}})(e,t),!0)),Dn),e.registerCommand(YC,(()=>((function(a,i){const o=i.redoStack,c=i.undoStack;if(o.length!==0){const u=i.current;u!==null&&(c.push(u),a.dispatchCommand(qw,!0));const d=o.pop();o.length===0&&a.dispatchCommand(Vw,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:_4})}})(e,t),!0)),Dn),e.registerCommand(wie,(()=>(GM(t),!1)),Dn),e.registerCommand(bie,(()=>(GM(t),e.dispatchCommand(Vw,!1),e.dispatchCommand(qw,!1),!0)),Dn),e.registerUpdateListener((({editorState:a,prevEditorState:i,dirtyLeaves:o,dirtyElements:c,tags:u})=>{const d=t.current,f=t.redoStack,h=t.undoStack,g=d===null?null:d.editorState;if(d!==null&&a===g)return;const x=n(i,a,d,o,c,u);if(x===k8)f.length!==0&&(t.redoStack=[],e.dispatchCommand(Vw,!1)),d!==null&&(h.push({...d}),e.dispatchCommand(qw,!0));else if(x===T8)return;t.current={editor:e,editorState:a}})))}function fle(){return{current:null,redoStack:[],undoStack:[]}}function UU({delay:e,externalHistoryState:t}){const[r]=td();return(function(n,s,a=1e3){const i=_.useMemo((()=>s||fle()),[s]);_.useEffect((()=>dle(n,i,a)),[a,n,i])})(r,t,e),null}function WU({defaultSelection:e}){const[t]=td();return _.useEffect((()=>{t.focus((()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})}),{defaultSelection:e})}),[e,t]),null}function C8(e,t){return C8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},C8(e,t)}var VM={error:null},hle=(function(e){var t,r;function n(){for(var a,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(a=e.call.apply(e,[this].concat(o))||this).state=VM,a.resetErrorBoundary=function(){for(var u,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];a.props.onReset==null||(u=a.props).onReset.apply(u,f),a.reset()},a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,C8(t,r),n.getDerivedStateFromError=function(a){return{error:a}};var s=n.prototype;return s.reset=function(){this.setState(VM)},s.componentDidCatch=function(a,i){var o,c;(o=(c=this.props).onError)==null||o.call(c,a,i)},s.componentDidUpdate=function(a,i){var o,c,u,d,f=this.state.error,h=this.props.resetKeys;f!==null&&i.error!==null&&((u=a.resetKeys)===void 0&&(u=[]),(d=h)===void 0&&(d=[]),u.length!==d.length||u.some((function(g,x){return!Object.is(g,d[x])})))&&((o=(c=this.props).onResetKeysChange)==null||o.call(c,a.resetKeys,h),this.reset())},s.render=function(){var a=this.state.error,i=this.props,o=i.fallbackRender,c=i.FallbackComponent,u=i.fallback;if(a!==null){var d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(_.isValidElement(u))return u;if(typeof o=="function")return o(d);if(c)return _.createElement(c,d);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n})(_.Component);function HU({children:e,onError:t}){return l.jsx(hle,{fallback:l.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}const k7=/^(\d+(?:\.\d+)?)px$/,jp={BOTH:3,NO_STATUS:0,ROW:1};class x1 extends yo{static getType(){return"tablecell"}static clone(t){return new x1(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:qM,priority:0}),th:t=>({conversion:qM,priority:0})}}static importJSON(t){return GU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=jp.NO_STATUS,r=1,n,s){super(s),this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),N8(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),ei(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(Ps(r.element)){const n=r.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...N8(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=jp.BOTH){const n=this.getWritable();return n.__headerState=t&r|n.__headerState&~r,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==jp.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function N8(e){return e==="middle"||e==="bottom"}function qM(e){const t=e,r=e.nodeName.toLowerCase();let n;k7.test(t.style.width)&&(n=parseFloat(t.style.width));const s=GU(r==="th"?jp.ROW:jp.NO_STATUS,t.colSpan,n);s.__rowSpan=t.rowSpan;const a=t.style.backgroundColor;a!==""&&(s.__backgroundColor=a);const i=t.style.verticalAlign;N8(i)&&(s.__verticalAlign=i);const o=t.style,c=(o&&o.textDecoration||"").split(" "),u=o.fontWeight==="700"||o.fontWeight==="bold",d=c.includes("line-through"),f=o.fontStyle==="italic",h=c.includes("underline");return{after:g=>{const x=[];let y=null;const v=()=>{if(y){const T=y.getFirstChild();Jd(T)&&y.getChildrenSize()===1&&T.remove()}};for(const T of g)eoe(T)||gr(T)||Jd(T)?(gr(T)&&(u&&T.toggleFormat("bold"),d&&T.toggleFormat("strikethrough"),f&&T.toggleFormat("italic"),h&&T.toggleFormat("underline")),y?y.append(T):(y=js().append(T),x.push(y))):(x.push(T),v(),y=null);return v(),x.length===0&&x.push(js()),x},node:s}}function GU(e=jp.NO_STATUS,t=1,r){return Ho(new x1(e,t,r))}function Tv(e){return e instanceof x1}function E8(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class y1 extends yo{static getType(){return"tablerow"}static clone(t){return new y1(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:mle,priority:0})}}static importJSON(t){return VU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,r){super(r),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),ei(r,t.theme.tableRow),r}extractWithChild(t,r,n){return n==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function mle(e){const t=e;let r;return k7.test(t.style.height)&&(r=parseFloat(t.style.height)),{after:n=>MU(n,Tv),node:VU(r)}}function VU(e){return Ho(new y1(e))}function qU(e){return e instanceof y1}const KU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,gle=KU&&"documentMode"in document?document.documentMode:null;KU&&"InputEvent"in window&&!gle&&new window.InputEvent("input");function ple(e,t,r){const n=[];let s=null,a=null;function i(c){let u=n[c];return u===void 0&&(n[c]=u=[]),u}const o=e.getChildren();for(let c=0;c<o.length;c++){const u=o[c];qU(u)||E8(209);const d=i(c);for(let f=u.getFirstChild(),h=0;f!=null;f=f.getNextSibling()){for(Tv(f)||E8(147);d[h]!==void 0;)h++;const g={cell:f,startColumn:h,startRow:c},{__rowSpan:x,__colSpan:y}=f;for(let v=0;v<x&&!(c+v>=o.length);v++){const T=i(c+v);for(let k=0;k<y;k++)T[h+k]=g}}}return[n,s,a]}function wy(e){return Ps(e)&&e.nodeName==="TABLE"}function xle(e,t){for(let r=t,n=null;r!==null;r=r.getParent()){if(e.is(r))return n;Tv(r)&&(n=r)}return null}function yle(e,t,r){return xle(e,$f(t,r))}function KM(e,t,r){if(!t.theme.tableAlignment)return;const n=[],s=[];for(const a of["center","right"]){const i=t.theme.tableAlignment[a];i&&(a===r?s:n).push(i)}Of(e,...n),ei(e,...s)}const vle=new WeakSet;function YM(e=d2()){return vle.has(e)}class g2 extends yo{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new g2(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:wle,priority:1})}}static importJSON(t){return YU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,n){return n==="html"}getDOMSlot(t){const r=wy(t)?t:t.querySelector("table");return wy(r)||E8(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const s=document.createElement("colgroup");if(n.appendChild(s),aoe(s),ei(n,t.theme.table),this.updateTableElement(null,n,t),YM(r)){const a=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?ei(a,i):a.style.cssText="overflow-x: auto;",a.appendChild(n),this.updateTableWrapper(null,a,n,t),a}return n}updateTableWrapper(t,r,n,s){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&(function(a,i,o,c){c>0?(ei(a,o.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(Of(a,o.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))})(r,n,s,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&(function(a,i,o,c){c>0?(ei(a,o.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(Of(a,o.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))})(r,n,s,this.__frozenRowCount)}updateTableElement(t,r,n){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&(function(s,a,i){i?(ei(s,a.theme.tableRowStriping),s.setAttribute("data-lexical-row-striping","true")):(Of(s,a.theme.tableRowStriping),s.removeAttribute("data-lexical-row-striping"))})(r,n,this.__rowStriping),(function(s,a,i,o){const c=s.querySelector("colgroup");if(!c)return;const u=[];for(let d=0;d<i;d++){const f=document.createElement("col"),h=o&&o[d];h&&(f.style.width=`${h}px`),u.push(f)}c.replaceChildren(...u)})(r,0,this.getColumnCount(),this.getColWidths()),KM(r,n,this.getFormatType())}updateDOM(t,r,n){const s=this.getDOMSlot(r).element;return r===s===YM()||(Ps(a=r)&&a.nodeName==="DIV"&&this.updateTableWrapper(t,r,s,n),this.updateTableElement(t,s,n),!1);var a}exportDOM(t){const r=super.exportDOM(t),{element:n}=r;return{after:s=>{if(r.after&&(s=r.after(s)),!wy(s)&&Ps(s)&&(s=s.querySelector("table")),!wy(s))return null;KM(s,t._config,this.getFormatType());const[a]=ple(this),i=new Map;for(const d of a)for(const f of d){const h=f.cell.getKey();i.has(h)||i.set(h,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const o=new Set;for(const d of s.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=d.getAttribute("data-temporary-table-cell-lexical-key");if(f){const h=i.get(f);if(d.removeAttribute("data-temporary-table-cell-lexical-key"),h){i.delete(f);for(let g=0;g<h.colSpan;g++)o.add(g+h.startColumn)}}}const c=s.querySelector(":scope > colgroup");if(c){const d=Array.from(s.querySelectorAll(":scope > colgroup > col")).filter(((f,h)=>o.has(h)));c.replaceChildren(...d)}const u=s.querySelectorAll(":scope > tr");if(u.length>0){const d=document.createElement("tbody");for(const f of u)d.appendChild(f);s.append(d)}return s},element:!wy(n)&&Ps(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:n,domRows:s}=r;for(let a=0;a<n;a++){const i=s[a];if(i!=null)for(let o=0;o<i.length;o++){const c=i[o];if(c==null)continue;const{elem:u}=c,d=yle(this,u);if(d!==null&&t.is(d))return{x:o,y:a}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,n){const{domRows:s}=n,a=s[r];if(a==null)return null;const i=a[t<a.length?t:a.length-1];return i??null}getDOMCellFromCordsOrThrow(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(!s)throw new Error("Cell not found at cords.");return s}getCellNodeFromCords(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(s==null)return null;const a=$f(s.elem);return Tv(a)?a:null}getCellNodeFromCordsOrThrow(t,r,n){const s=this.getCellNodeFromCords(t,r,n);if(!s)throw new Error("Node at cords not TableCellNode.");return s}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach((n=>{Tv(n)&&(r+=n.getColSpan())})),r}}function wle(e){const t=YU();e.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),e.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),e.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);const r=e.querySelector(":scope > colgroup");if(r){let n=[];for(const s of r.querySelectorAll(":scope > col")){let a=s.style.width||"";if(!k7.test(a)&&(a=s.getAttribute("width")||"",!/^\d+$/.test(a))){n=void 0;break}n.push(parseFloat(a))}n&&t.setColWidths(n)}return{after:n=>MU(n,qU),node:t}}function YU(){return Ho(new g2)}function Nf(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function A8(e){let t=1,r=e.getParent();for(;r!=null;){if(Kn(r)){const n=r.getParent();if(gn(n)){t++,r=n.getParent();continue}Nf(40)}return t}return t}function j8(e){let t=e.getParent();gn(t)||Nf(40);let r=t;for(;r!==null;)r=r.getParent(),gn(r)&&(t=r);return t}function XU(e){let t=[];const r=e.getChildren().filter(Kn);for(let n=0;n<r.length;n++){const s=r[n],a=s.getFirstChild();gn(a)?t=t.concat(XU(a)):t.push(s)}return t}function zu(e){return Kn(e)&&gn(e.getFirstChild())}function XM(e){return Ll().append(e)}function JU(e,t){return Kn(e)&&(t.length===0||t.length===1&&e.is(t[0])&&e.getChildrenSize()===0)}function JM(e){const t=mr();if(t!==null){let r=t.getNodes();if(Ht(t)){const s=t.getStartEndPoints();s===null&&Nf(143);const[a]=s,i=a.getNode(),o=i.getParent();if($o(i)){const c=i.getFirstChild();if(c)r=c.selectStart().getNodes();else{const u=js();i.append(u),r=u.select().getNodes()}}else if(JU(i,r)){const c=ul(e);if($o(o)){i.replace(c);const u=Ll();Dt(i)&&(u.setFormat(i.getFormatType()),u.setIndent(i.getIndent())),c.append(u)}else if(Kn(i)){const u=i.getParentOrThrow();Fm(c,u.getChildren()),u.replace(c)}return}}const n=new Set;for(let s=0;s<r.length;s++){const a=r[s];if(Dt(a)&&a.isEmpty()&&!Kn(a)&&!n.has(a.getKey())){QM(a,e);continue}let i=iU(a)?a.getParent():Kn(a)&&a.isEmpty()?a:null;for(;i!=null;){const o=i.getKey();if(gn(i)){if(!n.has(o)){const c=ul(e);Fm(c,i.getChildren()),i.replace(c),n.add(o)}break}{const c=i.getParent();if($o(c)&&!n.has(o)){n.add(o),QM(i,e);break}i=c}}}}}function Fm(e,t){e.splice(e.getChildrenSize(),0,t)}function QM(e,t){if(gn(e))return e;const r=e.getPreviousSibling(),n=e.getNextSibling(),s=Ll();let a;if(Fm(s,e.getChildren()),gn(r)&&t===r.getListType())r.append(s),gn(n)&&t===n.getListType()&&(Fm(r,n.getChildren()),n.remove()),a=r;else if(gn(n)&&t===n.getListType())n.getFirstChildOrThrow().insertBefore(s),a=n;else{const i=ul(t);i.append(s),e.replace(i),a=i}return s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),e.remove(),a}function T7(e,t){const r=e.getLastChild(),n=t.getFirstChild();r&&n&&zu(r)&&zu(n)&&(T7(r.getFirstChild(),n.getFirstChild()),n.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function ble(){const e=mr();if(Ht(e)){const t=new Set,r=e.getNodes(),n=e.anchor.getNode();if(JU(n,r))t.add(j8(n));else for(let s=0;s<r.length;s++){const a=r[s];if(iU(a)){const i=Moe(a,w0);i!=null&&t.add(j8(i))}}for(const s of t){let a=s;const i=XU(s);for(const o of i){const c=js().setTextStyle(e.style).setTextFormat(e.format);Fm(c,o.getChildren()),a.insertAfter(c),a=c,o.__key===e.anchor.key&&Mm(e.anchor,mc(bc(c,"next"))),o.__key===e.focus.key&&Mm(e.focus,mc(bc(c,"next"))),o.remove()}s.remove()}}}function QU(e){const t=e.getListType()!=="check";let r=e.getStart();for(const n of e.getChildren())Kn(n)&&(n.getValue()!==r&&n.setValue(r),t&&n.getLatest().__checked!=null&&n.setChecked(void 0),gn(n.getFirstChild())||r++)}function _le(e){const t=new Set;if(zu(e)||t.has(e.getKey()))return;const r=e.getParent(),n=e.getNextSibling(),s=e.getPreviousSibling();if(zu(n)&&zu(s)){const a=s.getFirstChild();if(gn(a)){a.append(e);const i=n.getFirstChild();gn(i)&&(Fm(a,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if(zu(n)){const a=n.getFirstChild();if(gn(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(zu(s)){const a=s.getFirstChild();gn(a)&&a.append(e)}else if(gn(r)){const a=Ll().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=ul(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):n?n.insertBefore(a):r.append(a)}}function Sle(e){if(zu(e))return;const t=e.getParent(),r=t?t.getParent():void 0;if(gn(r?r.getParent():void 0)&&Kn(r)&&gn(t)){const n=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{const a=t.getListType(),i=Ll(),o=ul(a);i.append(o),e.getPreviousSiblings().forEach((d=>o.append(d)));const c=Ll(),u=ul(a);c.append(u),Fm(u,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(c),r.replace(e)}}}function kle(){const e=mr();if(!Ht(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!Kn(t)||t.getChildrenSize()!==0)return!1;const r=j8(t),n=t.getParent();gn(n)||Nf(40);const s=n.getParent();let a;if($o(s))a=js(),r.insertAfter(a);else{if(!Kn(s))return!1;a=Ll(),s.insertAfter(a)}a.setTextStyle(e.style).setTextFormat(e.format).select();const i=t.getNextSiblings();if(i.length>0){const o=ul(n.getListType());if(Kn(a)){const c=Ll();c.append(o),a.insertAfter(c)}else a.insertAfter(o);o.append(...i)}return(function(o){let c=o;for(;c.getNextSibling()==null&&c.getPreviousSibling()==null;){const u=c.getParent();if(u==null||!Kn(u)&&!gn(u))break;c=u}c.remove()})(t),!0}function N4(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}let w0=class extends yo{$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const r=t.getParent();gn(r)&&r.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:yo,importDOM:{li:()=>({conversion:Tle,priority:0})}})}constructor(t=1,r=void 0,n){super(n),this.__value=t===void 0?1:t,this.__checked=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const r=document.createElement("li");return this.updateListItemDOM(null,r,t),r}updateListItemDOM(t,r,n){const s=this.getParent();gn(s)&&s.getListType()==="check"&&(function(o,c,u,d){gn(c.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),u&&c.__checked===u.__checked||o.setAttribute("aria-checked",c.getChecked()?"true":"false"))})(r,this,t),r.value=this.__value,(function(o,c,u){const d=[],f=[],h=c.list,g=h?h.listitem:void 0;let x;if(h&&h.nested&&(x=h.nested.listitem),g!==void 0&&d.push(...N4(g)),h){const y=u.getParent(),v=gn(y)&&y.getListType()==="check",T=u.getChecked();v&&!T||f.push(h.listitemUnchecked),v&&T||f.push(h.listitemChecked),v&&d.push(T?h.listitemChecked:h.listitemUnchecked)}if(x!==void 0){const y=N4(x);u.getChildren().some((v=>gn(v)))?d.push(...y):f.push(...y)}f.length>0&&Of(o,...f),d.length>0&&ei(o,...d)})(r,n.theme,this);const a=t?t.__style:"",i=this.__style;a!==i&&(i===""?r.removeAttribute("style"):r.style.cssText=i),(function(o,c,u){const d=NM(c.__textStyle);for(const f in d)o.style.setProperty(`--listitem-marker-${f}`,d[f]);if(u)for(const f in NM(u.__textStyle))f in d||o.style.removeProperty(`--listitem-marker-${f}`)})(r,this,t)}updateDOM(t,r,n){const s=r;return this.updateListItemDOM(t,s,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const r=this.createDOM(t._config),n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();return s&&(r.dir=s),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let r=0;r<t.length;r++){const n=t[r];if(Dt(n)&&this.canMergeWith(n)){const s=n.getChildren();this.append(...s),n.remove()}else super.append(n)}return this}replace(t,r){if(Kn(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!gn(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const s=ul(n.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}n.insertAfter(t),t.insertAfter(s)}return r&&(Dt(t)||Nf(139),this.getChildren().forEach((s=>{t.append(s)}))),this.remove(),n.getChildrenSize()===0&&n.remove(),t}insertAfter(t,r=!0){const n=this.getParentOrThrow();if(gn(n)||Nf(39),Kn(t))return super.insertAfter(t,r);const s=this.getNextSiblings();if(n.insertAfter(t,r),s.length!==0){const a=ul(n.getListType());s.forEach((i=>a.append(i))),t.insertAfter(a,r)}return t}remove(t){const r=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),r&&n&&zu(r)&&zu(n)&&(T7(r.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,r=!0){const n=Ll().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,r),n}collapseAtStart(t){const r=js();this.getChildren().forEach((i=>r.append(i)));const n=this.getParentOrThrow(),s=n.getParentOrThrow(),a=Kn(s);if(n.getChildrenSize()===1)if(a)n.remove(),s.select();else{n.insertBefore(r),n.remove();const i=t.anchor,o=t.focus,c=r.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(c,i.offset,"element"),o.type==="element"&&o.getNode().is(this)&&o.set(c,o.offset,"element")}else n.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const r=this.getWritable();return r.__value=t,r}getChecked(){const t=this.getLatest();let r;const n=this.getParent();return gn(n)&&(r=n.getListType()),r==="check"?!!t.__checked:void 0}setChecked(t){const r=this.getWritable();return r.__checked=t,r}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let r=t.getParentOrThrow(),n=0;for(;Kn(r);)r=r.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){typeof t!="number"&&Nf(117),(t=Math.floor(t))>=0||Nf(199);let r=this.getIndent();for(;r!==t;)r<t?(_le(this),r++):(Sle(this),r--);return this}canInsertAfter(t){return Kn(t)}canReplaceWith(t){return Kn(t)}canMergeWith(t){return Kn(t)||s7(t)}extractWithChild(t,r){if(!Ht(r))return!1;const n=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(n)&&this.isParentOf(s)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return ul("bullet")}canMergeWhenEmpty(){return!0}};function Tle(e){if(e.classList.contains("task-list-item")){for(const r of e.children)if(r.tagName==="INPUT")return Cle(r)}const t=e.getAttribute("aria-checked");return{node:Ll(t==="true"||t!=="false"&&void 0)}}function Cle(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:Ll(e.hasAttribute("checked"))}}function Ll(e){return Ho(new w0(void 0,e))}function Kn(e){return e instanceof w0}let th=class extends yo{$config(){return this.config("list",{$transform:t=>{(function(r){const n=r.getNextSibling();gn(n)&&r.getListType()===n.getListType()&&T7(r,n)})(t),QU(t)},extends:yo,importDOM:{ol:()=>({conversion:eF,priority:0}),ul:()=>({conversion:eF,priority:0})}})}constructor(t="number",r=1,n){super(n);const s=Ele[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const r=this.getWritable();return r.__listType=t,r.__tag=t==="number"?"ol":"ul",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const r=this.getWritable();return r.__start=t,r}createDOM(t,r){const n=this.__tag,s=document.createElement(n);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,ZM(s,t.theme,this),s}updateDOM(t,r,n){return t.__tag!==this.__tag||(ZM(r,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const r=this.createDOM(t._config,t);return Ps(r)&&(this.__start!==1&&r.setAttribute("start",String(this.__start)),this.__listType==="check"&&r.setAttribute("__lexicalListType","check")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,r,n){let s=n;for(let a=0;a<n.length;a++){const i=n[a];Kn(i)||(s===n&&(s=[...n]),s[a]=Ll().append(!Dt(i)||gn(i)||i.isInline()?i:fa(i.getTextContent())))}return super.splice(t,r,s)}extractWithChild(t){return Kn(t)}};function ZM(e,t,r){const n=[],s=[],a=t.list;if(a!==void 0){const i=a[`${r.__tag}Depth`]||[],o=A8(r)-1,c=o%i.length,u=i[c],d=a[r.__tag];let f;const h=a.nested,g=a.checklist;if(h!==void 0&&h.list&&(f=h.list),d!==void 0&&n.push(d),g!==void 0&&r.__listType==="check"&&n.push(g),u!==void 0){n.push(...N4(u));for(let x=0;x<i.length;x++)x!==c&&s.push(r.__tag+x)}if(f!==void 0){const x=N4(f);o>1?n.push(...x):s.push(...x)}}s.length>0&&Of(e,...s),n.length>0&&ei(e,...n)}function Nle(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(Kn(n)){t.push(n);const s=n.getChildren();s.length>1&&s.forEach((a=>{gn(a)&&t.push(XM(a))}))}else t.push(XM(n))}return t}function eF(e){const t=e.nodeName.toLowerCase();let r=null;return t==="ol"?r=ul("number",e.start):t==="ul"&&(r=(function(n){if(n.getAttribute("__lexicallisttype")==="check"||n.classList.contains("contains-task-list"))return!0;for(const s of n.childNodes)if(Ps(s)&&s.hasAttribute("aria-checked"))return!0;return!1})(e)?ul("check"):ul("bullet")),{after:Nle,node:r}}const Ele={ol:"number",ul:"bullet"};function ul(e="number",t=1){return Ho(new th(e,t))}function gn(e){return e instanceof th}const Ale=Zr("UPDATE_LIST_START_COMMAND"),C7=Zr("INSERT_UNORDERED_LIST_COMMAND"),N7=Zr("INSERT_ORDERED_LIST_COMMAND"),E7=Zr("REMOVE_LIST_COMMAND");function jle(e){return qm(e.registerCommand(N7,(()=>(JM("number"),!0)),up),e.registerCommand(Ale,(t=>{const{listNodeKey:r,newStart:n}=t,s=za(r);return!!gn(s)&&(s.getListType()==="number"&&(s.setStart(n),QU(s)),!0)}),up),e.registerCommand(C7,(()=>(JM("bullet"),!0)),up),e.registerCommand(E7,(()=>(ble(),!0)),up),e.registerCommand(bv,(()=>kle()),up),e.registerNodeTransform(w0,(t=>{const r=t.getFirstChild();if(r){if(gr(r)){const n=r.getStyle(),s=r.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==s&&t.setTextFormat(s)}}else{const n=mr();Ht(n)&&(n.style!==t.getTextStyle()||n.format!==t.getTextFormat())&&n.isCollapsed()&&t.is(n.anchor.getNode())&&t.setTextStyle(n.style).setTextFormat(n.format)}})),e.registerNodeTransform(Zf,(t=>{const r=t.getParent();if(Kn(r)&&t.is(r.getFirstChild())){const n=t.getStyle(),s=t.getFormat();n===r.getTextStyle()&&s===r.getTextFormat()||r.setTextStyle(n).setTextFormat(s)}})))}function Ple(e){const t=r=>{const n=r.getParent();if(gn(r.getFirstChild())||!gn(n))return;const s=X_(r,(a=>Kn(a)&&gn(a.getParent())&&Kn(a.getPreviousSibling())));if(s===null&&r.getIndent()>0)r.setIndent(0);else if(Kn(s)){const a=s.getPreviousSibling();if(Kn(a)){const i=(function(c){let u=c,d=u.getFirstChild();for(;gn(d);){const f=d.getLastChild();if(!Kn(f))break;u=f,d=u.getFirstChild()}return u})(a),o=i.getParent();if(gn(o)){const c=A8(o);c+1<A8(n)&&r.setIndent(c)}}}};return e.registerNodeTransform(th,(r=>{const n=[r];for(;n.length>0;){const s=n.shift();if(gn(s)){for(const a of s.getChildren())if(Kn(a)){t(a);const i=a.getFirstChild();gn(i)&&n.push(i)}}}}))}var y5={exports:{}},tF;function Mle(){return tF||(tF=1,(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function k(b){return b instanceof c?new c(b.type,k(b.content),b.alias):Array.isArray(b)?b.map(k):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(k){return Object.prototype.toString.call(k).slice(8,-1)},objId:function(k){return k.__id||Object.defineProperty(k,"__id",{value:++a}),k.__id},clone:function k(b,C){C=C||{};var E,j;switch(o.util.type(b)){case"Object":if(j=o.util.objId(b),C[j])return C[j];E={},C[j]=E;for(var P in b)b.hasOwnProperty(P)&&(E[P]=k(b[P],C));return E;case"Array":return j=o.util.objId(b),C[j]?C[j]:(E=[],C[j]=E,b.forEach(function(A,M){E[M]=k(A,C)}),E);default:return b}},getLanguage:function(k){for(;k;){var b=s.exec(k.className);if(b)return b[1].toLowerCase();k=k.parentElement}return"none"},setLanguage:function(k,b){k.className=k.className.replace(RegExp(s,"gi"),""),k.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(E){var k=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(E.stack)||[])[1];if(k){var b=document.getElementsByTagName("script");for(var C in b)if(b[C].src==k)return b[C]}return null}},isActive:function(k,b,C){for(var E="no-"+b;k;){var j=k.classList;if(j.contains(b))return!0;if(j.contains(E))return!1;k=k.parentElement}return!!C}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(k,b){var C=o.util.clone(o.languages[k]);for(var E in b)C[E]=b[E];return C},insertBefore:function(k,b,C,E){E=E||o.languages;var j=E[k],P={};for(var A in j)if(j.hasOwnProperty(A)){if(A==b)for(var M in C)C.hasOwnProperty(M)&&(P[M]=C[M]);C.hasOwnProperty(A)||(P[A]=j[A])}var F=E[k];return E[k]=P,o.languages.DFS(o.languages,function(B,V){V===F&&B!=k&&(this[B]=P)}),P},DFS:function k(b,C,E,j){j=j||{};var P=o.util.objId;for(var A in b)if(b.hasOwnProperty(A)){C.call(b,A,b[A],E||A);var M=b[A],F=o.util.type(M);F==="Object"&&!j[P(M)]?(j[P(M)]=!0,k(M,C,null,j)):F==="Array"&&!j[P(M)]&&(j[P(M)]=!0,k(M,C,A,j))}}},plugins:{},highlightAll:function(k,b){o.highlightAllUnder(document,k,b)},highlightAllUnder:function(k,b,C){var E={callback:C,container:k,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",E),E.elements=Array.prototype.slice.apply(E.container.querySelectorAll(E.selector)),o.hooks.run("before-all-elements-highlight",E);for(var j=0,P;P=E.elements[j++];)o.highlightElement(P,b===!0,E.callback)},highlightElement:function(k,b,C){var E=o.util.getLanguage(k),j=o.languages[E];o.util.setLanguage(k,E);var P=k.parentElement;P&&P.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(P,E);var A=k.textContent,M={element:k,language:E,grammar:j,code:A};function F(V){M.highlightedCode=V,o.hooks.run("before-insert",M),M.element.innerHTML=M.highlightedCode,o.hooks.run("after-highlight",M),o.hooks.run("complete",M),C&&C.call(M.element)}if(o.hooks.run("before-sanity-check",M),P=M.element.parentElement,P&&P.nodeName.toLowerCase()==="pre"&&!P.hasAttribute("tabindex")&&P.setAttribute("tabindex","0"),!M.code){o.hooks.run("complete",M),C&&C.call(M.element);return}if(o.hooks.run("before-highlight",M),!M.grammar){F(o.util.encode(M.code));return}if(b&&n.Worker){var B=new Worker(o.filename);B.onmessage=function(V){F(V.data)},B.postMessage(JSON.stringify({language:M.language,code:M.code,immediateClose:!0}))}else F(o.highlight(M.code,M.grammar,M.language))},highlight:function(k,b,C){var E={code:k,grammar:b,language:C};if(o.hooks.run("before-tokenize",E),!E.grammar)throw new Error('The language "'+E.language+'" has no grammar.');return E.tokens=o.tokenize(E.code,E.grammar),o.hooks.run("after-tokenize",E),c.stringify(o.util.encode(E.tokens),E.language)},tokenize:function(k,b){var C=b.rest;if(C){for(var E in C)b[E]=C[E];delete b.rest}var j=new f;return h(j,j.head,k),d(k,j,b,j.head,0),x(j)},hooks:{all:{},add:function(k,b){var C=o.hooks.all;C[k]=C[k]||[],C[k].push(b)},run:function(k,b){var C=o.hooks.all[k];if(!(!C||!C.length))for(var E=0,j;j=C[E++];)j(b)}},Token:c};n.Prism=o;function c(k,b,C,E){this.type=k,this.content=b,this.alias=C,this.length=(E||"").length|0}c.stringify=function k(b,C){if(typeof b=="string")return b;if(Array.isArray(b)){var E="";return b.forEach(function(F){E+=k(F,C)}),E}var j={type:b.type,content:k(b.content,C),tag:"span",classes:["token",b.type],attributes:{},language:C},P=b.alias;P&&(Array.isArray(P)?Array.prototype.push.apply(j.classes,P):j.classes.push(P)),o.hooks.run("wrap",j);var A="";for(var M in j.attributes)A+=" "+M+'="'+(j.attributes[M]||"").replace(/"/g,"&quot;")+'"';return"<"+j.tag+' class="'+j.classes.join(" ")+'"'+A+">"+j.content+"</"+j.tag+">"};function u(k,b,C,E){k.lastIndex=b;var j=k.exec(C);if(j&&E&&j[1]){var P=j[1].length;j.index+=P,j[0]=j[0].slice(P)}return j}function d(k,b,C,E,j,P){for(var A in C)if(!(!C.hasOwnProperty(A)||!C[A])){var M=C[A];M=Array.isArray(M)?M:[M];for(var F=0;F<M.length;++F){if(P&&P.cause==A+","+F)return;var B=M[F],V=B.inside,ee=!!B.lookbehind,ae=!!B.greedy,Z=B.alias;if(ae&&!B.pattern.global){var te=B.pattern.toString().match(/[imsuy]*$/)[0];B.pattern=RegExp(B.pattern.source,te+"g")}for(var L=B.pattern||B,K=E.next,I=j;K!==b.tail&&!(P&&I>=P.reach);I+=K.value.length,K=K.next){var H=K.value;if(b.length>k.length)return;if(!(H instanceof c)){var U=1,R;if(ae){if(R=u(L,I,k,ee),!R||R.index>=k.length)break;var ne=R.index,z=R.index+R[0].length,G=I;for(G+=K.value.length;ne>=G;)K=K.next,G+=K.value.length;if(G-=K.value.length,I=G,K.value instanceof c)continue;for(var X=K;X!==b.tail&&(G<z||typeof X.value=="string");X=X.next)U++,G+=X.value.length;U--,H=k.slice(I,G),R.index-=I}else if(R=u(L,0,H,ee),!R)continue;var ne=R.index,q=R[0],se=H.slice(0,ne),ue=H.slice(ne+q.length),me=I+H.length;P&&me>P.reach&&(P.reach=me);var Ne=K.prev;se&&(Ne=h(b,Ne,se),I+=se.length),g(b,Ne,U);var ce=new c(A,V?o.tokenize(q,V):q,Z,q);if(K=h(b,Ne,ce),ue&&h(b,K,ue),U>1){var Ue={cause:A+","+F,reach:me};d(k,b,C,K.prev,I,Ue),P&&Ue.reach>P.reach&&(P.reach=Ue.reach)}}}}}}function f(){var k={value:null,prev:null,next:null},b={value:null,prev:k,next:null};k.next=b,this.head=k,this.tail=b,this.length=0}function h(k,b,C){var E=b.next,j={value:C,prev:b,next:E};return b.next=j,E.prev=j,k.length++,j}function g(k,b,C){for(var E=b.next,j=0;j<C&&E!==k.tail;j++)E=E.next;b.next=E,E.prev=b,k.length-=j}function x(k){for(var b=[],C=k.head.next;C!==k.tail;)b.push(C.value),C=C.next;return b}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(k){var b=JSON.parse(k.data),C=b.language,E=b.code,j=b.immediateClose;n.postMessage(o.highlight(E,o.languages[C],C)),j&&n.close()},!1)),o;var y=o.util.currentScript();y&&(o.filename=y.src,y.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var T=document.readyState;T==="loading"||T==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o})(t);e.exports&&(e.exports=r),typeof t4<"u"&&(t4.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:r.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,s){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:r.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",c="loading",u="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+c+'"])';function h(y,v,T){var k=new XMLHttpRequest;k.open("GET",y,!0),k.onreadystatechange=function(){k.readyState==4&&(k.status<400&&k.responseText?v(k.responseText):k.status>=400?T(s(k.status,k.statusText)):T(a))},k.send(null)}function g(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var T=Number(v[1]),k=v[2],b=v[3];return k?b?[T,Number(b)]:[T,void 0]:[T,T]}}r.hooks.add("before-highlightall",function(y){y.selector+=", "+f}),r.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(f)){y.code="",v.setAttribute(o,c);var T=v.appendChild(document.createElement("CODE"));T.textContent=n;var k=v.getAttribute("data-src"),b=y.language;if(b==="none"){var C=(/\.(\w+)$/.exec(k)||[,"none"])[1];b=i[C]||C}r.util.setLanguage(T,b),r.util.setLanguage(v,b);var E=r.plugins.autoloader;E&&E.loadLanguages(b),h(k,function(j){v.setAttribute(o,u);var P=g(v.getAttribute("data-range"));if(P){var A=j.split(/\r\n?|\n/g),M=P[0],F=P[1]==null?A.length:P[1];M<0&&(M+=A.length),M=Math.max(0,Math.min(M-1,A.length)),F<0&&(F+=A.length),F=Math.max(0,Math.min(F,A.length)),j=A.slice(M,F).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(M+1))}T.textContent=j,r.highlightElement(T)},function(j){v.setAttribute(o,d),T.textContent=j})}}),r.plugins.fileHighlight={highlight:function(v){for(var T=(v||document).querySelectorAll(f),k=0,b;b=T[k++];)r.highlightElement(b)}};var x=!1;r.fileHighlight=function(){x||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),x=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(y5)),y5.exports}Mle();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(f){d!==f&&(e.languages.markdown[d].inside.content.inside[f]=e.languages.markdown[f])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function f(h){if(!(!h||typeof h=="string"))for(var g=0,x=h.length;g<x;g++){var y=h[g];if(y.type!=="code"){f(y.content);continue}var v=y.content[1],T=y.content[3];if(v&&T&&v.type==="code-language"&&T.type==="code-block"&&typeof v.content=="string"){var k=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");k=(/[a-z][\w-]*/i.exec(k)||[""])[0].toLowerCase();var b="language-"+k;T.alias?typeof T.alias=="string"?T.alias=[T.alias,b]:T.alias.push(b):T.alias=[b]}}}f(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var f="",h=0,g=d.classes.length;h<g;h++){var x=d.classes[h],y=/language-(.+)/.exec(x);if(y){f=y[1];break}}var v=e.languages[f];if(v)d.content=e.highlight(u(d.content),v,f);else if(f&&f!=="none"&&e.plugins.autoloader){var T="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=T,e.plugins.autoloader.loadLanguages(f,function(){var k=document.getElementById(T);k&&(k.innerHTML=e.highlight(k.textContent,e.languages[f],f))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(d){var f=d.replace(i,"");return f=f.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,g){if(g=g.toLowerCase(),g[0]==="#"){var x;return g[1]==="x"?x=parseInt(g.slice(2),16):x=Number(g.slice(1)),c(x)}else{var y=o[g];return y||h}}),f}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var rF={},nF;function Fle(){return nF||(nF=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),rF}Fle();var sF={},aF;function Dle(){return aF||(aF=1,(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(Prism)),sF}Dle();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var iF={},oF;function Ole(){return oF||(oF=1,(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(Prism)),iF}Ole();var lF={},cF;function Rle(){return cF||(cF=1,(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),lF}Rle();var uF={},dF;function Ile(){return dF||(dF=1,(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(Prism)),uF}Ile();function ZU(e,t){for(const r of e.childNodes){if(Ps(r)&&r.tagName===t)return!0;ZU(r,t)}return!1}const Fy="data-language",by="data-highlight-language",rb="data-theme";class Km extends yo{static getType(){return"code"}static clone(t){return new Km(t.__language,t.__key)}constructor(t,r){super(r),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const r=document.createElement("code");ei(r,t.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(Fy,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(by,n));const s=this.getTheme();s&&r.setAttribute(rb,s);const a=this.getStyle();return a&&r.setAttribute("style",a),r}updateDOM(t,r,n){const s=this.__language,a=t.__language;s?s!==a&&r.setAttribute(Fy,s):a&&r.removeAttribute(Fy);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&r.setAttribute(by,s):r.removeAttribute(by):i&&s&&r.setAttribute(by,s);const o=this.__theme,c=t.__theme;o?o!==c&&r.setAttribute(rb,o):c&&r.removeAttribute(rb);const u=this.__style,d=t.__style;return u?u!==d&&r.setAttribute("style",u):d&&r.removeAttribute("style"),!1}exportDOM(t){const r=document.createElement("pre");ei(r,t._config.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(Fy,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(by,n));const s=this.getTheme();s&&r.setAttribute(rb,s);const a=this.getStyle();return a&&r.setAttribute("style",a),{element:r}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||ZU(t,"BR"))?{conversion:fF,priority:1}:null,div:()=>({conversion:Lle,priority:1}),pre:()=>({conversion:fF,priority:0}),table:t=>v5(t)?{conversion:Ble,priority:3}:null,td:t=>{const r=t,n=r.closest("table");return r.classList.contains("js-file-line")||n&&v5(n)?{conversion:hF,priority:3}:null},tr:t=>{const r=t.closest("table");return r&&v5(r)?{conversion:hF,priority:3}:null}}}static importJSON(t){return qd().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,r=!0){const n=this.getChildren(),s=n.length;if(s>=2&&n[s-1].getTextContent()===`
`&&n[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){n[s-1].remove(),n[s-2].remove();const c=js();return this.insertAfter(c,r),c}const{anchor:a,focus:i}=t,o=(a.isBefore(i)?a:i).getNode();if(gr(o)){let c=zle(o);const u=[];for(;;)if(z_(c))u.push(f1()),c=c.getNextSibling();else{if(!rW(c))break;{let v=0;const T=c.getTextContent(),k=c.getTextContentSize();for(;v<k&&T[v]===" ";)v++;if(v!==0&&u.push(tW(" ".repeat(v))),v!==k)break;c=c.getNextSibling()}}const d=o.splitText(a.offset)[0],f=a.offset===0?0:1,h=d.getIndexWithinParent()+f,g=o.getParentOrThrow(),x=[Ju(),...u];g.splice(h,0,x);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(A7(o)){const{offset:c}=t.anchor;o.splice(c,0,[Ju()]),o.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=js();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}setLanguage(t){const r=this.getWritable();return r.__language=t||void 0,r}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const r=this.getWritable();return r.__isSyntaxHighlightSupported=t,r}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const r=this.getWritable();return r.__theme=t||void 0,r}getTheme(){return this.getLatest().__theme}}function qd(e,t){return ooe(Km).setLanguage(e).setTheme(t)}function A7(e){return e instanceof Km}function fF(e){return{node:qd(e.getAttribute(Fy))}}function Lle(e){const t=e,r=mF(t);return r||(function(n){let s=n.parentElement;for(;s!==null;){if(mF(s))return!0;s=s.parentElement}return!1})(t)?{node:r?qd():null}:{node:null}}function Ble(){return{node:qd()}}function hF(){return{node:null}}function mF(e){return e.style.fontFamily.match("monospace")!==null}function v5(e){return e.classList.contains("js-file-line-container")}let J_=class eW extends Zf{constructor(t="",r,n){super(t,n),this.__highlightType=r}static getType(){return"code-highlight"}static clone(t){return new eW(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const r=this.getWritable();return r.__highlightType=t||void 0,r}canHaveFormat(){return!1}createDOM(t){const r=super.createDOM(t),n=w5(t.theme,this.__highlightType);return ei(r,n),r}updateDOM(t,r,n){const s=super.updateDOM(t,r,n),a=w5(n.theme,t.__highlightType),i=w5(n.theme,this.__highlightType);return a!==i&&(a&&Of(r,a),i&&ei(r,i)),s}static importJSON(t){return tW().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return qd()}};function w5(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function tW(e="",t){return Ho(new J_(e,t))}function rW(e){return e instanceof J_}function $le(e,t){let r=e;for(let n=Yi(e,t);n&&(rW(n.origin)||z_(n.origin));n=Poe(n))r=n.origin;return r}function zle(e){return $le(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(r){var n=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+n+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);const Ule=new Set(["http:","https:","mailto:","sms:","tel:"]);class rh extends yo{static getType(){return"link"}static clone(t){return new rh(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",r={},n){super(n);const{target:s=null,rel:a=null,title:i=null}=r;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const r=document.createElement("a");return this.updateLinkDOM(null,r,t),ei(r,t.theme.link),r}updateLinkDOM(t,r,n){if(gU(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?r[s]=i:r.removeAttribute(s))}}}updateDOM(t,r,n){return this.updateLinkDOM(t,r,n),!1}static importDOM(){return{a:t=>({conversion:Wle,priority:1})}}static importJSON(t){return E4().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=pF(t);try{const r=new URL(pF(t));if(!Ule.has(r.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const r=this.getWritable();return r.__url=t,r}getTarget(){return this.getLatest().__target}setTarget(t){const r=this.getWritable();return r.__target=t,r}getRel(){return this.getLatest().__rel}setRel(t){const r=this.getWritable();return r.__rel=t,r}getTitle(){return this.getLatest().__title}setTitle(t){const r=this.getWritable();return r.__title=t,r}insertNewAfter(t,r=!0){const n=E4(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,r),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!Ht(r))return!1;const s=r.anchor.getNode(),a=r.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function Wle(e){let t=null;if(gU(e)){const r=e.textContent;(r!==null&&r!==""||e.children.length>0)&&(t=E4(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function E4(e="",t){return Ho(new rh(e,t))}function Hle(e){return e instanceof rh}class v1 extends rh{constructor(t="",r={},n){super(t,r,n),this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return"autolink"}static clone(t){return new v1(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const r=this.getWritable();return r.__isUnlinked=t,r}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,r,n){return super.updateDOM(t,r,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return gF().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,r=!0){const n=this.getParentOrThrow().insertNewAfter(t,r);if(Dt(n)){const s=gF(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(s),s}return null}}function gF(e="",t){return Ho(new v1(e,t))}function Gle(e){return e instanceof v1}const Vle=/^\+?[0-9\s()-]{5,}$/;function pF(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:Vle.test(e)?`tel:${e}`:`https://${e}`}function P8(e,t){const r={};for(const n of e){const s=t(n);s&&(r[s]?r[s].push(n):r[s]=[n])}return r}function qle(e){const t=P8(e,(r=>r.type));return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const xF=/[!-/:-@[-`{-~\s]/;function Kle(e){return gr(e)&&!e.hasFormat("code")}function Yle(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function yF(e,t,r){const n=r.length;for(let s=t;s>=n;s--){const a=s-n;if(nW(e,a,r,0,n)&&e[a+n]!==" ")return a}return-1}function nW(e,t,r,n,s){for(let a=0;a<s;a++)if(e[t+a]!==r[n+a])return!1;return!0}function Xle(e,t=Q_){const r=qle(t),n=P8(r.textFormat,(({tag:i})=>i[i.length-1])),s=P8(r.textMatch,(({trigger:i})=>i));for(const i of t){const o=i.type;if(o==="element"||o==="text-match"||o==="multiline-element"){const c=i.dependencies;for(const u of c)e.hasNode(u)||Yle(173,u.getType())}}const a=(i,o,c)=>{(function(u,d,f,h){const g=u.getParent();if(!$o(g)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExp:y,replace:v}of h){const T=x.match(y);if(T&&T[0].length===(T[0].endsWith(" ")?f:f-1)){const k=d.getNextSiblings(),[b,C]=d.splitText(f);if(v(u,C?[C,...k]:k,T,!1)!==!1)return b.remove(),!0}}return!1})(i,o,c,r.element)||(function(u,d,f,h){const g=u.getParent();if(!$o(g)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:T}of h){if(T&&!("optional"in T)||T&&"optional"in T&&!T.optional)continue;const k=x.match(y);if(k&&k[0].length===(k[0].endsWith(" ")?f:f-1)){const b=d.getNextSiblings(),[C,E]=d.splitText(f);if(v(u,E?[E,...b]:b,k,null,null,!1)!==!1)return C.remove(),!0}}return!1})(i,o,c,r.multilineElement)||(function(u,d,f){let h=u.getTextContent();const g=f[h[d-1]];if(g==null)return!1;d<h.length&&(h=h.slice(0,d));for(const x of g){if(!x.replace||!x.regExp)continue;const y=h.match(x.regExp);if(y===null)continue;const v=y.index||0,T=v+y[0].length;let k;return v===0?[k]=u.splitText(T):[,k]=u.splitText(v,T),k.selectNext(0,0),x.replace(k,y),!0}return!1})(o,c,s)||(function(u,d,f){const h=u.getTextContent(),g=d-1,x=h[g],y=f[x];if(!y)return!1;for(const v of y){const{tag:T}=v,k=T.length,b=g-k+1;if(k>1&&!nW(h,b,T,0,k)||h[b-1]===" ")continue;const C=h[g+1];if(v.intraword===!1&&C&&!xF.test(C))continue;const E=u;let j=E,P=yF(h,b,T),A=j;for(;P<0&&(A=A.getPreviousSibling())&&!Jd(A);)if(gr(A)){if(A.hasFormat("code"))continue;const L=A.getTextContent();j=A,P=yF(L,L.length,T)}if(P<0||j===E&&P+k===b)continue;const M=j.getTextContent();if(P>0&&M[P-1]===x)continue;const F=M[P-1];if(v.intraword===!1&&F&&!xF.test(F))continue;const B=E.getTextContent(),V=B.slice(0,b)+B.slice(g+1);E.setTextContent(V);const ee=j===E?V:M;j.setTextContent(ee.slice(0,P)+ee.slice(P+k));const ae=mr(),Z=W_();Xi(Z);const te=g-k*(j===E?2:1)+1;Z.anchor.set(j.__key,P,"text"),Z.focus.set(E.__key,te,"text");for(const L of v.format)Z.hasFormat(L)||Z.formatText(L);Z.anchor.set(Z.focus.key,Z.focus.offset,Z.focus.type);for(const L of v.format)Z.hasFormat(L)&&Z.toggleFormat(L);return Ht(ae)&&(Z.format=ae.format),!0}})(o,c,n)};return e.registerUpdateListener((({tags:i,dirtyLeaves:o,editorState:c,prevEditorState:u})=>{if(i.has(rU)||i.has(_4)||e.isComposing())return;const d=c.read(mr),f=u.read(mr);if(!Ht(f)||!Ht(d)||!d.isCollapsed()||d.is(f))return;const h=d.anchor.key,g=d.anchor.offset,x=c._nodeMap.get(h);!gr(x)||!o.has(h)||g!==1&&g>f.anchor.offset+1||e.update((()=>{if(!Kle(x))return;const y=x.getParent();y===null||A7(y)||a(y,x,d.anchor.offset)}))}))}const Jle=/^(\s*)(\d{1,})\.\s/,Qle=/^(\s*)[-*+]\s/,Zle=/^(#{1,6})\s/,ece=/^>\s/,tce=/^[ \t]*```([\w-]+)?/,rce=/[ \t]*```$/,sW=e=>(t,r,n,s)=>{const a=e(n);a.append(...r),t.replace(a),s||a.select(0,0)},aW=e=>(t,r,n,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),o=Ll(e==="check"?n[3]==="x":void 0);if(gn(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(o):i.append(o),t.remove()}else if(gn(a)&&a.getListType()===e)a.append(o),t.remove();else{const u=ul(e,e==="number"?Number(n[2]):void 0);u.append(o),t.replace(u)}o.append(...r),s||o.select(0,0);const c=(function(u){const d=u.match(/\t/g),f=u.match(/ /g);let h=0;return d&&(h+=d.length),f&&(h+=Math.floor(f.length/4)),h})(n[1]);c&&o.setIndent(c)},j7=(e,t,r)=>{const n=[],s=e.getChildren();let a=0;for(const i of s)if(Kn(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(gn(d)){n.push(j7(d,t,r+1));continue}}const o=" ".repeat(4*r),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";n.push(o+u+t(i)),a++}return n.join(`
`)},nce={dependencies:[m2],export:(e,t)=>{if(!Zoe(e))return null;const r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:Zle,replace:sW((e=>{const t="h"+e[1].length;return Cf(t)})),type:"element"},sce={dependencies:[f2],export:(e,t)=>{if(!LM(e))return null;const r=t(e).split(`
`),n=[];for(const s of r)n.push("> "+s);return n.join(`
`)},regExp:ece,replace:(e,t,r,n)=>{if(n){const a=e.getPreviousSibling();if(LM(a))return a.splice(a.getChildrenSize(),0,[Ju(),...t]),void e.remove()}const s=h2();s.append(...t),e.replace(s),n||s.select(0,0)},type:"element"},ace={dependencies:[Km],export:e=>{if(!A7(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:rce},regExpStart:tce,replace:(e,t,r,n,s,a)=>{let i,o;if(!t&&s){if(s.length===1)n?(i=qd(),o=r[1]+s[0]):(i=qd(r[1]),o=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=qd(r[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();o=s.join(`
`)}const c=fa(o);i.append(c),e.append(i)}else t&&sW((c=>qd(c?c[1]:void 0)))(e,t,r,a)},type:"multiline-element"},ice={dependencies:[th,w0],export:(e,t)=>gn(e)?j7(e,t,0):null,regExp:Qle,replace:aW("bullet"),type:"element"},oce={dependencies:[th,w0],export:(e,t)=>gn(e)?j7(e,t,0):null,regExp:Jle,replace:aW("number"),type:"element"},lce={format:["code"],tag:"`",type:"text-format"},cce={format:["highlight"],tag:"==",type:"text-format"},uce={format:["bold","italic"],tag:"***",type:"text-format"},dce={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},fce={format:["bold"],tag:"**",type:"text-format"},hce={format:["bold"],intraword:!1,tag:"__",type:"text-format"},mce={format:["strikethrough"],tag:"~~",type:"text-format"},gce={format:["italic"],tag:"*",type:"text-format"},pce={format:["italic"],intraword:!1,tag:"_",type:"text-format"},xce={dependencies:[rh],export:(e,t,r)=>{if(!Hle(e)||Gle(e))return null;const n=e.getTitle(),s=t(e);return n?`[${s}](${e.getURL()} "${n}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,r,n,s]=t,a=E4(n,{title:s}),i=r.split("[").length-1,o=r.split("]").length-1;let c=r,u="";if(i<o)return;if(i>o){const f=r.split("[");u="["+f[0],c=f.slice(1).join("[")}const d=fa(c);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(fa(u)),d},trigger:")",type:"text-match"},yce=[nce,sce,ice,oce],vce=[ace],wce=[lce,uce,dce,fce,hce,cce,gce,pce,mce],bce=[xce],Q_=[...yce,...vce,...wce,...bce];function vF(e,t){return e.getEditorState().read((()=>{const r=za(t);return r!==null&&r.isSelected()}))}function _ce(e){const[t]=td(),[r,n]=_.useState((()=>vF(t,e)));return _.useEffect((()=>{let s=!0;const a=t.registerUpdateListener((()=>{s&&n(vF(t,e))}));return()=>{s=!1,a()}}),[t,e]),[r,_.useCallback((s=>{t.update((()=>{let a=mr();io(a)||(a=QC(),Xi(a)),io(a)&&(s?a.add(e):a.delete(e))}))}),[t,e]),_.useCallback((()=>{t.update((()=>{const s=mr();io(s)&&s.clear()}))}),[t])]}function Sce({nodeKey:e}){const[t]=td(),[r,n,s]=_ce(e);return _.useEffect((()=>qm(t.registerCommand(VC,(a=>{const i=t.getElementByKey(e);return a.target===i&&(a.shiftKey||s(),n(!r),!0)}),up))),[s,t,r,e,n]),_.useEffect((()=>{const a=t.getElementByKey(e),i=t._config.theme.hrSelected??"selected";a!==null&&(r?ei(a,i):Of(a,i))}),[t,r,e]),null}class p2 extends t7{static getType(){return"horizontalrule"}static clone(t){return new p2(t.__key)}static importJSON(t){return P7().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:kce,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const r=document.createElement("hr");return ei(r,t.theme.hr),r}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return l.jsx(Sce,{nodeKey:this.__key})}}function kce(){return{node:P7()}}function P7(){return Ho(new p2)}function Tce(e){return e instanceof p2}const Cce=[{dependencies:[p2],export:e=>Tce(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{const s=P7();n||e.getNextSibling()!=null?e.replace(s):e.insertBefore(s),s.selectNext()},type:"element"},...Q_];function iW({transformers:e=Cce}){const[t]=td();return _.useEffect((()=>Xle(t,e)),[t,e]),null}function oW({hasStrictIndent:e=!1}){const[t]=td();return _.useEffect((()=>{if(!t.hasNodes([th,w0]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),_.useEffect((()=>{if(e)return Ple(t)}),[t,e]),(function(r){_.useEffect((()=>jle(r)),[r])})(t),null}const Nce=({onChange:e})=>{const[t]=_.useContext(u1)||[];return _.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Hs().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},Ece=()=>{const[e]=_.useContext(u1)||[],t=_.useCallback(()=>{e&&e.dispatchCommand(go,"bold")},[e]),r=_.useCallback(()=>{e&&e.dispatchCommand(go,"italic")},[e]),n=_.useCallback(()=>{e&&e.dispatchCommand(go,"underline")},[e]),s=_.useCallback(()=>{e&&e.dispatchCommand(go,"strikethrough")},[e]),a=_.useCallback(g=>{e&&e.update(()=>{const x=mr();Ht(x)&&Ap(x,()=>Cf(g))})},[e]),i=_.useCallback(()=>{e&&e.update(()=>{const g=mr();Ht(g)&&Ap(g,()=>js())})},[e]);_.useCallback(()=>{e&&e.update(()=>{const g=mr();Ht(g)&&Ap(g,()=>h2())})},[e]);const o=_.useCallback(()=>{e&&e.dispatchCommand(C7)},[e]),c=_.useCallback(()=>{e&&e.dispatchCommand(N7)},[e]),u=_.useCallback(()=>{e&&e.dispatchCommand(E7)},[e]),d=_.useCallback(g=>{e&&e.update(()=>{const x=mr();Ht(x)&&x.getNodes().forEach(y=>{gr(y)&&y.setStyle(`color: ${g}`)})})},[e]),f=_.useCallback(g=>{e&&e.update(()=>{const x=mr();Ht(x)&&x.getNodes().forEach(v=>{if(gr(v)){const T=v.getStyle(),k=T?T.replace(/font-size:\s*\d+px;?\s*/g,"").trim():"",b=k?`${k}; font-size: ${g}px;`:`font-size: ${g}px;`;v.setStyle(b)}})})},[e]),h=_.useCallback(g=>{e&&e.dispatchCommand(Dz,g)},[e]);return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:t,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),l.jsx("button",{type:"button",onClick:r,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),l.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),l.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:()=>a("h1"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>a("h2"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>a("h3"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),l.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:" List"}),l.jsx("button",{type:"button",onClick:c,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1. List"}),l.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:"No List"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Color:"}),l.jsx("button",{type:"button",onClick:()=>d("#000000"),className:"w-6 h-6 bg-black border border-gray-300 rounded hover:bg-gray-800",title:"Black"}),l.jsx("button",{type:"button",onClick:()=>d("#ff0000"),className:"w-6 h-6 bg-red-500 border border-gray-300 rounded hover:bg-red-600",title:"Red"}),l.jsx("button",{type:"button",onClick:()=>d("#0000ff"),className:"w-6 h-6 bg-blue-500 border border-gray-300 rounded hover:bg-blue-600",title:"Blue"}),l.jsx("button",{type:"button",onClick:()=>d("#008000"),className:"w-6 h-6 bg-green-500 border border-gray-300 rounded hover:bg-green-600",title:"Green"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Size:"}),l.jsx("button",{type:"button",onClick:()=>f(12),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Small",children:"12px"}),l.jsx("button",{type:"button",onClick:()=>f(16),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Normal",children:"16px"}),l.jsx("button",{type:"button",onClick:()=>f(20),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Large",children:"20px"}),l.jsx("button",{type:"button",onClick:()=>f(24),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Extra Large",children:"24px"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Align:"}),l.jsx("button",{type:"button",onClick:()=>h("left"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Left",children:""}),l.jsx("button",{type:"button",onClick:()=>h("center"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Center",children:""}),l.jsx("button",{type:"button",onClick:()=>h("right"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Right",children:""})]})]})},Ace=({value:e,onChange:t,placeholder:r})=>{const n={namespace:"LexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[m2,th,w0,f2,Km,J_,g2,x1,y1,v1,rh],onError:s=>{console.error("Lexical error:",s)},editorState:e?(()=>{try{const s=JSON.parse(e);return JSON.stringify(s)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs(bU,{initialConfig:n,children:[l.jsx(Ece,{}),l.jsx(Nce,{onChange:t}),l.jsxs("div",{className:"relative",children:[l.jsx(BU,{contentEditable:l.jsx(zU,{className:"p-4 min-h-32 focus:outline-none",placeholder:r}),placeholder:l.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:HU}),l.jsx(UU,{}),l.jsx(WU,{}),l.jsx(oW,{}),l.jsx(iW,{transformers:Q_})]})]})})},jce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Os(),{post:o}=zl(),{showNotification:c}=ai(),[u,d]=_.useState({test_name:e,num_questions:1,passing_score:100,questions:[{id:1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048}]}),[f,h]=_.useState({isLoading:!1,error:null,showPreview:!0});_.useEffect(()=>{d(T=>({...T,test_name:e||""}))},[e]);const g=()=>{if(u.num_questions>=3){h(b=>({...b,error:"Maximum 3 questions allowed for performance reasons"}));return}const k={id:Math.max(...u.questions.map(b=>b.id))+1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048};d(b=>({...b,num_questions:b.num_questions+1,questions:[...b.questions,k]}))},x=T=>{u.questions.length<=1||d(k=>({...k,num_questions:k.num_questions-1,questions:k.questions.filter(b=>b.id!==T)}))},y=(T,k)=>{d(b=>({...b,questions:b.questions.map(C=>C.id===T?{...C,question_json:k}:C)}))},v=async()=>{if(!u.test_name.trim()){h(T=>({...T,error:"Test name is required"}));return}if(u.questions.some(T=>!T.question_json.trim())){h(T=>({...T,error:"All questions must have content"}));return}h(T=>({...T,isLoading:!0,error:null}));try{const T={test_name:u.test_name,num_questions:u.num_questions,passing_score:u.passing_score,questions:u.questions.map((k,b)=>({question_id:b+1,question_json:k.question_json,canvas_width:k.canvas_width,canvas_height:k.canvas_height,max_canvas_width:k.max_canvas_width,max_canvas_height:k.max_canvas_height}))};t&&t(T)}catch(T){console.error("Error preparing drawing test:",T),h(k=>({...k,error:"Failed to prepare drawing test. Please try again."})),c("Failed to prepare drawing test","error")}finally{h(T=>({...T,isLoading:!1}))}};return l.jsxs("div",{className:"drawing-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Drawing Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a test where students draw based on your instructions"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Drawing Questions (",u.num_questions,"/3)"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 3 questions for optimal performance"})]}),l.jsxs(rt,{onClick:g,disabled:u.num_questions>=3,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Question"]})]}),l.jsx("div",{className:"space-y-4",children:u.questions.map((T,k)=>l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"text-md font-medium text-gray-800",children:["Text ",k+1]}),u.questions.length>1&&l.jsx(rt,{onClick:()=>x(T.id),variant:"secondary",size:"sm",className:"text-red-600 hover:text-red-700",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content *"}),l.jsx(Ace,{value:T.question_json,onChange:b=>y(T.id,b),placeholder:""})]})]},T.id))})]}),f.error&&l.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700",children:f.error}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(rt,{onClick:r,variant:"secondary",disabled:f.isLoading,children:"Cancel"}),l.jsx(rt,{onClick:v,variant:"primary",disabled:f.isLoading||!u.test_name.trim(),className:"flex items-center gap-2",children:f.isLoading?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white"}),"Saving..."]}):"Save Test"})]})]})},Pce=({onChange:e})=>{const[t]=_.useContext(u1)||[];return _.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Hs().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},Mce=({onAddBlank:e,blankCount:t})=>{const[r]=_.useContext(u1)||[],n=_.useCallback(()=>{r&&r.dispatchCommand(go,"bold")},[r]),s=_.useCallback(()=>{r&&r.dispatchCommand(go,"italic")},[r]),a=_.useCallback(()=>{r&&r.dispatchCommand(go,"underline")},[r]),i=_.useCallback(()=>{r&&r.dispatchCommand(go,"strikethrough")},[r]),o=_.useCallback(x=>{r&&r.update(()=>{const y=mr();Ht(y)&&Ap(y,()=>Cf(x))})},[r]),c=_.useCallback(()=>{r&&r.update(()=>{const x=mr();Ht(x)&&Ap(x,()=>js())})},[r]),u=_.useCallback(()=>{r&&r.update(()=>{const x=mr();Ht(x)&&Ap(x,()=>h2())})},[r]),d=_.useCallback(()=>{r&&r.dispatchCommand(C7)},[r]),f=_.useCallback(()=>{r&&r.dispatchCommand(N7)},[r]),h=_.useCallback(()=>{r&&r.dispatchCommand(E7)},[r]),g=_.useCallback(()=>{!r||!e||(r.update(()=>{const x=mr();if(Ht(x)){const v=`${t+1}_________`,T=fa(v);T.setStyle("background-color: #f0f9ff; border: 1px dashed #3b82f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"),x.insertNodes([T])}}),e())},[r,e,t]);return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),l.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),l.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),l.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:()=>o("h1"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>o("h2"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>o("h3"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),l.jsx("button",{type:"button",onClick:c,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"}),l.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Quote",children:'"'})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:d,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:""}),l.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1."}),l.jsx("button",{type:"button",onClick:h,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:""})]}),e&&l.jsx("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:l.jsxs("button",{type:"button",onClick:g,className:"px-3 py-1 text-sm font-medium bg-blue-500 text-white border border-blue-600 rounded hover:bg-blue-600 transition-colors",title:"Add Blank",children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"inline mr-1",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Blank"]})})]})},Fce=({value:e,onChange:t,placeholder:r,onAddBlank:n,blankCount:s=0})=>{const a={namespace:"FillBlanksLexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[m2,th,w0,f2,Km,J_,g2,x1,y1,v1,rh],onError:i=>{console.error("Lexical error:",i)},editorState:e?(()=>{try{const i=JSON.parse(e);return JSON.stringify(i)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs(bU,{initialConfig:a,children:[l.jsx(Mce,{onAddBlank:n,blankCount:s}),l.jsx(Pce,{onChange:t}),l.jsxs("div",{className:"relative",children:[l.jsx(BU,{contentEditable:l.jsx(zU,{className:"p-4 min-h-32 focus:outline-none"}),placeholder:l.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:HU}),l.jsx(UU,{}),l.jsx(WU,{}),l.jsx(oW,{}),l.jsx(iW,{transformers:Q_})]})]})})},Dce=({testName:e="",allowedTime:t=null,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const{user:o}=Os(),{post:c}=zl(),{showNotification:u}=ai(),[d,f]=_.useState({test_name:e,test_text:"",num_questions:1,num_blanks:0,passing_score:100,separate_type:!0,allowed_time:t,blanks:[]}),[h,g]=_.useState({isLoading:!1,error:null,showPreview:!0});_.useEffect(()=>{f(P=>({...P,test_name:e||"",allowed_time:t}))},[e,t]);const x=P=>{f(A=>({...A,test_text:P}))},y=()=>{const A={id:d.blanks.length+1,position:0,question:"",options:["","","",""],correct_answer:""};f(M=>({...M,blanks:[...M.blanks,A],num_blanks:M.num_blanks+1}))},v=P=>{f(A=>({...A,blanks:A.blanks.filter(M=>M.id!==P),num_blanks:A.num_blanks-1}))},T=P=>{f(A=>({...A,blanks:A.blanks.map(M=>M.id===P?{...M,options:[...M.options,""]}:M)}))},k=(P,A)=>{f(M=>({...M,blanks:M.blanks.map(F=>F.id===P?{...F,options:F.options.filter((B,V)=>V!==A),correct_answer:F.correct_answer===String.fromCharCode(65+A)?"":F.correct_answer}:F)}))},b=(P,A,M)=>{f(F=>({...F,blanks:F.blanks.map(B=>B.id===P?{...B,options:B.options.map((V,ee)=>ee===A?M:V)}:B)}))},C=(P,A)=>{console.log(" [DEBUG] updateBlankQuestion called:",{blankId:P,question:A}),f(M=>({...M,blanks:M.blanks.map(F=>F.id===P?{...F,question:A}:F)})),console.log(" [DEBUG] updateBlankQuestion completed")},E=(P,A)=>{f(M=>({...M,blanks:M.blanks.map(F=>F.id===P?{...F,correct_answer:A}:F)}))},j=async()=>{if(!d.test_name.trim()){g(P=>({...P,error:"Test name is required"}));return}if(!d.test_text.trim()){g(P=>({...P,error:"Test text is required"}));return}if(d.blanks.length===0){g(P=>({...P,error:"At least one blank is required"}));return}if(console.log(" [DEBUG] Validating blanks:",d.blanks),d.blanks.forEach((P,A)=>{console.log(` [DEBUG] Blank ${A+1}:`,{question:P.question,questionTrimmed:P.question?.trim(),correct_answer:P.correct_answer,options:P.options})}),d.separate_type===!1){if(d.blanks.some(P=>!P.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing correct answer"),g(P=>({...P,error:"All blanks must have correct answers"}));return}}else if(d.blanks.some(P=>!P.question.trim()||!P.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing question or correct answer"),g(P=>({...P,error:"All blanks must have question text and correct answer"}));return}console.log(" [DEBUG] Validation passed - all blanks have question and correct answer"),g(P=>({...P,isLoading:!0,error:null}));try{const P={test_name:d.test_name,test_text:d.test_text,num_questions:d.blanks.length,num_blanks:d.blanks.length,separate_type:d.separate_type,passing_score:d.passing_score,allowed_time:d.allowed_time,blanks:d.blanks.map((A,M)=>({question_id:M+1,question_json:A.question,question:A.question,options:A.options,correct_answer:A.correct_answer,blank_positions:{},blank_options:A.options||[],correct_answers:[A.correct_answer]}))};console.log(" [DEBUG] Calling onTestSaved with data:",P),r?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),r(P),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(P){console.error("Error preparing fill blanks test:",P),g(A=>({...A,error:"Failed to prepare fill blanks test. Please try again."})),u("Failed to prepare fill blanks test","error")}finally{g(P=>({...P,isLoading:!1}))}};return l.jsxs("div",{className:"fill-blanks-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Fill Blanks Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a test with text content and multiple choice blanks"}),h.error&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600 text-sm",children:h.error})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!0?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(P=>({...P,separate_type:!0})),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:d.separate_type===!0,onChange:()=>f(P=>({...P,separate_type:!0})),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Separate Mode"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Multiple choice questions below the text"})]}),l.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!1?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(P=>({...P,separate_type:!1})),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:d.separate_type===!1,onChange:()=>f(P=>({...P,separate_type:!1})),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Inline Mode"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Dropdown for option inside the text"})]})]}),l.jsx(Fce,{value:d.test_text,onChange:x,placeholder:"Type your text here. Use the 'Add Blank' button in the toolbar to insert blanks.",onAddBlank:y,blankCount:d.blanks.length})]}),d.separate_type===!0&&l.jsx("div",{className:"space-y-4",children:d.blanks.map((P,A)=>l.jsxs(zt,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-md font-medium",children:["Blank ",P.id," Configuration"]}),l.jsx(rt,{variant:"danger",size:"small",onClick:()=>v(P.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Text for Blank ",P.id," *"]}),l.jsx("input",{type:"text",placeholder:"Enter question text for this blank",value:P.question,onChange:M=>C(P.id,M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),P.options.map((M,F)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+F)}),l.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+F)}`,value:M||"",onChange:B=>b(P.id,F,B.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),P.options.length>2&&l.jsx(rt,{variant:"danger",size:"small",onClick:()=>k(P.id,F),className:"px-2 py-1 text-sm",children:""})]},F)),P.options.length<6&&l.jsx(rt,{variant:"secondary",size:"small",onClick:()=>T(P.id),className:"w-full",children:"+ Add Option"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{value:P.correct_answer||"",onChange:M=>E(P.id,M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),P.options.filter(M=>M.trim().length>0).map((M,F)=>l.jsxs("option",{value:String.fromCharCode(65+F),children:[String.fromCharCode(65+F),") ",M]},F))]})]})]},P.id))}),d.separate_type===!1&&l.jsx("div",{className:"space-y-4",children:d.blanks.map((P,A)=>l.jsxs(zt,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-md font-medium",children:["Blank ",P.id," Options"]}),l.jsx(rt,{variant:"danger",size:"small",onClick:()=>v(P.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),P.options.map((M,F)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+F)}),l.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+F)}`,value:M||"",onChange:B=>b(P.id,F,B.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),P.options.length>2&&l.jsx(rt,{variant:"danger",size:"small",onClick:()=>k(P.id,F),className:"px-2 py-1 text-sm",children:""})]},F)),P.options.length<6&&l.jsx(rt,{variant:"secondary",size:"small",onClick:()=>T(P.id),className:"w-full",children:"+ Add Option"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{value:P.correct_answer||"",onChange:M=>E(P.id,M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),P.options.filter(M=>M.trim().length>0).map((M,F)=>l.jsxs("option",{value:String.fromCharCode(65+F),children:[String.fromCharCode(65+F),") ",M]},F))]})]})]},P.id))}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx(rt,{onClick:n,variant:"secondary",disabled:a,children:"Cancel"}),l.jsx(rt,{onClick:j,variant:"primary",disabled:a||d.blanks.length===0,children:a?l.jsx(cn,{size:"sm"}):"Save Test"})]})]})},Oce=[{value:"A1",label:"A1 (Beginner)",description:"Basic vocabulary, simple sentences"},{value:"A2",label:"A2 (Elementary)",description:"Everyday vocabulary, present/past tenses"},{value:"B1",label:"B1 (Intermediate)",description:"Varied vocabulary, complex sentences"},{value:"B2",label:"B2 (Upper-Intermediate)",description:"Advanced vocabulary, sophisticated structures"},{value:"C1",label:"C1 (Advanced)",description:"Nuanced vocabulary, complex discourse"},{value:"C2",label:"C2 (Proficiency)",description:"Native-like fluency and accuracy"}],Rce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{showNotification:i}=ai(),[o,c]=_.useState({min_words:50,questions:[{question_id:1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}),[u,d]=_.useState(!1),f=_.useCallback((T,k)=>{c(b=>({...b,[T]:k}))},[]),h=_.useCallback((T,k,b)=>{c(C=>({...C,questions:C.questions.map((E,j)=>j===T?{...E,[k]:b}:E)}))},[]),g=_.useCallback(()=>{c(T=>({...T,questions:[...T.questions,{question_id:T.questions.length+1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}))},[]),x=_.useCallback(T=>{o.questions.length>1&&c(k=>({...k,questions:k.questions.filter((b,C)=>C!==T)}))},[o.questions.length]),y=_.useCallback(()=>{const T={};return o.min_words<10&&(T.min_words="Minimum word count must be at least 10 words"),o.questions.forEach((k,b)=>{k.prompt.trim()||(T[`question_${b}_prompt`]="Question prompt is required")}),T},[o]),v=_.useCallback(async T=>{T.preventDefault();const k=y();if(Object.keys(k).length>0){i("Please fix the validation errors","error");return}d(!0);try{const b={test_name:e,time_limit:300,min_duration:30,max_duration:600,max_attempts:3,min_words:o.min_words,passing_score:50,allowed_time:null,questions:o.questions.map((C,E)=>({question_id:E+1,prompt:C.prompt,expected_duration:C.expected_duration,difficulty_level:C.difficulty_level}))};console.log(" [DEBUG] Calling onTestSaved with data:",b),t?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),t(b),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(b){console.error("Error preparing speaking test:",b),i("Failed to prepare speaking test","error")}finally{d(!1)}},[o,y,i,t,e]);return u||s?l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx(cn,{}),l.jsx("span",{className:"ml-2",children:"Creating speaking test..."})]}):l.jsxs("div",{className:"speaking-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Speaking Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a speaking test where students record audio responses with AI-powered feedback"})]}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Scoring Settings"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count *"}),l.jsx("input",{type:"number",min:"10",max:"1000",value:o.min_words,onChange:T=>f("min_words",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.min_words&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.min_words})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),l.jsx(rt,{type:"button",variant:"outline",onClick:g,children:"Add Question"})]}),o.questions.length>1&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Multiple Questions Detected"}),l.jsx("div",{className:"mt-1 text-sm text-blue-700",children:l.jsxs("p",{children:["You have ",o.questions.length," questions in this test.",l.jsx("strong",{children:" Only one question will be randomly selected"})," and shown to each student. This ensures fair distribution across your question pool."]})})]})]})}),o.questions.map((T,k)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-medium",children:["Question ",k+1]}),o.questions.length>1&&l.jsx(rt,{type:"button",variant:"outline",size:"sm",onClick:()=>x(k),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Prompt *"}),l.jsx("textarea",{value:T.prompt,onChange:b=>h(k,"prompt",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter the question prompt for students"}),a[`question_${k}_prompt`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:a[`question_${k}_prompt`]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Duration (seconds)"}),l.jsx("input",{type:"number",min:"10",max:"600",value:T.expected_duration||"",onChange:b=>h(k,"expected_duration",b.target.value?parseInt(b.target.value):null),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEFR Level"}),l.jsx("select",{value:T.difficulty_level,onChange:b=>h(k,"difficulty_level",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:Oce.map(b=>l.jsxs("option",{value:b.value,children:[b.label," - ",b.description]},b.value))}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the appropriate CEFR level for this question. This will be used by AI to evaluate students appropriately."})]})]})]})]},k))]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[l.jsx(rt,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),l.jsx(rt,{type:"submit",variant:"primary",disabled:u||s,children:u||s?"Creating...":"Create Speaking Test"})]})]})]})},lW=(e,t)=>{const[r,n]=_.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error reading localStorage key "${e}":`,i),t}}),s=_.useCallback(i=>{try{const o=i instanceof Function?i(r):i;n(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]),a=_.useCallback(()=>{try{window.localStorage.removeItem(e),n(t)}catch(i){console.error(`Error removing localStorage key "${e}":`,i)}},[e,t]);return[r,s,a]},Z_=()=>{const e=_.useCallback((c,u=null)=>{try{const d=window.localStorage.getItem(c);return d?JSON.parse(d):u}catch(d){return console.error(`Error reading localStorage key "${c}":`,d),u}},[]),t=_.useCallback((c,u)=>{try{window.localStorage.setItem(c,JSON.stringify(u))}catch(d){console.error(`Error setting localStorage key "${c}":`,d)}},[]),r=_.useCallback(c=>{try{window.localStorage.removeItem(c)}catch(u){console.error(`Error removing localStorage key "${c}":`,u)}},[]),n=_.useCallback(()=>{if(confirm("Are you sure you want to clear all local storage? This cannot be undone."))try{window.localStorage.clear(),window.showNotification?window.showNotification("All local storage cleared!","success"):console.log("All local storage cleared!")}catch(c){console.error("Error clearing localStorage:",c)}},[]),s=_.useCallback(()=>{try{const c={};for(let h=0;h<window.localStorage.length;h++){const g=window.localStorage.key(h);g&&(c[g]=window.localStorage.getItem(g))}const u=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="localStorage_backup.json",f.click(),URL.revokeObjectURL(d),window.showNotification?window.showNotification("Local storage exported!","success"):console.log("Local storage exported!")}catch(c){console.error("Error exporting localStorage data:",c)}},[]),a=_.useCallback(()=>{try{window.localStorage.clear()}catch(c){console.error("Error clearing localStorage:",c)}},[]),i=_.useCallback(()=>{try{const c={};for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d&&(c[d]=window.localStorage.getItem(d))}return c}catch(c){return console.error("Error exporting localStorage data:",c),{}}},[]),o=_.useCallback(c=>{try{Object.entries(c).forEach(([u,d])=>{window.localStorage.setItem(u,d)})}catch(u){console.error("Error importing localStorage data:",u)}},[]);return{getItem:e,setItem:t,removeItem:r,clearAll:a,clearAllLocalStorage:n,exportLocalStorage:s,exportData:i,importData:o}};class al{constructor(t,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=n}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new al(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class Rl{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new Rl(r,al.range(this,t))}}class tr{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+t,s,a,i=r&&r.loc;if(i&&i.start<=i.end){var o=i.lexer.input;s=i.start,a=i.end,s===o.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";var c=o.slice(s,a).replace(/[^]/g,"$&"),u;s>15?u=""+o.slice(s-15,s):u=o.slice(0,s);var d;a+15<o.length?d=o.slice(a,a+15)+"":d=o.slice(a),n+=u+c+d}var f=new Error(n);return f.name="ParseError",f.__proto__=tr.prototype,f.position=s,s!=null&&a!=null&&(f.length=a-s),f.rawMessage=t,f}}tr.prototype.__proto__=Error.prototype;var Ice=function(t,r){return t===void 0?r:t},Lce=/([A-Z])/g,Bce=function(t){return t.replace(Lce,"-$1").toLowerCase()},$ce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},zce=/[&><"']/g;function Uce(e){return String(e).replace(zce,t=>$ce[t])}var cW=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},Wce=function(t){var r=cW(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Hce=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},Gce=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Un={deflt:Ice,escape:Uce,hyphenate:Bce,getBaseElem:cW,isCharacterBox:Wce,protocolFromUrl:Gce},Yb={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function Vce(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class M7{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in Yb)if(Yb.hasOwnProperty(r)){var n=Yb[r];this[r]=t[r]!==void 0?n.processor?n.processor(t[r]):t[r]:Vce(n)}}reportNonstrict(t,r,n){var s=this.strict;if(typeof s=="function"&&(s=s(t,r,n)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new tr("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),n);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,n){var s=this.strict;if(typeof s=="function")try{s=s(t,r,n)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=Un.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var n=typeof this.trust=="function"?this.trust(t):this.trust;return!!n}}class pf{constructor(t,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=n}sup(){return Bu[qce[this.id]]}sub(){return Bu[Kce[this.id]]}fracNum(){return Bu[Yce[this.id]]}fracDen(){return Bu[Xce[this.id]]}cramp(){return Bu[Jce[this.id]]}text(){return Bu[Qce[this.id]]}isTight(){return this.size>=2}}var F7=0,A4=1,Pp=2,Qd=3,Cv=4,gc=5,Gp=6,Lo=7,Bu=[new pf(F7,0,!1),new pf(A4,0,!0),new pf(Pp,1,!1),new pf(Qd,1,!0),new pf(Cv,2,!1),new pf(gc,2,!0),new pf(Gp,3,!1),new pf(Lo,3,!0)],qce=[Cv,gc,Cv,gc,Gp,Lo,Gp,Lo],Kce=[gc,gc,gc,gc,Lo,Lo,Lo,Lo],Yce=[Pp,Qd,Cv,gc,Gp,Lo,Gp,Lo],Xce=[Qd,Qd,gc,gc,Lo,Lo,Lo,Lo],Jce=[A4,A4,Qd,Qd,gc,gc,Lo,Lo],Qce=[F7,A4,Pp,Qd,Pp,Qd,Pp,Qd],Yr={DISPLAY:Bu[F7],TEXT:Bu[Pp],SCRIPT:Bu[Cv],SCRIPTSCRIPT:Bu[Gp]},M8=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Zce(e){for(var t=0;t<M8.length;t++)for(var r=M8[t],n=0;n<r.blocks.length;n++){var s=r.blocks[n];if(e>=s[0]&&e<=s[1])return r.name}return null}var Xb=[];M8.forEach(e=>e.blocks.forEach(t=>Xb.push(...t)));function uW(e){for(var t=0;t<Xb.length;t+=2)if(e>=Xb[t]&&e<=Xb[t+1])return!0;return!1}var tp=80,eue=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},tue=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},rue=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},nue=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},sue=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},aue=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},iue=function(t,r,n){var s=n-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},oue=function(t,r,n){r=1e3*r;var s="";switch(t){case"sqrtMain":s=eue(r,tp);break;case"sqrtSize1":s=tue(r,tp);break;case"sqrtSize2":s=rue(r,tp);break;case"sqrtSize3":s=nue(r,tp);break;case"sqrtSize4":s=sue(r,tp);break;case"sqrtTall":s=iue(r,tp,n)}return s},lue=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},wF={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},cue=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class x2{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}}var Uu={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},nb={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},bF={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function uue(e,t){Uu[e]=t}function D7(e,t,r){if(!Uu[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),s=Uu[t][n];if(!s&&e[0]in bF&&(n=bF[e[0]].charCodeAt(0),s=Uu[t][n]),!s&&r==="text"&&uW(n)&&(s=Uu[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var b5={};function due(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!b5[t]){var r=b5[t]={cssEmPerMu:nb.quad[t]/18};for(var n in nb)nb.hasOwnProperty(n)&&(r[n]=nb[n][t])}return b5[t]}var fue=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],_F=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],SF=function(t,r){return r.size<2?t:fue[t-1][r.size-1]};class zd{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||zd.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=_F[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new zd(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:SF(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:_F[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=SF(zd.BASESIZE,t);return this.size===r&&this.textSize===zd.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==zd.BASESIZE?["sizing","reset-size"+this.size,"size"+zd.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=due(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}zd.BASESIZE=6;var F8={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},hue={ex:!0,em:!0,mu:!0},dW=function(t){return typeof t!="string"&&(t=t.unit),t in F8||t in hue||t==="ex"},Js=function(t,r){var n;if(t.unit in F8)n=F8[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var s;if(r.style.isTight()?s=r.havingStyle(r.style.text()):s=r,t.unit==="ex")n=s.fontMetrics().xHeight;else if(t.unit==="em")n=s.fontMetrics().quad;else throw new tr("Invalid unit: '"+t.unit+"'");s!==r&&(n*=s.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*n,r.maxSize)},pr=function(t){return+t.toFixed(4)+"em"},Uf=function(t){return t.filter(r=>r).join(" ")},fW=function(t,r,n){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var s=r.getColor();s&&(this.style.color=s)}},hW=function(t){var r=document.createElement(t);r.className=Uf(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&r.setAttribute(s,this.attributes[s]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},mue=/[\s"'>/=\x00-\x1f]/,mW=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+Un.escape(Uf(this.classes))+'"');var n="";for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Un.hyphenate(s)+":"+this.style[s]+";");n&&(r+=' style="'+Un.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(mue.test(a))throw new tr("Invalid attribute name '"+a+"'");r+=" "+a+'="'+Un.escape(this.attributes[a])+'"'}r+=">";for(var i=0;i<this.children.length;i++)r+=this.children[i].toMarkup();return r+="</"+t+">",r};class y2{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,fW.call(this,t,n,s),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return hW.call(this,"span")}toMarkup(){return mW.call(this,"span")}}class O7{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,fW.call(this,r,s),this.children=n||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return hW.call(this,"a")}toMarkup(){return mW.call(this,"a")}}class gue{constructor(t,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=n}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+Un.escape(this.src)+'"'+(' alt="'+Un.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Un.hyphenate(n)+":"+this.style[n]+";");return r&&(t+=' style="'+Un.escape(r)+'"'),t+="'/>",t}}var pue={:"",:"",:"",:""};class _c{constructor(t,r,n,s,a,i,o,c){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=n||0,this.italic=s||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=c||{},this.maxFontSize=0;var u=Zce(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=pue[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=pr(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Uf(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=Un.escape(Uf(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Un.hyphenate(s)+":"+this.style[s]+";");n&&(t=!0,r+=' style="'+Un.escape(n)+'"');var a=Un.escape(this.text);return t?(r+=">",r+=a,r+="</span>",r):a}}class c0{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Un.escape(this.attributes[r])+'"');t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</svg>",t}}class Wf{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",wF[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Un.escape(this.alternate)+'"/>':'<path d="'+Un.escape(wF[this.pathName])+'"/>'}}class D8{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Un.escape(this.attributes[r])+'"');return t+="/>",t}}function kF(e){if(e instanceof _c)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function xue(e){if(e instanceof y2)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var yue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},vue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Cs={math:{},text:{}};function Q(e,t,r,n,s,a){Cs[e][s]={font:t,group:r,replace:n},a&&n&&(Cs[e][n]=Cs[e][s])}var ie="math",qt="text",fe="main",Re="ams",Gs="accent-token",Ar="bin",Go="close",w1="inner",Kr="mathord",Wa="op-token",Ul="open",e3="punct",Le="rel",b0="spacing",Xe="textord";Q(ie,fe,Le,"","\\equiv",!0);Q(ie,fe,Le,"","\\prec",!0);Q(ie,fe,Le,"","\\succ",!0);Q(ie,fe,Le,"","\\sim",!0);Q(ie,fe,Le,"","\\perp");Q(ie,fe,Le,"","\\preceq",!0);Q(ie,fe,Le,"","\\succeq",!0);Q(ie,fe,Le,"","\\simeq",!0);Q(ie,fe,Le,"","\\mid",!0);Q(ie,fe,Le,"","\\ll",!0);Q(ie,fe,Le,"","\\gg",!0);Q(ie,fe,Le,"","\\asymp",!0);Q(ie,fe,Le,"","\\parallel");Q(ie,fe,Le,"","\\bowtie",!0);Q(ie,fe,Le,"","\\smile",!0);Q(ie,fe,Le,"","\\sqsubseteq",!0);Q(ie,fe,Le,"","\\sqsupseteq",!0);Q(ie,fe,Le,"","\\doteq",!0);Q(ie,fe,Le,"","\\frown",!0);Q(ie,fe,Le,"","\\ni",!0);Q(ie,fe,Le,"","\\propto",!0);Q(ie,fe,Le,"","\\vdash",!0);Q(ie,fe,Le,"","\\dashv",!0);Q(ie,fe,Le,"","\\owns");Q(ie,fe,e3,".","\\ldotp");Q(ie,fe,e3,"","\\cdotp");Q(ie,fe,Xe,"#","\\#");Q(qt,fe,Xe,"#","\\#");Q(ie,fe,Xe,"&","\\&");Q(qt,fe,Xe,"&","\\&");Q(ie,fe,Xe,"","\\aleph",!0);Q(ie,fe,Xe,"","\\forall",!0);Q(ie,fe,Xe,"","\\hbar",!0);Q(ie,fe,Xe,"","\\exists",!0);Q(ie,fe,Xe,"","\\nabla",!0);Q(ie,fe,Xe,"","\\flat",!0);Q(ie,fe,Xe,"","\\ell",!0);Q(ie,fe,Xe,"","\\natural",!0);Q(ie,fe,Xe,"","\\clubsuit",!0);Q(ie,fe,Xe,"","\\wp",!0);Q(ie,fe,Xe,"","\\sharp",!0);Q(ie,fe,Xe,"","\\diamondsuit",!0);Q(ie,fe,Xe,"","\\Re",!0);Q(ie,fe,Xe,"","\\heartsuit",!0);Q(ie,fe,Xe,"","\\Im",!0);Q(ie,fe,Xe,"","\\spadesuit",!0);Q(ie,fe,Xe,"","\\S",!0);Q(qt,fe,Xe,"","\\S");Q(ie,fe,Xe,"","\\P",!0);Q(qt,fe,Xe,"","\\P");Q(ie,fe,Xe,"","\\dag");Q(qt,fe,Xe,"","\\dag");Q(qt,fe,Xe,"","\\textdagger");Q(ie,fe,Xe,"","\\ddag");Q(qt,fe,Xe,"","\\ddag");Q(qt,fe,Xe,"","\\textdaggerdbl");Q(ie,fe,Go,"","\\rmoustache",!0);Q(ie,fe,Ul,"","\\lmoustache",!0);Q(ie,fe,Go,"","\\rgroup",!0);Q(ie,fe,Ul,"","\\lgroup",!0);Q(ie,fe,Ar,"","\\mp",!0);Q(ie,fe,Ar,"","\\ominus",!0);Q(ie,fe,Ar,"","\\uplus",!0);Q(ie,fe,Ar,"","\\sqcap",!0);Q(ie,fe,Ar,"","\\ast");Q(ie,fe,Ar,"","\\sqcup",!0);Q(ie,fe,Ar,"","\\bigcirc",!0);Q(ie,fe,Ar,"","\\bullet",!0);Q(ie,fe,Ar,"","\\ddagger");Q(ie,fe,Ar,"","\\wr",!0);Q(ie,fe,Ar,"","\\amalg");Q(ie,fe,Ar,"&","\\And");Q(ie,fe,Le,"","\\longleftarrow",!0);Q(ie,fe,Le,"","\\Leftarrow",!0);Q(ie,fe,Le,"","\\Longleftarrow",!0);Q(ie,fe,Le,"","\\longrightarrow",!0);Q(ie,fe,Le,"","\\Rightarrow",!0);Q(ie,fe,Le,"","\\Longrightarrow",!0);Q(ie,fe,Le,"","\\leftrightarrow",!0);Q(ie,fe,Le,"","\\longleftrightarrow",!0);Q(ie,fe,Le,"","\\Leftrightarrow",!0);Q(ie,fe,Le,"","\\Longleftrightarrow",!0);Q(ie,fe,Le,"","\\mapsto",!0);Q(ie,fe,Le,"","\\longmapsto",!0);Q(ie,fe,Le,"","\\nearrow",!0);Q(ie,fe,Le,"","\\hookleftarrow",!0);Q(ie,fe,Le,"","\\hookrightarrow",!0);Q(ie,fe,Le,"","\\searrow",!0);Q(ie,fe,Le,"","\\leftharpoonup",!0);Q(ie,fe,Le,"","\\rightharpoonup",!0);Q(ie,fe,Le,"","\\swarrow",!0);Q(ie,fe,Le,"","\\leftharpoondown",!0);Q(ie,fe,Le,"","\\rightharpoondown",!0);Q(ie,fe,Le,"","\\nwarrow",!0);Q(ie,fe,Le,"","\\rightleftharpoons",!0);Q(ie,Re,Le,"","\\nless",!0);Q(ie,Re,Le,"","\\@nleqslant");Q(ie,Re,Le,"","\\@nleqq");Q(ie,Re,Le,"","\\lneq",!0);Q(ie,Re,Le,"","\\lneqq",!0);Q(ie,Re,Le,"","\\@lvertneqq");Q(ie,Re,Le,"","\\lnsim",!0);Q(ie,Re,Le,"","\\lnapprox",!0);Q(ie,Re,Le,"","\\nprec",!0);Q(ie,Re,Le,"","\\npreceq",!0);Q(ie,Re,Le,"","\\precnsim",!0);Q(ie,Re,Le,"","\\precnapprox",!0);Q(ie,Re,Le,"","\\nsim",!0);Q(ie,Re,Le,"","\\@nshortmid");Q(ie,Re,Le,"","\\nmid",!0);Q(ie,Re,Le,"","\\nvdash",!0);Q(ie,Re,Le,"","\\nvDash",!0);Q(ie,Re,Le,"","\\ntriangleleft");Q(ie,Re,Le,"","\\ntrianglelefteq",!0);Q(ie,Re,Le,"","\\subsetneq",!0);Q(ie,Re,Le,"","\\@varsubsetneq");Q(ie,Re,Le,"","\\subsetneqq",!0);Q(ie,Re,Le,"","\\@varsubsetneqq");Q(ie,Re,Le,"","\\ngtr",!0);Q(ie,Re,Le,"","\\@ngeqslant");Q(ie,Re,Le,"","\\@ngeqq");Q(ie,Re,Le,"","\\gneq",!0);Q(ie,Re,Le,"","\\gneqq",!0);Q(ie,Re,Le,"","\\@gvertneqq");Q(ie,Re,Le,"","\\gnsim",!0);Q(ie,Re,Le,"","\\gnapprox",!0);Q(ie,Re,Le,"","\\nsucc",!0);Q(ie,Re,Le,"","\\nsucceq",!0);Q(ie,Re,Le,"","\\succnsim",!0);Q(ie,Re,Le,"","\\succnapprox",!0);Q(ie,Re,Le,"","\\ncong",!0);Q(ie,Re,Le,"","\\@nshortparallel");Q(ie,Re,Le,"","\\nparallel",!0);Q(ie,Re,Le,"","\\nVDash",!0);Q(ie,Re,Le,"","\\ntriangleright");Q(ie,Re,Le,"","\\ntrianglerighteq",!0);Q(ie,Re,Le,"","\\@nsupseteqq");Q(ie,Re,Le,"","\\supsetneq",!0);Q(ie,Re,Le,"","\\@varsupsetneq");Q(ie,Re,Le,"","\\supsetneqq",!0);Q(ie,Re,Le,"","\\@varsupsetneqq");Q(ie,Re,Le,"","\\nVdash",!0);Q(ie,Re,Le,"","\\precneqq",!0);Q(ie,Re,Le,"","\\succneqq",!0);Q(ie,Re,Le,"","\\@nsubseteqq");Q(ie,Re,Ar,"","\\unlhd");Q(ie,Re,Ar,"","\\unrhd");Q(ie,Re,Le,"","\\nleftarrow",!0);Q(ie,Re,Le,"","\\nrightarrow",!0);Q(ie,Re,Le,"","\\nLeftarrow",!0);Q(ie,Re,Le,"","\\nRightarrow",!0);Q(ie,Re,Le,"","\\nleftrightarrow",!0);Q(ie,Re,Le,"","\\nLeftrightarrow",!0);Q(ie,Re,Le,"","\\vartriangle");Q(ie,Re,Xe,"","\\hslash");Q(ie,Re,Xe,"","\\triangledown");Q(ie,Re,Xe,"","\\lozenge");Q(ie,Re,Xe,"","\\circledS");Q(ie,Re,Xe,"","\\circledR");Q(qt,Re,Xe,"","\\circledR");Q(ie,Re,Xe,"","\\measuredangle",!0);Q(ie,Re,Xe,"","\\nexists");Q(ie,Re,Xe,"","\\mho");Q(ie,Re,Xe,"","\\Finv",!0);Q(ie,Re,Xe,"","\\Game",!0);Q(ie,Re,Xe,"","\\backprime");Q(ie,Re,Xe,"","\\blacktriangle");Q(ie,Re,Xe,"","\\blacktriangledown");Q(ie,Re,Xe,"","\\blacksquare");Q(ie,Re,Xe,"","\\blacklozenge");Q(ie,Re,Xe,"","\\bigstar");Q(ie,Re,Xe,"","\\sphericalangle",!0);Q(ie,Re,Xe,"","\\complement",!0);Q(ie,Re,Xe,"","\\eth",!0);Q(qt,fe,Xe,"","");Q(ie,Re,Xe,"","\\diagup");Q(ie,Re,Xe,"","\\diagdown");Q(ie,Re,Xe,"","\\square");Q(ie,Re,Xe,"","\\Box");Q(ie,Re,Xe,"","\\Diamond");Q(ie,Re,Xe,"","\\yen",!0);Q(qt,Re,Xe,"","\\yen",!0);Q(ie,Re,Xe,"","\\checkmark",!0);Q(qt,Re,Xe,"","\\checkmark");Q(ie,Re,Xe,"","\\beth",!0);Q(ie,Re,Xe,"","\\daleth",!0);Q(ie,Re,Xe,"","\\gimel",!0);Q(ie,Re,Xe,"","\\digamma",!0);Q(ie,Re,Xe,"","\\varkappa");Q(ie,Re,Ul,"","\\@ulcorner",!0);Q(ie,Re,Go,"","\\@urcorner",!0);Q(ie,Re,Ul,"","\\@llcorner",!0);Q(ie,Re,Go,"","\\@lrcorner",!0);Q(ie,Re,Le,"","\\leqq",!0);Q(ie,Re,Le,"","\\leqslant",!0);Q(ie,Re,Le,"","\\eqslantless",!0);Q(ie,Re,Le,"","\\lesssim",!0);Q(ie,Re,Le,"","\\lessapprox",!0);Q(ie,Re,Le,"","\\approxeq",!0);Q(ie,Re,Ar,"","\\lessdot");Q(ie,Re,Le,"","\\lll",!0);Q(ie,Re,Le,"","\\lessgtr",!0);Q(ie,Re,Le,"","\\lesseqgtr",!0);Q(ie,Re,Le,"","\\lesseqqgtr",!0);Q(ie,Re,Le,"","\\doteqdot");Q(ie,Re,Le,"","\\risingdotseq",!0);Q(ie,Re,Le,"","\\fallingdotseq",!0);Q(ie,Re,Le,"","\\backsim",!0);Q(ie,Re,Le,"","\\backsimeq",!0);Q(ie,Re,Le,"","\\subseteqq",!0);Q(ie,Re,Le,"","\\Subset",!0);Q(ie,Re,Le,"","\\sqsubset",!0);Q(ie,Re,Le,"","\\preccurlyeq",!0);Q(ie,Re,Le,"","\\curlyeqprec",!0);Q(ie,Re,Le,"","\\precsim",!0);Q(ie,Re,Le,"","\\precapprox",!0);Q(ie,Re,Le,"","\\vartriangleleft");Q(ie,Re,Le,"","\\trianglelefteq");Q(ie,Re,Le,"","\\vDash",!0);Q(ie,Re,Le,"","\\Vvdash",!0);Q(ie,Re,Le,"","\\smallsmile");Q(ie,Re,Le,"","\\smallfrown");Q(ie,Re,Le,"","\\bumpeq",!0);Q(ie,Re,Le,"","\\Bumpeq",!0);Q(ie,Re,Le,"","\\geqq",!0);Q(ie,Re,Le,"","\\geqslant",!0);Q(ie,Re,Le,"","\\eqslantgtr",!0);Q(ie,Re,Le,"","\\gtrsim",!0);Q(ie,Re,Le,"","\\gtrapprox",!0);Q(ie,Re,Ar,"","\\gtrdot");Q(ie,Re,Le,"","\\ggg",!0);Q(ie,Re,Le,"","\\gtrless",!0);Q(ie,Re,Le,"","\\gtreqless",!0);Q(ie,Re,Le,"","\\gtreqqless",!0);Q(ie,Re,Le,"","\\eqcirc",!0);Q(ie,Re,Le,"","\\circeq",!0);Q(ie,Re,Le,"","\\triangleq",!0);Q(ie,Re,Le,"","\\thicksim");Q(ie,Re,Le,"","\\thickapprox");Q(ie,Re,Le,"","\\supseteqq",!0);Q(ie,Re,Le,"","\\Supset",!0);Q(ie,Re,Le,"","\\sqsupset",!0);Q(ie,Re,Le,"","\\succcurlyeq",!0);Q(ie,Re,Le,"","\\curlyeqsucc",!0);Q(ie,Re,Le,"","\\succsim",!0);Q(ie,Re,Le,"","\\succapprox",!0);Q(ie,Re,Le,"","\\vartriangleright");Q(ie,Re,Le,"","\\trianglerighteq");Q(ie,Re,Le,"","\\Vdash",!0);Q(ie,Re,Le,"","\\shortmid");Q(ie,Re,Le,"","\\shortparallel");Q(ie,Re,Le,"","\\between",!0);Q(ie,Re,Le,"","\\pitchfork",!0);Q(ie,Re,Le,"","\\varpropto");Q(ie,Re,Le,"","\\blacktriangleleft");Q(ie,Re,Le,"","\\therefore",!0);Q(ie,Re,Le,"","\\backepsilon");Q(ie,Re,Le,"","\\blacktriangleright");Q(ie,Re,Le,"","\\because",!0);Q(ie,Re,Le,"","\\llless");Q(ie,Re,Le,"","\\gggtr");Q(ie,Re,Ar,"","\\lhd");Q(ie,Re,Ar,"","\\rhd");Q(ie,Re,Le,"","\\eqsim",!0);Q(ie,fe,Le,"","\\Join");Q(ie,Re,Le,"","\\Doteq",!0);Q(ie,Re,Ar,"","\\dotplus",!0);Q(ie,Re,Ar,"","\\smallsetminus");Q(ie,Re,Ar,"","\\Cap",!0);Q(ie,Re,Ar,"","\\Cup",!0);Q(ie,Re,Ar,"","\\doublebarwedge",!0);Q(ie,Re,Ar,"","\\boxminus",!0);Q(ie,Re,Ar,"","\\boxplus",!0);Q(ie,Re,Ar,"","\\divideontimes",!0);Q(ie,Re,Ar,"","\\ltimes",!0);Q(ie,Re,Ar,"","\\rtimes",!0);Q(ie,Re,Ar,"","\\leftthreetimes",!0);Q(ie,Re,Ar,"","\\rightthreetimes",!0);Q(ie,Re,Ar,"","\\curlywedge",!0);Q(ie,Re,Ar,"","\\curlyvee",!0);Q(ie,Re,Ar,"","\\circleddash",!0);Q(ie,Re,Ar,"","\\circledast",!0);Q(ie,Re,Ar,"","\\centerdot");Q(ie,Re,Ar,"","\\intercal",!0);Q(ie,Re,Ar,"","\\doublecap");Q(ie,Re,Ar,"","\\doublecup");Q(ie,Re,Ar,"","\\boxtimes",!0);Q(ie,Re,Le,"","\\dashrightarrow",!0);Q(ie,Re,Le,"","\\dashleftarrow",!0);Q(ie,Re,Le,"","\\leftleftarrows",!0);Q(ie,Re,Le,"","\\leftrightarrows",!0);Q(ie,Re,Le,"","\\Lleftarrow",!0);Q(ie,Re,Le,"","\\twoheadleftarrow",!0);Q(ie,Re,Le,"","\\leftarrowtail",!0);Q(ie,Re,Le,"","\\looparrowleft",!0);Q(ie,Re,Le,"","\\leftrightharpoons",!0);Q(ie,Re,Le,"","\\curvearrowleft",!0);Q(ie,Re,Le,"","\\circlearrowleft",!0);Q(ie,Re,Le,"","\\Lsh",!0);Q(ie,Re,Le,"","\\upuparrows",!0);Q(ie,Re,Le,"","\\upharpoonleft",!0);Q(ie,Re,Le,"","\\downharpoonleft",!0);Q(ie,fe,Le,"","\\origof",!0);Q(ie,fe,Le,"","\\imageof",!0);Q(ie,Re,Le,"","\\multimap",!0);Q(ie,Re,Le,"","\\leftrightsquigarrow",!0);Q(ie,Re,Le,"","\\rightrightarrows",!0);Q(ie,Re,Le,"","\\rightleftarrows",!0);Q(ie,Re,Le,"","\\twoheadrightarrow",!0);Q(ie,Re,Le,"","\\rightarrowtail",!0);Q(ie,Re,Le,"","\\looparrowright",!0);Q(ie,Re,Le,"","\\curvearrowright",!0);Q(ie,Re,Le,"","\\circlearrowright",!0);Q(ie,Re,Le,"","\\Rsh",!0);Q(ie,Re,Le,"","\\downdownarrows",!0);Q(ie,Re,Le,"","\\upharpoonright",!0);Q(ie,Re,Le,"","\\downharpoonright",!0);Q(ie,Re,Le,"","\\rightsquigarrow",!0);Q(ie,Re,Le,"","\\leadsto");Q(ie,Re,Le,"","\\Rrightarrow",!0);Q(ie,Re,Le,"","\\restriction");Q(ie,fe,Xe,"","`");Q(ie,fe,Xe,"$","\\$");Q(qt,fe,Xe,"$","\\$");Q(qt,fe,Xe,"$","\\textdollar");Q(ie,fe,Xe,"%","\\%");Q(qt,fe,Xe,"%","\\%");Q(ie,fe,Xe,"_","\\_");Q(qt,fe,Xe,"_","\\_");Q(qt,fe,Xe,"_","\\textunderscore");Q(ie,fe,Xe,"","\\angle",!0);Q(ie,fe,Xe,"","\\infty",!0);Q(ie,fe,Xe,"","\\prime");Q(ie,fe,Xe,"","\\triangle");Q(ie,fe,Xe,"","\\Gamma",!0);Q(ie,fe,Xe,"","\\Delta",!0);Q(ie,fe,Xe,"","\\Theta",!0);Q(ie,fe,Xe,"","\\Lambda",!0);Q(ie,fe,Xe,"","\\Xi",!0);Q(ie,fe,Xe,"","\\Pi",!0);Q(ie,fe,Xe,"","\\Sigma",!0);Q(ie,fe,Xe,"","\\Upsilon",!0);Q(ie,fe,Xe,"","\\Phi",!0);Q(ie,fe,Xe,"","\\Psi",!0);Q(ie,fe,Xe,"","\\Omega",!0);Q(ie,fe,Xe,"A","");Q(ie,fe,Xe,"B","");Q(ie,fe,Xe,"E","");Q(ie,fe,Xe,"Z","");Q(ie,fe,Xe,"H","");Q(ie,fe,Xe,"I","");Q(ie,fe,Xe,"K","");Q(ie,fe,Xe,"M","");Q(ie,fe,Xe,"N","");Q(ie,fe,Xe,"O","");Q(ie,fe,Xe,"P","");Q(ie,fe,Xe,"T","");Q(ie,fe,Xe,"X","");Q(ie,fe,Xe,"","\\neg",!0);Q(ie,fe,Xe,"","\\lnot");Q(ie,fe,Xe,"","\\top");Q(ie,fe,Xe,"","\\bot");Q(ie,fe,Xe,"","\\emptyset");Q(ie,Re,Xe,"","\\varnothing");Q(ie,fe,Kr,"","\\alpha",!0);Q(ie,fe,Kr,"","\\beta",!0);Q(ie,fe,Kr,"","\\gamma",!0);Q(ie,fe,Kr,"","\\delta",!0);Q(ie,fe,Kr,"","\\epsilon",!0);Q(ie,fe,Kr,"","\\zeta",!0);Q(ie,fe,Kr,"","\\eta",!0);Q(ie,fe,Kr,"","\\theta",!0);Q(ie,fe,Kr,"","\\iota",!0);Q(ie,fe,Kr,"","\\kappa",!0);Q(ie,fe,Kr,"","\\lambda",!0);Q(ie,fe,Kr,"","\\mu",!0);Q(ie,fe,Kr,"","\\nu",!0);Q(ie,fe,Kr,"","\\xi",!0);Q(ie,fe,Kr,"","\\omicron",!0);Q(ie,fe,Kr,"","\\pi",!0);Q(ie,fe,Kr,"","\\rho",!0);Q(ie,fe,Kr,"","\\sigma",!0);Q(ie,fe,Kr,"","\\tau",!0);Q(ie,fe,Kr,"","\\upsilon",!0);Q(ie,fe,Kr,"","\\phi",!0);Q(ie,fe,Kr,"","\\chi",!0);Q(ie,fe,Kr,"","\\psi",!0);Q(ie,fe,Kr,"","\\omega",!0);Q(ie,fe,Kr,"","\\varepsilon",!0);Q(ie,fe,Kr,"","\\vartheta",!0);Q(ie,fe,Kr,"","\\varpi",!0);Q(ie,fe,Kr,"","\\varrho",!0);Q(ie,fe,Kr,"","\\varsigma",!0);Q(ie,fe,Kr,"","\\varphi",!0);Q(ie,fe,Ar,"","*",!0);Q(ie,fe,Ar,"+","+");Q(ie,fe,Ar,"","-",!0);Q(ie,fe,Ar,"","\\cdot",!0);Q(ie,fe,Ar,"","\\circ",!0);Q(ie,fe,Ar,"","\\div",!0);Q(ie,fe,Ar,"","\\pm",!0);Q(ie,fe,Ar,"","\\times",!0);Q(ie,fe,Ar,"","\\cap",!0);Q(ie,fe,Ar,"","\\cup",!0);Q(ie,fe,Ar,"","\\setminus",!0);Q(ie,fe,Ar,"","\\land");Q(ie,fe,Ar,"","\\lor");Q(ie,fe,Ar,"","\\wedge",!0);Q(ie,fe,Ar,"","\\vee",!0);Q(ie,fe,Xe,"","\\surd");Q(ie,fe,Ul,"","\\langle",!0);Q(ie,fe,Ul,"","\\lvert");Q(ie,fe,Ul,"","\\lVert");Q(ie,fe,Go,"?","?");Q(ie,fe,Go,"!","!");Q(ie,fe,Go,"","\\rangle",!0);Q(ie,fe,Go,"","\\rvert");Q(ie,fe,Go,"","\\rVert");Q(ie,fe,Le,"=","=");Q(ie,fe,Le,":",":");Q(ie,fe,Le,"","\\approx",!0);Q(ie,fe,Le,"","\\cong",!0);Q(ie,fe,Le,"","\\ge");Q(ie,fe,Le,"","\\geq",!0);Q(ie,fe,Le,"","\\gets");Q(ie,fe,Le,">","\\gt",!0);Q(ie,fe,Le,"","\\in",!0);Q(ie,fe,Le,"","\\@not");Q(ie,fe,Le,"","\\subset",!0);Q(ie,fe,Le,"","\\supset",!0);Q(ie,fe,Le,"","\\subseteq",!0);Q(ie,fe,Le,"","\\supseteq",!0);Q(ie,Re,Le,"","\\nsubseteq",!0);Q(ie,Re,Le,"","\\nsupseteq",!0);Q(ie,fe,Le,"","\\models");Q(ie,fe,Le,"","\\leftarrow",!0);Q(ie,fe,Le,"","\\le");Q(ie,fe,Le,"","\\leq",!0);Q(ie,fe,Le,"<","\\lt",!0);Q(ie,fe,Le,"","\\rightarrow",!0);Q(ie,fe,Le,"","\\to");Q(ie,Re,Le,"","\\ngeq",!0);Q(ie,Re,Le,"","\\nleq",!0);Q(ie,fe,b0,"","\\ ");Q(ie,fe,b0,"","\\space");Q(ie,fe,b0,"","\\nobreakspace");Q(qt,fe,b0,"","\\ ");Q(qt,fe,b0,""," ");Q(qt,fe,b0,"","\\space");Q(qt,fe,b0,"","\\nobreakspace");Q(ie,fe,b0,null,"\\nobreak");Q(ie,fe,b0,null,"\\allowbreak");Q(ie,fe,e3,",",",");Q(ie,fe,e3,";",";");Q(ie,Re,Ar,"","\\barwedge",!0);Q(ie,Re,Ar,"","\\veebar",!0);Q(ie,fe,Ar,"","\\odot",!0);Q(ie,fe,Ar,"","\\oplus",!0);Q(ie,fe,Ar,"","\\otimes",!0);Q(ie,fe,Xe,"","\\partial",!0);Q(ie,fe,Ar,"","\\oslash",!0);Q(ie,Re,Ar,"","\\circledcirc",!0);Q(ie,Re,Ar,"","\\boxdot",!0);Q(ie,fe,Ar,"","\\bigtriangleup");Q(ie,fe,Ar,"","\\bigtriangledown");Q(ie,fe,Ar,"","\\dagger");Q(ie,fe,Ar,"","\\diamond");Q(ie,fe,Ar,"","\\star");Q(ie,fe,Ar,"","\\triangleleft");Q(ie,fe,Ar,"","\\triangleright");Q(ie,fe,Ul,"{","\\{");Q(qt,fe,Xe,"{","\\{");Q(qt,fe,Xe,"{","\\textbraceleft");Q(ie,fe,Go,"}","\\}");Q(qt,fe,Xe,"}","\\}");Q(qt,fe,Xe,"}","\\textbraceright");Q(ie,fe,Ul,"{","\\lbrace");Q(ie,fe,Go,"}","\\rbrace");Q(ie,fe,Ul,"[","\\lbrack",!0);Q(qt,fe,Xe,"[","\\lbrack",!0);Q(ie,fe,Go,"]","\\rbrack",!0);Q(qt,fe,Xe,"]","\\rbrack",!0);Q(ie,fe,Ul,"(","\\lparen",!0);Q(ie,fe,Go,")","\\rparen",!0);Q(qt,fe,Xe,"<","\\textless",!0);Q(qt,fe,Xe,">","\\textgreater",!0);Q(ie,fe,Ul,"","\\lfloor",!0);Q(ie,fe,Go,"","\\rfloor",!0);Q(ie,fe,Ul,"","\\lceil",!0);Q(ie,fe,Go,"","\\rceil",!0);Q(ie,fe,Xe,"\\","\\backslash");Q(ie,fe,Xe,"","|");Q(ie,fe,Xe,"","\\vert");Q(qt,fe,Xe,"|","\\textbar",!0);Q(ie,fe,Xe,"","\\|");Q(ie,fe,Xe,"","\\Vert");Q(qt,fe,Xe,"","\\textbardbl");Q(qt,fe,Xe,"~","\\textasciitilde");Q(qt,fe,Xe,"\\","\\textbackslash");Q(qt,fe,Xe,"^","\\textasciicircum");Q(ie,fe,Le,"","\\uparrow",!0);Q(ie,fe,Le,"","\\Uparrow",!0);Q(ie,fe,Le,"","\\downarrow",!0);Q(ie,fe,Le,"","\\Downarrow",!0);Q(ie,fe,Le,"","\\updownarrow",!0);Q(ie,fe,Le,"","\\Updownarrow",!0);Q(ie,fe,Wa,"","\\coprod");Q(ie,fe,Wa,"","\\bigvee");Q(ie,fe,Wa,"","\\bigwedge");Q(ie,fe,Wa,"","\\biguplus");Q(ie,fe,Wa,"","\\bigcap");Q(ie,fe,Wa,"","\\bigcup");Q(ie,fe,Wa,"","\\int");Q(ie,fe,Wa,"","\\intop");Q(ie,fe,Wa,"","\\iint");Q(ie,fe,Wa,"","\\iiint");Q(ie,fe,Wa,"","\\prod");Q(ie,fe,Wa,"","\\sum");Q(ie,fe,Wa,"","\\bigotimes");Q(ie,fe,Wa,"","\\bigoplus");Q(ie,fe,Wa,"","\\bigodot");Q(ie,fe,Wa,"","\\oint");Q(ie,fe,Wa,"","\\oiint");Q(ie,fe,Wa,"","\\oiiint");Q(ie,fe,Wa,"","\\bigsqcup");Q(ie,fe,Wa,"","\\smallint");Q(qt,fe,w1,"","\\textellipsis");Q(ie,fe,w1,"","\\mathellipsis");Q(qt,fe,w1,"","\\ldots",!0);Q(ie,fe,w1,"","\\ldots",!0);Q(ie,fe,w1,"","\\@cdots",!0);Q(ie,fe,w1,"","\\ddots",!0);Q(ie,fe,Xe,"","\\varvdots");Q(qt,fe,Xe,"","\\varvdots");Q(ie,fe,Gs,"","\\acute");Q(ie,fe,Gs,"","\\grave");Q(ie,fe,Gs,"","\\ddot");Q(ie,fe,Gs,"~","\\tilde");Q(ie,fe,Gs,"","\\bar");Q(ie,fe,Gs,"","\\breve");Q(ie,fe,Gs,"","\\check");Q(ie,fe,Gs,"^","\\hat");Q(ie,fe,Gs,"","\\vec");Q(ie,fe,Gs,"","\\dot");Q(ie,fe,Gs,"","\\mathring");Q(ie,fe,Kr,"","\\@imath");Q(ie,fe,Kr,"","\\@jmath");Q(ie,fe,Xe,"","");Q(ie,fe,Xe,"","");Q(qt,fe,Xe,"","\\i",!0);Q(qt,fe,Xe,"","\\j",!0);Q(qt,fe,Xe,"","\\ss",!0);Q(qt,fe,Xe,"","\\ae",!0);Q(qt,fe,Xe,"","\\oe",!0);Q(qt,fe,Xe,"","\\o",!0);Q(qt,fe,Xe,"","\\AE",!0);Q(qt,fe,Xe,"","\\OE",!0);Q(qt,fe,Xe,"","\\O",!0);Q(qt,fe,Gs,"","\\'");Q(qt,fe,Gs,"","\\`");Q(qt,fe,Gs,"","\\^");Q(qt,fe,Gs,"","\\~");Q(qt,fe,Gs,"","\\=");Q(qt,fe,Gs,"","\\u");Q(qt,fe,Gs,"","\\.");Q(qt,fe,Gs,"","\\c");Q(qt,fe,Gs,"","\\r");Q(qt,fe,Gs,"","\\v");Q(qt,fe,Gs,"",'\\"');Q(qt,fe,Gs,"","\\H");Q(qt,fe,Gs,"","\\textcircled");var gW={"--":!0,"---":!0,"``":!0,"''":!0};Q(qt,fe,Xe,"","--",!0);Q(qt,fe,Xe,"","\\textendash");Q(qt,fe,Xe,"","---",!0);Q(qt,fe,Xe,"","\\textemdash");Q(qt,fe,Xe,"","`",!0);Q(qt,fe,Xe,"","\\textquoteleft");Q(qt,fe,Xe,"","'",!0);Q(qt,fe,Xe,"","\\textquoteright");Q(qt,fe,Xe,"","``",!0);Q(qt,fe,Xe,"","\\textquotedblleft");Q(qt,fe,Xe,"","''",!0);Q(qt,fe,Xe,"","\\textquotedblright");Q(ie,fe,Xe,"","\\degree",!0);Q(qt,fe,Xe,"","\\degree");Q(qt,fe,Xe,"","\\textdegree",!0);Q(ie,fe,Xe,"","\\pounds");Q(ie,fe,Xe,"","\\mathsterling",!0);Q(qt,fe,Xe,"","\\pounds");Q(qt,fe,Xe,"","\\textsterling",!0);Q(ie,Re,Xe,"","\\maltese");Q(qt,Re,Xe,"","\\maltese");var TF='0123456789/@."';for(var _5=0;_5<TF.length;_5++){var CF=TF.charAt(_5);Q(ie,fe,Xe,CF,CF)}var NF='0123456789!@*()-=+";:?/.,';for(var S5=0;S5<NF.length;S5++){var EF=NF.charAt(S5);Q(qt,fe,Xe,EF,EF)}var j4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var k5=0;k5<j4.length;k5++){var sb=j4.charAt(k5);Q(ie,fe,Kr,sb,sb),Q(qt,fe,Xe,sb,sb)}Q(ie,Re,Xe,"C","");Q(qt,Re,Xe,"C","");Q(ie,Re,Xe,"H","");Q(qt,Re,Xe,"H","");Q(ie,Re,Xe,"N","");Q(qt,Re,Xe,"N","");Q(ie,Re,Xe,"P","");Q(qt,Re,Xe,"P","");Q(ie,Re,Xe,"Q","");Q(qt,Re,Xe,"Q","");Q(ie,Re,Xe,"R","");Q(qt,Re,Xe,"R","");Q(ie,Re,Xe,"Z","");Q(qt,Re,Xe,"Z","");Q(ie,fe,Kr,"h","");Q(qt,fe,Kr,"h","");var tn="";for(var Fo=0;Fo<j4.length;Fo++){var ia=j4.charAt(Fo);tn=String.fromCharCode(55349,56320+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56372+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56424+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56580+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56684+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56736+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56788+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56840+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56944+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),Fo<26&&(tn=String.fromCharCode(55349,56632+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn),tn=String.fromCharCode(55349,56476+Fo),Q(ie,fe,Kr,ia,tn),Q(qt,fe,Xe,ia,tn))}tn="";Q(ie,fe,Kr,"k",tn);Q(qt,fe,Xe,"k",tn);for(var Wh=0;Wh<10;Wh++){var xf=Wh.toString();tn=String.fromCharCode(55349,57294+Wh),Q(ie,fe,Kr,xf,tn),Q(qt,fe,Xe,xf,tn),tn=String.fromCharCode(55349,57314+Wh),Q(ie,fe,Kr,xf,tn),Q(qt,fe,Xe,xf,tn),tn=String.fromCharCode(55349,57324+Wh),Q(ie,fe,Kr,xf,tn),Q(qt,fe,Xe,xf,tn),tn=String.fromCharCode(55349,57334+Wh),Q(ie,fe,Kr,xf,tn),Q(qt,fe,Xe,xf,tn)}var O8="";for(var T5=0;T5<O8.length;T5++){var ab=O8.charAt(T5);Q(ie,fe,Kr,ab,ab),Q(qt,fe,Xe,ab,ab)}var ib=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],AF=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wue=function(t,r){var n=t.charCodeAt(0),s=t.charCodeAt(1),a=(n-55296)*1024+(s-56320)+65536,i=r==="math"?0:1;if(119808<=a&&a<120484){var o=Math.floor((a-119808)/26);return[ib[o][2],ib[o][i]]}else if(120782<=a&&a<=120831){var c=Math.floor((a-120782)/10);return[AF[c][2],AF[c][i]]}else{if(a===120485||a===120486)return[ib[0][2],ib[0][i]];if(120486<a&&a<120782)return["",""];throw new tr("Unsupported character: "+t)}},t3=function(t,r,n){return Cs[n][t]&&Cs[n][t].replace&&(t=Cs[n][t].replace),{value:t,metrics:D7(t,r,n)}},Qc=function(t,r,n,s,a){var i=t3(t,r,n),o=i.metrics;t=i.value;var c;if(o){var u=o.italic;(n==="text"||s&&s.font==="mathit")&&(u=0),c=new _c(t,o.height,o.depth,u,o.skew,o.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+n+"'")),c=new _c(t,0,0,0,0,0,a);if(s){c.maxFontSize=s.sizeMultiplier,s.style.isTight()&&c.classes.push("mtight");var d=s.getColor();d&&(c.style.color=d)}return c},bue=function(t,r,n,s){return s===void 0&&(s=[]),n.font==="boldsymbol"&&t3(t,"Main-Bold",r).metrics?Qc(t,"Main-Bold",r,n,s.concat(["mathbf"])):t==="\\"||Cs[r][t].font==="main"?Qc(t,"Main-Regular",r,n,s):Qc(t,"AMS-Regular",r,n,s.concat(["amsrm"]))},_ue=function(t,r,n,s,a){return a!=="textord"&&t3(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Sue=function(t,r,n){var s=t.mode,a=t.text,i=["mord"],o=s==="math"||s==="text"&&r.font,c=o?r.font:r.fontFamily,u="",d="";if(a.charCodeAt(0)===55349&&([u,d]=wue(a,s)),u.length>0)return Qc(a,u,s,r,i.concat(d));if(c){var f,h;if(c==="boldsymbol"){var g=_ue(a,s,r,i,n);f=g.fontName,h=[g.fontClass]}else o?(f=yW[c].fontName,h=[c]):(f=ob(c,r.fontWeight,r.fontShape),h=[c,r.fontWeight,r.fontShape]);if(t3(a,f,s).metrics)return Qc(a,f,s,r,i.concat(h));if(gW.hasOwnProperty(a)&&f.slice(0,10)==="Typewriter"){for(var x=[],y=0;y<a.length;y++)x.push(Qc(a[y],f,s,r,i.concat(h)));return xW(x)}}if(n==="mathord")return Qc(a,"Math-Italic",s,r,i.concat(["mathnormal"]));if(n==="textord"){var v=Cs[s][a]&&Cs[s][a].font;if(v==="ams"){var T=ob("amsrm",r.fontWeight,r.fontShape);return Qc(a,T,s,r,i.concat("amsrm",r.fontWeight,r.fontShape))}else if(v==="main"||!v){var k=ob("textrm",r.fontWeight,r.fontShape);return Qc(a,k,s,r,i.concat(r.fontWeight,r.fontShape))}else{var b=ob(v,r.fontWeight,r.fontShape);return Qc(a,b,s,r,i.concat(b,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},kue=(e,t)=>{if(Uf(e.classes)!==Uf(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},Tue=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof _c&&n instanceof _c&&kue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e},R7=function(t){for(var r=0,n=0,s=0,a=0;a<t.children.length;a++){var i=t.children[a];i.height>r&&(r=i.height),i.depth>n&&(n=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}t.height=r,t.depth=n,t.maxFontSize=s},rl=function(t,r,n,s){var a=new y2(t,r,n,s);return R7(a),a},pW=(e,t,r,n)=>new y2(e,t,r,n),Cue=function(t,r,n){var s=rl([t],[],r);return s.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),s.style.borderBottomWidth=pr(s.height),s.maxFontSize=1,s},Nue=function(t,r,n,s){var a=new O7(t,r,n,s);return R7(a),a},xW=function(t){var r=new x2(t);return R7(r),r},Eue=function(t,r){return t instanceof x2?rl([],[t],r):t},Aue=function(t){if(t.positionType==="individualShift"){for(var r=t.children,n=[r[0]],s=-r[0].shift-r[0].elem.depth,a=s,i=1;i<r.length;i++){var o=-r[i].shift-a-r[i].elem.depth,c=o-(r[i-1].elem.height+r[i-1].elem.depth);a=a+o,n.push({type:"kern",size:c}),n.push(r[i])}return{children:n,depth:s}}var u;if(t.positionType==="top"){for(var d=t.positionData,f=0;f<t.children.length;f++){var h=t.children[f];d-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}u=d}else if(t.positionType==="bottom")u=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")u=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:u}},jue=function(t,r){for(var{children:n,depth:s}=Aue(t),a=0,i=0;i<n.length;i++){var o=n[i];if(o.type==="elem"){var c=o.elem;a=Math.max(a,c.maxFontSize,c.height)}}a+=2;var u=rl(["pstrut"],[]);u.style.height=pr(a);for(var d=[],f=s,h=s,g=s,x=0;x<n.length;x++){var y=n[x];if(y.type==="kern")g+=y.size;else{var v=y.elem,T=y.wrapperClasses||[],k=y.wrapperStyle||{},b=rl(T,[u,v],void 0,k);b.style.top=pr(-a-g-v.depth),y.marginLeft&&(b.style.marginLeft=y.marginLeft),y.marginRight&&(b.style.marginRight=y.marginRight),d.push(b),g+=v.height+v.depth}f=Math.min(f,g),h=Math.max(h,g)}var C=rl(["vlist"],d);C.style.height=pr(h);var E;if(f<0){var j=rl([],[]),P=rl(["vlist"],[j]);P.style.height=pr(-f);var A=rl(["vlist-s"],[new _c("")]);E=[rl(["vlist-r"],[C,A]),rl(["vlist-r"],[P])]}else E=[rl(["vlist-r"],[C])];var M=rl(["vlist-t"],E);return E.length===2&&M.classes.push("vlist-t2"),M.height=h,M.depth=-f,M},Pue=(e,t)=>{var r=rl(["mspace"],[],t),n=Js(e,t);return r.style.marginRight=pr(n),r},ob=function(t,r,n){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",s+"-"+a},yW={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},vW={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Mue=function(t,r){var[n,s,a]=vW[t],i=new Wf(n),o=new c0([i],{width:pr(s),height:pr(a),style:"width:"+pr(s),viewBox:"0 0 "+1e3*s+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),c=pW(["overlay"],[o],r);return c.height=a,c.style.height=pr(a),c.style.width=pr(s),c},ht={fontMap:yW,makeSymbol:Qc,mathsym:bue,makeSpan:rl,makeSvgSpan:pW,makeLineSpan:Cue,makeAnchor:Nue,makeFragment:xW,wrapFragment:Eue,makeVList:jue,makeOrd:Sue,makeGlue:Pue,staticSvg:Mue,svgData:vW,tryCombineChars:Tue},Ys={number:3,unit:"mu"},Hh={number:4,unit:"mu"},Id={number:5,unit:"mu"},Fue={mord:{mop:Ys,mbin:Hh,mrel:Id,minner:Ys},mop:{mord:Ys,mop:Ys,mrel:Id,minner:Ys},mbin:{mord:Hh,mop:Hh,mopen:Hh,minner:Hh},mrel:{mord:Id,mop:Id,mopen:Id,minner:Id},mopen:{},mclose:{mop:Ys,mbin:Hh,mrel:Id,minner:Ys},mpunct:{mord:Ys,mop:Ys,mrel:Id,mopen:Ys,mclose:Ys,mpunct:Ys,minner:Ys},minner:{mord:Ys,mop:Ys,mbin:Hh,mrel:Id,mopen:Ys,mpunct:Ys,minner:Ys}},Due={mord:{mop:Ys},mop:{mord:Ys,mop:Ys},mbin:{},mrel:{},mopen:{},mclose:{mop:Ys},mpunct:{},minner:{mop:Ys}},wW={},P4={},M4={};function kr(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:s},c=0;c<r.length;++c)wW[r[c]]=o;t&&(a&&(P4[t]=a),i&&(M4[t]=i))}function Ym(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;kr({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var F4=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},Ea=function(t){return t.type==="ordgroup"?t.body:[t]},u0=ht.makeSpan,Oue=["leftmost","mbin","mopen","mrel","mop","mpunct"],Rue=["rightmost","mrel","mclose","mpunct"],Iue={display:Yr.DISPLAY,text:Yr.TEXT,script:Yr.SCRIPT,scriptscript:Yr.SCRIPTSCRIPT},Lue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ni=function(t,r,n,s){s===void 0&&(s=[null,null]);for(var a=[],i=0;i<t.length;i++){var o=In(t[i],r);if(o instanceof x2){var c=o.children;a.push(...c)}else a.push(o)}if(ht.tryCombineChars(a),!n)return a;var u=r;if(t.length===1){var d=t[0];d.type==="sizing"?u=r.havingSize(d.size):d.type==="styling"&&(u=r.havingStyle(Iue[d.style]))}var f=u0([s[0]||"leftmost"],[],r),h=u0([s[1]||"rightmost"],[],r),g=n==="root";return jF(a,(x,y)=>{var v=y.classes[0],T=x.classes[0];v==="mbin"&&Rue.includes(T)?y.classes[0]="mord":T==="mbin"&&Oue.includes(v)&&(x.classes[0]="mord")},{node:f},h,g),jF(a,(x,y)=>{var v=R8(y),T=R8(x),k=v&&T?x.hasClass("mtight")?Due[v][T]:Fue[v][T]:null;if(k)return ht.makeGlue(k,u)},{node:f},h,g),a},jF=function e(t,r,n,s,a){s&&t.push(s);for(var i=0;i<t.length;i++){var o=t[i],c=bW(o);if(c){e(c.children,r,n,null,a);continue}var u=!o.hasClass("mspace");if(u){var d=r(o,n.node);d&&(n.insertAfter?n.insertAfter(d):(t.unshift(d),i++))}u?n.node=o:a&&o.hasClass("newline")&&(n.node=u0(["leftmost"])),n.insertAfter=(f=>h=>{t.splice(f+1,0,h),i++})(i)}s&&t.pop()},bW=function(t){return t instanceof x2||t instanceof O7||t instanceof y2&&t.hasClass("enclosing")?t:null},Bue=function e(t,r){var n=bW(t);if(n){var s=n.children;if(s.length){if(r==="right")return e(s[s.length-1],"right");if(r==="left")return e(s[0],"left")}}return t},R8=function(t,r){return t?(r&&(t=Bue(t,r)),Lue[t.classes[0]]||null):null},Nv=function(t,r){var n=["nulldelimiter"].concat(t.baseSizingClasses());return u0(r.concat(n))},In=function(t,r,n){if(!t)return u0();if(P4[t.type]){var s=P4[t.type](t,r);if(n&&r.size!==n.size){s=u0(r.sizingClasses(n),[s],r);var a=r.sizeMultiplier/n.sizeMultiplier;s.height*=a,s.depth*=a}return s}else throw new tr("Got group of unknown type: '"+t.type+"'")};function lb(e,t){var r=u0(["base"],e,t),n=u0(["strut"]);return n.style.height=pr(r.height+r.depth),r.depth&&(n.style.verticalAlign=pr(-r.depth)),r.children.unshift(n),r}function I8(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var n=ni(e,t,"root"),s;n.length===2&&n[1].hasClass("tag")&&(s=n.pop());for(var a=[],i=[],o=0;o<n.length;o++)if(i.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var c=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,i.push(n[o]),n[o].hasClass("nobreak")&&(c=!0);c||(a.push(lb(i,t)),i=[])}else n[o].hasClass("newline")&&(i.pop(),i.length>0&&(a.push(lb(i,t)),i=[]),a.push(n[o]));i.length>0&&a.push(lb(i,t));var u;r?(u=lb(ni(r,t,!0)),u.classes=["tag"],a.push(u)):s&&a.push(s);var d=u0(["katex-html"],a);if(d.setAttribute("aria-hidden","true"),u){var f=u.children[0];f.style.height=pr(d.height+d.depth),d.depth&&(f.style.verticalAlign=pr(-d.depth))}return d}function _W(e){return new x2(e)}class Ml{constructor(t,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=Uf(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Wu&&this.children[n+1]instanceof Wu){for(var s=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Wu;)s+=this.children[++n].toText();t.appendChild(new Wu(s).toNode())}else t.appendChild(this.children[n].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=Un.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+Un.escape(Uf(this.classes))+'"'),t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class Wu{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Un.escape(this.toText())}toText(){return this.text}}class $ue{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",pr(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+pr(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Zt={MathNode:Ml,TextNode:Wu,SpaceNode:$ue,newDocumentFragment:_W},Sc=function(t,r,n){return Cs[r][t]&&Cs[r][t].replace&&t.charCodeAt(0)!==55349&&!(gW.hasOwnProperty(t)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(t=Cs[r][t].replace),new Zt.TextNode(t)},I7=function(t){return t.length===1?t[0]:new Zt.MathNode("mrow",t)},L7=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var s=t.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;Cs[s][a]&&Cs[s][a].replace&&(a=Cs[s][a].replace);var i=ht.fontMap[n].fontName;return D7(a,i,s)?ht.fontMap[n].variant:null};function C5(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof Wu&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof Wu&&r.text===","}else return!1}var hl=function(t,r,n){if(t.length===1){var s=ws(t[0],r);return n&&s instanceof Ml&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var a=[],i,o=0;o<t.length;o++){var c=ws(t[o],r);if(c instanceof Ml&&i instanceof Ml){if(c.type==="mtext"&&i.type==="mtext"&&c.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...c.children);continue}else if(c.type==="mn"&&i.type==="mn"){i.children.push(...c.children);continue}else if(C5(c)&&i.type==="mn"){i.children.push(...c.children);continue}else if(c.type==="mn"&&C5(i))c.children=[...i.children,...c.children],a.pop();else if((c.type==="msup"||c.type==="msub")&&c.children.length>=1&&(i.type==="mn"||C5(i))){var u=c.children[0];u instanceof Ml&&u.type==="mn"&&(u.children=[...i.children,...u.children],a.pop())}else if(i.type==="mi"&&i.children.length===1){var d=i.children[0];if(d instanceof Wu&&d.text===""&&(c.type==="mo"||c.type==="mi"||c.type==="mn")){var f=c.children[0];f instanceof Wu&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),a.pop())}}}a.push(c),i=c}return a},Hf=function(t,r,n){return I7(hl(t,r,n))},ws=function(t,r){if(!t)return new Zt.MathNode("mrow");if(M4[t.type]){var n=M4[t.type](t,r);return n}else throw new tr("Got group of unknown type: '"+t.type+"'")};function PF(e,t,r,n,s){var a=hl(e,r),i;a.length===1&&a[0]instanceof Ml&&["mrow","mtable"].includes(a[0].type)?i=a[0]:i=new Zt.MathNode("mrow",a);var o=new Zt.MathNode("annotation",[new Zt.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var c=new Zt.MathNode("semantics",[i,o]),u=new Zt.MathNode("math",[c]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&u.setAttribute("display","block");var d=s?"katex":"katex-mathml";return ht.makeSpan([d],[u])}var SW=function(t){return new zd({style:t.displayMode?Yr.DISPLAY:Yr.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},kW=function(t,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),t=ht.makeSpan(n,[t])}return t},zue=function(t,r,n){var s=SW(n),a;if(n.output==="mathml")return PF(t,r,s,n.displayMode,!0);if(n.output==="html"){var i=I8(t,s);a=ht.makeSpan(["katex"],[i])}else{var o=PF(t,r,s,n.displayMode,!1),c=I8(t,s);a=ht.makeSpan(["katex"],[o,c])}return kW(a,n)},Uue=function(t,r,n){var s=SW(n),a=I8(t,s),i=ht.makeSpan(["katex"],[a]);return kW(i,n)},Wue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Hue=function(t){var r=new Zt.MathNode("mo",[new Zt.TextNode(Wue[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Gue={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Vue=function(t){return t.type==="ordgroup"?t.body.length:1},que=function(t,r){function n(){var o=4e5,c=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(c)){var u=t,d=Vue(u.base),f,h,g;if(d>5)c==="widehat"||c==="widecheck"?(f=420,o=2364,g=.42,h=c+"4"):(f=312,o=2340,g=.34,h="tilde4");else{var x=[1,1,2,2,3,3][d];c==="widehat"||c==="widecheck"?(o=[0,1062,2364,2364,2364][x],f=[0,239,300,360,420][x],g=[0,.24,.3,.3,.36,.42][x],h=c+x):(o=[0,600,1033,2339,2340][x],f=[0,260,286,306,312][x],g=[0,.26,.286,.3,.306,.34][x],h="tilde"+x)}var y=new Wf(h),v=new c0([y],{width:"100%",height:pr(g),viewBox:"0 0 "+o+" "+f,preserveAspectRatio:"none"});return{span:ht.makeSvgSpan([],[v],r),minWidth:0,height:g}}else{var T=[],k=Gue[c],[b,C,E]=k,j=E/1e3,P=b.length,A,M;if(P===1){var F=k[3];A=["hide-tail"],M=[F]}else if(P===2)A=["halfarrow-left","halfarrow-right"],M=["xMinYMin","xMaxYMin"];else if(P===3)A=["brace-left","brace-center","brace-right"],M=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+P+" children.");for(var B=0;B<P;B++){var V=new Wf(b[B]),ee=new c0([V],{width:"400em",height:pr(j),viewBox:"0 0 "+o+" "+E,preserveAspectRatio:M[B]+" slice"}),ae=ht.makeSvgSpan([A[B]],[ee],r);if(P===1)return{span:ae,minWidth:C,height:j};ae.style.height=pr(j),T.push(ae)}return{span:ht.makeSpan(["stretchy"],T,r),minWidth:C,height:j}}}var{span:s,minWidth:a,height:i}=n();return s.height=i,s.style.height=pr(i),a>0&&(s.style.minWidth=pr(a)),s},Kue=function(t,r,n,s,a){var i,o=t.height+t.depth+n+s;if(/fbox|color|angl/.test(r)){if(i=ht.makeSpan(["stretchy",r],[],a),r==="fbox"){var c=a.color&&a.getColor();c&&(i.style.borderColor=c)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new D8({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new D8({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new c0(u,{width:"100%",height:pr(o)});i=ht.makeSvgSpan([],[d],a)}return i.height=o,i.style.height=pr(o),i},d0={encloseSpan:Kue,mathMLnode:Hue,svgSpan:que};function bn(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function B7(e){var t=r3(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function r3(e){return e&&(e.type==="atom"||vue.hasOwnProperty(e.type))?e:null}var $7=(e,t)=>{var r,n,s;e&&e.type==="supsub"?(n=bn(e.base,"accent"),r=n.base,e.base=r,s=xue(In(e,t)),e.base=n):(n=bn(e,"accent"),r=n.base);var a=In(r,t.havingCrampedStyle()),i=n.isShifty&&Un.isCharacterBox(r),o=0;if(i){var c=Un.getBaseElem(r),u=In(c,t.havingCrampedStyle());o=kF(u).skew}var d=n.label==="\\c",f=d?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),h;if(n.isStretchy)h=d0.svgSpan(n,t),h=ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+pr(2*o)+")",marginLeft:pr(2*o)}:void 0}]},t);else{var g,x;n.label==="\\vec"?(g=ht.staticSvg("vec",t),x=ht.svgData.vec[1]):(g=ht.makeOrd({mode:n.mode,text:n.label},t,"textord"),g=kF(g),g.italic=0,x=g.width,d&&(f+=g.depth)),h=ht.makeSpan(["accent-body"],[g]);var y=n.label==="\\textcircled";y&&(h.classes.push("accent-full"),f=a.height);var v=o;y||(v-=x/2),h.style.left=pr(v),n.label==="\\textcircled"&&(h.style.top=".2em"),h=ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-f},{type:"elem",elem:h}]},t)}var T=ht.makeSpan(["mord","accent"],[h],t);return s?(s.children[0]=T,s.height=Math.max(T.height,s.height),s.classes[0]="mord",s):T},TW=(e,t)=>{var r=e.isStretchy?d0.mathMLnode(e.label):new Zt.MathNode("mo",[Sc(e.label,e.mode)]),n=new Zt.MathNode("mover",[ws(e.base,t),r]);return n.setAttribute("accent","true"),n},Yue=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));kr({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=F4(t[0]),n=!Yue.test(e.funcName),s=!n||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:s,base:r}},htmlBuilder:$7,mathmlBuilder:TW});kr({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return n==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:$7,mathmlBuilder:TW});kr({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:s}},htmlBuilder:(e,t)=>{var r=In(e.base,t),n=d0.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,a=ht.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:r}]},t);return ht.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var r=d0.mathMLnode(e.label),n=new Zt.MathNode("munder",[ws(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var cb=e=>{var t=new Zt.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};kr({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:s}=e;return{type:"xArrow",mode:n.mode,label:s,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,n=t.havingStyle(r.sup()),s=ht.wrapFragment(In(e.body,n,t),t),a=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(a+"-arrow-pad");var i;e.below&&(n=t.havingStyle(r.sub()),i=ht.wrapFragment(In(e.below,n,t),t),i.classes.push(a+"-arrow-pad"));var o=d0.svgSpan(e,t),c=-t.fontMetrics().axisHeight+.5*o.height,u=-t.fontMetrics().axisHeight-.5*o.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(u-=s.depth);var d;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*o.height+.111;d=ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:c},{type:"elem",elem:i,shift:f}]},t)}else d=ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:c}]},t);return d.children[0].children[0].children[1].classes.push("svg-align"),ht.makeSpan(["mrel","x-arrow"],[d],t)},mathmlBuilder(e,t){var r=d0.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(e.body){var s=cb(ws(e.body,t));if(e.below){var a=cb(ws(e.below,t));n=new Zt.MathNode("munderover",[r,a,s])}else n=new Zt.MathNode("mover",[r,s])}else if(e.below){var i=cb(ws(e.below,t));n=new Zt.MathNode("munder",[r,i])}else n=cb(),n=new Zt.MathNode("mover",[r,n]);return n}});var Xue=ht.makeSpan;function CW(e,t){var r=ni(e.body,t,!0);return Xue([e.mclass],r,t)}function NW(e,t){var r,n=hl(e.body,t);return e.mclass==="minner"?r=new Zt.MathNode("mpadded",n):e.mclass==="mord"?e.isCharacterBox?(r=n[0],r.type="mi"):r=new Zt.MathNode("mi",n):(e.isCharacterBox?(r=n[0],r.type="mo"):r=new Zt.MathNode("mo",n),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}kr({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Ea(s),isCharacterBox:Un.isCharacterBox(s)}},htmlBuilder:CW,mathmlBuilder:NW});var n3=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};kr({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:n3(t[0]),body:Ea(t[1]),isCharacterBox:Un.isCharacterBox(t[1])}}});kr({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:n}=e,s=t[1],a=t[0],i;n!=="\\stackrel"?i=n3(s):i="mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Ea(s)},c={type:"supsub",mode:a.mode,base:o,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:i,body:[c],isCharacterBox:Un.isCharacterBox(c)}},htmlBuilder:CW,mathmlBuilder:NW});kr({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:n3(t[0]),body:Ea(t[0])}},htmlBuilder(e,t){var r=ni(e.body,t,!0),n=ht.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=hl(e.body,t),n=new Zt.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Jue={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},MF=()=>({type:"styling",body:[],mode:"math",style:"display"}),FF=e=>e.type==="textord"&&e.text==="@",Que=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function Zue(e,t,r){var n=Jue[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=r.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},i=r.callFunction("\\Big",[a],[]),o=r.callFunction("\\\\cdright",[t[1]],[]),c={type:"ordgroup",mode:"math",body:[s,i,o]};return r.callFunction("\\\\cdparent",[c],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function ede(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new tr("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var n=[],s=[n],a=0;a<t.length;a++){for(var i=t[a],o=MF(),c=0;c<i.length;c++)if(!FF(i[c]))o.body.push(i[c]);else{n.push(o),c+=1;var u=B7(i[c]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var f=0;f<2;f++){for(var h=!0,g=c+1;g<i.length;g++){if(Que(i[g],u)){h=!1,c=g;break}if(FF(i[g]))throw new tr("Missing a "+u+" character to complete a CD arrow.",i[g]);d[f].body.push(i[g])}if(h)throw new tr("Missing a "+u+" character to complete a CD arrow.",i[c])}else throw new tr('Expected one of "<>AV=|." after @',i[c]);var x=Zue(u,d,e),y={type:"styling",body:[x],mode:"math",style:"display"};n.push(y),o=MF()}a%2===0?n.push(o):n.shift(),n=[],s.push(n)}e.gullet.endGroup(),e.gullet.endGroup();var v=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:v,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}kr({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=ht.wrapFragment(In(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=pr(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new Zt.MathNode("mrow",[ws(e.label,t)]);return r=new Zt.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new Zt.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});kr({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=ht.wrapFragment(In(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new Zt.MathNode("mrow",[ws(e.fragment,t)])}});kr({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=bn(t[0],"ordgroup"),s=n.body,a="",i=0;i<s.length;i++){var o=bn(s[i],"textord");a+=o.text}var c=parseInt(a),u;if(isNaN(c))throw new tr("\\@char has non-numeric argument "+a);if(c<0||c>=1114111)throw new tr("\\@char with invalid code point "+a);return c<=65535?u=String.fromCharCode(c):(c-=65536,u=String.fromCharCode((c>>10)+55296,(c&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var EW=(e,t)=>{var r=ni(e.body,t.withColor(e.color),!1);return ht.makeFragment(r)},AW=(e,t)=>{var r=hl(e.body,t.withColor(e.color)),n=new Zt.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};kr({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=bn(t[0],"color-token").color,s=t[1];return{type:"color",mode:r.mode,color:n,body:Ea(s)}},htmlBuilder:EW,mathmlBuilder:AW});kr({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,s=bn(t[0],"color-token").color;r.gullet.macros.set("\\current@color",s);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:s,body:a}},htmlBuilder:EW,mathmlBuilder:AW});kr({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,s=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:s&&bn(s,"size").value}},htmlBuilder(e,t){var r=ht.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=pr(Js(e.size,t)))),r},mathmlBuilder(e,t){var r=new Zt.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",pr(Js(e.size,t)))),r}});var L8={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},jW=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new tr("Expected a control sequence",e);return t},tde=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},PW=(e,t,r,n)=>{var s=e.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,n)};kr({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(L8[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=L8[n.text]),bn(t.parseFunction(),"internal");throw new tr("Invalid token after macro prefix",n)}});kr({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new tr("Expected a control sequence",n);for(var a=0,i,o=[[]];t.gullet.future().text!=="{";)if(n=t.gullet.popToken(),n.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),o[a].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new tr('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new tr('Argument number "'+n.text+'" out of order');a++,o.push([])}else{if(n.text==="EOF")throw new tr("Expected a macro definition");o[a].push(n.text)}var{tokens:c}=t.gullet.consumeArg();return i&&c.unshift(i),(r==="\\edef"||r==="\\xdef")&&(c=t.gullet.expandTokens(c),c.reverse()),t.gullet.macros.set(s,{tokens:c,numArgs:a,delimiters:o},r===L8[r]),{type:"internal",mode:t.mode}}});kr({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=jW(t.gullet.popToken());t.gullet.consumeSpaces();var s=tde(t);return PW(t,n,s,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});kr({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=jW(t.gullet.popToken()),s=t.gullet.popToken(),a=t.gullet.popToken();return PW(t,n,a,r==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var Dy=function(t,r,n){var s=Cs.math[t]&&Cs.math[t].replace,a=D7(s||t,r,n);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return a},z7=function(t,r,n,s){var a=n.havingBaseStyle(r),i=ht.makeSpan(s.concat(a.sizingClasses(n)),[t],n),o=a.sizeMultiplier/n.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},MW=function(t,r,n){var s=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/s.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=pr(a),t.height-=a,t.depth+=a},rde=function(t,r,n,s,a,i){var o=ht.makeSymbol(t,"Main-Regular",a,s),c=z7(o,r,s,i);return n&&MW(c,s,r),c},nde=function(t,r,n,s){return ht.makeSymbol(t,"Size"+r+"-Regular",n,s)},FW=function(t,r,n,s,a,i){var o=nde(t,r,a,s),c=z7(ht.makeSpan(["delimsizing","size"+r],[o],s),Yr.TEXT,s,i);return n&&MW(c,s,Yr.TEXT),c},N5=function(t,r,n){var s;r==="Size1-Regular"?s="delim-size1":s="delim-size4";var a=ht.makeSpan(["delimsizinginner",s],[ht.makeSpan([],[ht.makeSymbol(t,r,n)])]);return{type:"elem",elem:a}},E5=function(t,r,n){var s=Uu["Size4-Regular"][t.charCodeAt(0)]?Uu["Size4-Regular"][t.charCodeAt(0)][4]:Uu["Size1-Regular"][t.charCodeAt(0)][4],a=new Wf("inner",lue(t,Math.round(1e3*r))),i=new c0([a],{width:pr(s),height:pr(r),style:"width:"+pr(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),o=ht.makeSvgSpan([],[i],n);return o.height=r,o.style.height=pr(r),o.style.width=pr(s),{type:"elem",elem:o}},B8=.008,ub={type:"kern",size:-1*B8},sde=["|","\\lvert","\\rvert","\\vert"],ade=["\\|","\\lVert","\\rVert","\\Vert"],DW=function(t,r,n,s,a,i){var o,c,u,d,f="",h=0;o=u=d=t,c=null;var g="Size1-Regular";t==="\\uparrow"?u=d="":t==="\\Uparrow"?u=d="":t==="\\downarrow"?o=u="":t==="\\Downarrow"?o=u="":t==="\\updownarrow"?(o="\\uparrow",u="",d="\\downarrow"):t==="\\Updownarrow"?(o="\\Uparrow",u="",d="\\Downarrow"):sde.includes(t)?(u="",f="vert",h=333):ade.includes(t)?(u="",f="doublevert",h=556):t==="["||t==="\\lbrack"?(o="",u="",d="",g="Size4-Regular",f="lbrack",h=667):t==="]"||t==="\\rbrack"?(o="",u="",d="",g="Size4-Regular",f="rbrack",h=667):t==="\\lfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="lfloor",h=667):t==="\\lceil"||t===""?(o="",u=d="",g="Size4-Regular",f="lceil",h=667):t==="\\rfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="rfloor",h=667):t==="\\rceil"||t===""?(o="",u=d="",g="Size4-Regular",f="rceil",h=667):t==="("||t==="\\lparen"?(o="",u="",d="",g="Size4-Regular",f="lparen",h=875):t===")"||t==="\\rparen"?(o="",u="",d="",g="Size4-Regular",f="rparen",h=875):t==="\\{"||t==="\\lbrace"?(o="",c="",d="",u="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(o="",c="",d="",u="",g="Size4-Regular"):t==="\\lgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\rgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(o="",d="",u="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(o="",d="",u="",g="Size4-Regular");var x=Dy(o,g,a),y=x.height+x.depth,v=Dy(u,g,a),T=v.height+v.depth,k=Dy(d,g,a),b=k.height+k.depth,C=0,E=1;if(c!==null){var j=Dy(c,g,a);C=j.height+j.depth,E=2}var P=y+b+C,A=Math.max(0,Math.ceil((r-P)/(E*T))),M=P+A*E*T,F=s.fontMetrics().axisHeight;n&&(F*=s.sizeMultiplier);var B=M/2-F,V=[];if(f.length>0){var ee=M-y-b,ae=Math.round(M*1e3),Z=cue(f,Math.round(ee*1e3)),te=new Wf(f,Z),L=(h/1e3).toFixed(3)+"em",K=(ae/1e3).toFixed(3)+"em",I=new c0([te],{width:L,height:K,viewBox:"0 0 "+h+" "+ae}),H=ht.makeSvgSpan([],[I],s);H.height=ae/1e3,H.style.width=L,H.style.height=K,V.push({type:"elem",elem:H})}else{if(V.push(N5(d,g,a)),V.push(ub),c===null){var U=M-y-b+2*B8;V.push(E5(u,U,s))}else{var R=(M-y-b-C)/2+2*B8;V.push(E5(u,R,s)),V.push(ub),V.push(N5(c,g,a)),V.push(ub),V.push(E5(u,R,s))}V.push(ub),V.push(N5(o,g,a))}var z=s.havingBaseStyle(Yr.TEXT),G=ht.makeVList({positionType:"bottom",positionData:B,children:V},z);return z7(ht.makeSpan(["delimsizing","mult"],[G],z),Yr.TEXT,s,i)},A5=80,j5=.08,P5=function(t,r,n,s,a){var i=oue(t,s,n),o=new Wf(t,i),c=new c0([o],{width:"400em",height:pr(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return ht.makeSvgSpan(["hide-tail"],[c],a)},ide=function(t,r){var n=r.havingBaseSizing(),s=LW("\\surd",t*n.sizeMultiplier,IW,n),a=n.sizeMultiplier,i=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),o,c=0,u=0,d=0,f;return s.type==="small"?(d=1e3+1e3*i+A5,t<1?a=1:t<1.4&&(a=.7),c=(1+i+j5)/a,u=(1+i)/a,o=P5("sqrtMain",c,d,i,r),o.style.minWidth="0.853em",f=.833/a):s.type==="large"?(d=(1e3+A5)*Jy[s.size],u=(Jy[s.size]+i)/a,c=(Jy[s.size]+i+j5)/a,o=P5("sqrtSize"+s.size,c,d,i,r),o.style.minWidth="1.02em",f=1/a):(c=t+i+j5,u=t+i,d=Math.floor(1e3*t+i)+A5,o=P5("sqrtTall",c,d,i,r),o.style.minWidth="0.742em",f=1.056),o.height=u,o.style.height=pr(c),{span:o,advanceWidth:f,ruleWidth:(r.fontMetrics().sqrtRuleThickness+i)*a}},OW=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],ode=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],RW=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Jy=[0,1.2,1.8,2.4,3],lde=function(t,r,n,s,a){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),OW.includes(t)||RW.includes(t))return FW(t,r,!1,n,s,a);if(ode.includes(t))return DW(t,Jy[r],!1,n,s,a);throw new tr("Illegal delimiter: '"+t+"'")},cde=[{type:"small",style:Yr.SCRIPTSCRIPT},{type:"small",style:Yr.SCRIPT},{type:"small",style:Yr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],ude=[{type:"small",style:Yr.SCRIPTSCRIPT},{type:"small",style:Yr.SCRIPT},{type:"small",style:Yr.TEXT},{type:"stack"}],IW=[{type:"small",style:Yr.SCRIPTSCRIPT},{type:"small",style:Yr.SCRIPT},{type:"small",style:Yr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],dde=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},LW=function(t,r,n,s){for(var a=Math.min(2,3-s.style.size),i=a;i<n.length&&n[i].type!=="stack";i++){var o=Dy(t,dde(n[i]),"math"),c=o.height+o.depth;if(n[i].type==="small"){var u=s.havingBaseStyle(n[i].style);c*=u.sizeMultiplier}if(c>r)return n[i]}return n[n.length-1]},BW=function(t,r,n,s,a,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var o;RW.includes(t)?o=cde:OW.includes(t)?o=IW:o=ude;var c=LW(t,r,o,s);return c.type==="small"?rde(t,c.style,n,s,a,i):c.type==="large"?FW(t,c.size,n,s,a,i):DW(t,r,n,s,a,i)},fde=function(t,r,n,s,a,i){var o=s.fontMetrics().axisHeight*s.sizeMultiplier,c=901,u=5/s.fontMetrics().ptPerEm,d=Math.max(r-o,n+o),f=Math.max(d/500*c,2*d-u);return BW(t,f,!0,s,a,i)},Zd={sqrtImage:ide,sizedDelim:lde,sizeToMaxHeight:Jy,customSizedDelim:BW,leftRightDelim:fde},DF={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},hde=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function s3(e,t){var r=r3(e);if(r&&hde.includes(r.text))return r;throw r?new tr("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new tr("Invalid delimiter type '"+e.type+"'",e)}kr({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=s3(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:DF[e.funcName].size,mclass:DF[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?ht.makeSpan([e.mclass]):Zd.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(Sc(e.delim,e.mode));var r=new Zt.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=pr(Zd.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function OF(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}kr({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new tr("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:s3(t[0],e).text,color:r}}});kr({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=s3(t[0],e),n=e.parser;++n.leftrightDepth;var s=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=bn(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{OF(e);for(var r=ni(e.body,t,!0,["mopen","mclose"]),n=0,s=0,a=!1,i=0;i<r.length;i++)r[i].isMiddle?a=!0:(n=Math.max(r[i].height,n),s=Math.max(r[i].depth,s));n*=t.sizeMultiplier,s*=t.sizeMultiplier;var o;if(e.left==="."?o=Nv(t,["mopen"]):o=Zd.leftRightDelim(e.left,n,s,t,e.mode,["mopen"]),r.unshift(o),a)for(var c=1;c<r.length;c++){var u=r[c],d=u.isMiddle;d&&(r[c]=Zd.leftRightDelim(d.delim,n,s,d.options,e.mode,[]))}var f;if(e.right===".")f=Nv(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;f=Zd.leftRightDelim(e.right,n,s,h,e.mode,["mclose"])}return r.push(f),ht.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{OF(e);var r=hl(e.body,t);if(e.left!=="."){var n=new Zt.MathNode("mo",[Sc(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(e.right!=="."){var s=new Zt.MathNode("mo",[Sc(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),r.push(s)}return I7(r)}});kr({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=s3(t[0],e);if(!e.parser.leftrightDepth)throw new tr("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=Nv(t,[]);else{r=Zd.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?Sc("|","text"):Sc(e.delim,e.mode),n=new Zt.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var U7=(e,t)=>{var r=ht.wrapFragment(In(e.body,t),t),n=e.label.slice(1),s=t.sizeMultiplier,a,i=0,o=Un.isCharacterBox(e.body);if(n==="sout")a=ht.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/s,i=-.5*t.fontMetrics().xHeight;else if(n==="phase"){var c=Js({number:.6,unit:"pt"},t),u=Js({number:.35,unit:"ex"},t),d=t.havingBaseSizing();s=s/d.sizeMultiplier;var f=r.height+r.depth+c+u;r.style.paddingLeft=pr(f/2+c);var h=Math.floor(1e3*f*s),g=aue(h),x=new c0([new Wf("phase",g)],{width:"400em",height:pr(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});a=ht.makeSvgSpan(["hide-tail"],[x],t),a.style.height=pr(f),i=r.depth+c+u}else{/cancel/.test(n)?o||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var y=0,v=0,T=0;/box/.test(n)?(T=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=t.fontMetrics().fboxsep+(n==="colorbox"?0:T),v=y):n==="angl"?(T=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),y=4*T,v=Math.max(0,.25-r.depth)):(y=o?.2:0,v=y),a=d0.encloseSpan(r,n,y,v,t),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=pr(T)):n==="angl"&&T!==.049&&(a.style.borderTopWidth=pr(T),a.style.borderRightWidth=pr(T)),i=r.depth+v,e.backgroundColor&&(a.style.backgroundColor=e.backgroundColor,e.borderColor&&(a.style.borderColor=e.borderColor))}var k;if(e.backgroundColor)k=ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:i},{type:"elem",elem:r,shift:0}]},t);else{var b=/cancel|phase/.test(n)?["svg-align"]:[];k=ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:i,wrapperClasses:b}]},t)}return/cancel/.test(n)&&(k.height=r.height,k.depth=r.depth),/cancel/.test(n)&&!o?ht.makeSpan(["mord","cancel-lap"],[k],t):ht.makeSpan(["mord"],[k],t)},W7=(e,t)=>{var r=0,n=new Zt.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[ws(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};kr({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=bn(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:n.mode,label:s,backgroundColor:a,body:i}},htmlBuilder:U7,mathmlBuilder:W7});kr({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=bn(t[0],"color-token").color,i=bn(t[1],"color-token").color,o=t[2];return{type:"enclose",mode:n.mode,label:s,backgroundColor:i,borderColor:a,body:o}},htmlBuilder:U7,mathmlBuilder:W7});kr({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});kr({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"enclose",mode:r.mode,label:n,body:s}},htmlBuilder:U7,mathmlBuilder:W7});kr({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var $W={};function rd(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},c=0;c<r.length;++c)$W[r[c]]=o;a&&(P4[t]=a),i&&(M4[t]=i)}var zW={};function _e(e,t){zW[e]=t}function RF(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var a3=e=>{var t=e.parser.settings;if(!t.displayMode)throw new tr("{"+e.envName+"} can be used only in display mode.")};function H7(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function nh(e,t,r){var{hskipBeforeAndAfter:n,addJot:s,cols:a,arraystretch:i,colSeparationType:o,autoTag:c,singleRow:u,emptySingleRow:d,maxNumCols:f,leqno:h}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new tr("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var x=[],y=[x],v=[],T=[],k=c!=null?[]:void 0;function b(){c&&e.gullet.macros.set("\\@eqnsw","1",!0)}function C(){k&&(e.gullet.macros.get("\\df@tag")?(k.push(e.subparse([new Rl("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):k.push(!!c&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(b(),T.push(RF(e));;){var E=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),E={type:"ordgroup",mode:e.mode,body:E},r&&(E={type:"styling",mode:e.mode,style:r,body:[E]}),x.push(E);var j=e.fetch().text;if(j==="&"){if(f&&x.length===f){if(u||o)throw new tr("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(j==="\\end"){C(),x.length===1&&E.type==="styling"&&E.body[0].body.length===0&&(y.length>1||!d)&&y.pop(),T.length<y.length+1&&T.push([]);break}else if(j==="\\\\"){e.consume();var P=void 0;e.gullet.future().text!==" "&&(P=e.parseSizeGroup(!0)),v.push(P?P.value:null),C(),T.push(RF(e)),x=[],y.push(x),b()}else throw new tr("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:i,body:y,cols:a,rowGaps:v,hskipBeforeAndAfter:n,hLinesBeforeRow:T,colSeparationType:o,tags:k,leqno:h}}function G7(e){return e.slice(0,1)==="d"?"display":"text"}var nd=function(t,r){var n,s,a=t.body.length,i=t.hLinesBeforeRow,o=0,c=new Array(a),u=[],d=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),f=1/r.fontMetrics().ptPerEm,h=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=r.havingStyle(Yr.SCRIPT).sizeMultiplier;h=.2778*(g/r.sizeMultiplier)}var x=t.colSeparationType==="CD"?Js({number:3,unit:"ex"},r):12*f,y=3*f,v=t.arraystretch*x,T=.7*v,k=.3*v,b=0;function C(Nt){for(var $e=0;$e<Nt.length;++$e)$e>0&&(b+=.25),u.push({pos:b,isDashed:Nt[$e]})}for(C(i[0]),n=0;n<t.body.length;++n){var E=t.body[n],j=T,P=k;o<E.length&&(o=E.length);var A=new Array(E.length);for(s=0;s<E.length;++s){var M=In(E[s],r);P<M.depth&&(P=M.depth),j<M.height&&(j=M.height),A[s]=M}var F=t.rowGaps[n],B=0;F&&(B=Js(F,r),B>0&&(B+=k,P<B&&(P=B),B=0)),t.addJot&&(P+=y),A.height=j,A.depth=P,b+=j,A.pos=b,b+=P+B,c[n]=A,C(i[n+1])}var V=b/2+r.fontMetrics().axisHeight,ee=t.cols||[],ae=[],Z,te,L=[];if(t.tags&&t.tags.some(Nt=>Nt))for(n=0;n<a;++n){var K=c[n],I=K.pos-V,H=t.tags[n],U=void 0;H===!0?U=ht.makeSpan(["eqn-num"],[],r):H===!1?U=ht.makeSpan([],[],r):U=ht.makeSpan([],ni(H,r,!0),r),U.depth=K.depth,U.height=K.height,L.push({type:"elem",elem:U,shift:I})}for(s=0,te=0;s<o||te<ee.length;++s,++te){for(var R=ee[te]||{},z=!0;R.type==="separator";){if(z||(Z=ht.makeSpan(["arraycolsep"],[]),Z.style.width=pr(r.fontMetrics().doubleRuleSep),ae.push(Z)),R.separator==="|"||R.separator===":"){var G=R.separator==="|"?"solid":"dashed",X=ht.makeSpan(["vertical-separator"],[],r);X.style.height=pr(b),X.style.borderRightWidth=pr(d),X.style.borderRightStyle=G,X.style.margin="0 "+pr(-d/2);var ne=b-V;ne&&(X.style.verticalAlign=pr(-ne)),ae.push(X)}else throw new tr("Invalid separator type: "+R.separator);te++,R=ee[te]||{},z=!1}if(!(s>=o)){var q=void 0;(s>0||t.hskipBeforeAndAfter)&&(q=Un.deflt(R.pregap,h),q!==0&&(Z=ht.makeSpan(["arraycolsep"],[]),Z.style.width=pr(q),ae.push(Z)));var se=[];for(n=0;n<a;++n){var ue=c[n],me=ue[s];if(me){var Ne=ue.pos-V;me.depth=ue.depth,me.height=ue.height,se.push({type:"elem",elem:me,shift:Ne})}}se=ht.makeVList({positionType:"individualShift",children:se},r),se=ht.makeSpan(["col-align-"+(R.align||"c")],[se]),ae.push(se),(s<o-1||t.hskipBeforeAndAfter)&&(q=Un.deflt(R.postgap,h),q!==0&&(Z=ht.makeSpan(["arraycolsep"],[]),Z.style.width=pr(q),ae.push(Z)))}}if(c=ht.makeSpan(["mtable"],ae),u.length>0){for(var ce=ht.makeLineSpan("hline",r,d),Ue=ht.makeLineSpan("hdashline",r,d),pe=[{type:"elem",elem:c,shift:0}];u.length>0;){var je=u.pop(),We=je.pos-V;je.isDashed?pe.push({type:"elem",elem:Ue,shift:We}):pe.push({type:"elem",elem:ce,shift:We})}c=ht.makeVList({positionType:"individualShift",children:pe},r)}if(L.length===0)return ht.makeSpan(["mord"],[c],r);var Me=ht.makeVList({positionType:"individualShift",children:L},r);return Me=ht.makeSpan(["tag"],[Me],r),ht.makeFragment([c,Me])},mde={c:"center ",l:"left ",r:"right "},sd=function(t,r){for(var n=[],s=new Zt.MathNode("mtd",[],["mtr-glue"]),a=new Zt.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var o=t.body[i],c=[],u=0;u<o.length;u++)c.push(new Zt.MathNode("mtd",[ws(o[u],r)]));t.tags&&t.tags[i]&&(c.unshift(s),c.push(s),t.leqno?c.unshift(a):c.push(a)),n.push(new Zt.MathNode("mtr",c))}var d=new Zt.MathNode("mtable",n),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);d.setAttribute("rowspacing",pr(f));var h="",g="";if(t.cols&&t.cols.length>0){var x=t.cols,y="",v=!1,T=0,k=x.length;x[0].type==="separator"&&(h+="top ",T=1),x[x.length-1].type==="separator"&&(h+="bottom ",k-=1);for(var b=T;b<k;b++)x[b].type==="align"?(g+=mde[x[b].align],v&&(y+="none "),v=!0):x[b].type==="separator"&&v&&(y+=x[b].separator==="|"?"solid ":"dashed ",v=!1);d.setAttribute("columnalign",g.trim()),/[sd]/.test(y)&&d.setAttribute("columnlines",y.trim())}if(t.colSeparationType==="align"){for(var C=t.cols||[],E="",j=1;j<C.length;j++)E+=j%2?"0em ":"1em ";d.setAttribute("columnspacing",E.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var P="",A=t.hLinesBeforeRow;h+=A[0].length>0?"left ":"",h+=A[A.length-1].length>0?"right ":"";for(var M=1;M<A.length-1;M++)P+=A[M].length===0?"none ":A[M][0]?"dashed ":"solid ";return/[sd]/.test(P)&&d.setAttribute("rowlines",P.trim()),h!==""&&(d=new Zt.MathNode("menclose",[d]),d.setAttribute("notation",h.trim())),t.arraystretch&&t.arraystretch<1&&(d=new Zt.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},UW=function(t,r){t.envName.indexOf("ed")===-1&&a3(t);var n=[],s=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",i=nh(t.parser,{cols:n,addJot:!0,autoTag:a?void 0:H7(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),o,c=0,u={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var d="",f=0;f<r[0].body.length;f++){var h=bn(r[0].body[f],"textord");d+=h.text}o=Number(d),c=o*2}var g=!c;i.body.forEach(function(T){for(var k=1;k<T.length;k+=2){var b=bn(T[k],"styling"),C=bn(b.body[0],"ordgroup");C.body.unshift(u)}if(g)c<T.length&&(c=T.length);else{var E=T.length/2;if(o<E)throw new tr("Too many math in a row: "+("expected "+o+", but got "+E),T[0])}});for(var x=0;x<c;++x){var y="r",v=0;x%2===1?y="l":x>0&&g&&(v=1),n[x]={type:"align",align:y,pregap:v,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};rd({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=r3(t[0]),n=r?[t[0]]:bn(t[0],"ordgroup").body,s=n.map(function(i){var o=B7(i),c=o.text;if("lcr".indexOf(c)!==-1)return{type:"align",align:c};if(c==="|")return{type:"separator",separator:"|"};if(c===":")return{type:"separator",separator:":"};throw new tr("Unknown column alignment: "+c,i)}),a={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return nh(e.parser,a,G7(e.envName))},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),r=s.fetch().text,"lcr".indexOf(r)===-1)throw new tr("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),n.cols=[{type:"align",align:r}]}}var a=nh(e.parser,n,G7(e.envName)),i=Math.max(0,...a.body.map(o=>o.length));return a.cols=new Array(i).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=nh(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=r3(t[0]),n=r?[t[0]]:bn(t[0],"ordgroup").body,s=n.map(function(i){var o=B7(i),c=o.text;if("lc".indexOf(c)!==-1)return{type:"align",align:c};throw new tr("Unknown column alignment: "+c,i)});if(s.length>1)throw new tr("{subarray} can contain only one column");var a={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=nh(e.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new tr("{subarray} can contain only one column");return a},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=nh(e.parser,t,G7(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:UW,htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&a3(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:H7(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return nh(e.parser,t,"display")},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:UW,htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){a3(e);var t={autoTag:H7(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return nh(e.parser,t,"display")},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["CD"],props:{numArgs:0},handler(e){return a3(e),ede(e.parser)},htmlBuilder:nd,mathmlBuilder:sd});_e("\\nonumber","\\gdef\\@eqnsw{0}");_e("\\notag","\\nonumber");kr({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new tr(e.funcName+" valid only within array environment")}});var IF=$W;kr({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];if(s.type!=="ordgroup")throw new tr("Invalid environment name",s);for(var a="",i=0;i<s.body.length;++i)a+=bn(s.body[i],"textord").text;if(n==="\\begin"){if(!IF.hasOwnProperty(a))throw new tr("No such environment: "+a,s);var o=IF[a],{args:c,optArgs:u}=r.parseArguments("\\begin{"+a+"}",o),d={mode:r.mode,envName:a,parser:r},f=o.handler(d,c,u);r.expect("\\end",!1);var h=r.nextToken,g=bn(r.parseFunction(),"environment");if(g.name!==a)throw new tr("Mismatch: \\begin{"+a+"} matched by \\end{"+g.name+"}",h);return f}return{type:"environment",mode:r.mode,name:a,nameGroup:s}}});var WW=(e,t)=>{var r=e.font,n=t.withFont(r);return In(e.body,n)},HW=(e,t)=>{var r=e.font,n=t.withFont(r);return ws(e.body,n)},LF={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};kr({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=F4(t[0]),a=n;return a in LF&&(a=LF[a]),{type:"font",mode:r.mode,font:a.slice(1),body:s}},htmlBuilder:WW,mathmlBuilder:HW});kr({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],s=Un.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:n3(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:s}}});kr({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:s}=e,{mode:a}=r,i=r.parseExpression(!0,s),o="math"+n.slice(1);return{type:"font",mode:a,font:o,body:{type:"ordgroup",mode:r.mode,body:i}}},htmlBuilder:WW,mathmlBuilder:HW});var GW=(e,t)=>{var r=t;return e==="display"?r=r.id>=Yr.SCRIPT.id?r.text():Yr.DISPLAY:e==="text"&&r.size===Yr.DISPLAY.size?r=Yr.TEXT:e==="script"?r=Yr.SCRIPT:e==="scriptscript"&&(r=Yr.SCRIPTSCRIPT),r},V7=(e,t)=>{var r=GW(e.size,t.style),n=r.fracNum(),s=r.fracDen(),a;a=t.havingStyle(n);var i=In(e.numer,a,t);if(e.continued){var o=8.5/t.fontMetrics().ptPerEm,c=3.5/t.fontMetrics().ptPerEm;i.height=i.height<o?o:i.height,i.depth=i.depth<c?c:i.depth}a=t.havingStyle(s);var u=In(e.denom,a,t),d,f,h;e.hasBarLine?(e.barSize?(f=Js(e.barSize,t),d=ht.makeLineSpan("frac-line",t,f)):d=ht.makeLineSpan("frac-line",t),f=d.height,h=d.height):(d=null,f=0,h=t.fontMetrics().defaultRuleThickness);var g,x,y;r.size===Yr.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?x=3*h:x=7*h,y=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,x=h):(g=t.fontMetrics().num3,x=3*h),y=t.fontMetrics().denom2);var v;if(d){var k=t.fontMetrics().axisHeight;g-i.depth-(k+.5*f)<x&&(g+=x-(g-i.depth-(k+.5*f))),k-.5*f-(u.height-y)<x&&(y+=x-(k-.5*f-(u.height-y)));var b=-(k-.5*f);v=ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:d,shift:b},{type:"elem",elem:i,shift:-g}]},t)}else{var T=g-i.depth-(u.height-y);T<x&&(g+=.5*(x-T),y+=.5*(x-T)),v=ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:i,shift:-g}]},t)}a=t.havingStyle(r),v.height*=a.sizeMultiplier/t.sizeMultiplier,v.depth*=a.sizeMultiplier/t.sizeMultiplier;var C;r.size===Yr.DISPLAY.size?C=t.fontMetrics().delim1:r.size===Yr.SCRIPTSCRIPT.size?C=t.havingStyle(Yr.SCRIPT).fontMetrics().delim2:C=t.fontMetrics().delim2;var E,j;return e.leftDelim==null?E=Nv(t,["mopen"]):E=Zd.customSizedDelim(e.leftDelim,C,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?j=ht.makeSpan([]):e.rightDelim==null?j=Nv(t,["mclose"]):j=Zd.customSizedDelim(e.rightDelim,C,!0,t.havingStyle(r),e.mode,["mclose"]),ht.makeSpan(["mord"].concat(a.sizingClasses(t)),[E,ht.makeSpan(["mfrac"],[v]),j],t)},q7=(e,t)=>{var r=new Zt.MathNode("mfrac",[ws(e.numer,t),ws(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var n=Js(e.barSize,t);r.setAttribute("linethickness",pr(n))}var s=GW(e.size,t.style);if(s.size!==t.style.size){r=new Zt.MathNode("mstyle",[r]);var a=s.size===Yr.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var o=new Zt.MathNode("mo",[new Zt.TextNode(e.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),i.push(o)}if(i.push(r),e.rightDelim!=null){var c=new Zt.MathNode("mo",[new Zt.TextNode(e.rightDelim.replace("\\",""))]);c.setAttribute("fence","true"),i.push(c)}return I7(i)}return r};kr({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1],i,o=null,c=null,u="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",c=")";break;case"\\\\bracefrac":i=!1,o="\\{",c="\\}";break;case"\\\\brackfrac":i=!1,o="[",c="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:a,hasBarLine:i,leftDelim:o,rightDelim:c,size:u,barSize:null}},htmlBuilder:V7,mathmlBuilder:q7});kr({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:s,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});kr({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:n}=e,s;switch(r){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:n}}});var BF=["display","text","script","scriptscript"],$F=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};kr({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,n=t[4],s=t[5],a=F4(t[0]),i=a.type==="atom"&&a.family==="open"?$F(a.text):null,o=F4(t[1]),c=o.type==="atom"&&o.family==="close"?$F(o.text):null,u=bn(t[2],"size"),d,f=null;u.isBlank?d=!0:(f=u.value,d=f.number>0);var h="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var x=bn(g.body[0],"textord");h=BF[Number(x.text)]}}else g=bn(g,"textord"),h=BF[Number(g.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:d,barSize:f,leftDelim:i,rightDelim:c,size:h}},htmlBuilder:V7,mathmlBuilder:q7});kr({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:s}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:bn(t[0],"size").value,token:s}}});kr({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=Hce(bn(t[1],"infix").size),i=t[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:s,denom:i,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:V7,mathmlBuilder:q7});var VW=(e,t)=>{var r=t.style,n,s;e.type==="supsub"?(n=e.sup?In(e.sup,t.havingStyle(r.sup()),t):In(e.sub,t.havingStyle(r.sub()),t),s=bn(e.base,"horizBrace")):s=bn(e,"horizBrace");var a=In(s.base,t.havingBaseStyle(Yr.DISPLAY)),i=d0.svgSpan(s,t),o;if(s.isOver?(o=ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:i}]},t),o.children[0].children[0].children[1].classes.push("svg-align")):(o=ht.makeVList({positionType:"bottom",positionData:a.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:a}]},t),o.children[0].children[0].children[0].classes.push("svg-align")),n){var c=ht.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t);s.isOver?o=ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:n}]},t):o=ht.makeVList({positionType:"bottom",positionData:c.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:c}]},t)}return ht.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t)},gde=(e,t)=>{var r=d0.mathMLnode(e.label);return new Zt.MathNode(e.isOver?"mover":"munder",[ws(e.base,t),r])};kr({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:VW,mathmlBuilder:gde});kr({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],s=bn(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:r.mode,href:s,body:Ea(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=ni(e.body,t,!1);return ht.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=Hf(e.body,t);return r instanceof Ml||(r=new Ml("mrow",[r])),r.setAttribute("href",e.href),r}});kr({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=bn(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var s=[],a=0;a<n.length;a++){var i=n[a];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var o={type:"text",mode:r.mode,font:"\\texttt",body:s};return{type:"href",mode:r.mode,href:n,body:Ea(o)}}});kr({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:Ea(t[0])}},htmlBuilder(e,t){var r=ni(e.body,t,!1);return ht.makeFragment(r)},mathmlBuilder(e,t){return new Zt.MathNode("mrow",hl(e.body,t))}});kr({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,token:s}=e,a=bn(t[0],"raw").string,i=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,c={};switch(n){case"\\htmlClass":c.class=a,o={command:"\\htmlClass",class:a};break;case"\\htmlId":c.id=a,o={command:"\\htmlId",id:a};break;case"\\htmlStyle":c.style=a,o={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var u=a.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length!==2)throw new tr("Error parsing key-value for \\htmlData");c["data-"+f[0].trim()]=f[1].trim()}o={command:"\\htmlData",attributes:c};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(o)?{type:"html",mode:r.mode,attributes:c,body:Ea(i)}:r.formatUnsupportedCmd(n)},htmlBuilder:(e,t)=>{var r=ni(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var s=ht.makeSpan(n,r,t);for(var a in e.attributes)a!=="class"&&e.attributes.hasOwnProperty(a)&&s.setAttribute(a,e.attributes[a]);return s},mathmlBuilder:(e,t)=>Hf(e.body,t)});kr({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:Ea(t[0]),mathml:Ea(t[1])}},htmlBuilder:(e,t)=>{var r=ni(e.html,t,!1);return ht.makeFragment(r)},mathmlBuilder:(e,t)=>Hf(e.mathml,t)});var M5=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new tr("Invalid size: '"+t+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!dW(n))throw new tr("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};kr({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,s={number:0,unit:"em"},a={number:.9,unit:"em"},i={number:0,unit:"em"},o="";if(r[0])for(var c=bn(r[0],"raw").string,u=c.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length===2){var h=f[1].trim();switch(f[0].trim()){case"alt":o=h;break;case"width":s=M5(h);break;case"height":a=M5(h);break;case"totalheight":i=M5(h);break;default:throw new tr("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=bn(t[0],"url").url;return o===""&&(o=g,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:n.mode,alt:o,width:s,height:a,totalheight:i,src:g}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=Js(e.height,t),n=0;e.totalheight.number>0&&(n=Js(e.totalheight,t)-r);var s=0;e.width.number>0&&(s=Js(e.width,t));var a={height:pr(r+n)};s>0&&(a.width=pr(s)),n>0&&(a.verticalAlign=pr(-n));var i=new gue(e.src,e.alt,a);return i.height=r,i.depth=n,i},mathmlBuilder:(e,t)=>{var r=new Zt.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=Js(e.height,t),s=0;if(e.totalheight.number>0&&(s=Js(e.totalheight,t)-n,r.setAttribute("valign",pr(-s))),r.setAttribute("height",pr(n+s)),e.width.number>0){var a=Js(e.width,t);r.setAttribute("width",pr(a))}return r.setAttribute("src",e.src),r}});kr({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=bn(t[0],"size");if(r.settings.strict){var a=n[1]==="m",i=s.value.unit==="mu";a?(i||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+s.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):i&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:s.value}},htmlBuilder(e,t){return ht.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=Js(e.dimension,t);return new Zt.SpaceNode(r)}});kr({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:s}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=ht.makeSpan([],[In(e.body,t)]),r=ht.makeSpan(["inner"],[r],t)):r=ht.makeSpan(["inner"],[In(e.body,t)]);var n=ht.makeSpan(["fix"],[]),s=ht.makeSpan([e.alignment],[r,n],t),a=ht.makeSpan(["strut"]);return a.style.height=pr(s.height+s.depth),s.depth&&(a.style.verticalAlign=pr(-s.depth)),s.children.unshift(a),s=ht.makeSpan(["thinbox"],[s],t),ht.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var r=new Zt.MathNode("mpadded",[ws(e.body,t)]);if(e.alignment!=="rlap"){var n=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});kr({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,s=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",i=n.parseExpression(!1,a);return n.expect(a),n.switchMode(s),{type:"styling",mode:n.mode,style:"text",body:i}}});kr({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new tr("Mismatched "+e.funcName)}});var zF=(e,t)=>{switch(t.style.size){case Yr.DISPLAY.size:return e.display;case Yr.TEXT.size:return e.text;case Yr.SCRIPT.size:return e.script;case Yr.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};kr({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:Ea(t[0]),text:Ea(t[1]),script:Ea(t[2]),scriptscript:Ea(t[3])}},htmlBuilder:(e,t)=>{var r=zF(e,t),n=ni(r,t,!1);return ht.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=zF(e,t);return Hf(r,t)}});var qW=(e,t,r,n,s,a,i)=>{e=ht.makeSpan([],[e]);var o=r&&Un.isCharacterBox(r),c,u;if(t){var d=In(t,n.havingStyle(s.sup()),n);u={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var f=In(r,n.havingStyle(s.sub()),n);c={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-f.height)}}var h;if(u&&c){var g=n.fontMetrics().bigOpSpacing5+c.elem.height+c.elem.depth+c.kern+e.depth+i;h=ht.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:pr(-a)},{type:"kern",size:c.kern},{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:pr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(c){var x=e.height-i;h=ht.makeVList({positionType:"top",positionData:x,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:pr(-a)},{type:"kern",size:c.kern},{type:"elem",elem:e}]},n)}else if(u){var y=e.depth+i;h=ht.makeVList({positionType:"bottom",positionData:y,children:[{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:pr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return e;var v=[h];if(c&&a!==0&&!o){var T=ht.makeSpan(["mspace"],[],n);T.style.marginRight=pr(a),v.unshift(T)}return ht.makeSpan(["mop","op-limits"],v,n)},KW=["\\smallint"],b1=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=bn(e.base,"op"),s=!0):a=bn(e,"op");var i=t.style,o=!1;i.size===Yr.DISPLAY.size&&a.symbol&&!KW.includes(a.name)&&(o=!0);var c;if(a.symbol){var u=o?"Size2-Regular":"Size1-Regular",d="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(d=a.name.slice(1),a.name=d==="oiint"?"\\iint":"\\iiint"),c=ht.makeSymbol(a.name,u,"math",t,["mop","op-symbol",o?"large-op":"small-op"]),d.length>0){var f=c.italic,h=ht.staticSvg(d+"Size"+(o?"2":"1"),t);c=ht.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:h,shift:o?.08:0}]},t),a.name="\\"+d,c.classes.unshift("mop"),c.italic=f}}else if(a.body){var g=ni(a.body,t,!0);g.length===1&&g[0]instanceof _c?(c=g[0],c.classes[0]="mop"):c=ht.makeSpan(["mop"],g,t)}else{for(var x=[],y=1;y<a.name.length;y++)x.push(ht.mathsym(a.name[y],a.mode,t));c=ht.makeSpan(["mop"],x,t)}var v=0,T=0;return(c instanceof _c||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(v=(c.height-c.depth)/2-t.fontMetrics().axisHeight,T=c.italic),s?qW(c,r,n,t,i,T,v):(v&&(c.style.position="relative",c.style.top=pr(v)),c)},v2=(e,t)=>{var r;if(e.symbol)r=new Ml("mo",[Sc(e.name,e.mode)]),KW.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Ml("mo",hl(e.body,t));else{r=new Ml("mi",[new Wu(e.name.slice(1))]);var n=new Ml("mo",[Sc("","text")]);e.parentIsSupSub?r=new Ml("mrow",[r,n]):r=_W([r,n])}return r},pde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};kr({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=n;return s.length===1&&(s=pde[s]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:b1,mathmlBuilder:v2});kr({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Ea(n)}},htmlBuilder:b1,mathmlBuilder:v2});var xde={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};kr({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:b1,mathmlBuilder:v2});kr({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:b1,mathmlBuilder:v2});kr({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return n.length===1&&(n=xde[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:b1,mathmlBuilder:v2});var YW=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=bn(e.base,"operatorname"),s=!0):a=bn(e,"operatorname");var i;if(a.body.length>0){for(var o=a.body.map(f=>{var h=f.text;return typeof h=="string"?{type:"textord",mode:f.mode,text:h}:f}),c=ni(o,t.withFont("mathrm"),!0),u=0;u<c.length;u++){var d=c[u];d instanceof _c&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=ht.makeSpan(["mop"],c,t)}else i=ht.makeSpan(["mop"],[],t);return s?qW(i,r,n,t,t.style,0,0):i},yde=(e,t)=>{for(var r=hl(e.body,t.withFont("mathrm")),n=!0,s=0;s<r.length;s++){var a=r[s];if(!(a instanceof Zt.SpaceNode))if(a instanceof Zt.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=a.children[0];a.children.length===1&&i instanceof Zt.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=r.map(d=>d.toText()).join("");r=[new Zt.TextNode(o)]}var c=new Zt.MathNode("mi",r);c.setAttribute("mathvariant","normal");var u=new Zt.MathNode("mo",[Sc("","text")]);return e.parentIsSupSub?new Zt.MathNode("mrow",[c,u]):Zt.newDocumentFragment([c,u])};kr({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"operatorname",mode:r.mode,body:Ea(s),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:YW,mathmlBuilder:yde});_e("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Ym({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?ht.makeFragment(ni(e.body,t,!1)):ht.makeSpan(["mord"],ni(e.body,t,!0),t)},mathmlBuilder(e,t){return Hf(e.body,t,!0)}});kr({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=In(e.body,t.havingCrampedStyle()),n=ht.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,a=ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n},{type:"kern",size:s}]},t);return ht.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var r=new Zt.MathNode("mo",[new Zt.TextNode("")]);r.setAttribute("stretchy","true");var n=new Zt.MathNode("mover",[ws(e.body,t),r]);return n.setAttribute("accent","true"),n}});kr({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:Ea(n)}},htmlBuilder:(e,t)=>{var r=ni(e.body,t.withPhantom(),!1);return ht.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=hl(e.body,t);return new Zt.MathNode("mphantom",r)}});kr({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=ht.makeSpan([],[In(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),ht.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=hl(Ea(e.body),t),n=new Zt.MathNode("mphantom",r),s=new Zt.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});kr({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=ht.makeSpan(["inner"],[In(e.body,t.withPhantom())]),n=ht.makeSpan(["fix"],[]);return ht.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=hl(Ea(e.body),t),n=new Zt.MathNode("mphantom",r),s=new Zt.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});kr({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=bn(t[0],"size").value,s=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:s}},htmlBuilder(e,t){var r=In(e.body,t),n=Js(e.dy,t);return ht.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new Zt.MathNode("mpadded",[ws(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}});kr({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});kr({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,s=r[0],a=bn(t[0],"size"),i=bn(t[1],"size");return{type:"rule",mode:n.mode,shift:s&&bn(s,"size").value,width:a.value,height:i.value}},htmlBuilder(e,t){var r=ht.makeSpan(["mord","rule"],[],t),n=Js(e.width,t),s=Js(e.height,t),a=e.shift?Js(e.shift,t):0;return r.style.borderRightWidth=pr(n),r.style.borderTopWidth=pr(s),r.style.bottom=pr(a),r.width=n,r.height=s+a,r.depth=-a,r.maxFontSize=s*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=Js(e.width,t),n=Js(e.height,t),s=e.shift?Js(e.shift,t):0,a=t.color&&t.getColor()||"black",i=new Zt.MathNode("mspace");i.setAttribute("mathbackground",a),i.setAttribute("width",pr(r)),i.setAttribute("height",pr(n));var o=new Zt.MathNode("mpadded",[i]);return s>=0?o.setAttribute("height",pr(s)):(o.setAttribute("height",pr(s)),o.setAttribute("depth",pr(-s))),o.setAttribute("voffset",pr(s)),o}});function XW(e,t,r){for(var n=ni(e,t,!1),s=t.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var i=n[a].classes.indexOf("sizing");i<0?Array.prototype.push.apply(n[a].classes,t.sizingClasses(r)):n[a].classes[i+1]==="reset-size"+t.size&&(n[a].classes[i+1]="reset-size"+r.size),n[a].height*=s,n[a].depth*=s}return ht.makeFragment(n)}var UF=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],vde=(e,t)=>{var r=t.havingSize(e.size);return XW(e.body,r,t)};kr({type:"sizing",names:UF,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!1,r);return{type:"sizing",mode:s.mode,size:UF.indexOf(n)+1,body:a}},htmlBuilder:vde,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=hl(e.body,r),s=new Zt.MathNode("mstyle",n);return s.setAttribute("mathsize",pr(r.sizeMultiplier)),s}});kr({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,s=!1,a=!1,i=r[0]&&bn(r[0],"ordgroup");if(i)for(var o="",c=0;c<i.body.length;++c){var u=i.body[c];if(o=u.text,o==="t")s=!0;else if(o==="b")a=!0;else{s=!1,a=!1;break}}else s=!0,a=!0;var d=t[0];return{type:"smash",mode:n.mode,body:d,smashHeight:s,smashDepth:a}},htmlBuilder:(e,t)=>{var r=ht.makeSpan([],[In(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].depth=0;var a=ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return ht.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var r=new Zt.MathNode("mpadded",[ws(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});kr({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,s=r[0],a=t[0];return{type:"sqrt",mode:n.mode,body:a,index:s}},htmlBuilder(e,t){var r=In(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=ht.wrapFragment(r,t);var n=t.fontMetrics(),s=n.defaultRuleThickness,a=s;t.style.id<Yr.TEXT.id&&(a=t.fontMetrics().xHeight);var i=s+a/4,o=r.height+r.depth+i+s,{span:c,ruleWidth:u,advanceWidth:d}=Zd.sqrtImage(o,t),f=c.height-u;f>r.height+r.depth+i&&(i=(i+f-r.height-r.depth)/2);var h=c.height-r.height-i-u;r.style.paddingLeft=pr(d);var g=ht.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+h)},{type:"elem",elem:c},{type:"kern",size:u}]},t);if(e.index){var x=t.havingStyle(Yr.SCRIPTSCRIPT),y=In(e.index,x,t),v=.6*(g.height-g.depth),T=ht.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:y}]},t),k=ht.makeSpan(["root"],[T]);return ht.makeSpan(["mord","sqrt"],[k,g],t)}else return ht.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new Zt.MathNode("mroot",[ws(r,t),ws(n,t)]):new Zt.MathNode("msqrt",[ws(r,t)])}});var WF={display:Yr.DISPLAY,text:Yr.TEXT,script:Yr.SCRIPT,scriptscript:Yr.SCRIPTSCRIPT};kr({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!0,r),i=n.slice(1,n.length-5);return{type:"styling",mode:s.mode,style:i,body:a}},htmlBuilder(e,t){var r=WF[e.style],n=t.havingStyle(r).withFont("");return XW(e.body,n,t)},mathmlBuilder(e,t){var r=WF[e.style],n=t.havingStyle(r),s=hl(e.body,n),a=new Zt.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=i[e.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});var wde=function(t,r){var n=t.base;if(n)if(n.type==="op"){var s=n.limits&&(r.style.size===Yr.DISPLAY.size||n.alwaysHandleSupSub);return s?b1:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===Yr.DISPLAY.size||n.limits);return a?YW:null}else{if(n.type==="accent")return Un.isCharacterBox(n.base)?$7:null;if(n.type==="horizBrace"){var i=!t.sub;return i===n.isOver?VW:null}else return null}else return null};Ym({type:"supsub",htmlBuilder(e,t){var r=wde(e,t);if(r)return r(e,t);var{base:n,sup:s,sub:a}=e,i=In(n,t),o,c,u=t.fontMetrics(),d=0,f=0,h=n&&Un.isCharacterBox(n);if(s){var g=t.havingStyle(t.style.sup());o=In(s,g,t),h||(d=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(a){var x=t.havingStyle(t.style.sub());c=In(a,x,t),h||(f=i.depth+x.fontMetrics().subDrop*x.sizeMultiplier/t.sizeMultiplier)}var y;t.style===Yr.DISPLAY?y=u.sup1:t.style.cramped?y=u.sup3:y=u.sup2;var v=t.sizeMultiplier,T=pr(.5/u.ptPerEm/v),k=null;if(c){var b=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof _c||b)&&(k=pr(-i.italic))}var C;if(o&&c){d=Math.max(d,y,o.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var E=u.defaultRuleThickness,j=4*E;if(d-o.depth-(c.height-f)<j){f=j-(d-o.depth)+c.height;var P=.8*u.xHeight-(d-o.depth);P>0&&(d+=P,f-=P)}var A=[{type:"elem",elem:c,shift:f,marginRight:T,marginLeft:k},{type:"elem",elem:o,shift:-d,marginRight:T}];C=ht.makeVList({positionType:"individualShift",children:A},t)}else if(c){f=Math.max(f,u.sub1,c.height-.8*u.xHeight);var M=[{type:"elem",elem:c,marginLeft:k,marginRight:T}];C=ht.makeVList({positionType:"shift",positionData:f,children:M},t)}else if(o)d=Math.max(d,y,o.depth+.25*u.xHeight),C=ht.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:T}]},t);else throw new Error("supsub must have either sup or sub.");var F=R8(i,"right")||"mord";return ht.makeSpan([F],[i,ht.makeSpan(["msupsub"],[C])],t)},mathmlBuilder(e,t){var r=!1,n,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(r=!0,n=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var a=[ws(e.base,t)];e.sub&&a.push(ws(e.sub,t)),e.sup&&a.push(ws(e.sup,t));var i;if(r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===Yr.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===Yr.DISPLAY||u.limits)?i="munderover":i="msubsup"}else{var c=e.base;c&&c.type==="op"&&c.limits&&(t.style===Yr.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||t.style===Yr.DISPLAY)?i="munder":i="msub"}else{var o=e.base;o&&o.type==="op"&&o.limits&&(t.style===Yr.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||t.style===Yr.DISPLAY)?i="mover":i="msup"}return new Zt.MathNode(i,a)}});Ym({type:"atom",htmlBuilder(e,t){return ht.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new Zt.MathNode("mo",[Sc(e.text,e.mode)]);if(e.family==="bin"){var n=L7(e,t);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var JW={mi:"italic",mn:"normal",mtext:"normal"};Ym({type:"mathord",htmlBuilder(e,t){return ht.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new Zt.MathNode("mi",[Sc(e.text,e.mode,t)]),n=L7(e,t)||"italic";return n!==JW[r.type]&&r.setAttribute("mathvariant",n),r}});Ym({type:"textord",htmlBuilder(e,t){return ht.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=Sc(e.text,e.mode,t),n=L7(e,t)||"normal",s;return e.mode==="text"?s=new Zt.MathNode("mtext",[r]):/[0-9]/.test(e.text)?s=new Zt.MathNode("mn",[r]):e.text==="\\prime"?s=new Zt.MathNode("mo",[r]):s=new Zt.MathNode("mi",[r]),n!==JW[s.type]&&s.setAttribute("mathvariant",n),s}});var F5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},D5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Ym({type:"spacing",htmlBuilder(e,t){if(D5.hasOwnProperty(e.text)){var r=D5[e.text].className||"";if(e.mode==="text"){var n=ht.makeOrd(e,t,"textord");return n.classes.push(r),n}else return ht.makeSpan(["mspace",r],[ht.mathsym(e.text,e.mode,t)],t)}else{if(F5.hasOwnProperty(e.text))return ht.makeSpan(["mspace",F5[e.text]],[],t);throw new tr('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(D5.hasOwnProperty(e.text))r=new Zt.MathNode("mtext",[new Zt.TextNode("")]);else{if(F5.hasOwnProperty(e.text))return new Zt.MathNode("mspace");throw new tr('Unknown type of space "'+e.text+'"')}return r}});var HF=()=>{var e=new Zt.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};Ym({type:"tag",mathmlBuilder(e,t){var r=new Zt.MathNode("mtable",[new Zt.MathNode("mtr",[HF(),new Zt.MathNode("mtd",[Hf(e.body,t)]),HF(),new Zt.MathNode("mtd",[Hf(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var GF={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},VF={"\\textbf":"textbf","\\textmd":"textmd"},bde={"\\textit":"textit","\\textup":"textup"},qF=(e,t)=>{var r=e.font;if(r){if(GF[r])return t.withTextFontFamily(GF[r]);if(VF[r])return t.withTextFontWeight(VF[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(bde[r])};kr({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"text",mode:r.mode,body:Ea(s),font:n}},htmlBuilder(e,t){var r=qF(e,t),n=ni(e.body,r,!0);return ht.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=qF(e,t);return Hf(e.body,r)}});kr({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=In(e.body,t),n=ht.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,a=ht.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:s},{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r}]},t);return ht.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var r=new Zt.MathNode("mo",[new Zt.TextNode("")]);r.setAttribute("stretchy","true");var n=new Zt.MathNode("munder",[ws(e.body,t),r]);return n.setAttribute("accentunder","true"),n}});kr({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=In(e.body,t),n=t.fontMetrics().axisHeight,s=.5*(r.height-n-(r.depth+n));return ht.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new Zt.MathNode("mpadded",[ws(e.body,t)],["vcenter"])}});kr({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new tr("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=KF(e),n=[],s=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var i=r[a];i==="~"&&(i="\\textasciitilde"),n.push(ht.makeSymbol(i,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return ht.makeSpan(["mord","text"].concat(s.sizingClasses(t)),ht.tryCombineChars(n),s)},mathmlBuilder(e,t){var r=new Zt.TextNode(KF(e)),n=new Zt.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var KF=e=>e.body.replace(/ /g,e.star?"":""),Ef=wW,QW=`[ \r
	]`,_de="\\\\[a-zA-Z@]+",Sde="\\\\[^\uD800-\uDFFF]",kde="("+_de+")"+QW+"*",Tde=`\\\\(
|[ \r	]+
?)[ \r	]*`,$8="[-]",Cde=new RegExp($8+"+$"),Nde="("+QW+"+)|"+(Tde+"|")+"([!-\\[\\]---]"+($8+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+($8+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+kde)+("|"+Sde+")");class YF{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(Nde,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new Rl("EOF",new al(this,r,r));var n=this.tokenRegex.exec(t);if(n===null||n.index!==r)throw new tr("Unexpected character: '"+t[r]+"'",new Rl(t[r],new al(this,r,r+1)));var s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Rl(s,new al(this,r,this.tokenRegex.lastIndex))}}class Ede{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new tr("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,n){if(n===void 0&&(n=!1),n){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var Ade=zW;_e("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});_e("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});_e("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});_e("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});_e("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});_e("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");_e("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var XF={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};_e("\\char",function(e){var t=e.popToken(),r,n="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")n=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new tr("\\char` missing argument");n=t.text.charCodeAt(0)}else r=10;if(r){if(n=XF[t.text],n==null||n>=r)throw new tr("Invalid base-"+r+" digit "+t.text);for(var s;(s=XF[e.future().text])!=null&&s<r;)n*=r,n+=s,e.popToken()}return"\\@char{"+n+"}"});var K7=(e,t,r,n)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new tr("\\newcommand's first argument must be a macro name");var a=s[0].text,i=e.isDefined(a);if(i&&!t)throw new tr("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!i&&!r)throw new tr("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var c="",u=e.expandNextToken();u.text!=="]"&&u.text!=="EOF";)c+=u.text,u=e.expandNextToken();if(!c.match(/^\s*[0-9]+\s*$/))throw new tr("Invalid number of arguments: "+c);o=parseInt(c),s=e.consumeArg().tokens}return i&&n||e.macros.set(a,{tokens:s,numArgs:o}),""};_e("\\newcommand",e=>K7(e,!1,!0,!1));_e("\\renewcommand",e=>K7(e,!0,!1,!1));_e("\\providecommand",e=>K7(e,!0,!0,!0));_e("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});_e("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});_e("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Ef[r],Cs.math[r],Cs.text[r]),""});_e("\\bgroup","{");_e("\\egroup","}");_e("~","\\nobreakspace");_e("\\lq","`");_e("\\rq","'");_e("\\aa","\\r a");_e("\\AA","\\r A");_e("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");_e("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");_e("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");_e("","\\mathscr{B}");_e("","\\mathscr{E}");_e("","\\mathscr{F}");_e("","\\mathscr{H}");_e("","\\mathscr{I}");_e("","\\mathscr{L}");_e("","\\mathscr{M}");_e("","\\mathscr{R}");_e("","\\mathfrak{C}");_e("","\\mathfrak{H}");_e("","\\mathfrak{Z}");_e("\\Bbbk","\\Bbb{k}");_e("","\\cdotp");_e("\\llap","\\mathllap{\\textrm{#1}}");_e("\\rlap","\\mathrlap{\\textrm{#1}}");_e("\\clap","\\mathclap{\\textrm{#1}}");_e("\\mathstrut","\\vphantom{(}");_e("\\underbar","\\underline{\\text{#1}}");_e("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');_e("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");_e("\\ne","\\neq");_e("","\\neq");_e("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");_e("","\\notin");_e("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");_e("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");_e("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");_e("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");_e("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");_e("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");_e("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");_e("","\\perp");_e("","\\mathclose{!\\mkern-0.8mu!}");_e("","\\notni");_e("","\\ulcorner");_e("","\\urcorner");_e("","\\llcorner");_e("","\\lrcorner");_e("","\\copyright");_e("","\\textregistered");_e("","\\textregistered");_e("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');_e("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');_e("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');_e("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');_e("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");_e("","\\vdots");_e("\\varGamma","\\mathit{\\Gamma}");_e("\\varDelta","\\mathit{\\Delta}");_e("\\varTheta","\\mathit{\\Theta}");_e("\\varLambda","\\mathit{\\Lambda}");_e("\\varXi","\\mathit{\\Xi}");_e("\\varPi","\\mathit{\\Pi}");_e("\\varSigma","\\mathit{\\Sigma}");_e("\\varUpsilon","\\mathit{\\Upsilon}");_e("\\varPhi","\\mathit{\\Phi}");_e("\\varPsi","\\mathit{\\Psi}");_e("\\varOmega","\\mathit{\\Omega}");_e("\\substack","\\begin{subarray}{c}#1\\end{subarray}");_e("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");_e("\\boxed","\\fbox{$\\displaystyle{#1}$}");_e("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");_e("\\implies","\\DOTSB\\;\\Longrightarrow\\;");_e("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");_e("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");_e("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var JF={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};_e("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in JF?t=JF[r]:(r.slice(0,4)==="\\not"||r in Cs.math&&["bin","rel"].includes(Cs.math[r].group))&&(t="\\dotsb"),t});var Y7={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};_e("\\dotso",function(e){var t=e.future().text;return t in Y7?"\\ldots\\,":"\\ldots"});_e("\\dotsc",function(e){var t=e.future().text;return t in Y7&&t!==","?"\\ldots\\,":"\\ldots"});_e("\\cdots",function(e){var t=e.future().text;return t in Y7?"\\@cdots\\,":"\\@cdots"});_e("\\dotsb","\\cdots");_e("\\dotsm","\\cdots");_e("\\dotsi","\\!\\cdots");_e("\\dotsx","\\ldots\\,");_e("\\DOTSI","\\relax");_e("\\DOTSB","\\relax");_e("\\DOTSX","\\relax");_e("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");_e("\\,","\\tmspace+{3mu}{.1667em}");_e("\\thinspace","\\,");_e("\\>","\\mskip{4mu}");_e("\\:","\\tmspace+{4mu}{.2222em}");_e("\\medspace","\\:");_e("\\;","\\tmspace+{5mu}{.2777em}");_e("\\thickspace","\\;");_e("\\!","\\tmspace-{3mu}{.1667em}");_e("\\negthinspace","\\!");_e("\\negmedspace","\\tmspace-{4mu}{.2222em}");_e("\\negthickspace","\\tmspace-{5mu}{.277em}");_e("\\enspace","\\kern.5em ");_e("\\enskip","\\hskip.5em\\relax");_e("\\quad","\\hskip1em\\relax");_e("\\qquad","\\hskip2em\\relax");_e("\\tag","\\@ifstar\\tag@literal\\tag@paren");_e("\\tag@paren","\\tag@literal{({#1})}");_e("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new tr("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});_e("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");_e("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");_e("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");_e("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");_e("\\newline","\\\\\\relax");_e("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var ZW=pr(Uu["Main-Regular"][84][1]-.7*Uu["Main-Regular"][65][1]);_e("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+ZW+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");_e("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+ZW+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");_e("\\hspace","\\@ifstar\\@hspacer\\@hspace");_e("\\@hspace","\\hskip #1\\relax");_e("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");_e("\\ordinarycolon",":");_e("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");_e("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');_e("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');_e("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');_e("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');_e("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');_e("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');_e("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');_e("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');_e("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');_e("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');_e("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');_e("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');_e("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');_e("","\\dblcolon");_e("","\\eqcolon");_e("","\\coloneqq");_e("","\\eqqcolon");_e("","\\Coloneqq");_e("\\ratio","\\vcentcolon");_e("\\coloncolon","\\dblcolon");_e("\\colonequals","\\coloneqq");_e("\\coloncolonequals","\\Coloneqq");_e("\\equalscolon","\\eqqcolon");_e("\\equalscoloncolon","\\Eqqcolon");_e("\\colonminus","\\coloneq");_e("\\coloncolonminus","\\Coloneq");_e("\\minuscolon","\\eqcolon");_e("\\minuscoloncolon","\\Eqcolon");_e("\\coloncolonapprox","\\Colonapprox");_e("\\coloncolonsim","\\Colonsim");_e("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");_e("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");_e("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");_e("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");_e("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");_e("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");_e("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");_e("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");_e("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");_e("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");_e("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");_e("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");_e("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");_e("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");_e("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");_e("\\ngeqq","\\html@mathml{\\@ngeqq}{}");_e("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");_e("\\nleqq","\\html@mathml{\\@nleqq}{}");_e("\\nleqslant","\\html@mathml{\\@nleqslant}{}");_e("\\nshortmid","\\html@mathml{\\@nshortmid}{}");_e("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");_e("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");_e("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");_e("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");_e("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");_e("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");_e("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");_e("\\imath","\\html@mathml{\\@imath}{}");_e("\\jmath","\\html@mathml{\\@jmath}{}");_e("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");_e("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");_e("","\\llbracket");_e("","\\rrbracket");_e("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");_e("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");_e("","\\lBrace");_e("","\\rBrace");_e("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");_e("","\\minuso");_e("\\darr","\\downarrow");_e("\\dArr","\\Downarrow");_e("\\Darr","\\Downarrow");_e("\\lang","\\langle");_e("\\rang","\\rangle");_e("\\uarr","\\uparrow");_e("\\uArr","\\Uparrow");_e("\\Uarr","\\Uparrow");_e("\\N","\\mathbb{N}");_e("\\R","\\mathbb{R}");_e("\\Z","\\mathbb{Z}");_e("\\alef","\\aleph");_e("\\alefsym","\\aleph");_e("\\Alpha","\\mathrm{A}");_e("\\Beta","\\mathrm{B}");_e("\\bull","\\bullet");_e("\\Chi","\\mathrm{X}");_e("\\clubs","\\clubsuit");_e("\\cnums","\\mathbb{C}");_e("\\Complex","\\mathbb{C}");_e("\\Dagger","\\ddagger");_e("\\diamonds","\\diamondsuit");_e("\\empty","\\emptyset");_e("\\Epsilon","\\mathrm{E}");_e("\\Eta","\\mathrm{H}");_e("\\exist","\\exists");_e("\\harr","\\leftrightarrow");_e("\\hArr","\\Leftrightarrow");_e("\\Harr","\\Leftrightarrow");_e("\\hearts","\\heartsuit");_e("\\image","\\Im");_e("\\infin","\\infty");_e("\\Iota","\\mathrm{I}");_e("\\isin","\\in");_e("\\Kappa","\\mathrm{K}");_e("\\larr","\\leftarrow");_e("\\lArr","\\Leftarrow");_e("\\Larr","\\Leftarrow");_e("\\lrarr","\\leftrightarrow");_e("\\lrArr","\\Leftrightarrow");_e("\\Lrarr","\\Leftrightarrow");_e("\\Mu","\\mathrm{M}");_e("\\natnums","\\mathbb{N}");_e("\\Nu","\\mathrm{N}");_e("\\Omicron","\\mathrm{O}");_e("\\plusmn","\\pm");_e("\\rarr","\\rightarrow");_e("\\rArr","\\Rightarrow");_e("\\Rarr","\\Rightarrow");_e("\\real","\\Re");_e("\\reals","\\mathbb{R}");_e("\\Reals","\\mathbb{R}");_e("\\Rho","\\mathrm{P}");_e("\\sdot","\\cdot");_e("\\sect","\\S");_e("\\spades","\\spadesuit");_e("\\sub","\\subset");_e("\\sube","\\subseteq");_e("\\supe","\\supseteq");_e("\\Tau","\\mathrm{T}");_e("\\thetasym","\\vartheta");_e("\\weierp","\\wp");_e("\\Zeta","\\mathrm{Z}");_e("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");_e("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");_e("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");_e("\\bra","\\mathinner{\\langle{#1}|}");_e("\\ket","\\mathinner{|{#1}\\rangle}");_e("\\braket","\\mathinner{\\langle{#1}\\rangle}");_e("\\Bra","\\left\\langle#1\\right|");_e("\\Ket","\\left|#1\\right\\rangle");var eH=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,s=t.consumeArg().tokens,a=t.consumeArg().tokens,i=t.macros.get("|"),o=t.macros.get("\\|");t.macros.beginGroup();var c=f=>h=>{e&&(h.macros.set("|",i),s.length&&h.macros.set("\\|",o));var g=f;if(!f&&s.length){var x=h.future();x.text==="|"&&(h.popToken(),g=!0)}return{tokens:g?s:n,numArgs:0}};t.macros.set("|",c(!1)),s.length&&t.macros.set("\\|",c(!0));var u=t.consumeArg().tokens,d=t.expandTokens([...a,...u,...r]);return t.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};_e("\\bra@ket",eH(!1));_e("\\bra@set",eH(!0));_e("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");_e("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");_e("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");_e("\\angln","{\\angl n}");_e("\\blue","\\textcolor{##6495ed}{#1}");_e("\\orange","\\textcolor{##ffa500}{#1}");_e("\\pink","\\textcolor{##ff00af}{#1}");_e("\\red","\\textcolor{##df0030}{#1}");_e("\\green","\\textcolor{##28ae7b}{#1}");_e("\\gray","\\textcolor{gray}{#1}");_e("\\purple","\\textcolor{##9d38bd}{#1}");_e("\\blueA","\\textcolor{##ccfaff}{#1}");_e("\\blueB","\\textcolor{##80f6ff}{#1}");_e("\\blueC","\\textcolor{##63d9ea}{#1}");_e("\\blueD","\\textcolor{##11accd}{#1}");_e("\\blueE","\\textcolor{##0c7f99}{#1}");_e("\\tealA","\\textcolor{##94fff5}{#1}");_e("\\tealB","\\textcolor{##26edd5}{#1}");_e("\\tealC","\\textcolor{##01d1c1}{#1}");_e("\\tealD","\\textcolor{##01a995}{#1}");_e("\\tealE","\\textcolor{##208170}{#1}");_e("\\greenA","\\textcolor{##b6ffb0}{#1}");_e("\\greenB","\\textcolor{##8af281}{#1}");_e("\\greenC","\\textcolor{##74cf70}{#1}");_e("\\greenD","\\textcolor{##1fab54}{#1}");_e("\\greenE","\\textcolor{##0d923f}{#1}");_e("\\goldA","\\textcolor{##ffd0a9}{#1}");_e("\\goldB","\\textcolor{##ffbb71}{#1}");_e("\\goldC","\\textcolor{##ff9c39}{#1}");_e("\\goldD","\\textcolor{##e07d10}{#1}");_e("\\goldE","\\textcolor{##a75a05}{#1}");_e("\\redA","\\textcolor{##fca9a9}{#1}");_e("\\redB","\\textcolor{##ff8482}{#1}");_e("\\redC","\\textcolor{##f9685d}{#1}");_e("\\redD","\\textcolor{##e84d39}{#1}");_e("\\redE","\\textcolor{##bc2612}{#1}");_e("\\maroonA","\\textcolor{##ffbde0}{#1}");_e("\\maroonB","\\textcolor{##ff92c6}{#1}");_e("\\maroonC","\\textcolor{##ed5fa6}{#1}");_e("\\maroonD","\\textcolor{##ca337c}{#1}");_e("\\maroonE","\\textcolor{##9e034e}{#1}");_e("\\purpleA","\\textcolor{##ddd7ff}{#1}");_e("\\purpleB","\\textcolor{##c6b9fc}{#1}");_e("\\purpleC","\\textcolor{##aa87ff}{#1}");_e("\\purpleD","\\textcolor{##7854ab}{#1}");_e("\\purpleE","\\textcolor{##543b78}{#1}");_e("\\mintA","\\textcolor{##f5f9e8}{#1}");_e("\\mintB","\\textcolor{##edf2df}{#1}");_e("\\mintC","\\textcolor{##e0e5cc}{#1}");_e("\\grayA","\\textcolor{##f6f7f7}{#1}");_e("\\grayB","\\textcolor{##f0f1f2}{#1}");_e("\\grayC","\\textcolor{##e3e5e6}{#1}");_e("\\grayD","\\textcolor{##d6d8da}{#1}");_e("\\grayE","\\textcolor{##babec2}{#1}");_e("\\grayF","\\textcolor{##888d93}{#1}");_e("\\grayG","\\textcolor{##626569}{#1}");_e("\\grayH","\\textcolor{##3b3e40}{#1}");_e("\\grayI","\\textcolor{##21242c}{#1}");_e("\\kaBlue","\\textcolor{##314453}{#1}");_e("\\kaGreen","\\textcolor{##71B307}{#1}");var tH={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class jde{constructor(t,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new Ede(Ade,r.macros),this.mode=n,this.stack=[]}feed(t){this.lexer=new YF(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,n,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new Rl("EOF",n.loc)),this.pushTokens(s),new Rl("",al.range(r,n))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],n=t&&t.length>0;n||this.consumeSpaces();var s=this.future(),a,i=0,o=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++i;else if(a.text==="}"){if(--i,i===-1)throw new tr("Extra }",a)}else if(a.text==="EOF")throw new tr("Unexpected end of input in a macro argument, expected '"+(t&&n?t[o]:"}")+"'",a);if(t&&n)if((i===0||i===1&&t[o]==="{")&&a.text===t[o]){if(++o,o===t.length){r.splice(-o,o);break}}else o=0}while(i!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:a}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new tr("The length of delimiters doesn't match the number of args!");for(var n=r[0],s=0;s<n.length;s++){var a=this.popToken();if(n[s]!==a.text)throw new tr("Use of the macro doesn't match its definition",a)}}for(var i=[],o=0;o<t;o++)i.push(this.consumeArg(r&&r[o+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new tr("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||t&&s.unexpandable){if(t&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new tr("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){a=a.slice();for(var o=a.length-1;o>=0;--o){var c=a[o];if(c.text==="#"){if(o===0)throw new tr("Incomplete placeholder at end of macro body",c);if(c=a[--o],c.text==="#")a.splice(o+1,1);else if(/^[1-9]$/.test(c.text))a.splice(o,2,...i[+c.text-1]);else throw new tr("Not a valid argument number",c)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Rl(t)]):void 0}expandTokens(t){var r=[],n=this.stack.length;for(this.pushTokens(t);this.stack.length>n;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(n=>n.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var n=this.lexer.catcodes[t];if(n!=null&&n!==13)return}var s=typeof r=="function"?r(this):r;if(typeof s=="string"){var a=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(a+1))!==-1;)++a;for(var o=new YF(s,this.settings),c=[],u=o.lex();u.text!=="EOF";)c.push(u),u=o.lex();c.reverse();var d={tokens:c,numArgs:a};return d}return s}isDefined(t){return this.macros.has(t)||Ef.hasOwnProperty(t)||Cs.math.hasOwnProperty(t)||Cs.text.hasOwnProperty(t)||tH.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Ef.hasOwnProperty(t)&&!Ef[t].primitive}}var QF=/^[]/,db=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),O5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},ZF={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class i3{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new jde(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new tr("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Rl("}")),this.gullet.pushTokens(t);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(t,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(i3.endOfExpression.indexOf(s.text)!==-1||r&&s.text===r||t&&Ef[s.text]&&Ef[s.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(t){for(var r=-1,n,s=0;s<t.length;s++)if(t[s].type==="infix"){if(r!==-1)throw new tr("only one infix operator per group",t[s].token);r=s,n=t[s].replaceWith}if(r!==-1&&n){var a,i,o=t.slice(0,r),c=t.slice(r+1);o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o},c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c};var u;return n==="\\\\abovefrac"?u=this.callFunction(n,[a,t[r],i],[]):u=this.callFunction(n,[a,i],[]),[u]}else return t}handleSupSubscript(t){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var s;do{var a;s=this.parseGroup(t)}while(((a=s)==null?void 0:a.type)==="internal");if(!s)throw new tr("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(t){for(var r=[],n=0;n<t.length;n++)r.push({type:"textord",mode:"text",text:t[n]});var s={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return a}parseAtom(t){var r=this.parseGroup("atom",t);if(r?.type==="internal"||this.mode==="text")return r;for(var n,s;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var i=a.text==="\\limits";r.limits=i,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new tr("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new tr("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(s)throw new tr("Double subscript",a);s=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new tr("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},c=[o];for(this.consume();this.fetch().text==="'";)c.push(o),this.consume();this.fetch().text==="^"&&c.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:c}}else if(db[a.text]){var u=QF.test(a.text),d=[];for(d.push(new Rl(db[a.text])),this.consume();;){var f=this.fetch().text;if(!db[f]||QF.test(f)!==u)break;d.unshift(new Rl(db[f])),this.consume()}var h=this.subparse(d);u?s={type:"ordgroup",mode:"math",body:h}:n={type:"ordgroup",mode:"math",body:h}}else break}return n||s?{type:"supsub",mode:this.mode,base:r,sup:n,sub:s}:r}parseFunction(t,r){var n=this.fetch(),s=n.text,a=Ef[s];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new tr("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new tr("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new tr("Can't use function '"+s+"' in math mode",n);var{args:i,optArgs:o}=this.parseArguments(s,a);return this.callFunction(s,i,o,n,t)}callFunction(t,r,n,s,a){var i={funcName:t,parser:this,token:s,breakOnTokenText:a},o=Ef[t];if(o&&o.handler)return o.handler(i,r,n);throw new tr("No function handler for "+t)}parseArguments(t,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var s=[],a=[],i=0;i<n;i++){var o=r.argTypes&&r.argTypes[i],c=i<r.numOptionalArgs;(r.primitive&&o==null||r.type==="sqrt"&&i===1&&a[0]==null)&&(o="primitive");var u=this.parseGroupOfType("argument to '"+t+"'",o,c);if(c)a.push(u);else if(u!=null)s.push(u);else throw new tr("Null argument, please report this as a bug")}return{args:s,optArgs:a}}parseGroupOfType(t,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new tr("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new tr("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new tr("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var s="",a;(a=this.fetch()).text!=="EOF";)s+=a.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(t,r){for(var n=this.fetch(),s=n,a="",i;(i=this.fetch()).text!=="EOF"&&t.test(a+i.text);)s=i,a+=s.text,this.consume();if(a==="")throw new tr("Invalid "+r+": '"+n.text+"'",n);return n.range(s,a)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new tr("Invalid color: '"+r.text+"'",r);var s=n[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var r,n=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",n=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new tr("Invalid size: '"+r.text+"'",r);var a={number:+(s[1]+s[2]),unit:s[3]};if(!dW(a))throw new tr("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(t,r){var n=this.gullet.scanArgument(t);if(n==null)return null;var s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(s),i}parseGroup(t,r){var n=this.fetch(),s=n.text,a;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,i),c=this.fetch();this.expect(i),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:al.range(n,c),body:o,semisimple:s==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,t)||this.parseSymbol(),a==null&&s[0]==="\\"&&!tH.hasOwnProperty(s)){if(this.settings.throwOnError)throw new tr("Undefined control sequence: "+s,n);a=this.formatUnsupportedCmd(s),this.consume()}return a}formLigatures(t){for(var r=t.length-1,n=0;n<r;++n){var s=t[n],a=s.text;a==="-"&&t[n+1].text==="-"&&(n+1<r&&t[n+2].text==="-"?(t.splice(n,3,{type:"textord",mode:"text",loc:al.range(s,t[n+2]),text:"---"}),r-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:al.range(s,t[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&t[n+1].text===a&&(t.splice(n,2,{type:"textord",mode:"text",loc:al.range(s,t[n+1]),text:a+a}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),s=n.charAt(0)==="*";if(s&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new tr(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:s}}ZF.hasOwnProperty(r[0])&&!Cs[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=ZF[r[0]]+r.slice(1));var a=Cde.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var i;if(Cs[this.mode][r]){this.settings.strict&&this.mode==="math"&&O8.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var o=Cs[this.mode][r].group,c=al.range(t),u;if(yue.hasOwnProperty(o)){var d=o;u={type:"atom",mode:this.mode,family:d,loc:c,text:r}}else u={type:o,mode:this.mode,loc:c,text:r};i=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(uW(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:al.range(t),text:r};else return null;if(this.consume(),a)for(var f=0;f<a[0].length;f++){var h=a[0][f];if(!O5[h])throw new tr("Unknown accent ' "+h+"'",t);var g=O5[h][this.mode]||O5[h].text;if(!g)throw new tr("Accent "+h+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:al.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}}i3.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var X7=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new i3(t,r);delete n.gullet.macros.current["\\df@tag"];var s=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new tr("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:n.subparse([new Rl("\\df@tag")])}]}return s},rH=function(t,r,n){r.textContent="";var s=J7(t,n).toNode();r.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),rH=function(){throw new tr("KaTeX doesn't work in quirks mode.")});var Pde=function(t,r){var n=J7(t,r).toMarkup();return n},Mde=function(t,r){var n=new M7(r);return X7(t,n)},nH=function(t,r,n){if(n.throwOnError||!(t instanceof tr))throw t;var s=ht.makeSpan(["katex-error"],[new _c(r)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+n.errorColor),s},J7=function(t,r){var n=new M7(r);try{var s=X7(t,n);return zue(s,t,n)}catch(a){return nH(a,t,n)}},Fde=function(t,r){var n=new M7(r);try{var s=X7(t,n);return Uue(s,t,n)}catch(a){return nH(a,t,n)}},Dde="0.16.25",Ode={Span:y2,Anchor:O7,SymbolNode:_c,SvgNode:c0,PathNode:Wf,LineNode:D8},z8={version:Dde,render:rH,renderToString:Pde,ParseError:tr,SETTINGS_SCHEMA:Yb,__parse:Mde,__renderToDomTree:J7,__renderToHTMLTree:Fde,__setFontMetrics:uue,__defineSymbol:Q,__defineFunction:kr,__defineMacro:_e,__domTree:Ode};const U8=(e,t=!1)=>{if(!e||typeof e!="string")return"";try{return z8.renderToString(e,{throwOnError:!1,displayMode:t,strict:!1})}catch(r){return console.error("Math rendering error:",r),`<span class="math-error" title="Math rendering error">${W8(e)}</span>`}},ca=(e,t=!1)=>{if(!e||typeof e!="string")return"";let r=e;const n=/\$\$(.*?)\$\$/g;let s;const a=[];for(;(s=n.exec(e))!==null;)a.push({fullMatch:s[0],expression:s[1],index:s.index});for(let c=a.length-1;c>=0;c--){const{fullMatch:u,expression:d}=a[c];try{const f=z8.renderToString(d,{throwOnError:!1,displayMode:!0,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,W8(u))}}const i=/\$(.*?)\$/g,o=[];for(;(s=i.exec(r))!==null;)s[0].startsWith("$$")||o.push({fullMatch:s[0],expression:s[1],index:s.index});for(let c=o.length-1;c>=0;c--){const{fullMatch:u,expression:d}=o[c];try{const f=z8.renderToString(d,{throwOnError:!1,displayMode:!1,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,W8(u))}}return r},Rde=e=>{if(!e||typeof e!="string")return"";if(e.includes("$"))return e;const t=["\\sqrt","\\frac","\\times","\\div","\\cdot","\\pm","\\mp","\\leq","\\geq","\\neq","\\approx","\\equiv","\\sum","\\prod","\\int","\\lim","\\sin","\\cos","\\tan","\\log","\\ln","\\exp"],r=[];let n="",s=!1,a=0;for(let o=0;o<e.length;o++){const c=e[o],u=e[o+1]||"",d=e[o-1]||"",f=c+u;if(e.substring(o,o+3),c==="\\"){const h=e.substring(o).match(/^\\([a-zA-Z]+)/);if(h){const g="\\"+h[1];if(t.some(x=>g.startsWith(x))||g.length>1){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=c;continue}}}if(f==="^{"||f==="_{"||c==="^"||c==="_"){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=c;continue}if(c==="{"){if(s){a++,n+=c;continue}else if(d==="^"||d==="_"||d==="\\"){s=!0,n+=c,a++;continue}}if(c==="}"&&s){if(n+=c,a--,a===0){const h=e.substring(o+1).trim();(!h||h.match(/^[\s,.!?;:]/))&&(r.push({type:"math",content:n}),n="",s=!1)}continue}if(s){if(n+=c,c===" "&&a===0){const h=e.substring(o+1).trim();h&&!h.match(/^[\\^_{]/)&&(r.push({type:"math",content:n.trim()}),n="",s=!1,n+=c)}}else n+=c}n&&r.push({type:s?"math":"text",content:n});let i="";for(const o of r)o.type==="math"?i+=`$${o.content}$`:i+=o.content;return i},W8=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Ide=({isOpen:e=!1,onClose:t,onSave:r,initialValue:n="",cursorPosition:s=null,inputRef:a=null})=>{const[i,o]=_.useState(n),[c,u]=_.useState({start:0,end:0}),[d,f]=_.useState(null),[h,g]=_.useState(null),[x,y]=_.useState(!1),v=_.useRef(null);_.useRef(null),_.useEffect(()=>{e&&(o(n),f(null),g(null),setTimeout(()=>{v.current?.focus(),i&&v.current?.setSelectionRange(i.length,i.length)},100))},[e,n]);const T=()=>{const{start:M,end:F}=c,B=M>0?i.substring(M-1,M):"",V=B&&B.trim()&&!B.match(/[{}()]/);let ee="",ae=0;V?(ee="^{}",ae=-1):(ee="x^{2}",ae=-3);const Z=i.substring(0,M)+ee+i.substring(F);o(Z),setTimeout(()=>{v.current?.focus();const te=M+ee.length+ae;v.current?.setSelectionRange(te,te)},0)},k=()=>{const{start:M,end:F}=c,B=i.substring(M,F);if(B){const V=i.substring(0,M)+`\\sqrt{${B}}`+i.substring(F);o(V),setTimeout(()=>{v.current?.focus();const ee=M+B.length+8;v.current?.setSelectionRange(ee,ee)},0)}else{const V=i.substring(0,M)+"\\sqrt{}"+i.substring(F);o(V),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(M+6,M+6)},0)}},b=()=>{const{start:M}=c,F=i;if(d==="numerator"&&h!==null){const B=h;let V=0,ee=-1;const ae=B+6;for(let Z=ae;Z<F.length;Z++)if(F[Z]==="{")V++;else if(F[Z]==="}"){if(V===0){ee=Z+1;break}V--}if(ee>0){const Z=ee+2;setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(Z,Z)},0),f(null),g(null)}else{const Z=i.substring(0,M)+"\\frac{}{}"+i.substring(c.end);o(Z),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(M+6,M+6)},0),f("numerator"),g(M)}}else{const B=i.substring(0,M)+"\\frac{}{}"+i.substring(c.end);o(B),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(M+6,M+6)},0),f("numerator"),g(M)}},C=()=>{const{start:M,end:F}=c,B=i.substring(0,M)+"x^{}"+i.substring(F);o(B),y(!0),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(M+3,M+3)},0)},E=M=>{const{start:F,end:B}=c,V=i.substring(0,F)+M+i.substring(B);o(V),setTimeout(()=>{v.current?.focus();const ee=F+M.length;v.current?.setSelectionRange(ee,ee)},0)},j=M=>{u({start:M.target.selectionStart,end:M.target.selectionEnd})},P=()=>{let M=i;i&&!i.includes("$")&&i.trim()&&/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(i)&&(M=`$${i}$`),r?.(M),t()};if(_.useEffect(()=>{const M=F=>{F.key==="Escape"&&e&&t()};return e&&document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[e,t]),!e)return null;let A="";if(i&&i.trim())try{A=U8(i,!1),(!A||A.trim()==="")&&(A=`<span class="text-gray-500 font-mono">${R5(i)}</span>`)}catch(M){console.error("Preview rendering error:",M),A=`<span class="text-red-500 font-mono">Error: ${R5(i)}</span>`}return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:M=>{M.target===M.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-label":"Math Visual Editor",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-2xl mx-auto",onClick:M=>M.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Visual Editor"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Expression"}),l.jsx("textarea",{ref:v,value:i,onChange:M=>{const F=M.target.value,B=M.target.selectionStart,V=i;if(F.length>V.length){const ee=F.substring(0,B),ae=F.substring(B),Z=ee.match(/\^{([^}]*)$/);if(Z)if(ae.startsWith("}")){const te=Z[1];x&&te.length>0&&(setTimeout(()=>{if(v.current&&v.current.value===F){const L=B+1;v.current.setSelectionRange(L,L)}},10),y(!1))}else y(!1);else y(!1);ee.match(/\\sqrt\{([^}]*)$/),ee.match(/\\frac\{([^}]*)$/),ee.match(/\\frac\{[^}]*\}\{([^}]*)$/)}o(F)},onSelect:j,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Type LaTeX code or use buttons below...",rows:4}),i&&i.trim()&&l.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Preview:"}),l.jsx("div",{className:"text-gray-700",style:{minHeight:"1.5em",fontSize:"16px"},dangerouslySetInnerHTML:{__html:A||R5(i)}})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Symbols"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:T,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x)",children:"x"}),l.jsx("button",{onClick:C,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x) - Type letter, click this, type number",children:"x"}),l.jsx("button",{onClick:k,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Square Root (x)",children:"x"}),l.jsx("button",{onClick:b,className:`px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${d==="numerator"?"bg-green-50 hover:bg-green-100 border-green-300 text-green-700":"bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700"}`,title:d==="numerator"?"Move to denominator (click again)":"Fraction (a/b) - Click for numerator, click again for denominator",children:"a/b"}),l.jsx("button",{onClick:()=>E("\\times"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Times",children:""}),l.jsx("button",{onClick:()=>E("\\div"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Divide",children:""})]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(rt,{variant:"secondary",onClick:t,children:"Cancel"}),l.jsx(rt,{variant:"primary",onClick:P,children:"Insert"})]})]})})},R5=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},El=({inputRef:e,onChange:t,position:r="right",size:n="small",showPreview:s=!1,className:a=""})=>{const[i,o]=_.useState(!1),[c,u]=_.useState(!1),[d,f]=_.useState(0),[h,g]=_.useState(null),[x,y]=_.useState(""),v=b=>{b.preventDefault(),b.stopPropagation();let C=null;if(typeof e=="function"?C=e():C=e?.current||e,!C){console.warn("MathEditorButton: No input reference provided");return}C.focus();const E=C.selectionStart!==null&&C.selectionStart!==void 0?C.selectionStart:C.selectionEnd!==null&&C.selectionEnd!==void 0?C.selectionEnd:C.value?.length||0;console.log(" Captured cursor position:",E,"from input value length:",C.value?.length),f(E),g(C),o(!0)},T=b=>{let C=h;if(C||(typeof e=="function"?C=e():C=e?.current||e),!C){console.warn("MathEditorButton: No input reference available for insert"),o(!1);return}const E=C.value||"",j=Math.max(0,Math.min(d,E.length));console.log(" Inserting formula at position:",j,"Value length:",E.length,"Formula:",b);const P=E.substring(0,j),A=E.substring(j),M=P+b+A;console.log(" New value:",M.substring(0,j)+"["+b+"]"+M.substring(j+b.length)),C.value=M,t&&t({target:{value:M,name:C.name}});const F=new Event("input",{bubbles:!0});if(C.dispatchEvent(F),C._valueTracker){const V=C._valueTracker;V.setValue(""),C.value=M,V.setValue(M)}const B=j+b.length;setTimeout(()=>{C.focus(),C.setSelectionRange(B,B),console.log(" Cursor moved to position:",B)},0),o(!1)};_.useEffect(()=>{console.log(" MathEditorButton rendered",{hasInputRef:!!e,inputRefType:typeof e,position:r,size:n})},[e,r,n]);const k=b=>{b.preventDefault(),b.stopPropagation();let C=null;typeof e=="function"?C=e():C=e?.current||e,y(C?.value||""),u(!0)};return _.useEffect(()=>{if(c){const b=setInterval(()=>{let C=null;typeof e=="function"?C=e():C=e?.current||e,C&&y(C.value||"")},300);return()=>clearInterval(b)}},[c,e]),l.jsxs(l.Fragment,{children:[s&&l.jsx("button",{type:"button",onClick:k,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"48px":"auto",left:r==="left"?"48px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",color:"white",border:"2px solid #059669",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:b=>{b.target.style.backgroundColor="#059669"},onMouseLeave:b=>{b.target.style.backgroundColor="#10b981"},title:"Preview Math (p)","aria-label":"Preview math rendering",children:l.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"p"})}),l.jsx("button",{type:"button",onClick:v,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"8px":"auto",left:r==="left"?"8px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#3b82f6",color:"white",border:"2px solid #2563eb",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:b=>{b.target.style.backgroundColor="#2563eb"},onMouseLeave:b=>{b.target.style.backgroundColor="#3b82f6"},title:"Math Editor (fx)","aria-label":"Open math editor",children:l.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"fx"})}),c&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:b=>{b.target===b.currentTarget&&u(!1)},role:"dialog","aria-modal":"true","aria-label":"Math Preview",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-3xl mx-auto max-h-[90vh] overflow-auto",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Preview"}),l.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),l.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-gray-600 font-mono",children:["LaTeX: ",x||"(empty)"]}),l.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg min-h-[200px] text-lg",dangerouslySetInnerHTML:{__html:x?x.includes("$")?ca(x,!1):ca(Rde(x),!1):'<span class="text-gray-400">No content to preview</span>'}})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Close"})})]})}),l.jsx(Ide,{isOpen:i,onClose:()=>o(!1),onSave:T,initialValue:"",cursorPosition:d,inputRef:h||e?.current||e})]})},Lde=({question:e,testId:t,testType:r="true_false",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onSave:c,isEditing:u=!1,isSaving:d=!1,validationErrors:f={},showCorrectAnswers:h=!1,studentId:g=null})=>{const{getItem:x,setItem:y}=Z_();ai(),_.useRef(null);const[v,T]=_.useState(""),[k,b]=_.useState(""),[C,E]=_.useState(""),[j,P]=_.useState(!1),[A,M]=_.useState(!0),[F,B]=_.useState(""),[V,ee]=_.useState(!1),[ae,Z]=_.useState(null);_.useEffect(()=>{if(e&&(E(e.question||""),b(e.correct_answer||""),n==="student"&&g)){const ne=x(`test_progress_${g}_${r}_${t}_${e.question_id}`);ne&&T(ne)}},[e,t,r,n,x]),_.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" TrueFalseQuestion syncing with parent studentAnswer:",a),T(a))},[a,n]),_.useEffect(()=>{if(n==="student"&&v&&t&&e?.question_id&&g){const ne=setTimeout(()=>{ee(!0),y(`test_progress_${g}_${r}_${t}_${e.question_id}`,v),Z(new Date().toLocaleTimeString()),setTimeout(()=>ee(!1),1e3)},1e3);return()=>clearTimeout(ne)}},[v,t,r,e?.question_id,n,g,y]),_.useEffect(()=>{if(n==="teacher"&&(C||k)){const ne=setTimeout(()=>{ee(!0);const q={question:C,correct_answer:k,timestamp:Date.now()};y(`teacher_form_${r}_${t}`,q),Z(new Date().toLocaleTimeString()),setTimeout(()=>ee(!1),1e3)},2e3);return()=>clearTimeout(ne)}},[C,k,t,r,n,y]);const te=_.useCallback(ne=>{n==="student"&&(T(ne),i&&i(e.question_id,ne),I(ne))},[n,e?.question_id,i]),L=_.useCallback(ne=>{E(ne),o&&o(e.question_id,ne),H(ne)},[e?.question_id,o]),K=_.useCallback(ne=>{b(ne),o&&o(e.question_id,{...e,correct_answer:ne}),U(ne)},[e,o]),I=_.useCallback(ne=>{if(n==="student"){if(!ne){M(!1),B("Please select an answer");return}M(!0),B("")}},[n]),H=_.useCallback(ne=>{if(n==="teacher"){if(!ne||ne.trim().length<10){M(!1),B("Question must be at least 10 characters long");return}M(!0),B("")}},[n]),U=_.useCallback(ne=>{if(n==="teacher"){if(!ne){M(!1),B("Please select a correct answer");return}M(!0),B("")}},[n]),R=_.useCallback(()=>{if(n!=="teacher"||!c)return;const ne={question_id:e.question_id,question:C,correct_answer:k,type:"true_false"};c(ne)},[n,c,e?.question_id,C,k]),z=_.useCallback(ne=>ne?ca(ne,!1):"",[]),G=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e?.question_id]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[V&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(cn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),ae&&!V&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",ae]})]})]}),l.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:z(C)}}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="true"?"border-blue-500 bg-blue-50":"border-gray-200"} ${h&&k==="true"?"ring-2 ring-green-400":""}`,children:[l.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"true",checked:v==="true",onChange:()=>te("true"),className:"sr-only","aria-label":"True"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="true"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="false"?"border-blue-500 bg-blue-50":"border-gray-200"} ${h&&k==="false"?"ring-2 ring-green-400":""}`,children:[l.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"false",checked:v==="false",onChange:()=>te("false"),className:"sr-only","aria-label":"False"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="false"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]}),!A&&F&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:F})]}),X=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[V&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(cn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),ae&&!V&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",ae]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:`question_${e?.question_id}`,value:C,onChange:ne=>L(ne.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),l.jsx(El,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:ne=>L(ne.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Correct Answer *"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="true"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[l.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"true",checked:k==="true",onChange:()=>K("true"),className:"sr-only","aria-label":"True"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="true"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="false"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[l.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"false",checked:k==="false",onChange:()=>K("false"),className:"sr-only","aria-label":"False"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="false"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]})]})]}),!A&&F&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:F}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(rt,{variant:"success",onClick:R,disabled:!A||d,className:"w-full sm:w-auto",children:d?l.jsx(cn,{size:"small"}):"Save Question"})})]});return l.jsx("div",{className:"true-false-question-container",children:n==="student"?G():X()})},Bde=({question:e,testId:t,testType:r="multiple_choice",mode:n="student",studentAnswer:s,onAnswerChange:a,onQuestionChange:i,onOptionAdd:o,onOptionRemove:c,onSave:u,isEditing:d=!1,isSaving:f=!1,validationErrors:h={},showCorrectAnswers:g=!1,studentId:x=null,displayNumber:y})=>{const{getItem:v,setItem:T}=Z_(),{showNotification:k}=ai();_.useRef(null);const[b,C]=_.useState(""),[E,j]=_.useState(["","","",""]),[P,A]=_.useState(""),[M,F]=_.useState(""),[B,V]=_.useState(!1),[ee,ae]=_.useState(!0),[Z,te]=_.useState(""),[L,K]=_.useState(!1),[I,H]=_.useState(null);_.useEffect(()=>{if(e&&(F(e.question||""),j(e.options||["","","",""]),A(e.correct_answer||""),n==="student"&&x)){const pe=v(`test_progress_${x}_${r}_${t}_${e.question_id}`);pe&&C(pe)}},[e,t,r,n,v]),_.useEffect(()=>{n==="student"&&s!==void 0&&s!==null&&(console.log(" MultipleChoiceQuestion syncing with parent studentAnswer:",s),C(s))},[s,n]),_.useEffect(()=>{if(n==="student"&&b&&t&&e?.question_id&&x){const pe=setTimeout(()=>{K(!0),T(`test_progress_${x}_${r}_${t}_${e.question_id}`,b),H(new Date().toLocaleTimeString()),setTimeout(()=>K(!1),1e3)},1e3);return()=>clearTimeout(pe)}},[b,t,r,e?.question_id,n,x,T]),_.useEffect(()=>{if(n==="teacher"&&(M||E.some(pe=>pe.trim()))){const pe=setTimeout(()=>{K(!0);const je={question:M,options:E,correct_answer:P,timestamp:Date.now()};T(`teacher_form_${r}_${t}`,je),H(new Date().toLocaleTimeString()),setTimeout(()=>K(!1),1e3)},2e3);return()=>clearTimeout(pe)}},[M,E,P,t,r,n,T]),_.useCallback(pe=>{if(n!=="student")return;const je=String(pe);C(je),a&&a(e.question_id,je),ne(je)},[n,e?.question_id,a]);const U=_.useCallback(pe=>{F(pe),i&&i(e.question_id,pe),q(pe)},[e?.question_id,i]),R=_.useCallback((pe,je)=>{const We=[...E];We[pe]=je,j(We),i&&i(e.question_id,{...e,options:We}),se(We)},[E,e,i]),z=_.useCallback(pe=>{A(pe),i&&i(e.question_id,{...e,correct_answer:pe}),ue(pe)},[e,i]),G=_.useCallback(()=>{if(E.length<6){const pe=[...E,""];j(pe),o&&o(e.question_id,pe)}else k("Maximum 6 options allowed","warning")},[E,e?.question_id,o,k]),X=_.useCallback(pe=>{if(E.length>2){const je=E.filter((We,Me)=>Me!==pe);if(j(je),P===String.fromCharCode(65+pe))A("");else if(P&&String.fromCharCode(65+pe)<P){const We=String.fromCharCode(65+pe-1);A(We)}c&&c(e.question_id,je)}else k("Minimum 2 options required","warning")},[E,P,e?.question_id,c,k]),ne=_.useCallback(pe=>{if(n==="student"){if(!pe){ae(!1),te("Please select an answer");return}ae(!0),e?.correct_answer&&pe===e.correct_answer?te(" Correct answer!"):e?.correct_answer?te(" Incorrect answer"):te("Answer selected")}},[n,e?.correct_answer]),q=_.useCallback(pe=>!pe||pe.trim().length<10?(ae(!1),te("Question must be at least 10 characters long"),!1):(ae(!0),te(""),!0),[]),se=_.useCallback(pe=>{if(n!=="teacher")return;if(pe.filter(We=>We.trim().length>0).length<2){ae(!1),te("At least 2 options must be filled");return}if(pe.some(We=>We.trim().length>0&&We.trim().length<3)){ae(!1),te("Each option must be at least 3 characters long");return}ae(!0),te("")},[n]),ue=_.useCallback(pe=>{if(n==="teacher"){if(!pe){ae(!1),te("Please select a correct answer");return}ae(!0),te("")}},[n]),me=_.useCallback(()=>{if(n!=="teacher"||!u)return;const pe={question_id:e.question_id,question:M,options:E.filter(je=>je.trim().length>0),correct_answer:P,type:"multiple_choice"};u(pe)},[n,u,e?.question_id,M,E,P]),Ne=_.useCallback(pe=>pe?ca(pe,!1):"",[]);return n==="teacher"?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[L&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(cn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),I&&!L&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",I]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:`question_${e?.question_id}`,value:M,onChange:pe=>U(pe.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),l.jsx(El,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:pe=>U(pe.target.value)})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options *"}),l.jsx(rt,{variant:"secondary",size:"small",onClick:G,disabled:E.length>=6,className:"px-3 py-1 text-sm",children:"+ Add Option"})]}),l.jsx("div",{className:"space-y-3",children:E.map((pe,je)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+je)}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:pe,onChange:We=>R(je,We.target.value),placeholder:`Option ${String.fromCharCode(65+je)}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e?.question_id,"data-option-index":je,required:!0}),l.jsx(El,{inputRef:()=>document.querySelector(`[data-question-id="${e?.question_id}"][data-option-index="${je}"]`),onChange:We=>R(je,We.target.value)})]}),E.length>2&&l.jsx(rt,{variant:"danger",size:"small",onClick:()=>X(je),className:"px-2 py-1 text-sm",children:""})]},je))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`correct_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{id:`correct_${e?.question_id}`,value:P,onChange:pe=>z(pe.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[l.jsx("option",{value:"",children:"Select correct answer"}),E.map((pe,je)=>{if(!pe.trim())return null;const We=String.fromCharCode(65+je);return l.jsxs("option",{value:We,children:[We,") ",pe]},je)})]})]})]}),!ee&&Z&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:Z}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(rt,{variant:"success",onClick:me,disabled:!ee||f,className:"w-full sm:w-auto",children:f?l.jsx(cn,{size:"small"}):"Save Question"})})]}):l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof y=="number"?y:e?.question_id]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[L&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(cn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),I&&!L&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",I]})]})]}),l.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:Ne(M)}}),l.jsx("div",{className:"space-y-3",children:E.map((pe,je)=>l.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${b===String.fromCharCode(65+je)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[l.jsx("input",{type:"radio",name:`mcq_${t}_${e?.question_id}`,value:String.fromCharCode(65+je),checked:b===String.fromCharCode(65+je),onChange:We=>{C(We.target.value),a&&a(e?.question_id,We.target.value)},className:"mr-3"}),l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600 mr-3",children:String.fromCharCode(65+je)}),l.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:pe?ca(pe):`Option ${String.fromCharCode(65+je)}`}})]},je))}),!ee&&Z&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:Z})]})},$de=({question:e,testId:t,testType:r="input",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onAnswerAdd:c,onAnswerRemove:u,onSave:d,isEditing:f=!1,isSaving:h=!1,validationErrors:g={},showCorrectAnswers:x=!1,studentId:y=null})=>{const{getItem:v,setItem:T}=Z_(),{showNotification:k}=ai(),b=_.useRef(null),[C,E]=_.useState(""),[j,P]=_.useState([""]),[A,M]=_.useState(!1),[F,B]=_.useState(!0),[V,ee]=_.useState(""),[ae,Z]=_.useState(!1);_.useEffect(()=>{if(n==="student"&&e?.question_id&&t&&r&&y){const q=`test_progress_${y}_${r}_${t}_${e.question_id}`,se=v(q);se&&E(se)}},[e?.question_id,r,t,n,y,v]),_.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" InputQuestion syncing with parent studentAnswer:",a),E(a))},[a,n]),_.useEffect(()=>{n==="teacher"&&e?.answers&&P(e.answers.length>0?e.answers:[""])},[e?.answers,n]),_.useEffect(()=>{if(n==="student"&&C&&e?.question_id&&t&&r&&y){const q=setTimeout(()=>{Z(!0),T(`test_progress_${y}_${r}_${t}_${e.question_id}`,C),setTimeout(()=>Z(!1),1e3)},1e3);return()=>clearTimeout(q)}},[C,e?.question_id,r,t,n,y,T]),_.useEffect(()=>{if(n==="teacher"&&j&&o){const q=setTimeout(()=>{o({...e,answers:j.filter(se=>se.trim())})},500);return()=>clearTimeout(q)}},[j,e,n,o]);const te=_.useCallback(q=>{E(q);const se=q.trim().length>0;B(se),ee(se?"":"Please enter an answer"),i&&i(e.question_id,q)},[e?.question_id,i]),L=_.useCallback((q,se)=>{const ue=[...j];ue[q]=se,P(ue),i&&i(e.question_id,ue)},[j,e?.question_id,i]),K=_.useCallback(()=>{if(n==="teacher"){const q=[...j,""];P(q),c&&c(e.question_id,q)}},[j,e?.question_id,n,c]),I=_.useCallback(q=>{if(n==="teacher"&&j.length>1){const se=j.filter((ue,me)=>me!==q);P(se),u&&u(e.question_id,se)}},[j,e?.question_id,n,u]),H=_.useCallback(()=>{if(n==="student"){const q=C.trim().length>0;return B(q),ee(q?"":"Please enter an answer"),q}else if(n==="teacher"){const q=j.some(se=>se.trim().length>0);return B(q),ee(q?"":"Please enter at least one correct answer"),q}return!0},[C,j,n]),U=_.useCallback(q=>q?ca(q,!1):"",[]),R=_.useCallback(()=>{M(!0)},[]),z=_.useCallback(()=>{M(!1),H()},[H]),G=_.useCallback(q=>{q.key==="Enter"&&n==="student"&&C.trim()&&(T(`test_progress_${r}_${t}_${e.question_id}`,C),k("Answer saved","success"))},[C,r,t,e?.question_id,n,T,k]),X=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e.question_id]}),ae&&l.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[l.jsx(cn,{size:"small"}),l.jsx("span",{children:"Saving..."})]})]}),l.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:U(e.question)}}),l.jsx("div",{className:"space-y-3",children:l.jsx("div",{className:"relative",children:l.jsx("input",{ref:b,type:"text",id:`input_${e.question_id}`,placeholder:"Enter your answer here...",value:C,onChange:q=>te(q.target.value),onFocus:R,onBlur:z,onKeyPress:G,className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${F?A?"border-blue-500":"border-gray-300 hover:border-gray-400":"border-red-300 focus:border-red-500 focus:ring-red-500"}`,"data-question-id":e.question_id,"aria-label":`Answer for question ${e.question_id}`,"aria-invalid":!F,"aria-describedby":F?void 0:`error-${e.question_id}`})})}),x&&e.correct_answers&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[l.jsx("h5",{className:"text-sm font-semibold text-green-800 mb-2",children:"Correct Answers:"}),l.jsx("ul",{className:"space-y-1",children:e.correct_answers.map((q,se)=>l.jsx("li",{className:"text-green-700 text-sm",dangerouslySetInnerHTML:{__html:` ${ca(q,!1)}`}},se))})]})]}),ne=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e.question_id||"New"]}),h&&l.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[l.jsx(cn,{size:"small"}),l.jsx("span",{children:"Saving..."})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e.question_id||"new"}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",id:`question_${e.question_id||"new"}`,value:e.question||"",onChange:q=>o&&o({...e,question:q.target.value}),placeholder:"Enter question text",className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.question?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:border-blue-500"}`}),l.jsx(MathEditorButton,{inputRef:()=>document.getElementById(`question_${e.question_id||"new"}`),onChange:q=>o&&o({...e,question:q.target.value})})]}),g.question&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.question})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answers *"}),l.jsx(rt,{type:"button",variant:"secondary",size:"small",onClick:K,className:"px-3 py-1 text-sm",children:"+ Add Answer"})]}),l.jsx("div",{className:"space-y-3",children:j.map((q,se)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:se+1}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:q,onChange:ue=>L(se,ue.target.value),placeholder:`Correct answer ${se+1}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e.question_id,"data-answer-index":se}),l.jsx(MathEditorButton,{inputRef:()=>document.querySelector(`[data-question-id="${e.question_id}"][data-answer-index="${se}"]`),onChange:ue=>L(se,ue.target.value)})]}),j.length>1&&l.jsx(rt,{type:"button",variant:"danger",size:"small",onClick:()=>I(se),className:"px-2 py-1 text-sm",children:" Remove"})]},se))}),g.answers&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.answers})]})]}),d&&l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(rt,{type:"button",variant:"success",onClick:d,disabled:h,className:"w-full sm:w-auto",children:h?l.jsx(cn,{size:"small"}):"Save Question"})})]});return l.jsx("div",{className:`input-question-container ${n} ${A?"focused":""}`,children:n==="student"?X():ne()})},_1=(e,t,r)=>{const[n,s]=_.useState(!1),[a,i]=_.useState(0),[o,c]=_.useState(!1),u=_.useRef(!1);_.useEffect(()=>{if(!e||!t||!r)return;const v=`anti_cheating_${r}_${e}_${t}`,T=Ts(v);T&&(i(T.tabSwitches||0),c(T.isCheating||!1))},[e,t,r]);const d=_.useCallback(()=>{if(console.log(" handleTabSwitch called - isTracking:",u.current),!u.current){console.log(" Not tracking, returning early");return}console.log(" Tab switch detected - starting 7 second timer...");const v=Date.now();setTimeout(()=>{const T=Date.now()-v;console.log(" Timer completed - time hidden:",T,"ms"),T>=6500?(console.log(" Tab was hidden for sufficient time - counting as tab switch"),i(k=>{const b=k+1,C=b>=2;console.log(" Tab switch count updated:",{newCount:b,cheating:C}),c(C);const E=`anti_cheating_${r}_${e}_${t}`;return hs(E,{tabSwitches:b,isCheating:C},120*1e3),b})):console.log(" Tab was not hidden long enough - not counting as switch")},7e3)},[e,t,r]),f=_.useCallback(()=>{u.current&&(console.log(" Visibility change detected:",{hidden:document.hidden,isTracking:u.current}),document.hidden?d():console.log(" Tab became visible"))},[d]),h=_.useCallback(()=>{console.log(" startTracking called - setting up anti-cheating detection"),console.log(" Current document.hidden state:",document.hidden),console.log(" Current document.visibilityState:",document.visibilityState),s(!0),u.current=!0,document.addEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners added (visibilitychange only)")},[f]),g=_.useCallback(()=>{console.log(" stopTracking called - removing anti-cheating detection"),s(!1),u.current=!1,document.removeEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners removed")},[f]),x=_.useCallback(()=>{const v={caught_cheating:o,visibility_change_times:a};return console.log(" getCheatingData called:",v),v},[o,a]),y=_.useCallback(()=>{r&&e&&t&&i1(r,e,t),i(0),c(!1),console.log(" Anti-cheating data deleted from localStorage")},[r,e,t]);return{startTracking:h,stopTracking:g,clearData:y,getCheatingData:x,tabSwitches:a,isCheating:o,isTracking:n}},w2=(e,t)=>{const r=_.useRef(e),n=_.useRef(t),s=_.useRef(!1);return _.useEffect(()=>{n.current=t},[t]),_.useEffect(()=>{r.current=e},[e]),_.useEffect(()=>{if(typeof window>"u"||!e)return()=>{};const a=f=>{try{window.history.pushState({__intercept:!0,prevState:f??null,ts:Date.now()},document.title,window.location.href),s.current=!0}catch(h){console.warn("Failed to push intercept state",h)}},i=()=>{try{const f=window.history.state;if(f&&f.__intercept){const h=f.prevState??null;window.history.replaceState(h,document.title,window.location.href)}}catch(f){console.warn("Failed to restore previous state",f)}s.current=!1},o=()=>{s.current&&(r.current=!1,i(),window.history.go(-1))},c=()=>{},u=f=>{if(!r.current){s.current=!1;return}const h=f.state;a(h),n.current?.({source:"browser",confirm:o,cancel:c})},d=window.history.state;return a(d),window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u),i()}},[e]),null},zde=({testData:e,onTestComplete:t,onBackToCabinet:r,isTestComplete:n=!1,testScore:s=null})=>{const[a,i]=_.useState(null),[o,c]=_.useState(null);_.useEffect(()=>{(async()=>{try{const[Ve,at]=await Promise.all([Za(()=>Promise.resolve().then(()=>Tae),void 0),Za(()=>Promise.resolve().then(()=>nse),void 0)]);i(Ve),c(at.default)}catch(Ve){console.error("Failed to load Konva:",Ve)}})()},[]);const u=()=>a?{Stage:a.Stage,Layer:a.Layer,Rect:a.Rect,Arrow:a.Arrow,KonvaImage:a.Image,KonvaText:a.Text,Group:a.Group}:null,[d,f]=_.useState({}),[h,g]=_.useState({}),[x,y]=_.useState(0),[v,T]=_.useState(!1),[k,b]=_.useState(null),[C,E]=_.useState(0),[j,P]=_.useState(0),[A,M]=_.useState(null),[F,B]=_.useState(null),[V,ee]=_.useState(!1),[ae,Z]=_.useState(!1),[te,L]=_.useState(!1),[K,I]=_.useState(!0),H=_.useRef(null);w2(K,_.useCallback(({confirm:it,cancel:Ve})=>{console.log(" MatchingTestStudent: Browser back button intercepted during test!"),console.log(" MatchingTestStudent: isBackInterceptEnabled:",K),console.log(" MatchingTestStudent: Setting pending navigation and showing modal"),H.current={confirm:it,cancel:Ve},Z(!0)},[K]));const{showNotification:U}=ai(),{makeAuthenticatedRequest:R}=zl(),{user:z}=Os(),{startTracking:G,stopTracking:X,getCheatingData:ne,clearData:q}=_1("matching_type",e?.id,z?.student_id||z?.id),se=_.useRef(null),ue=_.useRef(null),me=_.useRef(null),Ne=_.useRef(0),[ce,Ue]=_.useState(400);_.useRef({});const pe=_.useCallback(()=>{ee(!0)},[]),je=_.useCallback(()=>{g({}),f({}),ee(!1)},[]),We=_.useCallback(()=>{H.current=null,Z(!0)},[]),Me=_.useCallback(()=>{console.log(" MatchingTestStudent: confirmBackToCabinet called"),console.log(" MatchingTestStudent: Current location:",window.location.href),console.log(" MatchingTestStudent: Current history state:",window.history.state),Z(!1);const it=H.current;if(console.log(" MatchingTestStudent: Pending navigation:",it),H.current=null,e?.id&&z?.student_id){const at=`anti_cheating_${z?.student_id||z?.id||"unknown"}_matching_type_${e.id}`,nt=(Ts(at)||{tabSwitches:0}).tabSwitches||0,kt=nt+1,Wt=kt>=2;console.log(" MatchingTestStudent: Tab switch count:",nt,"->",kt),hs(at,{tabSwitches:kt,isCheating:Wt},as.anti_cheating)}if(console.log(" MatchingTestStudent: Disabling intercept"),I(!1),it){console.log(" MatchingTestStudent: Cleaning up intercept history state");try{const Ve=window.history.state;if(console.log(" MatchingTestStudent: Current history state before cleanup:",Ve),Ve&&Ve.__intercept){const at=Ve.prevState??null;console.log(" MatchingTestStudent: Restoring previous state:",at),window.history.replaceState(at,document.title,window.location.href),console.log(" MatchingTestStudent: History state after cleanup:",window.history.state)}}catch(Ve){console.warn(" MatchingTestStudent: Failed to restore history state:",Ve)}}console.log(" MatchingTestStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" MatchingTestStudent: Executing navigation to /student"),console.log(" MatchingTestStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" MatchingTestStudent: window.location.href set to /student")},100)},[r,e,z?.student_id,z?.id]),Nt=_.useCallback(()=>{const it=H.current;H.current=null,it?.cancel&&it.cancel(),Z(!1)},[]),$e=_.useMemo(()=>{if(!e)return null;const it=e.blocks.map(pt=>{let nt=pt.coordinates;if(typeof nt=="string")try{nt=JSON.parse(nt)}catch(kt){console.error(" Failed to parse coordinates:",kt),nt={x:0,y:0,width:100,height:100}}return nt={x:(typeof nt.x=="number"?nt.x:Number(nt.x))||0,y:(typeof nt.y=="number"?nt.y:Number(nt.y))||0,width:(typeof nt.width=="number"?nt.width:Number(nt.width))||30,height:(typeof nt.height=="number"?nt.height:Number(nt.height))||10},{id:pt.id,word:pt.word,coordinates:nt,hasArrow:pt.hasArrow,arrow:pt.arrow}}),Ve=Array.isArray(e.arrows)?e.arrows:[],at=e.words.map(pt=>({id:pt.id,word:pt.word,blockId:null,isPlaced:!1,isCorrect:!1}));return{blocks:it,arrows:Ve,words:at}},[e]);_.useEffect(()=>{if(!e?.image_url)return;const it=new Image;it.crossOrigin="anonymous",it.onload=()=>{console.log(" Image loaded successfully"),E(it.width),P(it.height);const Ve=se.current?.clientWidth||800,at=se.current?.clientHeight||600,pt=Ve/it.width,nt=at/it.height,kt=Math.min(pt,nt,1),Wt=it.width*kt,rr=it.height*kt,ur=(Ve-Wt)/2,Nr=(at-rr)/2;b({x:ur,y:Nr,width:Wt,height:rr,scaleX:kt,scaleY:kt,scale:kt,image:it}),Ne.current=se.current?.clientWidth||800,console.log(" Image info calculated:",{x:ur,y:Nr,width:Wt,height:rr,scaleX:kt,scaleY:kt})},it.onerror=()=>{console.error(" Failed to load image"),U("Failed to load test image","error")},it.src=e.image_url},[e?.image_url,U]),_.useEffect(()=>{if(!$e||!k)return;const it=Ne.current||se.current?.clientWidth||800,Ve=12,at=38;let pt=k.x,nt=k.y+k.height+Ve;const kt=k.x+k.width,Wt={};$e.words.forEach(Nr=>{if(!Object.prototype.hasOwnProperty.call(h,Nr.id)){const wr=typeof Nr.word=="string"?Nr.word:"",ft=Math.max(60,wr.length*8+20);pt+ft>Math.min(it-Ve,kt)&&(pt=k.x,nt+=at),d[Nr.id]||(Wt[Nr.id]={x:pt,y:nt}),pt+=ft+Ve}}),Object.keys(Wt).length&&f(Nr=>({...Nr,...Wt}));const rr=Object.values(Wt).reduce((Nr,wr)=>Math.max(Nr,wr.y),nt),ur=Math.max(k.y+k.height+Ve,rr+at+Ve);Ue(Math.max(400,Math.ceil(ur)))},[$e,k,h,d]);const St=_.useCallback(()=>{if(!k||!$e)return[];const it=u();return it?$e.blocks.map(Ve=>{const at=Ve.coordinates;let pt,nt,kt,Wt;pt=k.x+at.x*(k.scale??k.scaleX),nt=k.y+at.y*(k.scale??k.scaleY),kt=at.width*(k.scale??k.scaleX),Wt=at.height*(k.scale??k.scaleY);const rr=h[Ve.id];return l.jsxs(it.Group,{children:[l.jsx(it.Rect,{x:pt,y:nt,width:kt,height:Wt,fill:rr?"rgba(40, 167, 69, 0.4)":A===Ve.id?"rgba(0, 123, 255, 0.25)":"rgba(0, 123, 255, 0.15)",stroke:rr?"#28a745":A===Ve.id?"#0056b3":"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:rr?"rgba(40, 167, 69, 0.3)":"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),rr&&l.jsx(it.KonvaText,{x:pt+5,y:nt+Wt/2-10,width:kt-10,height:20,text:$e.words.find(ur=>ur.id===rr)?.word||"",fontSize:Math.min(12,kt/8),fontFamily:"Arial",fill:"#2c3e50",align:"center",verticalAlign:"middle",listening:!1})]},Ve.id)}):[]},[k,$e,h,a]),At=_.useCallback(()=>{if(!k||!$e)return[];const it=u();return it?(console.log(" Processing arrows:",$e.arrows),$e.arrows.map(Ve=>{if(console.log(" Arrow data:",Ve),!Ve.start||!Ve.end)return console.warn(" Arrow missing start/end coordinates:",Ve),null;let at,pt,nt,kt;if(Ve.rel_start_x!==null&&Ve.rel_start_y!==null&&Ve.rel_end_x!==null&&Ve.rel_end_y!==null&&Ve.image_width&&Ve.image_height&&Ve.image_width>0&&Ve.image_height>0){const Wt=Ve.image_width,rr=Ve.image_height,ur=k.width/Wt,Nr=k.height/rr;at=k.x+Number(Ve.rel_start_x)/100*Wt*ur,pt=k.y+Number(Ve.rel_start_y)/100*rr*Nr,nt=k.x+Number(Ve.rel_end_x)/100*Wt*ur,kt=k.y+Number(Ve.rel_end_y)/100*rr*Nr}else{const Wt=k.scale??k.scaleX??1,rr=Number(Ve.start.x),ur=Number(Ve.start.y),Nr=Number(Ve.end.x),wr=Number(Ve.end.y);rr<=k.width+1&&Nr<=k.width+1&&ur<=k.height+1&&wr<=k.height+1?(at=k.x+(isNaN(rr)?0:rr),pt=k.y+(isNaN(ur)?0:ur),nt=k.x+(isNaN(Nr)?0:Nr),kt=k.y+(isNaN(wr)?0:wr)):(at=k.x+(isNaN(rr)?0:rr)*Wt,pt=k.y+(isNaN(ur)?0:ur)*Wt,nt=k.x+(isNaN(Nr)?0:Nr)*Wt,kt=k.y+(isNaN(wr)?0:wr)*Wt)}return l.jsx(it.Arrow,{points:[at,pt,nt,kt],stroke:Ve.style?.color||"#dc3545",fill:Ve.style?.color||"#dc3545",strokeWidth:Ve.style?.thickness||3,pointerLength:10,pointerWidth:10},Ve.id)}).filter(Boolean)):[]},[k,$e,a]),Bt=_.useCallback(()=>{if(!$e)return[];const it=u();return it?$e.words.map(Ve=>{const at=d[Ve.id]||{x:0,y:0},pt=typeof Ve.word=="string"?Ve.word:"",nt=Math.max(60,pt.length*8+20);return Object.values(h).includes(Ve.id)?null:l.jsxs(it.Group,{x:at.x,y:at.y,draggable:!0,onDragEnd:Wt=>Gt(Wt,Ve.id),children:[l.jsx(it.Rect,{width:nt,height:34,fill:"#ffffff",stroke:"#ced4da",strokeWidth:1,cornerRadius:4,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffset:{x:0,y:2},shadowOpacity:.3,listening:!0}),l.jsx(it.KonvaText,{text:pt,fontSize:14,fontFamily:"Arial",fill:"#343a40",padding:8,align:"center",verticalAlign:"middle",width:nt,height:34,listening:!1})]},Ve.id)}):[]},[$e,d,h,k,a]),Gt=_.useCallback((it,Ve)=>{const at=it.target.x(),pt=it.target.y();if(f(ft=>({...ft,[Ve]:{x:at,y:pt}})),!k||!$e)return;const nt=$e.words.find(ft=>ft.id===Ve);if(!nt)return;const kt=typeof nt.word=="string"?nt.word:"",Wt=Math.max(60,kt.length*8+20),rr={x:at,y:pt,width:Wt,height:34},ur=k.scale??k.scaleX??1,Nr=(ft,Tt)=>!(Tt.x>ft.x+ft.width||Tt.x+Tt.width<ft.x||Tt.y>ft.y+ft.height||Tt.y+Tt.height<ft.y),wr=$e.blocks.find(ft=>{const Tt=ft.coordinates,Ot={x:k.x+Tt.x*ur,y:k.y+Tt.y*ur,width:Tt.width*ur,height:Tt.height*ur};return Nr(rr,Ot)});if(wr){g(Ae=>({...Ae,[wr.id]:Ve}));const ft=wr.coordinates,Tt=k.x+ft.x*ur,Ot=k.y+ft.y*ur,he=ft.width*ur,Ee=ft.height*ur;f(Ae=>({...Ae,[Ve]:{x:Tt+(he-Wt)/2,y:Ot+(Ee-34)/2}})),U(`Word "${nt.word}" placed in block`,"success")}},[k,$e,U]),or=_.useCallback(()=>{if(!$e)return 0;const it=$e.words.length,Ve=Object.keys(h).length;return it>0?Ve/it*100:0},[$e,h]);_.useEffect(()=>{const it=or();y(it)},[or]),_.useEffect(()=>{if(e&&!F){const it=new Date;B(it),console.log(" Test timer started at:",it.toISOString()),G(),console.log(" Anti-cheating tracking started")}},[e,F,G]);const yr=_.useCallback(async()=>{if($e){T(!0);try{const it=$e.words.length;let Ve=0;console.log(" Scoring check - placedWords:",h),console.log(" Scoring check - blocks:",$e.blocks.map(Fe=>({id:Fe.id,word:Fe.word}))),console.log(" Scoring check - words:",$e.words.map(Fe=>({id:Fe.id,word:Fe.word}))),$e.blocks.forEach(Fe=>{const xt=h[Fe.id];if(console.log(` Block ${Fe.id} (expects "${Fe.word}") has placed word ID: ${xt}`),xt){const $t=$e.words.find(lr=>lr.id===xt);console.log(" Placed word:",$t),$t&&$t.word===Fe.word?(Ve++,console.log(` Correct! Block ${Fe.id} has correct word "${$t.word}"`)):console.log(` Incorrect! Block ${Fe.id} expected "${Fe.word}" but got "${$t?.word||"nothing"}"`)}else console.log(` Block ${Fe.id} has no word placed`)});const at=Ve,pt=it;console.log(` Final Score: ${at}/${pt} (${Math.round(at/pt*100)}%)`);const nt=new Date,kt=F?Math.round((nt-F)/1e3):0,Wt=F?F.toISOString():nt.toISOString();console.log(" Test timing:",{startedAt:Wt,endTime:nt.toISOString(),timeTaken:`${kt} seconds`});const rr=ne();console.log(" Anti-cheating data for submission:",rr);const ur=z.student_id,Nr=`retest_assignment_id_${ur}_matching_type_${e.id}`,wr=localStorage.getItem(Nr),{academicCalendarService:ft}=await Za(async()=>{const{academicCalendarService:Fe}=await Promise.resolve().then(()=>l3);return{academicCalendarService:Fe}},void 0);await ft.loadAcademicCalendar();const Ot=ft.getCurrentTerm()?.id;if(!Ot)throw new Error("No current academic period found");const he={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:ur,academic_period_id:Ot,answers:h,score:at,maxScore:pt,time_taken:kt,started_at:Wt,submitted_at:nt.toISOString(),caught_cheating:rr.caught_cheating,visibility_change_times:rr.visibility_change_times,retest_assignment_id:wr?Number(wr):null,parent_test_id:e.id};console.log(" Submitting test data:",he);const Ae=await(await R("/.netlify/functions/submit-matching-type-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})).json();if(console.log(" Submission response:",Ae),Ae.success){if(U("Test submitted successfully!","success"),X(),q(),z?.student_id&&i1(z.student_id,"matching_type",e.id),!!wr&&z?.student_id){let $t=3;try{const ct=localStorage.getItem(`student_active_tests_${z.student_id}`);if(ct){const Jt=JSON.parse(ct)?.tests?.find(cr=>cr.test_id===e.id&&cr.test_type==="matching_type");Jt&&($t=Jt.retest_attempts_left||Jt.max_attempts||3)}}catch(ct){console.error("Error checking active tests cache:",ct)}const Ke=(at>0&&pt>0?at/pt*100:0)>=50;if(Ke){const ct=`retest_attempt${$t}_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(ct,"true"),console.log(" Passed retest, marking last-slot key:",ct);let yt=0;for(let Rr=1;Rr<=10;Rr++){const Hr=`retest_attempt${Rr}_${z.student_id}_matching_type_${e.id}`;localStorage.getItem(Hr)==="true"&&yt++}const Jt=`test_completed_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(Jt,"true"),console.log(" Marked retest as completed (student passed):",Jt);const cr=`retest_attempts_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(cr,JSON.stringify({used:yt,max:$t})),console.log(" Set retest attempts metadata (student passed):",cr,{used:yt,max:$t})}else{let ct=1;for(let Hr=1;Hr<=10;Hr++){const He=`retest_attempt${Hr}_${z.student_id}_matching_type_${e.id}`;if(localStorage.getItem(He)!=="true"){ct=Hr;break}}const yt=`retest_attempt${ct}_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(yt,"true"),console.log(" Marked retest attempt as completed:",yt);let Jt=0;for(let Hr=1;Hr<=10;Hr++){const He=`retest_attempt${Hr}_${z.student_id}_matching_type_${e.id}`;localStorage.getItem(He)==="true"&&Jt++}const cr=$t-Jt,Rr=cr<=0||Ke;if(console.log(" Retest completion check:",{usedAttempts:Jt,maxAttempts:$t,attemptsLeft:cr,passed:Ke,shouldComplete:Rr}),Rr){const Hr=`test_completed_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(Hr,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",Hr);const He=`retest_attempts_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(He,JSON.stringify({used:Jt,max:$t})),console.log(" Set retest attempts metadata (attempts exhausted):",He,{used:Jt,max:$t})}}}else if(z?.student_id){const $t=`test_completed_${z.student_id}_matching_type_${e.id}`;localStorage.setItem($t,"true"),console.log(" Test marked as completed in localStorage:",$t)}if(z?.student_id){const{setCachedData:$t,CACHE_TTL:lr}=await Za(async()=>{const{setCachedData:ct,CACHE_TTL:yt}=await Promise.resolve().then(()=>hp);return{setCachedData:ct,CACHE_TTL:yt}},void 0),Ke=`student_results_table_${z.student_id}`;$t(Ke,Ae,lr.student_results_table),console.log(" Test results cached with key:",Ke)}const xt=`retest1_${ur}_matching_type_${e.id}`;localStorage.removeItem(xt),localStorage.removeItem(Nr),t&&(I(!1),t(at))}else throw new Error(Ae.message||"Failed to submit test")}catch(it){console.error(" Error submitting test:",it),U(`Error submitting test: ${it.message}`,"error")}finally{T(!1)}}},[$e,h,e,z,F,R,U,t]);return!e||!$e?l.jsx(cn,{}):l.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(rt,{onClick:We,variant:"outline",size:"sm",children:"Back to Cabinet"})}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.test_name})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),l.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(x),"%"]})]})]}),l.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x}%`}})})]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:l.jsx("div",{className:"lg:col-span-3",children:l.jsxs(zt,{className:"p-4",children:[l.jsx("div",{className:"mb-4 text-center",children:l.jsx(rt,{onClick:pe,variant:"secondary",children:"Reset"})}),l.jsx("div",{ref:se,className:"w-full bg-gray-100 rounded-lg overflow-hidden",style:{height:`${ce}px`},children:k&&a?(()=>{const{Stage:it,Layer:Ve,KonvaImage:at}=u();return l.jsxs(it,{ref:ue,width:se.current?.clientWidth||800,height:ce,children:[l.jsxs(Ve,{children:[l.jsx(at,{ref:me,image:k.image,x:k.x,y:k.y,width:k.width,height:k.height,listening:!1}),St(),At()]}),l.jsx(Ve,{listening:!0,children:Bt()})]})})():k?l.jsxs("div",{className:"flex items-center justify-center h-full",children:[l.jsx(cn,{size:"lg"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading Konva canvas..."})]}):null}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx(rt,{onClick:()=>L(!0),disabled:v||x<100,children:v?"Submitting...":"Submit Test"})})]})})}),l.jsx(Na,{isOpen:V,onClose:()=>ee(!1),title:"Reset Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and placed words."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:()=>ee(!1),variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:je,variant:"primary",children:"Reset"})]})]})}),l.jsx(Na,{isOpen:ae,onClose:Nt,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet? Your progress will be saved but you will exit the test."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:Nt,variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:it=>{console.log(" MatchingTestStudent: Go Back button clicked in modal"),console.log(" MatchingTestStudent: Button click event:",it),Me()},variant:"primary",children:"Go Back"})]})]})}),l.jsx(Na,{isOpen:te,onClose:()=>L(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:()=>L(!1),variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:()=>{L(!1),yr()},variant:"primary",children:"Submit"})]})]})})]})})},Ude=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Os(),{makeAuthenticatedRequest:o}=zl(),{showNotification:c}=ai(),[u,d]=_.useState([{leftWord:"",rightWord:""},{leftWord:"",rightWord:""},{leftWord:"",rightWord:""}]),[f,h]=_.useState("drag"),[g,x]=_.useState(!1),[y,v]=_.useState(null),T=_.useCallback(()=>{d(P=>[...P,{leftWord:"",rightWord:""}])},[]),k=_.useCallback(P=>{u.length>1&&d(A=>A.filter((M,F)=>F!==P))},[u.length]),b=_.useCallback((P,A)=>{d(M=>M.map((F,B)=>B===P?{...F,leftWord:A}:F))},[]),C=_.useCallback((P,A)=>{d(M=>M.map((F,B)=>B===P?{...F,rightWord:A}:F))},[]),E=_.useCallback(()=>u.every(P=>P.leftWord.trim()&&P.rightWord.trim()),[u]),j=_.useCallback(async()=>{if(!E()){c("Please fill in all word pairs","error");return}x(!0),v(null);try{const P=u.map((M,F)=>({question_id:F+1,left_word:M.leftWord.trim(),right_word:M.rightWord.trim()})),A={test_name:e,num_questions:P.length,interaction_type:f,questions:P};console.log(" Saving word matching test:",A),t({testName:e,numQuestions:P.length,interactionType:f,wordPairs:u,questions:P})}catch(P){console.error("Error saving word matching test:",P),v(P.message),c("Failed to save test: "+P.message,"error")}finally{x(!1)}},[e,u,f,E,o,c,t]);return l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-6xl mx-auto p-0",children:[l.jsx(zt,{className:"mb-6",children:l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Interaction Type"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="drag"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("drag"),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:f==="drag",onChange:()=>h("drag"),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Drag & Drop"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Students drag words from left list to right list"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" Easier for younger students",l.jsx("br",{})," Visual feedback on placement",l.jsx("br",{})," Mobile-friendly"]})]}),l.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="arrow"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("arrow"),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:f==="arrow",onChange:()=>h("arrow"),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Draw Arrows"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Students draw arrows connecting matching words"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" More challenging",l.jsx("br",{})," Better for visual learners",l.jsx("br",{})," Requires precision"]})]})]})]})}),l.jsx(zt,{className:"mb-6",children:l.jsxs("div",{className:"word-pairs-section",children:[l.jsxs("div",{className:"pairs-header flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Word Pairs"}),l.jsx(rt,{onClick:T,size:"sm",children:"+ Add Pair"})]}),l.jsx("div",{className:"pairs-list space-y-3 p-0 md:p-4",children:u.map((P,A)=>l.jsxs("div",{className:"word-pair-row flex items-center space-x-2 md:space-x-4 p-2 md:p-4 bg-gray-50 rounded-lg border",children:[l.jsx("div",{className:"pair-number flex-shrink-0",children:l.jsx("span",{className:"number-badge w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs md:text-sm font-semibold",children:A+1})}),l.jsx("div",{className:"left-word flex-1",children:l.jsx("input",{type:"text",value:P.leftWord,onChange:M=>b(A,M.target.value),placeholder:"Left word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),l.jsx("div",{className:"pair-arrow flex-shrink-0 text-gray-500 text-lg md:text-xl",children:""}),l.jsx("div",{className:"right-word flex-1",children:l.jsx("input",{type:"text",value:P.rightWord,onChange:M=>C(A,M.target.value),placeholder:"Right word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),l.jsx("div",{className:"pair-actions flex-shrink-0",children:l.jsx(rt,{onClick:()=>k(A),variant:"outline",size:"sm",className:"remove-btn w-6 h-6 md:w-8 md:h-8 p-0 text-red-500 hover:bg-red-50",disabled:u.length<=1,children:""})})]},A))})]})}),l.jsx(zt,{className:"mb-6",children:l.jsxs("div",{className:"preview-section",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),l.jsx("div",{className:"preview-pairs space-y-2",children:u.map((P,A)=>l.jsxs("div",{className:"preview-pair flex items-center space-x-2 text-sm",children:[l.jsxs("span",{className:"preview-number font-semibold text-blue-600",children:[A+1,"."]}),l.jsx("span",{className:"preview-left px-2 py-1 bg-white rounded border",children:P.leftWord||"Left word"}),l.jsx("span",{className:"preview-arrow text-gray-500",children:""}),l.jsx("span",{className:"preview-right px-2 py-1 bg-white rounded border",children:P.rightWord||"Right word"})]},A))})]})}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsx(rt,{onClick:j,disabled:!E()||g,className:"px-8",children:g?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test"}),l.jsx(rt,{onClick:r,variant:"secondary",children:"Cancel"})]}),y&&l.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600",children:y})})]})},sH=({answeredCount:e=0,totalQuestions:t=0,timeElapsed:r=0,onSubmitTest:n,isSubmitting:s=!1,canSubmit:a=!1,className:i=""})=>{const o=t>0?Math.round(e/t*100):0,c=t-e,u=h=>{const g=Math.floor(h/3600),x=Math.floor(h%3600/60),y=h%60;return g>0?`${g}:${x.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`:`${x}:${y.toString().padStart(2,"0")}`},d=h=>h>=100?"bg-green-500":h>=80?"bg-blue-500":h>=60?"bg-yellow-500":h>=40?"bg-orange-500":"bg-red-500",f=h=>h>=100?"text-green-600":h>=80?"text-blue-600":h>=60?"text-yellow-600":h>=40?"text-orange-600":"text-red-600";return l.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 ${i}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Progress"}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-sm font-mono text-gray-600",children:u(r)})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),l.jsxs("span",{className:`text-sm font-semibold ${f(o)}`,children:[o,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:l.jsx(dt.div,{className:`h-full ${d(o)} transition-colors duration-300`,initial:{width:0},animate:{width:`${o}%`},transition:{duration:.5,ease:"easeOut"}})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[l.jsxs("div",{className:"text-center p-2 sm:p-3 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:e}),l.jsx("div",{className:"text-xs text-blue-600",children:"Answered"})]}),l.jsxs("div",{className:"text-center p-2 sm:p-3 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-lg sm:text-2xl font-bold text-gray-600",children:c}),l.jsx("div",{className:"text-xs text-gray-600",children:"Remaining"})]}),l.jsxs("div",{className:"text-center p-2 sm:p-3 bg-purple-50 rounded-lg",children:[l.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:t}),l.jsx("div",{className:"text-xs text-purple-600",children:"Total"})]})]}),l.jsx("div",{className:"mb-4",children:e===t?l.jsx(dt.div,{className:"flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:l.jsx("span",{className:"text-green-600 font-medium",children:" All questions answered! Ready to submit."})}):c===1?l.jsx(dt.div,{className:"flex items-center justify-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:l.jsx("span",{className:"text-yellow-600 font-medium",children:"Almost there! 1 question remaining."})}):l.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-50 border border-gray-200 rounded-lg",children:l.jsxs("span",{className:"text-gray-600 font-medium",children:[c," questions remaining"]})})}),a&&l.jsx("div",{className:"flex justify-center",children:l.jsx(dt.button,{onClick:n,disabled:s,className:`px-8 py-3 rounded-lg font-semibold text-white transition-all duration-300 ${s?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl"}`,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},children:s?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),l.jsx("span",{children:"Submitting..."})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Submit Test"})]})})})]})},Wde=(e,t)=>{const[r,n,s]=lW(`test_progress_${e}_${t}`,{}),[a,i]=_.useState(!1),[o,c]=_.useState(0),[u,d]=_.useState(0),[f,h]=_.useState(!1),[g,x]=_.useState(null),y=_.useRef(null),v=_.useRef(null),T=_.useCallback((I,H)=>{if(!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}n(U=>({...U,[I]:H})),console.log(`Saved progress for question ${I}:`,H)},[n]),k=_.useCallback(I=>!window.tokenManager||!window.tokenManager.isAuthenticated()?(console.warn("[WARN] Cannot get progress: No valid JWT token"),null):r[I]||null,[r]),b=_.useCallback(()=>{if(console.log(`[DEBUG] clearTestProgress called with testType: ${e}, testId: ${t}`),!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const I=`test_progress_${e}_${t}`;console.log(`[DEBUG] Removing localStorage key: ${I}`);const H=Object.keys(r).length>0;s(),console.log(H?`[DEBUG] Progress cleared for test ${e}_${t}`:`[DEBUG] No progress found to clear for test ${e}_${t}`)},[s,e,t,r]),C=_.useCallback(()=>{y.current&&(C(y.current),y.current=null),v.current&&(C(v.current),v.current=null)},[]),E=_.useCallback(()=>{console.log(`[DEBUG] setupProgressTrackingForPage called with testType: ${e}, testId: ${t}`),v.current=setInterval(()=>{console.log("[DEBUG] Auto-saving progress..."),F()},3e4),console.log("[DEBUG] Progress tracking interval set up (30 seconds)")},[e,t]),j=_.useCallback(()=>{console.log(`[DEBUG] updateProgressDisplayForPage called with testType: ${e}, testId: ${t}`);const I=M(),H=u>0?Math.round(I/u*100):0;return console.log(`[DEBUG] Progress: ${I}/${u} questions answered`),console.log(`[DEBUG] Progress bar updated: ${H}%`),{answeredQuestions:I,totalQuestions:u,percentage:H}},[e,t,u]),P=_.useCallback(()=>{console.log("[DEBUG] updateSubmitButtonStateForPage called");const I=M();console.log(`[DEBUG] Submit button state check: ${I}/${u} questions answered`);const H=I===u&&u>0;return console.log(H?"[DEBUG] Submit button enabled - all questions answered":"[DEBUG] Submit button disabled - not all questions answered"),H},[u]),A=_.useCallback(()=>{console.log(`[DEBUG] loadSavedProgressForPage called with testType: ${e}, testId: ${t}`);try{if(console.log("[DEBUG] Loaded progress from localStorage:",r),Object.keys(r).length===0){console.log("[DEBUG] No saved progress found");return}const I=Object.keys(r).length;c(I),console.log(`[DEBUG] Restored ${I} answered questions`)}catch(I){console.error("[ERROR] Failed to load saved progress:",I),x(I.message)}},[e,t,r]),M=_.useCallback(()=>{console.log(`[DEBUG] getAnsweredQuestionsCountForPage called with testType: ${e}`);const I=Object.keys(r).length;return c(I),console.log(`[DEBUG] Found ${I} answered questions`),I},[e,r]),F=_.useCallback(()=>{console.log(`[DEBUG] saveProgressForPage called with testType: ${e}, testId: ${t}`);try{console.log("[DEBUG] Progress saved:",r)}catch(I){console.error("[ERROR] Failed to save progress:",I),x(I.message)}},[e,t,r]),B=_.useCallback(()=>{try{const I=`test_completed_${e}_${t}`,H=localStorage.getItem(I)==="true";return i(H),H}catch(I){return console.error("Error checking test completion:",I),!1}},[e,t]),V=_.useCallback(()=>{try{const I=`test_completed_${e}_${t}`;localStorage.setItem(I,"true"),i(!0),console.log(`Test ${e}_${t} marked as completed`)}catch(I){console.error("Error marking test completed:",I)}},[e,t]),ee=_.useCallback(()=>{console.log("Marking test completed in UI:",{testType:e,testId:t}),V()},[e,t,V]),ae=_.useCallback(I=>{try{const H=`test_creation_state_${e}_${t}`;localStorage.setItem(H,JSON.stringify(I)),console.log("Test creation state saved:",I)}catch(H){console.error("Error saving test creation state:",H)}},[e,t]),Z=_.useCallback(()=>{try{const I=`test_creation_state_${e}_${t}`;localStorage.removeItem(I),console.log("Test creation state cleared")}catch(I){console.error("Error clearing test creation state:",I)}},[e,t]),te=_.useCallback((I,H)=>{try{const U=`test_step_${e}_${t}_${I}`;localStorage.setItem(U,JSON.stringify(H)),console.log(`Step ${I} data saved:`,H)}catch(U){console.error(`Error saving step ${I} data:`,U)}},[e,t]),L=_.useCallback(I=>{try{const H=`test_step_${e}_${t}_${I}`,U=localStorage.getItem(H);return U?JSON.parse(U):null}catch(H){return console.error(`Error restoring step ${I} data:`,H),null}},[e,t]),K=_.useCallback(()=>{try{const I=`test_creation_state_${e}_${t}`,H=localStorage.getItem(I);return H?JSON.parse(H):null}catch(I){return console.error("Error restoring test creation state:",I),null}},[e,t]);return _.useEffect(()=>()=>{C()},[e,t,E,A,C]),_.useEffect(()=>{M()},[r,M]),{progress:r,isCompleted:a,answeredCount:o,totalQuestions:u,isLoading:f,error:g,saveProgress:T,getProgress:k,clearProgress:b,clearInterval:C,setupProgressTracking:E,updateProgress:j,updateSubmitButton:P,loadProgress:A,getAnsweredCount:M,saveProgressForPage:F,checkCompleted:B,markCompleted:V,markCompletedUI:ee,saveState:ae,clearState:Z,saveStepData:te,restoreStepData:L,restoreState:K,setTotalQuestions:d,setError:x}},Hde=({testData:e,onTestComplete:t,onBackToCabinet:r})=>{const{user:n}=Os(),{makeAuthenticatedRequest:s}=zl(),{showNotification:a}=ai(),[i,o]=_.useState({width:window.innerWidth,height:window.innerHeight});_.useEffect(()=>{const ft=()=>{o({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",ft),()=>window.removeEventListener("resize",ft)},[]);const{startTracking:c,stopTracking:u,getCheatingData:d,clearData:f}=_1("word_matching",e?.id,n?.student_id||n?.id),[h,g]=_.useState(null),[x,y]=_.useState({}),[v,T]=_.useState(null),[k,b]=_.useState(0),C=_.useRef(null),E=_.useRef(null),j=_.useRef(!1),P=_.useRef(null),[A,M]=_.useState(800),F={VERY_SMALL:400,MOBILE:600,TABLET:900},B={VERY_SMALL:.6,MOBILE:.8,TABLET:.9,DESKTOP:1},V={CANVAS_HEIGHT:400,BLOCK_WIDTH:140,BLOCK_HEIGHT:50,BLOCK_SPACING:80,MARGIN:50},ee=i.width<F.VERY_SMALL,ae=i.width>=F.VERY_SMALL&&i.width<F.MOBILE,Z=i.width>=F.MOBILE&&i.width<F.TABLET;i.width>=F.TABLET;const te=ee?B.VERY_SMALL:ae?B.MOBILE:Z?B.TABLET:B.DESKTOP;_.useEffect(()=>{const ft=()=>{if(P.current){const Ot=P.current.clientWidth;console.log(" Container width detected:",Ot),Ot>0&&M(Ot)}};ft();const Tt=[setTimeout(ft,50),setTimeout(ft,100),setTimeout(ft,200),setTimeout(ft,500)];return window.addEventListener("resize",ft),()=>{Tt.forEach(Ot=>clearTimeout(Ot)),window.removeEventListener("resize",ft)}},[h]);const L=V.BLOCK_WIDTH*te,K=V.BLOCK_HEIGHT*te,I=V.BLOCK_SPACING*te,H=V.MARGIN*te,U=H;console.log(" Mobile Debug:",{screenWidth:i.width,containerWidth:P.current?.clientWidth,canvasWidth:A,scale:te,blockWidth:L,margin:H,leftBlockX:U,displayDataLoaded:!!h});const R=U+L+20+L+H,z=R<=A;let G,X=L,ne=K;if(z)G=Math.min(Math.max(U+L+20,A-L-H),A-L-H);else{const ft=A-H*2,Tt=Math.floor((ft-20)/2);X=Math.max(60,Tt),ne=Math.max(30,ne*(X/L)),G=U+X+20,console.log(" Very small screen - adjusted block size:",{availableWidth:ft,maxBlockWidth:Tt,actualBlockWidth:X,actualBlockHeight:ne})}console.log(" Right Block Position:",{rightBlockX:G,rightBlockRightEdge:G+X,canvasWidth:A,fits:G+X<=A,canFitSideBySide:z,minRequiredWidth:R});const q=H,se={DRAGGED_WORD:Math.max(8,14*te),ORIGINAL_WORD:Math.max(10,16*te),LEFT_WORD:Math.max(10,14*te)},ue=Math.max(1,3*te),me=_.useCallback((ft,Tt,Ot)=>{if(!ft)return ne;const he=Tt*.55,Ee=Math.floor(Ot/he),Ae=Math.ceil(ft.length/Ee),Fe=Tt*1.1,xt=12*te,$t=Ae*Fe+xt,lr=Math.max(ne*.8,30*te);return Math.max(lr,$t)},[ne,te]),ce=_.useCallback(()=>{if(!h?.leftWords||!h?.rightWords)return V.CANVAS_HEIGHT*te;let ft=H*2;for(let Ot=0;Ot<h.leftWords.length;Ot++){const he=h.leftWords[Ot],Ee=h.rightWords[Ot],Ae=me(he,se.LEFT_WORD,X),Fe=me(Ee,se.ORIGINAL_WORD,X),xt=Math.max(Ae,Fe);ft+=xt,Ot<h.leftWords.length-1&&(ft+=20*te)}const Tt=V.CANVAS_HEIGHT*te;return Math.max(Tt,ft)},[h,me,se,X,H,te])();_.useCallback((ft,Tt)=>{if(!ft||!Tt)return I;const Ot=ft.map((Ae,Fe)=>{const xt=Tt[Fe],$t=me(Ae,se.LEFT_WORD,X),lr=me(xt,se.ORIGINAL_WORD,X);return Math.max($t,lr)}),he=Math.max(...Ot),Ee=20*te;return he+Ee},[I,me,se,X,te]);const pe=_.useCallback(()=>{if(!h?.leftWords||!h?.rightWords)return[];const ft=[];let Tt=H;for(let Ot=0;Ot<h.leftWords.length;Ot++){const he=h.leftWords[Ot],Ee=h.rightWords[Ot],Ae=me(he,se.LEFT_WORD,X),Fe=me(Ee,se.ORIGINAL_WORD,X),xt=Math.max(Ae,Fe);ft.push({y:Tt,leftHeight:Ae,rightHeight:Fe,rowHeight:xt}),Tt+=xt+20*te}return ft},[h,me,se,X,H,te])(),[je,We]=_.useState([]),[Me,Nt]=_.useState(!1),[$e,St]=_.useState(!1),[At,Bt]=_.useState(null),[Gt,or]=_.useState(!1),[yr,it]=_.useState(!1),[Ve,at]=_.useState(!0),pt=_.useRef(null);w2(Ve,_.useCallback(({confirm:ft,cancel:Tt})=>{console.log(" WordMatchingStudent: Browser back button intercepted during test!"),console.log(" WordMatchingStudent: isBackInterceptEnabled:",Ve),console.log(" WordMatchingStudent: Setting pending navigation and showing modal"),pt.current={confirm:ft,cancel:Tt},it(!0)},[Ve])),_.useEffect(()=>{if(e){if(console.log(" WordMatchingStudent: Initializing test data:",e),console.log(" Interaction type:",e.interaction_type),console.log(" Left words:",e.leftWords),console.log(" Right words:",e.rightWords),console.log(" Correct pairs:",e.correctPairs),!Array.isArray(e.leftWords)||!Array.isArray(e.rightWords)){console.error(" Invalid data structure - leftWords or rightWords not arrays:",{leftWords:e.leftWords,rightWords:e.rightWords});return}if(g(e),n?.student_id){const Ot=`test_progress_${n.student_id}_word_matching_${e.id}`,he=Ts(Ot);he?(y(he.answers||{}),We(he.arrows||[]),Bt(new Date(he.startTime)),console.log(" Test progress restored:",he)):Bt(new Date)}else Bt(new Date);e?.id&&(n?.student_id||n?.id)&&c();const ft=Number(e?.allowed_time||0),Tt=n?.student_id||n?.id||"unknown";if(C.current=`test_timer_${Tt}_word_matching_${e.id}`,j.current=!1,ft>0)try{const Ot=localStorage.getItem(C.current),he=Date.now();if(Ot){const Ee=JSON.parse(Ot),Ae=Math.floor((he-new Date(Ee.lastTickAt).getTime())/1e3),Fe=Math.max(0,Number(Ee.remainingSeconds||ft)-Math.max(0,Ae));b(Fe),E.current=he,console.log(" Timer initialized from cache:",{remaining:Fe,allowedSeconds:ft})}else b(ft),E.current=he,localStorage.setItem(C.current,JSON.stringify({remainingSeconds:ft,lastTickAt:new Date(he).toISOString(),startedAt:new Date(he).toISOString()})),console.log(" Timer initialized fresh:",{allowedSeconds:ft});j.current=!0}catch(Ot){console.error("Timer cache init error:",Ot),b(ft),j.current=!0}else b(0),j.current=!0}},[e,n?.student_id,n?.id,c]),_.useEffect(()=>{if(h&&At&&n?.student_id){const ft=setInterval(()=>{const Tt={answers:x,arrows:je,startTime:At.toISOString()},Ot=`test_progress_${n.student_id}_word_matching_${e.id}`;hs(Ot,Tt,as.test_progress),console.log(" Progress auto-saved")},3e4);return()=>clearInterval(ft)}},[h,x,je,At,n?.student_id,e?.id]);const nt=_.useCallback((ft,Tt)=>{if(console.log(" handleWordClick called:",{side:ft,index:Tt,interactionType:e?.interaction_type,selectedWord:v}),e?.interaction_type!=="arrow"){console.log(" Not arrow mode, ignoring click");return}if(v){if(v.side===ft&&v.index===Tt)console.log(" Deselecting word"),T(null);else if(v.side!==ft){console.log(" Creating arrow connection:",{startWord:v,endWord:{side:ft,index:Tt}});const Ot={id:Date.now().toString(),startWord:v,endWord:{side:ft,index:Tt},color:"#3B82F6"};We(he=>{const Ee=[...he,Ot];return console.log(" Updated arrows:",Ee),Ee}),y(he=>{const Ee={...he,[v.index]:Tt};return console.log(" Updated answers:",Ee),Ee}),T(null)}}else console.log(" Selecting word:",{side:ft,index:Tt}),T({side:ft,index:Tt})},[v,e?.interaction_type]);_.useCallback((ft,Tt)=>{e.interaction_type==="drag"&&y(Ot=>({...Ot,[ft]:Tt}))},[e?.interaction_type]);const kt=_.useCallback(()=>{or(!0)},[]),Wt=_.useCallback(()=>{y({}),We([]),T(null),or(!1)},[]),rr=_.useCallback(()=>{pt.current=null,it(!0)},[]),ur=_.useCallback(()=>{console.log(" WordMatchingStudent: confirmBackToCabinet called"),console.log(" WordMatchingStudent: Current location:",window.location.href),console.log(" WordMatchingStudent: Current history state:",window.history.state),it(!1);const ft=pt.current;if(console.log(" WordMatchingStudent: Pending navigation:",ft),pt.current=null,e?.id&&n?.student_id){const Ot=`anti_cheating_${n?.student_id||n?.id||"unknown"}_word_matching_${e.id}`,Ee=(Ts(Ot)||{tabSwitches:0}).tabSwitches||0,Ae=Ee+1,Fe=Ae>=2;console.log(" WordMatchingStudent: Tab switch count:",Ee,"->",Ae),hs(Ot,{tabSwitches:Ae,isCheating:Fe},as.anti_cheating)}if(console.log(" WordMatchingStudent: Disabling intercept"),at(!1),ft){console.log(" WordMatchingStudent: Cleaning up intercept history state");try{const Tt=window.history.state;if(console.log(" WordMatchingStudent: Current history state before cleanup:",Tt),Tt&&Tt.__intercept){const Ot=Tt.prevState??null;console.log(" WordMatchingStudent: Restoring previous state:",Ot),window.history.replaceState(Ot,document.title,window.location.href),console.log(" WordMatchingStudent: History state after cleanup:",window.history.state)}}catch(Tt){console.warn(" WordMatchingStudent: Failed to restore history state:",Tt)}}console.log(" WordMatchingStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" WordMatchingStudent: Executing navigation to /student"),console.log(" WordMatchingStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" WordMatchingStudent: window.location.href set to /student")},100)},[r,e,n?.student_id,n?.id]),Nr=_.useCallback(()=>{const ft=pt.current;pt.current=null,ft?.cancel&&ft.cancel(),it(!1)},[]),wr=_.useCallback(async()=>{if(h){Nt(!0);try{const ft=h?.leftWords?.length||0;let Tt=0,Ot={};e.interaction_type==="drag"?Object.entries(x).forEach(([Ct,le])=>{const ve=h?.correctPairs?.[Ct];le===ve&&Tt++,Ot[Ct]=le}):je.forEach(Ct=>{const le=Ct.startWord.side==="left"?Ct.startWord.index:Ct.endWord.index,ve=Ct.startWord.side==="right"?Ct.startWord.index:Ct.endWord.index;h?.correctPairs?.[le]===ve&&Tt++,Ot[le]=ve});const he=Tt,Ee=ft;console.log(` Final Score: ${he}/${Ee} (${Math.round(he/Ee*100)}%)`);const Ae=new Date,Fe=At?Math.round((Ae-At)/1e3):0,xt=At?At.toISOString():Ae.toISOString(),$t=d(),lr=n.student_id,Ke=`retest_assignment_id_${lr}_word_matching_${e.id}`,ct=localStorage.getItem(Ke),{academicCalendarService:yt}=await Za(async()=>{const{academicCalendarService:Ct}=await Promise.resolve().then(()=>l3);return{academicCalendarService:Ct}},void 0);await yt.loadAcademicCalendar();const cr=yt.getCurrentTerm()?.id;if(!cr)throw new Error("No current academic period found");const Rr={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:lr,academic_period_id:cr,parent_test_id:e.id,retest_assignment_id:ct?Number(ct):null,interaction_type:e.interaction_type,answers:Ot,score:he,maxScore:Ee,time_taken:Fe,started_at:xt,submitted_at:Ae.toISOString(),caught_cheating:$t.caught_cheating,visibility_change_times:$t.visibility_change_times};console.log(" Submission data being sent:",Rr),console.log(" TestData structure:",e),console.log(" Submitting test results...");const Hr=await s("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Rr)});console.log(" Submission response received:",Hr.status);const He=await Hr.json();if(He.success){if(a("Test submitted successfully!","success"),u(),f(),n?.student_id&&i1(n.student_id,"word_matching",e.id),!!ct&&n?.student_id){let le=3;try{const we=localStorage.getItem(`student_active_tests_${n.student_id}`);if(we){const Se=JSON.parse(we)?.tests?.find(Ze=>Ze.test_id===e.id&&Ze.test_type==="word_matching");Se&&(le=Se.retest_attempts_left||Se.max_attempts||3)}}catch(we){console.error("Error checking active tests cache:",we)}const ge=(he>0&&Ee>0?he/Ee*100:0)>=50;if(ge){const we=`retest_attempt${le}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(we,"true"),console.log(" Passed retest, marking last-slot key:",we);let Te=0;for(let ut=1;ut<=10;ut++){const Je=`retest_attempt${ut}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(Je)==="true"&&Te++}const Se=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Se,"true"),console.log(" Marked retest as completed (student passed):",Se);const Ze=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Ze,JSON.stringify({used:Te,max:le})),console.log(" Set retest attempts metadata (student passed):",Ze,{used:Te,max:le})}else{let we=1;for(let Je=1;Je<=10;Je++){const de=`retest_attempt${Je}_${n.student_id}_word_matching_${e.id}`;if(localStorage.getItem(de)!=="true"){we=Je;break}}const Te=`retest_attempt${we}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Te,"true"),console.log(" Marked retest attempt as completed:",Te);let Se=0;for(let Je=1;Je<=10;Je++){const de=`retest_attempt${Je}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(de)==="true"&&Se++}const Ze=le-Se,ut=Ze<=0||ge;if(console.log(" Retest completion check:",{usedAttempts:Se,maxAttempts:le,attemptsLeft:Ze,passed:ge,shouldComplete:ut}),ut){const Je=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Je,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",Je);const de=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(de,JSON.stringify({used:Se,max:le})),console.log(" Set retest attempts metadata (attempts exhausted):",de,{used:Se,max:le})}}}else if(n?.student_id){const le=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(le,"true"),console.log(" Test marked as completed in localStorage:",le)}if(n?.student_id){const le=`student_results_table_${n.student_id}`;hs(le,He,as.student_results_table),console.log(" Test results cached with key:",le)}if(n?.student_id){const le=`retest1_${lr}_word_matching_${e.id}`;localStorage.removeItem(le),localStorage.removeItem(Ke)}C.current&&localStorage.removeItem(C.current),t&&(at(!1),t({score:he,caught_cheating:$t.caught_cheating,visibility_change_times:$t.visibility_change_times})),Nt(!1)}else throw new Error(He.message||"Failed to submit test")}catch(ft){console.error("Error submitting test:",ft),Nt(!1)}}},[h,x,je,e,n,At,d,u,f,s,t]);return _.useEffect(()=>{if(!h||!e||!At)return;const ft=Number(e?.allowed_time||0);if(!ft)return;console.log(" Timer effect triggered:",{allowedSeconds:ft,timeRemaining:k,initialized:j.current,testData:e?.id});const Tt=setInterval(()=>{b(Ot=>{const he=Ot>0?Ot:ft;if(he<=0)return 0;const Ee=Math.max(0,he-1);try{const Ae=Date.now();E.current||(E.current=Ae),C.current&&localStorage.setItem(C.current,JSON.stringify({remainingSeconds:Ee,lastTickAt:new Date(Ae).toISOString(),startedAt:At?At.toISOString():new Date(Ae-(ft-Ee)*1e3).toISOString()}))}catch{}return Ee===0&&wr(),Ee})},1e3);return()=>clearInterval(Tt)},[h,e?.allowed_time,At,wr]),h?l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl mx-auto p-6",children:[l.jsx(Na,{isOpen:Me,onClose:()=>{},title:"Submitting",size:"small",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx(cn,{size:"lg",className:"mb-3"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Submitting test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your results"})]})}),l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(rt,{onClick:rr,variant:"outline",size:"sm",disabled:Me,children:"Back to Cabinet"})}),l.jsxs(zt,{className:"mb-6",children:[l.jsxs("div",{className:"text-left mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.test_name}),l.jsx("p",{className:"text-gray-600",children:e.interaction_type==="drag"?"Drag words from left to right to match them":"Click on the word or phrase on the left, then click on the matching word or phrase on the right to connect them"})]}),e&&l.jsx("div",{className:"mb-4",children:l.jsx(sH,{answeredCount:Object.keys(x).length+(e.interaction_type==="arrow"?je.length:0),totalQuestions:h?.leftWords?.length||0,timeElapsed:(()=>{const ft=Number(e?.allowed_time||0);return ft<=0?0:k>0?k:ft})()})})]}),e.interaction_type==="drag"?l.jsx(zt,{className:"mb-6",children:l.jsx("div",{ref:P,className:"relative w-full",children:l.jsx(bm,{width:A,height:ce,className:`border-2 border-gray-200 rounded-lg ${Me?"pointer-events-none opacity-50":""}`,children:l.jsxs(wm,{children:[h.leftWords.map((ft,Tt)=>{const Ot=x[Tt]!==void 0,he=me(ft,se.LEFT_WORD,X),Ee=pe[Tt],Ae=Ee?Ee.y:q+Tt*I;return l.jsxs(tu,{x:U,y:Ae,draggable:!Ot,onDragStart:Fe=>{Fe.target.moveToTop()},onDragEnd:Fe=>{Fe.target.getStage();const xt=h.rightWords,$t=X+60,lr=G-30;console.log(" Drop detection - Word dropped at:",Fe.target.x(),Fe.target.y());for(let Ke=0;Ke<xt.length;Ke++){const ct=xt[Ke],yt=pe[Ke],Jt=yt?yt.y:q+Ke*I,cr=me(ct,se.ORIGINAL_WORD,X),Rr=lr,Hr=lr+$t,He=Jt,Ct=Jt+cr;if(console.log(` Checking drop zone ${Ke}:`,{left:Rr,right:Hr,top:He,bottom:Ct,word:xt[Ke]}),Fe.target.x()>=Rr&&Fe.target.x()<=Hr&&Fe.target.y()>=He&&Fe.target.y()<=Ct){if(Object.entries(x).some(([ve,ge])=>ge===Ke&&parseInt(ve)!==Tt)){console.log(` Dropzone ${Ke} is already occupied, resetting position`),Fe.target.position({x:U,y:Ae});return}console.log(` Match found! Word "${h.leftWords[Tt]}" matched with "${xt[Ke]}"`),y(ve=>({...ve,[Tt]:Ke}));break}}console.log(" No match found, resetting position"),Fe.target.position({x:U,y:Ae})},children:[l.jsx(_i,{width:X,height:he,fill:Ot?"#e5e7eb":"#3b82f6",stroke:Ot?"#9ca3af":"#1d4ed8",strokeWidth:2,cornerRadius:8,opacity:Ot?.5:1}),l.jsx($u,{text:ft,x:X/2,y:he/2,fontSize:se.LEFT_WORD,fontFamily:"Arial",fill:Ot?"#dc2626":"white",align:"center",verticalAlign:"middle",width:X,offsetX:X/2,offsetY:he/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Tt}`)}),h.rightWords.map((ft,Tt)=>{const Ot=me(ft,se.ORIGINAL_WORD,X),he=pe[Tt],Ee=he?he.y:q+Tt*I,Ae=Object.keys(x).find(Fe=>x[Fe]===Tt);return l.jsxs(tu,{x:G,y:Ee,children:[l.jsx(_i,{width:X,height:Ot,fill:Ae?"#10b981":"#f3f4f6",stroke:Ae?"#059669":"#d1d5db",strokeWidth:2,cornerRadius:8}),l.jsx($u,{text:ft,x:X/2,y:Ot/2,fontSize:se.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:X,offsetX:X/2,offsetY:Ot/2,wrap:"word",ellipsis:!0,listening:!1}),Ae&&l.jsx($u,{text:h.leftWords[Ae],x:X/2,y:Ot-5,fontSize:se.DRAGGED_WORD,fontFamily:"Arial",fill:"#dc2626",align:"center",verticalAlign:"middle",width:X,offsetX:X/2,offsetY:se.DRAGGED_WORD/2,wrap:"word",ellipsis:!0})]},`right-${Tt}`)})]})})})}):l.jsx(zt,{className:"mb-6",children:l.jsx("div",{ref:P,className:"relative w-full",children:l.jsx(bm,{width:A,height:ce,className:`border-2 border-gray-200 rounded-lg ${Me?"pointer-events-none opacity-50":""}`,children:l.jsxs(wm,{children:[h?.leftWords?.map((ft,Tt)=>{const Ot=me(ft,se.LEFT_WORD,X),he=pe[Tt],Ee=he?he.y:q+Tt*I,Ae=v?.side==="left"&&v?.index===Tt;return l.jsxs(tu,{x:U,y:Ee,onClick:()=>nt("left",Tt),children:[l.jsx(_i,{width:X,height:Ot,fill:Ae?"#3b82f6":"#f3f4f6",stroke:Ae?"#1d4ed8":"#d1d5db",strokeWidth:Ae?3:2,cornerRadius:8}),l.jsx($u,{text:ft,x:X/2,y:Ot/2,fontSize:se.LEFT_WORD,fontFamily:"Arial",fill:Ae?"white":"#374151",align:"center",verticalAlign:"middle",width:X,offsetX:X/2,offsetY:Ot/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Tt}`)}),h?.rightWords?.map((ft,Tt)=>{const Ot=me(ft,se.ORIGINAL_WORD,X),he=pe[Tt],Ee=he?he.y:q+Tt*I,Ae=v?.side==="right"&&v?.index===Tt;return l.jsxs(tu,{x:G,y:Ee,onClick:()=>nt("right",Tt),children:[l.jsx(_i,{width:X,height:Ot,fill:Ae?"#3b82f6":"#f3f4f6",stroke:Ae?"#1d4ed8":"#d1d5db",strokeWidth:Ae?3:2,cornerRadius:8}),l.jsx($u,{text:ft,x:X/2,y:Ot/2,fontSize:se.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:X,offsetX:X/2,offsetY:Ot/2,wrap:"word",ellipsis:!0,listening:!1})]},`right-${Tt}`)}),je.map((ft,Tt)=>{const Ot=h?.leftWords?.[ft.startWord.index],he=h?.rightWords?.[ft.endWord.index],Ee=me(Ot,se.LEFT_WORD,X),Ae=me(he,se.ORIGINAL_WORD,X),Fe=pe[ft.startWord.index],xt=pe[ft.endWord.index],$t=Fe?Fe.y+Ee/2:q+ft.startWord.index*I+Ee/2,lr=xt?xt.y+Ae/2:q+ft.endWord.index*I+Ae/2;return l.jsx(Ui,{points:[U+X+20,$t,G-20,lr],stroke:ft.color||"#3b82f6",strokeWidth:ue,lineCap:"round",lineJoin:"round"},Tt)})]})})})}),l.jsx(zt,{children:l.jsxs("div",{className:`submit-section flex justify-center space-x-4 ${Me?"pointer-events-none opacity-50":""}`,children:[l.jsx(rt,{onClick:kt,variant:"outline",disabled:Me,children:"Reset"}),l.jsx(rt,{onClick:()=>St(!0),disabled:Me,className:"px-8",children:Me?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white",className:"mr-2"}),"Submitting..."]}):"Submit Test"})]})}),l.jsx(Na,{isOpen:Gt&&!Me,onClose:()=>or(!1),title:"Reset Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and answers."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:()=>or(!1),variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:Wt,variant:"primary",children:"Reset"})]})]})}),l.jsx(Na,{isOpen:yr,onClose:Nr,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the test? Your progress will be saved."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:Nr,variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:ft=>{console.log(" WordMatchingStudent: Leave button clicked in modal"),console.log(" WordMatchingStudent: Button click event:",ft),ur()},variant:"primary",children:"Leave"})]})]})}),l.jsx(Na,{isOpen:$e,onClose:()=>St(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:()=>St(!1),variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:()=>{St(!1),wr()},variant:"primary",children:"Submit"})]})]})})]}):l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx(cn,{size:"lg"})})},Gde=({id:e,x:t,y:r,width:n,height:s,text:a,fontSize:i,color:o,isSelected:c,onSelect:u,onUpdate:d,onDelete:f})=>{const[h,g]=_.useState(!1),x=_.useRef(!1),y=_.useRef(null),v=_.useRef({x:0,y:0}),T=_.useRef(null),k=5,b=()=>{x.current=!0,g(!0)},C=()=>{if(x.current=!1,g(!1),T.current)try{T.current.draggable(!1)}catch{}},E=()=>{y.current&&(clearTimeout(y.current),y.current=null)};_.useEffect(()=>()=>{E()},[]),_.useEffect(()=>{if(T.current)try{T.current.draggable(x.current)}catch{}},[h]);const j=A=>{A.cancelBubble=!0,d(e,{isEditing:!0})},P=A=>{d(e,{x:A.target.x(),y:A.target.y()})};return l.jsxs(tu,{ref:T,x:t,y:r,draggable:h,dragBoundFunc:A=>x.current?A:{x:t,y:r},name:"textbox-group",onClick:A=>{A.cancelBubble=!0,u(e)},onTap:A=>{A.cancelBubble=!0,u(e),E()},onDblClick:j,onDblTap:j,onPointerDown:A=>{A.cancelBubble=!0;const M=A.evt||{};v.current={x:M.clientX??0,y:M.clientY??0},E(),y.current=setTimeout(()=>{b()},400)},onPointerMove:A=>{if(!y.current)return;const M=A.evt||{},F=Math.abs((M.clientX??0)-v.current.x),B=Math.abs((M.clientY??0)-v.current.y);(F>k||B>k)&&E()},onPointerUp:A=>{A.cancelBubble=!0,E(),C()},onPointerLeave:()=>{E(),C()},onDragEnd:A=>{P(A),C()},children:[l.jsx(_i,{width:n,height:s,fill:c?"#fef3c7":"#ffffff",stroke:c?"#f59e0b":"#d1d5db",strokeWidth:c?2:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1},name:"textbox-rect",onTap:A=>{A.cancelBubble=!0,u(e),E()},onDblTap:A=>{A.cancelBubble=!0,j(A)}}),l.jsx($u,{text:a,width:n,height:s,padding:8,align:"left",verticalAlign:"top",fontSize:i,fill:o,wrap:"word",name:"textbox-text",onTap:A=>{A.cancelBubble=!0,u(e),E()},onDblTap:A=>{A.cancelBubble=!0,j(A)}})]})},Vde=({x:e,y:t,width:r,height:n,initialText:s,onSave:a,onCancel:i})=>{const o=_.useRef(null);_.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const c=u=>{u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),a(o.current.value)):u.key==="Escape"&&i()};return l.jsx("textarea",{ref:o,defaultValue:s,style:{position:"absolute",top:t,left:e,width:r,height:n,fontSize:"14px",border:"2px solid #f59e0b",borderRadius:"6px",padding:"8px",background:"white",resize:"none",outline:"none",fontFamily:"inherit",lineHeight:"1.4",zIndex:1e3},onKeyDown:c,onBlur:()=>a(o.current.value)})},qde=({width:e,height:t,lines:r,onDrawingChange:n,currentTool:s,currentColor:a,currentThickness:i,zoom:o,onZoomChange:c,isPanning:u,isFullscreen:d,constrainPanPosition:f,handleWheel:h,stageRef:g,setIsPanning:x,responsiveDimensions:y,canvasSize:v,question:T,textBoxes:k,setTextBoxes:b,selectedTextBox:C,setSelectedTextBox:E,handleTextBoxSelect:j,handleTextBoxUpdate:P,handleTextBoxDelete:A,isEditingText:M,editingTextBox:F,setIsEditingText:B,setEditingTextBox:V,setCurrentTool:ee})=>{const[ae,Z]=_.useState(!1),[te,L]=_.useState([]),[K,I]=_.useState(null),[H,U]=_.useState(null),R=_.useRef(null),[z,G]=_.useState(.25),[X,ne]=_.useState({x:0,y:0}),q=_.useRef(null),se=_.useRef(null),ue=_.useRef(!1),me=6;_.useEffect(()=>{const Ke=()=>{const ct=R.current;if(!ct)return;const yt=ct.clientWidth||1,Jt=ct.clientHeight||1,cr=Math.min(yt/(v.width||1),Jt/(v.height||1));G(Math.min(cr,1))};return Ke(),window.addEventListener("resize",Ke),()=>window.removeEventListener("resize",Ke)},[v.width,v.height,d]);const Ne=Ke=>{const ct=g.current,yt=ct.getPointerPosition();if(s==="pan"){if(Fe(Ke.target))try{ct.draggable(!1),ue.current=!0}catch{}return}if(s==="text"){const cr={x:(yt.x-ct.x())/ct.scaleX(),y:(yt.y-ct.y())/ct.scaleY()};q.current={...cr},se.current={x:yt.x,y:yt.y};return}Z(!0);const Jt={x:(yt.x-ct.x())/ct.scaleX(),y:(yt.y-ct.y())/ct.scaleY()};U(Jt),s==="pencil"?L([{x:Jt.x,y:Jt.y,color:a,thickness:i}]):s==="eraser"?L([{x:Jt.x,y:Jt.y,color:a,thickness:i,tool:"eraser"}]):["line","rectangle","circle"].includes(s)&&I({type:s,startX:Jt.x,startY:Jt.y,endX:Jt.x,endY:Jt.y,color:a,thickness:i})},ce=Ke=>{const ct=g.current,yt=ct.getPointerPosition(),Jt={x:(yt.x-ct.x())/ct.scaleX(),y:(yt.y-ct.y())/ct.scaleY()};if(ne(Jt),s!=="pan"){if(s==="text"&&q.current&&se.current){const cr=Math.abs(yt.x-se.current.x),Rr=Math.abs(yt.y-se.current.y);(cr>me||Rr>me)&&(q.current=null)}if(ae)if(s==="pencil"){const cr=[...te,{x:Jt.x,y:Jt.y,color:a,thickness:i}];L(cr)}else if(s==="eraser"){const cr=[...te,{x:Jt.x,y:Jt.y,color:a,thickness:i,tool:"eraser"}];L(cr)}else["line","rectangle","circle"].includes(s)&&K&&I({...K,endX:Jt.x,endY:Jt.y})}},Ue=Ke=>{const ct=g.current;if(s==="pan"){if(ue.current){try{ct.draggable(!0)}catch{}ue.current=!1}return}if(s==="text"&&q.current){const yt=Ke&&Ke.target;if(yt&&typeof yt.name=="function"&&yt.name()==="canvas-bg"){const cr={id:Date.now(),x:q.current.x,y:q.current.y,width:150,height:60,text:"Double-click to edit",fontSize:14,color:"#000000"};b(Rr=>[...Rr,cr]),E(cr.id)}q.current=null,se.current=null}if(ae){if(s==="pencil"){const yt=[...r,te];n(yt),L([])}else if(s==="eraser"){const yt=[...r,te];n(yt),L([])}else if(["line","rectangle","circle"].includes(s)&&K){const yt=[...r,K];n(yt),I(null)}Z(!1),U(null)}},[pe,je]=_.useState(null),[We,Me]=_.useState(null),[Nt,$e]=_.useState(!1),[St,At]=_.useState(null),[Bt,Gt]=_.useState(!1),[or,yr]=_.useState(!1),[it,Ve]=_.useState([]),[at,pt]=_.useState(null),[nt,kt]=_.useState({totalGestures:0,zoomGestures:0,panGestures:0,combinedGestures:0,averageResponseTime:0});let Wt=null;const ur=(window.devicePixelRatio||1)>1.5,Nr={scaleDelta:ur?.03:.04,centerDelta:ur?4:6,minTouchDistance:8,gestureHysteresis:.02},wr=()=>{Gt(!1),At(null),je(null),Me(null),Z(!1),U(null),yr(!1),pt(null),Wt&&(cancelAnimationFrame(Wt),Wt=null),g.current&&g.current.stop()},ft=Ke=>{if(Ke.length<2)return 0;const ct=Ke[0],yt=Ke[1];return Math.sqrt(Math.pow(yt.clientX-ct.clientX,2)+Math.pow(yt.clientY-ct.clientY,2))},Tt=Ke=>{if(Ke.length<2)return null;const ct=Ke[0],yt=Ke[1];return{x:(ct.clientX+yt.clientX)/2,y:(ct.clientY+yt.clientY)/2}},Ot=Ke=>{Ve(ct=>[...ct,{type:Ke,timestamp:Date.now()}].slice(-5))},he=()=>{const Ke=Date.now(),ct=it.filter(cr=>Ke-cr.timestamp<500);if(ct.length<2)return 0;const yt=ct[ct.length-1],Jt=ct[ct.length-2];return yt.type===Jt.type?Nr.gestureHysteresis:0},Ee=(Ke,ct)=>{kt(yt=>({totalGestures:yt.totalGestures+1,zoomGestures:Ke.includes("zoom")?yt.zoomGestures+1:yt.zoomGestures,panGestures:Ke.includes("pan")?yt.panGestures+1:yt.panGestures,combinedGestures:Ke==="zoom+pan"?yt.combinedGestures+1:yt.combinedGestures,averageResponseTime:(yt.averageResponseTime+ct)/2}))},Ae=(Ke,ct,yt,Jt)=>{const cr=g.current,Rr=cr.scaleX(),Hr=cr.position();let He=Rr,Ct=Hr;if(Ke){const ge=yt/pe,we=Rr*ge,Te=T?.max_canvas_width||1536,Se=T?.max_canvas_height||2048,Ze=Te/v.width,ut=Se/v.height,Je=Math.min(Ze,ut,1);He=Math.max(.25,Math.min(Je,we));const de=Jt,ye={x:(de.x-cr.x())/Rr,y:(de.y-cr.y())/Rr};Ct={x:de.x-ye.x*He,y:de.y-ye.y*He}}if(ct){const ge=Jt.x-We.x,we=Jt.y-We.y;Ke?Ct={x:Ct.x+ge,y:Ct.y+we}:Ct={x:Hr.x+ge,y:Hr.y+we}}Wt||(Wt=requestAnimationFrame(()=>{cr.scale({x:He,y:He}),cr.position(Ct),cr.batchDraw(),Wt=null})),Ke&&ct?(At("zoom+pan"),yr(!0)):Ke?(At("zoom"),yr(!0)):ct&&At("pan");const ve=Date.now()-(at||Date.now());Ee(Ke&&ct?"zoom+pan":Ke?"zoom":"pan",ve),console.log(" Combined gesture",{doZoom:Ke,doPan:ct,scale:He.toFixed(2),pos:Ct})},Fe=Ke=>{if(!Ke||typeof Ke.name!="function")return!1;if((Ke.name()||"").includes("textbox-"))return!0;const yt=Ke.getParent&&Ke.getParent();return yt&&typeof yt.name=="function"&&(yt.name()||"").includes("textbox-")},xt=Ke=>{const ct=Ke.evt.touches,yt=Ke.target;if(Fe(yt)){if(s==="pan"&&g.current)try{g.current.draggable(!1),ue.current=!0}catch{}return}ct.length===2?(Ke.evt.preventDefault(),Gt(!0),At(null),je(ft(ct)),Me(Tt(ct)),Z(!1),pt(Date.now())):ct.length===1&&(Gt(!1),At(null),Ne(Ke))},$t=Ke=>{const ct=Ke.evt.touches,yt=Ke.target;if(!Fe(yt))if(ct.length===2&&Bt){Ke.evt.preventDefault();const Jt=g.current,cr=ft(ct),Rr=Tt(ct);if(pe&&We&&Jt&&cr>Nr.minTouchDistance){const Hr=Math.abs(cr/pe-1),He=Math.sqrt(Math.pow(Rr.x-We.x,2)+Math.pow(Rr.y-We.y,2)),Ct=he(),le=Nr.scaleDelta-Ct,ve=Nr.centerDelta-Ct*10,ge=Hr>le,we=He>ve;(ge||we)&&(Ae(ge,we,cr,Rr),ge&&we?Ot("zoom+pan"):ge?Ot("zoom"):we&&Ot("pan")),console.log(" Gesture Debug",{scaleDelta:Hr.toFixed(3),centerDelta:He.toFixed(1),doZoom:ge,doPan:we,hysteresis:Ct.toFixed(3),adjustedScaleDelta:le.toFixed(3),adjustedCenterDelta:ve.toFixed(1),gestureHistory:it.slice(-3)})}je(cr),Me(Rr)}else ct.length===1&&!Bt&&(Ke.evt.preventDefault(),ce())},lr=Ke=>{const ct=Ke.evt.touches,yt=Ke.target;Fe(yt)||(ct.length===0?(Ue(Ke),wr(),yr(!1)):ct.length===1&&(Gt(!1),At(null),je(null),Me(null),yr(!1)))};return l.jsx("div",{className:"relative w-full block sm:flex sm:justify-center",children:l.jsx("div",{className:"w-full max-w-full block sm:flex sm:justify-center",children:l.jsxs("div",{className:"relative",style:{border:d&&(y.width<window.innerWidth-40||y.height<window.innerHeight-40)?"2px solid #000000":"none",borderRadius:"8px",overflow:"hidden"},children:[l.jsx("div",{ref:R,className:"w-full h-full",style:{touchAction:"manipulation"},children:l.jsx(bm,{ref:g,width:y.width,height:y.height,scaleX:d?y.zoom:o,scaleY:d?y.zoom:o,onMouseDown:Ne,onMousemove:ce,onMouseup:Ue,onTouchStart:xt,onTouchMove:$t,onTouchEnd:lr,onWheel:h||(()=>{}),onDragStart:()=>{console.log(" Drag started"),s==="pan"&&x(!0)},onDragEnd:()=>{if(console.log(" Drag ended"),s==="pan"&&(x(!1),f)){const Ke=g.current,ct=R.current,yt=ct?.clientWidth||y.width,Jt=ct?.clientHeight||y.height,cr=v.width*Ke.scaleX(),Rr=v.height*Ke.scaleY(),Hr=Ke.x(),He=Ke.y();(Hr>yt||Hr<-cr||He>Jt||He<-Rr)&&f(Ke)}},draggable:s==="pan"&&o>.25,className:`border-0 rounded-none shadow-none sm:border sm:rounded-lg sm:shadow-sm ${s==="pan"?"cursor-grab":u?"cursor-grabbing":"cursor-crosshair"}`,style:{width:"100%",height:"auto"},onLoad:()=>{console.log(" DrawingTestStudent - Stage loaded with dimensions:",y.width,"x",y.height),console.log(" DrawingTestStudent - Canvas size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Current zoom level:",o),console.log(" DrawingTestStudent - Effective display size:",Math.round(v.width*o),"x",Math.round(v.height*o)),console.log(" DrawingTestStudent - Total pixels displayed:",Math.round(v.width*o*v.height*o))},children:l.jsxs(wm,{children:[l.jsx(_i,{x:0,y:0,width:v.width,height:v.height,fill:"white",name:"canvas-bg"}),r.map((Ke,ct)=>{if(Array.isArray(Ke)){const yt=Ke[0]?.tool==="eraser";return l.jsx(Ui,{points:Ke.flatMap(Jt=>[Jt.x,Jt.y]),stroke:yt?"black":Ke[0]?.color||"#000000",strokeWidth:yt?(Ke[0]?.thickness||2)*7:Ke[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:yt?"destination-out":"source-over"},ct)}else{if(Ke.type==="line")return l.jsx(Ui,{points:[Ke.startX,Ke.startY,Ke.endX,Ke.endY],stroke:Ke.color,strokeWidth:Ke.thickness,lineCap:"round"},ct);if(Ke.type==="rectangle"){const yt=Math.abs(Ke.endX-Ke.startX),Jt=Math.abs(Ke.endY-Ke.startY),cr=Math.min(Ke.startX,Ke.endX),Rr=Math.min(Ke.startY,Ke.endY);return l.jsx(_i,{x:cr,y:Rr,width:yt,height:Jt,stroke:Ke.color,strokeWidth:Ke.thickness,fill:"transparent"},ct)}else if(Ke.type==="circle"){const yt=Math.sqrt(Math.pow(Ke.endX-Ke.startX,2)+Math.pow(Ke.endY-Ke.startY,2))/2,Jt=(Ke.startX+Ke.endX)/2,cr=(Ke.startY+Ke.endY)/2;return l.jsx(Mf,{x:Jt,y:cr,radius:yt,stroke:Ke.color,strokeWidth:Ke.thickness,fill:"transparent"},ct)}}return null}),k.map(Ke=>l.jsx(Gde,{...Ke,isSelected:C===Ke.id,onSelect:j,onUpdate:P,onDelete:A},Ke.id)),s==="pencil"&&l.jsx(Ui,{points:te.flatMap(Ke=>[Ke.x,Ke.y]),stroke:a,strokeWidth:i,tension:.5,lineCap:"round",lineJoin:"round"}),s==="eraser"&&l.jsx(Ui,{points:te.flatMap(Ke=>[Ke.x,Ke.y]),stroke:"black",strokeWidth:i*7,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:"destination-out"}),K&&K.type==="line"&&l.jsx(Ui,{points:[K.startX,K.startY,K.endX,K.endY],stroke:K.color,strokeWidth:K.thickness,lineCap:"round"}),K&&K.type==="rectangle"&&l.jsx(_i,{x:Math.min(K.startX,K.endX),y:Math.min(K.startY,K.endY),width:Math.abs(K.endX-K.startX),height:Math.abs(K.endY-K.startY),stroke:K.color,strokeWidth:K.thickness,fill:"transparent"}),K&&K.type==="circle"&&l.jsx(Mf,{x:(K.startX+K.endX)/2,y:(K.startY+K.endY)/2,radius:Math.sqrt(Math.pow(K.endX-K.startX,2)+Math.pow(K.endY-K.startY,2))/2,stroke:K.color,strokeWidth:K.thickness,fill:"transparent"}),s==="eraser"&&l.jsx(Mf,{x:X.x,y:X.y,radius:i*7/2,stroke:"#666666",strokeWidth:2,fill:"rgba(102, 102, 102, 0.2)",dash:[5,5],listening:!1}),s==="pencil"&&l.jsx(Ui,{points:[X.x-10,X.y,X.x+10,X.y,X.x,X.y-10,X.x,X.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="line"&&l.jsx(Ui,{points:[X.x-10,X.y,X.x+10,X.y,X.x,X.y-10,X.x,X.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="rectangle"&&l.jsx(Ui,{points:[X.x-10,X.y,X.x+10,X.y,X.x,X.y-10,X.x,X.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="circle"&&l.jsx(Ui,{points:[X.x-10,X.y,X.x+10,X.y,X.x,X.y-10,X.x,X.y+10],stroke:"#666666",strokeWidth:1,listening:!1})]})})}),M&&F&&l.jsx(Vde,{x:F.x,y:F.y,width:F.width,height:F.height,initialText:F.text,onSave:Ke=>{P(F.id,{text:Ke}),B(!1),V(null)},onCancel:()=>{B(!1),V(null)}}),l.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[l.jsx("button",{onClick:()=>{const Ke=g.current,ct=Ke.scaleX(),yt=T?.max_canvas_width||1536,Jt=T?.max_canvas_height||2048,cr=yt/v.width,Rr=Jt/v.height,Hr=Math.min(cr,Rr,5),He=Math.min(Hr,Ke.scaleX()*1.2);Ke.scale({x:He,y:He}),Ke.batchDraw(),console.log(" DrawingTestStudent - Zoom In button:",ct.toFixed(2),"->",He.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*He),"x",Math.round(v.height*He)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*He*v.height*He),"pixels"),c(He)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom In",children:"+"}),l.jsx("button",{onClick:()=>{const Ke=g.current,ct=Ke.scaleX(),yt=Math.max(.25,Ke.scaleX()*.8);Ke.scale({x:yt,y:yt}),Ke.batchDraw(),console.log(" DrawingTestStudent - Zoom Out button:",ct.toFixed(2),"->",yt.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*yt),"x",Math.round(v.height*yt)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*yt*v.height*yt),"pixels"),c(yt)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom Out",children:""}),l.jsx("button",{onClick:()=>{const Ke=g.current,ct=Ke.scaleX();Ke.scale({x:1,y:1}),Ke.position({x:0,y:0}),Ke.batchDraw(),console.log(" DrawingTestStudent - Reset zoom:",ct.toFixed(2),"-> 1.00"),console.log(" DrawingTestStudent - Reset effective size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Reset resolution:",v.width*v.height,"pixels"),c(1)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 text-xs",title:"Reset Zoom",children:"1:1"})]}),l.jsxs("div",{className:"absolute bottom-2 left-2 bg-white border border-gray-300 rounded px-2 py-1 text-xs text-gray-600 shadow-sm",children:[Math.round(o*100),"%"]})]})})})},Kde=({content:e})=>{if(!e)return l.jsx("div",{className:"text-gray-500 italic",children:"No instructions provided"});const t=n=>{if(!n)return"";if(n.type==="text"){let s=n.text||"";if(n.format&&(n.format&1&&(s=`<strong>${s}</strong>`),n.format&2&&(s=`<em>${s}</em>`),n.format&8&&(s=`<u>${s}</u>`),n.format&16&&(s=`<s>${s}</s>`)),n.style){const a=n.style.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}if(n.textStyle){const a=n.textStyle.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}return s}if(n.type==="paragraph"){const s=n.children?n.children.map(t).join(""):"";let a="text-left";return n.format&&(n.format==="center"?a="text-center":n.format==="right"?a="text-right":n.format==="left"&&(a="text-left")),`<p class="${a}">${s}</p>`}if(n.type==="heading"){const s=n.tag||"h1",a=n.children?n.children.map(t).join(""):"";return`<${s}>${a}</${s}>`}if(n.type==="list"){const s=n.listType==="bullet"?"ul":"ol",a=n.children?n.children.map(i=>{if(i.type==="listitem"){const o=i.children?i.children.map(t).join(""):"";let c="margin: 4px 0; display: list-item;";return i.format&&(i.format==="center"?c+=" text-align: center;":i.format==="right"?c+=" text-align: right;":i.format==="left"&&(c+=" text-align: left;")),`<li style="${c}">${o}</li>`}return""}).join(""):"";return`<${s} style="margin: 8px 0; padding-left: 20px; list-style-type: ${n.listType==="bullet"?"disc":"decimal"}; display: block;">${a}</${s}>`}return n.children?n.children.map(t).join(""):""};let r=e;if(typeof e=="string"&&e.startsWith("{"))try{const n=JSON.parse(e);n.text?r=n.text:n.content?r=n.content:n.root&&n.root.children&&(r=n.root.children.map(t).join(""))}catch(n){console.log("Failed to parse Lexical content:",n)}return l.jsx("div",{className:"max-w-none rich-text-content",style:{lineHeight:"1.6",fontSize:"14px"},dangerouslySetInnerHTML:{__html:r}})},Yde=({question:e,questionIndex:t,studentAnswer:r,onAnswerChange:n,mode:s,testId:a,testType:i})=>{ai();const[o,c]=_.useState([]),[u,d]=_.useState(!0),[f,h]=_.useState("pencil"),[g,x]=_.useState("#000000"),[y,v]=_.useState(2),[T,k]=_.useState([]),[b,C]=_.useState(-1),[E,j]=_.useState({width:600,height:800}),[P,A]=_.useState(1),[M,F]=_.useState(!1),[B,V]=_.useState(!1),[ee,ae]=_.useState(!1),[Z,te]=_.useState([]),[L,K]=_.useState(null),[I,H]=_.useState(!1),[U,R]=_.useState(null),z=b>0,G=b<T.length-1,[X,ne]=_.useState(!1),q=_.useRef(null),se=_.useRef(null),[ue,me]=_.useState({width:600,height:800}),Ne=_.useRef(!1),[ce,Ue]=_.useState(.25),pe=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#808080","#FFC0CB","#A52A2A","#000080"];_.useEffect(()=>{const Ve=()=>{ae(window.innerWidth>=1024)};return Ve(),window.addEventListener("resize",Ve),()=>window.removeEventListener("resize",Ve)},[]),_.useEffect(()=>{if(e){const Ve=e.max_canvas_width||1536,at=e.max_canvas_height||2048,pt=e.canvas_width||600,nt=e.canvas_height||800;if(j({width:Ve,height:at}),Ne.current)console.log(" DrawingTestStudent - Preserving user zoom:",P.toFixed(2));else{A(1),Ne.current=!0;const Wt=(pt-Ve*1)/2,rr=(nt-at*1)/2;if(!isNaN(Wt)&&!isNaN(rr)&&q.current){const ur={x:Wt,y:rr};q.current.position(ur),q.current.batchDraw()}console.log(" DrawingTestStudent - Canvas size set:",Ve,"x",at),console.log(" DrawingTestStudent - Viewport size:",pt,"x",nt),console.log(" DrawingTestStudent - Initial zoom:",1 .toFixed(2)),console.log(" DrawingTestStudent - Image resolution:",Ve*at,"pixels"),console.log(" DrawingTestStudent - Aspect ratio:",(Ve/at).toFixed(2))}if(r&&typeof r=="string")try{const kt=JSON.parse(r);kt.lines?c(kt.lines):c(kt),kt.textBoxes&&te(kt.textBoxes)}catch{console.log("No valid drawing data found")}d(!1)}},[e,r]),_.useEffect(()=>{const Ve=()=>{const at=se.current;if(!at)return;const pt=at.clientWidth||1,nt=at.clientHeight||1,kt=Math.min(pt/(E.width||1),nt/(E.height||1));Ue(Math.min(kt,1))};return Ve(),window.addEventListener("resize",Ve),()=>window.removeEventListener("resize",Ve)},[E.width,E.height,X]);const je=Ve=>{c(Ve);const at={lines:Ve,textBoxes:Z};n(e.question_id,JSON.stringify(at)),We(Ve,Z)},We=(Ve,at=Z)=>{const pt=T.slice(0,b+1);pt.push({lines:[...Ve],textBoxes:[...at]}),k(pt),C(pt.length-1)},Me=()=>{if(z){const Ve=b-1,at=T[Ve];if(at&&typeof at=="object"&&at.lines){c([...at.lines]),te([...at.textBoxes]);const pt={lines:at.lines,textBoxes:at.textBoxes};n(e.question_id,JSON.stringify(pt))}else{const pt=at||[];c([...pt]),n(e.question_id,JSON.stringify(pt))}C(Ve)}},Nt=()=>{if(G){const Ve=b+1,at=T[Ve];if(at&&typeof at=="object"&&at.lines){c([...at.lines]),te([...at.textBoxes]);const pt={lines:at.lines,textBoxes:at.textBoxes};n(e.question_id,JSON.stringify(pt))}else{const pt=at||[];c([...pt]),n(e.question_id,JSON.stringify(pt))}C(Ve)}},$e=()=>{c([]),te([]),K(null),n(e.question_id,"")},St=Ve=>{K(Ve)},At=(Ve,at)=>{const pt=Z.map(kt=>kt.id===Ve?{...kt,...at}:kt);te(pt),We(o,pt);const nt={lines:o,textBoxes:pt};if(n(e.question_id,JSON.stringify(nt)),at.isEditing){const kt=Z.find(Wt=>Wt.id===Ve);R(kt),H(!0)}},Bt=Ve=>{const at=Z.filter(nt=>nt.id!==Ve);te(at),L===Ve&&K(null),We(o,at);const pt={lines:o,textBoxes:at};n(e.question_id,JSON.stringify(pt))},Gt=()=>{if(X){const pt=e?.canvas_width||600,nt=e?.canvas_height||800,kt=window.innerWidth-40,Wt=window.innerHeight-40,rr=kt/pt,ur=Wt/nt,Nr=Math.min(rr,ur,1);return{width:pt,height:nt,zoom:Nr}}const Ve=e?.canvas_width||600,at=e?.canvas_height||800;return{width:Ve,height:at,zoom:1}};_.useEffect(()=>{const Ve=()=>{me(Gt())};return Ve(),window.addEventListener("resize",Ve),()=>window.removeEventListener("resize",Ve)},[X,E]);const or=Ve=>{Ve.evt.preventDefault();const at=q.current,pt=at.scaleX(),nt=at.getPointerPosition(),kt={x:(nt.x-at.x())/pt,y:(nt.y-at.y())/pt},Wt=Ve.evt.deltaY>0?pt*.9:pt*1.1,rr=e?.max_canvas_width||1536,ur=e?.max_canvas_height||2048,Nr=rr/E.width,wr=ur/E.height,ft=Math.min(Nr,wr,1),Tt=Math.max(ce,Math.min(ft,Wt)),Ot={x:nt.x-kt.x*Tt,y:nt.y-kt.y*Tt};if(Tt<=ce&&se.current){const he=se.current.clientWidth||1,Ee=se.current.clientHeight||1;Ot.x=(he-E.width*Tt)/2,Ot.y=(Ee-E.height*Tt)/2}at.scale({x:Tt,y:Tt}),at.position(Ot),at.batchDraw(),console.log(" DrawingTestStudent - Wheel zoom:",pt.toFixed(2),"->",Tt.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(E.width*Tt),"x",Math.round(E.height*Tt)),console.log(" DrawingTestStudent - New resolution:",Math.round(E.width*Tt*E.height*Tt),"pixels"),A(Tt),Ne.current=!0},yr=Ve=>{const at=Ve.scaleX(),pt=se.current,nt=pt?.clientWidth||ue.width,kt=pt?.clientHeight||ue.height,Wt=E.width*at,rr=E.height*at;if(at<=ce){const Ae=(nt-Wt)/2,Fe=(kt-rr)/2;Ve.position({x:Ae,y:Fe}),Ve.batchDraw();return}if(Wt<=nt&&rr<=kt){const Ae=(nt-Wt)/2,Fe=(kt-rr)/2;Ve.position({x:Ae,y:Fe}),Ve.batchDraw();return}const ur=Math.max(0,Wt-nt),Nr=Math.max(0,rr-kt),wr=-ur,ft=-Nr,Tt=Ve.x(),Ot=Ve.y(),he=Math.max(wr,Math.min(ur,Tt)),Ee=Math.max(ft,Math.min(Nr,Ot));(he!==Tt||Ee!==Ot)&&(Ve.position({x:he,y:Ee}),Ve.batchDraw())},it=()=>{if(X)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const Ve=se.current;Ve&&(Ve.requestFullscreen?Ve.requestFullscreen():Ve.webkitRequestFullscreen?Ve.webkitRequestFullscreen():Ve.msRequestFullscreen&&Ve.msRequestFullscreen())}};return _.useEffect(()=>{const Ve=()=>{ne(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Ve),document.addEventListener("webkitfullscreenchange",Ve),document.addEventListener("msfullscreenchange",Ve),()=>{document.removeEventListener("fullscreenchange",Ve),document.removeEventListener("webkitfullscreenchange",Ve),document.removeEventListener("msfullscreenchange",Ve)}},[]),_.useEffect(()=>()=>{q.current&&q.current.stop()},[]),u?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(cn,{})}):e?l.jsxs("div",{className:`drawing-question w-full max-w-full mx-0 p-0 sm:p-2 ${X?"fixed inset-0 z-50 bg-white overflow-y-auto":""}`,children:[!X&&l.jsx("div",{className:"mb-4",children:l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",t+1]})}),!X&&e.question_json&&e.question_json.trim()&&l.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Task:"}),l.jsx("div",{className:"text-gray-700",children:l.jsx(Kde,{content:e.question_json})})]}),!X&&l.jsx(zt,{className:"p-1 sm:p-2 mb-2",children:l.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"hidden sm:block text-sm text-gray-700",children:"Tool:"}),l.jsxs("div",{className:"flex flex-nowrap sm:flex-wrap gap-1 overflow-x-auto",children:[l.jsx("button",{onClick:()=>h("pencil"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pencil"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pencil (Freehand drawing)",children:""}),l.jsx("button",{onClick:()=>h("line"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="line"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Line",children:""}),l.jsx("button",{onClick:()=>h("rectangle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="rectangle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Rectangle",children:""}),l.jsx("button",{onClick:()=>h("circle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="circle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Circle",children:""}),l.jsx("button",{onClick:()=>h("eraser"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="eraser"?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Eraser",children:""}),l.jsx("button",{onClick:()=>h("text"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="text"?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Text Box",children:""}),l.jsx("button",{onClick:()=>h("pan"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pan"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pan (Move canvas)",children:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-gray-700",children:"History:"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:Me,disabled:!z,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${z?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:""}),l.jsx("button",{onClick:Nt,disabled:!G,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${G?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:""})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>F(!M),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:g}}),l.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:"Color"})]}),M&&l.jsx("div",{className:"absolute top-full left-0 mt-2 p-4 bg-white border border-gray-300 rounded-lg shadow-lg z-30 min-w-max",children:l.jsx("div",{className:"flex flex-wrap gap-2 max-w-xs",children:pe.map(Ve=>l.jsx("button",{onClick:()=>{x(Ve),F(!1)},className:`w-10 h-10 rounded border-2 hover:scale-110 transition-transform flex-shrink-0 ${g===Ve?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:Ve},title:Ve},Ve))})})]}),l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[l.jsx("label",{className:"text-xs sm:text-sm text-gray-700",children:"Thickness:"}),l.jsx("input",{type:"range",min:"1",max:"10",value:y,onChange:Ve=>v(parseInt(Ve.target.value)),className:"w-16 sm:w-20"}),l.jsxs("span",{className:"text-xs text-gray-500 w-6 sm:w-8",children:[y,"px"]})]}),l.jsx(rt,{onClick:$e,variant:"secondary",size:"sm",children:"Clear"})]})}),l.jsx(zt,{paddingClass:"p-0 sm:p-2",children:l.jsxs("div",{ref:se,className:"w-full drawing-canvas-container relative p-0 m-0",children:[l.jsx(qde,{width:E.width,height:E.height,lines:o,onDrawingChange:je,currentTool:f,currentColor:g,currentThickness:y,zoom:P,onZoomChange:A,isPanning:B,isFullscreen:X,constrainPanPosition:yr,handleWheel:or,stageRef:q,setIsPanning:V,responsiveDimensions:ue,canvasSize:E,question:e,textBoxes:Z,setTextBoxes:te,selectedTextBox:L,setSelectedTextBox:K,handleTextBoxSelect:St,handleTextBoxUpdate:At,handleTextBoxDelete:Bt,isEditingText:I,editingTextBox:U,setIsEditingText:H,setEditingTextBox:R,setCurrentTool:h}),l.jsx("button",{onClick:it,className:"absolute top-2 left-2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-lg transition-all duration-200 z-10",title:X?"Exit Fullscreen":"Enter Fullscreen",children:X?l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})]}):l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-500",children:"No drawing question data available"})})})},I5={enhanceUserData(e,t){const r={id:e.id||e.student_id||e.teacher_id,username:e.username||e.student_id,name:e.name||e.first_name,surname:e.surname||e.last_name,nickname:e.nickname,role:t,is_active:e.is_active!==void 0?e.is_active:!0,created_at:e.created_at,updated_at:e.updated_at};switch(t){case"student":return{...r,student_id:e.student_id,grade:e.grade,class:e.class,number:e.number,subjects:e.subjects||[]};case"teacher":return{...r,teacher_id:e.teacher_id,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,subjects:e.subjects||[]};case"admin":return{...r,admin_id:e.admin_id,permissions:e.permissions||["all"]};default:return r}},async studentLogin(e){console.log("Trying student login...");try{const t=await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e.username,password:e.password})}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.student,role:"student",response:t};throw new Error(r.message||"Student login failed")}catch(t){throw console.error("Student login error:",t),new Error(t.message||"Student login failed")}},async teacherLogin(e){console.log("Trying teacher login...");try{const t=await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.teacher,role:"teacher",response:t};throw new Error(r.message||"Teacher login failed")}catch(t){throw console.error("Teacher login error:",t),new Error(t.message||"Teacher login failed")}},async adminLogin(e){console.log("Trying admin login...");try{const t=await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.admin,role:"admin",response:t};throw new Error(r.message||"Admin login failed")}catch(t){throw console.error("Admin login error:",t),new Error(t.message||"Admin login failed")}},async login(e){const{username:t,password:r}=e;console.log("Attempting login with:",t,r);try{if(t==="admin"){const o=await this.adminLogin(e),c=await o.json();return await this.handleLoginResponse(o,"admin",c)}const n=await this.teacherLogin(e),s=await n.json();if(n.ok&&s.success)return await this.handleLoginResponse(n,"teacher",s);const a=await this.studentLogin(e),i=await a.json();return a.ok&&i.success?await this.handleLoginResponse(a,"student",i):(this.handleLoginFailure(),{success:!1,message:"Login failed. Please check your credentials and try again."})}catch(n){return console.error("Login error:",n),this.handleLoginFailure(),{success:!1,message:n.message||"Login failed"}}},async handleLoginResponse(e,t,r){if(e.ok&&r.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),this.handleLoginFailure(),{success:!1,message:"JWT system not available"};if(r.accessToken&&r.role)try{window.tokenManager.setTokens(r.accessToken,r.role),window.roleBasedLoader.setupAccessAfterLogin()}catch(n){return console.error("[ERROR] Failed to initialize JWT system:",n),this.handleLoginFailure(),{success:!1,message:"Failed to initialize JWT system"}}return this.resetLoginForm(),await this.handlePostLoginActions(r,t),{success:!0,data:r,role:t}}return{success:!1,message:"Login failed"}},async handlePostLoginActions(e,t){console.log(`Handling post-login actions for role: ${t}`);try{switch(t){case"student":e.student&&(this.populateStudentInfo(e.student),window.loadStudentData&&await window.loadStudentData());break;case"teacher":e.teacher&&(this.populateTeacherInfo(e.teacher),window.loadTeacherData&&await window.loadTeacherData());break;case"admin":e.admin&&window.loadAdminData&&await window.loadAdminData();break;default:console.warn(`Unknown role for post-login actions: ${t}`)}}catch(r){console.error("Error in post-login actions:",r)}},handleLoginFailure(){console.log("All login attempts failed"),this.resetLoginForm(),window.showNotification&&window.showNotification("Login failed. Please check your credentials and try again.","error")},resetLoginForm(){const e=document.getElementById("unifiedLoginForm");if(e){e.querySelectorAll("input").forEach(n=>{n.disabled=!1,n.style.opacity="1",n.style.cursor="text",n.removeAttribute("readonly"),n.style.pointerEvents="auto"});const r=e.querySelector('button[type="submit"]');r&&(r.disabled=!1,r.style.opacity="1",r.style.cursor="pointer",r.style.pointerEvents="auto",r.innerHTML="Login"),e.classList.remove("test-submitting","disabled"),e.style.pointerEvents="auto",console.log("Login form reset successfully - all inputs re-enabled")}},async logout(){console.log(" Logout initiated...");try{return window.tokenManager&&window.tokenManager.logout(),window.roleBasedLoader&&window.roleBasedLoader.reloadRoleAccess(),window.clearTestLocalStorage&&window.clearTestLocalStorage(),this.resetInterfaceAfterSessionClear(),console.log(" Logout completed - user session cleared, test data cleared, and interface reset"),{success:!0}}catch(e){return console.error("Logout error:",e),this.resetInterfaceAfterSessionClear(),{success:!0}}},resetInterfaceAfterSessionClear(){try{window.forceLogout=!0,window.preventAutoLogin=!0,window.isClearingSession=!0,window.forceLogoutComplete=!0,document.querySelectorAll(".section").forEach(s=>{s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0"}),document.querySelectorAll('[id$="-cabinet"], [id$="-container"], [id*="cabinet"], [id*="container"]').forEach(s=>{s.id&&s.id!=="login-section"&&(s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0")}),document.body.classList.remove("student-logged-in","teacher-logged-in","admin-logged-in"),document.body.classList.add("force-logout");const r=document.getElementById("login-section");r&&(r.classList.add("active"),r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),document.querySelectorAll("input, select, textarea").forEach(s=>{s.type!=="hidden"&&(s.value="",s.checked=!1)}),console.log(" Interface reset to login state")}catch(e){console.error("Error resetting interface:",e),localStorage.clear(),sessionStorage.clear(),window.location.reload()}},async changePassword(e){try{return{success:!0,message:(await oa.post("/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.message}}catch(t){throw new Error(t.response?.data?.message||"Password change failed")}},async verifyToken(e){try{const t=await oa.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,valid:t.data.valid,user:t.data.user}}catch(t){return{success:!1,valid:!1,error:t.message}}},async refreshToken(e){try{const t=await oa.post("/auth/refresh",{refreshToken:e});return{success:!0,token:t.data.token,refreshToken:t.data.refreshToken}}catch(t){throw new Error(t.response?.data?.message||"Token refresh failed")}},async getUserProfile(){try{return{success:!0,user:(await oa.get("/auth/profile")).data.user}}catch(e){throw new Error(e.response?.data?.message||"Failed to get user profile")}},async updateUserProfile(e){try{return{success:!0,user:(await oa.put("/auth/profile",e)).data.user}}catch(t){throw new Error(t.response?.data?.message||"Failed to update user profile")}},populateStudentInfo(e){console.log("=== populateStudentInfo called ==="),console.log("Student object:",e);const t=document.getElementById("studentName");if(t){const s=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=s,console.log("Set student name to:",s)}const r=document.getElementById("studentGrade");r&&(r.textContent=e?.grade||"",console.log("Set student grade to:",e?.grade));const n=document.getElementById("studentClass");n&&(n.textContent=e?.class||"",console.log("Set student class to:",e?.class)),console.log("Student info populated successfully")},populateTeacherInfo(e){console.log("=== populateTeacherInfo called ==="),console.log("Teacher object:",e);const t=document.getElementById("teacherName");if(t){const n=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=n,console.log("Set teacher name to:",n)}const r=document.getElementById("teacherUsername");r&&(r.textContent=e?.username||"",console.log("Set teacher username to:",e?.username)),console.log("Teacher info populated successfully")},getCurrentTeacherId(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.sub?e.role==="teacher"?(console.log(`[DEBUG] Found teacher ID from JWT: ${e.sub}`),e.sub):(console.warn(`[WARN] Unsupported role for teacher function: ${e.role}`),null):(console.warn("[WARN] No teacher ID found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher ID from JWT:",e),null}},getCurrentAdmin(){const e=window.tokenManager?.getToken();if(!e)return null;const t=window.tokenManager.decodeToken(e);if(!t||t.role!=="admin")throw new Error("getCurrentAdmin() called by non-admin user");return{id:t.sub,username:t.username,role:t.role}},getCurrentTeacherUsername(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.username?(console.log(`[DEBUG] Found teacher username from JWT: ${e.username}`),e.username):(console.warn("[WARN] No teacher username found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher username from JWT:",e),null}},isAdmin(){try{const e=window.tokenManager?.getToken();if(!e)return!1;const t=window.tokenManager.decodeToken(e);return t&&t.role==="admin"}catch(e){return console.error("[ERROR] Error checking admin status:",e),!1}},getCurrentAdminId(){try{const e=this.getCurrentAdmin();return e?e.id:null}catch(e){return console.error("[ERROR] Error getting admin ID:",e),null}}},Xde=()=>{const e=Wo(),{login:t,setUserData:r,isAuthenticated:n,user:s}=Os(),[a,i]=_.useState({username:"",password:""}),[o,c]=_.useState(!1),[u,d]=_.useState(""),[f,h]=_.useState([]),[g,x]=_.useState(!1);_.useEffect(()=>{y()},[]);const y=_.useCallback(async()=>{console.log("Checking for existing JWT session...");try{(window.forceLogout||window.preventAutoLogin)&&(window.forceLogout=!1,window.preventAutoLogin=!1)}catch{}if(window.tokenManager)if(await window.tokenManager.isAuthenticated()){console.log("JWT session valid, checking user role...");try{const V=await window.tokenManager.getAccessToken(),ee=window.tokenManager.decodeToken(V);ee&&ee.role?console.log("User role from JWT:",ee.role):console.log("No valid role found in JWT, showing login")}catch(V){console.error("Error decoding JWT token:",V)}}else console.log("No valid JWT session found, showing login");else console.log("No tokenManager found, showing login")},[]),v=_.useCallback(async B=>{if(B.preventDefault(),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),A("Please wait for the logout process to complete.","warning");return}const{username:V,password:ee}=a;if(!V||!ee){d("Please enter both username and password");return}c(!0),d("");try{let ae,Z;V==="admin"?(ae=await I5.adminLogin({username:V,password:ee}),Z=Ro.ADMIN):/^\d+$/.test(V)?(ae=await I5.studentLogin({username:V,password:ee}),Z=Ro.STUDENT):(ae=await I5.teacherLogin({username:V,password:ee}),Z=Ro.TEACHER);let te,L;if(ae.response?(te=ae,L=ae.response):(te=await ae.json(),L=ae),await T(L,Z,te)){A("Login successful!","success");try{if("credentials"in navigator&&window.PasswordCredential&&a?.username&&a?.password){const K=new window.PasswordCredential({id:String(a.username),password:String(a.password)});await navigator.credentials.store(K)}}catch{}try{window.forceLogout=!1,window.preventAutoLogin=!1}catch{}}}catch(ae){console.error("Login error:",ae),d("Invalid username or password")}finally{c(!1)}},[a]),T=_.useCallback(async(B,V,ee)=>{if(B.ok&&ee.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),j(),!1;try{ee.token&&(window.tokenManager.setTokens(ee.token,V),ee.refreshToken&&window.tokenManager.setRefreshToken(ee.refreshToken),console.log("JWT token stored successfully"));const ae={...ee.data,...ee,role:V};return r(ae),await k(ae),!0}catch(ae){return console.error("Error handling login response:",ae),j(ae),!1}}else return console.error("Login failed:",ee.error||"Unknown error"),d(ee.error||"Login failed. Please check your credentials."),!1},[t]),k=_.useCallback(async B=>{if(console.log("Handling post-login actions for role:",B.role),g){console.log(" Post-login already handled, skipping");return}x(!0);try{switch(B.role){case Ro.STUDENT:await b(B),e("/student");break;case Ro.TEACHER:await C(B),e("/teacher");break;case Ro.ADMIN:await E(B),e("/admin");break;default:console.error("Unknown user role:",B.role),j()}}catch(V){console.error("Error in post-login actions:",V),j(V)}},[e,g]);_.useEffect(()=>{n||x(!1)},[n]);const b=_.useCallback(async B=>{console.log("Populating student info:",B)},[]),C=_.useCallback(async B=>{console.log("Populating teacher info:",B)},[]),E=_.useCallback(async B=>{console.log("Populating admin info:",B)},[]),j=_.useCallback((B=null)=>{console.error("Login failure:",B),d("Login failed. Please check your credentials and try again."),P()},[]),P=_.useCallback(()=>{i({username:"",password:""}),d(""),c(!1)},[]),A=_.useCallback((B,V)=>{const ee={id:Date.now(),message:B,type:V,timestamp:new Date};h(ae=>[...ae,ee]),setTimeout(()=>{h(ae=>ae.filter(Z=>Z.id!==ee.id))},Xm.NOTIFICATION_DURATION)},[]),M=_.useCallback(B=>{const{name:V,value:ee}=B.target;i(ae=>({...ae,[V]:ee})),u&&d("")},[u]),F=_.useCallback(B=>{B.key==="Enter"&&!o&&v(B)},[v,o]);return l.jsxs(dt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsxs(dt.div,{className:"w-full max-w-md",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsxs(dt.div,{className:"text-center mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsx(dt.div,{className:"flex justify-center mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},children:l.jsx("img",{src:"/pics/logo_mws.png",alt:"MWS Logo",className:"h-64 w-64 object-contain"})}),l.jsx(dt.h1,{className:"text-2xl font-bold text-gray-900 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.3},children:"Test Management System"}),l.jsx(dt.div,{className:"text-lg text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:l.jsx("div",{children:"for Mathayomwatsing School students"})})]}),l.jsxs(dt.div,{className:"bg-white rounded-xl shadow-2xl p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,duration:.5,type:"spring"},children:[l.jsx(dt.h2,{className:"text-2xl font-semibold text-gray-900 text-center mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"Login"}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs(dt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9,duration:.3},children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),l.jsx(dt.input,{type:"text",id:"username",name:"username",value:a.username,onChange:M,onKeyDown:F,placeholder:"Enter your username",required:!0,autoComplete:"username",autoCapitalize:"none",spellCheck:!1,disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),l.jsxs(dt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.3},children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx(dt.input,{type:"password",id:"password",name:"password",value:a.password,onChange:M,onKeyDown:F,placeholder:"Enter your password",required:!0,autoComplete:"current-password",disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),l.jsx(il,{children:u&&l.jsx(dt.div,{id:"error-message",className:"bg-red-50 border border-red-200 rounded-lg p-3",role:"alert","aria-live":"polite",initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3},children:l.jsx("p",{className:"text-sm text-red-600",children:u})})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.3},children:l.jsx(rt,{type:"submit",variant:"primary",size:"lg",disabled:o,className:"w-full",children:o?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",className:"mr-2"}),"Logging in..."]}):"Log in"})})]}),l.jsx(dt.div,{className:"mt-6 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.3},children:l.jsx(dB,{to:"/privacy",className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Privacy Policy"})})]})]}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:l.jsx(il,{children:f.map(B=>l.jsx(dt.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring"},children:l.jsx(ou,{type:B.type,message:B.message,onClose:()=>h(V=>V.filter(ee=>ee.id!==B.id))})},B.id))})})]})},$s={async getStudentData(){console.log("getStudentData called - loading student subjects");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-subjects")).json();if(t.success)return console.log("Student data loaded successfully:",t.subjects),t.subjects;throw new Error(t.error||"Failed to load student data")}catch(e){throw console.error("Error loading student data:",e),e}},getStudentSubjects(e){return console.log("getStudentSubjects called with subjects:",e),e.map(t=>({id:t.id||t.subject_id,name:t.subject,grade:t.grade,class:t.class,testResults:t.test_results||[]}))},async getTeacherData(){console.log("getTeacherData called - loading teacher subjects");try{const e=await this.getCurrentTeacherId();if(!e)throw new Error("No valid teacher session found");const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-subjects")).json();if(r.success)return console.log("Teacher data loaded successfully:",r.subjects),{teacher_id:e,subjects:r.subjects,hasSubjects:r.subjects.length>0};throw new Error(r.error||"Failed to load teacher data")}catch(e){throw console.error("Error loading teacher data:",e),e}},getTeacherSubjects(e){return console.log("getTeacherSubjects called with subjects:",e),e.map(t=>{let r=[];return t.classes&&Array.isArray(t.classes)&&(r=t.classes.map(n=>({grade:n.grade,class:n.class,className:n.class}))),{id:t.subject_id,name:t.subject,classes:r,assignments:t.assignments||[],description:t.description||""}})},getGradeButtons(){return console.log("getGradeButtons called"),["M1","M2","M3","M4","M5","M6"].map(t=>({id:t,name:t,classes:this.generateClassButtons(t)}))},generateClassButtons(e){const t=[];for(let r=1;r<=10;r++)t.push({id:`${e}_${r}`,name:`${e}/${r}`,grade:e,class:r});return t},async getAdminData(){console.log("getAdminData called - loading admin data");try{if(!await this.getCurrentAdminId())throw new Error("No valid admin session found");const[t,r,n]=await Promise.allSettled([this.getAllTeachers(),this.getAllSubjects(),this.getAllUsers()]);return{teachers:t.status==="fulfilled"?t.value:[],subjects:r.status==="fulfilled"?r.value:[],users:n.status==="fulfilled"?n.value:[],loadedAt:new Date().toISOString()}}catch(e){throw console.error("Error loading admin data:",e),e}},async saveTeacherSubjects(e){console.log("saveTeacherSubjects called with subjects:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-teacher-subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:e})})).json();if(r.success)return console.log("Teacher subjects saved successfully"),r;throw new Error(r.error||"Failed to save teacher subjects")}catch(t){throw console.error("Error saving teacher subjects:",t),t}},async deleteTeacherSubject(e){console.log("deleteTeacherSubject called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/delete-teacher-subject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher subject assignment deleted successfully"),r;throw new Error(r.error||"Failed to delete teacher subject assignment")}catch(t){throw console.error("Error deleting teacher subject assignment:",t),t}},async getSubjectsDropdown(){console.log("getSubjectsDropdown called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("Subjects dropdown data loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,value:r.subject_name}));throw new Error(t.error||"Failed to load subjects dropdown")}catch(e){throw console.error("Error loading subjects dropdown:",e),e}},async getGradesAndClasses(){console.log("getGradesAndClasses called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-grades-classes")).json();if(t.success)return console.log("Grades and classes loaded successfully"),t.data;throw new Error(t.message||"Failed to load grades and classes")}catch(e){throw console.error("Error loading grades and classes:",e),e}},async saveSubjectClasses(e,t){console.log("saveSubjectClasses called with subjectId:",e,"classes:",t);try{const r=await this.getCurrentTeacherId();if(!r)throw new Error("No valid teacher session found");const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-subject-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:r,subject_id:e,classes:t})})).json();if(s.success)return console.log("Subject classes saved successfully"),s;throw new Error(s.error||"Failed to save subject classes")}catch(r){throw console.error("Error saving subject classes:",r),r}},async getAllSubjects(){console.log("getAllSubjects called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("All subjects loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,description:r.description||"",created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all subjects")}catch(e){throw console.error("Error loading all subjects:",e),e}},async getSubjectsForSelection(){console.log("getSubjectsForSelection called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-subjects")).json();if(t.success)return console.log("Subjects for selection loaded successfully"),t.subjects;throw new Error(t.message||"Failed to load subjects for selection")}catch(e){throw console.error("Error loading subjects for selection:",e),e}},async addAcademicYear(e){console.log("addAcademicYear called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/add-academic-year",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Academic year added successfully"),r;throw new Error(r.error||"Failed to add academic year")}catch(t){throw console.error("Error adding academic year:",t),t}},async getAllUsers(){console.log("getAllUsers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-users")).json();if(t.success)return console.log("All users loaded successfully"),t.users.map(r=>({id:r.id,student_id:r.student_id,grade:r.grade,class:r.class,number:r.number,name:r.name,surname:r.surname,nickname:r.nickname,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all users")}catch(e){throw console.error("Error loading all users:",e),e}},async getAllTeachers(){console.log("getAllTeachers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-teachers")).json();if(t.success)return console.log("All teachers loaded successfully"),t.teachers.map(r=>({id:r.id,teacher_id:r.teacher_id,username:r.username,name:r.name,surname:r.surname,email:r.email,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all teachers")}catch(e){throw console.error("Error loading all teachers:",e),e}},async createUser(e){console.log("createUser called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("User created successfully"),r;throw new Error(r.error||"Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){console.log("updateUser called with userId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("User updated successfully"),n;throw new Error(n.error||"Failed to update user")}catch(r){throw console.error("Error updating user:",r),r}},async createTeacher(e){console.log("createTeacher called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-teacher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher created successfully"),r;throw new Error(r.error||"Failed to create teacher")}catch(t){throw console.error("Error creating teacher:",t),t}},async updateTeacher(e,t){console.log("updateTeacher called with teacherId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-teacher/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("Teacher updated successfully"),n;throw new Error(n.error||"Failed to update teacher")}catch(r){throw console.error("Error updating teacher:",r),r}},async updateStudentInfo(e){console.log("updateStudentInfo called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-student-info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Student info updated successfully"),r;throw new Error(r.error||"Failed to update student info")}catch(t){throw console.error("Error updating student info:",t),t}},async changePassword(e){console.log("changePassword called");let t;if(e.studentId)t="/.netlify/functions/change-student-password";else if(e.username)t="/.netlify/functions/change-teacher-password";else throw new Error("Invalid password data: missing studentId or username");try{const n=await(await window.tokenManager.makeAuthenticatedRequest(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n.success)return console.log("Password changed successfully"),n;throw new Error(n.error||"Failed to change password")}catch(r){throw console.error("Error changing password:",r),r}},async getCurrentTeacherId(){try{const{SecureToken:e}=await Za(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>n4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.teacher_id||r.sub||null}catch(e){return console.error("Error getting current teacher ID:",e),null}},async getCurrentAdminId(){try{const{SecureToken:e}=await Za(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>n4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.admin_id||r.sub||null}catch(e){return console.error("Error getting current admin ID:",e),null}}},aH=_.createContext(),iH=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState([]),[a,i]=_.useState([]),[o,c]=_.useState([]),[u,d]=_.useState([]),[f,h]=_.useState([]),[g,x]=_.useState([]),[y,v]=_.useState([]),[T,k]=_.useState(!1),[b,C]=_.useState(null),[E,j]=_.useState(!1),[P,A]=_.useState(!1),[M,F]=_.useState(!1),[B,V]=_.useState(null),[ee,ae]=_.useState(null),[Z,te]=_.useState(null),L=_.useCallback(async()=>{try{k(!0),C(null);const Ee=`student_subjects_${t?.student_id||t?.id||""}`;console.log(" UserContext: Checking cache for key:",Ee);const Ae=Ts(Ee);if(Ae){console.log(" UserContext: Cache HIT! Using cached student data"),s(Ae),K(Ae);return}console.log(" UserContext: Cache MISS! Fetching from API");const Fe=await $s.getStudentData();if(Fe)s(Fe),K(Fe),console.log(" UserContext: Caching student data with key:",Ee),hs(Ee,Fe,as.student_subjects);else throw new Error("No subjects data received")}catch(he){C(he.message||"Failed to load student data"),console.error("Error loading student data:",he)}finally{k(!1)}},[t?.student_id,t?.id]),K=he=>{console.log("Displaying student subjects:",he),s(he)},I=_.useCallback(async()=>{try{if(k(!0),C(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid teacher session found in loadTeacherData, redirecting to login"),C("No valid teacher session found");return}const Ee=`teacher_subjects_${t?.teacher_id||t?.id||""}`,Ae=Ts(Ee);if(Ae){s(Ae),Ae.length===0?ur():H(Ae);return}const Fe=await $s.getTeacherSubjects();if(Fe.success)s(Fe.subjects),hs(Ee,Fe.subjects,as.teacher_subjects),Fe.subjects.length===0?ur():H(Fe.subjects);else throw new Error(Fe.message||"Failed to load teacher data")}catch(he){C(he.message||"Failed to load teacher data"),console.error("Error loading teacher data:",he)}finally{k(!1)}},[t?.teacher_id,t?.id]),H=he=>{console.log("Showing main cabinet with subjects:",he),s(he)},U=he=>{console.log("Displaying grade buttons:",he),c(he)},R=async()=>{try{if(k(!0),C(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid admin session found in loadAdminData, redirecting to login"),C("No valid admin session found");return}await Promise.all([Ue(),At(),ne()])}catch(he){C(he.message||"Failed to load admin data"),console.error("Error loading admin data:",he)}finally{k(!1)}},z=he=>{console.log(" populateStudentInfoDirectly called with:",he);try{r(he),console.log(" Set student profile:",he)}catch(Ee){console.error("Error populating student info:",Ee)}},G=he=>{console.log("=== populateStudentInfo called ==="),r(he)},X=he=>{console.log("=== populateTeacherInfo called ==="),r(he)},ne=_.useCallback(async()=>{try{k(!0);const he="admin_users_",Ee=Ts(he);if(Ee){d(Ee),q(Ee);return}const Ae=await $s.getAllUsers();if(Ae.success)d(Ae.users),q(Ae.users),hs(he,Ae.users,as.admin_users);else throw new Error(Ae.message||"Failed to load users")}catch(he){C(he.message||"Failed to load users"),console.error("Error loading users:",he)}finally{k(!1)}},[]),q=he=>{console.log("Displaying all users:",he),d(he)},se=(he,Ee)=>{console.log("Displaying users table:",he,Ee),d(he)},ue=()=>{console.log("Toggling users content")},me=()=>{console.log("Showing add user form"),j(!0)},Ne=()=>{console.log("Hiding add user form"),j(!1)},ce=he=>{console.log("Editing user row:",he);const Ee=u.find(Ae=>Ae.id===he);V(Ee)},Ue=_.useCallback(async()=>{try{const he="admin_teachers_",Ee=Ts(he);if(Ee){h(Ee),pe(Ee);return}const Ae=await $s.getAllTeachers();if(Ae.success)h(Ae.teachers),pe(Ae.teachers),hs(he,Ae.teachers,as.admin_teachers);else throw new Error(Ae.message||"Failed to load teachers")}catch(he){C(he.message||"Failed to load teachers"),console.error("Error loading teachers:",he)}},[]),pe=he=>{console.log("Displaying all teachers:",he),h(he)},je=(he,Ee)=>{console.log("Displaying teachers table:",he,Ee),h(he)},We=()=>{console.log("Toggling teachers content")},Me=()=>{console.log("Showing add teacher form"),A(!0)},Nt=()=>{console.log("Hiding add teacher form"),A(!1)},$e=he=>{console.log("Editing teacher:",he);const Ee=f.find(Ae=>Ae.id===he);ae(Ee)},St=he=>{console.log("Editing teacher row:",he);const Ee=f.find(Ae=>Ae.id===he);ae(Ee)},At=_.useCallback(async()=>{try{const he="admin_subjects_",Ee=Ts(he);if(Ee){x(Ee),Bt(Ee);return}const Ae=await $s.getAllSubjects();if(Ae.success)x(Ae.subjects),Bt(Ae.subjects),hs(he,Ae.subjects,as.admin_subjects);else throw new Error(Ae.message||"Failed to load subjects")}catch(he){C(he.message||"Failed to load subjects"),console.error("Error loading subjects:",he)}},[]),Bt=he=>{console.log("Displaying all subjects:",he),x(he)},Gt=(he,Ee)=>{console.log("Displaying subjects table:",he,Ee),x(he)},or=()=>{console.log("Toggling subjects content")},yr=()=>{console.log("Showing add subject form"),F(!0)},it=()=>{console.log("Hiding add subject form"),F(!1)},Ve=he=>{console.log("Editing subject row:",he);const Ee=g.find(Ae=>Ae.id===he);te(Ee)},at=he=>{console.log("Displaying academic year:",he),v(he)},pt=()=>{console.log("Showing add academic year form")},nt=()=>{console.log("Hiding add academic year form")},kt=he=>{console.log("Handling add academic year:",he)},Wt=()=>{console.log("Toggling academic year content")},rr=()=>{console.log("Showing academic year editor")},ur=()=>{console.log("Showing subject selection")},Nr=()=>{console.log("Showing main cabinet")},wr=he=>{r(Ee=>({...Ee,...he}))},ft=()=>{r(null),s([]),i([]),c([]),d([]),h([]),x([]),v([]),C(null)},Tt=_.useCallback(he=>{ft(),he&&XT(he)},[]),Ot={userProfile:t,userSubjects:n,userClasses:a,userGrades:o,allUsers:u,allTeachers:f,allSubjects:g,academicYears:y,isLoading:T,error:b,showUserForm:E,showTeacherForm:P,showSubjectForm:M,editingUser:B,editingTeacher:ee,editingSubject:Z,loadStudentData:L,displayStudentSubjects:K,populateStudentInfoDirectly:z,populateStudentInfo:G,loadTeacherData:I,showMainCabinetWithSubjects:H,displayGradeButtons:U,populateTeacherInfo:X,showSubjectSelection:ur,showMainCabinet:Nr,loadAdminData:R,getAllUsers:ne,displayAllUsers:q,displayUsersTable:se,toggleUsersContent:ue,showAddUserForm:me,hideAddUserForm:Ne,editUserRow:ce,loadAllTeachers:Ue,displayAllTeachers:pe,displayTeachersTable:je,toggleTeachersContent:We,showAddTeacherForm:Me,hideAddTeacherForm:Nt,editTeacher:$e,editTeacherRow:St,loadAllSubjects:At,displayAllSubjects:Bt,displaySubjectsTable:Gt,toggleSubjectsContent:or,showAddSubjectForm:yr,hideAddSubjectForm:it,editSubjectRow:Ve,displayAcademicYear:at,showAddAcademicYearForm:pt,hideAddAcademicYearForm:nt,handleAddAcademicYear:kt,toggleAcademicYearContent:Wt,showAcademicYearEditor:rr,updateUserProfile:wr,clearUserData:ft,clearUserDataWithCache:Tt,setUserProfile:r,setUserSubjects:s,setUserClasses:i,setUserGrades:c,setAllUsers:d,setAllTeachers:h,setAllSubjects:x,setAcademicYears:v,setError:C};return l.jsx(aH.Provider,{value:Ot,children:e})},o3=()=>{const e=_.useContext(aH);if(!e)throw new Error("useUser must be used within a UserProvider");return e},Wd={STUDENT_LOGIN:"/.netlify/functions/student-login",TEACHER_LOGIN:"/.netlify/functions/teacher-login",ADMIN_LOGIN:"/.netlify/functions/admin-login",CHANGE_PASSWORD:"/.netlify/functions/change-password",GET_TEST_QUESTIONS:"/.netlify/functions/get-test-questions",SUBMIT_MULTIPLE_CHOICE_TEST:"/.netlify/functions/submit-multiple-choice-test",SUBMIT_TRUE_FALSE_TEST:"/.netlify/functions/submit-true-false-test",SUBMIT_INPUT_TEST:"/.netlify/functions/submit-input-test",SUBMIT_MATCHING_TEST:"/.netlify/functions/submit-matching-test",SUBMIT_DRAWING_TEST:"/.netlify/functions/submit-drawing-test",GET_STUDENT_SUBJECTS:"/.netlify/functions/get-student-subjects",GET_TEACHER_SUBJECTS:"/.netlify/functions/get-teacher-subjects",GET_ALL_USERS:"/.netlify/functions/get-all-users",GET_ALL_TEACHERS:"/.netlify/functions/get-all-teachers",GET_ALL_SUBJECTS:"/.netlify/functions/get-all-subjects",GET_ACADEMIC_YEAR:"/.netlify/functions/get-academic-year",SAVE_MULTIPLE_CHOICE_TEST:"/.netlify/functions/save-multiple-choice-test",SAVE_TRUE_FALSE_TEST:"/.netlify/functions/save-true-false-test",SAVE_INPUT_TEST:"/.netlify/functions/save-input-test",SAVE_MATCHING_TEST:"/.netlify/functions/save-matching-test",SAVE_DRAWING_TEST:"/.netlify/functions/save-drawing-test",UPDATE_DRAWING_TEST_SCORE:"/.netlify/functions/update-drawing-test-score",UPDATE_SPEAKING_TEST_SCORE:"/.netlify/functions/update-speaking-test-score",UPDATE_TEST_SCORE:"/.netlify/functions/update-test-score",ASSIGN_TEST_TO_CLASSES:"/.netlify/functions/assign-test-to-classes",GET_TEACHER_ACTIVE_TESTS:"/.netlify/functions/get-teacher-active-tests",GET_STUDENT_ACTIVE_TESTS:"/.netlify/functions/get-student-active-tests"},rs={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false",INPUT:"input",MATCHING:"matching_type",WORD_MATCHING:"word_matching",DRAWING:"drawing",FILL_BLANKS:"fill_blanks"},Ro={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"};Array.from({length:10},(e,t)=>t+1);const Xm={NOTIFICATION_DURATION:3e3},Rf=(e,t,r)=>{if(!e||!Array.isArray(e)||e.length===0)return{score:0,total:0,percentage:0};let n=0;return e.forEach((s,a)=>{const i=Array.isArray(t)?t[a]:t[String(s.question_id||s.id||a)];i!=null&&Vp(s,i,r)&&n++}),{score:n,total:e.length,percentage:Math.round(n/e.length*100)}},Ev=(e,t)=>{console.log(" Getting correct answer for question:",e,"testType:",t);let r="";switch(t){case rs.TRUE_FALSE:r=e.correct_answer?"true":"false",console.log(" TRUE_FALSE correct_answer from question:",r,typeof r);break;case rs.MULTIPLE_CHOICE:const n=e.correct_answer.charCodeAt(0)-65,s=`option_${String.fromCharCode(97+n)}`,a=e[s];a?r=a:r=`Option ${e.correct_answer}`;break;case rs.INPUT:e.correct_answers&&Array.isArray(e.correct_answers)?r=e.correct_answers.join(", "):r=e.correct_answer||"Unknown";break;case rs.MATCHING:r=e.correct_answer||e.answer;break;case rs.WORD_MATCHING:r=e.correct_answer||e.answer;break;case rs.DRAWING:r="Drawing required";break;case rs.FILL_BLANKS:e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?r=e.correct_answers[0]:r=e.correct_answer||"Unknown";break;default:r="Unknown"}return console.log(" Correct answer:",r),r},Vp=(e,t,r)=>{if(console.log("[DEBUG] checkAnswerCorrectness called for question:",e,"studentAnswer:",t,"testType:",r),!t||t==="")return console.log("[DEBUG] No student answer provided"),!1;let n=!1;switch(r){case rs.TRUE_FALSE:n=t.toLowerCase()==="true"===e.correct_answer;break;case rs.MULTIPLE_CHOICE:let a="";if(typeof t=="string"){const o=t.trim();if(/^[a-z]$/i.test(o))a=o.toUpperCase();else if(/^\d+$/.test(o)){const c=parseInt(o,10),u=c>=0?c:NaN;Number.isNaN(u)||(a=String.fromCharCode(65+u))}}else if(typeof t=="number"){const o=t;Number.isNaN(o)||(a=String.fromCharCode(65+o))}n=a!==""&&a===String(e.correct_answer||"").toUpperCase();break;case rs.INPUT:if(e.correct_answers&&Array.isArray(e.correct_answers)){const o=t.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();n=e.correct_answers.some(c=>{const u=c.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1})}else{const o=t.toLowerCase().trim(),c=e.correct_answer.toLowerCase().trim();o===c?n=!0:c&&o.includes(c)?c.length===1?n=o.startsWith(c)||o.endsWith(c):n=!0:n=!1}break;case rs.MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case rs.WORD_MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case rs.DRAWING:console.warn("Drawing tests should not be auto-scored!"),n=!1;break;case rs.FILL_BLANKS:const i=e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?e.correct_answers[0]:e.correct_answer;if(i&&t){let o="";if(typeof t=="string"){const c=t.trim();if(/^[a-z]$/i.test(c))o=c.toUpperCase();else if(/^\d+$/.test(c)){const u=parseInt(c,10),d=u>=0?u:NaN;Number.isNaN(d)||(o=String.fromCharCode(65+d))}}else if(typeof t=="number"){const c=t;Number.isNaN(c)||(o=String.fromCharCode(65+c))}n=o!==""&&o===String(i||"").toUpperCase()}break;default:console.warn(`[WARN] Unknown test type for answer checking: ${r}`),n=!1}return console.log(`[DEBUG] Answer correctness: ${n}`),n};class Jde{constructor(){this.academicCalendar=null,this.loaded=!1}async loadAcademicCalendar(){if(this.loaded)return this.academicCalendar;try{const t=async n=>{const s=await fetch(n,{headers:{Accept:"application/json"},credentials:"include"}),a=s.headers&&s.headers.get&&s.headers.get("content-type")||"";if(!s.ok)throw new Error(`HTTP ${s.status}`);if(!a.includes("application/json"))throw new Error("Non-JSON response");return await s.json()};let r=null;if(r=await t("/academic_year.json"),!Array.isArray(r))throw new Error("Invalid academic calendar format");return this.academicCalendar=r,this.loaded=!0,console.log(" Academic calendar loaded:",this.academicCalendar.length,"terms"),this.academicCalendar}catch(t){return console.error(" Error loading academic calendar:",t),null}}getCurrentTerm(){if(!this.academicCalendar)return null;const t=new Date;return this.academicCalendar.find(n=>{const s=new Date(n.start_date),a=new Date(n.end_date);return t>=s&&t<=a})}getCurrentSemester(){const t=this.getCurrentTerm();if(!t)return null;const r=t.semester,n=this.academicCalendar.filter(s=>s.semester===r&&s.academic_year===t.academic_year);return{semester:r,currentTerm:t,allTerms:n}}getCurrentAcademicPeriodId(){return this.getCurrentTerm()?.id||null}getSemesterTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.semester===t):[]}getAcademicYearTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.academic_year===t):[]}getCurrentSemesterWithTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,allTerms:s,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getCurrentSemesterTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getTermById(t){return this.academicCalendar?this.academicCalendar.find(r=>r.id===t):null}isCurrentTerm(t){return this.getCurrentTerm()?.id===t}getAcademicYears(){return this.academicCalendar?[...new Set(this.academicCalendar.map(r=>r.academic_year))].sort():[]}getAcademicYearSemesterTerms(t,r){return this.academicCalendar?this.academicCalendar.filter(n=>n.academic_year===t&&n.semester===r):[]}}const cu=new Jde,l3=Object.freeze(Object.defineProperty({__proto__:null,academicCalendarService:cu},Symbol.toStringTag,{value:"Module"})),Sn={async getTestInfo(e,t){console.log(`[DEBUG] getTestInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test info data received:",s),s.success)return console.log("[DEBUG] Test info retrieved successfully"),s.test_info;throw new Error(s.error||"Failed to get test info")}catch(r){throw console.error("[ERROR] Failed to get test info:",r),r}},async getTestQuestions(e,t){console.log(`[DEBUG] getTestQuestions called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions data received:",s),s.success)return console.log("[DEBUG] Test questions retrieved successfully"),s.questions;throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions:",r),r}},async getTestQuestionsWithInfo(e,t){console.log(`[DEBUG] getTestQuestionsWithInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions with info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions with info data received:",s),s.success)return console.log("[DEBUG] Test questions with info retrieved successfully"),{questions:s.questions,testInfo:s.test_info};throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions with info:",r),r}},async getActiveTests(){console.log("getActiveTests called - extracting studentId from JWT token");try{const e="/.netlify/functions/get-student-active-tests";console.log("[DEBUG] Fetching active tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Active tests data received:",r),r.success)return console.log("[DEBUG] Active tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get active tests")}catch(e){throw console.error("[ERROR] Failed to get active tests:",e),e}},async getTeacherTests(e=!1){console.log("getTeacherTests called - extracting teacherId from JWT token");try{const t="/.netlify/functions/get-teacher-active-tests",r=e?`${t}?ts=${Date.now()}`:t;console.log("[DEBUG] Fetching teacher tests from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Teacher tests data received:",s),s.success)return console.log("[DEBUG] Teacher tests retrieved successfully"),s.tests;throw new Error(s.error||"Failed to get teacher tests")}catch(t){throw console.error("[ERROR] Failed to get teacher tests:",t),t}},async submitTest(e,t,r,n={},s=null){console.log("Submitting test:",{testType:e,testId:t});try{if(Object.keys(r).length===0)throw new Error("Please answer at least one question before submitting.");let a;try{const C=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`)).json();if(C.success)a=C.test_info;else throw new Error("Failed to get test information")}catch(b){console.error("Error getting test info:",b);const C=await this.getTestQuestions(e,t);a={test_name:`Test ${t}`,num_questions:C.length}}const i=await this.getTestQuestions(e,t);let o,c;if(e==="drawing")o=null,c=null;else{const b=n?.answers_by_id?n.answers_by_id:r;o=Rf(i,b,e).score,c=a.num_questions}const u=this.transformAnswersForSubmission(r,e),d=a.teacher_id||null,f=a.subject_id||null,h=s?.student_id||s?.id||(window.tokenManager?.getCurrentUser?window.tokenManager.getCurrentUser()?.student_id||window.tokenManager.getCurrentUser()?.id:null);await cu.loadAcademicCalendar();const x=cu.getCurrentTerm()?.id;if(!x)throw new Error("No current academic period found");const y={test_id:t,test_name:a.test_name,test_type:e,teacher_id:d,subject_id:f,student_id:h,academic_period_id:x,answers:u,score:o,maxScore:c,time_taken:n.time_taken||null,started_at:n.started_at||null,submitted_at:n.submitted_at||new Date().toISOString(),caught_cheating:n.caught_cheating||!1,visibility_change_times:n.visibility_change_times||0,answers_by_id:n.answers_by_id||null,question_order:n.question_order||null,retest_assignment_id:n.retest_assignment_id||null,parent_test_id:n.parent_test_id||t};console.log(" testService retest_assignment_id:",n.retest_assignment_id),console.log(" testService timingData:",n),console.log(" testService commonData.retest_assignment_id:",y.retest_assignment_id);let v;switch(e){case"multiple_choice":v="/.netlify/functions/submit-multiple-choice-test";break;case"true_false":v="/.netlify/functions/submit-true-false-test";break;case"input":v="/.netlify/functions/submit-input-test";break;case"matching_type":v="/.netlify/functions/submit-matching-type-test";break;case"word_matching":v="/.netlify/functions/submit-word-matching-test";break;case"drawing":v="/.netlify/functions/submit-drawing-test";break;case"fill_blanks":v="/.netlify/functions/submit-fill-blanks-test";break;default:throw new Error(`Unsupported test type: ${e}`)}console.log("Submitting to:",v),console.log("Submission data:",y),console.log("Submission data JSON:",JSON.stringify(y,null,2)),console.log(" Final submission retest_assignment_id:",y.retest_assignment_id);const T=await window.tokenManager.makeAuthenticatedRequest(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const k=await T.json();if(console.log("Test submission result:",k),k.success)return this.clearTestProgress(e,t),{success:!0,score:o,maxScore:c,result:k};throw new Error(k.error||"Failed to submit test")}catch(a){throw console.error("Error submitting test:",a),a}},async createTest(e){try{return(await oa.post("/tests/create",e)).data}catch(t){throw new Error(t.message||"Failed to create test")}},async updateTest(e,t,r){try{return(await oa.put(`/tests/${e}/${t}`,r)).data}catch(n){throw new Error(n.message||"Failed to update test")}},async deleteTest(e,t){try{return(await oa.delete(`/tests/${e}/${t}`)).data}catch(r){throw new Error(r.message||"Failed to delete test")}},async duplicateTest(e,t){try{return(await oa.post(`/tests/${e}/${t}/duplicate`)).data}catch(r){throw new Error(r.message||"Failed to duplicate test")}},async publishTest(e,t){try{return(await oa.post(`/tests/${e}/${t}/publish`)).data}catch(r){throw new Error(r.message||"Failed to publish test")}},async unpublishTest(e,t){try{return(await oa.post(`/tests/${e}/${t}/unpublish`)).data}catch(r){throw new Error(r.message||"Failed to unpublish test")}},async removeClassAssignment(e,t,r){try{return(await oa.delete(`/tests/${e}/${t}/assignments/${r}`)).data}catch(n){throw new Error(n.message||"Failed to remove class assignment")}},async getTestStatistics(e,t){try{return(await oa.get(`/tests/${e}/${t}/statistics`)).data}catch(r){throw new Error(r.message||"Failed to get test statistics")}},async exportTest(e,t,r="json"){try{return(await oa.get(`/tests/${e}/${t}/export?format=${r}`)).data}catch(n){throw new Error(n.message||"Failed to export test")}},async importTest(e,t){try{return(await oa.uploadFile(`/tests/import?type=${t}`,e)).data}catch(r){throw new Error(r.message||"Failed to import test")}},async getTestResults(e,t){try{return(await oa.get(`/tests/${e}/${t}/results`)).data}catch(r){throw new Error(r.message||"Failed to get test results")}},async getStudentTestResults(){try{console.log("[DEBUG] Fetching student test results from: /.netlify/functions/get-student-test-results");const e=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-test-results");if(console.log("[DEBUG] Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("[DEBUG] Student test results data received:",t),t.success)return console.log("[DEBUG] Student test results retrieved successfully"),t;throw new Error(t.error||"Failed to get student test results")}catch(e){throw console.error("[ERROR] Failed to get student test results:",e),new Error(e.message||"Failed to get student test results")}},async getClassResults(e,t,r){try{return(await oa.get(`/tests/class-results/${e}/${t}/${r}`)).data}catch(n){throw new Error(n.message||"Failed to get class results")}},async saveTestProgress(e,t,r){try{return(await oa.post(`/tests/${e}/${t}/progress`,{progress:r})).data}catch(n){throw new Error(n.message||"Failed to save test progress")}},async getTestProgress(e,t){try{return(await oa.get(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to get test progress")}},async clearTestProgress(e,t){try{return(await oa.delete(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to clear test progress")}},async validateTestData(e){try{return(await oa.post("/tests/validate",e)).data}catch(t){throw new Error(t.message||"Failed to validate test data")}},async getTestPreview(e,t){try{return(await oa.get(`/tests/${e}/${t}/preview`)).data}catch(r){throw new Error(r.message||"Failed to get test preview")}},isAnswerCorrect(e,t,r,n){switch(n){case"multiple_choice":return String.fromCharCode(65+parseInt(t))===r.correct_answer;case"true_false":return t.toLowerCase()==="true"===r.correct_answer;case"input":const i=r.correct_answers||[],o=t.toLowerCase().trim();return i.some(c=>{const u=c.toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1});case"matching_type":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"word_matching":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"drawing":return t&&t!=="No answer";default:return!1}},transformAnswersForSubmission(e,t){switch(t){case"multiple_choice":return e;case"true_false":return e;case"input":return e;case"matching_type":return e;case"word_matching":return e;case"drawing":if(Array.isArray(e)&&e.length>0)try{const r=e[0];return typeof r=="string"&&r.startsWith("[")?JSON.parse(r):e}catch(r){return console.warn("Failed to parse drawing answers:",r),e}return e;default:return e}},async markAssignmentCompleted(e){try{console.log(`[DEBUG] markAssignmentCompleted called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/mark-test-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Mark assignment completed response:",r),r.success)return console.log(`Assignment ${e} marked as completed successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to mark assignment as completed")}catch(t){throw console.error("Error marking assignment completed:",t),t}},async activateAssignment(e){try{console.log(`[DEBUG] activateAssignment called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/activate-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Activate assignment response:",r),r.success)return console.log(`Assignment ${e} activated successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to activate assignment")}catch(t){throw console.error("Error activating assignment:",t),t}},clearTestProgress(e,t){try{const r=`test_progress_${e}_${t}`;localStorage.removeItem(r),console.log(`Test progress cleared for ${e}_${t}`)}catch(r){console.error("Error clearing test progress:",r)}},async saveMultipleChoiceTest(e){console.log("[DEBUG] saveMultipleChoiceTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-multiple-choice-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save multiple choice test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving multiple choice test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveTrueFalseTest(e){console.log("[DEBUG] saveTrueFalseTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-true-false-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save true/false test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving true/false test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveInputTest(e){console.log("[DEBUG] saveInputTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-input-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save input test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving input test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveMatchingTest(e){console.log("[DEBUG] saveMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"matching_type",num_questions:e.num_blocks})})).json();return console.log("[DEBUG] Save matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveWordMatchingTest(e){console.log("[DEBUG] saveWordMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"word_matching"})})).json();return console.log("[DEBUG] Save word matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving word matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveDrawingTest(e){console.log("[DEBUG] saveDrawingTest called with:",e);try{const t={...e,test_type:"drawing"},n=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return console.log("[DEBUG] Save drawing test response:",n),n.success?{success:!0,data:{test_id:n.test_id}}:{success:!1,message:n.message||"Failed to save test"}}catch(t){return console.error("Error saving drawing test:",t),{success:!1,message:"Error saving test: "+t.message}}},async getDrawingTest(e){console.log("[DEBUG] getDrawingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-drawing-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get drawing test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting drawing test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitDrawingTest(e,t,r,n){console.log("[DEBUG] submitDrawingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-drawing-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit drawing test response:",a),a.success?{success:!0,data:a.data}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting drawing test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async updateDrawingTestScore(e,t,r){console.log("[DEBUG] updateDrawingTestScore called with:",{resultId:e,score:t,maxScore:r});try{const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-drawing-test-score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:e,score:t,max_score:r})})).json();return console.log("[DEBUG] Update drawing test score response:",s),s.success?{success:!0,data:s.data}:{success:!1,message:s.message||"Failed to update score"}}catch(n){return console.error("Error updating drawing test score:",n),{success:!1,message:"Error updating score: "+n.message}}},async getWordMatchingTest(e){console.log("[DEBUG] getWordMatchingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-word-matching-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get word matching test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting word matching test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitWordMatchingTest(e,t,r,n){console.log("[DEBUG] submitWordMatchingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit word matching test response:",a),a.success?{success:!0,result:a.result}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting word matching test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async assignTestToClasses(e){console.log("[DEBUG] assignTestToClasses called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save test with assignments response:",r),r.success?{success:!0,message:"Test assigned successfully"}:{success:!1,message:r.message||"Failed to assign test"}}catch(t){return console.error("Error assigning test to classes:",t),{success:!1,message:"Error assigning test: "+t.message}}},async removeClassAssignment(e){console.log("[DEBUG] removeClassAssignment called with assignmentId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/remove-class-assignment?assignment_id=${e}`,{method:"DELETE"})).json();return console.log("[DEBUG] Remove class assignment response:",r),r.success?{success:!0,message:"Assignment removed successfully"}:{success:!1,message:r.message||"Failed to remove assignment"}}catch(t){return console.error("Error removing class assignment:",t),{success:!1,message:"Error removing assignment: "+t.message}}},async updateTestQuestions(e,t,r){try{console.log(`[DEBUG] updateTestQuestions called with testType: ${e}, testId: ${t}`);const n=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-test-questions",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t,questions:r})});if(!n.ok){let a=`HTTP error! status: ${n.status}`;try{const i=await n.json();a=i.details||i.error||a,console.error("[DEBUG] Update questions error response:",i)}catch{}throw new Error(a)}const s=await n.json();if(console.log("[DEBUG] Update questions response:",s),s.success)return console.log(`Questions for ${e}_${t} updated successfully`),{success:!0,message:s.message};{const a=s.error||s.details||"Failed to update questions";throw console.error("[DEBUG] Update questions error:",a,s),new Error(a)}}catch(n){throw console.error("Error updating questions:",n),n}},async updateTestSettings(e,t,r){try{console.log(`[DEBUG] updateTestSettings called with testType: ${e}, testId: ${t}`);const n=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-test-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t,...r})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Update settings response:",s),s.success)return console.log(`Settings for ${e}_${t} updated successfully`),{success:!0,message:s.message};throw new Error(s.error||"Failed to update settings")}catch(n){throw console.error("Error updating settings:",n),n}}},oH=_.createContext(),lH=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState([]),[a,i]=_.useState({}),[o,c]=_.useState({}),[u,d]=_.useState(!1),[f,h]=_.useState(null),[g,x]=_.useState([]),[y,v]=_.useState(!1),[T,k]=_.useState(null),[b,C]=_.useState({isOpen:!1,testType:null,testId:null,testName:null,questions:[]}),[E,j]=_.useState(null),[P,A]=_.useState(0),{getItem:M,setItem:F,removeItem:B}=lW();_.useEffect(()=>{let he;return u&&E&&(he=setInterval(()=>{const Ee=Math.floor((Date.now()-E)/1e3);A(Ee)},1e3)),()=>{he&&clearInterval(he)}},[u,E]);const V=async(he,Ee)=>{try{v(!0),k(null),console.log(`[DEBUG] loadTestForPage called with testType: ${he}, testId: ${Ee}`);const Ae=await Sn.getTestInfo(he,Ee);console.log("[DEBUG] Test info retrieved:",Ae);const Fe=await Sn.getTestQuestions(he,Ee);console.log("[DEBUG] Test questions retrieved:",Fe),r({...Ae,testType:he,testId:Ee}),s(Fe),d(!0),j(Date.now()),A(0),ee(he,Ee),console.log("[DEBUG] Test loaded successfully")}catch(Ae){k(Ae.message||"Failed to load test"),console.error("Error loading test:",Ae)}finally{v(!1)}},ee=(he,Ee)=>{try{const Ae=`test_progress_${he}_${Ee}`,Fe=M(Ae);Fe&&(i(Fe.answers||{}),c(Fe.progress||{}))}catch(Ae){console.error("Error loading saved progress:",Ae)}},ae=(he,Ee,Ae,Fe)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}const $t=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${he}_${Ee}`,lr={...a,[Ae]:Fe},Ke={...o,[Ae]:{answered:!0,timestamp:Date.now()}};i(lr),c(Ke),F($t,{answers:lr,progress:Ke,lastSaved:Date.now()}),console.log(`Saved progress for question ${Ae}:`,Fe)}catch(xt){console.error("Error saving test progress:",xt)}},Z=(he,Ee,Ae)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated())return console.warn("[WARN] Cannot get progress: No valid JWT token"),null;const xt=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${he}_${Ee}`;return M(xt)?.answers?.[Ae]||null}catch(Fe){return console.error("Error getting test progress:",Fe),null}},te=(he,Ee)=>{try{if(console.log(`[DEBUG] clearTestProgress called with testType: ${he}, testId: ${Ee}`),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const Ae=window.tokenManager?.getDecodedToken()?.sub||"unknown",Fe=`test_progress_${Ae}_${he}_${Ee}`;console.log(`[DEBUG] Removing localStorage key: ${Fe}`);const xt=M(Fe)!==null;B(Fe),i({}),c({});for(let $t=0;$t<localStorage.length;$t++){const lr=localStorage.key($t);lr&&lr.startsWith(`test_progress_${Ae}_${he}_${Ee}_`)&&(localStorage.removeItem(lr),console.log(`[DEBUG] Cleared individual question key: ${lr}`))}console.log(xt?`[DEBUG] Progress cleared for test ${he}_${Ee}`:`[DEBUG] No progress found to clear for test ${he}_${Ee}`)}catch(Ae){console.error("Error clearing test progress:",Ae)}},L=async(he,Ee,Ae="")=>{try{v(!0),k(null),console.log("Submitting test:",{testType:he,testId:Ee});const Fe=ne(he,Ee);if(Object.keys(Fe).length===0){k("Please answer at least one question before submitting.");return}let xt;try{xt=await Sn.getTestInfo(he,Ee)}catch(cr){console.error("Error getting test info:",cr);const Rr=await Sn.getTestQuestions(he,Ee);xt={test_name:`Test ${Ee}`,num_questions:Rr.length}}const $t=await Sn.getTestQuestions(he,Ee),lr=Rf($t,Fe,he),Ke=xt.num_questions,ct=se(Fe,he),yt={test_id:Ee,test_name:xt.test_name,score:lr,maxScore:Ke,answers:ct},Jt=await Sn.submitTest(he,Ee,yt);if(Jt.success){if(h(Jt.result),U(he,Ee,Ae),te(he,Ee),Ae){const cr=`student_results_table_${Ae}`;he!=="drawing"?(console.log(" TestContext: Caching test results after submission with key:",cr),hs(cr,Jt.result,as.student_results_table)):console.log(" TestContext: Skipping cache for drawing test submission (teacher-scored).")}return Ae&&i1(Ae,he,Ee),d(!1),Jt.results}else throw new Error(Jt.message||"Test submission failed")}catch(Fe){throw k(Fe.message||"Failed to submit test"),Fe}finally{v(!1)}},K=(he,Ee,Ae)=>{h({testType:he,testId:Ee,answers:Ae}),d(!1)},I=()=>{r(null),s([]),i({}),c({}),d(!1),h(null),k(null),j(null),A(0)},H=(he,Ee,Ae="")=>{try{const Fe=`test_completed_${Ae}_${he}_${Ee}`;return M(Fe)===!0}catch(Fe){return console.error("Error checking test completion:",Fe),!1}},U=(he,Ee,Ae="")=>{try{const Fe=`test_completed_${Ae}_${he}_${Ee}`;F(Fe,!0)}catch(Fe){console.error("Error marking test completed:",Fe)}},R=he=>Object.keys(a).length,z=()=>{const he=R(t?.testType),Ee=n.length;return{canSubmit:he===Ee,answeredCount:he,totalQuestions:Ee}},G=()=>{t&&te(t.testType,t.testId),I()},X=(he="")=>{try{const Ee=`student_results_table_${he}`;console.log(" TestContext: Clearing test results cache:",Ee),localStorage.removeItem(Ee),console.log(" TestContext: Test results cache cleared")}catch(Ee){console.error("Error clearing test results cache:",Ee)}},ne=(he,Ee)=>({...a}),q=(he,Ee,Ae=null)=>{try{if(!he)return"No answer";switch(Ee){case"true_false":return he?"True":"False";case"multiple_choice":if(Ae&&typeof he=="string"&&!isNaN(parseInt(he))){const Fe=parseInt(he),xt=`option_${String.fromCharCode(97+Fe)}`,$t=Ae[xt];if($t)return $t}return String(he).toUpperCase();case"input":return String(he);case"matching_type":return typeof he=="object"?Object.entries(he).map(([Fe,xt])=>`${Fe}  ${xt}`).join(", "):String(he);case"word_matching":return typeof he=="object"?Object.entries(he).map(([Fe,xt])=>`${Fe}  ${xt}`).join(", "):String(he);case"drawing":return"Drawing submitted";default:return String(he)}}catch(Fe){return console.error("Error formatting student answer:",Fe),"Error displaying answer"}},se=(he,Ee)=>{try{if(!he||typeof he!="object")return{};const Ae={};return Object.entries(he).forEach(([Fe,xt])=>{if(xt!=null)switch(Ee){case"true_false":Ae[Fe]=!!xt;break;case"multiple_choice":Ae[Fe]=String(xt).toUpperCase();break;case"input":Ae[Fe]=String(xt).trim();break;case"matching_type":typeof xt=="object"?Ae[Fe]=xt:Ae[Fe]=String(xt);break;case"word_matching":typeof xt=="object"?Ae[Fe]=xt:Ae[Fe]=String(xt);break;case"drawing":Ae[Fe]=xt;break;default:Ae[Fe]=xt}}),Ae}catch(Ae){return console.error("Error transforming answers for submission:",Ae),he||{}}},ue=_.useCallback(async(he="")=>{const Ee=`student_active_tests_${he}`,Ae=YT(Ee,{includeExpired:!0}),Fe=Ae?.data,xt=Array.isArray(Fe)?!0:!!Fe,$t=as.student_active_tests?as.student_active_tests*.5:0,lr=!xt||Ae?.isExpired||$t>0&&Ae?.age>$t,Ke=!xt||Ae?.isExpired===!0;if(xt&&x(Fe),!lr)return v(!1),Fe;if(!Ke&&xt)return v(!1),(async()=>{try{const ct=await Sn.getActiveTests();if(x(ct),hs(Ee,ct,as.student_active_tests),he)try{localStorage.setItem(`last_cabinet_refresh_${he}`,Date.now().toString())}catch(yt){console.warn("Unable to persist last cabinet refresh timestamp:",yt)}}catch(ct){console.warn("Background refresh of active tests failed:",ct)}})(),Fe;v(!0);try{const ct=await Sn.getActiveTests();if(x(ct),hs(Ee,ct,as.student_active_tests),he)try{localStorage.setItem(`last_cabinet_refresh_${he}`,Date.now().toString())}catch(yt){console.warn("Unable to persist last cabinet refresh timestamp:",yt)}return ct}catch(ct){return k(ct.message||"Failed to load active tests"),x([]),[]}finally{v(!1)}},[]),me=async()=>{try{return v(!0),await Sn.getTeacherTests()}catch(he){return k(he.message||"Failed to load teacher tests"),[]}finally{v(!1)}},Ne=async he=>{try{return v(!0),await Sn.createTest(he)}catch(Ee){throw k(Ee.message||"Failed to create test"),Ee}finally{v(!1)}},ce=async(he,Ee)=>{try{return v(!0),await Sn.deleteTest(he,Ee)}catch(Ae){throw k(Ae.message||"Failed to delete test"),Ae}finally{v(!1)}},Ue=async(he,Ee)=>{try{return await Sn.getTestInfo(he,Ee)}catch(Ae){throw console.error("Error getting test info:",Ae),Ae}},pe=async(he,Ee)=>{try{return await Sn.getTestQuestions(he,Ee)}catch(Ae){throw console.error("Error getting test questions:",Ae),Ae}},je=async(he,Ee,Ae)=>{try{console.log("Showing test results:",{testType:he,testId:Ee,studentAnswers:Ae});const Fe=await Ue(he,Ee),xt=await pe(he,Ee);Nt(Fe,xt,he,Ae),d(!1),console.log("Test results displayed successfully")}catch(Fe){console.error("Error showing test results:",Fe),k("Failed to display test results"),h({testType:he,testId:Ee,answers:Ae,showResults:!0,error:"Could not load detailed results"}),d(!1)}},We=async(he,Ee,Ae)=>{try{v(!0);const Fe=await Ue(he,Ee),xt=await pe(he,Ee);Nt(Fe,xt,he,Ae)}catch(Fe){k(Fe.message||"Failed to load test results")}finally{v(!1)}},Me=_.useCallback(async(he="")=>{try{v(!0);const Ee=`student_results_table_${he}`;console.log(" TestContext: Checking cache for key:",Ee);const Ae=Ts(Ee);if(Ae)return console.log(" TestContext: Cache HIT! Using cached test results"),h(Ae),Ae;console.log(" TestContext: Cache MISS! Fetching from API");const Fe=await Sn.getStudentTestResults();return console.log(" TestContext: Test results loaded:",Fe),console.log(" TestContext: Results data:",Fe?.results||Fe),console.log(" TestContext: Results length:",Fe?.results?.length||0),h(Fe),console.log(" TestContext: Caching test results with key:",Ee),console.log(" TestContext: Results being cached:",Fe),console.log(" TestContext: Results.results being cached:",Fe.results),hs(Ee,Fe,as.student_results_table),Fe}catch(Ee){throw console.error("Error loading test results:",Ee),k(Ee.message||"Failed to load test results"),Ee}finally{v(!1)}},[]),Nt=(he,Ee,Ae,Fe)=>{try{console.log("Displaying test results:",{testInfo:he,questions:Ee,testType:Ae,studentAnswers:Fe});const xt=Rf(Ee,Fe,Ae),$t=he?.num_questions||Ee?.length||0,lr=$t>0?Math.round(xt/$t*100):0,Ke=lr>=60,ct=Ee.map((yt,Jt)=>{const cr=yt.question_id||yt.id,Rr=Fe[cr],Hr=Vp(yt,Rr,Ae);return{questionNumber:Jt+1,question:yt.question||yt.question_text,userAnswer:q(Rr,Ae),correctAnswer:Ev(yt,Ae),isCorrect:Hr,questionType:Ae}});h({testInfo:he,questions:Ee,testType:Ae,studentAnswers:Fe,showResults:!0,score:xt,totalQuestions:$t,percentage:lr,passed:Ke,questionAnalysis:ct,timestamp:new Date().toISOString()}),c(yt=>({...yt,score:xt,totalQuestions:$t,percentage:lr,passed:Ke,lastUpdated:Date.now()})),$e(),console.log(`Test results displayed: ${xt}/${$t} (${lr}%) - ${Ke?"PASSED":"FAILED"}`)}catch(xt){console.error("Error displaying test results:",xt),k("Failed to display test results")}},$e=_.useCallback(()=>{try{console.log("Setting up test results page event listeners");const he=$t=>{if($t.key==="Escape"&&G(),$t.ctrlKey&&$t.key==="p"&&($t.preventDefault(),window.print()),$t.key==="Enter"&&f&&!f.passed){const lr=document.getElementById("retake-test-button");lr&&lr.click()}},Ee=()=>{window.print()},Ae=()=>{if(f){const $t=`Test: ${f.testInfo?.test_name||"Test"}
Score: ${f.score}/${f.totalQuestions} (${f.percentage}%)
Status: ${f.passed?"PASSED":"FAILED"}
Completed: ${new Date(f.timestamp).toLocaleString()}`;navigator.clipboard.writeText($t).then(()=>{console.log("Results copied to clipboard")}).catch(lr=>{console.error("Failed to copy results:",lr)})}};document.addEventListener("keydown",he);const Fe=document.getElementById("print-results");Fe&&Fe.addEventListener("click",Ee);const xt=document.getElementById("copy-results");return xt&&xt.addEventListener("click",Ae),()=>{document.removeEventListener("keydown",he),Fe&&Fe.removeEventListener("click",Ee),xt&&xt.removeEventListener("click",Ae)}}catch(he){console.error("Error setting up test results page event listeners:",he)}},[G,f]),St=async(he,Ee,Ae)=>{try{v(!0),k(null),console.log("Viewing test details:",{testType:he,testId:Ee,testName:Ae}),C({isOpen:!0,testType:he,testId:Ee,testName:Ae,questions:[],isLoading:!0});const Fe=await Sn.getTestQuestions(he,Ee);Fe&&Fe.length>0?(C({isOpen:!0,testType:he,testId:Ee,testName:Ae,questions:Fe,isLoading:!1}),console.log(`Test details loaded: ${Fe.length} questions`)):(k("Could not load test questions. Please try again."),C({isOpen:!0,testType:he,testId:Ee,testName:Ae,questions:[],isLoading:!1,error:"No questions available for this test"}))}catch(Fe){console.error("Error loading test details:",Fe),k("Error loading test details. Please try again."),C({isOpen:!0,testType:he,testId:Ee,testName:Ae,questions:[],isLoading:!1,error:Fe.message||"Failed to load test details"})}finally{v(!1)}},At=(he,Ee,Ae,Fe)=>{try{console.log("Showing test details modal:",{testType:he,testId:Ee,testName:Ae,questions:Fe}),C({isOpen:!0,testType:he,testId:Ee,testName:Ae,questions:Fe||[],isLoading:!1,error:null})}catch(xt){console.error("Error showing test details modal:",xt),k("Failed to show test details modal")}},Bt=()=>{try{console.log("Closing test details modal"),C({isOpen:!1,testType:null,testId:null,testName:null,questions:[],isLoading:!1,error:null})}catch(he){console.error("Error closing test details modal:",he)}},Gt=(he,Ee)=>{try{switch(Ee){case"multiple_choice":return l.jsxs("div",{className:"answer-options",children:[l.jsx("p",{children:l.jsx("strong",{children:"Options:"})}),l.jsxs("p",{children:["A) ",he.option_a||"No text"]}),l.jsxs("p",{children:["B) ",he.option_b||"No text"]}),he.option_c&&l.jsxs("p",{children:["C) ",he.option_c]}),he.option_d&&l.jsxs("p",{children:["D) ",he.option_d]}),he.option_e&&l.jsxs("p",{children:["E) ",he.option_e]}),he.option_f&&l.jsxs("p",{children:["F) ",he.option_f]}),l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",he.correct_answer||"Not specified"]})})]});case"true_false":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",he.correct_answer?"True":"False"]})})});case"input":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",he.correct_answer||"Not specified"]})})});case"matching_type":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",he.correct_answer?JSON.stringify(he.correct_answer):"Not specified"]})})});case"word_matching":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",he.correct_answer?JSON.stringify(he.correct_answer):"Not specified"]})})});default:return l.jsx("p",{children:"Unknown question type"})}}catch(Ae){return console.error("Error formatting question answer display:",Ae),l.jsx("p",{children:"Error displaying question"})}},or=(he,Ee)=>{try{console.log("Navigating to test:",{testType:he,testId:Ee}),r({testType:he,testId:Ee}),d(!0),V(he,Ee)}catch(Ae){console.error("Error navigating to test:",Ae),k("Failed to navigate to test")}},yr=()=>{try{console.log("Hiding test sections"),r(null),s([]),i({}),c({}),d(!1),h(null),k(null)}catch(he){console.error("Error hiding test sections:",he)}},it=(he,Ee,Ae,Fe)=>{try{console.log("Displaying test on page:",{testInfo:he,questions:Ee,testType:Ae,testId:Fe}),r({...he,testType:Ae,testId:Fe}),s(Ee),d(!0),ee(Ae,Fe),rr(Ae,Fe),kt(Ae,Fe)}catch(xt){console.error("Error displaying test on page:",xt),k("Failed to display test on page")}},Ve=(he,Ee,Ae)=>{try{return console.log("Rendering questions for page:",{questions:he,testType:Ee,testId:Ae}),!he||!Array.isArray(he)?(console.warn("Invalid questions array for rendering"),[]):he.map((Fe,xt)=>{const $t=lr=>{const Ke={...a,[Fe.question_id]:lr};i(Ke),ae(Ee,Ae,Fe.question_id,lr)};return{question:Fe,index:xt,testType:Ee,testId:Ae,studentAnswer:a[Fe.question_id]||"",onAnswerChange:$t}})}catch(Fe){return console.error("Error rendering questions for page:",Fe),[]}},at=_.useCallback((he,Ee)=>{try{if(!he||!Ee){console.warn("Cannot save progress: missing testType or testId");return}const Ae=`test_progress_${he}_${Ee}`,Fe={answers:a,progress:o,lastSaved:Date.now(),testType:he,testId:Ee};F(Ae,Fe),console.log(`Progress saved for test ${he}_${Ee}:`,Fe)}catch(Ae){console.error("Error saving progress for page:",Ae)}},[a,o,F]),pt=_.useCallback(he=>{try{return!a||Object.keys(a).length===0?0:Object.values(a).filter(Ae=>Ae==null?!1:typeof Ae=="string"?Ae.trim()!=="":typeof Ae=="object"?Object.keys(Ae).length>0:!0).length}catch(Ee){return console.error("Error getting answered questions count for page:",Ee),0}},[a]),nt=_.useCallback((he,Ee)=>{try{console.log("Updating progress display for page:",{testType:he,testId:Ee});const Ae=pt(he),Fe=n.length,xt=Fe>0?Math.round(Ae/Fe*100):0,$t=Ae===Fe&&Fe>0;c(yt=>({...yt,answeredCount:Ae,totalQuestions:Fe,percentage:xt,canSubmit:$t,remainingQuestions:Fe-Ae,lastUpdated:Date.now()}));const lr=document.getElementById("progress-bar"),Ke=document.getElementById("progress-text"),ct=document.getElementById("submit-test-button");return lr&&(lr.style.width=`${xt}%`,lr.className=lr.className.replace(/bg-\w+-\d+/,""),xt>=100?lr.classList.add("bg-green-500"):xt>=80?lr.classList.add("bg-blue-500"):xt>=60?lr.classList.add("bg-yellow-500"):xt>=40?lr.classList.add("bg-orange-500"):lr.classList.add("bg-red-500")),Ke&&(Ke.textContent=`${Ae}/${Fe} questions answered (${xt}%)`),ct&&(ct.disabled=!$t,$t?(ct.textContent=" Submit Test",ct.classList.remove("bg-gray-400"),ct.classList.add("bg-green-600","hover:bg-green-700")):(ct.textContent=` Complete ${Fe-Ae} more question${Fe-Ae!==1?"s":""}`,ct.classList.remove("bg-green-600","hover:bg-green-700"),ct.classList.add("bg-gray-400"))),{answeredCount:Ae,totalQuestions:Fe,percentage:xt,canSubmit:$t}}catch(Ae){return console.error("Error updating progress display for page:",Ae),{answeredCount:0,totalQuestions:0,percentage:0,canSubmit:!1}}},[n.length,pt]),kt=_.useCallback((he,Ee)=>{try{console.log("Setting up test page event listeners:",{testType:he,testId:Ee});const Ae=setInterval(()=>{Object.keys(a).length>0&&(at(he,Ee),console.log("Auto-saved progress for test:",he,Ee))},3e4),Fe=setInterval(()=>{nt(he,Ee)},2e3),xt=yt=>{yt.key==="Escape"&&window.confirm("Are you sure you want to exit the test? Your progress will be saved.")&&G(),yt.ctrlKey&&yt.key==="s"&&(yt.preventDefault(),at(he,Ee),console.log("Manual save triggered")),yt.key},$t=yt=>{Object.keys(a).length>0&&(yt.preventDefault(),yt.returnValue="Your test progress will be saved. Are you sure you want to leave?")},lr=()=>{document.hidden&&(console.log("Tab became hidden - saving progress"),at(he,Ee))},Ke=()=>{console.log("Window focused - updating progress"),nt(he,Ee)},ct=()=>{console.log("Window blurred - saving progress"),at(he,Ee)};return document.addEventListener("keydown",xt),window.addEventListener("beforeunload",$t),document.addEventListener("visibilitychange",lr),window.addEventListener("focus",Ke),window.addEventListener("blur",ct),window.testIntervals||(window.testIntervals={}),window.testIntervals[`autosave_${he}_${Ee}`]=Ae,window.testIntervals[`progress_${he}_${Ee}`]=Fe,()=>{clearInterval(Ae),clearInterval(Fe),document.removeEventListener("keydown",xt),window.removeEventListener("beforeunload",$t),document.removeEventListener("visibilitychange",lr),window.removeEventListener("focus",Ke),window.removeEventListener("blur",ct),window.testIntervals&&(delete window.testIntervals[`autosave_${he}_${Ee}`],delete window.testIntervals[`progress_${he}_${Ee}`])}}catch(Ae){console.error("Error setting up test page event listeners:",Ae)}},[a,at,nt,G]),Wt=_.useCallback(()=>{try{const he=pt(t?.testType),Ee=n.length,Ae=he===Ee&&Ee>0,Fe=document.getElementById("submit-test-button");return Fe&&(Fe.disabled=!Ae,Fe.textContent=Ae?"Submit Test":`Complete ${Ee-he} more questions`),{canSubmit:Ae,answeredCount:he,totalQuestions:Ee}}catch(he){return console.error("Error updating submit button state for page:",he),{canSubmit:!1,answeredCount:0,totalQuestions:0}}},[t,n.length,pt]),rr=_.useCallback((he,Ee)=>{try{console.log("Setting up progress tracking for page:",{testType:he,testId:Ee});const Ae=setInterval(()=>{nt(he,Ee),Wt()},1e3),Fe=setInterval(()=>{Object.keys(a).length>0&&at(he,Ee)},3e4);return window.testIntervals||(window.testIntervals={}),window.testIntervals[`progress_${he}_${Ee}`]=Ae,window.testIntervals[`autosave_${he}_${Ee}`]=Fe,()=>{clearInterval(Ae),clearInterval(Fe),window.testIntervals&&(delete window.testIntervals[`progress_${he}_${Ee}`],delete window.testIntervals[`autosave_${he}_${Ee}`])}}catch(Ae){console.error("Error setting up progress tracking for page:",Ae)}},[a,nt,Wt,at]),ur=_.useCallback(async(he,Ee)=>{const Ae=document.getElementById("submit-test-button");try{const Fe=pt(he),xt=n.length;if(Fe<xt){k(`Please answer all ${xt} questions before submitting.`);return}if(!window.confirm("Are you sure you want to submit your test? This action cannot be undone."))return;Ae&&(Ae.disabled=!0,Ae.innerHTML=`
          <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
            <span>Submitting...</span>
          </div>
        `),await L(he,Ee)&&(te(he,Ee),K(he,Ee,a),console.log("Test submitted successfully!"))}catch(Fe){console.error("Error submitting test from page:",Fe),k("Failed to submit test. Please try again."),Ae&&(Ae.disabled=!1,Ae.textContent="Submit Test")}},[pt,n.length,L,te,K,a]),Nr=_.useCallback(()=>{try{if(!t)return null;const he=["true_false","multiple_choice","input","matching_type","word_matching"];return he.includes(t.testType)?t.testType:he.includes(t.test_type)?t.test_type:null}catch(he){return console.error("Error getting current test type:",he),null}},[t]),wr=_.useCallback((he,Ee)=>{try{console.log("Clearing progress tracking interval:",{testType:he,testId:Ee});const Ae=`progress_interval_${he}_${Ee}`,Fe=`autosave_interval_${he}_${Ee}`;window.testIntervals&&(window.testIntervals[Ae]&&(clearInterval(window.testIntervals[Ae]),delete window.testIntervals[Ae]),window.testIntervals[Fe]&&(clearInterval(window.testIntervals[Fe]),delete window.testIntervals[Fe])),console.log(`Cleared progress tracking intervals for test ${he}_${Ee}`)}catch(Ae){console.error("Error clearing progress tracking interval:",Ae)}},[]),Ot={currentTest:t,testQuestions:n,studentAnswers:a,testProgress:o,isTestActive:u,testResults:f,activeTests:g,isLoading:y,error:T,testDetailsModal:b,testStartTime:E,timeElapsed:P,loadTestForPage:V,submitTest:L,navigateToTestResults:K,navigateBackToCabinet:I,clearTestDataAndReturnToCabinet:G,saveTestProgress:ae,getTestProgress:Z,clearTestProgress:te,loadSavedProgressForPage:ee,isTestCompleted:H,markTestCompleted:U,markTestCompletedInUI:(he,Ee)=>{console.log("Marking test completed in UI:",{testType:he,testId:Ee}),U(he,Ee)},getAnsweredQuestionsCount:R,updateSubmitButtonState:z,updateSubmitButtonStateForPage:Wt,loadStudentActiveTests:ue,loadActiveTests:ue,loadTeacherActiveTests:me,getTestInfo:Ue,getTestQuestions:pe,createTest:Ne,deleteTest:ce,showTestResults:je,loadTestResults:Me,loadTestResultsForPage:We,displayTestResultsOnPage:Nt,setupTestResultsPageEventListeners:$e,clearTestResultsCache:X,viewTestDetails:St,showTestDetailsModal:At,closeTestDetailsModal:Bt,getQuestionAnswerDisplay:Gt,navigateToTest:or,hideTestSections:yr,displayTestOnPage:it,renderQuestionsForPage:Ve,setupTestPageEventListeners:kt,setupProgressTrackingForPage:rr,updateProgressDisplayForPage:nt,submitTestFromPage:ur,getAnsweredQuestionsCountForPage:pt,getCurrentTestType:Nr,saveProgressForPage:at,clearProgressTrackingInterval:wr,collectTestAnswers:ne,calculateTestScore:Rf,checkAnswerCorrectness:Vp,formatStudentAnswerForDisplay:q,getCorrectAnswer:Ev,transformAnswersForSubmission:se,clearAllTestData:()=>{try{console.log("Clearing old test data from localStorage (older than 15 days)...");const Ee=Date.now()-360*60*60*1e3,Ae=[];for(let Fe=0;Fe<localStorage.length;Fe++){const xt=localStorage.key(Fe);if(!(!xt||!((xt.startsWith("test_")||xt.startsWith("student_")||xt.startsWith("teacher_")||xt.startsWith("admin_")||xt.includes("progress")||xt.includes("answers"))&&!xt.includes("test_completed_"))))try{const lr=localStorage.getItem(xt);if(!lr){Ae.push(xt);continue}let Ke=null;if(lr.startsWith("{")||lr.startsWith("[")){const ct=JSON.parse(lr),yt=ct.timestamp||ct.lastSaved||ct.lastTickAt||ct.createdAt||ct.updatedAt||ct.startedAt||ct.started_at||ct.created_at;yt&&(Ke=new Date(yt).getTime())}if(!Ke){const ct=`${xt}__ts`,yt=localStorage.getItem(ct);yt&&(Ke=parseInt(yt)||null)}if(!Ke)continue;Ke<Ee&&Ae.push(xt)}catch{continue}}return Ae.forEach(Fe=>{console.log(`Removing old localStorage key: ${Fe}`),B(Fe)}),console.log(`Cleared ${Ae.length} old test-related items from localStorage`),{success:!0,clearedCount:Ae.length}}catch(he){return console.error("Error clearing old test data:",he),{success:!1,error:he.message}}},setCurrentTest:r,setTestQuestions:s,setStudentAnswers:i,setTestProgress:c,setIsTestActive:d,setTestResults:h,setError:k};return l.jsx(oH.Provider,{value:Ot,children:e})},b2=()=>{const e=_.useContext(oH);if(!e)throw new Error("useTest must be used within a TestProvider");return e},Qde=()=>{const[e,t]=_.useState("en"),n={en:{title:"Privacy Policy",subtitle:"App: MWS Student App",website:"Website: mathayomwatsing.netlify.app",lastUpdated:"Last updated:",introduction:{title:"Introduction",text1:"The MWS Student App is an independent educational project created by Aleksandr Petrov to provide learning tools for students. This app is not officially affiliated with or endorsed by Mathayomwatsing School.",text2:"This Privacy Policy explains how we collect, use, store, and protect personal information. By using this app, you agree to this policy.",dataController:"Independent Developer:",dataControllerText:"Aleksandr Petrov is responsible for managing and protecting personal data collected through the MWS Student App and Website: mathayomwatsing.netlify.app",pdpaTitle:"PDPA Compliance",pdpaText:"This app complies with Thailand's Personal Data Protection Act, B.E. 2562 (PDPA). We are committed to protecting your personal data in accordance with PDPA requirements, including lawful collection, purpose limitation, data minimization, accuracy, security, and your rights as a data subject."},consent:{title:"User Consent",text1:"Users (or their parents/legal guardians if under 18) consent to data collection and usage as described in this policy.",text2:"If you do not agree, please do not use the app. Continued use after updates to this policy constitutes acceptance."},appPurpose:{title:"App Purpose",text:"The MWS Student App (Independent Project) enables students to:",items:["Take online tests and assessments","View test results and academic progress","Track learning achievements and performance","Access educational content and resources"]},childrenPrivacy:{title:"Children's Privacy",text1:"The MWS Student App is designed for students. We do not knowingly collect more data than necessary to provide educational functionality.",text2:"Parents or guardians may contact the app developer to review, delete, or request updates to a student's information. We comply with COPPA (Children's Online Privacy Protection Act), Thailand's PDPA (Personal Data Protection Act, B.E. 2562), and equivalent child-data protection laws applicable in your jurisdiction."},dataCollection:{title:"Data Collection",text:"We collect only the data necessary to provide educational functionality:",accountInfo:{title:"Account Information",text:"Student name, ID, grade, and class (for authentication and personalization)."},testData:{title:"Test Data",text:"Answers, scores, progress, and completion status."},usageData:{title:"Usage Data",text:"App interactions, feature usage, and error logs (to improve functionality and stability)."},important:"Important:",importantText:"This app does not use or share personal data for advertising or commercial purposes. All data collection is strictly for educational and assessment use. We comply with COPPA (Children's Online Privacy Protection Act), Thailand's PDPA (Personal Data Protection Act, B.E. 2562), and equivalent child-data protection laws. This app does not display advertisements or use tracking SDKs."},dataUsage:{title:"How We Use Your Data",text:"Your data is used exclusively for educational purposes:",items:["Deliver and maintain educational services","Track learning progress and achievements","Provide feedback on academic performance","Improve app functionality and user experience","Provide technical support"]},dataStorage:{title:"Data Storage & Security",text1:"Data is stored securely, locally on devices, or on encrypted cloud servers (Supabase). All transmissions are encrypted.",text2:"Technical and organizational measures are applied to prevent unauthorized access, alteration, disclosure, or destruction."},dataHosting:{title:"Data Hosting",text1:"The app's data is securely stored using trusted cloud infrastructure (Supabase). These services comply with global security standards including GDPR and ISO 27001.",text2:"All data hosting providers are contractually obligated to maintain the same level of data protection and security as outlined in this Privacy Policy. Data is stored in secure, encrypted databases with regular backups and monitoring."},dataSharing:{title:"Data Sharing and Disclosure",text:"We do not sell, rent, or trade user data. Data may be shared only:",schoolAdmin:{title:"Parents/Guardians:",text:"With parents/guardians for their childs data review."},legal:{title:"Legal Requirements:",text:"For legal obligations, if required by law or in response to valid legal requests."},serviceProviders:{title:"Service Providers:",text:"With trusted service providers (bound by contracts to protect data and use it only for specified purposes)."}},academicIntegrity:{title:"Academic Integrity",text:"The app includes anti-cheating measures to ensure fair assessment. This includes monitoring app state changes, preventing unauthorized actions during tests, and detecting suspicious behavior. By using this app, you agree to maintain academic honesty and integrity."},userRights:{title:"Your Rights",text:"Users have the right to:",items:["Access, correct, or delete personal data","Object to processing of personal data","Request data portability"],contact:"To exercise these rights, please contact app developer at aleksandr.p@mws.ac.th",pdpaTitle:"Under Thailand's PDPA, you have the right to:",pdpaItems:["Access and obtain a copy of your personal data","Request correction of any incomplete or inaccurate information","Request deletion or suspension of use of your personal data","Withdraw consent at any time (where applicable)","Lodge a complaint with the Personal Data Protection Committee (PDPC) if you believe your data has been mishandled"]},dataRetention:{title:"Data Retention",text:"We retain personal data only as long as necessary to provide educational services and comply with legal obligations. Academic records may be retained according to educational data retention requirements."},changes:{title:"Changes to This Privacy Policy",text:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date. You are advised to review this Privacy Policy periodically for any changes.'},contact:{title:"Contact",text:"For privacy inquiries, contact:",school:"Aleksandr Petrov",email:"aleksandr.p@mws.ac.th"},backToLogin:" Back to Login"},th:{title:"    Aleksandr Petrov",subtitle:": MWS Student App",website:": mathayomwatsing.netlify.app",lastUpdated:":",introduction:{title:"",text1:"MWS Student App  Aleksandr Petrov  ",text2:"    ",dataController:":",dataControllerText:"Aleksandr Petrov  MWS Student App : mathayomwatsing.netlify.app",pdpaTitle:" PDPA",pdpaText:" .. 2562 (PDPA)  PDPA      "},consent:{title:"",text1:" (/ 18 ) ",text2:"  "},appPurpose:{title:"",text:"MWS Student App () :",items:["","","",""]},childrenPrivacy:{title:"",text1:" ",text2:"    COPPA ()  .. 2562 (PDPA) "},dataCollection:{title:"",text:":",accountInfo:{title:"",text:"/    ()"},testData:{title:"",text:"   "},usageData:{title:"",text:"   ()"},important:":",importantText:"   COPPA ()  .. 2562 (PDPA)   SDK "},dataUsage:{title:"",text:":",items:["","","","",""]},dataStorage:{title:"",text1:"  (Supabase) ",text2:"   "},dataHosting:{title:"",text1:" (Supabase)  GDPR  ISO 27001",text2:" "},dataSharing:{title:"",text:"   :",schoolAdmin:{title:":",text:""},legal:{title:":",text:""},serviceProviders:{title:":",text:" "}},academicIntegrity:{title:"",text:"     "},userRights:{title:"",text:":",items:["",""," ()","",""],contact:"  aleksandr.p@mws.ac.th",pdpaTitle:" .. 2562 (PDPA) :",pdpaItems:["","",""," ()"," (PDPC) "]},dataRetention:{title:"",text:" "},changes:{title:"",text:'   "" '},contact:{title:"",text:" :",school:"Aleksandr Petrov",email:"aleksandr.p@mws.ac.th"},backToLogin:" "}}[e],s=new Date().toLocaleDateString(e==="th"?"th-TH":"en-US",{year:"numeric",month:"long",day:"numeric"});return l.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 mb-8",children:l.jsx("div",{className:"px-6 py-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:n.title}),l.jsx("p",{className:"text-sm text-gray-600",children:n.subtitle}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.website}),l.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[n.lastUpdated," ",s]})]}),l.jsxs("div",{className:"flex gap-2 ml-4",children:[l.jsx("button",{onClick:()=>t("en"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="en"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"English"}),l.jsx("button",{onClick:()=>t("th"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="th"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})]})})}),l.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-6 sm:p-8 space-y-8",children:[l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.introduction.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.introduction.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.introduction.text2}),l.jsx("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-gray-700",children:[l.jsx("span",{className:"font-semibold",children:n.introduction.dataController})," ",n.introduction.dataControllerText]})}),l.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-blue-800",children:[l.jsxs("span",{className:"font-semibold",children:[n.introduction.pdpaTitle,":"]})," ",n.introduction.pdpaText]})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.consent.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.consent.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.consent.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.appPurpose.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.appPurpose.text}),l.jsx("ul",{className:"list-disc list-inside mt-3 space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.appPurpose.items.map((a,i)=>l.jsx("li",{children:a},i))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.childrenPrivacy.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.childrenPrivacy.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.childrenPrivacy.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataCollection.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.dataCollection.text}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.accountInfo.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.accountInfo.text})]}),l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.testData.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.testData.text})]}),l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.usageData.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.usageData.text})]})]}),l.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-yellow-800",children:[l.jsx("span",{className:"font-semibold",children:n.dataCollection.important})," ",n.dataCollection.importantText]})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataUsage.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.dataUsage.text}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.dataUsage.items.map((a,i)=>l.jsx("li",{children:a},i))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataStorage.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataStorage.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.dataStorage.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataHosting.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataHosting.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.dataHosting.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataSharing.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataSharing.text}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4 mt-4",children:[l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.schoolAdmin.title})," ",n.dataSharing.schoolAdmin.text]}),l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.legal.title})," ",n.dataSharing.legal.text]}),l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.serviceProviders.title})," ",n.dataSharing.serviceProviders.text]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.academicIntegrity.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.academicIntegrity.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.userRights.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.userRights.text}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.userRights.items.map((a,i)=>l.jsx("li",{children:a},i))}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:e==="en"?l.jsxs(l.Fragment,{children:["To exercise these rights, please contact app developer at"," ",l.jsx("a",{href:"mailto:aleksandr.p@mws.ac.th",className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"aleksandr.p@mws.ac.th"})]}):l.jsxs(l.Fragment,{children:[" "," ",l.jsx("a",{href:"mailto:aleksandr.p@mws.ac.th",className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"aleksandr.p@mws.ac.th"})]})}),l.jsxs("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 rounded-lg p-5",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:n.userRights.pdpaTitle}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-sm leading-6 text-gray-700 ml-2",children:n.userRights.pdpaItems.map((a,i)=>l.jsx("li",{children:a},i))})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataRetention.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataRetention.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.changes.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.changes.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.contact.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.contact.text}),l.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("p",{className:"text-base text-gray-700",children:l.jsx("strong",{children:n.contact.school})}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:l.jsx("a",{href:`mailto:${n.contact.email}`,className:"text-blue-600 hover:text-blue-800 underline font-medium",children:n.contact.email})})]})]}),l.jsx("div",{className:"pt-6 border-t border-gray-200 mt-8",children:l.jsx(dB,{to:"/login",className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-medium",children:n.backToLogin})})]})]})})},Oy=window.location.hostname==="mathayomwatsing.netlify.app";Oy&&(console.log=()=>{},console.debug=()=>{},console.info=()=>{},console.warn=()=>{});const be={debug:(e,...t)=>{Oy||console.log(e,...t)},warn:(e,...t)=>{Oy||console.warn(e,...t)},error:(e,...t)=>{console.error(e,...t)},info:(e,...t)=>{Oy||console.info(e,...t)},isEnabled:()=>!Oy},_2=({testResults:e,onBackToCabinet:t,onRetakeTest:r,isLoading:n=!1,caught_cheating:s=!1,visibility_change_times:a=0})=>{const[i,o]=_.useState(!1),c=()=>{o(!0),t&&t()};if(!e||!e.showResults)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-500",children:"No test results to display"})})});const{testInfo:u,testType:d,score:f,totalQuestions:h,percentage:g,passed:x,questionAnalysis:y,timestamp:v}=e,T=C=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[C]||C,k=C=>C>=80?"text-green-600 bg-green-50":C>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",b=C=>C?"text-green-600 bg-green-100 border-green-200":"text-red-600 bg-red-100 border-red-200";return n?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading test results..."})]})}):l.jsxs("div",{className:"bg-gray-50 py-8 overflow-y-auto",children:[l.jsx(Na,{isOpen:i,onClose:()=>{},title:"Navigating",size:"small",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx(cn,{size:"lg",className:"mb-3"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Returning to cabinet..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait"})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs(dt.div,{className:"bg-white rounded-lg shadow-lg p-6 mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(e?.caught_cheating||s)&&l.jsx("div",{className:"mb-6 border-2 border-red-500 bg-red-50 rounded-lg",children:l.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:"text-red-700",children:"Suspicious activity was detected during this test. Your teacher has been notified."})})]})}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Results"}),l.jsx("h2",{className:"text-xl text-gray-700 mb-1",children:u?.test_name||"Test"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[T(d),"  Completed on ",new Date(v).toLocaleDateString()]})]}),l.jsx("div",{className:"text-right",children:l.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${b(x)}`,children:x?" PASSED":" FAILED"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-900",children:f}),l.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-900",children:h}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:`text-3xl font-bold ${k(g).split(" ")[0]}`,children:[g,"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-6",children:l.jsx(dt.div,{className:`h-3 rounded-full ${k(g).split(" ")[1]}`,initial:{width:0},animate:{width:`${g}%`},transition:{duration:1,ease:"easeOut"}})})]}),d!=="matching_type"&&d!=="word_matching"&&l.jsxs(dt.div,{className:"bg-white rounded-lg shadow-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Question Review"}),l.jsx("div",{className:"space-y-4",children:y.map((C,E)=>l.jsxs(dt.div,{className:`p-4 rounded-lg border-2 ${C.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:E*.1},children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Question ",C.questionNumber]}),l.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${C.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.isCorrect?" Correct":" Incorrect"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Question:"}),l.jsx("p",{className:"text-gray-700 bg-gray-100 p-3 rounded",children:C.question})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Your Answer:"}),l.jsx("p",{className:`p-3 rounded ${C.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.userAnswer||"No answer provided"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Correct Answer:"}),l.jsx("p",{className:"bg-blue-100 text-blue-800 p-3 rounded",children:C.correctAnswer})]})]})]},E))})]}),l.jsxs(dt.div,{className:"bg-white rounded-lg shadow-lg p-6 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Summary Statistics"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y.filter(C=>C.isCorrect).length}),l.jsx("div",{className:"text-sm text-blue-600",children:"Correct"})]}),l.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:y.filter(C=>!C.isCorrect).length}),l.jsx("div",{className:"text-sm text-red-600",children:"Incorrect"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[Math.round(y.filter(C=>C.isCorrect).length/h*100),"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),l.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:h}),l.jsx("div",{className:"text-sm text-purple-600",children:"Total"})]})]})]}),l.jsx(dt.div,{className:"bg-white rounded-lg shadow-lg p-6 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:l.jsx("div",{className:"flex justify-center",children:l.jsx(rt,{onClick:c,variant:"primary",className:"flex items-center gap-2",disabled:i,children:i?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white",className:"mr-2"}),"Navigating..."]}):" Back to Cabinet"})})})]})]})};let Zde=class{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.accessToken),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){return this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}};const qp=new Zde;window.tokenManager=qp;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{qp.init()}):qp.init());const cH=async(e,t,r,n,s=!1)=>{try{console.log(" Fetching teacher student results:",{teacherId:e,grade:t,className:r,termId:n,forceRefresh:s});const a=s?`&_t=${Date.now()}`:"",o=await(await qp.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-student-results?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}${a}`,{cache:s?"no-cache":"default",headers:s?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}:{}})).json();if(o.success)return console.log(" Teacher student results loaded:",o.results.length,"results"),console.log(" Students loaded:",o.students?.length||0,"students"),{success:!0,results:o.results,students:o.students||[],count:o.results.length,student_count:o.student_count||0};throw new Error(o.error||"Failed to load teacher student results")}catch(a){return console.error("Error fetching teacher student results:",a),{success:!1,error:a.message,results:[]}}},uH=async(e,t)=>{try{console.log(" Fetching student results view:",{studentId:e,academicPeriodId:t});const r=t?`&academic_period_id=${t}`:"",s=await(await qp.makeAuthenticatedRequest(`/.netlify/functions/get-student-results-view?student_id=${e}${r}`)).json();if(s.success)return console.log(" Student results view loaded:",s.results.length,"results"),{success:!0,results:s.results,count:s.results.length};throw new Error(s.error||"Failed to load student results view")}catch(r){return console.error("Error fetching student results view:",r),{success:!1,error:r.message,results:[]}}},e0e=async(e,t,r,n)=>{try{console.log(" Fetching class summary:",{teacherId:e,grade:t,className:r,academicPeriodId:n});const a=await(await qp.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Class summary loaded:",a.summary),{success:!0,summary:a.summary,hasData:!!a.summary};throw new Error(a.error||"Failed to load class summary")}catch(s){return console.error("Error fetching class summary:",s),{success:!1,error:s.message,summary:null}}},t0e=async(e,t,r,n,s={})=>{try{const a=await cH(e,t,r,n);if(!a.success)return a;let i=a.results;return s.subject&&(i=i.filter(o=>o.subject&&o.subject.toLowerCase().includes(s.subject.toLowerCase()))),s.testType&&(i=i.filter(o=>o.test_type===s.testType)),s.minScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100>=s.minScore)),s.maxScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100<=s.maxScore)),s.passed!==void 0&&(i=i.filter(o=>o.score>=o.passing_score===s.passed)),{success:!0,results:i,count:i.length,originalCount:a.results.length}}catch(a){return console.error("Error filtering teacher student results:",a),{success:!1,error:a.message,results:[]}}},r0e=async(e,t,r={})=>{try{const n=await uH(e,t);if(!n.success)return n;let s=n.results;return r.subject&&(s=s.filter(a=>a.subject&&a.subject.toLowerCase().includes(r.subject.toLowerCase()))),r.testType&&(s=s.filter(a=>a.test_type===r.testType)),r.semester&&(s=s.filter(a=>a.semester===r.semester)),r.passed!==void 0&&(s=s.filter(a=>a.score>=a.passing_score===r.passed)),{success:!0,results:s,count:s.length,originalCount:n.results.length}}catch(n){return console.error("Error filtering student results view:",n),{success:!1,error:n.message,results:[]}}},n0e={getTeacherStudentResults:cH,getStudentResultsView:uH,getClassSummary:e0e,getTeacherStudentResultsFiltered:t0e,getStudentResultsViewFiltered:r0e},s0e=({testType:e,testId:t,isShuffled:r,allowedTime:n,onSave:s,onCancel:a,canEdit:i=!0})=>{const[o,c]=_.useState(!1),[u,d]=_.useState(r||!1),[f,h]=_.useState(!!n),[g,x]=_.useState(n?Math.floor(n/60):""),[y,v]=_.useState(!1);_.useEffect(()=>{d(r||!1)},[r]),_.useEffect(()=>{h(!!n),x(n?Math.floor(n/60):"")},[n]),_.useEffect(()=>{!i&&o&&c(!1)},[i,o]);const T=async()=>{v(!0);try{const b=f&&g?Math.floor(parseFloat(g)*60):null,C={};["input","true_false","multiple_choice"].includes(e)&&(C.is_shuffled=u),C.allowed_time=b,await s(C),c(!1)}catch(b){console.error("Error saving settings:",b),alert("Failed to save settings. Please try again.")}finally{v(!1)}},k=()=>{d(r||!1),h(!!n),x(n?Math.floor(n/60):""),c(!1)};return o?l.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[["input","true_false","multiple_choice"].includes(e)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"is_shuffled",checked:u,onChange:b=>d(b.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("label",{htmlFor:"is_shuffled",className:"text-sm font-medium text-gray-700",children:"Shuffle questions"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"enable_timer",checked:f,onChange:b=>{h(b.target.checked),b.target.checked||x("")},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("label",{htmlFor:"enable_timer",className:"text-sm font-medium text-gray-700",children:"Enable timer"})]}),f&&l.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[l.jsx("input",{type:"number",min:"1",step:"1",value:g,onChange:b=>x(b.target.value.replace(/[^0-9]/g,"")),placeholder:"Minutes",className:"w-24 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"minutes"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[l.jsx(rt,{onClick:T,variant:"primary",size:"sm",disabled:y||f&&!g,children:y?"Saving...":"Save"}),l.jsx(rt,{onClick:k,variant:"outline",size:"sm",children:"Cancel"})]})]}):l.jsxs("div",{className:"flex items-center space-x-4",children:[["input","true_false","multiple_choice"].includes(e)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Shuffled:"}),l.jsx("span",{className:`text-sm font-semibold ${u?"text-green-600":"text-gray-400"}`,children:u?" Yes":" No"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),f&&g?l.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[" ",g," minutes"]}):l.jsx("span",{className:"text-sm font-semibold text-gray-400",children:" Not set"})]}),i&&l.jsx(rt,{onClick:()=>c(!0),variant:"outline",size:"sm",children:" Edit"})]})},Q7=({isOpen:e,onClose:t,testType:r,testId:n,testName:s,questions:a=[],isLoading:i=!1,onSave:o,canEdit:c=!0,canEditSettings:u=!0,subject:d,createdAt:f,assignments:h=[],testInfo:g=null,onSettingsSave:x})=>{const[y,v]=_.useState(!1),[T,k]=_.useState([]),[b,C]=_.useState(!1),[E,j]=_.useState(!1),P=Array.isArray(a)?a:[],A=!!c,M=u!==void 0?!!u:!!c;if(_.useEffect(()=>{P.length>0?k(JSON.parse(JSON.stringify(P))):k([]),j(!1)},[P]),_.useEffect(()=>{e||(v(!1),j(!1),C(!1))},[e]),_.useEffect(()=>{!A&&y&&(v(!1),j(!1))},[A,y]),!e)return null;const F=R=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching",word_matching:"Word Matching",fill_blanks:"Fill in the Blanks"})[R]||R,B=(R,z)=>{switch(z){case"multiple_choice":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[R.option_a&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"A"}),l.jsx("span",{className:"text-gray-700",children:R.option_a})]}),R.option_b&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"B"}),l.jsx("span",{className:"text-gray-700",children:R.option_b})]}),R.option_c&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"C"}),l.jsx("span",{className:"text-gray-700",children:R.option_c})]}),R.option_d&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"D"}),l.jsx("span",{className:"text-gray-700",children:R.option_d})]}),R.option_e&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"E"}),l.jsx("span",{className:"text-gray-700",children:R.option_e})]}),R.option_f&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),l.jsx("span",{className:"text-gray-700",children:R.option_f})]})]})]});case"true_false":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"T"}),l.jsx("span",{className:"text-gray-700",children:"True"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),l.jsx("span",{className:"text-gray-700",children:"False"})]})]})]});case"input":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Answer Format:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("span",{className:"text-gray-600 italic",children:"Type your answer in the text input field"})})]});case"matching_type":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Instructions:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("span",{className:"text-gray-600 italic",children:"Match the items by connecting them with lines or selecting pairs"})})]});default:return null}},V=(R,z)=>{if(!R.correct_answer&&!R.correct_answers)return null;let G="";switch(z){case"multiple_choice":G=R.correct_answer?.toUpperCase()||"";break;case"true_false":G=R.correct_answer?"True":"False";break;case"input":Array.isArray(R.correct_answers)?G=R.correct_answers.join(", "):G=R.correct_answer||R.correct_answers||"";break;case"matching_type":G=typeof R.correct_answer=="object"?JSON.stringify(R.correct_answer):R.correct_answer;break;default:G=String(R.correct_answer||R.correct_answers||"")}return l.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[l.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Correct Answer:"}),l.jsx("p",{className:"text-green-700 font-mono",children:G})]})},ee=async()=>{if(!E){console.log("No changes to save");return}console.log("Saving questions...",{testType:r,testId:n,questionsCount:T.length}),C(!0);try{o?await o(r,n,T):await Sn.updateTestQuestions(r,n,T),j(!1),v(!1)}catch(R){console.error("Error saving questions:",R),alert("Failed to save questions. Please try again.")}finally{C(!1)}};_.useEffect(()=>{y&&console.log("Edit mode is ON",{hasChanges:E,questionsCount:T.length})},[y,E,T.length]);const ae=(R,z)=>{if(!y)return l.jsxs(l.Fragment,{children:[B(R,"multiple_choice"),V(R,"multiple_choice")]});const G=`mc_question_${n}_${z}`,X=q=>{const se=[...T];se[z].question=q,k(se),j(!0)},ne=(q,se)=>{const ue=[...T];ue[z][q]=se,k(ue),j(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text:"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:G,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:3,value:T[z]?.question||"",onChange:q=>{X(q.target.value)}}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(G),onChange:q=>X(q.target.value)})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options:"}),l.jsx("button",{type:"button",onClick:()=>{const q=[...T],se=q[z],ue=["A","B","C","D","E","F"];if(ue.filter(Ne=>{const ce=`option_${Ne.toLowerCase()}`;return se[ce]&&se[ce].trim()!==""}).length<6){const Ne=ue.find(ce=>{const Ue=`option_${ce.toLowerCase()}`;return!se[Ue]||se[Ue].trim()===""});if(Ne){const ce=`option_${Ne.toLowerCase()}`;se[ce]="",k(q),j(!0)}}},className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",disabled:["A","B","C","D","E","F"].filter(q=>{const se=`option_${q.toLowerCase()}`;return T[z]?.[se]&&T[z][se].trim()!==""}).length>=6,children:"+ Add Option"})]}),["A","B","C","D","E","F"].map(q=>{const se=`option_${q.toLowerCase()}`,ue=T[z]?.[se],me=ue??"",Ne=typeof ue=="string"&&ue.trim()!=="";return!Ne&&!(ue==="")&&q!=="A"&&q!=="B"?null:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded w-8 text-center",children:q}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",id:`mc_option_${n}_${z}_${q}`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:me,onChange:Ue=>{ne(se,Ue.target.value)},placeholder:`Option ${q}`}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(`mc_option_${n}_${z}_${q}`),onChange:Ue=>ne(se,Ue.target.value)})]}),Ne&&l.jsx("button",{type:"button",onClick:()=>{const Ue=[...T];Ue[z][se]=null,k(Ue),j(!0)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",title:"Remove option",children:""})]},q)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer:"}),l.jsxs("select",{className:"p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:T[z]?.correct_answer||"",onChange:q=>{const se=[...T];se[z].correct_answer=q.target.value,k(se),j(!0)},children:[l.jsx("option",{value:"",children:"Select correct answer"}),["A","B","C","D","E","F"].map(q=>{const se=`option_${q.toLowerCase()}`,ue=T[z]?.[se]||"";return!ue||ue.trim()===""?null:l.jsxs("option",{value:q.toLowerCase(),children:["Option ",q]},q)})]})]})]})},Z=(R,z)=>{if(!y)return l.jsxs(l.Fragment,{children:[B(R,"true_false"),V(R,"true_false")]});const G=`tf_question_${n}_${z}`,X=ne=>{const q=[...T];q[z].question=ne,k(q),j(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text:"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:G,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:3,value:T[z]?.question||"",onChange:ne=>{X(ne.target.value)}}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(G),onChange:ne=>X(ne.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer:"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",name:`correct_answer_${z}`,value:"true",checked:T[z]?.correct_answer===!0||T[z]?.correct_answer==="true",onChange:()=>{const ne=[...T];ne[z].correct_answer=!0,k(ne),j(!0)}}),l.jsx("span",{children:"True"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",name:`correct_answer_${z}`,value:"false",checked:T[z]?.correct_answer===!1||T[z]?.correct_answer==="false",onChange:()=>{const ne=[...T];ne[z].correct_answer=!1,k(ne),j(!0)}}),l.jsx("span",{children:"False"})]})]})]})]})},te=(R,z)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",dangerouslySetInnerHTML:{__html:ca(R.question||R.question_text||"")}}),l.jsx("p",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Correct Answer(s):"}),l.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:Array.isArray(R.correct_answers)?l.jsx("ul",{className:"list-disc list-inside space-y-1",children:R.correct_answers.map((ue,me)=>l.jsx("li",{dangerouslySetInnerHTML:{__html:ca(String(ue))}},me))}):l.jsx("span",{dangerouslySetInnerHTML:{__html:ca(String(R.correct_answer||R.correct_answers||""))}})})]});const G=`input_question_${n}_${z}`,X=T[z]?.question??T[z]?.question_text??"",ne=ue=>{const me=[...T];me[z].question_text!==void 0?me[z].question_text=ue:me[z].question=ue,k(me),j(!0)},q=(ue,me)=>{const Ne=[...T];Array.isArray(Ne[z].correct_answers)||(Ne[z].correct_answers=[]),Ne[z].correct_answers[ue]=me,k(Ne),j(!0)},se=ue=>{const me=[...T];me[z].correct_answers!==void 0&&!Array.isArray(me[z].correct_answers)?me[z].correct_answers=ue:(me[z].correct_answer,me[z].correct_answer=ue),k(me),j(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text (supports math: $...$ for inline, $$...$$ for display):"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:G,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:4,value:X,onChange:ue=>{ne(ue.target.value)},placeholder:"Enter question text. Use $x^2$ for math expressions."}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(G),onChange:ue=>ne(ue.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s) (supports math: $...$ for inline, $$...$$ for display):"}),Array.isArray(T[z]?.correct_answers)?l.jsxs("div",{className:"space-y-2",children:[T[z].correct_answers.map((ue,me)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",id:`input_answer_${n}_${z}_${me}`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:String(ue),onChange:Ne=>{q(me,Ne.target.value)},placeholder:"Enter answer (supports math: $x^2$)"}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(`input_answer_${n}_${z}_${me}`),onChange:Ne=>q(me,Ne.target.value)})]}),l.jsx("button",{type:"button",onClick:()=>{const Ne=[...T];Ne[z].correct_answers.splice(me,1),k(Ne),j(!0)},className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},me)),l.jsx("button",{type:"button",onClick:()=>{const ue=[...T];ue[z].correct_answers||(ue[z].correct_answers=[]),ue[z].correct_answers.push(""),k(ue),j(!0)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:"+ Add Answer"})]}):l.jsx("div",{children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",id:`input_answer_${n}_${z}_single`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:String(T[z]?.correct_answer||T[z]?.correct_answers||""),onChange:ue=>{se(ue.target.value)},placeholder:"Enter answer (supports math: $x^2$)"}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(`input_answer_${n}_${z}_single`),onChange:ue=>se(ue.target.value)})]})})]})]})},L=zs.useCallback(()=>{k(R=>{const z=R.map(X=>{const ne=X?.question_id??X?.id,q=Number(ne);return Number.isFinite(q)?q:null}).filter(X=>X!==null),G=z.length>0?Math.max(...z)+1:1;return[...R,{id:null,question_id:G,left_word:"",right_word:"",__isNew:!0}]}),j(!0)},[k,j]),K=(R,z)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Word Pair:"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex-1 bg-gray-100 p-3 rounded",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Left:"})," ",R.left_word]}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsxs("div",{className:"flex-1 bg-gray-100 p-3 rounded",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Right:"})," ",R.right_word]})]})]});const G=(q,se,ue)=>T.filter((Ne,ce)=>ce===ue?!1:se==="left"?Ne.left_word?.toLowerCase()===q?.toLowerCase():Ne.right_word?.toLowerCase()===q?.toLowerCase()).length>0,X=G(T[z]?.left_word,"left",z),ne=G(T[z]?.right_word,"right",z);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Left Word:"}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${X?"border-red-300 bg-red-50":"border-gray-300"}`,value:T[z]?.left_word||"",onChange:q=>{const se=[...T];se[z].left_word=q.target.value,k(se),j(!0)},placeholder:"Enter left word"}),X&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Duplicate left word detected"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Right Word:"}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${ne?"border-red-300 bg-red-50":"border-gray-300"}`,value:T[z]?.right_word||"",onChange:q=>{const se=[...T];se[z].right_word=q.target.value,k(se),j(!0)},placeholder:"Enter right word"}),ne&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Duplicate right word detected"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{type:"button",onClick:()=>{if(z>0){const q=[...T];[q[z-1],q[z]]=[q[z],q[z-1]],k(q),j(!0)}},disabled:z===0,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:" Move Up"}),l.jsx("button",{type:"button",onClick:()=>{if(z<T.length-1){const q=[...T];[q[z],q[z+1]]=[q[z+1],q[z]],k(q),j(!0)}},disabled:z===T.length-1,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:" Move Down"}),l.jsx("button",{type:"button",onClick:()=>{if(window.confirm("Are you sure you want to remove this word pair?")){const q=T.filter((se,ue)=>ue!==z);k(q),j(!0)}},className:"px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm",children:"Remove"})]})]})},I=(R,z)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(R.question_json,null,2)})}),l.jsx("p",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Correct Answers:"}),l.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:Array.isArray(R.correct_answers)?l.jsx("ul",{className:"list-disc list-inside space-y-1",children:R.correct_answers.map((ne,q)=>l.jsx("li",{children:String(ne)},q))}):l.jsx("span",{children:String(R.correct_answers)})})]});const G=JSON.stringify(R.question_json||{},null,2),X=Array.isArray(R.correct_answers)?R.correct_answers:[R.correct_answers||""];return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question JSON (structured text):"}),l.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:6,value:G,onChange:ne=>{try{const q=JSON.parse(ne.target.value),se=[...T];se[z].question_json=q,k(se),j(!0)}catch(q){console.error("Invalid JSON:",q)}},placeholder:'{"type": "paragraph", "children": [...]}'}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Edit the JSON structure for the question text"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s):"}),l.jsxs("div",{className:"space-y-2",children:[X.map((ne,q)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:String(ne),onChange:se=>{const ue=[...T];ue[z].correct_answers[q]=se.target.value,k(ue),j(!0)},placeholder:"Enter answer"}),l.jsx("button",{type:"button",onClick:()=>{const se=[...T];se[z].correct_answers.splice(q,1),k(se),j(!0)},className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},q)),l.jsx("button",{type:"button",onClick:()=>{const ne=[...T];ne[z].correct_answers||(ne[z].correct_answers=[]),ne[z].correct_answers.push(""),k(ne),j(!0)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:"+ Add Answer"})]})]})]})},H=y?T:P,U=H.length;return l.jsx(il,{children:l.jsxs(dt.div,{className:"fixed inset-0 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[l.jsx(dt.div,{className:"fixed inset-0 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),l.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:l.jsxs(dt.div,{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s||"Test Details"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[F(r),"  ",U," Question",U!==1?"s":""]})]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[A&&["input","multiple_choice","true_false","word_matching"].includes(r)&&l.jsx(rt,{onClick:()=>{y&&E?window.confirm("You have unsaved changes. Are you sure you want to cancel?")&&(v(!1),k(JSON.parse(JSON.stringify(a))),j(!1)):v(!y)},variant:y?"outline":"primary",size:"sm",className:"flex items-center space-x-1",children:y?" Cancel Edit":" Edit Questions"}),l.jsx(rt,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Close"})]})]}),l.jsx("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:i?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading test details..."})]})}):l.jsxs("div",{className:"space-y-6",children:[!A&&l.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:"Editing is disabled because this test has an active assignment."}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Information"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),l.jsx("p",{className:"text-sm text-gray-900",children:d})]}),f&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),l.jsx("p",{className:"text-sm text-gray-900",children:new Date(f).toLocaleDateString()})]})]}),h&&h.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.map((R,z)=>l.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[R.grade,"/",R.class]},z))})]}),g&&x&&l.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:l.jsx(s0e,{testType:r,testId:n,isShuffled:g?.is_shuffled,allowedTime:g?.allowed_time,onSave:x,canEdit:M})})]}),U===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Questions Available"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"This test doesn't have any questions yet."}),y&&r==="word_matching"&&l.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 text-sm font-medium text-blue-600 border border-dashed border-blue-300 rounded hover:bg-blue-50",children:"+ Add Word Pair"})]}):l.jsxs("div",{className:"space-y-6",children:[H.map((R,z)=>l.jsxs(dt.div,{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:z*.1,duration:.3},children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:["Question ",z+1]}),l.jsx("span",{className:"text-gray-500 text-sm",children:F(r)})]})}),l.jsx("div",{className:"mb-4",children:y?l.jsxs("div",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:[r==="multiple_choice"&&ae(R,z),r==="true_false"&&Z(R,z),r==="input"&&te(R,z),r==="word_matching"&&K(R,z),r==="fill_blanks"&&I(R,z)]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:r==="input"?l.jsx("span",{dangerouslySetInnerHTML:{__html:ca(R.question||R.question_text||"")}}):r==="word_matching"?l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"bg-blue-100 px-3 py-1 rounded",children:R.left_word}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"bg-green-100 px-3 py-1 rounded",children:R.right_word})]}):r==="fill_blanks"?l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(R.question_json,null,2)})}):R.question||R.question_text}),B(R,r),V(R,r)]})})]},R.id||R.question_id||z)),y&&r==="word_matching"&&l.jsx("div",{className:"flex justify-center pt-2",children:l.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 text-sm font-medium text-blue-600 border border-dashed border-blue-300 rounded hover:bg-blue-50",children:"+ Add Word Pair"})})]})]})}),l.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:[l.jsx("div",{className:"text-sm text-gray-600",children:U>0&&l.jsx("span",{children:y?E?l.jsx("span",{className:"text-orange-600 font-semibold",children:" Unsaved changes"}):l.jsxs("span",{children:["Showing ",U," question",U!==1?"s":""]}):l.jsxs("span",{children:["Showing ",U," question",U!==1?"s":""]})})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[y&&l.jsx("button",{onClick:ee,disabled:b||!E,className:`px-4 py-2 rounded-md font-medium flex items-center space-x-2 min-w-[140px] justify-center transition-all ${b||!E?"bg-gray-400 text-gray-700 cursor-not-allowed opacity-60":"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer"}`,children:b?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),l.jsx("span",{children:"Saving..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Save Changes"})]})}),l.jsx(rt,{onClick:t,variant:y?"outline":"primary",className:"flex items-center space-x-2",children:"Close"})]})]})]})})]})})},a0e=({testText:e,blanks:t,separateType:r=!0,testId:n,testName:s="Unknown Test",teacherId:a="Unknown Teacher",subjectId:i,onTestComplete:o,onAnswerChange:c})=>{if(console.log(" FillBlanksTestStudent Props Debug:"),console.log("- testText:",e),console.log("- blanks:",t),console.log("- separateType:",r),console.log("- testId:",n),console.log("- testName:",s),console.log("- teacherId:",a),console.log("- subjectId:",i),!e||!t||!Array.isArray(t))return console.log(" FillBlanksTestStudent: Missing test data"),l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx(zt,{className:"max-w-md w-full",children:l.jsxs(zt.Body,{className:"text-center",children:[l.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load fill blanks test data"}),l.jsx(rt,{onClick:()=>window.history.back(),variant:"primary",children:"Back to Dashboard"})]})})});const[u,d]=_.useState({}),[f,h]=_.useState(!1),[g,x]=_.useState(null),[y,v]=_.useState(null),[T,k]=_.useState(!1),[b,C]=_.useState(null),{showNotification:E}=ai(),{makeAuthenticatedRequest:j}=zl(),{user:P}=Os(),{startTracking:A,stopTracking:M,getCheatingData:F,clearData:B}=_1("fill_blanks",n,P?.student_id||P?.id);Z_();const V=_.useCallback((te,L)=>{try{let K=te;if(typeof te=="string"&&te.startsWith("{"))try{const R=JSON.parse(te);R.root&&R.root.children&&(K=R.root.children.map(z=>z.children?z.children.map(G=>G.style&&G.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":G.text||"").join(""):"").join(" "))}catch(R){console.error("Error parsing Lexical JSON:",R)}let I=K;L.forEach((R,z)=>{const G=`[${z+1}_________]`;I=I.replace("[BLANK_PLACEHOLDER]",G)});const U=I.split(/(\[\d+_________\])/).map((R,z)=>R.match(/\[\d+_________\]/)?l.jsx("span",{className:"inline-block px-3 py-1 mx-1 bg-purple-100 text-purple-800 border-2 border-purple-400 rounded-lg font-mono font-bold shadow-sm",children:R},z):l.jsx("span",{children:R},z));return l.jsx("div",{className:"prose max-w-none mb-6",children:l.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:U})})}catch(K){return console.error("Error rendering text with blanks:",K),l.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[]),ee=_.useCallback((te,L)=>{try{let K=te;if(typeof te=="string"&&te.startsWith("{"))try{const R=JSON.parse(te);R.root&&R.root.children&&(K=R.root.children.map(z=>z.children?z.children.map(G=>G.style&&G.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":G.text||"").join(""):"").join(" "))}catch(R){console.error("Error parsing Lexical JSON:",R)}const I=[];L.forEach((R,z)=>{const G=u[R.id],X=G?R.options[G.charCodeAt(0)-65]:null,ne=X?l.jsx("span",{className:"inline-block px-3 py-2 bg-green-100 text-green-800 rounded-lg border-2 border-green-400 cursor-pointer hover:bg-green-200 hover:border-green-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(R.id),children:X},z):l.jsxs("span",{className:"inline-block px-3 py-2 bg-purple-100 text-purple-800 rounded-lg border-2 border-purple-400 cursor-pointer hover:bg-purple-200 hover:border-purple-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(R.id),children:[z+1,"_________"]},z);I.push(ne),K=K.replace("[BLANK_PLACEHOLDER]",`__BLANK_${R.id}__`)});const H=K.split(/__BLANK_\d+__/),U=[];for(let R=0;R<H.length;R++)H[R]&&U.push(l.jsx("span",{children:H[R]},`text-${R}`)),R<I.length&&U.push(I[R]);return l.jsx("div",{className:"prose max-w-none mb-6",children:l.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:U})})}catch(K){return console.error("Error rendering text with inline blanks:",K),l.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[u]),ae=_.useCallback((te,L)=>{const K={...u,[te]:L};d(K),c&&c(te,L)},[u,c]),Z=_.useCallback(te=>l.jsx("div",{className:"space-y-6",children:te.map((L,K)=>{const I=L.blank_options||L.options||[];L.correct_answers;const H=L.question_json||L.question||`Blank ${K+1}`;return console.log(` Blank ${K+1} question text:`,H),l.jsxs(zt,{className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",K+1]}),l.jsx("p",{className:"text-gray-600 mb-4",children:H})]}),l.jsx("div",{className:"space-y-3",children:I.filter(U=>U&&U.trim().length>0).map((U,R)=>l.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors",children:[l.jsx("input",{type:"radio",name:`blank_${L.question_id||L.id||K}`,value:String.fromCharCode(65+R),checked:u[L.question_id||L.id||K]===String.fromCharCode(65+R),onChange:z=>ae(L.question_id||L.id||K,z.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),l.jsxs("span",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+R)}),l.jsx("span",{className:"text-gray-700",children:U})]})]},R))})]},L.question_id||L.id||K)})}),[u,ae]);return _.useEffect(()=>{if(n&&P?.student_id){x(new Date),A(),console.log(" Anti-cheating tracking started for fill blanks test");const L=`test_progress_${P.student_id}_fill_blanks_${n}`,K=Ts(L);K&&(d(K.answers||{}),x(new Date(K.startTime)),console.log(" Fill blanks test progress restored:",K))}},[n,P?.student_id,t,A]),_.useEffect(()=>{if(g&&P?.student_id&&n){const te=setInterval(()=>{const L={answers:u,startTime:g.toISOString()},K=`test_progress_${P.student_id}_fill_blanks_${n}`;hs(K,L,as.test_progress),console.log(" Fill blanks progress auto-saved")},3e4);return()=>clearInterval(te)}},[g,u,P?.student_id,n]),_.useEffect(()=>()=>{M(),B(),console.log(" Fill blanks test component unmounted - anti-cheating cleanup")},[M,B]),_.useCallback(async()=>{h(!0);try{const te=t.length;let L=0;t.forEach((Ue,pe)=>{const je=u[Ue.id];je&&je===Ue.correct_answer&&L++});const K=L,I=te;console.log(` Fill Blanks Score: ${K}/${I} (${Math.round(K/I*100)}%)`);const H=new Date,U=g?Math.round((H-g)/1e3):0,R=g?g.toISOString():H.toISOString(),z=F();console.log(" Anti-cheating data for fill blanks submission:",z);const G=P.student_id,X=`retest_assignment_id_${G}_fill_blanks_${n}`,ne=localStorage.getItem(X),{academicCalendarService:q}=await Za(async()=>{const{academicCalendarService:Ue}=await Promise.resolve().then(()=>l3);return{academicCalendarService:Ue}},void 0);await q.loadAcademicCalendar();const ue=q.getCurrentTerm()?.id;if(!ue)throw new Error("No current academic period found");const me={test_id:n,test_name:s,teacher_id:a||null,subject_id:i||null,student_id:G,academic_period_id:ue,parent_test_id:n,retest_assignment_id:ne?Number(ne):null,answers:u,score:K,maxScore:I,time_taken:U,started_at:R,submitted_at:H.toISOString(),caught_cheating:z.caught_cheating,visibility_change_times:z.visibility_change_times};console.log(" Submitting fill blanks test:",me);const ce=await(await j("/.netlify/functions/submit-fill-blanks-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)})).json();if(ce.success){if(E("Test submitted successfully!","success"),M(),B(),console.log(" Anti-cheating tracking stopped and data cleared for fill blanks test"),P?.student_id&&(i1(P.student_id,"fill_blanks",n),console.log(" Fill blanks test data cleared from cache")),!!ne&&P?.student_id){let pe=3;try{const Me=localStorage.getItem(`student_active_tests_${P.student_id}`);if(Me){const $e=JSON.parse(Me)?.tests?.find(St=>St.test_id===n&&St.test_type==="fill_blanks");$e&&(pe=$e.retest_attempts_left||$e.max_attempts||3)}}catch(Me){console.error("Error checking active tests cache:",Me)}const We=(K>0&&I>0?K/I*100:0)>=50;if(We){const Me=`retest_attempt${pe}_${P.student_id}_fill_blanks_${n}`;localStorage.setItem(Me,"true"),console.log(" Passed retest, marking last-slot key:",Me);let Nt=0;for(let At=1;At<=10;At++){const Bt=`retest_attempt${At}_${P.student_id}_fill_blanks_${n}`;localStorage.getItem(Bt)==="true"&&Nt++}const $e=`test_completed_${P.student_id}_fill_blanks_${n}`;localStorage.setItem($e,"true"),console.log(" Marked retest as completed (student passed):",$e);const St=`retest_attempts_${P.student_id}_fill_blanks_${n}`;localStorage.setItem(St,JSON.stringify({used:Nt,max:pe})),console.log(" Set retest attempts metadata (student passed):",St,{used:Nt,max:pe})}else{let Me=1;for(let Bt=1;Bt<=10;Bt++){const Gt=`retest_attempt${Bt}_${P.student_id}_fill_blanks_${n}`;if(localStorage.getItem(Gt)!=="true"){Me=Bt;break}}const Nt=`retest_attempt${Me}_${P.student_id}_fill_blanks_${n}`;localStorage.setItem(Nt,"true"),console.log(" Marked retest attempt as completed:",Nt);let $e=0;for(let Bt=1;Bt<=10;Bt++){const Gt=`retest_attempt${Bt}_${P.student_id}_fill_blanks_${n}`;localStorage.getItem(Gt)==="true"&&$e++}const St=pe-$e,At=St<=0||We;if(console.log(" Retest completion check:",{usedAttempts:$e,maxAttempts:pe,attemptsLeft:St,passed:We,shouldComplete:At}),At){const Bt=`test_completed_${P.student_id}_fill_blanks_${n}`;localStorage.setItem(Bt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",Bt);const Gt=`retest_attempts_${P.student_id}_fill_blanks_${n}`;localStorage.setItem(Gt,JSON.stringify({used:$e,max:pe})),console.log(" Set retest attempts metadata (attempts exhausted):",Gt,{used:$e,max:pe})}}}else if(P?.student_id){const pe=`test_completed_${P.student_id}_fill_blanks_${n}`;localStorage.setItem(pe,"true"),console.log(" Fill blanks test marked as completed in localStorage:",pe)}if(P?.student_id){const pe=`retest1_${G}_fill_blanks_${n}`;localStorage.removeItem(pe),localStorage.removeItem(X)}if(P?.student_id){const pe=`student_results_table_${P.student_id}`;hs(pe,ce,as.student_results_table),console.log(" Fill blanks test results cached with key:",pe)}setShowSubmitModal(!1),setTimeout(()=>{o&&o(K)},2e3)}else throw new Error(ce.message||"Failed to submit test")}catch(te){console.error("Error submitting test:",te),E("Error submitting test. Please try again.","error")}finally{h(!1)}},[u,t,n,s,a,i,g,F,M,B,j,E,o,P]),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:l.jsxs(zt,{children:[f&&l.jsx(zt.Header,{children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[l.jsx(cn,{size:"small"}),l.jsx("span",{children:"Submitting..."})]})})}),l.jsx(zt.Body,{children:r===!0?l.jsxs(l.Fragment,{children:[V(e,t),Z(t)]}):l.jsx(l.Fragment,{children:ee(e,t)})}),r===!1&&y&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Answer"}),l.jsx("div",{className:"space-y-2",children:t.find(te=>te.id===y)?.options.filter(te=>te.trim().length>0).map((te,L)=>l.jsxs("button",{onClick:()=>{ae(y,String.fromCharCode(65+L)),v(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 rounded-lg border border-gray-200",children:[l.jsxs("span",{className:"font-semibold text-blue-600 mr-2",children:[String.fromCharCode(65+L),")"]}),te]},L))}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx(rt,{onClick:()=>v(null),variant:"secondary",size:"sm",children:"Cancel"})})]})}),l.jsx(zt.Footer,{children:l.jsx("div",{className:"flex gap-3"})})]})})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o0e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),eD=e=>{const t=o0e(e);return t.charAt(0).toUpperCase()+t.slice(1)},dH=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),l0e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0e=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},c)=>_.createElement("svg",{ref:c,...c0e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:dH("lucide",s),...!a&&!l0e(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>_.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=(e,t)=>{const r=_.forwardRef(({className:n,...s},a)=>_.createElement(u0e,{ref:a,iconNode:t,className:dH(`lucide-${i0e(eD(e))}`,`lucide-${e}`,n),...s}));return r.displayName=eD(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],f0e=S1("download",d0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],m0e=S1("maximize-2",h0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],p0e=S1("rotate-cw",g0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fH=S1("x",x0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],v0e=S1("zoom-in",y0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],b0e=S1("zoom-out",w0e),Kc={WIDTH:1536,HEIGHT:2048,ASPECT_RATIO:1536/2048},hH={MIN:.25,MAX:1,INITIAL:.25,STEP:.1},Gh={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",ERASER:"eraser"},tD={CURSOR_COLOR:"#ff0000",CURSOR_OPACITY:.3},rD={ERASER_TO_THICKNESS_RATIO:2.5,THICKNESS_TO_ERASER_RATIO:.4},D4={MAX_ENTRIES:10,MAX_MEMORY_KB:500,COMPRESSION_THRESHOLD:200},mH=e=>{try{const t=JSON.stringify(e);return new Blob([t]).size/1024}catch(t){return console.warn("Error calculating memory usage:",t),0}},_0e=e=>Array.isArray(e)?e.map(t=>Array.isArray(t)?S0e(t):t):e,S0e=e=>{if(e.length<=2)return e;const t=[e[0]],r=2;for(let n=1;n<e.length-1;n++){const s=e[n-1],a=e[n];e[n+1],Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))>r&&t.push(a)}return t.push(e[e.length-1]),t},k0e=(e,t=Date.now())=>{const r=mH(e);return{data:[...e],timestamp:t,memoryUsage:r,compressed:r>D4.COMPRESSION_THRESHOLD}},nD=(e,t,r)=>{const n=k0e(t),s=mH(t),a=e.slice(0,r+1);a.push(n);let i=a;return s>D4.MAX_MEMORY_KB&&(i=T0e(a)),i.length>D4.MAX_ENTRIES&&(i=i.slice(-10)),{history:i,index:i.length-1}},T0e=e=>e.map(t=>t.memoryUsage>D4.COMPRESSION_THRESHOLD?{...t,data:_0e(t.data),compressed:!0}:t),sD=(e,t)=>{if(t<0||t>=e.length)return[];const r=e[t];return r?r.compressed?C0e(r.data):[...r.data]:[]},C0e=e=>[...e],aD=e=>e>0,iD=(e,t)=>e<t-1,N0e=()=>({history:[],index:-1}),E0e=()=>{const[e,t]=_.useState({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null}),[r,n]=_.useState([]),[s,a]=_.useState([]),i=_.useCallback(E=>{t(j=>({...j,...E}))},[]),o=_.useCallback(()=>{t({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null})},[]),c=_.useCallback(E=>{const j={x:E.x,y:E.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(P=>({...P,isDrawing:!0,currentLine:[j]})):["line","rectangle","circle"].includes(e.currentTool)&&t(P=>({...P,isDrawing:!0,currentShape:{type:e.currentTool,startX:E.x,startY:E.y,endX:E.x,endY:E.y,color:e.currentColor,thickness:e.currentThickness}}))},[e.currentTool,e.currentColor,e.currentThickness]),u=_.useCallback(E=>{if(!e.isDrawing)return;const j={x:E.x,y:E.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(P=>({...P,currentLine:[...P.currentLine,j]})):e.currentShape&&t(P=>({...P,currentShape:{...P.currentShape,endX:E.x,endY:E.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape]),d=_.useCallback(()=>{if(!e.isDrawing)return;let E=r;if(e.currentTool==="pencil"&&e.currentLine.length>0?(E=[...r,e.currentLine],n(E)):e.currentShape&&(E=[...r,e.currentShape],n(E)),E!==r){const j=nD(e.drawingHistory,E,e.historyIndex);t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:j.history,historyIndex:j.index}))}else t(j=>({...j,isDrawing:!1,currentLine:[],currentShape:null}))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,r,e.drawingHistory,e.historyIndex]),f=_.useCallback(E=>Math.round(E*rD.ERASER_TO_THICKNESS_RATIO),[]),h=_.useCallback(E=>Math.round(E*rD.THICKNESS_TO_ERASER_RATIO),[]),g=_.useCallback(E=>{t(j=>({...j,currentThickness:E,eraserSize:f(E)}))},[f]),x=_.useCallback(E=>{t(j=>({...j,eraserSize:E,currentThickness:h(E)}))},[h]),y=_.useCallback(E=>{const j=nD(e.drawingHistory,E,e.historyIndex);t(P=>({...P,drawingHistory:j.history,historyIndex:j.index}))},[e.drawingHistory,e.historyIndex]),v=_.useCallback(()=>{if(aD(e.historyIndex)){const E=e.historyIndex-1,j=sD(e.drawingHistory,E);n([...j]),t(P=>({...P,historyIndex:E}))}},[e.historyIndex,e.drawingHistory]),T=_.useCallback(()=>{if(iD(e.historyIndex,e.drawingHistory.length)){const E=e.historyIndex+1,j=sD(e.drawingHistory,E);n([...j]),t(P=>({...P,historyIndex:E}))}},[e.historyIndex,e.drawingHistory]),k=_.useCallback(()=>{const E=N0e();t(j=>({...j,drawingHistory:E.history,historyIndex:E.index}))},[]),b=aD(e.historyIndex),C=iD(e.historyIndex,e.drawingHistory.length);return{drawingState:e,setDrawingState:t,drawingData:r,setDrawingData:n,textBoxes:s,setTextBoxes:a,updateDrawingState:i,resetDrawingState:o,startDrawing:c,continueDrawing:u,finishDrawing:d,handleThicknessChange:g,handleEraserSizeChange:x,saveToHistoryState:y,undo:v,redo:T,clearHistoryState:k,canUndoState:b,canRedoState:C}},oD={SCALE_DELTA:.05,CENTER_DELTA:20},bp=e=>{if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2))},wf=e=>{if(e.length<2)return null;const t=e[0],r=e[1];return{x:(t.clientX+r.clientX)/2,y:(t.clientY+r.clientY)/2}},A0e=(e,t)=>{if(e.length!==2||!t)return null;const r=bp(e),n=bp(t),s=wf(e),a=wf(t);if(n===0)return null;const i=Math.abs(r/n-1),o=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return i>oD.SCALE_DELTA?"zoom":o>oD.CENTER_DELTA?"pan":null},j0e=e=>{let t;return function(){const r=arguments,n=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e.apply(n,r),t=null})}},dp=(e,t)=>{const r=t.getPointerPosition();return{x:(r.x-t.x())/t.scaleX(),y:(r.y-t.y())/t.scaleY()}},nc={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",PAN:"pan"},O4={color:"#000000",thickness:2},lD=(e,t,r)=>({x:e.x,y:e.y,color:t||O4.color,thickness:r||O4.thickness}),P0e=(e,t,r,n,s)=>({type:e,startX:t.x,startY:t.y,endX:r.x,endY:r.y,color:n||O4.color,thickness:s||O4.thickness}),gH=(e,t,r,n,s,a)=>{const i=e-r,o=t-n,c=s-r,u=a-n,d=i*c+o*u,f=c*c+u*u;let h=-1;f!==0&&(h=d/f);let g,x;h<0?(g=r,x=n):h>1?(g=s,x=a):(g=r+h*c,x=n+h*u);const y=e-g,v=t-x;return Math.sqrt(y*y+v*v)},M0e=(e,t)=>{if(t.length===0)return[e];const r=t.sort((a,i)=>a.index-i.index),n=[];let s=0;for(const a of r)a.index>s&&n.push(e.slice(s,a.index+1)),s=a.index+1;return s<e.length&&n.push(e.slice(s)),n.filter(a=>a.length>0)},F0e=(e,t,r,n)=>{const s=[],a=r/2;for(let i=0;i<n.length-1;i++){const o=n[i],c=n[i+1],u=gH(e,t,o.x,o.y,c.x,c.y);u<=a&&s.push({index:i,point:{x:o.x,y:o.y},distance:u})}return s},D0e=(e,t,r,n)=>{const s=F0e(t,r,n,e);return s.length===0?[e]:M0e(e,s)},O0e=(e,t,r,n)=>{if(n.type==="rectangle"){const s=Math.min(n.startX,n.endX),a=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),o=Math.abs(n.endY-n.startY);return e>=s&&e<=s+i&&t>=a&&t<=a+o}else if(n.type==="circle"){const s=(n.startX+n.endX)/2,a=(n.startY+n.endY)/2,i=Math.sqrt(Math.pow(n.endX-n.startX,2)+Math.pow(n.endY-n.startY,2))/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-a,2))<=i}return!1},cD=(e,t,r,n)=>{const s=[];for(const a of n)if(Array.isArray(a)){const i=D0e(a,e,t,r);s.push(...i)}else a.type==="line"?gH(e,t,a.startX,a.startY,a.endX,a.endY)>r/2&&s.push(a):(a.type==="rectangle"||a.type==="circle")&&(O0e(e,t,r,a)||s.push(a));return s},R0e=(e,t,r,n,s,a,i,o,c)=>{const[u,d]=_.useState({isActive:!1,type:null,lastDistance:null,lastCenter:null}),f=_.useCallback(j=>{if(j.evt.preventDefault(),j.evt.stopPropagation(),e.currentTool===nc.PAN)return;const P=j.target.getStage(),A=dp(j,P),M=lD(A,e.currentColor,e.currentThickness);e.currentTool===nc.PENCIL?t(F=>({...F,isDrawing:!0,currentLine:[M]})):[nc.LINE,nc.RECTANGLE,nc.CIRCLE].includes(e.currentTool)&&t(F=>({...F,isDrawing:!0,currentShape:P0e(e.currentTool,A,A,e.currentColor,e.currentThickness)}))},[e.currentTool,e.currentColor,e.currentThickness,t]),h=_.useCallback(j=>{const P=cD(j.x,j.y,e.eraserSize,r);n(P),s(P)},[e.eraserSize,r,n,s]),g=_.useCallback(j=>{o&&(a(),y("Undo",j))},[o,a]),x=_.useCallback(j=>{c&&(i(),y("Redo",j))},[c,i]),y=_.useCallback((j,P)=>{const A=P.target.getStage(),M=dp(P,A),F=new Konva.Circle({x:M.x,y:M.y,radius:20,stroke:"#4CAF50",strokeWidth:3,opacity:.8,listening:!1});A.add(F),F.to({scaleX:2,scaleY:2,opacity:0,duration:.3,onFinish:()=>{F.destroy()}})},[]),v=_.useCallback(j=>{if(j.evt.preventDefault(),j.evt.stopPropagation(),!e.isDrawing)return;const P=j.target.getStage(),A=dp(j,P),M=lD(A,e.currentColor,e.currentThickness);e.currentTool===nc.PENCIL?t(F=>({...F,currentLine:[...F.currentLine,M]})):e.currentShape&&t(F=>({...F,currentShape:{...F.currentShape,endX:A.x,endY:A.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape,t]),T=_.useCallback(j=>{j&&j.evt&&(j.evt.preventDefault(),j.evt.stopPropagation()),e.isDrawing&&(e.currentTool===nc.PENCIL&&e.currentLine.length>0?n(P=>[...P,e.currentLine]):e.currentShape&&n(P=>[...P,e.currentShape]),t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null})))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,n,t]),k=_.useCallback(j=>{j.evt.preventDefault(),j.evt.stopPropagation();const P=j.evt.touches;if(P.length===2)d({isActive:!0,type:"pan",lastDistance:bp(P),lastCenter:wf(P)});else if(P.length===1)if(e.currentTool===nc.ERASER){const A=j.target.getStage(),M=dp(j,A);h(M)}else e.currentTool===nc.UNDO?g(j):e.currentTool===nc.REDO?x(j):f(j)},[bp,wf,f,e.currentTool,h,g,x]),b=_.useCallback(j0e(j=>{j.evt.preventDefault(),j.evt.stopPropagation();const P=j.evt.touches;if(P.length===2&&u.isActive){const A=A0e(P,u);if(A==="zoom"){const M=bp(P),F=wf(P),B=M/u.lastDistance,V=Math.max(.25,Math.min(1,e.zoom*B));t(ee=>({...ee,zoom:V,position:{x:F.x-(F.x-ee.position.x)*(V/ee.zoom),y:F.y-(F.y-ee.position.y)*(V/ee.zoom)}}))}else if(A==="pan"){const M=wf(P),F=M.x-u.lastCenter.x,B=M.y-u.lastCenter.y;t(V=>({...V,position:{x:V.position.x+F,y:V.position.y+B}}))}d(M=>({...M,lastDistance:bp(P),lastCenter:wf(P)}))}else if(P.length===1)if(e.currentTool===nc.ERASER){const A=j.target.getStage(),M=dp(j,A),F=cD(M.x,M.y,e.eraserSize,r);n(F)}else if(e.currentTool===nc.PAN){const A=wf(P),M=A.x-u.lastCenter.x,F=A.y-u.lastCenter.y;t(B=>({...B,position:{x:B.position.x+M,y:B.position.y+F}})),d(B=>({...B,lastCenter:A}))}else v(j)}),[u,e.zoom,t,v]),C=_.useCallback(j=>{b(j)},[b]),E=_.useCallback(j=>{j.evt.preventDefault(),j.evt.stopPropagation();const P=j.evt.touches;P.length===0?(T(j),d({isActive:!1,type:null,lastDistance:null,lastCenter:null})):P.length===1&&d(A=>({...A,isActive:!1}))},[T]);return{handleTouchStart:k,handleTouchMove:C,handleTouchEnd:E,handleEraserStart:h,handleUndoTouch:g,handleRedoTouch:x,showTouchFeedback:y}},I0e=(e,t)=>{const[r,n]=_.useState(e.MIN),[s,a]=_.useState({x:0,y:0}),i=_.useCallback((h,g,x)=>{const y=Math.max(e.MIN,Math.min(e.MAX,h));if(g){const v=y/r,T={x:g.x-(g.x-s.x)*v,y:g.y-(g.y-s.y)*v};return{zoom:y,position:T}}else{const v=t.width*y,T=t.height*y,k={x:(x.width-v)/2,y:(x.height-T)/2};return{zoom:y,position:k}}},[r,s,e,t]),o=_.useCallback(()=>{const h=Math.min(r*(1+e.STEP),e.MAX);n(h)},[r,e]),c=_.useCallback(()=>{const h=Math.max(r/(1+e.STEP),e.MIN);n(h)},[r,e]),u=_.useCallback((h,g,x)=>{const y=i(h,g,x);n(y.zoom),a(y.position)},[i]),d=_.useCallback((h,g)=>{a(x=>({x:x.x+h,y:x.y+g}))},[]),f=_.useCallback(()=>{n(e.INITIAL),a({x:0,y:0})},[e.INITIAL]);return{zoom:r,setZoom:n,position:s,setPosition:a,handleZoomIn:o,handleZoomOut:c,handleZoomToPoint:u,handlePan:d,resetZoom:f}},L0e=e=>{const[t,r]=_.useState([]),[n,s]=_.useState(0),a=_.useCallback(f=>{if(console.log("parseDrawingData - input drawing:",f),console.log("parseDrawingData - drawing.answers:",f?.answers),!f?.answers)return console.log("parseDrawingData - no answers found, returning empty array"),[];try{if(typeof f.answers=="string"){console.log("parseDrawingData - parsing string answers");const h=JSON.parse(f.answers);return console.log("parseDrawingData - parsed string result:",h),h&&typeof h=="object"&&h.lines&&console.log("parseDrawingData - new format detected with lines and textBoxes"),h}if(f.answers&&typeof f.answers=="object"&&f.answers.lines)return console.log("parseDrawingData - answers is new format object"),f.answers;if(Array.isArray(f.answers)){if(console.log("parseDrawingData - answers is array"),f.answers.every(g=>typeof g=="string"))try{const g=f.answers.map(x=>{try{return JSON.parse(x)}catch{return x}});return console.log("parseDrawingData - parsed array elements"),g}catch{return console.log("parseDrawingData - failed to parse array elements, returning raw"),f.answers}return f.answers}return console.log("parseDrawingData - answers is neither string nor array, returning empty array"),[]}catch(h){return console.error("Error parsing drawing data:",h),[]}},[]),i=_.useCallback(f=>{if(console.log("processQuestions - input answers:",f),console.log("processQuestions - answers type:",typeof f),console.log("processQuestions - answers isArray:",Array.isArray(f)),f&&typeof f=="object"&&f.lines){console.log("processQuestions - new format detected with lines and textBoxes"),console.log("processQuestions - lines count:",f.lines?.length),console.log("processQuestions - textBoxes count:",f.textBoxes?.length);const g=o(f.lines);return console.log("processQuestions - canvas groups:",g),console.log("processQuestions - number of canvas groups:",g.length),g.map((x,y)=>(console.log(`processQuestions - canvas ${y} strokes:`,x),console.log(`processQuestions - canvas ${y} stroke count:`,x.length),{questionNumber:y+1,drawingData:x,textBoxes:f.textBoxes||[]}))}if(Array.isArray(f)&&f.every(g=>g&&typeof g=="object"&&g.lines))return console.log("processQuestions - array of {lines,textBoxes} detected"),f.map((g,x)=>({questionNumber:x+1,drawingData:g.lines||[],textBoxes:g.textBoxes||[]}));if(!Array.isArray(f))return console.log("processQuestions - answers is not array or object, returning empty array"),[];console.log("processQuestions - processing",f.length,"answers (old format)");const h=o(f);return console.log("processQuestions - canvas groups:",h),console.log("processQuestions - number of canvas groups:",h.length),h.map((g,x)=>(console.log(`processQuestions - canvas ${x} strokes:`,g),console.log(`processQuestions - canvas ${x} stroke count:`,g.length),{questionNumber:x+1,drawingData:g,textBoxes:[]}))},[]),o=_.useCallback(f=>{console.log("groupStrokesByCanvas - input answers:",f);const h=c(f);return console.log("groupStrokesByCanvas - using strategy:",h),h==="by_question_boundary"?u(f):h==="by_stroke_type"?d(f):[f]},[]),c=_.useCallback(f=>{console.log("determineGroupingStrategy - analyzing answers:",f);let h=0,g=0;return f.forEach(x=>{Array.isArray(x)?h++:typeof x=="object"&&g++}),console.log("determineGroupingStrategy - arrayCount:",h,"objectCount:",g),h>0&&g>0?"by_stroke_type":f.length>3?"by_question_boundary":"single_canvas"},[]),u=_.useCallback(f=>{console.log("groupByQuestionBoundary - grouping answers:",f);const h=[];let g=[];const x=Math.ceil(f.length/2);for(let y=0;y<f.length;y++)g.push(f[y]),(y+1)%x===0&&y<f.length-1&&(h.push([...g]),g=[]);return g.length>0&&h.push(g),console.log("groupByQuestionBoundary - result:",h),h},[]),d=_.useCallback(f=>{console.log("groupByStrokeType - grouping answers:",f);const h=[],g=[];f.forEach(y=>{Array.isArray(y)?h.push(y):typeof y=="object"&&g.push(y)});const x=[];return h.length>0&&x.push(h),g.length>0&&x.push(g),console.log("groupByStrokeType - result:",x),x},[]);return _.useEffect(()=>{if(e){console.log("useDataParsing - drawing object:",e),console.log("useDataParsing - drawing.answers:",e.answers),console.log("useDataParsing - drawing.answers type:",typeof e.answers),console.log("useDataParsing - drawing.answers length:",e.answers?.length);const f=a(e);console.log("useDataParsing - parsed answers:",f),console.log("useDataParsing - parsed answers type:",typeof f),console.log("useDataParsing - parsed answers length:",f?.length);const h=i(f);console.log("useDataParsing - processed questions:",h),console.log("useDataParsing - processed questions length:",h?.length),h.length>0&&(console.log("useDataParsing - first question drawingData:",h[0]?.drawingData),console.log("useDataParsing - first question drawingData length:",h[0]?.drawingData?.length)),r(h),s(0)}},[e,a,i]),{questionsData:t,setQuestionsData:r,currentQuestionIndex:n,setCurrentQuestionIndex:s,parseDrawingData:a,processQuestions:i}},uD={MIN:.25,INITIAL:1},B0e=(e,t)=>{const[r,n]=_.useState(!1),[s,a]=_.useState(null),i=_.useCallback(()=>{document.fullscreenElement||(a({zoom:e.zoom,position:{...e.position}}),document.documentElement.requestFullscreen().then(()=>{n(!0),t(c=>({...c,zoom:uD.MIN,position:{x:0,y:0},isFullscreen:!0}))}).catch(c=>{console.error("Error entering fullscreen:",c)}))},[e.zoom,e.position,t]),o=_.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen().then(()=>{n(!1),s?(t(c=>({...c,zoom:s.zoom,position:s.position,isFullscreen:!1})),a(null)):t(c=>({...c,zoom:uD.INITIAL,position:{x:0,y:0},isFullscreen:!1}))}).catch(c=>{console.error("Error exiting fullscreen:",c)})},[s,t]);return{isFullscreen:r,enterFullscreen:i,exitFullscreen:o}},pH=_.forwardRef(({drawingData:e,textBoxes:t=[],drawingState:r,canvasSize:n,zoom:s,position:a,onTouchStart:i,onTouchMove:o,onTouchEnd:c,mousePosition:u,isMouseOverCanvas:d,isEraserDrawing:f},h)=>{const g=_.useRef(null),[x,y]=_.useState(.25),[v,T]=_.useState(null),[k,b]=_.useState({x:0,y:0}),[C,E]=_.useState(!1),j=_.useCallback(({x:H,y:U,size:R,visible:z,isDrawing:G})=>!z||!H||!U?null:l.jsx(Mf,{x:H,y:U,radius:R/2,stroke:tD.CURSOR_COLOR,strokeWidth:2,dash:[5,5],opacity:G?.8:tD.CURSOR_OPACITY,listening:!1,zIndex:1e3}),[]),P=_.useCallback(H=>{if(r.currentTool===Gh.ERASER){const U=H.target.getStage(),R=dp(H,U);b(R)}},[r.currentTool]),A=_.useCallback(()=>{r.currentTool===Gh.ERASER&&E(!0)},[r.currentTool]),M=_.useCallback(()=>{E(!1)},[]);_.useEffect(()=>{const H=h.current;if(H)return H.on("mousemove",P),H.on("mouseenter",A),H.on("mouseleave",M),()=>{H.off("mousemove",P),H.off("mouseenter",A),H.off("mouseleave",M)}},[P,A,M,h]),_.useEffect(()=>{const H=n.width??n.WIDTH,U=n.height??n.HEIGHT,R=()=>{const z=g.current;if(!z)return;const G=z.clientWidth||1,X=z.clientHeight||1,ne=Math.abs(r.rotation%180)===90,q=ne?U:H,se=ne?H:U,ue=Math.min(G/(q||1),X/(se||1));y(Math.min(ue,1))};return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[n.width,n.height,n.WIDTH,n.HEIGHT,r.rotation]);const F=_.useMemo(()=>{const H=g.current;if(!H||!v)return 0;const U=H.clientWidth||1,R=H.clientHeight||1,z=Math.min(U/Math.max(v.width,1),R/Math.max(v.height,1));return Math.min(z,hH.MAX)},[v]),B=_.useMemo(()=>Math.max(s,x||1),[s,x]),V=_.useMemo(()=>{const H=n.width??n.WIDTH,U=n.height??n.HEIGHT;if(!g.current)return{x:0,y:0};const R=g.current.clientWidth||1,z=g.current.clientHeight||1,G=(R-H*B)/2,X=(z-U*B)/2;return s<=x?{x:G,y:X}:{x:a.x!==void 0?a.x:G,y:a.y!==void 0?a.y:X}},[a,s,x,B,n.width,n.height,v,F]);_.useEffect(()=>{if(!Array.isArray(e)||e.length===0){T(null);return}let H=1/0,U=1/0,R=-1/0,z=-1/0;const G=(se,ue)=>{Number.isFinite(se)&&Number.isFinite(ue)&&(se<H&&(H=se),ue<U&&(U=ue),se>R&&(R=se),ue>z&&(z=ue))};if(e.forEach(se=>{if(Array.isArray(se))se.forEach(ue=>G(ue.x,ue.y));else if(se&&typeof se=="object"){if(se.type==="line")G(se.startX,se.startY),G(se.endX,se.endY);else if(se.type==="rectangle")G(se.startX,se.startY),G(se.endX,se.endY);else if(se.type==="circle"){const ue=Math.sqrt(Math.pow(se.endX-se.startX,2)+Math.pow(se.endY-se.startY,2))/2,me=(se.startX+se.endX)/2,Ne=(se.startY+se.endY)/2;G(me-ue,Ne-ue),G(me+ue,Ne+ue)}}}),!Number.isFinite(H)||!Number.isFinite(U)||!Number.isFinite(R)||!Number.isFinite(z)){T(null);return}const X=16,ne=Math.max(1,R-H+X*2),q=Math.max(1,z-U+X*2);T({minX:H-X,minY:U-X,width:ne,height:q})},[e]),_.useEffect(()=>{console.log("CanvasViewer - drawingData:",e),console.log("CanvasViewer - drawingData length:",e?.length),console.log("CanvasViewer - textBoxes:",t),console.log("CanvasViewer - textBoxes length:",t?.length),e&&e.length>0&&console.log("CanvasViewer - first item:",e[0]),t&&t.length>0&&console.log("CanvasViewer - first textBox:",t[0])},[e,t]),_.useEffect(()=>{const H=n.width??n.WIDTH,U=n.height??n.HEIGHT;console.log("CanvasViewer - canvas dimensions:",{width:H,height:U}),console.log("CanvasViewer - zoom:",s,"fitZoom:",x,"displayScale:",B),console.log("CanvasViewer - stagePosition:",V)},[n,s,x,B,V]);const ee=(H,U)=>{if(console.log(`CanvasViewer - rendering element ${U}:`,H),Array.isArray(H))return console.log(`CanvasViewer - rendering line with ${H.length} points`),l.jsx(Ui,{points:H.flatMap(R=>[R.x,R.y]),stroke:H[0]?.color||"#000000",strokeWidth:H[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},U);if(H.type==="line")return l.jsx(Ui,{points:[H.startX,H.startY,H.endX,H.endY],stroke:H.color,strokeWidth:H.thickness,lineCap:"round"},U);if(H.type==="rectangle"){const R=Math.abs(H.endX-H.startX),z=Math.abs(H.endY-H.startY),G=Math.min(H.startX,H.endX),X=Math.min(H.startY,H.endY);return l.jsx(_i,{x:G,y:X,width:R,height:z,stroke:H.color,strokeWidth:H.thickness,fill:"transparent"},U)}else if(H.type==="circle"){const R=Math.sqrt(Math.pow(H.endX-H.startX,2)+Math.pow(H.endY-H.startY,2))/2,z=(H.startX+H.endX)/2,G=(H.startY+H.endY)/2;return l.jsx(Mf,{x:z,y:G,radius:R,stroke:H.color,strokeWidth:H.thickness,fill:"transparent"},U)}return null},ae=()=>{if(!r.isDrawing)return null;if(r.currentTool===Gh.PENCIL&&r.currentLine.length>0)return l.jsx(Ui,{points:r.currentLine.flatMap(H=>[H.x,H.y]),stroke:r.currentColor,strokeWidth:r.currentThickness,tension:.5,lineCap:"round",lineJoin:"round"});if(r.currentShape){const{type:H,startX:U,startY:R,endX:z,endY:G,color:X,thickness:ne}=r.currentShape;if(H===Gh.LINE)return l.jsx(Ui,{points:[U,R,z,G],stroke:X,strokeWidth:ne,lineCap:"round"});if(H===Gh.RECTANGLE){const q=Math.abs(z-U),se=Math.abs(G-R),ue=Math.min(U,z),me=Math.min(R,G);return l.jsx(_i,{x:ue,y:me,width:q,height:se,stroke:X,strokeWidth:ne,fill:"transparent"})}else if(H===Gh.CIRCLE){const q=Math.sqrt(Math.pow(z-U,2)+Math.pow(G-R,2))/2,se=(U+z)/2,ue=(R+G)/2;return l.jsx(Mf,{x:se,y:ue,radius:q,stroke:X,strokeWidth:ne,fill:"transparent"})}}return null},Z=r.isFullscreen?{position:"fixed",inset:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",zIndex:60}:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},te={transform:`rotate(${r.rotation}deg)`,transformOrigin:"center center"},L=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),K=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),I=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]);return l.jsx("div",{style:{...Z,touchAction:"none",WebkitTouchCallout:"none"},ref:g,className:"select-none",onTouchStart:L,onTouchMove:K,onTouchEnd:I,children:l.jsx("div",{style:{...te,touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onTouchStart:L,onTouchMove:K,onTouchEnd:I,children:l.jsx(bm,{ref:h,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),scaleX:B,scaleY:B,x:V.x,y:V.y,onTouchStart:i,onTouchMove:o,onTouchEnd:c,children:l.jsxs(wm,{children:[l.jsx(_i,{x:0,y:0,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),fill:"white"}),e.map((H,U)=>(console.log(`CanvasViewer - mapping item ${U}:`,H),ee(H,U))),t&&t.map((H,U)=>l.jsx(_i,{x:H.x,y:H.y,width:H.width,height:H.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}},`textbox-${U}`)),t&&t.map((H,U)=>l.jsx($u,{x:H.x+8,y:H.y+8,width:H.width-16,height:H.height-16,text:H.text,fontSize:H.fontSize||14,fill:H.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"},`text-${U}`)),ae(),r.currentTool===Gh.ERASER&&l.jsx(j,{x:k.x,y:k.y,size:r.eraserSize,visible:C,isDrawing:f})]})})})})});pH.displayName="CanvasViewer";function $0e({containerRef:e,canvasSize:t,rotation:r=0}){const[n,s]=_.useState(1),[a,i]=_.useState({x:0,y:0}),o=_.useRef({width:1,height:1}),c=_.useRef(.01),u=_.useRef(0),d=_.useRef(!1),f=_.useCallback(()=>{const C=t?.width??t?.WIDTH??0,E=t?.height??t?.HEIGHT??0,j=Math.abs(r%180)===90;return{width:j?E:C,height:j?C:E}},[t,r]),h=_.useCallback(()=>{const C=e?.current;if(!C)return{width:1,height:1};const E=C.clientWidth||1,j=C.clientHeight||1;return o.current={width:E,height:j},{width:E,height:j}},[e]),g=_.useCallback(()=>{const{width:C,height:E}=o.current,{width:j,height:P}=f(),A=C/Math.max(j,1),M=E/Math.max(P,1);return Math.min(A,M,1)*.98},[f]),x=_.useCallback(C=>{const{width:E,height:j}=o.current,{width:P,height:A}=f(),M=Math.max(c.current,Math.min(C,1.5));let F=(E-P*M)/2,B=(j-A*M)/2;const V=E-P*M,ee=j-A*M;F=Math.min(Math.max(0,F),Math.max(0,V)),B=Math.min(Math.max(0,B),Math.max(0,ee));try{console.log("[Camera] centerAtScale",{targetScale:C,clampedScale:M,container:{containerW:E,containerH:j},canvas:{canvasW:P,canvasH:A},translate:{x:F,y:B},rotation:r})}catch{}i({x:F,y:B}),s(M)},[f]),y=_.useCallback(()=>{const{width:C,height:E}=h(),{width:j,height:P}=f(),A=g();let M=(C-j*A)/2,F=(E-P*A)/2;const B=C-j*A,V=E-P*A;M=Math.min(Math.max(0,M),Math.max(0,B)),F=Math.min(Math.max(0,F),Math.max(0,V));try{console.log("[Camera] fitCanvas",{scale:A,container:{containerW:C,containerH:E},canvas:{canvasW:j,canvasH:P},translate:{x:M,y:F},rotation:r})}catch{}s(A),i({x:M,y:F}),c.current=A,d.current=!1},[f,h,g]),v=_.useCallback(()=>{const{width:C,height:E}=h(),{width:j,height:P}=f(),A=(C-j)/2,M=(E-P)/2;s(1),i({x:A,y:M})},[f,h]),T=_.useCallback((C,E)=>{const{width:j,height:P}=o.current,{width:A,height:M}=f(),F=Math.max(c.current,Math.min(C,1.5));if(E&&Number.isFinite(E.x)&&Number.isFinite(E.y)){const B={x:(E.x-a.x)/n,y:(E.y-a.y)/n},V=E.x-B.x*F,ee=E.y-B.y*F;try{console.log("[Camera] zoomTo(pointer) ->",{from:n,to:F})}catch{}s(F),i({x:V,y:ee}),u.current=Date.now()+400,d.current=!0}else{let B=(j-A*F)/2,V=(P-M*F)/2;const ee=j-A*F,ae=P-M*F;B=Math.min(Math.max(0,B),Math.max(0,ee)),V=Math.min(Math.max(0,V),Math.max(0,ae));try{console.log("[Camera] zoomTo(center) ->",{from:n,to:F})}catch{}s(F),i({x:B,y:V}),u.current=Date.now()+400,d.current=!0}},[f,n,a]),k=_.useCallback((C,E)=>{const j=n*C,{width:P,height:A}=o.current,M={x:P/2,y:A/2};T(j,E||M)},[n,T]),b=_.useCallback((C,E)=>{i(j=>({x:j.x+C,y:j.y+E})),u.current=Date.now()+200,d.current=!0},[]);return _.useEffect(()=>{const C=e?.current;if(!C)return;const E=new ResizeObserver(()=>{h();const j=g();if(c.current=j,!(Date.now()<u.current)&&!d.current){try{console.log("[Camera] resize centerAtScale",{scale:n})}catch{}x(n)}});return E.observe(C),h(),()=>E.disconnect()},[e,h,g,x,n]),_.useEffect(()=>{d.current=!1,c.current=g(),x(n)},[r,t?.width,t?.height,t?.WIDTH,t?.HEIGHT,g,x,n]),_.useMemo(()=>({scale:n,translate:a,setScale:s,setTranslate:i,centerAtScale:x,fitCanvas:y,oneToOne:v,zoomTo:T,zoomByFactor:k,panBy:b}),[n,a,x,y,v,T,k,b])}const _y=new Map,xH=_.forwardRef(({drawingData:e,textBoxes:t=[],canvasSize:r,rotation:n=0,onScaleChange:s,persistKey:a="viewer",onTextBoxEdit:i},o)=>{const c=_.useRef(null),u=_.useRef(null),d=$0e({containerRef:c,canvasSize:r,rotation:n}),[f,h]=_.useState({width:1,height:1}),g=_.useRef(null),x=_.useRef(null),[y,v]=_.useState(null);_.useEffect(()=>{console.log("[ViewerCanvas] drawingData received:",e),console.log("[ViewerCanvas] drawingData length:",e?.length),e&&e.length>0&&console.log("[ViewerCanvas] First drawing element:",e[0]),console.log("[ViewerCanvas] textBoxes:",t),console.log("[ViewerCanvas] textBoxes length:",t?.length)},[e]),_.useEffect(()=>{typeof s=="function"&&s(d.scale);try{console.log("[ViewerCanvas] scale changed",{scale:d.scale})}catch{}if(a){const I=_y.get(a)||{};_y.set(a,{...I,scale:d.scale})}},[d.scale,s]),_.useEffect(()=>{if(a){const I=_y.get(a)||{};_y.set(a,{...I,translate:{x:d.translate.x,y:d.translate.y}})}},[a,d.translate.x,d.translate.y]),_.useImperativeHandle(o,()=>({zoomIn:I=>d.zoomByFactor(1.1,I),zoomOut:I=>d.zoomByFactor(1/1.1,I),fitCanvas:()=>d.fitCanvas(),oneToOne:()=>d.oneToOne(),getScale:()=>d.scale,getStage:()=>u.current,getPointerPosition:()=>u.current?.getPointerPosition?.(),exportPNGFullCanvas:()=>{const I=u.current;if(!I)return null;const H=r?.width??r?.WIDTH??1536,U=r?.height??r?.HEIGHT??2048,R={scaleX:I.scaleX(),scaleY:I.scaleY(),x:I.x(),y:I.y(),width:I.width(),height:I.height()},z=g.current,G=x.current,X=z?{x:z.x(),y:z.y(),scaleX:z.scaleX(),scaleY:z.scaleY()}:null,ne=G?{x:G.x(),y:G.y(),rotation:G.rotation()}:null;try{return I.scale({x:1,y:1}),I.position({x:0,y:0}),I.size({width:H,height:U}),z&&(z.position({x:0,y:0}),z.scale({x:1,y:1})),G&&(G.position({x:0,y:0}),G.rotation(0)),I.batchDraw(),I.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:H,height:U})}finally{G&&ne&&(G.position({x:ne.x,y:ne.y}),G.rotation(ne.rotation)),z&&X&&(z.position({x:X.x,y:X.y}),z.scale({x:X.scaleX,y:X.scaleY})),I.scale({x:R.scaleX,y:R.scaleY}),I.position({x:R.x,y:R.y}),I.size({width:R.width,height:R.height}),I.batchDraw()}}}),[d]),_.useEffect(()=>{const I=c.current;if(!I)return;const H=()=>{h({width:I.clientWidth||1,height:I.clientHeight||1})};H();const U=new ResizeObserver(H);return U.observe(I),()=>U.disconnect()},[]),_.useEffect(()=>{if(!Array.isArray(e)||e.length===0){v(null);return}let I=1/0,H=1/0,U=-1/0,R=-1/0;const z=(q,se)=>{Number.isFinite(q)&&Number.isFinite(se)&&(q<I&&(I=q),se<H&&(H=se),q>U&&(U=q),se>R&&(R=se))};if(e.forEach(q=>{if(Array.isArray(q))q.forEach(se=>z(se.x,se.y));else if(q&&typeof q=="object"){if(q.type==="line")z(q.startX,q.startY),z(q.endX,q.endY);else if(q.type==="rectangle")z(q.startX,q.startY),z(q.endX,q.endY);else if(q.type==="circle"){const se=Math.hypot(q.endX-q.startX,q.endY-q.startY)/2,ue=(q.startX+q.endX)/2,me=(q.startY+q.endY)/2;z(ue-se,me-se),z(ue+se,me+se)}}}),!Number.isFinite(I)||!Number.isFinite(H)||!Number.isFinite(U)||!Number.isFinite(R)){v(null);return}const G=16,X=Math.max(1,U-I+G*2),ne=Math.max(1,R-H+G*2);v({minX:I-G,minY:H-G,width:X,height:ne,centerX:I-G+X/2,centerY:H-G+ne/2})},[e]);const T=_.useMemo(()=>{if(!y)return{scale:1,x:0,y:0};const I=r?.width??r?.WIDTH??1536,H=r?.height??r?.HEIGHT??2048,U=Math.min(I/Math.max(1,y.width),H/Math.max(1,y.height),1),R=y.width*U,z=y.height*U,G=(I-R)/2,X=(H-z)/2,ne=G-y.minX*U,q=X-y.minY*U;return{scale:U,x:ne,y:q}},[y,r?.width,r?.height,r?.WIDTH,r?.HEIGHT]),k=_.useRef(!1);_.useEffect(()=>{if(k.current)return;const I=a?_y.get(a):null;I&&Number.isFinite(I.scale)&&I.translate&&Number.isFinite(I.translate.x)&&Number.isFinite(I.translate.y)?(d.setScale(I.scale),d.setTranslate(I.translate)):d.fitCanvas(),k.current=!0},[a,d]),_.useEffect(()=>{try{console.log("[ViewerCanvas] rotation changed",{rotation:n,scale:d.scale,translate:d.translate})}catch{}d.fitCanvas()},[n]),_.useEffect(()=>{d.centerAtScale(d.scale)},[n]);const b=I=>{I.evt.preventDefault();const H=u.current;if(!H)return;const U=H.getPointerPosition(),R=Math.pow(1.0015,-I.evt.deltaY);d.zoomByFactor(R,U)},C=_.useRef(!1),E=_.useRef({x:0,y:0}),j=()=>{const I=c.current;if(!I)return 1;const H=I.clientWidth||1,U=I.clientHeight||1,R=r?.width??r?.WIDTH??1,z=r?.height??r?.HEIGHT??1,G=Math.abs(n%180)===90,X=G?z:R,ne=G?R:z,q=Math.min(H/X,U/ne);return Math.min(q,1)},P=I=>{const H=j();d.scale<=H||(C.current=!0,E.current={x:I.evt.clientX,y:I.evt.clientY})},A=I=>{if(!C.current)return;const H=I.evt.clientX-E.current.x,U=I.evt.clientY-E.current.y;E.current={x:I.evt.clientX,y:I.evt.clientY},d.panBy(H,U)},M=()=>{C.current=!1},F=1536,B=2048,V=(I,H)=>{if(console.log(`[ViewerCanvas] Rendering drawing element ${H}:`,I),Array.isArray(I))return console.log(`[ViewerCanvas] Array item with ${I.length} points:`,I.slice(0,3)),l.jsx(Ui,{points:I.flatMap(U=>[U.x,U.y]),stroke:I[0]?.color||"#000000",strokeWidth:I[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},H);if(I?.type==="line")return l.jsx(Ui,{points:[I.startX,I.startY,I.endX,I.endY],stroke:I.color,strokeWidth:I.thickness,lineCap:"round"},H);if(I?.type==="rectangle"){const U=Math.abs(I.endX-I.startX),R=Math.abs(I.endY-I.startY),z=Math.min(I.startX,I.endX),G=Math.min(I.startY,I.endY);return l.jsx(_i,{x:z,y:G,width:U,height:R,stroke:I.color,strokeWidth:I.thickness,fill:"transparent"},H)}else if(I?.type==="circle"){const U=Math.sqrt(Math.pow(I.endX-I.startX,2)+Math.pow(I.endY-I.startY,2))/2,R=(I.startX+I.endX)/2,z=(I.startY+I.endY)/2;return l.jsx(Mf,{x:R,y:z,radius:U,stroke:I.color,strokeWidth:I.thickness,fill:"transparent"},H)}return null},ee=_.useRef(new Map),ae=_.useRef(null),Z=_.useRef({x:0,y:0}),te=_.useCallback(I=>{const H=c.current;H&&(H.setPointerCapture?.(I.pointerId),ee.current.set(I.pointerId,{x:I.clientX,y:I.clientY}),E.current={x:I.clientX,y:I.clientY})},[]),L=_.useCallback(I=>{const H=ee.current;if(H.has(I.pointerId)){if(H.set(I.pointerId,{x:I.clientX,y:I.clientY}),H.size===2){const U=Array.from(H.values()),R=U[1].x-U[0].x,z=U[1].y-U[0].y,G=Math.hypot(R,z),X={x:(U[0].x+U[1].x)/2,y:(U[0].y+U[1].y)/2},ne=u.current,q=ne&&ne.getPointerPosition()||X;if(ae.current!=null){const se=G/Math.max(1,ae.current);d.zoomByFactor(se,q)}ae.current=G,Z.current=q}else if(H.size===1){const U=j();if(d.scale<=U)return;const R=I.clientX-E.current.x,z=I.clientY-E.current.y;E.current={x:I.clientX,y:I.clientY},d.panBy(R,z)}}},[]),K=_.useCallback(I=>{const H=c.current;H&&(H.releasePointerCapture?.(I.pointerId),ee.current.delete(I.pointerId),ee.current.size<2&&(ae.current=null),C.current=!1)},[]);return l.jsx("div",{ref:c,style:{width:"100%",height:"100%",display:"block",backgroundColor:"transparent",touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onPointerDown:te,onPointerMove:L,onPointerUp:K,children:l.jsx(bm,{ref:u,width:f.width,height:f.height,onWheel:b,onMouseDown:P,onMouseMove:A,onMouseUp:M,onMouseLeave:M,children:l.jsx(wm,{children:l.jsx(tu,{ref:g,x:d.translate.x,y:d.translate.y,scaleX:d.scale,scaleY:d.scale,children:(()=>{const I=(n%360+360)%360;let H=0,U=0;I===90?H=B:I===180?(H=F,U=B):I===270&&(U=F);try{console.log("[ViewerCanvas] rotatedGroup offset",{rotation:n,norm:I,tx:H,ty:U,canvasW:F,canvasH:B})}catch{}return l.jsxs(tu,{ref:x,x:H,y:U,rotation:n,children:[l.jsx(_i,{x:0,y:0,width:F,height:B,fill:"white"}),l.jsxs(tu,{x:T.x,y:T.y,scaleX:T.scale,scaleY:T.scale,children:[Array.isArray(e)?(console.log("[ViewerCanvas] Rendering",e.length,"drawing elements"),e.map((R,z)=>V(R,z))):null,Array.isArray(t)&&t.map((R,z)=>l.jsxs(tu,{x:R.x,y:R.y,children:[l.jsx(_i,{width:R.width,height:R.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}}),l.jsx($u,{text:R.text,x:8,y:8,width:Math.max(0,(R.width||0)-16),height:Math.max(0,(R.height||0)-16),fontSize:R.fontSize||14,fill:R.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"})]},`tb-${z}`))]})]})})()})})})})});xH.displayName="ViewerCanvas";const z0e=({zoom:e,onZoomIn:t,onZoomOut:r,onRotate:n,onDownload:s,onFullscreen:a,isFullscreen:i})=>l.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-center justify-center",children:[l.jsx(rt,{onClick:t,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom In",children:l.jsx(v0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(rt,{onClick:r,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom Out",children:l.jsx(b0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(rt,{onClick:n,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Rotate",children:l.jsx(p0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(rt,{onClick:s,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Download",children:l.jsx(f0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(rt,{onClick:a,variant:"secondary",size:"icon",className:"w-10 h-10",title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?l.jsx(fH,{className:"w-4 h-4 mx-auto my-auto"}):l.jsx(m0e,{className:"w-4 h-4 mx-auto my-auto"})})]}),U0e=({currentQuestion:e,totalQuestions:t,onPrevious:r,onNext:n,drawingDataLength:s})=>t<=1?null:l.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(rt,{onClick:r,disabled:e===0,variant:"outline",size:"sm",children:"Previous"}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",e+1," of ",t]}),l.jsx(rt,{onClick:n,disabled:e===t-1,variant:"outline",size:"sm",children:"Next"})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:[s," lines"]})]})}),yH=({drawing:e,isOpen:t,onClose:r,onScoreChange:n,onMaxScoreChange:s,isTeacherView:a=!1,onSaveScore:i})=>{const{drawingState:o,setDrawingState:c,drawingData:u,setDrawingData:d,textBoxes:f,setTextBoxes:h,saveToHistoryState:g,undo:x,redo:y,canUndoState:v,canRedoState:T}=E0e(),{questionsData:k,currentQuestionIndex:b,setCurrentQuestionIndex:C}=L0e(e),{zoom:E,position:j,handleZoomIn:P,handleZoomOut:A}=I0e(hH,Kc),{isFullscreen:M,enterFullscreen:F,exitFullscreen:B}=B0e(o,c),{handleTouchStart:V,handleTouchMove:ee,handleTouchEnd:ae}=R0e(o,c,u,d,g,x,y,v,T),Z=_.useRef(null),te=_.useRef(null),[L,K]=_.useState(1),[I,H]=_.useState(""),[U,R]=_.useState("");_.useEffect(()=>{if(console.log("DrawingModal - questionsData:",k),console.log("DrawingModal - currentQuestionIndex:",b),k.length>0){const me=k[b]?.drawingData||[],Ne=k[b]?.textBoxes||[];console.log("DrawingModal - setting drawingData:",me),console.log("DrawingModal - setting textBoxes:",Ne),d(me),h(Ne)}},[k,b,d,h]),_.useEffect(()=>{t&&e&&(H((Number.isFinite(e.score)?e.score:0).toString()),R("10"))},[t,e]);const z=()=>{b>0&&C(b-1)},G=()=>{b<k.length-1&&C(b+1)},X=()=>{v&&x()},ne=()=>{T&&y()};_.useEffect(()=>{const me=Ne=>{(Ne.ctrlKey||Ne.metaKey)&&(Ne.key==="z"&&!Ne.shiftKey?(Ne.preventDefault(),X()):(Ne.key==="y"||Ne.key==="z"&&Ne.shiftKey)&&(Ne.preventDefault(),ne()))};return document.addEventListener("keydown",me),()=>document.removeEventListener("keydown",me)},[X,ne]);const q=()=>{c(me=>({...me,rotation:(me.rotation+90)%360}))},se=()=>{if(a&&te.current){const Ue=te.current.exportPNGFullCanvas();if(!Ue)return;const pe=document.createElement("a");pe.href=Ue,pe.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe);return}const me=Z.current;if(!me)return;const Ne=me.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:Kc.WIDTH,height:Kc.HEIGHT}),ce=document.createElement("a");ce.href=Ne,ce.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},ue=async()=>{if(!a)return r();const me=parseInt(I,10),Ne=10;Number.isFinite(me)&&(typeof i=="function"?await i({resultId:e.id,score:Math.max(0,Math.min(10,me)),maxScore:Ne}):(n&&n(e.id,me),s&&s(e.id,Ne))),r()};return!t||!e?null:l.jsx(il,{children:l.jsx(dt.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:l.jsxs(dt.div,{className:"bg-white rounded-lg shadow-xl max-w-4xl h-[90vh] w-full mx-4 flex flex-col select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:me=>me.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Drawing Submission"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," ",e.surname," - ",e.test_name]})]}),l.jsx(rt,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:l.jsx(fH,{className:"w-5 h-5"})})]}),k.length>1&&l.jsx(U0e,{currentQuestion:b,totalQuestions:k.length,onPrevious:z,onNext:G,drawingDataLength:k[b]?.drawingData?.length||0}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[l.jsxs("div",{className:"flex-1 min-h-0 relative overflow-hidden bg-gray-100 p-0 sm:p-4 select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},children:[a?l.jsx(xH,{ref:te,drawingData:u,textBoxes:f,canvasSize:{width:Kc.WIDTH,height:Kc.HEIGHT,WIDTH:Kc.WIDTH,HEIGHT:Kc.HEIGHT},rotation:o.rotation,onScaleChange:K}):l.jsx(pH,{ref:Z,drawingData:u,textBoxes:f,drawingState:o,canvasSize:{width:Kc.WIDTH,height:Kc.HEIGHT,WIDTH:Kc.WIDTH,HEIGHT:Kc.HEIGHT},zoom:E,position:j,onTouchStart:V,onTouchMove:ee,onTouchEnd:ae,mousePosition:{x:0,y:0},isMouseOverCanvas:!1,isEraserDrawing:!1}),l.jsx(z0e,{zoom:a?L:E,onZoomIn:()=>{if(a&&te.current){try{console.log("[ZoomButton] ZoomIn click (teacher)",{before:te.current.getScale?.()})}catch{}te.current.zoomIn(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomIn after",{after:te.current.getScale?.()})}catch{}},0)}else P()},onZoomOut:()=>{if(a&&te.current){try{console.log("[ZoomButton] ZoomOut click (teacher)",{before:te.current.getScale?.()})}catch{}te.current.zoomOut(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomOut after",{after:te.current.getScale?.()})}catch{}},0)}else A()},onRotate:q,onDownload:se,onFullscreen:M?B:F,isFullscreen:M}),l.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800 bg-opacity-70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round((a?L:E)*100),"%"]})]}),a&&l.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Score:"}),l.jsx("input",{type:"number",min:"0",max:10,value:I,onChange:me=>H(me.target.value),className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max:"}),l.jsx("input",{type:"number",value:10,disabled:!0,className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),l.jsx(rt,{onClick:ue,variant:"primary",size:"sm",children:"Save"})]})})]})]})})})},vH=({testType:e,testId:t,studentAnswers:r,onBackToCabinet:n,compact:s=!1,showAll:a=!1,onToggleShowAll:i,maxInitial:o=3})=>{const c=Wo(),{user:u,isAuthenticated:d}=Os(),{testResults:f,loadTestResults:h}=b2(),[g,x]=_.useState(!0),[y,v]=_.useState(""),[T,k]=_.useState([]),[b,C]=_.useState([]),[E,j]=_.useState(null),[P,A]=_.useState([]),[M,F]=_.useState(0),[B,V]=_.useState(0),[ee,ae]=_.useState(!1),[Z,te]=_.useState(null),L=_.useCallback(q=>{const se=q.best_retest_score||q.score,ue=q.best_retest_max_score||q.max_score,me=Math.round(se/ue*100);return{score:se,maxScore:ue,percentage:me}},[]);_.useEffect(()=>{K()},[e,t]),_.useEffect(()=>{!e&&!t&&(f&&f.results?(be.debug(" Using cached test results from TestContext"),C(f.results),x(!1)):H())},[e,t,f]);const K=_.useCallback(async()=>{be.debug(" Initializing Student Results...");try{if(x(!0),v(""),!d||!u){be.debug(" User not authenticated"),v("User not authenticated");return}if(u.role!==Ro.STUDENT){be.error(" Invalid user role for student results:",u.role),v("Access denied. Student role required.");return}be.debug(" Loading test results..."),await h(u?.student_id||u?.id||""),e&&t&&r&&(be.debug(" Loading specific test results..."),await I(e,t,r)),be.debug(" Student Results initialization complete!")}catch(q){be.error(" Error initializing student results:",q),v("Failed to initialize student results")}finally{x(!1)}},[d,u,e,t,r,h]),I=_.useCallback(async(q,se,ue)=>{be.debug(" Loading specific test results:",q,se);try{const me=await Sn.getTestInfo(q,se);be.debug(" Test info loaded:",me),j(me);const Ne=await Sn.getTestQuestions(q,se);be.debug(" Test questions loaded:",Ne),A(Ne);const ce=Rf(Ne,ue,q).score,Ue=Ne.length>0?Math.round(ce/Ne.length*100):0;F(ce),V(Ue),be.debug(" Test results calculated:",{score:ce,percentage:Ue})}catch(me){throw be.error(" Error loading specific test results:",me),me}},[]),H=_.useCallback(async(q=0)=>{be.debug(" Loading all student results using existing test results API...",q>0?`(retry ${q})`:"");try{if(!(u?.student_id||u?.sub))throw new Error("Student ID not found");const ue=await Sn.getStudentTestResults();if(ue.success){be.debug(" All student results loaded:",ue.results.length,"results");const me=ue.results.map(Ne=>({...Ne,caught_cheating:Ne.caught_cheating||!1,visibility_change_times:Ne.visibility_change_times||0}));C(me),te(new Date),ue.results.length===0&&q===0&&(be.debug(" No results found, retrying in 2 seconds..."),setTimeout(()=>{H(1)},2e3))}else throw new Error(ue.error||"Failed to load student results")}catch(se){be.error(" Error loading all student results:",se),v(se.message)}},[u]),U=_.useCallback(q=>({"Listening and Speaking":"L&S","Reading and Writing":"R&W","English for Career":"Eng for Career","Science Fundamental":"Science F","Science Supplementary":"Science S","Math Fundamental":"Math F","Math Supplementary":"Math S","English for Communication":"Eng for Comm"})[q]||q,[]),R=_.useCallback(q=>{if(!q||q.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No results available"})});const se=a?q:q.slice(0,o);return l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),l.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),l.jsx("th",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.map((ue,me)=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs font-medium text-gray-900",children:l.jsx("span",{className:"bg-blue-100 text-blue-800 px-0.5 sm:px-2 py-0.5 rounded text-xs",children:U(ue.subject)})}),l.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-12 sm:max-w-none",children:ue.teacher_name}),l.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-16 sm:max-w-none",children:ue.test_name}),l.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500",children:l.jsx("div",{className:"flex flex-col items-center space-y-1",children:ue.test_type==="drawing"?ue.score!==null?l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Ne,maxScore:ce,percentage:Ue}=L(ue);return Ue>=80?"bg-green-100 text-green-800":Ue>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Ne,maxScore:ce,percentage:Ue}=L(ue);return`${Ne}/${ce} (${Ue}%)`})()}):l.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):ue.test_type==="speaking"?ue.score!==null?l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Ne,maxScore:ce,percentage:Ue}=L(ue);return Ue>=80?"bg-green-100 text-green-800":Ue>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Ne,maxScore:ce,percentage:Ue}=L(ue);return`${Ne}/${ce} (${Ue}%)`})()}):l.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Ne,maxScore:ce,percentage:Ue}=L(ue);return Ue>=80?"bg-green-100 text-green-800":Ue>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Ne,maxScore:ce,percentage:Ue}=L(ue);return`${Ne}/${ce} (${Ue}%)`})()})})}),l.jsx("td",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:new Date(ue.submitted_at).toLocaleDateString()})]},me))})]}),q.length>o&&i&&l.jsx("div",{className:"text-center pt-4",children:l.jsx("button",{onClick:i,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a?"Show Less":`Show ${q.length-o} More`})})]})},[U,a,o,i]),z=_.useCallback((q,se)=>{if(be.debug(" formatAnswer called with:",{answer:q,testType:se,answerType:typeof q}),!q)return"No answer";switch(se){case"true_false":const ue=typeof q=="boolean"?q:q==="true";return be.debug(" Boolean answer processed:",ue),ue?"True":"False";case"multiple_choice":return q.toUpperCase();case"input":return q;case"word_matching":return typeof q=="object"?Object.entries(q).map(([me,Ne])=>`${me}  ${Ne}`).join(", "):q;case"drawing":return"Drawing submitted";default:return q}},[]),G=_.useCallback(()=>!E||!P||!r?null:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Test Results: ",E.test_name||E.title||"Test"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600",children:M}),l.jsx("p",{className:"text-sm text-gray-500",children:"Correct Answers"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-900",children:P.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Total Questions"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-3xl font-bold ${B>=80?"text-green-600":B>=60?"text-yellow-600":"text-red-600"}`,children:[B,"%"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Score"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions Review"}),l.jsx("div",{className:"space-y-4",children:P.map((q,se)=>{const ue=r[se],me=Ev(q,e),Ne=Vp(q,ue,e);return l.jsxs("div",{className:`border rounded-lg p-4 ${Ne?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("h4",{className:"font-medium text-gray-900",children:["Question ",se+1]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ne?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Ne?"Correct":"Incorrect"})]}),l.jsx("p",{className:"text-gray-700 mb-3",children:q.question}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Your Answer:"}),l.jsx("p",{className:"text-sm text-gray-900",children:z(ue,e)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Correct Answer:"}),l.jsx("p",{className:"text-sm text-gray-900",children:z(me,e)})]})]})]},se)})})]})]}),[E,P,r,e,M,B,Ev,Vp,z]),X=_.useCallback(()=>{if(!b||b.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No test results available yet."})});const q={};return b.forEach(se=>{const ue=se.subject||"Unknown Subject";q[ue]||(q[ue]=[]),q[ue].push(se)}),l.jsx("div",{className:"space-y-6",children:Object.entries(q).map(([se,ue])=>l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:se})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ue.map((me,Ne)=>{const{score:ce,maxScore:Ue,percentage:pe}=L(me),je=pe>=80?"text-green-600":pe>=60?"text-yellow-600":"text-red-600";return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:me.test_name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:me.teacher_name||"Unknown"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:je,children:[ce,"/",Ue," (",pe,"%)"]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(me.submitted_at).toLocaleDateString()})]},Ne)})})]})})]},se))})},[b]);_.useCallback(()=>{be.debug(" Clearing test data and returning to cabinet..."),j(null),A([]),setStudentAnswers(null),F(0),V(0),ae(!1),n?n():c("/student")},[n,c]);const ne=_.useCallback(()=>{be.debug(" Navigating back to cabinet..."),n?n():c("/student")},[n,c]);return _.useCallback((q,se)=>{const ue={id:Date.now(),message:q,type:se,timestamp:new Date};k(me=>[...me,ue]),setTimeout(()=>{k(me=>me.filter(Ne=>Ne.id!==ue.id))},Xm.NOTIFICATION_DURATION)},[]),g?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Student Results..."})]})}):y?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:y}),l.jsx(rt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?l.jsxs("div",{children:[g?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(cn,{size:"md"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Loading results..."})]}):y?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-red-500 text-4xl mb-2",children:""}),l.jsx("p",{className:"text-red-600",children:y})]}):R(b),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(q=>l.jsx(ou,{type:q.type,message:q.message,onClose:()=>k(se=>se.filter(ue=>ue.id!==q.id))},q.id))})]}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Results"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",Z?Z.toLocaleString():"Never"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[E&&l.jsx(rt,{variant:"outline",onClick:()=>ae(!ee),children:ee?"Hide Details":"Show Details"}),l.jsx(rt,{variant:"outline",onClick:ne,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:ee&&E?G():X()}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(q=>l.jsx(ou,{type:q.type,message:q.message,onClose:()=>k(se=>se.filter(ue=>ue.id!==q.id))},q.id))}),selectedDrawing&&l.jsx(yH,{drawing:selectedDrawing,isOpen:isDrawingModalOpen,onClose:()=>setIsDrawingModalOpen(!1)})]})},W0e=({isMenuOpen:e,onToggleMenu:t,onShowPasswordChange:r})=>{const n=Wo(),s=y0(),{user:a,isAuthenticated:i,logout:o}=Os(),{studentData:c,loadStudentData:u}=o3(),{activeTests:d,testResults:f,loadActiveTests:h,loadTestResults:g,viewTestDetails:x,testDetailsModal:y,closeTestDetailsModal:v}=b2();_.useEffect(()=>{be.debug(" [DEBUG] StudentCabinet mounted/rendered, location:",s.pathname)},[s.pathname]);const[T,k]=_.useState(!0),[b,C]=_.useState(""),[E,j]=_.useState([]),[P,A]=_.useState(null),[M,F]=_.useState(!1),[B,V]=_.useState(null),[ee,ae]=_.useState(null),[Z,te]=_.useState(new Set),[L,K]=_.useState(!1),[I,H]=_.useState(!1),[U,R]=_.useState(!1),[z,G]=_.useState(!1);_.useEffect(()=>{X()},[]),_.useEffect(()=>()=>{R(!1)},[]),_.useEffect(()=>{if(U){const pe=setTimeout(()=>{R(!1)},1e3);return()=>clearTimeout(pe)}},[U]);const X=_.useCallback(async()=>{be.debug(" Initializing Student Cabinet...");try{if(k(!0),C(""),!i||!a){be.debug(" User not authenticated, redirecting to login"),n("/login");return}if(a.role!==Ro.STUDENT){be.error(" Invalid user role for student cabinet:",a.role),C("Access denied. Student role required.");return}be.debug(" Loading active tests (single API call)...");const pe=a?.student_id||a?.id||"";if(ne(pe)){be.debug(" Cache refresh triggered - clearing cache");try{const We=`student_active_tests_${pe}`,Me=`student_results_table_${pe}`;localStorage.removeItem(We),localStorage.removeItem(Me)}catch{}}else be.debug(" Using cached active tests (background revalidation will keep data fresh)");await h(pe),be.debug(" Student Cabinet initialization complete!")}catch(pe){be.error(" Error initializing student cabinet:",pe),C("Failed to initialize student cabinet")}finally{k(!1)}},[i,a,n]),ne=_.useCallback(pe=>{if(window.studentCabinetRefreshRequested)return window.studentCabinetRefreshRequested=!1,be.debug(" Manual refresh requested"),!0;if(window.recentTestCompleted)return window.recentTestCompleted=!1,be.debug(" Test completed - cache refresh triggered"),!0;const je=localStorage.getItem(`last_cabinet_refresh_${pe}`);if(je&&Date.now()-parseInt(je)>300*1e3)return be.debug(" Time-based refresh triggered"),!0;try{for(let We=0;We<localStorage.length;We++){const Me=localStorage.key(We);if(Me&&Me.startsWith(`retest_assignment_id_${pe}_`))return be.debug(" Retest assignment key detected, forcing cache refresh:",Me),!0}}catch{}return be.debug(" No refresh triggers - using existing cache"),!1},[]);_.useCallback(async()=>{be.debug(" Calculating average score...");try{if(f&&f.length>0){const pe=f.reduce((We,Me)=>{const Nt=Me.best_retest_score||Me.score,$e=Me.best_retest_max_score||Me.max_score;return typeof Nt=="number"&&typeof $e=="number"&&$e>0?We+Math.round(Nt/$e*100):We},0),je=Math.round(pe/f.length);ae(je),be.debug(" Average score calculated:",je)}}catch(pe){be.error(" Error calculating average score:",pe)}},[f]),_.useEffect(()=>{if(U){be.debug(" Skipping completed tests initialization during navigation");return}const pe=a?.student_id||a?.id;if(!pe){be.debug(" Student ID not available yet, skipping localStorage initialization");return}const je=new Set;for(let We=0;We<localStorage.length;We++){const Me=localStorage.key(We);if(Me&&Me.startsWith(`test_completed_${pe}_`)&&localStorage.getItem(Me)==="true"){const $e=Me.replace(`test_completed_${pe}_`,"").split("_");if($e.length>=2){const St=$e[0],At=$e.slice(1).join("_"),Bt=`${St}_${At}`;je.add(Bt),be.debug(" Found completed test in localStorage:",Bt)}}}te(je),G(!0),be.debug(" Initialized completed tests from localStorage:",Array.from(je))},[a?.student_id,a?.id,U]),_.useEffect(()=>{be.debug(" testResults structure:",f);const pe=f?.results||f;if(be.debug(" resultsArray:",pe),pe&&pe.length>0){const je=a?.student_id||a?.id||"",We=new Set;pe.forEach(Me=>{const Nt=`${Me.test_type}_${Me.test_id}`;We.add(Nt),localStorage.setItem(`test_completed_${je}_${Me.test_type}_${Me.test_id}`,"true")}),te(Me=>{const Nt=new Set([...Me,...We]);return be.debug(" Updated completed tests (merged):",Array.from(Nt)),Nt})}},[f,a?.student_id,a?.id]);const q=_.useCallback(async(pe,je,We=!1,Me=null)=>{be.debug(" Checking test completion:",pe,je,"retestAvailable:",We);try{const Nt=a?.student_id||a?.id||"";if(We){be.debug(" Retest available from backend, checking attempt limits.");const Bt=`retest_attempts_${Nt}_${pe}_${je}`;let Gt;try{const kt=localStorage.getItem(Bt);Gt=kt?JSON.parse(kt):void 0}catch(kt){be.warn(" Failed to parse attempts metadata:",kt)}const or=[];for(let kt=1;kt<=10;kt++){const Wt=`retest_attempt${kt}_${Nt}_${pe}_${je}`;localStorage.getItem(Wt)==="true"&&or.push(Wt)}const yr=or.length,it=typeof Me?.retest_attempts_left=="number"?Me.retest_attempts_left:void 0,Ve=typeof Me?.retest_attempt_number=="number"?Me.retest_attempt_number:void 0,at=typeof Me?.retest_max_attempts=="number"?Me.retest_max_attempts:void 0;if(it===0)return be.debug(" API reports no attempts left. Retest considered completed."),!0;const pt=at??(it!=null&&Ve!=null?it+Ve:Gt?.max??3),nt=Gt?.used??yr;return be.debug(" Retest check:",{attemptsMeta:Gt,attemptKeys:or,usedAttempts:nt,totalAttempts:pt,attemptsLeftFromApi:it,retriesRemaining:it??pt-nt}),nt>=pt?(be.debug(" Maximum retest attempts reached (meta/localStorage)."),!0):(be.debug(" Retest attempts available, allowing start."),!1)}const $e=`test_completed_${Nt}_${pe}_${je}`,St=localStorage.getItem($e);if(be.debug(" localStorage key:",$e),be.debug(" localStorage value:",St),pe==="word_matching"){be.debug(" Debug: All localStorage keys for student",Nt);for(let Bt=0;Bt<localStorage.length;Bt++){const Gt=localStorage.key(Bt);Gt&&Gt.includes(Nt)&&Gt.includes("word_matching")&&be.debug(" Found word_matching key:",Gt,"=",localStorage.getItem(Gt))}}if(St==="true")return be.debug(" Found completion status in local storage:",St),!0;const At=f?.results||f;return At&&At.length>0&&(be.debug(" Checking database results:",At.length,"results"),At.some(Gt=>(be.debug(" Checking result:",Gt.test_type,Gt.test_id,"vs",pe,je),Gt.test_type===pe&&Gt.test_id===je)))?(be.debug(" Found completion status in database results"),localStorage.setItem($e,"true"),!0):(be.debug(" Test not completed according to local storage or database"),!1)}catch(Nt){return be.error(" Error checking test completion:",Nt),!1}},[f,a?.student_id,a?.id]),se=_.useCallback((pe,je)=>{const We={id:Date.now(),message:pe,type:je,timestamp:new Date};j(Me=>[...Me,We]),setTimeout(()=>{j(Me=>Me.filter(Nt=>Nt.id!==We.id))},Xm.NOTIFICATION_DURATION)},[]),ue=_.useCallback(async pe=>{be.debug(" Showing test details:",pe);try{await x(pe.test_type,pe.test_id,pe.test_name)}catch(je){be.error("Error loading test details:",je),se("Failed to load test details","error")}},[x,se]),me=_.useCallback(pe=>{be.debug(" Starting test:",pe);const je=`${pe.test_type}_${pe.test_id}`;if(Z.has(je)&&!pe?.retest_available){se("This test has already been completed","warning");return}if(be.debug(" Checking retest conditions:"),be.debug(" test.retest_available:",pe?.retest_available),be.debug(" testKey:",je),be.debug(" completedTests.has(testKey):",Z.has(je)),be.debug(" completedTests:",Array.from(Z)),pe?.retest_available&&!pe?.retest_is_completed){const We=a?.student_id||a?.id||"",Me=`retest1_${We}_${pe.test_type}_${pe.test_id}`;localStorage.setItem(Me,"true"),be.debug(" Set retest key:",Me);const Nt=`retest_in_progress_${We}_${pe.test_type}_${pe.test_id}`;localStorage.setItem(Nt,"1"),be.debug(" Set in-progress retest lock:",Nt);try{const $e=`anti_cheating_${We}_${pe.test_type}_${pe.test_id}`;localStorage.removeItem($e);const St=`speaking_test_data_${We}_${pe.test_id}`;localStorage.removeItem(St);const At=`speaking_progress_${pe.test_id}`;localStorage.removeItem(At);const Bt=`_${We}_${pe.test_type}_${pe.test_id}`,Gt=[];for(let yr=0;yr<localStorage.length;yr++){const it=localStorage.key(yr);it&&(it.startsWith("retest_attempt")||(it.endsWith(Bt)||it.includes(`answers_${We}_${pe.test_type}_${pe.test_id}`)||it.includes(`progress_${We}_${pe.test_type}_${pe.test_id}`)||it.includes(`state_${We}_${pe.test_type}_${pe.test_id}`)||it.includes(`selected_${We}_${pe.test_type}_${pe.test_id}`))&&Gt.push(it))}Gt.forEach(yr=>localStorage.removeItem(yr)),be.debug(" Cleared generic cached keys for retest start:",Gt);const or=`retest_attempts_${We}_${pe.test_type}_${pe.test_id}`;be.debug(" Cleared per-test cached keys for retest start:",{antiCheatKey:$e,speakingCacheKey:St,speakingProgressKey:At})}catch{}if(be.debug(" Test retest_assignment_id:",pe.retest_assignment_id),be.debug(" Test retest_assignment_id type:",typeof pe.retest_assignment_id),pe?.retest_assignment_id){const $e=`retest_assignment_id_${We}_${pe.test_type}_${pe.test_id}`;localStorage.setItem($e,String(pe.retest_assignment_id)),be.debug(" Set retest assignment ID:",$e,"=",pe.retest_assignment_id)}else be.debug(" No retest assignment ID found in test data")}else be.debug(" Retest assignment ID storage skipped - retest not available");if(R(!0),be.debug(" Set isStartingTest to true for test:",pe.test_type),pe.test_type==="matching_type"){be.debug(" Redirecting to matching test page for testId:",pe.test_id),n(`/student/matching-test/${pe.test_id}`);return}if(pe.test_type==="word_matching"){be.debug(" Redirecting to word matching test page for testId:",pe.test_id),n(`/student/word-matching-test/${pe.test_id}`);return}if(pe.test_type==="speaking"){be.debug(" Redirecting to speaking test page for testId:",pe.test_id),n(`/student/speaking-test/${pe.test_id}`);return}n(`/student/test/${pe.test_type}/${pe.test_id}`)},[n,Z,se,a?.student_id,a?.id]),Ne=_.useCallback(()=>{K(pe=>!pe)},[]),ce=_.useCallback(()=>{H(pe=>!pe)},[]),Ue=_.useCallback(async pe=>{if(be.debug(" Starting test:",pe),U){be.debug(" Test already starting, ignoring click");return}try{if(await q(pe.test_type,pe.test_id,pe?.retest_available,pe)){se("This test has already been completed","warning");return}me(pe)}catch(je){be.error(" Error starting test:",je),se("Failed to start test. Please try again.","error")}},[q,me,se,U]);return _.useCallback(pe=>{be.debug(" Viewing test details:",pe),ue(pe)},[ue]),T?l.jsx(dt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.jsxs(dt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx(cn,{size:"lg"}),l.jsx(dt.p,{className:"mt-4 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:"Loading Student Cabinet..."})]})}):b?l.jsx(dt.div,{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.jsx(dt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:l.jsxs(dt.div,{className:"bg-white border border-red-200 rounded-xl p-8 max-w-md shadow-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.3},children:[l.jsx(dt.div,{className:"text-4xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3,type:"spring"},children:""}),l.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Cabinet Error"}),l.jsx("p",{className:"text-red-600 mb-6",children:b}),l.jsx(rt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):(be.debug(" [DEBUG] StudentCabinet rendering, location:",s.pathname,"isLoading:",T),l.jsxs(dt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(dt.div,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-6",children:[l.jsxs(dt.div,{className:"flex items-center space-x-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(dt.div,{className:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:l.jsx("span",{className:"text-white font-semibold text-xl",children:a?.name?.charAt(0)||"S"})})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white",children:[a?.name," ",a?.surname]}),l.jsxs("p",{className:"text-blue-100 text-sm sm:text-base md:text-lg",children:["Grade ",a?.grade," - Class ",a?.class]})]})]}),l.jsxs(dt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsxs("button",{onClick:t,className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",style:{zIndex:1e3},children:[l.jsx("span",{className:"hidden sm:inline",children:"Menu"}),l.jsx(dt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:e?180:0},transition:{duration:.2},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),l.jsx(il,{children:e&&l.jsx(dt.div,{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:l.jsxs("div",{className:"py-2",children:[l.jsx(dt.button,{onClick:r,className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),l.jsx(dt.button,{onClick:()=>{t(),o()},className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),l.jsxs(dt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:l.jsx("div",{className:"lg:col-span-1 space-y-6",children:ee!==null&&l.jsx(dt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.5},children:l.jsxs(zt,{children:[l.jsx(zt.Header,{children:l.jsx(zt.Title,{children:"Average Score"})}),l.jsx(zt.Body,{children:l.jsxs(dt.div,{className:"text-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.8,duration:.3},children:[l.jsxs(dt.div,{className:"text-4xl font-bold text-blue-600 mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5,type:"spring"},children:[ee,"%"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Overall Performance"})]})})]})})})}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsxs(zt,{children:[l.jsx(zt.Header,{children:l.jsx(zt.Title,{className:"text-center",children:"Active Tests"})}),l.jsx(zt.Body,{children:d&&d.length>0?l.jsxs("div",{className:"relative",children:[be.debug(" Rendering overlay, isStartingTest:",U),U&&l.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg border-2 border-blue-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Starting test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait..."})]})}),l.jsxs("div",{className:"space-y-4",children:[(L?d:d.slice(0,3)).map((pe,je)=>l.jsx(dt.div,{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:L?0:.7+je*.1,duration:.3},whileHover:{scale:1.02},children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"sm:hidden",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1 break-words leading-tight",children:pe.test_name}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[l.jsx("span",{children:pe.teacher_name}),l.jsx("span",{children:""}),l.jsx("span",{children:new Date(pe.assigned_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})})]})]}),l.jsxs("div",{className:"hidden sm:flex items-center space-x-3 text-sm",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 break-words leading-tight",children:pe.test_name}),l.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:pe.subject}),l.jsx("span",{className:"text-gray-500",children:pe.teacher_name}),l.jsx("span",{className:"text-gray-500",children:new Date(pe.assigned_at).toLocaleDateString()})]})]}),l.jsx("div",{className:"flex space-x-2 ml-4",children:(()=>{const We=`${pe.test_type}_${pe.test_id}`,Me=Z.has(We);let Nt=!1;if(typeof window<"u"&&pe?.retest_available){const $e=a?.student_id||a?.id||"";if($e)try{const St=`test_completed_${$e}_${pe.test_type}_${pe.test_id}`,At=localStorage.getItem(St)==="true",Bt=`retest_attempts_${$e}_${pe.test_type}_${pe.test_id}`;let Gt;const or=localStorage.getItem(Bt);if(or)try{Gt=JSON.parse(or)}catch(pt){be.warn(" Failed to parse retest attempts metadata in render:",pt)}let yr=typeof Gt?.used=="number"?Gt.used:void 0;if(yr==null){let pt=0;for(let nt=1;nt<=10;nt++){const kt=`retest_attempt${nt}_${$e}_${pe.test_type}_${pe.test_id}`;localStorage.getItem(kt)==="true"&&pt++}yr=pt}const it=typeof pe?.retest_attempts_left=="number"?pe.retest_attempts_left:void 0,at=(typeof pe?.retest_max_attempts=="number"?pe.retest_max_attempts:void 0)??(Gt?.max!=null?Gt.max:it!=null&&typeof pe?.retest_attempt_number=="number"?it+pe.retest_attempt_number:void 0);(it===0||at!=null&&yr!=null&&yr>=at||At&&it==null&&at==null)&&(Nt=!0)}catch(St){be.warn(" Failed to evaluate local retest completion:",St)}}return z?pe?.retest_is_completed||Nt?l.jsx(rt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):pe?.retest_available&&!pe?.retest_is_completed&&!Nt?(pe.retest_attempts_left||0)>0?l.jsx(rt,{variant:"primary",size:"sm",onClick:()=>Ue(pe),disabled:U,children:"Start Retest"}):l.jsx(rt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):Me?l.jsx(rt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):(be.debug(" Button render, isStartingTest:",U,"test:",pe.test_type),l.jsx(rt,{variant:"primary",size:"sm",onClick:()=>Ue(pe),disabled:U,children:"Start Test"})):l.jsx(rt,{variant:"secondary",size:"sm",disabled:!0,className:"bg-gray-100 text-gray-500 border-gray-200",children:"Loading..."})})()})]})},`${pe.test_type}_${pe.test_id}`)),d.length>3&&l.jsx("div",{className:"text-center pt-2",children:l.jsx("button",{onClick:Ne,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:L?"Show Less":`Show ${d.length-3} More`})})]})]}):l.jsxs(dt.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.3},children:[l.jsx(dt.img,{src:"/pics/no-tests.png",alt:"No active tests",className:"w-24 h-24 mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.5,type:"spring"}}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Active Tests"})]})})]})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:l.jsxs(zt,{children:[l.jsx(zt.Header,{children:l.jsx(zt.Title,{children:"Test Results"})}),l.jsx(zt.Body,{children:f&&f.showResults?l.jsx(_2,{testResults:f,onBackToCabinet:()=>{setTestResults(null)},onRetakeTest:(pe,je)=>{h(),setTestResults(null)},isLoading:T}):l.jsx(vH,{compact:!0,showAll:I,onToggleShowAll:ce,maxInitial:3})})]})})]})]}),l.jsx(Q7,{isOpen:y.isOpen,onClose:v,testType:y.testType,testId:y.testId,testName:y.testName,questions:y.questions||[],isLoading:y.isLoading||!1}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:E.map(pe=>l.jsx(ou,{type:pe.type,message:pe.message,onClose:()=>j(je=>je.filter(We=>We.id!==pe.id))},pe.id))})]},s.pathname))},H0e=({testInfo:e,questions:t,testType:r,studentAnswers:n,onBackToCabinet:s,checkAnswerCorrectness:a,formatStudentAnswerForDisplay:i,getCorrectAnswer:o,caughtCheating:c=!1})=>{const[u,d]=_.useState(0),[f,h]=_.useState(0),[g,x]=_.useState(!0);if(_.useEffect(()=>{const T=()=>{try{const k=Rf(t,n,r).score,b=e?.num_questions||t?.length||0,C=b>0?Math.round(k/b*100):0;d(k),h(C),x(!1)}catch(k){console.error("Error calculating test results:",k),d(0),h(0),x(!1)}};t&&t.length>0?T():x(!1)},[t,n,r,e,Rf]),g)return l.jsx("div",{className:"flex justify-center items-center min-h-64",children:l.jsx("div",{className:"text-lg",children:"Calculating results..."})});const y=e?.num_questions||t?.length||0,v=e?.test_name||e?.title||"Test";return l.jsxs("div",{className:"test-results-page max-w-4xl mx-auto p-6 overflow-y-auto min-h-screen",children:[l.jsx(zt,{className:"mb-6",children:l.jsxs("div",{className:"results-header text-center",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Test Results: ",v]}),l.jsx("p",{className:"text-gray-600",children:r==="matching_type"?"Matching Test":r==="multiple_choice"?"Multiple Choice Test":r==="true_false"?"True/False Test":r==="input"?"Input Test":r==="drawing"?"Drawing Test":"Test"})]})}),c&&l.jsx(zt,{className:"mb-6 border-2 border-red-500 bg-red-50",children:l.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:"text-red-700",children:"Suspicious activity was detected during this test. Your teacher has been notified."})})]})}),l.jsx(zt,{className:"mb-6",children:l.jsxs("div",{className:"results-summary",children:[l.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:["Your Score: ",u," / ",y," (",f,"%)"]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:l.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${f>=80?"bg-green-500":f>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${f}%`}})}),l.jsx("div",{className:"text-center",children:l.jsx("p",{className:`text-lg font-medium ${f>=80?"text-green-600":f>=60?"text-yellow-600":"text-red-600"}`,children:f>=80?"Excellent!":f>=60?"Good job!":"Keep practicing!"})})]})}),t&&t.length>0&&l.jsx(zt,{className:"mb-6",children:l.jsxs("div",{className:"questions-review",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Question Review"}),l.jsx("div",{className:"space-y-4",children:t.map((T,k)=>{const b=n[String(T.question_id)]||"No answer",C=a(T,b,r);return l.jsxs("div",{className:`question-review p-4 rounded-lg border-2 ${C?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[l.jsxs("div",{className:"question-review-header flex justify-between items-start mb-3",children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-800",children:["Question ",k+1]}),l.jsx("span",{className:`text-2xl font-bold ${C?"text-green-600":"text-red-600"}`,children:C?"":""})]}),l.jsx("div",{className:"question-text mb-3",children:l.jsx("p",{className:"text-gray-700 font-medium",children:T.question})}),l.jsxs("div",{className:"answer-section space-y-2",children:[l.jsxs("p",{className:"student-answer",children:[l.jsx("strong",{className:"text-gray-600",children:"Your Answer:"})," ",l.jsx("span",{className:`font-medium ${C?"text-green-700":"text-red-700"}`,children:i(b,r,T)})]}),!C&&l.jsxs("p",{className:"correct-answer",children:[l.jsx("strong",{className:"text-gray-600",children:"Correct Answer:"})," ",l.jsx("span",{className:"text-green-700 font-medium",children:r==="multiple_choice"?String(T.correct_answer||"").toUpperCase():i(o(T,r),r,T)})]})]})]},T.question_id||k)})})]})}),l.jsx(zt,{children:l.jsx("div",{className:"results-actions text-center",children:l.jsx(rt,{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-medium",children:"Back to Cabinet"})})})]})};class G0e{constructor(){this.activeRequests=new Map,this.completedRequests=new Map,this.maxCacheSize=100,this.cacheTimeout=3e4}generateKey(t,r,n={}){const s=Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{});return`${t}_${r}_${JSON.stringify(s)}`}isRequestInProgress(t){return this.activeRequests.has(t)}getCachedResult(t){const r=this.completedRequests.get(t);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.result:null}startRequest(t,r){return this.activeRequests.set(t,r),r.finally(()=>{this.activeRequests.delete(t)}),r}cacheResult(t,r){if(this.completedRequests.size>=this.maxCacheSize){const n=this.completedRequests.keys().next().value;this.completedRequests.delete(n)}this.completedRequests.set(t,{result:r,timestamp:Date.now()})}async deduplicateApiCall(t,r,n,s){const a=this.generateKey(t,r,n);if(this.isRequestInProgress(a))return console.log(" API deduplication: Request already in progress, waiting...",a),this.activeRequests.get(a);const i=this.getCachedResult(a);if(i)return console.log(" API deduplication: Using cached result",a),i;console.log(" API deduplication: Making new request",a);const o=this.startRequest(a,s());try{const c=await o;return this.cacheResult(a,c),c}catch(c){throw c}}clearCache(){this.activeRequests.clear(),this.completedRequests.clear(),console.log(" API deduplication: Cache cleared")}}const dD=new G0e,V0e=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(null,n),t)}},q0e=({onBackToCabinet:e,currentTest:t})=>{const r=Wo(),n=y0(),{user:s,isAuthenticated:a}=Os(),{activeTests:i,loadActiveTests:o}=b2(),c=_.useCallback(V0e((He,Ct,le)=>{try{if(window.skipInitialProgressSave&&le.answers&&le.answers.length===0){be.debug(" Skipping empty progress save during restoration"),window.skipInitialProgressSave=!1;return}const ge=`test_progress_${s?.student_id||s?.id||"unknown"}_${He}_${Ct}`,we=localStorage.getItem(ge);if(we&&le.answers&&le.answers.length===0)try{const Te=JSON.parse(we);if(Te.answers&&Te.answers.length>0){be.debug(" Skipping empty progress save - existing progress is better:",Te.answers);return}}catch{}localStorage.setItem(ge,JSON.stringify(le)),be.debug(`Saved test progress for ${He}_${Ct}:`,le)}catch(ve){be.error("Error saving test progress:",ve)}},1e3),[s?.student_id,s?.id]),u=_.useCallback((He,Ct,le)=>{c(He,Ct,le)},[c]),d=_.useCallback((He,Ct)=>{try{const ve=`test_progress_${s?.student_id||s?.id||"unknown"}_${He}_${Ct}`,ge=localStorage.getItem(ve);return ge?JSON.parse(ge):null}catch(le){return be.error("Error getting test progress:",le),null}},[s?.student_id,s?.id]),f=_.useCallback((He,Ct)=>{try{const le=s?.student_id||s?.id||"unknown",ve=`test_progress_${le}_${He}_${Ct}`;localStorage.removeItem(ve);for(let ge=0;ge<localStorage.length;ge++){const we=localStorage.key(ge);we&&we.startsWith(`test_progress_${le}_${He}_${Ct}_`)&&(localStorage.removeItem(we),be.debug(` Cleared individual question key: ${we}`))}be.debug(`Cleared test progress for ${He}_${Ct}`)}catch(le){be.error("Error clearing test progress:",le)}},[s?.student_id,s?.id]),[h,g]=_.useState(!0),[x,y]=_.useState(!1),[v,T]=_.useState(""),[k,b]=_.useState(!1),[C,E]=_.useState(""),[j,P]=_.useState([]),[A,M]=_.useState(t?"test":"list"),[F,B]=_.useState(null),[V,ee]=_.useState(null),[ae,Z]=_.useState(null),[te,L]=_.useState([]),[K,I]=_.useState([]),[H,U]=_.useState(0),[R,z]=_.useState(0),[G,X]=_.useState(null),ne=zs.useRef(null),q=zs.useRef(null),[se,ue]=_.useState(!1),[me,Ne]=_.useState(!1),[ce,Ue]=_.useState(null),[pe,je]=_.useState(null),[We,Me]=_.useState(!1),[Nt,$e]=_.useState(!1),[St,At]=_.useState(!1),[Bt,Gt]=_.useState(!1),or=_.useRef(null);w2(Bt,_.useCallback(({confirm:He,cancel:Ct})=>{or.current={confirm:He,cancel:Ct},$e(!0)},[])),_.useEffect(()=>{(A==="test"||A==="results")&&F?Gt(!0):(Gt(!1),or.current=null)},[A,F]);const[yr,it]=_.useState({isInitialized:!1,initializationId:null,lastTestId:null,initializationCount:0}),[Ve,at]=_.useState({isRestored:!1,restoredTestId:null,restorationCount:0}),{startTracking:pt,stopTracking:nt,getCheatingData:kt,clearData:Wt,isCheating:rr,tabSwitches:ur}=_1(F?.test_type,F?.test_id,s?.student_id||s?.id);_.useEffect(()=>{(()=>{const Ct=[];for(let le=0;le<localStorage.length;le++){const ve=localStorage.key(le);if(ve&&ve.startsWith("test_progress_")&&!ve.includes("_51712_")&&!ve.includes("_51736_")){const ge=ve.split("_");ge.length===4&&ge[0]==="test"&&ge[1]==="progress"&&Ct.push(ve)}}Ct.forEach(le=>{localStorage.removeItem(le),be.debug(" Cleared old cache key:",le)})})()},[]);const Nr=_.useCallback(()=>{const He=F?.test_id,Ct=s?.student_id||s?.id;if(!Ct||!He)return be.debug(" Skipping initialization - missing required data:",{studentId:Ct,currentTestId:He}),!1;const le=`${Ct}_${He}_${Date.now()}`;return yr.isInitialized&&yr.lastTestId===He?(be.debug(" Already initialized for this test - skipping"),!1):yr.initializationId?(be.debug(" Initialization in progress - skipping duplicate"),!1):(be.debug(" Starting initialization:",le),it({isInitialized:!1,initializationId:le,lastTestId:He}),!0)},[yr,F,s?.student_id,s?.id]),wr=_.useCallback(()=>{it(He=>({...He,isInitialized:!0,initializationId:null})),be.debug(" Initialization completed")},[]),ft=_.useCallback(async()=>{be.debug(" Initializing Student Tests...");try{if(g(!0),E(""),!a||!s){be.debug(" User not authenticated"),E("User not authenticated");return}if(s.role!==Ro.STUDENT){be.error(" Invalid user role for student tests:",s.role),E("Access denied. Student role required.");return}be.debug(" Loading active tests..."),await o(),wr(),be.debug(" Student Tests initialization complete!")}catch(He){be.error(" Error initializing student tests:",He),E("Failed to initialize student tests")}finally{g(!1)}},[a,s,o,wr]);_.useEffect(()=>{Nr()&&ft()},[Nr,ft]),_.useEffect(()=>{t&&(be.debug(" Auto-starting test from prop:",t),b(!0),he(t))},[t]),_.useCallback(async()=>{be.debug(" Loading student active tests...");try{const He=await Sn.getActiveTests();be.debug(" Active tests loaded:",He);const Ct=He.map(le=>({...le,subject_id:le.subject_id||le.subjectId,teacher_id:le.teacher_id||le.teacherId,is_active:le.is_active!==void 0?le.is_active:!0,created_at:le.created_at||le.createdAt,updated_at:le.updated_at||le.updatedAt}));return je(new Date),Ct}catch(He){throw be.error(" Error loading active tests:",He),He}},[]),_.useCallback(async(He,Ct)=>{be.debug(" Checking test completion:",He,Ct);try{const le=d(He,Ct);return le&&le.completed}catch(le){return be.error(" Error checking test completion:",le),!1}},[d]),_.useEffect(()=>{if(te.length>0&&F?.test_id){const He=setTimeout(()=>{let Ct=!1;const le=new Array(te.length).fill("");if(te.forEach((ve,ge)=>{const Te=`test_progress_${s?.student_id||s?.id||"unknown"}_${V}_${F?.test_id}_${ve.question_id}`,Se=localStorage.getItem(Te);if(Se){const Ze=Se.replace(/^"(.*)"$/,"$1");le[ge]=Ze,Ct=!0}}),Ct){I(le);const ve=le.filter(we=>we&&typeof we=="string"&&we.trim()!=="").length,ge=te.length>0?ve/te.length*100:0;U(ge)}},100);return()=>clearTimeout(He)}},[te,V,F?.test_id]);const Tt=_.useCallback(async(He,Ct)=>{be.debug(" Marking test as completed:",He,Ct);try{const le=d(He,Ct)||{};le.completed=!0,le.completedAt=new Date().toISOString(),u(He,Ct,le);const ge=`test_completed_${s?.student_id||s?.id||""}_${He}_${Ct}`;localStorage.setItem(ge,"true"),be.debug(" Test completion marked in localStorage:",ge),be.debug(" localStorage value after setting:",localStorage.getItem(ge)),ct("Test marked as completed","success")}catch(le){be.error(" Error marking test as completed:",le),ct("Failed to mark test as completed","error")}},[d,u]),Ot=_.useCallback(He=>{be.debug(" Showing test details:",He),Ue(He),Ne(!0)},[]),he=_.useCallback(async He=>{be.debug(" Starting test:",He);let Ct=Date.now(),le;try{T(""),y(!0),Ct=Date.now();const ve=()=>{const ar=Date.now()-Ct,Fr=Math.max(0,250-ar);setTimeout(()=>{g(!1),y(!1)},Fr)};let ge=!1;le=setTimeout(()=>{ge=!0,T("Loading is taking longer than expected...")},15e3);const Te=`test_completed_${s?.student_id||s?.id||""}_${He.test_type}_${He.test_id}`,Se=localStorage.getItem(Te)==="true";if(Se&&!He?.retest_available){be.debug(" Test already completed, redirecting to main cabinet"),ct("This test has already been completed","info"),r("/student");return}if(Se&&He?.retest_available&&be.debug(" Test completed but retest available, allowing retest"),He.test_type===rs.MATCHING){be.debug(" Redirecting to matching test page for testId:",He.test_id),r(`/student/matching-test/${He.test_id}`);return}if(He.test_type===rs.WORD_MATCHING){be.debug(" Redirecting to word matching test page for testId:",He.test_id),r(`/student/word-matching-test/${He.test_id}`);return}B(He),ee(He.test_type),at({isRestored:!1,restoredTestId:null,restorationCount:0});const[Ze,ut]=await Promise.all([dD.deduplicateApiCall("GET",`test-info-${He.test_type}-${He.test_id}`,{testType:He.test_type,testId:He.test_id},()=>Sn.getTestInfo(He.test_type,He.test_id)),dD.deduplicateApiCall("GET",`test-questions-${He.test_type}-${He.test_id}`,{testType:He.test_type,testId:He.test_id},()=>Sn.getTestQuestions(He.test_type,He.test_id))]);Z(Ze);let Je=ut;try{if(!!Ze?.is_shuffled){const Ur=s?.student_id||s?.id||"unknown",Fr=`${Ur}:${He.test_type}:${He.test_id}`,$r=Array.from(Fr).reduce((sn,Jn)=>(sn<<5)-sn+Jn.charCodeAt(0),0)>>>0,Tr=`test_shuffle_order_${Ur}_${He.test_type}_${He.test_id}`,Is=localStorage.getItem(Tr);if(Is){const sn=JSON.parse(Is),Jn=new Map(ut.map(Hn=>[Hn.question_id,Hn]));Je=sn.map(Hn=>Jn.get(Hn)).filter(Boolean)}else{const Jn=function(os){return function(){var hn=os+=1831565813;return hn=Math.imul(hn^hn>>>15,hn|1),hn^=hn+Math.imul(hn^hn>>>7,hn|61),((hn^hn>>>14)>>>0)/4294967296}}($r);Je=[...ut];for(let os=Je.length-1;os>0;os--){const hn=Math.floor(Jn()*(os+1));[Je[os],Je[hn]]=[Je[hn],Je[os]]}const Hn=Je.map(os=>os.question_id);localStorage.setItem(Tr,JSON.stringify(Hn))}}}catch(ar){be.error("Shuffle error (ignored):",ar)}L(Je),ve();const de=He.test_id;if(Ve.isRestored&&Ve.restoredTestId===de){be.debug(" Progress already restored for this test - skipping");return}at(ar=>({...ar,restorationCount:ar.restorationCount+1}));const ye=s?.student_id||s?.id||"unknown",Pe=`test_progress_${ye}_${He.test_type}_${He.test_id}`,Be=localStorage.getItem(Pe);let Ye=new Array(ut.length).fill("");if(Be)try{const ar=JSON.parse(Be);ar.answers&&Array.isArray(ar.answers)&&(Ye=ar.answers)}catch(ar){be.error("Error parsing main progress:",ar)}ut.forEach((ar,Ur)=>{const Fr=`test_progress_${ye}_${He.test_type}_${He.test_id}_${ar.question_id}`,$r=localStorage.getItem(Fr);if($r){const Tr=$r.replace(/^"(.*)"$/,"$1");Ye[Ur]=Tr}});const ot=Ye.filter(ar=>ar&&typeof ar=="string"&&ar.trim()!=="").length;if(ot>0){I(Ye);const ar=ut.length>0?ot/ut.length*100:0;U(ar)}else I(Ye),U(0);at(ar=>({...ar,isRestored:!0,restoredTestId:de})),ot>0&&(be.debug(" Existing progress found - preventing overwrite during initialization"),window.skipInitialProgressSave=!0);const wt=Number(Ze?.allowed_time||0),er=s?.student_id||s?.id||"unknown";if(ne.current=`test_timer_${er}_${He.test_type}_${He.test_id}`,wt>0)try{const ar=localStorage.getItem(ne.current),Ur=Date.now();if(ar){const Fr=JSON.parse(ar),$r=Math.floor((Ur-new Date(Fr.lastTickAt).getTime())/1e3),Tr=Math.max(0,Number(Fr.remainingSeconds||wt)-Math.max(0,$r));z(Tr),q.current=Ur}else z(wt),q.current=Ur,localStorage.setItem(ne.current,JSON.stringify({remainingSeconds:wt,lastTickAt:new Date(Ur).toISOString(),startedAt:new Date(Ur).toISOString()}))}catch(ar){be.error("Timer cache init error:",ar),z(wt)}else z(0);const Ft=new Date;X(Ft),be.debug(" Test timer started at:",Ft.toISOString());const _r=`anti_cheating_${s?.student_id||s?.id||"unknown"}_${He.test_type}_${He.test_id}`,Ir=Ts(_r);Ir?Ir.isCheating&&(be.debug(" WARNING: Student has been flagged for cheating in THIS test!"),be.debug(" Tab switches detected in this test:",Ir.tabSwitches),ct(` Warning: Suspicious activity detected in this test (${Ir.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning")):be.debug(" No existing anti-cheating data found for this test - starting fresh"),pt(),be.debug(" Anti-cheating tracking started"),M("test"),be.debug(" Test started successfully")}catch(ve){be.error(" Error starting test:",ve),ct("Failed to start test","error"),T("Failed to load test data. Please try again.")}finally{const ve=Date.now()-Ct,we=Math.max(0,250-ve);setTimeout(()=>{g(!1),y(!1)},we),b(!1);try{le&&clearTimeout(le)}catch{}}},[d]),Ee=_.useCallback(async()=>{if(!F||!ae||!te||!K){ct("No test data to submit","error");return}be.debug(" Submitting test:",F);try{ue(!0);const He=Rf(te,K,F.test_type),Ct=new Date,le=G?Math.round((Ct-G)/1e3):0,ve=G?G.toISOString():Ct.toISOString();be.debug(" Test timing:",{startedAt:ve,endTime:Ct.toISOString(),timeTaken:`${le} seconds`});const ge=kt();be.debug(" Anti-cheating data for submission:",ge),At(ge.caught_cheating||!1);const we={};te.forEach((Se,Ze)=>{we[Se.question_id]=K[Ze]??""}),F.test_type==="drawing"&&(be.debug(" Drawing test answers being submitted:",K),be.debug(" Drawing test answers type:",typeof K[0]),be.debug(" Drawing test answers content:",K[0]));const Te=await Sn.submitTest(F.test_type,F.test_id,K,{time_taken:(()=>{const Se=Number(ae?.allowed_time||0);return Se>0?Math.min(le,Se):le})(),started_at:ve,submitted_at:Ct.toISOString(),answers_by_id:we,question_order:te.map(Se=>Se.question_id),caught_cheating:ge.caught_cheating,visibility_change_times:ge.visibility_change_times,retest_assignment_id:(()=>{const Ze=`retest_assignment_id_${s?.student_id||s?.id||""}_${F.test_type}_${F.test_id}`,ut=localStorage.getItem(Ze);return be.debug(" Frontend retest key:",Ze),be.debug(" Frontend retest assignment ID from localStorage:",ut),be.debug(" Frontend retest assignment ID converted:",ut?Number(ut):null),be.debug(" Frontend current test data:",F),be.debug(" Frontend current test retest_assignment_id:",F.retest_assignment_id),ut?Number(ut):null})(),parent_test_id:F.test_id},s);if(be.debug(" Test submission result:",Te),Te.success){window.recentTestCompleted=!0,be.debug(" Test completed - cache refresh triggered");const Se=s?.student_id||s?.id||"",Ze=`retest_assignment_id_${Se}_${F.test_type}_${F.test_id}`,ut=!!localStorage.getItem(Ze);let Je=!1;if(ut){const Ye=typeof F?.retest_max_attempts=="number"?F.retest_max_attempts:void 0,ot=typeof F?.retest_attempts_left=="number"?F.retest_attempts_left:void 0,wt=typeof F?.retest_attempt_number=="number"?F.retest_attempt_number:void 0,er=Ye??(ot!=null&&wt!=null?ot+wt:1),Ft=(Te?.percentage_score??Te?.percentage??0)>=50;if(Ft){const Yt=`retest_attempt${er}_${Se}_${F.test_type}_${F.test_id}`;localStorage.setItem(Yt,"true"),be.debug(" Passed retest, marking last-slot key:",Yt);let _r=0;for(let ar=1;ar<=10;ar++){const Ur=`retest_attempt${ar}_${Se}_${F.test_type}_${F.test_id}`;localStorage.getItem(Ur)==="true"&&_r++}if(Se&&F.test_type&&F.test_id){const ar=`test_completed_${Se}_${F.test_type}_${F.test_id}`;localStorage.setItem(ar,"true"),be.debug(" Marked retest as completed (student passed):",ar);const Ur=`retest_attempts_${Se}_${F.test_type}_${F.test_id}`;localStorage.setItem(Ur,JSON.stringify({used:_r,max:er})),be.debug(" Set retest attempts metadata (student passed):",Ur,{used:_r,max:er})}const Ir=`retest1_${Se}_${F.test_type}_${F.test_id}`;localStorage.removeItem(Ir),Je=!0}else{let Yt=1;for(let Fr=1;Fr<=10;Fr++){const $r=`retest_attempt${Fr}_${Se}_${F.test_type}_${F.test_id}`;if(localStorage.getItem($r)!=="true"){Yt=Fr;break}}const _r=`retest_attempt${Yt}_${Se}_${F.test_type}_${F.test_id}`;localStorage.setItem(_r,"true"),be.debug(" Marked retest attempt as completed:",_r);let Ir=0;for(let Fr=1;Fr<=10;Fr++){const $r=`retest_attempt${Fr}_${Se}_${F.test_type}_${F.test_id}`;localStorage.getItem($r)==="true"&&Ir++}const ar=er>0&&Ir>=er,Ur=ar||Ft;if(be.debug(" Retest completion check:",{usedAttempts:Ir,maxAttempts:er,attemptsExhausted:ar,passed:Ft,shouldComplete:Ur,studentId:!!Se,test_type:!!F?.test_type,test_id:!!F?.test_id}),Ur)if(!Se||!F?.test_type||!F?.test_id)be.error(" Cannot set completion key - missing required fields:",{studentId:Se,test_type:F?.test_type,test_id:F?.test_id});else{const Fr=`test_completed_${Se}_${F.test_type}_${F.test_id}`;localStorage.setItem(Fr,"true"),be.debug(" Marked retest as completed (attempts exhausted or passed):",Fr),be.debug(" Verification - completion key value:",localStorage.getItem(Fr));const $r=`retest_attempts_${Se}_${F.test_type}_${F.test_id}`;localStorage.setItem($r,JSON.stringify({used:Ir,max:er})),be.debug(" Set retest attempts metadata (attempts exhausted):",$r,{used:Ir,max:er});const Tr=`retest1_${Se}_${F.test_type}_${F.test_id}`;localStorage.removeItem(Tr),be.debug(" Removed retest key after completion:",Tr),Je=!0}else be.debug(" Retest NOT completed - conditions not met:",{attemptsExhausted:ar,passed:Ft,shouldComplete:Ur})}}if(be.debug(" Marking test as completed..."),await Tt(F.test_type,F.test_id),F.test_type!=="drawing"){be.debug(" Caching test results after submission...");const ot=`student_results_table_${s?.student_id||s?.id||"unknown"}`,{setCachedData:wt,CACHE_TTL:er}=await Za(async()=>{const{setCachedData:Ft,CACHE_TTL:Yt}=await Promise.resolve().then(()=>hp);return{setCachedData:Ft,CACHE_TTL:Yt}},void 0);wt(ot,Te,er.student_results_table),be.debug(" Test results cached with key:",ot)}else be.debug(" Drawing test submitted - not caching results (will appear after teacher grades)");be.debug(" Clearing test progress..."),f(F.test_type,F.test_id);try{const Ye=s?.student_id||s?.id||"unknown",ot=`test_timer_${Ye}_${F.test_type}_${F.test_id}`;localStorage.removeItem(ot);const wt=`test_shuffle_order_${Ye}_${F.test_type}_${F.test_id}`;localStorage.removeItem(wt)}catch{}if(s?.student_id){const Ye=`test_completed_${s.student_id}_${F.test_type}_${F.test_id}`;localStorage.setItem(Ye,"true"),be.debug(" Test marked as completed in localStorage:",Ye)}try{const Ye=s?.student_id||s?.id||"",ot=`retest1_${Ye}_${F.test_type}_${F.test_id}`,wt=`retest_assignment_id_${Ye}_${F.test_type}_${F.test_id}`;Je?(localStorage.removeItem(ot),localStorage.removeItem(wt),be.debug(" Cleared retest keys (completion):",ot,wt)):be.debug(" Retest still pending - keeping keys:",ot,wt)}catch(Ye){be.warn(" Failed to manage retest keys:",Ye)}be.debug(" Clearing test progress and anti-cheating data for THIS test only...");const de=s?.student_id||s?.id||"unknown",ye=[],Pe=`test_progress_${de}_${F.test_type}_${F.test_id}`,Be=`anti_cheating_${de}_${F.test_type}_${F.test_id}`;for(let Ye=0;Ye<localStorage.length;Ye++){const ot=localStorage.key(Ye);ot&&(ot===Pe||ot===Be)&&ye.push(ot)}if(ye.forEach(Ye=>{localStorage.removeItem(Ye),be.debug(` Cleared for THIS test only: ${Ye}`)}),be.debug(" Clearing anti-cheating data..."),nt(),Wt(),F.test_type!=="drawing")M("results");else{Gt(!1),or.current=null;try{const Ye=window.history.state;if(Ye&&Ye.__intercept){const ot=Ye.prevState??null;window.history.replaceState(ot,document.title,window.location.href)}}catch(Ye){be.warn("Failed to restore history state for drawing test:",Ye)}setTimeout(()=>{window.location.href="/student"},100)}ct("Test submitted successfully!","success"),be.debug(" Test submitted successfully")}else throw be.error(" Test submission failed:",Te.error),new Error(Te.error||"Failed to submit test")}catch(He){be.error(" Error submitting test:",He),ct("Failed to submit test","error")}finally{ue(!1)}},[F,ae,te,K,Tt,f]);_.useCallback(()=>(be.debug(" Collecting test answers..."),K),[K]);const Ae=_.useCallback(()=>{if(!te||!K)return;const He=K.filter(le=>le&&typeof le=="string"&&le.trim()!=="").length,Ct=te.length>0?He/te.length*100:0;if(U(Ct),be.debug(` Progress updated: ${He}/${te.length} questions answered (${Math.round(Ct)}%)`),F){const le={answers:K,progress:Ct,lastSaved:new Date().toISOString()};u(F.test_type,F.test_id,le)}},[te,K,F,u]);_.useEffect(()=>{Ae()},[Ae]);const Fe=_.useCallback(()=>K?K.filter(Ct=>Ct&&typeof Ct=="string"&&Ct.trim()!=="").length:0,[K,te]),xt=_.useCallback(()=>{if(F&&s?.student_id){const Ct=`anti_cheating_${s?.student_id||s?.id||"unknown"}_${F.test_type}_${F.test_id}`,ge=((Ts(Ct)||{tabSwitches:0}).tabSwitches||0)+1,we=ge>=2;hs(Ct,{tabSwitches:ge,isCheating:we},as.anti_cheating)}Gt(!1),or.current=null;try{const He=window.history.state;if(He&&He.__intercept){const Ct=He.prevState??null;window.history.replaceState(Ct,document.title,window.location.href)}}catch(He){be.warn("Failed to restore history state in goBack:",He)}setTimeout(()=>{window.location.href="/student"},100)},[e,r,F,s?.student_id,Bt,n]),$t=_.useCallback(()=>{$e(!1);const He=or.current;if(or.current=null,Gt(!1),He)try{const Ct=window.history.state;if(Ct&&Ct.__intercept){const le=Ct.prevState??null;window.history.replaceState(le,document.title,window.location.href)}}catch(Ct){be.warn("Failed to restore history state:",Ct)}setTimeout(()=>{xt()},10)},[xt]),lr=_.useCallback(()=>{const He=or.current;or.current=null,He?.cancel&&He.cancel(),$e(!1)},[]);_.useCallback(()=>{be.debug(" Showing test results..."),M("results")},[]);const Ke=_.useCallback((He,Ct,le=null)=>{switch(be.debug(" Formatting student answer for display:",He,"testType:",Ct,"question:",le),Ct){case rs.MULTIPLE_CHOICE:if(He.toString().startsWith("Option "))return He;if(le&&typeof He=="string"&&!isNaN(parseInt(He))){const ve=parseInt(He),ge=`option_${String.fromCharCode(97+ve)}`,we=le[ge];if(we)return be.debug(" Converted",He,"to option text:",we),we;{const Te=String.fromCharCode(65+ve);return be.debug(" Converted",He,"to",Te),Te}}else{if(typeof He=="string"&&isNaN(parseInt(He)))return be.debug(" Already formatted text:",He),He;{const ve=String.fromCharCode(65+parseInt(He));return be.debug(" Converted",He,"to",ve),ve}}case rs.TRUE_FALSE:return He==="true"?"True":"False";case rs.INPUT:return He;case rs.MATCHING:return typeof He=="object"?JSON.stringify(He):He;case rs.WORD_MATCHING:return typeof He=="object"?JSON.stringify(He):He;case rs.DRAWING:return He&&He.trim()!==""?"Drawing submitted":"No drawing";case rs.FILL_BLANKS:return He;default:return be.warn(" Unknown test type for answer formatting:",Ct),He}},[]),ct=_.useCallback((He,Ct)=>{const le={id:Date.now(),message:He,type:Ct,timestamp:new Date};P(ve=>[...ve,le]),setTimeout(()=>{P(ve=>ve.filter(ge=>ge.id!==le.id))},Xm.NOTIFICATION_DURATION)},[]);_.useEffect(()=>{Ae()},[Ae]),_.useEffect(()=>{if(A!=="test")return;const He=Number(ae?.allowed_time||0);if(!He)return;const Ct=setInterval(()=>{z(le=>{const ve=Math.max(0,le-1);try{const ge=Date.now();q.current||(q.current=ge),ne.current&&localStorage.setItem(ne.current,JSON.stringify({remainingSeconds:ve,lastTickAt:new Date(ge).toISOString(),startedAt:G?G.toISOString():new Date(ge-(He-ve)*1e3).toISOString()}))}catch{}return ve===0&&Ee(),ve})},1e3);return()=>clearInterval(Ct)},[A,ae?.allowed_time,Ee,G]);const yt=_.useCallback((He,Ct)=>{if(!He)return null;const le=(ve,ge)=>{const we=[...K];we[Ct]=ge,I(we),be.debug(` Answer changed: question ${ve} = ${ge}`),be.debug(" Updated studentAnswers:",we)};switch(F.test_type){case rs.TRUE_FALSE:return l.jsx(Lde,{question:He,questionIndex:Ct,studentAnswer:K[Ct]||"",onAnswerChange:le,mode:"student",testId:F?.test_id,testType:V,displayNumber:Ct+1});case rs.MULTIPLE_CHOICE:return l.jsx(Bde,{question:He,questionIndex:Ct,studentAnswer:K[Ct]||"",onAnswerChange:le,mode:"student",testId:F?.test_id,testType:V,displayNumber:Ct+1});case rs.INPUT:return l.jsx($de,{question:He,questionIndex:Ct,studentAnswer:K[Ct]||"",onAnswerChange:le,mode:"student",testId:F?.test_id,testType:V,displayNumber:Ct+1});case rs.MATCHING:return be.error("Matching test reached renderQuestion - this should not happen"),l.jsxs("div",{className:"text-center p-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"Matching Test"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Redirecting to matching test page..."}),l.jsx(rt,{onClick:()=>r("/student"),variant:"primary",children:"Back to Dashboard"})]});case rs.DRAWING:return l.jsx(Yde,{question:He,questionIndex:Ct,studentAnswer:K[Ct]||"",onAnswerChange:le,mode:"student",testId:F?.test_id,testType:V});case rs.FILL_BLANKS:return Ct===0?l.jsx(a0e,{testText:ae?.test_text,blanks:(te||[]).map((ve,ge)=>({id:ve.question_id||ge+1,options:ve.blank_options||[],correct_answer:ve.correct_answers?.[0]||ve.correct_answer,question:ve.question_json||""})),separateType:ae?.separate_type,testId:F?.test_id,testName:ae?.test_name||F?.test_name,teacherId:ae?.teacher_id||F?.teacher_id,subjectId:ae?.subject_id||F?.subject_id,onTestComplete:Ee,onAnswerChange:(ve,ge)=>{const we=te.findIndex(Te=>Te.question_id===ve);if(we!==-1){const Te=[...K];Te[we]=ge,I(Te),be.debug(` Fill Blanks answer changed: question ${ve} = ${ge}`)}}},`fill-blanks-${F?.test_id}-${ae?.test_name}`):null;default:return l.jsx("div",{children:"Unsupported question type"})}},[F,K,V]);function Jt(){return!F||!ae||!te?null:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:ae.test_name||ae.title||"Test"})}),l.jsx("div",{className:"mb-4",children:l.jsx(sH,{answeredCount:Fe(),totalQuestions:te.length,percentage:Math.round(H),timeElapsed:Number(ae?.allowed_time||0)>0?R:0,showDetails:!0})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Answer all questions below:"}),l.jsx("div",{className:"space-y-8",children:te.map((He,Ct)=>l.jsx("div",{className:"question-container",children:yt(He,Ct)},He.question_id||Ct))})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx(rt,{variant:"primary",size:"lg",onClick:()=>Me(!0),disabled:se||Fe()<te.length,loading:se,children:se?"Submitting...":`Submit Test (${Fe()}/${te.length})`})})]})}if(h)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:t?"Starting Test...":"Loading Student Tests..."})]})});if(C)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Tests Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:C}),l.jsx(rt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});const cr=n.pathname.startsWith("/student/test/");if(be.debug(" [DEBUG] StudentTests render check - isTestRoute:",cr,"pathname:",n.pathname,"propCurrentTest:",!!t),!cr&&t)return be.debug(" [DEBUG] Not on test route anymore, hiding component. Current path:",n.pathname),null;return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx(Na,{isOpen:Nt,onClose:lr,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:lr,variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:$t,variant:"primary",children:"Go Back"})]})]})}),l.jsx(Na,{isOpen:We,onClose:()=>Me(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:()=>Me(!1),variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:()=>{Me(!1),Ee()},variant:"primary",children:"Submit"})]})]})}),A!=="results"&&l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Test"})}),l.jsx(rt,{variant:"outline",onClick:()=>{or.current=null,$e(!0)},children:"Back to Cabinet"})]})})}),rr&&A==="results"&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mx-4 sm:mx-6 lg:mx-8 mt-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm text-red-700",children:[l.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",ur," times during the test."]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-y-auto",children:[!t&&A==="list"&&Rr(),A==="test"&&Jt(),A==="results"&&Hr()]}),A==="test"&&x&&l.jsxs("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center z-50",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-3 text-gray-700",children:"Preparing your test"}),v&&l.jsx("div",{className:"mt-3 text-sm text-gray-500",children:v})]}),l.jsx(Q7,{isOpen:me,onClose:()=>Ne(!1),testType:ce?.test_type,testId:ce?.test_id,testName:ce?.test_name,questions:ce?.questions,isLoading:h}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:j.map(He=>l.jsx(ou,{type:He.type,message:He.message,onClose:()=>P(Ct=>Ct.filter(le=>le.id!==He.id))},He.id))})]});function Rr(){return!i||i.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No active tests available for your class."})}):l.jsx("div",{className:"space-y-6",children:i.map((He,Ct)=>l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:He.test_name}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Subject:"})," ",He.subject]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Teacher:"})," ",He.teacher_name]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Type:"})," ",He.test_type]})]}),l.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Assigned: ",new Date(He.assigned_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(rt,{variant:"outline",onClick:()=>Ot(He),disabled:k||h,children:"View Details"}),l.jsx(rt,{variant:"primary",onClick:()=>he(He),disabled:k||h,children:k?"Starting...":"Start Test"})]})]})},Ct))})}function Hr(){if(!F||!ae||!te||!K)return null;const He={};return K.forEach((Ct,le)=>{if(te[le]){const ve=te[le].question_id||te[le].id||le;He[String(ve)]=Ct,be.debug(" Converting answer:",{index:le,questionId:ve,answer:Ct,question:te[le]})}}),be.debug(" Final answersObject:",He),be.debug(" Questions structure:",te.map(Ct=>({id:Ct.question_id,correct_answer:Ct.correct_answer}))),l.jsx(H0e,{testInfo:ae,questions:te,testType:F.test_type,studentAnswers:He,onBackToCabinet:xt,checkAnswerCorrectness:Vp,formatStudentAnswerForDisplay:Ke,getCorrectAnswer:Ev,caughtCheating:St})}},K0e=()=>{const{testId:e}=j_(),t=Wo(),{user:r}=Os(),{makeAuthenticatedRequest:n}=zl(),{showNotification:s}=ai(),[a,i]=_.useState(null),[o,c]=_.useState(!0),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1),[y,v]=_.useState(!1),T=_.useRef(null),[k,b]=_.useState(!1);_1("matching_type",a?.id);const C=_.useCallback(()=>{if(!r?.student_id||!e)return!1;const M=`test_completed_${r.student_id}_matching_type_${e}`,F=localStorage.getItem(M)==="true",B=`retest1_${r.student_id}_matching_type_${e}`,V=localStorage.getItem(B)==="true";return F&&!V?(be.debug(" Test already completed, redirecting to cabinet"),s("This test has already been completed","info"),t("/student"),!0):!1},[r?.student_id,e,t,s]),E=_.useCallback(async()=>{if(!e){d("Test ID is required"),c(!1);return}if(!C())try{c(!0),d(null);const M=await n(`/.netlify/functions/get-matching-type-test?test_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!M.ok)throw new Error("Failed to load test data");const F=await M.json();if(!F.success)throw new Error(F.message||"Failed to load test");const B=F.data;be.debug(" Test data from get-matching-type-test:",B);const V=await n(`/.netlify/functions/get-test-questions?test_id=${e}&test_type=matching_type`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!V.ok)throw new Error("Failed to load test questions");const ee=await V.json();if(!ee.success)throw new Error(ee.message||"Failed to load test questions");be.debug(" Questions data from get-test-questions:",ee);const ae={id:B.test_id,test_name:B.test_name,teacher_id:B.teacher_id,subject_id:B.subject_id,image_url:B.image_url,image:null,blocks:(()=>{if(Array.isArray(ee.questions)&&ee.questions.length>0){const Z=ee.questions[0];return Array.isArray(Z.blocks)?Z.blocks.map((te,L)=>{let K=te.block_coordinates||te.coordinates||(typeof te.x=="number"?{x:te.x,y:te.y,width:te.width,height:te.height}:null);if(typeof K=="string")try{K=JSON.parse(K)}catch{K=null}return(!K||typeof K!="object")&&(K={x:0,y:0,width:30,height:10}),K={x:(typeof K.x=="number"?K.x:Number(K.x))||0,y:(typeof K.y=="number"?K.y:Number(K.y))||0,width:(typeof K.width=="number"?K.width:Number(K.width))||30,height:(typeof K.height=="number"?K.height:Number(K.height))||10},{id:te.block_id||te.question_id||te.id||L+1,word:te.word||`Word ${L+1}`,coordinates:K,hasArrow:!!te.has_arrow,arrow:te.arrow||null}}):ee.questions.map(te=>{be.debug(" Processing question:",te);let L;try{L=typeof te.block_coordinates=="string"?JSON.parse(te.block_coordinates):te.block_coordinates}catch{L={x:0,y:0,width:100,height:100}}return(!L||typeof L!="object")&&(L={x:0,y:0,width:100,height:100}),L={x:(typeof L.x=="number"?L.x:Number(L.x))||0,y:(typeof L.y=="number"?L.y:Number(L.y))||0,width:(typeof L.width=="number"?L.width:Number(L.width))||100,height:(typeof L.height=="number"?L.height:Number(L.height))||100},{id:te.question_id,word:te.word,coordinates:L,hasArrow:te.has_arrow,arrow:te.arrow}})}return[]})(),words:(()=>{if(Array.isArray(ee.questions)&&ee.questions.length>0){const Z=ee.questions[0];if(Array.isArray(Z.words)){const te=Z.words,L=Array.isArray(Z.blocks)?Z.blocks:[];return typeof te[0]=="string"?te.map((I,H)=>({id:`w_${L[H]?.question_id||L[H]?.block_id||ee.questions[H]?.question_id||H+1}_${H}`,word:String(I),blockId:null,isPlaced:!1,isCorrect:!1})):te.map((I,H)=>({id:`w_${I.question_id||I.id||H+1}_${H}`,word:I.word||String(I.text||""),blockId:null,isPlaced:!1,isCorrect:!1}))}return ee.questions.map(te=>({id:`w_${te.question_id}`,word:te.word,blockId:null,isPlaced:!1,isCorrect:!1}))}return[]})(),arrows:B.arrows?B.arrows.map(Z=>(be.debug(" Processing arrow:",Z),{id:Z.id,questionId:Z.question_id,blockId:Z.block_id||Z.question_id,start:{x:Number(Z.start_x)||0,y:Number(Z.start_y)||0},end:{x:Number(Z.end_x)||0,y:Number(Z.end_y)||0},rel_start_x:Z.rel_start_x!==null?Number(Z.rel_start_x):null,rel_start_y:Z.rel_start_y!==null?Number(Z.rel_start_y):null,rel_end_x:Z.rel_end_x!==null?Number(Z.rel_end_x):null,rel_end_y:Z.rel_end_y!==null?Number(Z.rel_end_y):null,image_width:Z.image_width?Number(Z.image_width):null,image_height:Z.image_height?Number(Z.image_height):null,style:(typeof Z.style=="string"?JSON.parse(Z.style):Z.style)||{color:"#dc3545",thickness:3}})):[]};if(B.image_url){const Z=new Image;Z.crossOrigin="anonymous",Z.onload=()=>{ae.image=Z,i(ae),c(!1)},Z.onerror=()=>{be.warn("Failed to load test image"),i(ae),c(!1)},Z.src=B.image_url}else i(ae),c(!1)}catch(M){be.error("Error loading test data:",M),d(M.message||"Failed to load test"),c(!1)}},[e,n]);_.useEffect(()=>{r?.student_id&&E()},[E,r?.student_id]);const j=_.useCallback(async M=>{be.debug("Test completed:",M),s("Test completed successfully!","success");const F=parseInt(M)||0,B=a?.blocks?.length||a?.words?.length||0,V=B>0?Math.round(F/B*100):0,ee={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"matching_type",score:F,totalQuestions:B,percentage:V,passed:V>=60,questionAnalysis:a?.questions?.map((ae,Z)=>({questionNumber:Z+1,isCorrect:Z<F,userAnswer:Z<F?`Matched: ${ae.word}`:"Not answered",correctAnswer:`Match: ${ae.word}`}))||Array.from({length:B},(ae,Z)=>({questionNumber:Z+1,isCorrect:Z<F,userAnswer:Z<F?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};be.debug(" Using test results data:",ee),h(ee),x(!0)},[a,s]),P=_.useCallback(()=>{v(!1),T.current=null,t("/student")},[t]);w2(y&&g,_.useCallback(({confirm:M,cancel:F})=>{T.current={confirm:M,cancel:F},b(!0)},[])),_.useEffect(()=>{g?v(!0):(v(!1),T.current=null)},[g]),_.useCallback(()=>{b(!1);const M=T.current;if(T.current=null,v(!1),M)try{const F=window.history.state;if(F&&F.__intercept){const B=F.prevState??null;window.history.replaceState(B,document.title,window.location.href)}}catch(F){be.warn("Failed to restore history state:",F)}setTimeout(()=>{h(null),x(!1),t("/student")},10)},[t]),_.useCallback(()=>{const M=T.current;T.current=null,M?.cancel&&M.cancel(),b(!1)},[]);const A=_.useCallback(()=>{x(!1),h(null),E()},[E]);return o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx(zt,{className:"max-w-md w-full",children:l.jsxs(zt.Body,{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading test..."})]})})}):u?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx(zt,{className:"max-w-md w-full",children:l.jsxs(zt.Body,{className:"text-center",children:[l.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-4",children:u}),l.jsx("button",{onClick:P,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})}):a?g&&f?l.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:l.jsx(_2,{testResults:f,onBackToCabinet:()=>{v(!1),T.current=null,h(null),x(!1),t("/student")},onRetakeTest:A,isLoading:!1})}):l.jsx(zde,{testData:a,onTestComplete:j,onBackToCabinet:P}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx(zt,{className:"max-w-md w-full",children:l.jsxs(zt.Body,{className:"text-center",children:[l.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load test data"}),l.jsx("button",{onClick:P,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})})},Y0e=()=>{const{testId:e}=j_(),t=Wo(),{user:r}=Os(),{makeAuthenticatedRequest:n}=zl(),{showNotification:s}=ai(),[a,i]=_.useState(null),[o,c]=_.useState(!0),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1),y=_.useCallback(()=>{if(!r?.student_id||!e)return!1;const b=`test_completed_${r.student_id}_word_matching_${e}`,C=`retest1_${r.student_id}_word_matching_${e}`;return localStorage.getItem(C)==="true"?!1:localStorage.getItem(b)==="true"},[r?.student_id,e]),v=_.useCallback(async()=>{if(!e){d("Test ID is required"),c(!1);return}if(y()){s("This test has already been completed","warning"),t("/student");return}c(!0),d(null);try{const b=`word_matching_test_${e}`,C=Ts(b);if(C){if(be.debug(" Word matching test loaded from cache:",C),C.id){let P=C,A=Array.isArray(P.correctPairs)?P.correctPairs:P.correctPairs&&typeof P.correctPairs=="object"?Object.keys(P.correctPairs).map(M=>[Number(M),P.correctPairs[M]]).sort((M,F)=>M[0]-F[0]).map(([,M])=>M):null;if(Array.isArray(P.leftWords)&&Array.isArray(P.rightWords)&&Array.isArray(A)){const M=P.rightWords.map((Z,te)=>te),F=P.leftWords.map((Z,te)=>te);for(let Z=M.length-1;Z>0;Z--){const te=Math.floor(Math.random()*(Z+1));[M[Z],M[te]]=[M[te],M[Z]]}for(let Z=F.length-1;Z>0;Z--){const te=Math.floor(Math.random()*(Z+1));[F[Z],F[te]]=[F[te],F[Z]]}const B=M.map(Z=>P.rightWords[Z]),V=F.map(Z=>P.leftWords[Z]),ee=new Map(M.map((Z,te)=>[Z,te])),ae=F.map(Z=>{const te=A[Z];return ee.get(te)});P={...P,leftWords:V,rightWords:B,correctPairs:ae}}i(P)}else{let A={id:C.test_id,test_id:C.test_id,test_name:C.test_name,teacher_id:C.teacher_id,subject_id:C.subject_id,num_questions:C.num_questions,interaction_type:C.interaction_type,passing_score:C.passing_score,allowed_time:C.allowed_time,created_at:C.created_at,updated_at:C.updated_at,leftWords:C.leftWords,rightWords:C.rightWords,correctPairs:C.correctPairs,originalPairs:C.originalPairs},M=Array.isArray(A.correctPairs)?A.correctPairs:A.correctPairs&&typeof A.correctPairs=="object"?Object.keys(A.correctPairs).map(F=>[Number(F),A.correctPairs[F]]).sort((F,B)=>F[0]-B[0]).map(([,F])=>F):null;if(Array.isArray(A.leftWords)&&Array.isArray(A.rightWords)&&Array.isArray(M)){const F=A.rightWords.map((te,L)=>L),B=A.leftWords.map((te,L)=>L);for(let te=F.length-1;te>0;te--){const L=Math.floor(Math.random()*(te+1));[F[te],F[L]]=[F[L],F[te]]}for(let te=B.length-1;te>0;te--){const L=Math.floor(Math.random()*(te+1));[B[te],B[L]]=[B[L],B[te]]}const V=F.map(te=>A.rightWords[te]),ee=B.map(te=>A.leftWords[te]),ae=new Map(F.map((te,L)=>[te,L])),Z=B.map(te=>{const L=M[te];return ae.get(L)});A={...A,leftWords:ee,rightWords:V,correctPairs:Z}}i(A)}c(!1);return}const j=await(await n(`/.netlify/functions/get-word-matching-test?test_id=${e}`)).json();if(j.success){const P={id:j.data.test_id,test_id:j.data.test_id,test_name:j.data.test_name,teacher_id:j.data.teacher_id,subject_id:j.data.subject_id,num_questions:j.data.num_questions,interaction_type:j.data.interaction_type,passing_score:j.data.passing_score,allowed_time:j.data.allowed_time,created_at:j.data.created_at,updated_at:j.data.updated_at,leftWords:j.data.leftWords,rightWords:j.data.rightWords,correctPairs:j.data.correctPairs,originalPairs:j.data.originalPairs};let A=P,M=Array.isArray(A.correctPairs)?A.correctPairs:A.correctPairs&&typeof A.correctPairs=="object"?Object.keys(A.correctPairs).map(F=>[Number(F),A.correctPairs[F]]).sort((F,B)=>F[0]-B[0]).map(([,F])=>F):null;if(Array.isArray(A.leftWords)&&Array.isArray(A.rightWords)&&Array.isArray(M)){const F=A.rightWords.map((te,L)=>L),B=A.leftWords.map((te,L)=>L);for(let te=F.length-1;te>0;te--){const L=Math.floor(Math.random()*(te+1));[F[te],F[L]]=[F[L],F[te]]}for(let te=B.length-1;te>0;te--){const L=Math.floor(Math.random()*(te+1));[B[te],B[L]]=[B[L],B[te]]}const V=F.map(te=>A.rightWords[te]),ee=B.map(te=>A.leftWords[te]),ae=new Map(F.map((te,L)=>[te,L])),Z=B.map(te=>{const L=M[te];return ae.get(L)});A={...A,leftWords:ee,rightWords:V,correctPairs:Z}}i(A),hs(b,A,as.word_matching_test),be.debug(" Word matching test loaded from API and cached:",P)}else throw new Error(j.message||"Failed to load test")}catch(b){be.error("Error loading word matching test:",b),d(b.message),s("Failed to load test: "+b.message,"error")}finally{c(!1)}},[e,y,n,s,t]),T=_.useCallback(async b=>{be.debug("Test completed:",b),s("Test completed successfully!","success");const C=typeof b=="object"?parseInt(b.score)||0:parseInt(b)||0,E=typeof b=="object"&&b.caught_cheating||!1,j=typeof b=="object"&&b.visibility_change_times||0,P=a?.num_questions||0,A=P>0?Math.round(C/P*100):0,M={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"word_matching",score:C,totalQuestions:P,percentage:A,passed:A>=60,questionAnalysis:Array.isArray(a?.correctPairs)?a.correctPairs.map((F,B)=>({questionNumber:B+1,isCorrect:B<C,userAnswer:B<C?`${F.left}  ${F.right}`:"Not answered",correctAnswer:`${F.left}  ${F.right}`})):Array.from({length:P},(F,B)=>({questionNumber:B+1,isCorrect:B<C,userAnswer:B<C?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:E,visibility_change_times:j};be.debug(" Using test results data:",M),h(M),x(!0)},[a,s]),k=_.useCallback(()=>{t("/student")},[t]);return _.useEffect(()=>{v()},[v]),o?l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsxs(zt,{className:"p-8 text-center",children:[l.jsx(cn,{size:"lg",className:"mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading word matching test..."})]})}):u?l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx(zt,{className:"p-8 text-center",children:l.jsxs("div",{className:"text-red-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-4",children:u}),l.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})}):a?g&&f?l.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:l.jsx(_2,{testResults:f,onBackToCabinet:()=>{h(null),x(!1),t("/student")},onRetakeTest:(b,C)=>{h(null),x(!1),v()},isLoading:!1,caught_cheating:f.caught_cheating||!1,visibility_change_times:f.visibility_change_times||0})}):l.jsx(dt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"min-h-screen bg-gray-50 py-8",children:l.jsx(Hde,{testData:a,onTestComplete:T,onBackToCabinet:k})}):l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx(zt,{className:"p-8 text-center",children:l.jsxs("div",{className:"text-gray-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Not Found"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"The requested test could not be found."}),l.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})})},X0e=_.forwardRef(({onRecordingComplete:e,minDuration:t=0,maxDuration:r=600,minWords:n=50,maxAttempts:s=3,currentAttempt:a=1},i)=>{const[o,c]=_.useState(!1),[u,d]=_.useState(!1),[f,h]=_.useState(0),[g,x]=_.useState(null),[y,v]=_.useState(null),[T,k]=_.useState("good"),b=_.useRef(null),C=_.useRef([]),E=_.useRef(null),j=_.useRef(null),P=_.useRef(null),A=_.useRef(null),M=_.useRef(null);_.useImperativeHandle(i,()=>({startRecording:()=>F(),stopRecording:()=>B(),pauseRecording:()=>V(),resumeRecording:()=>ee()}));const F=_.useCallback(async()=>{try{if(v(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");if(!window.isSecureContext&&!window.location.hostname.includes("localhost"))throw new Error("Microphone access requires HTTPS. Please use a secure connection.");const K=window.AudioContext||window.webkitAudioContext;P.current||(P.current=new K),P.current.state!=="running"&&await P.current.resume().catch(()=>{}),console.log(" Requesting microphone permission...");const I=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});console.log(" Microphone permission granted"),E.current=I;try{let G=document.getElementById("ios-audio-sink");G||(G=document.createElement("audio"),G.id="ios-audio-sink",G.muted=!0,G.playsInline=!0,G.style.display="none",document.body.appendChild(G)),G.srcObject=I,await G.play().catch(()=>{})}catch{}const H=P.current.createAnalyser();P.current.createMediaStreamSource(I).connect(H),H.fftSize=256,A.current=H,ae();let R="audio/webm;codecs=opus";typeof MediaRecorder<"u"&&MediaRecorder.isTypeSupported&&!MediaRecorder.isTypeSupported(R)&&(MediaRecorder.isTypeSupported("audio/mp4")?R="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?R="audio/aac":R="");const z=new MediaRecorder(I,R?{mimeType:R}:void 0);b.current=z,C.current=[],z.ondataavailable=G=>{G.data.size>0&&C.current.push(G.data)},z.onstop=()=>{const G=R&&R.startsWith("audio/")?R:"audio/webm",X=new Blob(C.current,{type:G});x(X),e(X,f),E.current&&E.current.getTracks().forEach(ne=>ne.stop()),M.current&&cancelAnimationFrame(M.current)},z.start(1e3),c(!0),h(0),j.current=setInterval(()=>{h(G=>{const X=G+1;return X>=r&&B(),X})},1e3)}catch(K){console.error("Error starting recording:",K);const I=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;K.name==="NotAllowedError"?v(I?"Microphone access denied. Please go to Settings > Safari > Microphone and allow access, then refresh the page.":"Microphone access denied. Please allow microphone access in your browser settings and try again."):K.name==="NotFoundError"?v("No microphone found. Please connect a microphone and try again."):K.name==="NotSupportedError"?v("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox."):K.message.includes("HTTPS")?v("Microphone access requires HTTPS. Please use a secure connection."):v(`Failed to access microphone: ${K.message}`)}},[r]),B=_.useCallback(()=>{if(b.current&&o&&(b.current.stop(),c(!1),d(!1),j.current&&clearInterval(j.current),f<t)){v(`Recording must be at least ${t} seconds long.`);return}},[o,f,t,g,e]),V=_.useCallback(()=>{b.current&&o&&!u&&(b.current.pause(),d(!0),j.current&&clearInterval(j.current))},[o,u]),ee=_.useCallback(()=>{b.current&&o&&u&&(b.current.resume(),d(!1),j.current=setInterval(()=>{h(K=>{const I=K+1;return I>=r&&B(),I})},1e3))},[o,u,r,B]),ae=_.useCallback(()=>{if(!A.current)return;const K=A.current,I=new Uint8Array(K.frequencyBinCount),H=()=>{K.getByteFrequencyData(I);const U=I.reduce((R,z)=>R+z,0)/I.length;U<10?k("poor"):U<30?k("fair"):k("good"),o&&(M.current=requestAnimationFrame(H))};H()},[o]),Z=K=>{const I=Math.floor(K/60),H=K%60;return`${I}:${H.toString().padStart(2,"0")}`},te=()=>{switch(T){case"poor":return"text-red-600";case"fair":return"text-yellow-600";case"good":return"text-green-600";default:return"text-gray-600"}},L=()=>{switch(T){case"poor":return"Poor audio quality - speak closer to microphone";case"fair":return"Fair audio quality - good for recording";case"good":return"Excellent audio quality";default:return"Monitoring audio quality..."}};return l.jsxs("div",{className:"audio-recorder bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Record Your Response"}),l.jsx("p",{className:"text-gray-600",children:"Speak clearly and at a normal pace. You can pause and resume if needed."})]}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:Z(f)}),l.jsx("div",{className:`text-sm ${te()}`,children:L()}),u&&l.jsx("div",{className:"text-yellow-600 font-semibold mt-2",children:" Recording Paused"})]}),o&&l.jsx("div",{className:"mb-6",children:l.jsx("div",{className:"flex justify-center items-center space-x-1 h-8",children:Array.from({length:20},(K,I)=>l.jsx("div",{className:"bg-blue-400 rounded-sm",style:{width:"4px",height:`${Math.random()*20+4}px`,animation:"pulse 0.5s ease-in-out infinite"}},I))})}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:o?l.jsxs(l.Fragment,{children:[u?l.jsxs("button",{onClick:ee,className:"w-full sm:w-auto bg-green-600 text-white px-6 py-4 rounded-full hover:bg-green-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Resume"})]}):l.jsxs("button",{onClick:V,className:"w-full sm:w-auto bg-yellow-600 text-white px-6 py-4 rounded-full hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Pause"})]}),l.jsxs("button",{onClick:B,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-4 rounded-full hover:bg-gray-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Stop & Submit"})]})]}):l.jsxs("button",{onClick:F,className:"w-full sm:w-auto bg-red-600 text-white px-6 py-4 rounded-full hover:bg-red-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Start Recording"})]})}),y&&l.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:y})}),l.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Attempt ",a," of ",s,a<s&&l.jsx("span",{className:"ml-2 text-blue-600",children:"(You can re-record if needed)"})]})]})}),wH=({audioBlob:e,audioUrl:t,recordingTime:r,className:n=""})=>{const[s,a]=_.useState(!1),[i,o]=_.useState(0),[c,u]=_.useState(0),[d,f]=_.useState(1),[h,g]=_.useState(1),[x,y]=_.useState(!0),[v,T]=_.useState(""),[k,b]=_.useState(!1),[C,E]=_.useState(null),[j,P]=_.useState(!1),A=_.useRef(null),M=_.useRef(null),F=_.useRef(!1);_.useEffect(()=>()=>{F.current=!0},[]),_.useEffect(()=>{let I=!1;if(t)I||T(t);else if(e){if(!e||e.size===0){I||y(!1);return}if(!(e instanceof Blob)){console.error("audioBlob is not a Blob:",typeof e,e),I||y(!1);return}const H=URL.createObjectURL(e);return I||T(H),()=>{I=!0,URL.revokeObjectURL(H)}}return()=>{I=!0}},[e,t]),_.useEffect(()=>{let I=!1;const H=R=>{try{const z=new URL(R);return/\/storage\/v1\/object\/public\//.test(z.pathname)}catch{return!1}};async function U(R){if(!R||j||/\/object\/sign\//.test(R)||!H(R))return R;try{const G=new URL(R).pathname.replace(/^\/storage\/v1\/object\/public\//,""),X=G.split("/")[0],ne=G.substring(X.length+1),q=await fetch(`/.netlify/functions/get-speaking-test-new?action=sign-audio&bucket=${encodeURIComponent(X)}&file_path=${encodeURIComponent(ne)}`);if(q.ok){const{url:se}=await q.json();if(!I&&!F.current){P(!0);try{await fetch(se,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}T(se)}return se}}catch{}return R}return(async()=>{if(t){const R=await U(t);try{await fetch(R,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}!I&&!F.current&&!j&&T(R)}})(),()=>{I=!0}},[t,j]),_.useEffect(()=>{let I=!1;return v&&(I||(b(!1),E(null),y(!0))),()=>{I=!0}},[v]),_.useEffect(()=>{if(A.current&&v){const I=A.current;let H=!1;try{I.src=v}catch{}I.load();const U=()=>{if(H||F.current)return;let ce=I.duration;if(ce===1/0)try{I.currentTime=1e101,I.ontimeupdate=()=>{if(H||F.current)return;I.ontimeupdate=null;const Ue=I.duration;H||(u(isFinite(Ue)&&Ue>0?Ue:0),I.currentTime=0,y(!1))};return}catch(Ue){console.warn("Seek trick failed:",Ue)}if(isNaN(ce)||!isFinite(ce)||ce<=0){const Ue=I.seekable&&I.seekable.length>0&&isFinite(I.seekable.end(0)),pe=!Ue&&I.buffered&&I.buffered.length>0&&isFinite(I.buffered.end(I.buffered.length-1));Ue?ce=I.seekable.end(0):pe&&(ce=I.buffered.end(I.buffered.length-1))}isNaN(ce)||!isFinite(ce)||ce<=0?(console.warn("Invalid audio duration after fallbacks:",ce),r&&r>0?H||u(r):H||u(0)):H||u(ce),H||y(!1)},R=()=>{H||F.current||U()},z=()=>{H||F.current||U()},G=()=>{H||F.current||U()},X=()=>{H||F.current||U()},ne=()=>{H||F.current||o(I.currentTime)},q=()=>{H||F.current||(a(!1),o(0))},se=()=>{H||F.current||a(!0)},ue=()=>{H||F.current||a(!1)},me=ce=>{if(H||F.current)return;console.error("Audio loading error:",ce),console.error("Audio error details:",{error:I.error,networkState:I.networkState,readyState:I.readyState,src:I.src,currentSrc:I.currentSrc});const Ue=I.error?.code;Ue===4&&b(!0),E(I.error||{code:Ue}),y(!1)},Ne=setTimeout(()=>{H||F.current||I.readyState===0&&y(!1)},6e3);return I.addEventListener("loadedmetadata",R),I.addEventListener("durationchange",z),I.addEventListener("canplay",G),I.addEventListener("canplaythrough",X),I.addEventListener("timeupdate",ne),I.addEventListener("ended",q),I.addEventListener("play",se),I.addEventListener("pause",ue),I.addEventListener("error",me),()=>{H=!0,clearTimeout(Ne),I.removeEventListener("loadedmetadata",R),I.removeEventListener("durationchange",z),I.removeEventListener("canplay",G),I.removeEventListener("canplaythrough",X),I.removeEventListener("timeupdate",ne),I.removeEventListener("ended",q),I.removeEventListener("play",se),I.removeEventListener("pause",ue),I.removeEventListener("error",me),I.pause(),I.src="",I.load()}}},[v,r]),_.useEffect(()=>{let I=!1;return r&&r>0&&(isNaN(c)||!isFinite(c)||c<=0)&&(I||u(r)),()=>{I=!0}},[r,c]);const B=()=>{A.current&&(s?A.current.pause():A.current.play().catch(I=>{console.error("Play failed:",I)}))},V=I=>{if(A.current&&M.current&&c>0){const H=M.current.getBoundingClientRect(),U=I.clientX-H.left,R=H.width,z=Math.max(0,Math.min(c,U/R*c));isFinite(z)&&z>=0&&(A.current.currentTime=z,o(z))}},ee=I=>{const H=parseFloat(I.target.value);f(H),A.current&&(A.current.volume=H)},ae=I=>{const H=parseFloat(I.target.value);g(H),A.current&&(A.current.playbackRate=H)},Z=I=>{if(isNaN(I))return"0:00";const H=Math.floor(I/60),U=Math.floor(I%60);return`${H}:${U.toString().padStart(2,"0")}`};if(!e&&!t)return l.jsx("div",{className:`audio-player ${n}`,children:l.jsx("div",{className:"text-center text-gray-500 py-8",children:"No audio available"})});const L=(I=>{try{const U=(I||"").toLowerCase().split("?")[0].split("#")[0];return U.endsWith(".webm")?"audio/webm":U.endsWith(".mp3")?"audio/mpeg":U.endsWith(".m4a")?"audio/mp4":U.endsWith(".aac")?"audio/aac":U.endsWith(".wav")?"audio/wav":void 0}catch{return}})(v||t),K=zs.useMemo(()=>typeof window>"u"?!0:document.createElement("audio").canPlayType("audio/webm")!=="",[]);return l.jsxs("div",{className:`audio-player bg-gray-50 rounded-lg p-4 ${n}`,children:[l.jsx("audio",{ref:A,preload:"metadata",controls:!1,style:{display:"none"},crossOrigin:"anonymous",children:l.jsx("source",{src:v,type:L})}),x?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading audio..."})]}):k?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:"text-sm text-red-600",children:"This audio format isn't supported by your browser."}),v?l.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,L?l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",L]}):null,l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Browser WebM support: ",K?"Yes":"No",!K&&" - Try using Chrome, Firefox, or Edge"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Preferred format: WebM"})]}):C?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:"text-sm text-red-600",children:"Playback failed. Please try opening the audio directly."}),v?l.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,L?l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",L]}):null]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{ref:M,className:"w-full bg-gray-200 rounded-full h-3 cursor-pointer hover:h-4 transition-all min-h-[24px]",onClick:V,children:l.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${i/c*100}%`}})}),l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2 font-medium",children:[l.jsx("span",{children:Z(i)}),l.jsx("span",{children:Z(c)})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:B,className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:s?l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.617 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.617l3.766-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d,onChange:ee,className:"w-24 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer min-h-[20px]"}),l.jsxs("span",{className:"text-sm text-gray-600 w-10 font-medium",children:[Math.round(d*100),"%"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Speed:"}),l.jsxs("select",{value:h,onChange:ae,className:"text-sm border border-gray-300 rounded px-2 py-1",children:[l.jsx("option",{value:"0.5",children:"0.5x"}),l.jsx("option",{value:"0.75",children:"0.75x"}),l.jsx("option",{value:"1",children:"1x"}),l.jsx("option",{value:"1.25",children:"1.25x"}),l.jsx("option",{value:"1.5",children:"1.5x"}),l.jsx("option",{value:"2",children:"2x"})]})]})]})]})]})},J0e=({transcript:e,scores:t,audioBlob:r,recordingTime:n,onReRecord:s,onFinalSubmit:a,canReRecord:i,attemptNumber:o,maxAttempts:c,isSubmitting:u=!1})=>{const[d,f]=_.useState(!1);console.log(" FeedbackDisplay received recordingTime:",n);const h=(v,T)=>{const k=v/T*100;return k>=80?"text-green-600":k>=60?"text-yellow-600":"text-red-600"},g=(v,T)=>{const k=v/T*100;return k>=90?"A+":k>=80?"A":k>=70?"B":k>=60?"C":k>=50?"D":"F"},x=()=>g(t?.overall_score||0,100),y=()=>h(t?.overall_score||0,100);return console.log(" FeedbackDisplay received scores:",t),console.log(" Individual score values:",{grammar_score:t?.grammar_score,vocabulary_score:t?.vocabulary_score,pronunciation_score:t?.pronunciation_score,fluency_score:t?.fluency_score,content_score:t?.content_score}),l.jsxs("div",{className:"feedback-display bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Speaking Test Results"}),l.jsx("p",{className:"text-gray-600",children:"Review your performance and decide whether to submit or re-record."})]}),l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-3 sm:p-6 rounded-lg mb-6",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-4xl font-bold ${y()}`,children:[t?.overall_score||0,"/100"]}),l.jsxs("div",{className:`text-2xl font-semibold ${y()} mt-2`,children:["Grade: ",x()]}),l.jsx("div",{className:"text-gray-600 mt-2",children:t?.overall_score>=80?"Excellent work!":t?.overall_score>=60?"Good job!":t?.overall_score>=50?"Not bad, but could be better.":"Keep practicing!"})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Grammar"}),l.jsxs("span",{className:`font-bold ${h(t?.grammar_score||0,25)}`,children:[t?.grammar_score||0,"/25"]})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[t?.grammar_mistakes||0," mistakes found"]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Vocabulary"}),l.jsxs("span",{className:`font-bold ${h(t?.vocabulary_score||0,20)}`,children:[t?.vocabulary_score||0,"/20"]})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[t?.vocabulary_mistakes||0," vocabulary issues"]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Pronunciation"}),l.jsxs("span",{className:`font-bold ${h(t?.pronunciation_score||0,15)}`,children:[t?.pronunciation_score||0,"/15"]})]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Clarity and accuracy"}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Fluency"}),l.jsxs("span",{className:`font-bold ${h(t?.fluency_score||0,20)}`,children:[t?.fluency_score||0,"/20"]})]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Pace, pauses, and flow"}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Content"}),l.jsxs("span",{className:`font-bold ${h(t?.content_score||0,20)}`,children:[t?.content_score||0,"/20"]})]}),l.jsx("div",{className:"text-sm text-gray-600",children:"How well addressed the prompt"}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${Math.min((t?.content_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Word Count"}),l.jsxs("span",{className:"font-bold text-gray-700",children:[t?.word_count||0," words"]})]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total words spoken"}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${Math.min((t?.word_count||0)/100*100,100)}%`}})})]})]}),r&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Recording"}),l.jsx(wH,{audioBlob:r,recordingTime:n})]}),t?.feedback&&l.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-blue-50 p-3 sm:p-6 rounded-lg border border-green-200",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("span",{className:"text-green-600 text-2xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-green-800 mb-3 text-lg",children:"AI Feedback"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.feedback})]})]})}),t?.improved_transcript&&l.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[l.jsx("span",{className:"text-green-600 text-lg",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Improved Version"}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Here's how your response could be improved with better grammar and vocabulary:"})]})]}),l.jsx("div",{className:"bg-white border border-green-200 rounded p-3",children:l.jsx("p",{className:"text-gray-800 leading-relaxed",children:t.improved_transcript})})]}),l.jsx("div",{className:"mb-6",children:l.jsx("button",{onClick:()=>f(!d),className:"text-blue-600 hover:text-blue-800 text-sm",children:d?"Hide Details":"Show Details"})}),d&&l.jsxs("div",{className:"mb-6 bg-blue-50 p-3 sm:p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-3",children:"Detailed Analysis"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Word Count Analysis:"}),l.jsxs("span",{className:"ml-2 text-gray-700",children:["You spoke ",t?.word_count||0," words.",t?.word_count>=50?" Great job meeting the minimum requirement!":" Consider speaking more to meet the minimum word requirement."]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Grammar Analysis:"}),l.jsx("span",{className:"ml-2 text-gray-700",children:t?.grammar_mistakes===0?"Perfect grammar!":`Found ${t?.grammar_mistakes||0} grammar ${t?.grammar_mistakes===1?"mistake":"mistakes"}.`}),t?.grammar_corrections&&t.grammar_corrections.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:t.grammar_corrections.map((v,T)=>l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 sm:p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-red-600 font-mono text-sm",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-red-600",children:v.mistake}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),l.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[l.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Vocabulary Analysis:"}),l.jsx("span",{className:"ml-2 text-gray-700",children:t?.vocabulary_mistakes===0?"Excellent vocabulary usage!":`Found ${t?.vocabulary_mistakes||0} vocabulary ${t?.vocabulary_mistakes===1?"issue":"issues"}.`}),t?.vocabulary_corrections&&t.vocabulary_corrections.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:t.vocabulary_corrections.map((v,T)=>l.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded p-2 sm:p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-purple-600 font-mono text-sm",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-purple-600",children:v.mistake}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),l.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[l.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Pronunciation Analysis:"}),l.jsx("span",{className:"ml-2 text-gray-700",children:t?.pronunciation_corrections&&t.pronunciation_corrections.length>0?`Found ${t.pronunciation_corrections.length} pronunciation ${t.pronunciation_corrections.length===1?"tip":"tips"} to help improve clarity.`:"Great pronunciation! Your speech was clear and easy to understand."})]}),t?.pronunciation_corrections&&t.pronunciation_corrections.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Pronunciation Tips:"}),l.jsx("div",{className:"mt-2 space-y-2",children:t.pronunciation_corrections.map((v,T)=>l.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded p-2 sm:p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-orange-600 font-mono text-sm",children:""}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-orange-700",children:v.word}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium text-green-700",children:v.correction})]})})]})},T))})]}),t?.language_use_corrections&&t.language_use_corrections.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Language Use Suggestions:"}),l.jsx("div",{className:"mt-2 space-y-2",children:t.language_use_corrections.map((v,T)=>l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 sm:p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-blue-600 font-mono text-sm",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-blue-700",children:v.mistake}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium text-green-700",children:v.suggestion})]}),v.explanation&&l.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:[l.jsx("strong",{children:"Why:"})," ",v.explanation]})]})]})},T))})]})]})]}),l.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Attempt ",o," of ",c]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[i&&l.jsxs("button",{onClick:s,className:"w-full sm:w-auto bg-yellow-600 text-white px-4 py-2.5 rounded-lg hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Re-record"})]}),l.jsx("button",{onClick:a,disabled:u,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium ${u?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white`,children:u?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),l.jsx("span",{children:"Submitting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Submit Final"})]})})]}),!i&&l.jsx("div",{className:"mt-4 p-2 sm:p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("p",{className:"text-yellow-800 text-sm",children:[l.jsx("strong",{children:"Maximum attempts reached."}),' This is your final attempt. Click "Submit Final" to complete the test.']})})]})},Q0e=({testData:e,onComplete:t,onExit:r,onTestComplete:n})=>{const[s,a]=_.useState("recording"),[i,o]=_.useState(null),[c,u]=_.useState(""),[d,f]=_.useState(null),[h,g]=_.useState(!1),[x,y]=_.useState(!1),[v,T]=_.useState(!1),[k,b]=_.useState(null),[C,E]=_.useState(1),[j]=_.useState(e.max_attempts||3),[P,A]=_.useState(!1),[M,F]=_.useState(0),[B,V]=_.useState(!1),[ee,ae]=_.useState(!0),Z=_.useRef(null),[te,L]=_.useState(0),[K,I]=_.useState(null),H=zl(),{user:U}=Os(),{makeAuthenticatedRequest:R}=H,z=_.useRef(null);w2(ee,_.useCallback(({confirm:je,cancel:We})=>{console.log(" SpeakingTestStudent: Browser back button intercepted during test!"),console.log(" SpeakingTestStudent: isBackInterceptEnabled:",ee),console.log(" SpeakingTestStudent: Setting pending navigation and showing modal"),Z.current={confirm:je,cancel:We},T(!0)},[ee])),_.useEffect(()=>{s!=="completed"?ae(!0):(ae(!1),Z.current=null)},[s]),_.useEffect(()=>{if(e?.test_id&&U?.student_id){const je=`speaking_attempts_${U.student_id}_${e.test_id}`,We=localStorage.getItem(je);if(We){const Me=parseInt(We,10);Me>0&&Me<=j&&(E(Me),console.log(" Loaded attempts from localStorage:",Me))}}},[e,U,j]),_.useEffect(()=>{if(e&&!K){const je=new Date;I(je),console.log(" Speaking test timer started at:",je.toISOString())}},[e,K]),_.useEffect(()=>{let je=0;s==="recording"?je=25:s==="processing"?je=50:s==="feedback"?je=75:s==="completed"&&(je=100),L(je)},[s]),_.useEffect(()=>{(async()=>{try{if(!window.isSecureContext&&!window.location.hostname.includes("localhost")){b("Microphone access requires HTTPS. Please use a secure connection.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){b("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");return}if(navigator.permissions)try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(A(!0),console.log(" Microphone permission already granted")):console.log(" Microphone permission not yet granted - user will need to click record button")}catch(We){console.log(" Could not check microphone permission status:",We)}}catch(We){console.error(" Error checking microphone permission:",We)}})()},[]),_.useEffect(()=>{const je=setInterval(()=>{i&&s==="recording"&&G()},3e4);return()=>clearInterval(je)},[i,s]);const G=_.useCallback(async()=>{try{const je={test_id:e.test_id,audio_blob:i?await X(i):null,attempt_number:C,step:s,timestamp:new Date().toISOString()};localStorage.setItem(`speaking_progress_${e.test_id}`,JSON.stringify(je))}catch(je){console.error("Failed to save progress:",je)}},[e.test_id,i,C,s]),X=je=>new Promise((We,Me)=>{const Nt=new FileReader;Nt.onloadend=()=>{const St=Nt.result.split(",")[1];We(St)},Nt.onerror=Me,Nt.readAsDataURL(je)}),ne=_.useCallback(je=>{if(e?.test_id&&U?.student_id){const We=`speaking_attempts_${U.student_id}_${e.test_id}`;localStorage.setItem(We,je.toString()),console.log(" Saved attempts to localStorage:",je)}},[e,U]),q=_.useCallback(async(je,We,Me,Nt,$e)=>{if(e?.test_id&&U?.student_id)try{const{setCachedData:St,CACHE_TTL:At}=await Za(async()=>{const{setCachedData:yr,CACHE_TTL:it}=await Promise.resolve().then(()=>hp);return{setCachedData:yr,CACHE_TTL:it}},void 0),Bt=`speaking_test_data_${U.student_id}_${e.test_id}`,or={audioBlob:je?await X(je):null,transcript:We,scores:Me,recordingTime:Nt,currentStep:$e,timestamp:Date.now()};St(Bt,or,At.speaking_test_data),console.log(" Saved speaking test data to cache:",Bt)}catch(St){console.error("Failed to save speaking test data to cache:",St)}},[e,U]),se=_.useCallback(async()=>{if(e?.test_id&&U?.student_id)try{const{getCachedData:je}=await Za(async()=>{const{getCachedData:Nt}=await Promise.resolve().then(()=>hp);return{getCachedData:Nt}},void 0),We=`speaking_test_data_${U.student_id}_${e.test_id}`,Me=je(We);if(Me){if(console.log(" Loaded speaking test data from cache:",Me),Me.audioBlob){const Nt=new Blob([Uint8Array.from(atob(Me.audioBlob),$e=>$e.charCodeAt(0))],{type:"audio/webm"});o(Nt)}return Me.transcript&&u(Me.transcript),Me.scores&&f(Me.scores),Me.recordingTime&&F(Me.recordingTime),Me.currentStep&&a(Me.currentStep),!0}}catch(je){console.error("Failed to load speaking test data from cache:",je)}return!1},[e,U]);_.useEffect(()=>{if(e?.test_id&&U?.student_id){try{const je=U.student_id,We=`retest_assignment_id_${je}_speaking_${e.test_id}`,Me=`retest_in_progress_${je}_speaking_${e.test_id}`;if(!!localStorage.getItem(We)||!!localStorage.getItem(Me)){const $e=`speaking_test_data_${je}_${e.test_id}`,St=`anti_cheating_${je}_speaking_${e.test_id}`,At=`speaking_progress_${e.test_id}`;localStorage.removeItem($e),localStorage.removeItem(St),localStorage.removeItem(At),console.log(" Cleared speaking per-test cache for retest start:",{cacheKey:$e,antiCheatKey:St,progressKey:At})}}catch{}se()}},[e,U,se]),_.useEffect(()=>{e?.test_id&&U?.student_id&&(i||c||d)&&q(i,c,d,M,s)},[i,c,d,M,s,e,U,q]);const ue=_.useCallback(async(je,We)=>{if(B){console.log(" Already processing, skipping duplicate call");return}console.log(" Recording completed, duration:",We),V(!0),o(je),F(We),a("processing"),b(null);try{const Me=await X(je),Nt=new Date,$e=e.start_time?Math.round((Nt-e.start_time)/1e3):0,St=e.start_time?new Date(e.start_time).toISOString():Nt.toISOString(),At=U.student_id,Bt=`retest_assignment_id_${At}_speaking_${e.test_id}`,Gt=localStorage.getItem(Bt),or={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:At,question_id:e.question_id||1,audio_blob:Me,audio_duration:We,time_taken:$e,started_at:St,submitted_at:Nt.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:Gt?Number(Gt):null,parent_test_id:e.test_id};console.log(" Submitting speaking test:",or),console.log(" Processing audio with AI...");try{const it=await(await R("/.netlify/functions/process-speaking-audio-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e.test_id,question_id:e.question_id||1,audio_blob:Me})})).json();if(it.success){console.log(" AI Analysis Result:",it),u(it.transcript);const Ve=it.transcript?it.transcript.split(/\s+/).filter(nt=>nt.length>0).length:0;console.log(" Word Count Verification:",{aiCount:it.word_count,actualCount:Ve,transcript:it.transcript});const at=Ve,pt={overall_score:it.overall_score,word_count:at,grammar_score:it.grammar_score,vocabulary_score:it.vocabulary_score,pronunciation_score:it.pronunciation_score,fluency_score:it.fluency_score,content_score:it.content_score,grammar_mistakes:it.grammar_mistakes,vocabulary_mistakes:it.vocabulary_mistakes,feedback:it.feedback,improved_transcript:it.improved_transcript,grammar_corrections:it.grammar_corrections||[],vocabulary_corrections:it.vocabulary_corrections||[],language_use_corrections:it.language_use_corrections||[],pronunciation_corrections:it.pronunciation_corrections||[],ai_feedback:it.ai_feedback||null};console.log(" Mapped Scores:",pt),console.log(" Individual scores check:",{grammar_score:it.grammar_score,vocabulary_score:it.vocabulary_score,pronunciation_score:it.pronunciation_score,fluency_score:it.fluency_score,content_score:it.content_score}),f(pt),a("feedback")}else throw new Error(it.message||it.error||"Failed to process audio with AI");localStorage.removeItem(`speaking_progress_${e.test_id}`)}catch(yr){console.error("Speaking test submission error:",yr),yr.message.includes("No valid authentication token found")?(b("Your session has expired. Please refresh the page and try again."),setTimeout(()=>{window.location.reload()},3e3)):b(yr.message),a("recording")}}catch(Me){console.error("Speaking test submission error:",Me),b(Me.message),a("recording")}finally{V(!1)}},[e,U,R,C,ne,B]);_.useEffect(()=>{s==="processing"&&!c&&!d&&(console.log(' Detected stuck "processing" state on reload. Attempting recovery...'),i?(console.log(" Resuming processing from cached audio blob..."),ue(i,M)):(console.log(" No cached audio blob found. Resetting to recording step."),a("recording")))},[s,c,d,i,M,ue]);const me=_.useCallback(()=>{if(C<j){o(null),u(""),f(null),b(null),V(!1);const je=C+1;E(je),ne(je),a("recording")}else b("Maximum attempts reached")},[C,j,ne]),Ne=_.useCallback(async()=>{if(!(!c||!d)){g(!0);try{const je=new Date,We=e.start_time?Math.round((je-e.start_time)/1e3):0,Me=e.start_time?new Date(e.start_time).toISOString():je.toISOString(),Nt=U.student_id,$e=`retest_assignment_id_${Nt}_speaking_${e.test_id}`,St=localStorage.getItem($e),{academicCalendarService:At}=await Za(async()=>{const{academicCalendarService:Ve}=await Promise.resolve().then(()=>l3);return{academicCalendarService:Ve}},void 0);await At.loadAcademicCalendar();const Gt=At.getCurrentTerm()?.id;if(!Gt)throw new Error("No current academic period found");const or={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Nt,academic_period_id:Gt,question_id:e.question_id||1,audio_blob:i?await X(i):null,audio_duration:i?.duration||0,time_taken:We,started_at:Me,submitted_at:je.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:St?Number(St):null,parent_test_id:e.test_id,transcript:c,scores:d,final_submission:!0};console.log(" Final submission:",or),console.log(" Making final submission request...");const yr=await R("/.netlify/functions/submit-speaking-test-final",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(or)});console.log(" Final submission response status:",yr.status);const it=await yr.json();if(console.log(" Final submission result:",it),it.success){if(U?.student_id){const wr=`test_completed_${U.student_id}_speaking_${e.test_id}`;localStorage.setItem(wr,"true"),console.log(" Speaking test marked as completed in localStorage:",wr);const ft=`retest_in_progress_${U.student_id}_speaking_${e.test_id}`;localStorage.removeItem(ft),console.log(" Cleared in-progress retest lock:",ft);const Tt=`speaking_attempts_${U.student_id}_${e.test_id}`;localStorage.removeItem(Tt),console.log(" Cleared attempts from localStorage upon submission");const{clearTestData:Ot}=await Za(async()=>{const{clearTestData:he}=await Promise.resolve().then(()=>hp);return{clearTestData:he}},void 0);Ot(U.student_id,"speaking_test_data",e.test_id),console.log(" Cleared speaking test data from cache upon submission");try{const he=`anti_cheating_${U.student_id}_speaking_${e.test_id}`;localStorage.removeItem(he),console.log(" Cleared anti-cheating key:",he)}catch{}}console.log(" Caching speaking test results after submission...");const at=`student_results_table_${U?.student_id||U?.id||"unknown"}`,{setCachedData:pt,getCachedData:nt,CACHE_TTL:kt,clearTestData:Wt}=await Za(async()=>{const{setCachedData:wr,getCachedData:ft,CACHE_TTL:Tt,clearTestData:Ot}=await Promise.resolve().then(()=>hp);return{setCachedData:wr,getCachedData:ft,CACHE_TTL:Tt,clearTestData:Ot}},void 0),rr={id:Date.now(),test_id:e.test_id,test_type:"speaking",test_name:e.test_name,score:Math.round(d.overall_score/10),max_score:10,percentage:d.overall_score,caught_cheating:!1,visibility_change_times:0,is_completed:!0,submitted_at:new Date().toISOString(),subject:"Listening and Speaking",teacher_name:e.teacher_name||"Unknown"};let ur={success:!0,results:[],count:0};try{const wr=nt(at);wr&&Array.isArray(wr.results)&&(ur.results=wr.results.slice())}catch{}if(ur.results.unshift(rr),ur.count=ur.results.length,pt(at,ur,kt.student_results_table),console.log(" Speaking test results cached (merged) with key:",at),U?.student_id&&Wt(U.student_id,"speaking",e.test_id),!!St&&U?.student_id){let wr=3;try{const Ot=localStorage.getItem(`student_active_tests_${U.student_id}`);if(Ot){const Ee=JSON.parse(Ot)?.tests?.find(Ae=>Ae.test_id===e.test_id&&Ae.test_type==="speaking");Ee&&(wr=Ee.retest_attempts_left||Ee.max_attempts||3)}}catch(Ot){console.error("Error checking active tests cache:",Ot)}const Tt=(d?.overall_score??0)>=50;if(Tt){const Ot=`retest_attempt${wr}_${U.student_id}_speaking_${e.test_id}`;localStorage.setItem(Ot,"true"),console.log(" Passed retest, marking last-slot key:",Ot);let he=0;for(let Fe=1;Fe<=10;Fe++){const xt=`retest_attempt${Fe}_${U.student_id}_speaking_${e.test_id}`;localStorage.getItem(xt)==="true"&&he++}const Ee=`test_completed_${U.student_id}_speaking_${e.test_id}`;localStorage.setItem(Ee,"true"),console.log(" Marked retest as completed (student passed):",Ee);const Ae=`retest_attempts_${U.student_id}_speaking_${e.test_id}`;localStorage.setItem(Ae,JSON.stringify({used:he,max:wr})),console.log(" Set retest attempts metadata (student passed):",Ae,{used:he,max:wr})}else{let Ot=1;for(let xt=1;xt<=10;xt++){const $t=`retest_attempt${xt}_${U.student_id}_speaking_${e.test_id}`;if(localStorage.getItem($t)!=="true"){Ot=xt;break}}const he=`retest_attempt${Ot}_${U.student_id}_speaking_${e.test_id}`;localStorage.setItem(he,"true"),console.log(" Marked retest attempt as completed:",he);let Ee=0;for(let xt=1;xt<=10;xt++){const $t=`retest_attempt${xt}_${U.student_id}_speaking_${e.test_id}`;localStorage.getItem($t)==="true"&&Ee++}const Ae=wr-Ee,Fe=Ae<=0||Tt;if(console.log(" Retest completion check:",{usedAttempts:Ee,maxAttempts:wr,attemptsLeft:Ae,passed:Tt,shouldComplete:Fe}),Fe){const xt=`test_completed_${U.student_id}_speaking_${e.test_id}`;localStorage.setItem(xt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",xt);const $t=`retest_attempts_${U.student_id}_speaking_${e.test_id}`;localStorage.setItem($t,JSON.stringify({used:Ee,max:wr})),console.log(" Set retest attempts metadata (attempts exhausted):",$t,{used:Ee,max:wr})}}}if(U?.student_id){const wr=`retest1_${U.student_id}_speaking_${e.test_id}`,ft=`retest_assignment_id_${U.student_id}_speaking_${e.test_id}`;localStorage.removeItem(wr),localStorage.removeItem(ft)}try{n&&n(d.overall_score),typeof r=="function"&&r()}catch{}return}else throw new Error(it.message||"Failed to submit speaking test")}catch(je){console.error("Speaking test submission error:",je),b(je.message)}finally{g(!1)}}},[e,U,R,c,d,i,C,t]);_.useCallback(()=>{a("completed"),t({test_id:e.test_id,transcript:c,scores:d,attempt_number:C})},[e.test_id,c,d,C,t]);const ce=_.useCallback(()=>{console.log(" SpeakingTestStudent: handleExitConfirm called"),console.log(" SpeakingTestStudent: Current location:",window.location.href),console.log(" SpeakingTestStudent: Current history state:",window.history.state),T(!1);const je=Z.current;if(console.log(" SpeakingTestStudent: Pending navigation:",je),Z.current=null,e?.test_id&&U?.student_id){const Me=`anti_cheating_${U?.student_id||U?.id||"unknown"}_speaking_${e.test_id}`,$e=(Ts(Me)||{tabSwitches:0}).tabSwitches||0,St=$e+1,At=St>=2;console.log(" SpeakingTestStudent: Tab switch count:",$e,"->",St),hs(Me,{tabSwitches:St,isCheating:At},as.anti_cheating)}if(console.log(" SpeakingTestStudent: Disabling intercept"),ae(!1),je){console.log(" SpeakingTestStudent: Cleaning up intercept history state");try{const We=window.history.state;if(console.log(" SpeakingTestStudent: Current history state before cleanup:",We),We&&We.__intercept){const Me=We.prevState??null;console.log(" SpeakingTestStudent: Restoring previous state:",Me),window.history.replaceState(Me,document.title,window.location.href),console.log(" SpeakingTestStudent: History state after cleanup:",window.history.state)}}catch(We){console.warn(" SpeakingTestStudent: Failed to restore history state:",We)}}console.log(" SpeakingTestStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" SpeakingTestStudent: Executing navigation to /student"),console.log(" SpeakingTestStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" SpeakingTestStudent: window.location.href set to /student")},100)},[r,e,U?.student_id,U?.id]),Ue=_.useCallback(()=>{const je=Z.current;Z.current=null,je?.cancel&&je.cancel(),T(!1),s!=="completed"&&ae(!0)},[s]),pe=()=>{switch(s){case"recording":return l.jsxs("div",{className:"speaking-test-recording",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:e.test_name}),l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),l.jsx("p",{className:"text-gray-700 mb-4",children:e.prompt}),l.jsx("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Requirements:"})," Minimum ",e.min_words||50," words, 0-",e.max_duration||600," seconds duration"]})})]}),l.jsx(X0e,{ref:z,onRecordingComplete:ue,minDuration:0,maxDuration:e.max_duration||600,minWords:e.min_words||50,maxAttempts:j,currentAttempt:C}),k&&l.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:k})})]});case"processing":return l.jsxs("div",{className:"transcription-status bg-white rounded-lg shadow-lg p-4 sm:p-8 text-center",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Processing Your Speech"}),l.jsx("p",{className:"text-lg text-blue-600",children:"Please wait while we process your audio..."})]}),l.jsxs("div",{className:"inline-flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]});case"feedback":return console.log(" Rendering feedback step with Submit Final button"),l.jsx(J0e,{transcript:c,scores:d,audioBlob:i,recordingTime:M,onReRecord:me,onFinalSubmit:()=>y(!0),canReRecord:C<j,attemptNumber:C,maxAttempts:j,isSubmitting:h});case"completed":const je={showResults:!0,testInfo:{test_name:e?.test_name||"Speaking Test",id:e?.test_id,test_id:e?.test_id},testType:"speaking",score:d?.overall_score||0,totalQuestions:1,percentage:d?.overall_score||0,passed:(d?.overall_score||0)>=50,questionAnalysis:[{questionNumber:1,userAnswer:c,correctAnswer:"Speaking test completed",isCorrect:!0,score:d?.overall_score||0,maxScore:100,feedback:`Word Count: ${d?.word_count||0}, Grammar: ${d?.grammar_score||0}/40, Vocabulary: ${d?.vocab_score||0}/30`}],timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};return l.jsx("div",{className:"speaking-test-completed",children:l.jsx(_2,{testResults:je,onBackToCabinet:()=>{Z.current=null,T(!0)},onRetakeTest:()=>{a("recording"),u(""),f(null),o(null),E(1)},isLoading:!1})});default:return null}};return l.jsxs("div",{children:[l.jsx(Na,{isOpen:x&&!h,onClose:()=>y(!1),title:"Submit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:()=>y(!1),variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:()=>{y(!1),Ne()},variant:"primary",children:"Submit"})]})]})}),l.jsx(Na,{isOpen:v,onClose:Ue,title:"Exit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:Ue,variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:je=>{console.log(" SpeakingTestStudent: Go Back button clicked in modal"),console.log(" SpeakingTestStudent: Button click event:",je),ce()},variant:"primary",children:"Go Back"})]})]})}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6",children:[k&&l.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:k})}),pe()]})]})},Z0e=e=>function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296},efe=(e,t,r)=>{if(e.length===1)return e[0];const n=`${r}:speaking:${t}`,s=Array.from(n).reduce((o,c)=>(o<<5)-o+c.charCodeAt(0),0)>>>0,a=Z0e(s),i=Math.floor(a()*e.length);return e[i]},tfe=()=>{const{testId:e}=j_(),t=Wo(),{user:r}=Os(),n=zl(),{showNotification:s}=ai(),[a,i]=_.useState(null),[o,c]=_.useState([]),[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,x]=_.useState(null),[y,v]=_.useState(!1),[T,k]=_.useState(null),[b,C]=_.useState(!1),{startTracking:E,stopTracking:j}=_1("speaking",e,r?.student_id||r?.id);_.useEffect(()=>{P(),A()},[e]),_.useEffect(()=>{if(a&&!y){be.debug(" Speaking test - initializing anti-cheating tracking");const V=r?.student_id||r?.id||"unknown",ee=`anti_cheating_${V}_speaking_${e}`,ae=localStorage.getItem(ee);if(be.debug(" Checking for anti-cheating data with key:",ee),be.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),be.debug(" Current test details:",{testType:"speaking",testId:e,studentId:V}),ae)try{const Z=JSON.parse(ae);be.debug(" Found existing anti-cheating data for THIS speaking test:",Z),be.debug(" Visibility change times for this test:",Z.tabSwitches||0),be.debug(" Cheating status for this test:",Z.isCheating||!1),Z.isCheating&&(be.debug(" WARNING: Student has been flagged for cheating in THIS speaking test!"),be.debug(" Tab switches detected in this test:",Z.tabSwitches),s(` Warning: Suspicious activity detected in this speaking test (${Z.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(Z){be.error(" Error parsing existing anti-cheating data:",Z)}else be.debug(" No existing anti-cheating data found for this speaking test - starting fresh");E(),be.debug(" Anti-cheating tracking started for speaking test")}return()=>{a&&(be.debug(" Cleaning up anti-cheating tracking for speaking test"),j())}},[a,y,e,r?.student_id,r?.id,E,j,s]);const P=async()=>{try{h(!0);const V=await n.getSpeakingTest(e);if(V.success)i(V.test);else throw new Error(V.message||"Failed to load test");const ee=await n.getSpeakingTestQuestions(e);if(ee.success){const ae=ee.questions;c(ae);const Z=r?.student_id||r?.id,te=efe(ae,e,Z);d(te),be.debug(" Selected question for student:",{studentId:Z,testId:e,totalQuestions:ae.length,selectedQuestion:te?.id,selectedPrompt:te?.prompt?.substring(0,50)+"..."})}}catch(V){be.error("Error loading test data:",V),x(V.message)}finally{h(!1)}},A=()=>{const ee=`test_completed_${r?.student_id||r?.id}_speaking_${e}`;if(localStorage.getItem(ee)==="true"){v(!0);const Z=localStorage.getItem(`speaking_test_result_${e}`);Z&&k(JSON.parse(Z))}},M=async V=>{try{v(!0),k(V),localStorage.setItem(`speaking_test_result_${e}`,JSON.stringify(V)),window.dispatchEvent(new CustomEvent("testCompleted",{detail:{testId:e,testType:"speaking"}})),setTimeout(()=>{t("/student")},2e3)}catch(ee){be.error("Error handling test completion:",ee)}},F=()=>{if(be.debug(" Navigating back to cabinet from speaking test..."),a&&r?.student_id){be.debug(" Cabinet navigation detected - counting as cheating attempt");const ee=`anti_cheating_${r?.student_id||r?.id||"unknown"}_speaking_${e}`,ae=localStorage.getItem(ee);let Z=0,te=!1;if(ae)try{const H=JSON.parse(ae);Z=H.tabSwitches||0,te=H.isCheating||!1}catch(H){be.error(" Error parsing existing anti-cheating data:",H)}const L=Z+1,K=L>=2;be.debug(` Tab switch count: ${Z}  ${L} (cheating: ${K})`);const I={tabSwitches:L,isCheating:K,lastUpdated:new Date().toISOString()};localStorage.setItem(ee,JSON.stringify(I)),be.debug(" Anti-cheating data updated for cabinet navigation:",I)}t("/student")};if(f)return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(rt,{variant:"outline",onClick:()=>C(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),l.jsx("p",{className:"text-gray-600 mt-4",children:"Loading speaking test..."})]})})})]});if(g)return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(rt,{variant:"outline",onClick:()=>C(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-6",children:g})]})})})]});if(y&&T)return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test Results"})}),l.jsx(rt,{variant:"outline",onClick:()=>C(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx(_2,{testType:"speaking",testData:a,result:T,onRetake:()=>{v(!1),k(null);const V=JSON.parse(localStorage.getItem("userData")||"{}").student_id;localStorage.removeItem(`test_completed_${V}_speaking_${e}`)}})})]});if(!a||o.length===0)return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(rt,{variant:"outline",onClick:()=>C(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Test Data"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to load test information"})]})})})]});const B=u;return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx(Na,{isOpen:b,onClose:()=>C(!1),title:"Exit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(rt,{onClick:()=>C(!1),variant:"secondary",children:"Cancel"}),l.jsx(rt,{onClick:()=>{C(!1),F()},variant:"primary",children:"Go Back"})]})]})}),l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(rt,{variant:"outline",onClick:()=>C(!0),children:"Back to Cabinet"})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.length>1&&u&&l.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs font-bold",children:"i"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Question Selection"}),l.jsx("div",{className:"mt-1 text-sm text-blue-700",children:l.jsxs("p",{children:["This test has ",o.length," questions. You have been assigned ",l.jsxs("strong",{children:["Question ",u.question_number]}),"."]})})]})]})}),l.jsx(Q0e,{testData:{...a,test_id:parseInt(e),question_id:B?.id,prompt:B?.prompt,start_time:Date.now()},onComplete:M,onExit:F,onTestComplete:M})]})]})},rfe=()=>{const{testType:e,testId:t}=j_(),r=Wo(),{activeTests:n}=b2(),s=()=>{be.debug(" [DEBUG] handleBackToCabinet called in TestPage"),be.debug(" [DEBUG] Current location before navigate:",window.location.pathname),be.debug(' [DEBUG] Calling navigate("/student")'),r("/student"),be.debug(" [DEBUG] Navigate called, checking result..."),setTimeout(()=>{be.debug(" [DEBUG] Location after navigate:",window.location.pathname),window.location.pathname!=="/student"&&(be.debug(" [DEBUG] Navigation failed, forcing window.location.href"),window.location.href="/student")},50)},a=n.find(o=>o.test_type===e&&o.test_id===parseInt(t)),i=y0();return be.debug(" [DEBUG] TestPage rendering, location:",i.pathname,"testType:",e,"testId:",t),l.jsx(q0e,{onBackToCabinet:s,currentTest:a||{test_type:e,test_id:parseInt(t)}},`test-${e}-${t}`)},nfe=()=>{const e=Wo(),{user:t,isAuthenticated:r,isLoading:n}=Os(),[s,a]=_.useState(!1),[i,o]=_.useState(!0),[c,u]=_.useState(""),[d,f]=_.useState([]),[h,g]=_.useState(!1),[x,y]=_.useState(!1),[v,T]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),k=_.useCallback(async()=>{be.debug(" Initializing Student Application...");try{if(o(!0),u(""),!r||!t){be.debug(" User not authenticated, redirecting to login"),e("/login");return}if(t.role!==Ro.STUDENT){be.error(" Invalid user role for student app:",t.role),u("Access denied. Student role required.");return}be.debug(" Initializing event listeners..."),b(),be.debug(" Setting up back to cabinet button listeners..."),C(),be.debug(" Setting up password change form listener..."),E(),be.debug(" Loading student data..."),await j(),be.debug(" Exposing student functions globally..."),P(),be.debug(" Populating student info from user data..."),ee(t),a(!0),be.debug(" Student Application initialization complete!")}catch(te){be.error(" Error initializing student app:",te),u("Failed to initialize student application")}finally{o(!1)}},[r,t,e]);_.useEffect(()=>{n||k()},[n,r,t,k]);const b=_.useCallback(()=>{be.debug(" Setting up student event listeners...");const te=K=>{h&&!K.target.closest(".student-menu")&&g(!1)},L=K=>{K.key==="Escape"&&h&&g(!1)};return document.addEventListener("click",te),document.addEventListener("keydown",L),()=>{document.removeEventListener("click",te),document.removeEventListener("keydown",L)}},[h]),C=_.useCallback(()=>{be.debug(" Setting up back to cabinet listeners...")},[]),E=_.useCallback(()=>{be.debug(" Setting up password change form...")},[]),j=_.useCallback(async()=>{be.debug(" Loading student data...");try{be.debug(" Student data loaded successfully")}catch(te){throw be.error(" Error loading student data:",te),te}},[]),P=_.useCallback(()=>{be.debug(" Exposing student functions globally..."),window.toggleStudentMenu=A,window.showChangePasswordTab=M,window.hideChangePasswordTab=F,window.navigateBackToCabinet=V,window.handlePasswordChange=B,window.populateStudentInfoDirectly=ee,be.debug(" All student functions exposed globally")},[]),A=_.useCallback(()=>{be.debug(" toggleStudentMenu called"),g(te=>{const L=!te;return be.debug(" Menu state changed from",te,"to",L),L}),be.debug(" Toggled dropdown menu")},[]),M=_.useCallback(()=>{be.debug(" showChangePasswordTab called"),y(!0),g(!1)},[]),F=_.useCallback(()=>{be.debug(" hideChangePasswordTab called"),y(!1),T({currentPassword:"",newPassword:"",confirmPassword:""})},[]),B=_.useCallback(async te=>{te.preventDefault(),be.debug(" handlePasswordChange called");const{currentPassword:L,newPassword:K,confirmPassword:I}=v;if(!L||!K||!I){ae("Please fill in all fields","error");return}if(K!==I){ae("New passwords do not match","error");return}if(K.length<6){ae("New password must be at least 6 characters long","error");return}const H=/[a-zA-Z]/.test(K),U=/[0-9]/.test(K);if(!H||!U){ae("New password must contain both letters and numbers","error");return}if(!t||!t.student_id){ae("Session expired. Please login again.","error");return}const R=t.student_id;if(window.confirm("Are you sure you want to change your password?"))try{o(!0);const z=await $s.changePassword({studentId:R,currentPassword:L,newPassword:K});z.success?(ae("Password changed successfully!","success"),F()):ae(z.message||"Failed to change password","error")}catch(z){be.error("Password change error:",z),ae("Failed to change password. Please try again.","error")}finally{o(!1)}},[v,t]),V=_.useCallback(()=>{if(be.debug("[DEBUG] navigateBackToCabinet called"),!r||!t){be.warn("[WARN] No valid user found, redirecting to login"),e("/login");return}t.role===Ro.STUDENT?(be.debug("[DEBUG] Navigating to student cabinet"),e("/student")):(be.warn("[WARN] Unknown user role, redirecting to login"),e("/login"))},[r,t,e]),ee=_.useCallback(te=>{be.debug(" populateStudentInfoDirectly called with:",te);try{be.debug(" Student info populated successfully")}catch(L){be.error(" Error populating student info:",L)}},[]),ae=_.useCallback((te,L)=>{const K={id:Date.now(),message:te,type:L,timestamp:new Date};f(I=>[...I,K]),setTimeout(()=>{f(I=>I.filter(H=>H.id!==K.id))},Xm.NOTIFICATION_DURATION)},[]),Z=_.useCallback(te=>{const{name:L,value:K}=te.target;T(I=>({...I,[L]:K}))},[]);return i?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing Student Application..."})]})}):c?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Initialization Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:c}),l.jsx(rt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?l.jsxs("div",{className:"bg-gray-50",children:[l.jsxs(KT,{children:[l.jsx(Xs,{path:"/",element:l.jsxs("div",{className:"student-app",children:[l.jsx(W0e,{isMenuOpen:h,onToggleMenu:A,onShowPasswordChange:M}),x&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Change Password"}),l.jsxs("form",{onSubmit:B,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),l.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:Z,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),l.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:Z,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:Z,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx(rt,{type:"button",variant:"secondary",onClick:F,className:"flex-1",children:"Cancel"}),l.jsx(rt,{type:"submit",variant:"primary",disabled:i,className:"flex-1",children:i?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",className:"mr-2"}),"Changing..."]}):"Change Password"})]})]})]})})]})}),l.jsx(Xs,{path:"/test/:testType/:testId",element:l.jsx(rfe,{})}),l.jsx(Xs,{path:"matching-test/:testId",element:l.jsx(K0e,{})}),l.jsx(Xs,{path:"word-matching-test/:testId",element:l.jsx(Y0e,{})}),l.jsx(Xs,{path:"speaking-test/:testId",element:l.jsx(tfe,{})}),l.jsx(Xs,{path:"/results",element:l.jsx(vH,{})})]}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:d.map(te=>l.jsx(ou,{type:te.type,message:te.message,onClose:()=>f(L=>L.filter(K=>K.id!==te.id))},te.id))})]}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Setting up Student Application..."})]})})},sfe=()=>l.jsx(mB,{children:l.jsx(lH,{children:l.jsx(iH,{children:l.jsx(nfe,{})})})}),afe=({result:e,isOpen:t,onClose:r,initialTab:n="overview",editingSpeakingScore:s,tempSpeakingScore:a,isSavingSpeakingScore:i,onStartSpeakingScoreEdit:o,onSaveSpeakingScore:c,onCancelSpeakingScoreEdit:u,onTempSpeakingScoreChange:d})=>{const[f,h]=_.useState(n),g=_.useRef(!1);if(_.useEffect(()=>()=>{g.current=!0},[]),_.useEffect(()=>{t&&h(n)},[t,n]),!t||!e)return null;const x={test_id:e.test_id,test_name:e.test_name,subject_id:e.subject_id};let y=e?.__audioUrl||void 0;const v=y?void 0:e?.answers;typeof v=="string"?y=v:v&&typeof v=="object"&&(y=v.audio_url),_.useEffect(()=>{console.log("[SpeakingReview] Transcript sources",{fromResult:e?.transcript,fromAnswersObject:typeof v=="object"&&v?.transcript?v.transcript:void 0,hasAnswers:!!v,test_id:e?.test_id,student_id:e?.student_id})},[e?.test_id,e?.student_id]);const[T,k]=_.useState("");_.useEffect(()=>{const C=new AbortController;let E=!1;const j=e?.__studentId||e?.student_id;return!e?.transcript&&!(typeof v=="object"&&v?.transcript)&&e?.test_id&&j&&(async()=>{try{const P=`/.netlify/functions/get-speaking-test-new?action=transcript&test_id=${encodeURIComponent(e.test_id)}&student_id=${encodeURIComponent(j)}`;console.log("[SpeakingReview] Fetching transcript from API:",{url:P});const A=await(window.tokenManager?.getToken()||ua.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),M=await fetch(P,{headers:{Authorization:A?`Bearer ${A}`:""},signal:C.signal});console.log("[SpeakingReview] Transcript API response:",{ok:M.ok,status:M.status});const F=await M.json().catch(()=>({}));console.log("[SpeakingReview] Transcript API body:",F),!E&&!g.current&&(M.ok?k(F.transcript||""):console.warn("[SpeakingReview] Transcript API failed:",F?.error||"unknown error"))}catch(P){P.name!=="AbortError"&&!g.current&&console.error("[SpeakingReview] Transcript fetch error:",P)}})(),()=>{E=!0;try{C.abort()}catch{}}},[e]);const b={score:e.score,max_score:e.max_score,percentage:e.percentage,audio_url:y,transcript:e.transcript||T||(typeof v=="object"&&v?.transcript?v.transcript:void 0),time_taken:e.time_taken,started_at:e.started_at,submitted_at:e.submitted_at};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[l.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Speaking Test Review - ",x.test_name]}),l.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),l.jsx("div",{className:"border-b border-gray-200",children:l.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"audio",label:"Audio"},{id:"transcript",label:"Transcript"},{id:"analysis",label:"AI Analysis"},{id:"scoring",label:"Scoring"}].map(C=>l.jsx("button",{onClick:()=>h(C.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${f===C.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:C.label},C.id))})}),l.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f==="overview"&&l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:x.test_name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[b.score," / ",b.max_score]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Taken"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.time_taken?`${Math.floor(b.time_taken/60)}:${(b.time_taken%60).toString().padStart(2,"0")}`:"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.submitted_at?new Date(b.submitted_at).toLocaleString():"N/A"})]})]})}),f==="audio"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audio Recording"}),b.audio_url?l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Click the play button to listen to the student's recording:"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsx(wH,{audioUrl:b.audio_url,className:"w-full"})})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No audio recording available"})})]}),f==="transcript"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transcript"}),b.transcript?l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.transcript})}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No transcript available"})})]}),f==="analysis"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Analysis Results"}),(()=>{let C=e.ai_feedback;if(C&&typeof C=="string")try{C=JSON.parse(C)}catch{C=null}return C?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Overall Performance"}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-800",children:C.overall_score||0}),l.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score (0-100)"})]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Category Breakdown"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[C.grammar_score||0,"/25"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Grammar"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-green-600",children:[C.vocabulary_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Vocabulary"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[C.pronunciation_score||0,"/15"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Pronunciation"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[C.fluency_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Fluency"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-red-600",children:[C.content_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Content"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Word Count:"}),l.jsx("span",{className:"text-sm font-medium",children:C.word_count||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Grammar Mistakes:"}),l.jsx("span",{className:"text-sm font-medium text-red-600",children:C.grammar_mistakes||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Vocabulary Issues:"}),l.jsx("span",{className:"text-sm font-medium text-red-600",children:C.vocabulary_mistakes||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Difficulty Level:"}),l.jsx("span",{className:"text-sm font-medium",children:C.difficulty_level||"N/A"})]})]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"AI Feedback"}),C.feedback?l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-gray-700",children:C.feedback})}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("p",{className:"text-sm",children:"No AI feedback available"})})]})]}),C.improved_transcript&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Improved Transcript"}),l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-gray-700",children:C.improved_transcript})})]}),C.grammar_corrections&&C.grammar_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Grammar Corrections"}),l.jsx("div",{className:"space-y-3",children:C.grammar_corrections.map((E,j)=>l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-red-800",children:"Mistake:"})," ",E.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-green-800",children:"Correction:"})," ",E.correction]}),E.explanation&&l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Explanation:"})," ",E.explanation]})]},j))})]}),C.vocabulary_corrections&&C.vocabulary_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Vocabulary Improvements"}),l.jsx("div",{className:"space-y-3",children:C.vocabulary_corrections.map((E,j)=>l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-yellow-800",children:"Original:"})," ",E.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-green-800",children:"Better:"})," ",E.correction]}),E.explanation&&l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Explanation:"})," ",E.explanation]})]},j))})]}),C.language_use_corrections&&C.language_use_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Language Use Suggestions"}),l.jsx("div",{className:"space-y-3",children:C.language_use_corrections.map((E,j)=>l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-blue-800",children:"Original:"})," ",E.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-blue-800",children:"Suggestion:"})," ",E.suggestion]}),E.explanation&&l.jsx("div",{className:"text-xs text-blue-700 mt-1",children:E.explanation})]},j))})]})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No AI analysis available for this result"})})})()]}),f==="scoring"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Score Details"}),s?l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 place-items-center",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Score"}),l.jsx("input",{type:"number",min:"0",max:b.max_score,value:a,onChange:C=>d(C.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Max Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.max_score," (Fixed)"]})]})]}),l.jsxs("div",{className:"flex justify-center space-x-3",children:[l.jsx("button",{onClick:c,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Score"}),l.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("div",{className:"grid grid-cols-1 place-items-center gap-2",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Current Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.score," / ",b.max_score]})]})}),l.jsx("button",{onClick:()=>o(e.id,b.score),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mx-auto",children:"Edit Score"})]})]})]}),l.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:l.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},ife=({isOpen:e,onClose:t,testResult:r,questions:n,isLoadingQuestions:s,onScoreUpdate:a})=>{const[i,o]=_.useState(!1),[c,u]=_.useState(""),[d,f]=_.useState(!1),h=F=>{if(!F)return{};if(typeof F=="string")try{return JSON.parse(F)}catch{return{}}return F||{}},g=()=>{const F=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;u(F.toString()),o(!0)},x=()=>{o(!1),u("")},y=async F=>{F&&(F.preventDefault(),F.stopPropagation());const B=r?.id||r?.result_id;if(!B){console.error("TestAnswerModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("TestAnswerModal: Saving score",{resultId:B,score:c,testType:r.test_type}),f(!0);try{const V=r.test_type||r.testType,ee={resultId:B,score:parseInt(c)||0,testType:V};console.log("TestAnswerModal: Sending payload",ee);let ae;if(window.tokenManager?.makeAuthenticatedRequest)ae=await window.tokenManager.makeAuthenticatedRequest(Wd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)});else{const{SecureToken:Z}=await Za(async()=>{const{SecureToken:L}=await Promise.resolve().then(()=>n4);return{SecureToken:L}},void 0),te=await(window.tokenManager?.getToken()||Z.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");ae=await fetch(Wd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:te?`Bearer ${te}`:""},body:JSON.stringify(ee)})}if(console.log("TestAnswerModal: Response status",ae.status),ae.ok){const Z=await ae.json();console.log("TestAnswerModal: Score updated successfully",Z),a&&a(Z),o(!1),u("")}else{const Z=await ae.json().catch(()=>({error:"Unknown error"}));console.error("TestAnswerModal: Error response",Z),alert(Z.error||`Failed to update score. Status: ${ae.status}`)}}catch(V){console.error("TestAnswerModal: Exception updating score:",V),alert(`Failed to update score: ${V.message||V}`)}finally{f(!1)}},v=_.useMemo(()=>{const F=r?.answers;if(console.log(" [TestAnswerModal] Raw testResult.answers:",F),console.log(" [TestAnswerModal] Raw testResult.answers type:",typeof F),console.log(" [TestAnswerModal] testResult.retest_offered:",r?.retest_offered),F&&typeof F=="object"&&F.answers_by_id)return console.log(" [TestAnswerModal] Found answers_by_id format"),console.log(" [TestAnswerModal] answers_by_id:",F.answers_by_id),console.log(" [TestAnswerModal] question_order:",F.question_order),F.answers_by_id||{};const B=h(F);return console.log(" [TestAnswerModal] Parsed student answers:",B),console.log(" [TestAnswerModal] Full testResult:",r),B},[r?.answers]),T=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((F,B)=>{const V=F.question_id||F.id||B+1,ee=String(V),ae=Number(V),Z=v[ee]!==void 0?v[ee]:v[ae]!==void 0?v[ae]:v[V]!==void 0?v[V]:void 0,te=F.correct_answer,L=Z===te,K=I=>{if(F.options&&Array.isArray(F.options)){const U=I.charCodeAt(0)-65;return F.options[U]||I}const H=`option_${I.toLowerCase()}`;return F[H]||I};return l.jsxs("tr",{className:L?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:B+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ca(F.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:Z?l.jsxs("span",{className:`font-medium ${L?"text-green-700":"text-red-700"}`,children:[Z," - ",l.jsx("span",{dangerouslySetInnerHTML:{__html:ca(String(K(Z)))}})]}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[te," - ",l.jsx("span",{dangerouslySetInnerHTML:{__html:ca(String(K(te)))}})]}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:L?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},ee)})})]})}),k=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((F,B)=>{const V=F.question_id||F.id||B+1,ee=String(V),ae=Number(V),Z=v[ee]!==void 0?v[ee]:v[ae]!==void 0?v[ae]:v[V]!==void 0?v[V]:void 0,te=F.correct_answer;let L;typeof Z=="boolean"?L=Z:typeof Z=="string"?L=Z.toLowerCase().trim()==="true":Z===1||Z==="1"?L=!0:Z===0||Z==="0"?L=!1:L=!!Z;let K;typeof te=="boolean"?K=te:typeof te=="string"?K=te.toLowerCase().trim()==="true":K=!!te;const I=L===K;B===0&&console.log(" [TestAnswerModal] True/False First Question Debug:",{questionIdStr:ee,studentAnswer:Z,studentAnswerType:typeof Z,normalizedStudentAnswer:L,correctAnswer:te,correctAnswerType:typeof te,normalizedCorrectAnswer:K,isCorrect:I});const H=Z!=null?L:null,U=K;return l.jsxs("tr",{className:I?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:B+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ca(F.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:H!==null?l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${H?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:H?"True":"False"}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${U?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:U?"True":"False"})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:I?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},ee)})})]})}),b=()=>{if(!n||n.length===0)return l.jsx("p",{className:"text-gray-500",children:"No questions available"});const F=(B,V)=>{if(!B||!V||V.length===0)return!1;const ee=String(B).toLowerCase().trim();return V.some(ae=>{const Z=String(ae).toLowerCase().trim();return ee===Z||Z.length>=2&&ee.includes(Z)?!0:Z.length===1?ee.startsWith(Z)||ee.endsWith(Z):!1})};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer(s)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((B,V)=>{const ee=B.question_id||B.id||V+1,ae=String(ee),Z=Number(ee),te=v[ae]!==void 0?v[ae]:v[Z]!==void 0?v[Z]:v[ee]!==void 0?v[ee]:void 0,L=Array.isArray(B.correct_answers)?B.correct_answers:B.correct_answer?[B.correct_answer]:[],K=F(te,L);return V===0&&console.log(" [TestAnswerModal] First question debug:",{questionIdNum:ee,questionIdStr:ae,questionIdNumKey:Z,studentAnswer:te,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:L,question:B}),l.jsxs("tr",{className:K?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:V+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ca(B.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:te?l.jsx("span",{className:`font-medium ${K?"text-green-700":"text-red-700"}`,dangerouslySetInnerHTML:{__html:(()=>{const I=String(te);if(I.includes("$"))return ca(I);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(I))try{return U8(I)}catch{return ca(I)}return ca(I)})()}}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:L.length>0?l.jsx("div",{className:"space-y-1",children:L.map((I,H)=>{const U=String(I);return l.jsx("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",dangerouslySetInnerHTML:{__html:(()=>{if(U.includes("$"))return ca(U);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(U))try{return U8(U)}catch{return ca(U)}return ca(U)})()}},H)})}):l.jsx("span",{className:"text-gray-400",children:"No correct answer defined"})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:K?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},ae)})})]})})},C=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Left Word"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Match"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Match"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((F,B)=>{const V=F.question_id||F.id||B+1,ee=String(V),ae=Number(V),Z=v[ee]!==void 0?v[ee]:v[ae]!==void 0?v[ae]:v[V]!==void 0?v[V]:void 0,te=F.left_word,L=F.right_word;let K=null,I=!1;if(Z){if(typeof Z=="object")K=Z.definition||Z.right||Z.word,I=Z.word===te&&(Z.definition||Z.right)===L;else if(typeof Z=="string")try{const H=JSON.parse(Z);K=H.definition||H.right||H.word,I=H.word===te&&(H.definition||H.right)===L}catch{K=Z}}return l.jsxs("tr",{className:I?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:B+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:te}),l.jsx("td",{className:"px-4 py-3 text-sm",children:K?l.jsx("span",{className:I?"text-green-700 font-medium":"text-red-700 font-medium",children:K}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:L}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:I?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},ee)})})]})}),E=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"space-y-6",children:n.map((F,B)=>{const V=F.question_id||F.id||B+1,ee=String(V),ae=Number(V);B===0&&console.log(" [TestAnswerModal] Fill Blanks First Question Debug:",{questionIdNum:V,questionIdStr:ee,questionIdNumKey:ae,question:F,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:F.correct_answers});const Z=v[ee]!==void 0?v[ee]:v[ae]!==void 0?v[ae]:v[V]!==void 0?v[V]:void 0,te=Array.isArray(F.correct_answers)?F.correct_answers:[];let L=[];return Array.isArray(Z)?L=Z:Z!=null?L=[Z]:L=[],l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Question ",B+1]}),l.jsxs("div",{className:"space-y-3",children:[F.question_json&&l.jsx("div",{className:"text-sm text-gray-700 mb-4",children:typeof F.question_json=="string"?F.question_json:F.question_json.text||F.question_json.question||"Question text not available"}),l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Blank #"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map((K,I)=>{let H=L[I];const U=I+1,R=String(U),z=Number(U);(H==null||H==="")&&(H=v[R]!==void 0?v[R]:v[z]!==void 0?v[z]:H),B===0&&I===0&&console.log(" [TestAnswerModal] Fill Blanks First Blank Debug:",{blankIndex:I,potentialBlankId:U,potentialBlankIdStr:R,potentialBlankIdNum:z,studentAns:H,studentAnswersForQ:L,correctAns:K,studentAnswersKeys:Object.keys(v)});const G=String(H||"").trim().toLowerCase()===String(K||"").trim().toLowerCase();return l.jsxs("tr",{className:G?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:I+1}),l.jsx("td",{className:"px-4 py-2 text-sm",children:H?l.jsx("span",{className:G?"text-green-700 font-medium":"text-red-700 font-medium",children:String(H)}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:String(K)}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:G?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:""}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:""})})]},I)})})]})]})]},ee)})}),j=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Matching type tests require visual comparison. Answers stored as connection pairs."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Word"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Connection"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((F,B)=>{const V=F.question_id||F.id||B+1,ee=String(V),ae=Number(V),Z=v[ee]!==void 0?v[ee]:v[ae]!==void 0?v[ae]:v[V]!==void 0?v[V]:void 0;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:F.word}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Z?typeof Z=="object"?JSON.stringify(Z):Z:l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})})]},ee)})})]})})]}),P=()=>{if(!r)return null;const F=r.test_type||r.testType;if(s)return l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx(cn,{size:"lg"}),l.jsx("span",{className:"ml-4 text-gray-600",children:"Loading questions..."})]});if(!n||n.length===0)return l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"Unable to load questions for this test."}),l.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Test ID: ",r.test_id,", Type: ",F]})]});switch(F){case"multiple_choice":return T();case"true_false":return k();case"input":return b();case"word_matching":return C();case"fill_blanks":return E();case"matching_type":return j();default:return l.jsxs("div",{className:"text-center py-8",children:[l.jsxs("p",{className:"text-gray-500",children:['Test type "',F,'" is not supported for answer viewing.']}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Drawing and Speaking tests have their own dedicated modals."})]})}};if(!r)return null;r.test_type||r.testType;const A=`${r.name||""} ${r.surname||""}`.trim(),M=`${r.test_name||"Test"} - ${A||r.student_id}`;return l.jsxs(Na,{isOpen:e,onClose:t,title:M,size:"large",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex space-x-6",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Score"}),(()=>{const F=r.test_type||r.testType,B=["multiple_choice","true_false","input"].includes(F),V=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0,ee=r.best_retest_max_score||r.max_score||0;return B&&i?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"0",max:ee,value:c,onChange:ae=>u(ae.target.value),className:"w-16 px-2 py-1 text-sm border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsxs("span",{className:"text-lg font-semibold text-gray-500",children:["/ ",ee]}),l.jsx("button",{type:"button",onClick:y,disabled:d,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:d?"Saving...":"Save"}),l.jsx("button",{type:"button",onClick:x,disabled:d,className:"px-2 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[V," / ",ee,r.best_retest_score!==null&&r.best_retest_score!==void 0&&l.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Retest Best)"})]}),B&&l.jsx("button",{onClick:g,className:"ml-2 px-2 py-1 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded",title:"Click to edit score",children:"Edit"})]})})()]}),r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0&&r.best_retest_percentage>0||r.percentage&&r.percentage>0?l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Percentage"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0?`${r.best_retest_percentage.toFixed(1)}%`:`${r.percentage?.toFixed(1)||"0.0"}%`})]}):null,r.subject&&r.subject!=="N/A"?l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Subject"}),l.jsx("div",{className:"text-sm font-medium text-gray-700",children:r.subject})]}):null]}),r.submitted_at&&l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Submitted"}),l.jsx("div",{className:"text-sm text-gray-700",children:new Date(r.submitted_at).toLocaleString()})]})]}),l.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:P()}),r.caught_cheating&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-red-800",children:[" This test was flagged for suspicious activity (visibility changes: ",r.visibility_change_times||0,")"]})})]})},ofe=({isOpen:e,onClose:t,testResult:r,onScoreUpdate:n})=>{const[s,a]=_.useState(""),[i,o]=_.useState(!1);zs.useEffect(()=>{if(console.log("EditScoreModal: useEffect triggered",{isOpen:e,testResult:r}),e&&r){const h=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;a(h.toString()),console.log("EditScoreModal: Initialized with score",h)}},[e,r]);const c=async h=>{h.preventDefault(),h.stopPropagation();const g=r?.id||r?.result_id;if(!g){console.error("EditScoreModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("EditScoreModal: Saving score",{resultId:g,score:s,testType:r.test_type}),o(!0);try{const x=r.test_type||r.testType,y={resultId:g,score:parseInt(s)||0,testType:x};console.log("EditScoreModal: Sending payload",y);let v;if(window.tokenManager?.makeAuthenticatedRequest)v=await window.tokenManager.makeAuthenticatedRequest(Wd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});else{const{SecureToken:T}=await Za(async()=>{const{SecureToken:b}=await Promise.resolve().then(()=>n4);return{SecureToken:b}},void 0),k=await(window.tokenManager?.getToken()||T.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");v=await fetch(Wd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:k?`Bearer ${k}`:""},body:JSON.stringify(y)})}if(console.log("EditScoreModal: Response status",v.status),v.ok){const T=await v.json();console.log("EditScoreModal: Score updated successfully",T),n&&n(T),t()}else{const T=await v.json().catch(()=>({error:"Unknown error"}));console.error("EditScoreModal: Error response",T),alert(T.error||`Failed to update score. Status: ${v.status}`)}}catch(x){console.error("EditScoreModal: Exception updating score:",x),alert(`Failed to update score: ${x.message||x}`)}finally{o(!1)}};if(console.log("EditScoreModal: Rendering",{isOpen:e,testResult:r,hasTestResult:!!r}),!r)return console.log("EditScoreModal: No testResult, returning null"),null;const u=r.best_retest_max_score||r.max_score||0,d=`${r.name||""} ${r.surname||""}`.trim()||r.student_id,f=`Edit Score - ${r.test_name||"Test"} - ${d}`;return l.jsx(Na,{isOpen:e,onClose:t,title:f,size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Score"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"0",max:u,value:s,onChange:h=>a(h.target.value),className:"w-24 px-3 py-2 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsxs("span",{className:"text-lg font-semibold text-gray-600",children:["/ ",u]})]}),l.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Enter a score between 0 and ",u]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[l.jsx("button",{onClick:t,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"button",onClick:c,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Saving...":"Save"})]})]})})};class fb extends zs.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),t.message&&t.message.includes("Minified React error #300")){console.warn("React error #300 caught and handled by ErrorBoundary");return}}render(){return this.state.hasError?l.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[l.jsx("h3",{className:"text-red-800 font-medium",children:"Something went wrong"}),l.jsx("p",{className:"text-red-600 text-sm mt-1",children:"An error occurred while rendering this component."})]}):this.props.children}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var R4={};R4.version="0.18.5";var bH=1252,lfe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Z7={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},eN=function(e){lfe.indexOf(e)!=-1&&(bH=Z7[0]=e)};function cfe(){eN(1252)}var ru=function(e){eN(e)};function tN(){ru(1200),cfe()}function fD(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function ufe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function _H(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ry=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?ufe(e.slice(2)):t==254&&r==255?_H(e.slice(2)):t==65279?e.slice(1):e},hb=function(t){return String.fromCharCode(t)},hD=function(t){return String.fromCharCode(t)},Av,Af="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function jv(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,s=e.charCodeAt(u++),o=(n&15)<<2|s>>6,c=s&63,isNaN(n)?o=c=64:isNaN(s)&&(c=64),t+=Af.charAt(a)+Af.charAt(i)+Af.charAt(o)+Af.charAt(c);return t}function Bl(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=Af.indexOf(e.charAt(u++)),i=Af.indexOf(e.charAt(u++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=Af.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Af.indexOf(e.charAt(u++)),s=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var kn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),_0=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Gf(e){return kn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function mD(e){return kn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Fl=function(t){return kn?_0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function c3(e){if(typeof ArrayBuffer>"u")return Fl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function sh(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function dfe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function rN(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return rN(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var bi=kn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:_0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function ffe(e){for(var t=[],r=0,n=e.length+250,s=Gf(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Gf(65535),n=65530)}return t.push(s.slice(0,r)),bi(t)}var zo=/\u0000/g,Iy=/[\u0001-\u0006]/g;function Mp(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function nu(e,t){var r=""+e;return r.length>=t?r:ha("0",t-r.length)+r}function nN(e,t){var r=""+e;return r.length>=t?r:ha(" ",t-r.length)+r}function I4(e,t){var r=""+e;return r.length>=t?r:r+ha(" ",t-r.length)}function hfe(e,t){var r=""+Math.round(e);return r.length>=t?r:ha("0",t-r.length)+r}function mfe(e,t){var r=""+e;return r.length>=t?r:ha("0",t-r.length)+r}var gD=Math.pow(2,32);function rp(e,t){if(e>gD||e<-gD)return hfe(e,t);var r=Math.round(e);return mfe(r,t)}function L4(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var pD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],L5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function gfe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},xD={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},pfe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function B4(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*i+a,d=f*u+c,!(s-f<5e-8));)s=1/(s-f),a=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=a):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function rm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],a=c.getDay(),n<60&&(a=(a+6)%7),r&&(a=_fe(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var SH=new Date(1899,11,31,0,0,0),xfe=SH.getTime(),yfe=new Date(1900,2,1,0,0,0);function kH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=yfe&&(r+=1440*60*1e3),(r-(xfe+(e.getTimezoneOffset()-SH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function sN(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function vfe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function wfe(e){var t=e<0?12:11,r=sN(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function bfe(e){var t=sN(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Pv(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=wfe(e):t===10?r=e.toFixed(10).substr(0,12):r=bfe(e),sN(vfe(r.toUpperCase()))}function Dm(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Pv(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return kc(14,kH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function _fe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Sfe(e,t,r,n){var s="",a=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return L5[r.m-1][1];case 5:return L5[r.m-1][0];default:return L5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return pD[r.q][0];default:return pD[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?nu(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=nu(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?nu(c,u):"";return d}function jf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var TH=/%/g;function kfe(e,t,r){var n=t.replace(TH,""),s=t.length-n.length;return e0(e,n,r*Math.pow(10,2*s))+ha("%",s)}function Tfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return e0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function CH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+CH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var NH=/# (\?+)( ?)\/( ?)(\d+)/;function Cfe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?ha(" ",e[1].length+1+e[4].length):nN(i,e[1].length)+e[2]+"/"+e[3]+nu(o,e[4].length))}function Nfe(e,t,r){return r+(t===0?"":""+t)+ha(" ",e[1].length+2+e[4].length)}var EH=/^#*0*\.([0#]+)/,AH=/\).*[0#]/,jH=/\(###\) ###\\?-####/;function Do(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function yD(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function vD(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Efe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Afe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ac(e,t,r){if(e.charCodeAt(0)===40&&!t.match(AH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ac("n",n,r):"("+ac("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Tfe(e,t,r);if(t.indexOf("%")!==-1)return kfe(e,t,r);if(t.indexOf("E")!==-1)return CH(t,r);if(t.charCodeAt(0)===36)return"$"+ac(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+rp(c,t.length);if(t.match(/^[#?]+$/))return s=rp(r,0),s==="0"&&(s=""),s.length>t.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(NH))return Cfe(a,c,u);if(t.match(/^#+0+$/))return u+rp(c,t.length-t.indexOf("0"));if(a=t.match(EH))return s=yD(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])).replace(/\.(\d*)$/,function(x,y){return"."+y+ha("0",Do(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+yD(c,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+jf(rp(c,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ac(e,t,-r):jf(""+(Math.floor(r)+Efe(r,a[1].length)))+"."+nu(vD(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return ac(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Mp(ac(e,t.replace(/[\\-]/g,""),r)),i=0,Mp(Mp(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(jH))return s=ac(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=B4(c,Math.pow(10,i)-1,!1),s=""+u,d=e0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=I4(o[2],i),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=B4(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?nN(o[1],i)+a[2]+"/"+a[3]+I4(o[2],i):ha(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=rp(r,0),t.length<=s.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Do(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=vD(r,a[1].length),r<0?"-"+ac(e,t,-r):jf(Afe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?nu(0,3-x.length):"")+x})+"."+nu(i,a[1].length);switch(t){case"###,##0.00":return ac(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=jf(rp(c,0));return g!=="0"?u+g:"";case"###,###.00":return ac(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ac(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function jfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return e0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Pfe(e,t,r){var n=t.replace(TH,""),s=t.length-n.length;return e0(e,n,r*Math.pow(10,2*s))+ha("%",s)}function PH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+PH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Du(e,t,r){if(e.charCodeAt(0)===40&&!t.match(AH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Du("n",n,r):"("+Du("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return jfe(e,t,r);if(t.indexOf("%")!==-1)return Pfe(e,t,r);if(t.indexOf("E")!==-1)return PH(t,r);if(t.charCodeAt(0)===36)return"$"+Du(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+nu(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(NH))return Nfe(a,c,u);if(t.match(/^#+0+$/))return u+nu(c,t.length-t.indexOf("0"));if(a=t.match(EH))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])),s=s.replace(/\.(\d*)$/,function(x,y){return"."+y+ha("0",Do(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+jf(""+c);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Du(e,t,-r):jf(""+r)+"."+ha("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Du(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Mp(Du(e,t.replace(/[\\-]/g,""),r)),i=0,Mp(Mp(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(jH))return s=Du(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=B4(c,Math.pow(10,i)-1,!1),s=""+u,d=e0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=I4(o[2],i),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=B4(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?nN(o[1],i)+a[2]+"/"+a[3]+I4(o[2],i):ha(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Do(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Du(e,t,-r):jf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?nu(0,3-x.length):"")+x})+"."+nu(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=jf(""+c);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return Du(e,t.slice(0,t.lastIndexOf(".")),r)+Do(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function e0(e,t,r){return(r|0)===r?Du(e,t,r):ac(e,t,r)}function Mfe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var MH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function k1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":L4(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(MH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Ffe(e,t,r,n){for(var s=[],a="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!L4(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(f=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=e.charAt(++i),x=g==="("||g===")"?g:"t";s[s.length]={t:x,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=rm(t,r,e.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=rm(t,r),u==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:a},c=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=rm(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",i+=5,h="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,c=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(MH)){if(u==null&&(u=rm(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},c=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",k1(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var v=0,T=0,k;for(i=s.length-1,c="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=h,c="h",v<1&&(v=1);break;case"s":(k=s[i].v.match(/\.0+$/))&&(T=Math.max(T,k[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=s[i].t;break;case"m":c==="s"&&(s[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[i].v.match(/[Hh]/)&&(v=1),v<2&&s[i].v.match(/[Mm]/)&&(v=2),v<3&&s[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",C;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Sfe(s[i].t.charCodeAt(0),s[i].v,u,T),s[i].t="t";break;case"n":case"?":for(C=i+1;s[C]!=null&&((o=s[C].t)==="?"||o==="D"||(o===" "||o==="t")&&s[C+1]!=null&&(s[C+1].t==="?"||s[C+1].t==="t"&&s[C+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[C].v==="/"||s[C].v===" "&&s[C+1]!=null&&s[C+1].t=="?"));)s[i].v+=s[C].v,s[C]={v:"",t:";"},++C;b+=s[i].v,i=C-1;break;case"G":s[i].t="t",s[i].v=Dm(t,r);break}var E="",j,P;if(b.length>0){b.charCodeAt(0)==40?(j=t<0&&b.charCodeAt(0)===45?-t:t,P=e0("n",b,j)):(j=t<0&&n>1?-t:t,P=e0("n",b,j),j<0&&s[0]&&s[0].t=="t"&&(P=P.substr(1),s[0].v="-"+s[0].v)),C=P.length-1;var A=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){A=i;break}var M=s.length;if(A===s.length&&P.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(C>=s[i].v.length-1?(C-=s[i].v.length,s[i].v=P.substr(C+1,s[i].v.length)):C<0?s[i].v="":(s[i].v=P.substr(0,C+1),C=-1),s[i].t="t",M=i);C>=0&&M<s.length&&(s[M].v=P.substr(0,C+1)+s[M].v)}else if(A!==s.length&&P.indexOf("E")===-1){for(C=P.indexOf(".")-1,i=A;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===A?s[i].v.indexOf(".")-1:s[i].v.length-1,E=s[i].v.substr(d+1);d>=0;--d)C>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(E=P.charAt(C--)+E);s[i].v=E,s[i].t="t",M=i}for(C>=0&&M<s.length&&(s[M].v=P.substr(0,C+1)+s[M].v),C=P.indexOf(".")+1,i=A;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==A)){for(d=s[i].v.indexOf(".")>-1&&i===A?s[i].v.indexOf(".")+1:0,E=s[i].v.substr(0,d);d<s[i].v.length;++d)C<P.length&&(E+=P.charAt(C++));s[i].v=E,s[i].t="t",M=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(j=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=e0(s[i].t,s[i].v,j),s[i].t="t");var F="";for(i=0;i!==s.length;++i)s[i]!=null&&(F+=s[i].v);return F}var wD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function bD(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Dfe(e,t){var r=Mfe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(wD),o=r[1].match(wD);return bD(t,i)?[n,r[0]]:bD(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function kc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Qr)[e],n==null&&(n=r.table&&r.table[xD[e]]||Qr[xD[e]]),n==null&&(n=pfe[e]||"General");break}if(L4(n,0))return Dm(t,r);t instanceof Date&&(t=kH(t,r.date1904));var s=Dfe(n,t);if(L4(s[1]))return Dm(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Ffe(s[1],t,r,s[0])}function t0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Qr[r]==null){t<0&&(t=r);continue}if(Qr[r]==e){t=r;break}}t<0&&(t=391)}return Qr[t]=e,t}function u3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&t0(e[t],t)}function T1(){Qr=gfe()}var Ofe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},FH=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Rfe(e){var t=typeof e=="number"?Qr[e]:e;return t=t.replace(FH,"(\\d+)"),new RegExp("^"+t+"$")}function Ife(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,c=-1;(t.match(FH)||[]).forEach(function(f,h){var g=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=g;break;case"d":a=g;break;case"h":i=g;break;case"s":c=g;break;case"m":i>=0?o=g:s=g;break}}),c>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var Lfe=(function(){var e={};e.version="1.2.0";function t(){for(var P=0,A=new Array(256),M=0;M!=256;++M)P=M,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,A[M]=P;return typeof Int32Array<"u"?new Int32Array(A):A}var r=t();function n(P){var A=0,M=0,F=0,B=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)B[F]=P[F];for(F=0;F!=256;++F)for(M=P[F],A=256+F;A<4096;A+=256)M=B[A]=M>>>8^P[M&255];var V=[];for(F=1;F!=16;++F)V[F-1]=typeof Int32Array<"u"?B.subarray(F*256,F*256+256):B.slice(F*256,F*256+256);return V}var s=n(r),a=s[0],i=s[1],o=s[2],c=s[3],u=s[4],d=s[5],f=s[6],h=s[7],g=s[8],x=s[9],y=s[10],v=s[11],T=s[12],k=s[13],b=s[14];function C(P,A){for(var M=A^-1,F=0,B=P.length;F<B;)M=M>>>8^r[(M^P.charCodeAt(F++))&255];return~M}function E(P,A){for(var M=A^-1,F=P.length-15,B=0;B<F;)M=b[P[B++]^M&255]^k[P[B++]^M>>8&255]^T[P[B++]^M>>16&255]^v[P[B++]^M>>>24]^y[P[B++]]^x[P[B++]]^g[P[B++]]^h[P[B++]]^f[P[B++]]^d[P[B++]]^u[P[B++]]^c[P[B++]]^o[P[B++]]^i[P[B++]]^a[P[B++]]^r[P[B++]];for(F+=15;B<F;)M=M>>>8^r[(M^P[B++])&255];return~M}function j(P,A){for(var M=A^-1,F=0,B=P.length,V=0,ee=0;F<B;)V=P.charCodeAt(F++),V<128?M=M>>>8^r[(M^V)&255]:V<2048?(M=M>>>8^r[(M^(192|V>>6&31))&255],M=M>>>8^r[(M^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,ee=P.charCodeAt(F++)&1023,M=M>>>8^r[(M^(240|V>>8&7))&255],M=M>>>8^r[(M^(128|V>>2&63))&255],M=M>>>8^r[(M^(128|ee>>6&15|(V&3)<<4))&255],M=M>>>8^r[(M^(128|ee&63))&255]):(M=M>>>8^r[(M^(224|V>>12&15))&255],M=M>>>8^r[(M^(128|V>>6&63))&255],M=M>>>8^r[(M^(128|V&63))&255]);return~M}return e.table=r,e.bstr=C,e.buf=E,e.str=j,e})(),Wr=(function(){var t={};t.version="1.2.1";function r(le,ve){for(var ge=le.split("/"),we=ve.split("/"),Te=0,Se=0,Ze=Math.min(ge.length,we.length);Te<Ze;++Te){if(Se=ge[Te].length-we[Te].length)return Se;if(ge[Te]!=we[Te])return ge[Te]<we[Te]?-1:1}return ge.length-we.length}function n(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:n(le.slice(0,-1));var ve=le.lastIndexOf("/");return ve===-1?le:le.slice(0,ve+1)}function s(le){if(le.charAt(le.length-1)=="/")return s(le.slice(0,-1));var ve=le.lastIndexOf("/");return ve===-1?le:le.slice(ve+1)}function a(le,ve){typeof ve=="string"&&(ve=new Date(ve));var ge=ve.getHours();ge=ge<<6|ve.getMinutes(),ge=ge<<5|ve.getSeconds()>>>1,le.write_shift(2,ge);var we=ve.getFullYear()-1980;we=we<<4|ve.getMonth()+1,we=we<<5|ve.getDate(),le.write_shift(2,we)}function i(le){var ve=le.read_shift(2)&65535,ge=le.read_shift(2)&65535,we=new Date,Te=ge&31;ge>>>=5;var Se=ge&15;ge>>>=4,we.setMilliseconds(0),we.setFullYear(ge+1980),we.setMonth(Se-1),we.setDate(Te);var Ze=ve&31;ve>>>=5;var ut=ve&63;return ve>>>=6,we.setHours(ve),we.setMinutes(ut),we.setSeconds(Ze<<1),we}function o(le){Hi(le,0);for(var ve={},ge=0;le.l<=le.length-4;){var we=le.read_shift(2),Te=le.read_shift(2),Se=le.l+Te,Ze={};switch(we){case 21589:ge=le.read_shift(1),ge&1&&(Ze.mtime=le.read_shift(4)),Te>5&&(ge&2&&(Ze.atime=le.read_shift(4)),ge&4&&(Ze.ctime=le.read_shift(4))),Ze.mtime&&(Ze.mt=new Date(Ze.mtime*1e3));break}le.l=Se,ve[we]=Ze}return ve}var c;function u(){return c||(c={})}function d(le,ve){if(le[0]==80&&le[1]==75)return he(le,ve);if((le[0]|32)==109&&(le[1]|32)==105)return yt(le,ve);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var ge=3,we=512,Te=0,Se=0,Ze=0,ut=0,Je=0,de=[],ye=le.slice(0,512);Hi(ye,0);var Pe=f(ye);switch(ge=Pe[0],ge){case 3:we=512;break;case 4:we=4096;break;case 0:if(Pe[1]==0)return he(le,ve);default:throw new Error("Major Version: Expected 3 or 4 saw "+ge)}we!==512&&(ye=le.slice(0,we),Hi(ye,28));var Be=le.slice(0,we);h(ye,ge);var Ye=ye.read_shift(4,"i");if(ge===3&&Ye!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ye);ye.l+=4,Ze=ye.read_shift(4,"i"),ye.l+=4,ye.chk("00100000","Mini Stream Cutoff Size: "),ut=ye.read_shift(4,"i"),Te=ye.read_shift(4,"i"),Je=ye.read_shift(4,"i"),Se=ye.read_shift(4,"i");for(var ot=-1,wt=0;wt<109&&(ot=ye.read_shift(4,"i"),!(ot<0));++wt)de[wt]=ot;var er=g(le,we);v(Je,Se,er,we,de);var Ft=k(er,Ze,de,we);Ft[Ze].name="!Directory",Te>0&&ut!==ee&&(Ft[ut].name="!MiniFAT"),Ft[de[0]].name="!FAT",Ft.fat_addrs=de,Ft.ssz=we;var Yt={},_r=[],Ir=[],ar=[];b(Ze,Ft,er,_r,Te,Yt,Ir,ut),x(Ir,ar,_r),_r.shift();var Ur={FileIndex:Ir,FullPaths:ar};return ve&&ve.raw&&(Ur.raw={header:Be,sectors:er}),Ur}function f(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(ae,"Header Signature: "),le.l+=16;var ve=le.read_shift(2,"u");return[le.read_shift(2,"u"),ve]}function h(le,ve){var ge=9;switch(le.l+=2,ge=le.read_shift(2)){case 9:if(ve!=3)throw new Error("Sector Shift: Expected 9 saw "+ge);break;case 12:if(ve!=4)throw new Error("Sector Shift: Expected 12 saw "+ge);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ge)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function g(le,ve){for(var ge=Math.ceil(le.length/ve)-1,we=[],Te=1;Te<ge;++Te)we[Te-1]=le.slice(Te*ve,(Te+1)*ve);return we[ge-1]=le.slice(ge*ve),we}function x(le,ve,ge){for(var we=0,Te=0,Se=0,Ze=0,ut=0,Je=ge.length,de=[],ye=[];we<Je;++we)de[we]=ye[we]=we,ve[we]=ge[we];for(;ut<ye.length;++ut)we=ye[ut],Te=le[we].L,Se=le[we].R,Ze=le[we].C,de[we]===we&&(Te!==-1&&de[Te]!==Te&&(de[we]=de[Te]),Se!==-1&&de[Se]!==Se&&(de[we]=de[Se])),Ze!==-1&&(de[Ze]=we),Te!==-1&&we!=de[we]&&(de[Te]=de[we],ye.lastIndexOf(Te)<ut&&ye.push(Te)),Se!==-1&&we!=de[we]&&(de[Se]=de[we],ye.lastIndexOf(Se)<ut&&ye.push(Se));for(we=1;we<Je;++we)de[we]===we&&(Se!==-1&&de[Se]!==Se?de[we]=de[Se]:Te!==-1&&de[Te]!==Te&&(de[we]=de[Te]));for(we=1;we<Je;++we)if(le[we].type!==0){if(ut=we,ut!=de[ut])do ut=de[ut],ve[we]=ve[ut]+"/"+ve[we];while(ut!==0&&de[ut]!==-1&&ut!=de[ut]);de[we]=-1}for(ve[0]+="/",we=1;we<Je;++we)le[we].type!==2&&(ve[we]+="/")}function y(le,ve,ge){for(var we=le.start,Te=le.size,Se=[],Ze=we;ge&&Te>0&&Ze>=0;)Se.push(ve.slice(Ze*V,Ze*V+V)),Te-=V,Ze=Qh(ge,Ze*4);return Se.length===0?Rt(0):bi(Se).slice(0,le.size)}function v(le,ve,ge,we,Te){var Se=ee;if(le===ee){if(ve!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var Ze=ge[le],ut=(we>>>2)-1;if(!Ze)return;for(var Je=0;Je<ut&&(Se=Qh(Ze,Je*4))!==ee;++Je)Te.push(Se);v(Qh(Ze,we-4),ve-1,ge,we,Te)}}function T(le,ve,ge,we,Te){var Se=[],Ze=[];Te||(Te=[]);var ut=we-1,Je=0,de=0;for(Je=ve;Je>=0;){Te[Je]=!0,Se[Se.length]=Je,Ze.push(le[Je]);var ye=ge[Math.floor(Je*4/we)];if(de=Je*4&ut,we<4+de)throw new Error("FAT boundary crossed: "+Je+" 4 "+we);if(!le[ye])break;Je=Qh(le[ye],de)}return{nodes:Se,data:FD([Ze])}}function k(le,ve,ge,we){var Te=le.length,Se=[],Ze=[],ut=[],Je=[],de=we-1,ye=0,Pe=0,Be=0,Ye=0;for(ye=0;ye<Te;++ye)if(ut=[],Be=ye+ve,Be>=Te&&(Be-=Te),!Ze[Be]){Je=[];var ot=[];for(Pe=Be;Pe>=0;){ot[Pe]=!0,Ze[Pe]=!0,ut[ut.length]=Pe,Je.push(le[Pe]);var wt=ge[Math.floor(Pe*4/we)];if(Ye=Pe*4&de,we<4+Ye)throw new Error("FAT boundary crossed: "+Pe+" 4 "+we);if(!le[wt]||(Pe=Qh(le[wt],Ye),ot[Pe]))break}Se[Be]={nodes:ut,data:FD([Je])}}return Se}function b(le,ve,ge,we,Te,Se,Ze,ut){for(var Je=0,de=we.length?2:0,ye=ve[le].data,Pe=0,Be=0,Ye;Pe<ye.length;Pe+=128){var ot=ye.slice(Pe,Pe+128);Hi(ot,64),Be=ot.read_shift(2),Ye=dN(ot,0,Be-de),we.push(Ye);var wt={name:Ye,type:ot.read_shift(1),color:ot.read_shift(1),L:ot.read_shift(4,"i"),R:ot.read_shift(4,"i"),C:ot.read_shift(4,"i"),clsid:ot.read_shift(16),state:ot.read_shift(4,"i"),start:0,size:0},er=ot.read_shift(2)+ot.read_shift(2)+ot.read_shift(2)+ot.read_shift(2);er!==0&&(wt.ct=C(ot,ot.l-8));var Ft=ot.read_shift(2)+ot.read_shift(2)+ot.read_shift(2)+ot.read_shift(2);Ft!==0&&(wt.mt=C(ot,ot.l-8)),wt.start=ot.read_shift(4,"i"),wt.size=ot.read_shift(4,"i"),wt.size<0&&wt.start<0&&(wt.size=wt.type=0,wt.start=ee,wt.name=""),wt.type===5?(Je=wt.start,Te>0&&Je!==ee&&(ve[Je].name="!StreamData")):wt.size>=4096?(wt.storage="fat",ve[wt.start]===void 0&&(ve[wt.start]=T(ge,wt.start,ve.fat_addrs,ve.ssz)),ve[wt.start].name=wt.name,wt.content=ve[wt.start].data.slice(0,wt.size)):(wt.storage="minifat",wt.size<0?wt.size=0:Je!==ee&&wt.start!==ee&&ve[Je]&&(wt.content=y(wt,ve[Je].data,(ve[ut]||{}).data))),wt.content&&Hi(wt.content,0),Se[Ye]=wt,Ze.push(wt)}}function C(le,ve){return new Date((jl(le,ve+4)/1e7*Math.pow(2,32)+jl(le,ve)/1e7-11644473600)*1e3)}function E(le,ve){return u(),d(c.readFileSync(le),ve)}function j(le,ve){var ge=ve&&ve.type;switch(ge||kn&&Buffer.isBuffer(le)&&(ge="buffer"),ge||"base64"){case"file":return E(le,ve);case"base64":return d(Fl(Bl(le)),ve);case"binary":return d(Fl(le),ve)}return d(le,ve)}function P(le,ve){var ge=ve||{},we=ge.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=we+"/",le.FileIndex[0]={name:we,type:5}),ge.CLSID&&(le.FileIndex[0].clsid=ge.CLSID),A(le)}function A(le){var ve="Sh33tJ5";if(!Wr.find(le,"/"+ve)){var ge=Rt(4);ge[0]=55,ge[1]=ge[3]=50,ge[2]=54,le.FileIndex.push({name:ve,type:2,content:ge,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+ve),M(le)}}function M(le,ve){P(le);for(var ge=!1,we=!1,Te=le.FullPaths.length-1;Te>=0;--Te){var Se=le.FileIndex[Te];switch(Se.type){case 0:we?ge=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(Se.R*Se.L*Se.C)&&(ge=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(ge=!0);break;default:ge=!0;break}}if(!(!ge&&!ve)){var Ze=new Date(1987,1,19),ut=0,Je=Object.create?Object.create(null):{},de=[];for(Te=0;Te<le.FullPaths.length;++Te)Je[le.FullPaths[Te]]=!0,le.FileIndex[Te].type!==0&&de.push([le.FullPaths[Te],le.FileIndex[Te]]);for(Te=0;Te<de.length;++Te){var ye=n(de[Te][0]);we=Je[ye],we||(de.push([ye,{name:s(ye).replace("/",""),type:1,clsid:te,ct:Ze,mt:Ze,content:null}]),Je[ye]=!0)}for(de.sort(function(Ye,ot){return r(Ye[0],ot[0])}),le.FullPaths=[],le.FileIndex=[],Te=0;Te<de.length;++Te)le.FullPaths[Te]=de[Te][0],le.FileIndex[Te]=de[Te][1];for(Te=0;Te<de.length;++Te){var Pe=le.FileIndex[Te],Be=le.FullPaths[Te];if(Pe.name=s(Be).replace("/",""),Pe.L=Pe.R=Pe.C=-(Pe.color=1),Pe.size=Pe.content?Pe.content.length:0,Pe.start=0,Pe.clsid=Pe.clsid||te,Te===0)Pe.C=de.length>1?1:-1,Pe.size=0,Pe.type=5;else if(Be.slice(-1)=="/"){for(ut=Te+1;ut<de.length&&n(le.FullPaths[ut])!=Be;++ut);for(Pe.C=ut>=de.length?-1:ut,ut=Te+1;ut<de.length&&n(le.FullPaths[ut])!=n(Be);++ut);Pe.R=ut>=de.length?-1:ut,Pe.type=1}else n(le.FullPaths[Te+1]||"")==n(Be)&&(Pe.R=Te+1),Pe.type=2}}}function F(le,ve){var ge=ve||{};if(ge.fileType=="mad")return Jt(le,ge);switch(M(le),ge.fileType){case"zip":return Ae(le,ge)}var we=(function(Ye){for(var ot=0,wt=0,er=0;er<Ye.FileIndex.length;++er){var Ft=Ye.FileIndex[er];if(Ft.content){var Yt=Ft.content.length;Yt>0&&(Yt<4096?ot+=Yt+63>>6:wt+=Yt+511>>9)}}for(var _r=Ye.FullPaths.length+3>>2,Ir=ot+7>>3,ar=ot+127>>7,Ur=Ir+wt+_r+ar,Fr=Ur+127>>7,$r=Fr<=109?0:Math.ceil((Fr-109)/127);Ur+Fr+$r+127>>7>Fr;)$r=++Fr<=109?0:Math.ceil((Fr-109)/127);var Tr=[1,$r,Fr,ar,_r,wt,ot,0];return Ye.FileIndex[0].size=ot<<6,Tr[7]=(Ye.FileIndex[0].start=Tr[0]+Tr[1]+Tr[2]+Tr[3]+Tr[4]+Tr[5])+(Tr[6]+7>>3),Tr})(le),Te=Rt(we[7]<<9),Se=0,Ze=0;{for(Se=0;Se<8;++Se)Te.write_shift(1,Z[Se]);for(Se=0;Se<8;++Se)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),Se=0;Se<3;++Se)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,we[2]),Te.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:ee),Te.write_shift(4,we[3]),Te.write_shift(-4,we[1]?we[0]-1:ee),Te.write_shift(4,we[1]),Se=0;Se<109;++Se)Te.write_shift(-4,Se<we[2]?we[1]+Se:-1)}if(we[1])for(Ze=0;Ze<we[1];++Ze){for(;Se<236+Ze*127;++Se)Te.write_shift(-4,Se<we[2]?we[1]+Se:-1);Te.write_shift(-4,Ze===we[1]-1?ee:Ze+1)}var ut=function(Ye){for(Ze+=Ye;Se<Ze-1;++Se)Te.write_shift(-4,Se+1);Ye&&(++Se,Te.write_shift(-4,ee))};for(Ze=Se=0,Ze+=we[1];Se<Ze;++Se)Te.write_shift(-4,L.DIFSECT);for(Ze+=we[2];Se<Ze;++Se)Te.write_shift(-4,L.FATSECT);ut(we[3]),ut(we[4]);for(var Je=0,de=0,ye=le.FileIndex[0];Je<le.FileIndex.length;++Je)ye=le.FileIndex[Je],ye.content&&(de=ye.content.length,!(de<4096)&&(ye.start=Ze,ut(de+511>>9)));for(ut(we[6]+7>>3);Te.l&511;)Te.write_shift(-4,L.ENDOFCHAIN);for(Ze=Se=0,Je=0;Je<le.FileIndex.length;++Je)ye=le.FileIndex[Je],ye.content&&(de=ye.content.length,!(!de||de>=4096)&&(ye.start=Ze,ut(de+63>>6)));for(;Te.l&511;)Te.write_shift(-4,L.ENDOFCHAIN);for(Se=0;Se<we[4]<<2;++Se){var Pe=le.FullPaths[Se];if(!Pe||Pe.length===0){for(Je=0;Je<17;++Je)Te.write_shift(4,0);for(Je=0;Je<3;++Je)Te.write_shift(4,-1);for(Je=0;Je<12;++Je)Te.write_shift(4,0);continue}ye=le.FileIndex[Se],Se===0&&(ye.start=ye.size?ye.start-1:ee);var Be=Se===0&&ge.root||ye.name;if(de=2*(Be.length+1),Te.write_shift(64,Be,"utf16le"),Te.write_shift(2,de),Te.write_shift(1,ye.type),Te.write_shift(1,ye.color),Te.write_shift(-4,ye.L),Te.write_shift(-4,ye.R),Te.write_shift(-4,ye.C),ye.clsid)Te.write_shift(16,ye.clsid,"hex");else for(Je=0;Je<4;++Je)Te.write_shift(4,0);Te.write_shift(4,ye.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,ye.start),Te.write_shift(4,ye.size),Te.write_shift(4,0)}for(Se=1;Se<le.FileIndex.length;++Se)if(ye=le.FileIndex[Se],ye.size>=4096)if(Te.l=ye.start+1<<9,kn&&Buffer.isBuffer(ye.content))ye.content.copy(Te,Te.l,0,ye.size),Te.l+=ye.size+511&-512;else{for(Je=0;Je<ye.size;++Je)Te.write_shift(1,ye.content[Je]);for(;Je&511;++Je)Te.write_shift(1,0)}for(Se=1;Se<le.FileIndex.length;++Se)if(ye=le.FileIndex[Se],ye.size>0&&ye.size<4096)if(kn&&Buffer.isBuffer(ye.content))ye.content.copy(Te,Te.l,0,ye.size),Te.l+=ye.size+63&-64;else{for(Je=0;Je<ye.size;++Je)Te.write_shift(1,ye.content[Je]);for(;Je&63;++Je)Te.write_shift(1,0)}if(kn)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function B(le,ve){var ge=le.FullPaths.map(function(Je){return Je.toUpperCase()}),we=ge.map(function(Je){var de=Je.split("/");return de[de.length-(Je.slice(-1)=="/"?2:1)]}),Te=!1;ve.charCodeAt(0)===47?(Te=!0,ve=ge[0].slice(0,-1)+ve):Te=ve.indexOf("/")!==-1;var Se=ve.toUpperCase(),Ze=Te===!0?ge.indexOf(Se):we.indexOf(Se);if(Ze!==-1)return le.FileIndex[Ze];var ut=!Se.match(Iy);for(Se=Se.replace(zo,""),ut&&(Se=Se.replace(Iy,"!")),Ze=0;Ze<ge.length;++Ze)if((ut?ge[Ze].replace(Iy,"!"):ge[Ze]).replace(zo,"")==Se||(ut?we[Ze].replace(Iy,"!"):we[Ze]).replace(zo,"")==Se)return le.FileIndex[Ze];return null}var V=64,ee=-2,ae="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],te="00000000000000000000000000000000",L={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ee,FREESECT:-1,HEADER_SIGNATURE:ae,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:te,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(le,ve,ge){u();var we=F(le,ge);c.writeFileSync(ve,we)}function I(le){for(var ve=new Array(le.length),ge=0;ge<le.length;++ge)ve[ge]=String.fromCharCode(le[ge]);return ve.join("")}function H(le,ve){var ge=F(le,ve);switch(ve&&ve.type||"buffer"){case"file":return u(),c.writeFileSync(ve.filename,ge),ge;case"binary":return typeof ge=="string"?ge:I(ge);case"base64":return jv(typeof ge=="string"?ge:I(ge));case"buffer":if(kn)return Buffer.isBuffer(ge)?ge:_0(ge);case"array":return typeof ge=="string"?Fl(ge):ge}return ge}var U;function R(le){try{var ve=le.InflateRaw,ge=new ve;if(ge._processChunk(new Uint8Array([3,0]),ge._finishFlushFlag),ge.bytesRead)U=le;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function z(le,ve){if(!U)return Tt(le,ve);var ge=U.InflateRaw,we=new ge,Te=we._processChunk(le.slice(le.l),we._finishFlushFlag);return le.l+=we.bytesRead,Te}function G(le){return U?U.deflateRawSync(le):nt(le)}var X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function se(le){var ve=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(ve>>16|ve>>8|ve)&255}for(var ue=typeof Uint8Array<"u",me=ue?new Uint8Array(256):[],Ne=0;Ne<256;++Ne)me[Ne]=se(Ne);function ce(le,ve){var ge=me[le&255];return ve<=8?ge>>>8-ve:(ge=ge<<8|me[le>>8&255],ve<=16?ge>>>16-ve:(ge=ge<<8|me[le>>16&255],ge>>>24-ve))}function Ue(le,ve){var ge=ve&7,we=ve>>>3;return(le[we]|(ge<=6?0:le[we+1]<<8))>>>ge&3}function pe(le,ve){var ge=ve&7,we=ve>>>3;return(le[we]|(ge<=5?0:le[we+1]<<8))>>>ge&7}function je(le,ve){var ge=ve&7,we=ve>>>3;return(le[we]|(ge<=4?0:le[we+1]<<8))>>>ge&15}function We(le,ve){var ge=ve&7,we=ve>>>3;return(le[we]|(ge<=3?0:le[we+1]<<8))>>>ge&31}function Me(le,ve){var ge=ve&7,we=ve>>>3;return(le[we]|(ge<=1?0:le[we+1]<<8))>>>ge&127}function Nt(le,ve,ge){var we=ve&7,Te=ve>>>3,Se=(1<<ge)-1,Ze=le[Te]>>>we;return ge<8-we||(Ze|=le[Te+1]<<8-we,ge<16-we)||(Ze|=le[Te+2]<<16-we,ge<24-we)||(Ze|=le[Te+3]<<24-we),Ze&Se}function $e(le,ve,ge){var we=ve&7,Te=ve>>>3;return we<=5?le[Te]|=(ge&7)<<we:(le[Te]|=ge<<we&255,le[Te+1]=(ge&7)>>8-we),ve+3}function St(le,ve,ge){var we=ve&7,Te=ve>>>3;return ge=(ge&1)<<we,le[Te]|=ge,ve+1}function At(le,ve,ge){var we=ve&7,Te=ve>>>3;return ge<<=we,le[Te]|=ge&255,ge>>>=8,le[Te+1]=ge,ve+8}function Bt(le,ve,ge){var we=ve&7,Te=ve>>>3;return ge<<=we,le[Te]|=ge&255,ge>>>=8,le[Te+1]=ge&255,le[Te+2]=ge>>>8,ve+16}function Gt(le,ve){var ge=le.length,we=2*ge>ve?2*ge:ve+5,Te=0;if(ge>=ve)return le;if(kn){var Se=mD(we);if(le.copy)le.copy(Se);else for(;Te<le.length;++Te)Se[Te]=le[Te];return Se}else if(ue){var Ze=new Uint8Array(we);if(Ze.set)Ze.set(le);else for(;Te<ge;++Te)Ze[Te]=le[Te];return Ze}return le.length=we,le}function or(le){for(var ve=new Array(le),ge=0;ge<le;++ge)ve[ge]=0;return ve}function yr(le,ve,ge){var we=1,Te=0,Se=0,Ze=0,ut=0,Je=le.length,de=ue?new Uint16Array(32):or(32);for(Se=0;Se<32;++Se)de[Se]=0;for(Se=Je;Se<ge;++Se)le[Se]=0;Je=le.length;var ye=ue?new Uint16Array(Je):or(Je);for(Se=0;Se<Je;++Se)de[Te=le[Se]]++,we<Te&&(we=Te),ye[Se]=0;for(de[0]=0,Se=1;Se<=we;++Se)de[Se+16]=ut=ut+de[Se-1]<<1;for(Se=0;Se<Je;++Se)ut=le[Se],ut!=0&&(ye[Se]=de[ut+16]++);var Pe=0;for(Se=0;Se<Je;++Se)if(Pe=le[Se],Pe!=0)for(ut=ce(ye[Se],we)>>we-Pe,Ze=(1<<we+4-Pe)-1;Ze>=0;--Ze)ve[ut|Ze<<Pe]=Pe&15|Se<<4;return we}var it=ue?new Uint16Array(512):or(512),Ve=ue?new Uint16Array(32):or(32);if(!ue){for(var at=0;at<512;++at)it[at]=0;for(at=0;at<32;++at)Ve[at]=0}(function(){for(var le=[],ve=0;ve<32;ve++)le.push(5);yr(le,Ve,32);var ge=[];for(ve=0;ve<=143;ve++)ge.push(8);for(;ve<=255;ve++)ge.push(9);for(;ve<=279;ve++)ge.push(7);for(;ve<=287;ve++)ge.push(8);yr(ge,it,288)})();var pt=(function(){for(var ve=ue?new Uint8Array(32768):[],ge=0,we=0;ge<q.length-1;++ge)for(;we<q[ge+1];++we)ve[we]=ge;for(;we<32768;++we)ve[we]=29;var Te=ue?new Uint8Array(259):[];for(ge=0,we=0;ge<ne.length-1;++ge)for(;we<ne[ge+1];++we)Te[we]=ge;function Se(ut,Je){for(var de=0;de<ut.length;){var ye=Math.min(65535,ut.length-de),Pe=de+ye==ut.length;for(Je.write_shift(1,+Pe),Je.write_shift(2,ye),Je.write_shift(2,~ye&65535);ye-- >0;)Je[Je.l++]=ut[de++]}return Je.l}function Ze(ut,Je){for(var de=0,ye=0,Pe=ue?new Uint16Array(32768):[];ye<ut.length;){var Be=Math.min(65535,ut.length-ye);if(Be<10){for(de=$e(Je,de,+(ye+Be==ut.length)),de&7&&(de+=8-(de&7)),Je.l=de/8|0,Je.write_shift(2,Be),Je.write_shift(2,~Be&65535);Be-- >0;)Je[Je.l++]=ut[ye++];de=Je.l*8;continue}de=$e(Je,de,+(ye+Be==ut.length)+2);for(var Ye=0;Be-- >0;){var ot=ut[ye];Ye=(Ye<<5^ot)&32767;var wt=-1,er=0;if((wt=Pe[Ye])&&(wt|=ye&-32768,wt>ye&&(wt-=32768),wt<ye))for(;ut[wt+er]==ut[ye+er]&&er<250;)++er;if(er>2){ot=Te[er],ot<=22?de=At(Je,de,me[ot+1]>>1)-1:(At(Je,de,3),de+=5,At(Je,de,me[ot-23]>>5),de+=3);var Ft=ot<8?0:ot-4>>2;Ft>0&&(Bt(Je,de,er-ne[ot]),de+=Ft),ot=ve[ye-wt],de=At(Je,de,me[ot]>>3),de-=3;var Yt=ot<4?0:ot-2>>1;Yt>0&&(Bt(Je,de,ye-wt-q[ot]),de+=Yt);for(var _r=0;_r<er;++_r)Pe[Ye]=ye&32767,Ye=(Ye<<5^ut[ye])&32767,++ye;Be-=er-1}else ot<=143?ot=ot+48:de=St(Je,de,1),de=At(Je,de,me[ot]),Pe[Ye]=ye&32767,++ye}de=At(Je,de,0)-1}return Je.l=(de+7)/8|0,Je.l}return function(Je,de){return Je.length<8?Se(Je,de):Ze(Je,de)}})();function nt(le){var ve=Rt(50+Math.floor(le.length*1.1)),ge=pt(le,ve);return ve.slice(0,ge)}var kt=ue?new Uint16Array(32768):or(32768),Wt=ue?new Uint16Array(32768):or(32768),rr=ue?new Uint16Array(128):or(128),ur=1,Nr=1;function wr(le,ve){var ge=We(le,ve)+257;ve+=5;var we=We(le,ve)+1;ve+=5;var Te=je(le,ve)+4;ve+=4;for(var Se=0,Ze=ue?new Uint8Array(19):or(19),ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Je=1,de=ue?new Uint8Array(8):or(8),ye=ue?new Uint8Array(8):or(8),Pe=Ze.length,Be=0;Be<Te;++Be)Ze[X[Be]]=Se=pe(le,ve),Je<Se&&(Je=Se),de[Se]++,ve+=3;var Ye=0;for(de[0]=0,Be=1;Be<=Je;++Be)ye[Be]=Ye=Ye+de[Be-1]<<1;for(Be=0;Be<Pe;++Be)(Ye=Ze[Be])!=0&&(ut[Be]=ye[Ye]++);var ot=0;for(Be=0;Be<Pe;++Be)if(ot=Ze[Be],ot!=0){Ye=me[ut[Be]]>>8-ot;for(var wt=(1<<7-ot)-1;wt>=0;--wt)rr[Ye|wt<<ot]=ot&7|Be<<3}var er=[];for(Je=1;er.length<ge+we;)switch(Ye=rr[Me(le,ve)],ve+=Ye&7,Ye>>>=3){case 16:for(Se=3+Ue(le,ve),ve+=2,Ye=er[er.length-1];Se-- >0;)er.push(Ye);break;case 17:for(Se=3+pe(le,ve),ve+=3;Se-- >0;)er.push(0);break;case 18:for(Se=11+Me(le,ve),ve+=7;Se-- >0;)er.push(0);break;default:er.push(Ye),Je<Ye&&(Je=Ye);break}var Ft=er.slice(0,ge),Yt=er.slice(ge);for(Be=ge;Be<286;++Be)Ft[Be]=0;for(Be=we;Be<30;++Be)Yt[Be]=0;return ur=yr(Ft,kt,286),Nr=yr(Yt,Wt,30),ve}function ft(le,ve){if(le[0]==3&&!(le[1]&3))return[Gf(ve),2];for(var ge=0,we=0,Te=mD(ve||1<<18),Se=0,Ze=Te.length>>>0,ut=0,Je=0;(we&1)==0;){if(we=pe(le,ge),ge+=3,we>>>1)we>>1==1?(ut=9,Je=5):(ge=wr(le,ge),ut=ur,Je=Nr);else{ge&7&&(ge+=8-(ge&7));var de=le[ge>>>3]|le[(ge>>>3)+1]<<8;if(ge+=32,de>0)for(!ve&&Ze<Se+de&&(Te=Gt(Te,Se+de),Ze=Te.length);de-- >0;)Te[Se++]=le[ge>>>3],ge+=8;continue}for(;;){!ve&&Ze<Se+32767&&(Te=Gt(Te,Se+32767),Ze=Te.length);var ye=Nt(le,ge,ut),Pe=we>>>1==1?it[ye]:kt[ye];if(ge+=Pe&15,Pe>>>=4,(Pe>>>8&255)===0)Te[Se++]=Pe;else{if(Pe==256)break;Pe-=257;var Be=Pe<8?0:Pe-4>>2;Be>5&&(Be=0);var Ye=Se+ne[Pe];Be>0&&(Ye+=Nt(le,ge,Be),ge+=Be),ye=Nt(le,ge,Je),Pe=we>>>1==1?Ve[ye]:Wt[ye],ge+=Pe&15,Pe>>>=4;var ot=Pe<4?0:Pe-2>>1,wt=q[Pe];for(ot>0&&(wt+=Nt(le,ge,ot),ge+=ot),!ve&&Ze<Ye&&(Te=Gt(Te,Ye+100),Ze=Te.length);Se<Ye;)Te[Se]=Te[Se-wt],++Se}}}return ve?[Te,ge+7>>>3]:[Te.slice(0,Se),ge+7>>>3]}function Tt(le,ve){var ge=le.slice(le.l||0),we=ft(ge,ve);return le.l+=we[1],we[0]}function Ot(le,ve){if(le)typeof console<"u"&&console.error(ve);else throw new Error(ve)}function he(le,ve){var ge=le;Hi(ge,0);var we=[],Te=[],Se={FileIndex:we,FullPaths:Te};P(Se,{root:ve.root});for(var Ze=ge.length-4;(ge[Ze]!=80||ge[Ze+1]!=75||ge[Ze+2]!=5||ge[Ze+3]!=6)&&Ze>=0;)--Ze;ge.l=Ze+4,ge.l+=4;var ut=ge.read_shift(2);ge.l+=6;var Je=ge.read_shift(4);for(ge.l=Je,Ze=0;Ze<ut;++Ze){ge.l+=20;var de=ge.read_shift(4),ye=ge.read_shift(4),Pe=ge.read_shift(2),Be=ge.read_shift(2),Ye=ge.read_shift(2);ge.l+=8;var ot=ge.read_shift(4),wt=o(ge.slice(ge.l+Pe,ge.l+Pe+Be));ge.l+=Pe+Be+Ye;var er=ge.l;ge.l=ot+4,Ee(ge,de,ye,Se,wt),ge.l=er}return Se}function Ee(le,ve,ge,we,Te){le.l+=2;var Se=le.read_shift(2),Ze=le.read_shift(2),ut=i(le);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var Je=le.read_shift(4),de=le.read_shift(4),ye=le.read_shift(4),Pe=le.read_shift(2),Be=le.read_shift(2),Ye="",ot=0;ot<Pe;++ot)Ye+=String.fromCharCode(le[le.l++]);if(Be){var wt=o(le.slice(le.l,le.l+Be));(wt[21589]||{}).mt&&(ut=wt[21589].mt),((Te||{})[21589]||{}).mt&&(ut=Te[21589].mt)}le.l+=Be;var er=le.slice(le.l,le.l+de);switch(Ze){case 8:er=z(le,ye);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ze)}var Ft=!1;Se&8&&(Je=le.read_shift(4),Je==134695760&&(Je=le.read_shift(4),Ft=!0),de=le.read_shift(4),ye=le.read_shift(4)),de!=ve&&Ot(Ft,"Bad compressed size: "+ve+" != "+de),ye!=ge&&Ot(Ft,"Bad uncompressed size: "+ge+" != "+ye),Rr(we,Ye,er,{unsafe:!0,mt:ut})}function Ae(le,ve){var ge=ve||{},we=[],Te=[],Se=Rt(1),Ze=ge.compression?8:0,ut=0,Je=0,de=0,ye=0,Pe=0,Be=le.FullPaths[0],Ye=Be,ot=le.FileIndex[0],wt=[],er=0;for(Je=1;Je<le.FullPaths.length;++Je)if(Ye=le.FullPaths[Je].slice(Be.length),ot=le.FileIndex[Je],!(!ot.size||!ot.content||Ye=="Sh33tJ5")){var Ft=ye,Yt=Rt(Ye.length);for(de=0;de<Ye.length;++de)Yt.write_shift(1,Ye.charCodeAt(de)&127);Yt=Yt.slice(0,Yt.l),wt[Pe]=Lfe.buf(ot.content,0);var _r=ot.content;Ze==8&&(_r=G(_r)),Se=Rt(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,ut),Se.write_shift(2,Ze),ot.mt?a(Se,ot.mt):Se.write_shift(4,0),Se.write_shift(-4,wt[Pe]),Se.write_shift(4,_r.length),Se.write_shift(4,ot.content.length),Se.write_shift(2,Yt.length),Se.write_shift(2,0),ye+=Se.length,we.push(Se),ye+=Yt.length,we.push(Yt),ye+=_r.length,we.push(_r),Se=Rt(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,ut),Se.write_shift(2,Ze),Se.write_shift(4,0),Se.write_shift(-4,wt[Pe]),Se.write_shift(4,_r.length),Se.write_shift(4,ot.content.length),Se.write_shift(2,Yt.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,Ft),er+=Se.l,Te.push(Se),er+=Yt.length,Te.push(Yt),++Pe}return Se=Rt(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,Pe),Se.write_shift(2,Pe),Se.write_shift(4,er),Se.write_shift(4,ye),Se.write_shift(2,0),bi([bi(we),bi(Te),Se])}var Fe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function xt(le,ve){if(le.ctype)return le.ctype;var ge=le.name||"",we=ge.match(/\.([^\.]+)$/);return we&&Fe[we[1]]||ve&&(we=(ge=ve).match(/[\.\\]([^\.\\])+$/),we&&Fe[we[1]])?Fe[we[1]]:"application/octet-stream"}function $t(le){for(var ve=jv(le),ge=[],we=0;we<ve.length;we+=76)ge.push(ve.slice(we,we+76));return ge.join(`\r
`)+`\r
`}function lr(le){var ve=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(de){var ye=de.charCodeAt(0).toString(16).toUpperCase();return"="+(ye.length==1?"0"+ye:ye)});ve=ve.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ve.charAt(0)==`
`&&(ve="=0D"+ve.slice(1)),ve=ve.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ge=[],we=ve.split(`\r
`),Te=0;Te<we.length;++Te){var Se=we[Te];if(Se.length==0){ge.push("");continue}for(var Ze=0;Ze<Se.length;){var ut=76,Je=Se.slice(Ze,Ze+ut);Je.charAt(ut-1)=="="?ut--:Je.charAt(ut-2)=="="?ut-=2:Je.charAt(ut-3)=="="&&(ut-=3),Je=Se.slice(Ze,Ze+ut),Ze+=ut,Ze<Se.length&&(Je+="="),ge.push(Je)}}return ge.join(`\r
`)}function Ke(le){for(var ve=[],ge=0;ge<le.length;++ge){for(var we=le[ge];ge<=le.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+le[++ge];ve.push(we)}for(var Te=0;Te<ve.length;++Te)ve[Te]=ve[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return Fl(ve.join(`\r
`))}function ct(le,ve,ge){for(var we="",Te="",Se="",Ze,ut=0;ut<10;++ut){var Je=ve[ut];if(!Je||Je.match(/^\s*$/))break;var de=Je.match(/^(.*?):\s*([^\s].*)$/);if(de)switch(de[1].toLowerCase()){case"content-location":we=de[2].trim();break;case"content-type":Se=de[2].trim();break;case"content-transfer-encoding":Te=de[2].trim();break}}switch(++ut,Te.toLowerCase()){case"base64":Ze=Fl(Bl(ve.slice(ut).join("")));break;case"quoted-printable":Ze=Ke(ve.slice(ut));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var ye=Rr(le,we.slice(ge.length),Ze,{unsafe:!0});Se&&(ye.ctype=Se)}function yt(le,ve){if(I(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ge=ve&&ve.root||"",we=(kn&&Buffer.isBuffer(le)?le.toString("binary"):I(le)).split(`\r
`),Te=0,Se="";for(Te=0;Te<we.length;++Te)if(Se=we[Te],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),ge||(ge=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,ge.length)!=ge))for(;ge.length>0&&(ge=ge.slice(0,ge.length-1),ge=ge.slice(0,ge.lastIndexOf("/")+1),Se.slice(0,ge.length)!=ge););var Ze=(we[1]||"").match(/boundary="(.*?)"/);if(!Ze)throw new Error("MAD cannot find boundary");var ut="--"+(Ze[1]||""),Je=[],de=[],ye={FileIndex:Je,FullPaths:de};P(ye);var Pe,Be=0;for(Te=0;Te<we.length;++Te){var Ye=we[Te];Ye!==ut&&Ye!==ut+"--"||(Be++&&ct(ye,we.slice(Pe,Te),ge),Pe=Te)}return ye}function Jt(le,ve){var ge=ve||{},we=ge.boundary||"SheetJS";we="------="+we;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],Se=le.FullPaths[0],Ze=Se,ut=le.FileIndex[0],Je=1;Je<le.FullPaths.length;++Je)if(Ze=le.FullPaths[Je].slice(Se.length),ut=le.FileIndex[Je],!(!ut.size||!ut.content||Ze=="Sh33tJ5")){Ze=Ze.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(er){return"_x"+er.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(er){return"_u"+er.charCodeAt(0).toString(16)+"_"});for(var de=ut.content,ye=kn&&Buffer.isBuffer(de)?de.toString("binary"):I(de),Pe=0,Be=Math.min(1024,ye.length),Ye=0,ot=0;ot<=Be;++ot)(Ye=ye.charCodeAt(ot))>=32&&Ye<128&&++Pe;var wt=Pe>=Be*4/5;Te.push(we),Te.push("Content-Location: "+(ge.root||"file:///C:/SheetJS/")+Ze),Te.push("Content-Transfer-Encoding: "+(wt?"quoted-printable":"base64")),Te.push("Content-Type: "+xt(ut,Ze)),Te.push(""),Te.push(wt?lr(ye):$t(ye))}return Te.push(we+`--\r
`),Te.join(`\r
`)}function cr(le){var ve={};return P(ve,le),ve}function Rr(le,ve,ge,we){var Te=we&&we.unsafe;Te||P(le);var Se=!Te&&Wr.find(le,ve);if(!Se){var Ze=le.FullPaths[0];ve.slice(0,Ze.length)==Ze?Ze=ve:(Ze.slice(-1)!="/"&&(Ze+="/"),Ze=(Ze+ve).replace("//","/")),Se={name:s(ve),type:2},le.FileIndex.push(Se),le.FullPaths.push(Ze),Te||Wr.utils.cfb_gc(le)}return Se.content=ge,Se.size=ge?ge.length:0,we&&(we.CLSID&&(Se.clsid=we.CLSID),we.mt&&(Se.mt=we.mt),we.ct&&(Se.ct=we.ct)),Se}function Hr(le,ve){P(le);var ge=Wr.find(le,ve);if(ge){for(var we=0;we<le.FileIndex.length;++we)if(le.FileIndex[we]==ge)return le.FileIndex.splice(we,1),le.FullPaths.splice(we,1),!0}return!1}function He(le,ve,ge){P(le);var we=Wr.find(le,ve);if(we){for(var Te=0;Te<le.FileIndex.length;++Te)if(le.FileIndex[Te]==we)return le.FileIndex[Te].name=s(ge),le.FullPaths[Te]=ge,!0}return!1}function Ct(le){M(le,!0)}return t.find=B,t.read=j,t.parse=d,t.write=H,t.writeFile=K,t.utils={cfb_new:cr,cfb_add:Rr,cfb_del:Hr,cfb_mov:He,cfb_gc:Ct,ReadShift:Qy,CheckField:tG,prep_blob:Hi,bconcat:bi,use_zlib:R,_deflateRaw:nt,_inflateRaw:Tt,consts:L},t})();function Bfe(e){return typeof e=="string"?c3(e):Array.isArray(e)?dfe(e):e}function S2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=c3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Hu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([Bfe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=sh(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function $fe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function ga(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function _D(e,t){for(var r=[],n=ga(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function d3(e){for(var t=[],r=ga(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function f3(e){for(var t=[],r=ga(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function zfe(e){for(var t=[],r=ga(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var $4=new Date(1899,11,30,0,0,0);function si(e,t){var r=e.getTime(),n=$4.getTime()+(e.getTimezoneOffset()-$4.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var DH=new Date,Ufe=$4.getTime()+(DH.getTimezoneOffset()-$4.getTimezoneOffset())*6e4,SD=DH.getTimezoneOffset();function h3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Ufe),t.getTimezoneOffset()!==SD&&t.setTime(t.getTime()+(t.getTimezoneOffset()-SD)*6e4),t}function Wfe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var kD=new Date("2017-02-19T19:06:09.000Z"),OH=isNaN(kD.getFullYear())?new Date("2/19/17"):kD,Hfe=OH.getFullYear()==2017;function Ms(e,t){var r=new Date(e);if(Hfe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(OH.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Om(e,t){if(kn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Hu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Hu(_H(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Hu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Hu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Fs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Fs(e[r]));return t}function ha(e,t){for(var r="";r.length<t;)r+=e;return r}function au(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var Gfe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Kp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Gfe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Vfe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function RH(e){return e?e.content&&e.type?Om(e.content,!0):e.data?Ry(e.data):e.asNodeBuffer&&kn?Ry(e.asNodeBuffer().toString("binary")):e.asBinary?Ry(e.asBinary()):e._data&&e._data.getContent?Ry(Om(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function IH(e){if(!e)return null;if(e.data)return fD(e.data);if(e.asNodeBuffer&&kn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?fD(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function qfe(e){return e&&e.name.slice(-4)===".bin"?IH(e):RH(e)}function uc(e,t){for(var r=e.FullPaths||ga(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function aN(e,t){var r=uc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function La(e,t,r){if(!r)return qfe(aN(e,t));if(!t)return null;try{return La(e,t)}catch{return null}}function Dl(e,t,r){if(!r)return RH(aN(e,t));if(!t)return null;try{return Dl(e,t)}catch{return null}}function Kfe(e,t,r){return IH(aN(e,t))}function TD(e){for(var t=e.FullPaths||ga(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function wn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return kn?n=_0(r):n=ffe(r),Wr.utils.cfb_add(e,t,n)}Wr.utils.cfb_add(e,t,r)}else e.file(t,r)}function iN(){return Wr.utils.cfb_new()}function LH(e,t){switch(t.type){case"base64":return Wr.read(e,{type:"base64"});case"binary":return Wr.read(e,{type:"binary"});case"buffer":case"array":return Wr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Ly(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Ma=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Yfe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,CD=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Xfe=/<[^>]*>/g,wo=Ma.match(CD)?CD:Xfe,Jfe=/<\w*:/,Qfe=/<(\/?)\w+:/;function nn(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(Yfe),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(h=(s=f.charCodeAt(a+1))==34||s==39?1:0,c=f.slice(a+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=c,n[g.toLowerCase()]=c}}return n}function ad(e){return e.replace(Qfe,"<$1")}var BH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},oN=d3(BH),Rn=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,c){return BH[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),lN=/[&<>'"]/g,Zfe=/[\u0000-\u0008\u000b-\u001f]/g;function is(e){var t=e+"";return t.replace(lN,function(r){return oN[r]}).replace(Zfe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function ND(e){return is(e).replace(/ /g,"_x0020_")}var $H=/[\u0000-\u001f]/g;function cN(e){var t=e+"";return t.replace(lN,function(r){return oN[r]}).replace(/\n/g,"<br/>").replace($H,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function ehe(e){var t=e+"";return t.replace(lN,function(r){return oN[r]}).replace($H,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var ED=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function the(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function As(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function B5(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function AD(e){var t=Gf(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function jD(e){return _0(e,"binary").toString("utf8")}var mb="foo bar baz",ms=kn&&(jD(mb)==B5(mb)&&jD||AD(mb)==B5(mb)&&AD)||B5,Hu=kn?function(e){return _0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Mv=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),zH=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),rhe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),nhe=/<\/?(?:vt:)?variant>/g,she=/<(?:vt:)([^>]*)>([\s\S]*)</;function PD(e,t){var r=nn(e),n=e.match(rhe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(nhe,"").match(she);i&&s.push({v:ms(i[2]),t:i[1]})}),s}var UH=/(^\s|\s$|\n)/;function qi(e,t){return"<"+e+(t.match(UH)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Fv(e){return ga(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function dr(e,t,r){return"<"+e+(r!=null?Fv(r):"")+(t!=null?(t.match(UH)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function H8(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function ahe(e,t){switch(typeof e){case"string":var r=dr("vt:lpwstr",is(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return dr((e|0)==e?"vt:i4":"vt:r8",is(String(e)));case"boolean":return dr("vt:bool",e?"true":"false")}if(e instanceof Date)return dr("vt:filetime",H8(e));throw new Error("Unable to serialize "+e)}function uN(e){if(kn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ms(sh(rN(e)));throw new Error("Bad input format: expected Buffer or string")}var Dv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ti={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Jm=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Al={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function ihe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function ohe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var MD=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},FD=kn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:_0(t)})):MD(e)}:MD,DD=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Kd(e,s)));return n.join("").replace(zo,"")},dN=kn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(zo,""):DD(e,t,r)}:DD,OD=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},WH=kn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):OD(e,t,r)}:OD,RD=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(fp(e,s)));return n.join("")},k2=kn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):RD(t,r,n)}:RD,HH=function(e,t){var r=jl(e,t);return r>0?k2(e,t+4,t+4+r-1):""},GH=HH,VH=function(e,t){var r=jl(e,t);return r>0?k2(e,t+4,t+4+r-1):""},qH=VH,KH=function(e,t){var r=2*jl(e,t);return r>0?k2(e,t+4,t+4+r-1):""},YH=KH,XH=function(t,r){var n=jl(t,r);return n>0?dN(t,r+4,r+4+n):""},JH=XH,QH=function(e,t){var r=jl(e,t);return r>0?k2(e,t+4,t+4+r):""},ZH=QH,eG=function(e,t){return ihe(e,t)},z4=eG,fN=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};kn&&(GH=function(t,r){if(!Buffer.isBuffer(t))return HH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},qH=function(t,r){if(!Buffer.isBuffer(t))return VH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},YH=function(t,r){if(!Buffer.isBuffer(t))return KH(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},JH=function(t,r){if(!Buffer.isBuffer(t))return XH(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},ZH=function(t,r){if(!Buffer.isBuffer(t))return QH(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},z4=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):eG(t,r)},fN=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var fp=function(e,t){return e[t]},Kd=function(e,t){return e[t+1]*256+e[t]},lhe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},jl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Qh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},che=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Qy(e,t){var r="",n,s,a=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,kn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Kd(this,u)),u+=2;e*=2;break;case"utf8":r=k2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=dN(this,this.l,this.l+e);break;case"wstr":return Qy.call(this,e,"dbcs");case"lpstr-ansi":r=GH(this,this.l),e=4+jl(this,this.l);break;case"lpstr-cp":r=qH(this,this.l),e=4+jl(this,this.l);break;case"lpwstr":r=YH(this,this.l),e=4+2*jl(this,this.l);break;case"lpp4":e=4+jl(this,this.l),r=JH(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+jl(this,this.l),r=ZH(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=fp(this,this.l+e++))!==0;)a.push(hb(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=Kd(this,this.l+e))!==0;)a.push(hb(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=fp(this,u),this.l=u+1,o=Qy.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(hb(Kd(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=fp(this,u),this.l=u+1,o=Qy.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(hb(fp(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=fp(this,this.l),this.l++,n;case 2:return n=(t==="i"?lhe:Kd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Qh:che)(this,this.l),this.l+=4,n):(s=jl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=z4(this,this.l):s=z4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=WH(this,this.l,e);break}}return this.l+=e,r}var uhe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},dhe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},fhe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function hhe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)fhe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,uhe(this,t,this.l);break;case 8:if(n=8,r==="f"){ohe(this,t,this.l);break}case 16:break;case-4:n=4,dhe(this,t,this.l);break}return this.l+=n,this}function tG(e,t){var r=WH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Hi(e,t){e.l=t,e.read_shift=Qy,e.chk=tG,e.write_shift=hhe}function vo(e,t){e.l+=t}function Rt(e){var t=Gf(e);return Hi(t,0),t}function S0(e,t,r){if(e){var n,s,a;Hi(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=$v[o]||$v[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;c=e.l+a;var d=u.f&&u.f(e,a,r);if(e.l=c,t(d,u,o))return}}}function dl(){var e=[],t=kn?256:2048,r=function(u){var d=Rt(u);return Hi(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},i=function(){return s(),bi(e)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function Ut(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=$v[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&fN(r)&&e.push(r)}}function Zy(e,t,r){var n=Fs(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function ID(e,t,r){var n=Fs(e);return n.s=Zy(n.s,t.s,r),n.e=Zy(n.e,t.s,r),n}function ev(e,t){if(e.cRel&&e.c<0)for(e=Fs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Fs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=en(e);return!e.cRel&&e.cRel!=null&&(r=phe(r)),!e.rRel&&e.rRel!=null&&(r=mhe(r)),r}function $5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Zs(e.s.c)+":"+(e.e.cRel?"":"$")+Zs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ja(e.s.r)+":"+(e.e.rRel?"":"$")+ja(e.e.r):ev(e.s,t.biff)+":"+ev(e.e,t.biff)}function hN(e){return parseInt(ghe(e),10)-1}function ja(e){return""+(e+1)}function mhe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ghe(e){return e.replace(/\$(\d+)$/,"$1")}function mN(e){for(var t=xhe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Zs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function phe(e){return e.replace(/^([A-Z])/,"$$$1")}function xhe(e){return e.replace(/^\$([A-Z])/,"$1")}function yhe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ea(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function en(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function fl(e){var t=e.indexOf(":");return t==-1?{s:ea(e),e:ea(e)}:{s:ea(e.slice(0,t)),e:ea(e.slice(t+1))}}function vn(e,t){return typeof t>"u"||typeof t=="number"?vn(e.s,e.e):(typeof e!="string"&&(e=en(e)),typeof t!="string"&&(t=en(t)),e==t?e:e+":"+t)}function Ln(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function LD(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=kc(e.z,r?si(t):t)}catch{}try{return e.w=kc((e.XF||{}).numFmtId||(r?14:0),r?si(t):t)}catch{return""+t}}function f0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?k0[e.v]||e.v:t==null?LD(e,e.v):LD(e,t))}function ah(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function rG(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?ea(n.origin):n.origin;i=c.r,o=c.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Ln(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var g={v:t[f][h]},x=i+f,y=o+h;if(u.s.r>x&&(u.s.r=x),u.s.c>y&&(u.s.c=y),u.e.r<x&&(u.e.r=x),u.e.c<y&&(u.e.c=y),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))g=t[f][h];else if(Array.isArray(g.v)&&(g.f=t[f][h][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||Qr[14],n.cellDates?(g.t="d",g.w=kc(g.z,si(g.v))):(g.t="n",g.v=si(g.v),g.w=kc(g.z,g.v))):g.t="s";if(s)a[x]||(a[x]=[]),a[x][y]&&a[x][y].z&&(g.z=a[x][y].z),a[x][y]=g;else{var v=en({c:y,r:x});a[v]&&a[v].z&&(g.z=a[v].z),a[v]=g}}}return u.s.c<1e7&&(a["!ref"]=vn(u)),a}function C1(e,t){return rG(null,e,t)}function vhe(e){return e.read_shift(4,"i")}function iu(e,t){return t||(t=Rt(4)),t.write_shift(4,e),t}function xo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Si(e,t){var r=!1;return t==null&&(r=!0,t=Rt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function whe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function bhe(e,t){return t||(t=Rt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function gN(e,t){var r=e.l,n=e.read_shift(1),s=xo(e),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)a.push(whe(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function _he(e,t){var r=!1;return t==null&&(r=!0,t=Rt(15+4*e.t.length)),t.write_shift(1,0),Si(e.t,t),r?t.slice(0,t.l):t}var She=gN;function khe(e,t){var r=!1;return t==null&&(r=!0,t=Rt(23+4*e.t.length)),t.write_shift(1,1),Si(e.t,t),t.write_shift(4,1),bhe({},t),r?t.slice(0,t.l):t}function Ac(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Qm(e,t){return t==null&&(t=Rt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Zm(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function eg(e,t){return t==null&&(t=Rt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var The=xo,nG=Si;function pN(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function U4(e,t){var r=!1;return t==null&&(r=!0,t=Rt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Che=xo,G8=pN,xN=U4;function yN(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?z4([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Qh(t,0)>>2;return r?s/100:s}function sG(e,t){t==null&&(t=Rt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function aG(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Nhe(e,t){return t||(t=Rt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var tg=aG,N1=Nhe;function ho(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Rm(e,t){return(t||Rt(8)).write_shift(8,e,"f")}function Ehe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=fm[s];u&&(t.rgb=Rv(u));break;case 2:t.rgb=Rv([i,o,c]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function W4(e,t){if(t||(t=Rt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Ahe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function jhe(e,t){t||(t=Rt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function iG(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Phe(e){return iG(e,1)}function Mhe(e){return iG(e,2)}var vN=2,nl=3,gb=11,BD=12,H4=19,pb=64,Fhe=65,Dhe=71,Ohe=4108,Rhe=4126,xi=80,oG=81,Ihe=[xi,oG],V8={1:{n:"CodePage",t:vN},2:{n:"Category",t:xi},3:{n:"PresentationFormat",t:xi},4:{n:"ByteCount",t:nl},5:{n:"LineCount",t:nl},6:{n:"ParagraphCount",t:nl},7:{n:"SlideCount",t:nl},8:{n:"NoteCount",t:nl},9:{n:"HiddenCount",t:nl},10:{n:"MultimediaClipCount",t:nl},11:{n:"ScaleCrop",t:gb},12:{n:"HeadingPairs",t:Ohe},13:{n:"TitlesOfParts",t:Rhe},14:{n:"Manager",t:xi},15:{n:"Company",t:xi},16:{n:"LinksUpToDate",t:gb},17:{n:"CharacterCount",t:nl},19:{n:"SharedDoc",t:gb},22:{n:"HyperlinksChanged",t:gb},23:{n:"AppVersion",t:nl,p:"version"},24:{n:"DigSig",t:Fhe},26:{n:"ContentType",t:xi},27:{n:"ContentStatus",t:xi},28:{n:"Language",t:xi},29:{n:"Version",t:xi},255:{},2147483648:{n:"Locale",t:H4},2147483651:{n:"Behavior",t:H4},1919054434:{}},q8={1:{n:"CodePage",t:vN},2:{n:"Title",t:xi},3:{n:"Subject",t:xi},4:{n:"Author",t:xi},5:{n:"Keywords",t:xi},6:{n:"Comments",t:xi},7:{n:"Template",t:xi},8:{n:"LastAuthor",t:xi},9:{n:"RevNumber",t:xi},10:{n:"EditTime",t:pb},11:{n:"LastPrinted",t:pb},12:{n:"CreatedDate",t:pb},13:{n:"ModifiedDate",t:pb},14:{n:"PageCount",t:nl},15:{n:"WordCount",t:nl},16:{n:"CharCount",t:nl},17:{n:"Thumbnail",t:Dhe},18:{n:"Application",t:xi},19:{n:"DocSecurity",t:nl},255:{},2147483648:{n:"Locale",t:H4},2147483651:{n:"Behavior",t:H4},1919054434:{}},$D={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Lhe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Bhe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var $he=Bhe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),fm=Fs($he),k0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},lG={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},K8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},xb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function wN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function zhe(e){var t=wN();if(!e||!e.match)return t;var r={};if((e.match(wo)||[]).forEach(function(n){var s=nn(n);switch(s[0].replace(Jfe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[K8[s.ContentType]]!==void 0&&t[K8[s.ContentType]].push(s.PartName);break}}),t.xmlns!==ti.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function cG(e,t){var r=zfe(K8),n=[],s;n[n.length]=Ma,n[n.length]=dr("Types",null,{xmlns:ti.CT,"xmlns:xsd":ti.xsd,"xmlns:xsi":ti.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return dr("Default",null,{Extension:c[0],ContentType:c[1]})}));var a=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=dr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:xb[c][t.bookType]||xb[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=dr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:xb[c][t.bookType]||xb[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=dr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Nn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Ov(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function tv(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(wo)||[]).forEach(function(s){var a=nn(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Ly(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Fp(e){var t=[Ma,dr("Relationships",null,{xmlns:ti.RELS})];return ga(e["!id"]).forEach(function(r){t[t.length]=dr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ns(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Nn.HLINK,Nn.XPATH,Nn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Uhe="application/vnd.oasis.opendocument.spreadsheet";function Whe(e,t){for(var r=uN(e),n,s;n=Dv.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=nn(n[0],!1),s.path=="/"&&s.type!==Uhe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Hhe(e){var t=[Ma];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function zD(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Ghe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Vhe(e){var t=[Ma];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(zD(e[r][0],e[r][1])),t.push(Ghe("",e[r][0]));return t.push(zD("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function uG(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+R4.version+"</meta:generator></office:meta></office:document-meta>"}var vc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],qhe=(function(){for(var e=new Array(vc.length),t=0;t<vc.length;++t){var r=vc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function dG(e){var t={};e=ms(e);for(var r=0;r<vc.length;++r){var n=vc[r],s=e.match(qhe[r]);s!=null&&s.length>0&&(t[n[1]]=Rn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ms(t[n[1]]))}return t}function z5(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=is(t),n[n.length]=r?dr(e,t,r):qi(e,t))}function fG(e,t){var r=t||{},n=[Ma,dr("cp:coreProperties",null,{"xmlns:cp":ti.CORE_PROPS,"xmlns:dc":ti.dc,"xmlns:dcterms":ti.dcterms,"xmlns:dcmitype":ti.dcmitype,"xmlns:xsi":ti.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&z5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:H8(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&z5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:H8(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=vc.length;++a){var i=vc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&z5(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var hm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],hG=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function mG(e,t,r,n){var s=[];if(typeof e=="string")s=PD(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(d){return{v:d}}));var i=typeof t=="string"?PD(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function Khe(e,t,r){var n={};return t||(t={}),e=ms(e),hm.forEach(function(s){var a=(e.match(Mv(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=Rn(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&mG(n.HeadingPairs,n.TitlesOfParts,t,r),t}function gG(e){var t=[],r=dr;return e||(e={}),e.Application="SheetJS",t[t.length]=Ma,t[t.length]=dr("Properties",null,{xmlns:ti.EXT_PROPS,"xmlns:vt":ti.vt}),hm.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=is(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+is(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Yhe=/<[^>]+>[^<]*/g;function Xhe(e,t){var r={},n="",s=e.match(Yhe);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=nn(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Rn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Rn(d);break;case"bool":r[n]=As(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ms(d);break;case"cy":case"error":r[n]=Rn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function pG(e){var t=[Ma,dr("Properties",null,{xmlns:ti.CUST_PROPS,"xmlns:vt":ti.vt})];if(!e)return t.join("");var r=1;return ga(e).forEach(function(s){++r,t[t.length]=dr("property",ahe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:is(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Y8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},U5;function Jhe(e,t,r){U5||(U5=d3(Y8)),t=U5[t]||t,e[t]=r}function Qhe(e,t){var r=[];return ga(Y8).map(function(n){for(var s=0;s<vc.length;++s)if(vc[s][1]==n)return vc[s];for(s=0;s<hm.length;++s)if(hm[s][1]==n)return hm[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(qi(Y8[n[1]]||n[1],s))}}),dr("DocumentProperties",r.join(""),{xmlns:Al.o})}function Zhe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&ga(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var i=0;i<vc.length;++i)if(a==vc[i][1])return;for(i=0;i<hm.length;++i)if(a==hm[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=e[a],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),s.push(dr(ND(a),o,{"dt:dt":c}))}}),t&&ga(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var i=t[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(dr(ND(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Al.o+'">'+s.join("")+"</"+n+">"}function bN(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function eme(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=Rt(8);return i.write_shift(4,n),i.write_shift(4,s),i}function xG(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function yG(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function vG(e,t,r){return t===31?yG(e):xG(e,t,r)}function X8(e,t,r){return vG(e,t,r===!1?0:4)}function tme(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return vG(e,t,0)}function rme(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(zo,""),e.l-s&2&&(e.l+=2)}return r}function nme(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(zo,"");return r}function sme(e){var t=e.l,r=G4(e,oG);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=G4(e,nl);return[r,n]}function ame(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(sme(e));return r}function UD(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(zo,"").replace(Iy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function wG(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function ime(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function G4(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==BD&&n!==t&&Ihe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===BD?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return xG(e,n,4).replace(zo,"");case 31:return yG(e);case 64:return bN(e);case 65:return wG(e);case 71:return ime(e);case 80:return X8(e,n,!a.raw).replace(zo,"");case 81:return tme(e,n).replace(zo,"");case 4108:return ame(e);case 4126:case 4127:return n==4127?rme(e):nme(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function WD(e,t){var r=Rt(4),n=Rt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Rt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=eme(t);break;case 31:case 80:for(n=Rt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return bi([r,n])}function HD(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,c=-1,u={};for(i=0;i!=s;++i){var d=e.read_shift(4),f=e.read_shift(4);a[i]=[d,f+r]}a.sort(function(k,b){return k[1]-b[1]});var h={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var g=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,g=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(g=!1,e.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var x=t[a[i][0]];if(h[x.n]=G4(e,x.t,{raw:!0}),x.p==="version"&&(h[x.n]=String(h[x.n]>>16)+"."+("0000"+String(h[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(h[x.n]){case 0:h[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ru(o=h[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[x.n])}}else if(a[i][0]===1){if(o=h.CodePage=G4(e,vN),ru(o),c!==-1){var y=e.l;e.l=a[c][1],u=UD(e,o),e.l=y}}else if(a[i][0]===0){if(o===0){c=i,e.l=a[i+1][1];continue}u=UD(e,o)}else{var v=u[a[i][0]],T;switch(e[e.l]){case 65:e.l+=4,T=wG(e);break;case 30:e.l+=4,T=X8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,T=X8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,T=e.read_shift(4,"i");break;case 19:e.l+=4,T=e.read_shift(4);break;case 5:e.l+=4,T=e.read_shift(8,"f");break;case 11:e.l+=4,T=ka(e,4);break;case 64:e.l+=4,T=Ms(bN(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=T}}return e.l=r+n,h}var bG=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ome(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function GD(e,t,r){var n=Rt(8),s=[],a=[],i=8,o=0,c=Rt(8),u=Rt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),a.push(c),s.push(u),i+=8+c.length,!t){u=Rt(8),u.write_shift(4,0),s.unshift(u);var d=[Rt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Rt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=bi(d),a.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(bG.indexOf(e[o][0])>-1||hG.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],g=0;if(t){g=+t[e[o][0]];var x=r[g];if(x.p=="version"&&typeof h=="string"){var y=h.split(".");h=(+y[0]<<16)+(+y[1]||0)}c=WD(x.t,h)}else{var v=ome(h);v==-1&&(v=31,h=String(h)),c=WD(v,h)}a.push(c),u=Rt(8),u.write_shift(4,t?g:2+o),s.push(u),i+=8+c.length}var T=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,T),T+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),bi([n].concat(s).concat(a))}function VD(e,t,r){var n=e.content;if(!n)return{};Hi(n,0);var s,a,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Wr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=HD(n,t),h={SystemIdentifier:u};for(var g in f)h[g]=f[g];if(h.FMTID=a,s===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var x;try{x=HD(n,null)}catch{}for(g in x)h[g]=x[g];return h.FMTID=[a,i],h}function qD(e,t,r,n,s,a){var i=Rt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Wr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var c=GD(e,r,n);if(o.push(c),s){var u=GD(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+c.length),o.push(u)}return bi(o)}function yf(e,t){return e.read_shift(t),null}function lme(e,t){t||(t=Rt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function cme(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function ka(e,t){return e.read_shift(t)===1}function Oo(e,t){return t||(t=Rt(2)),t.write_shift(2,+!!e),t}function Ba(e){return e.read_shift(2,"u")}function dc(e,t){return t||(t=Rt(2)),t.write_shift(2,e),t}function _G(e,t){return cme(e,t,Ba)}function ume(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function SG(e,t,r){return r||(r=Rt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function T2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function dme(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,c={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*i),n&&(e.l+=o),c.t=d,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function fme(e){var t=e.t||"",r=Rt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Rt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return bi(s)}function Im(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function C2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Im(e,n,r)}function rg(e,t,r){if(r.biff>5)return C2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function kG(e,t,r){return r||(r=Rt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function hme(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function mme(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(zo,"");return n&&(e.l+=24),s}function gme(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(zo,"");return r+i}function pme(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return mme(e);case"0303000000000000c000000000000046":return gme(e);default:throw new Error("Unsupported Moniker "+r)}}function yb(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(zo,""):"";return r}function KD(e,t){t||(t=Rt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function xme(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,c,u="",d,f;s&16&&(a=yb(e,r-e.l)),s&128&&(i=yb(e,r-e.l)),(s&257)===257&&(o=yb(e,r-e.l)),(s&257)===1&&(c=pme(e,r-e.l)),s&8&&(u=yb(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=bN(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var g={Target:h};return d&&(g.guid=d),f&&(g.time=f),a&&(g.Tooltip=a),g}function yme(e){var t=Rt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(a==28)n=n.slice(1),KD(n,t);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&KD(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function TG(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function CG(e,t){var r=TG(e);return r[3]=0,r}function id(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Lm(e,t,r,n){return n||(n=Rt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function vme(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function wme(e,t,r){return t===0?"":rg(e,t,r)}function bme(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function NG(e){var t=e.read_shift(2),r=yN(e);return[t,r]}function _me(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=T2(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function m3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function EG(e,t){return t||(t=Rt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function AG(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var Sme=AG;function jG(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function kme(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Tme(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function ao(e){e.l+=2,e.l+=e.read_shift(2)}var Cme={0:ao,4:ao,5:ao,6:ao,7:Tme,8:ao,9:ao,10:ao,11:ao,12:ao,13:kme,14:ao,15:ao,16:ao,17:ao,18:ao,19:ao,20:ao,21:jG};function Nme(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Cme[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function vb(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function _N(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=Rt(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Eme(e,t){return t===0||e.read_shift(2),1200}function Ame(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=rg(e,0,r);return e.read_shift(t+n-e.l),s}function jme(e,t){var r=!t||t.biff==8,n=Rt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Pme(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Mme(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=T2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function Fme(e,t){var r=!t||t.biff>=8?2:1,n=Rt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Dme(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(dme(e));return a.Count=n,a.Unique=s,a}function Ome(e,t){var r=Rt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=fme(e[s]);var a=bi([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function Rme(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Ime(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Lme(e){var t=vme(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Bme(e){return e.read_shift(2),e.read_shift(4)}function YD(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function $me(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function zme(){var e=Rt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Ume(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Wme(e){var t=Rt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Hme(){}function Gme(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=T2(e,0,r),n}function Vme(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=Rt(s);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function qme(e){var t=id(e);return t.isst=e.read_shift(4),t}function Kme(e,t,r,n){var s=Rt(10);return Lm(e,t,n,s),s.write_shift(4,r),s}function Yme(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=id(e);r.biff==2&&e.l++;var a=C2(e,n-e.l,r);return s.val=a,s}function Xme(e,t,r,n,s){var a=!s||s.biff==8,i=Rt(8+ +a+(1+a)*r.length);return Lm(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function Jme(e,t,r){var n=e.read_shift(2),s=rg(e,0,r);return[n,s]}function Qme(e,t,r,n){var s=r&&r.biff==5;n||(n=Rt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var Zme=rg;function XD(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c}}}function ege(e,t){var r=t.biff==8||!t.biff?4:2,n=Rt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function tge(e){var t=e.read_shift(2),r=e.read_shift(2),n=NG(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function rge(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(NG(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function nge(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function sge(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return s.patternType=Lhe[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function age(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=sge(e,t,n.fStyle,r),n}function JD(e,t,r,n){var s=r&&r.biff==5;n||(n=Rt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function ige(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function oge(e){var t=Rt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function QD(e,t,r){var n=id(e);(r.biff==2||t==9)&&++e.l;var s=ume(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function lge(e,t,r,n,s,a){var i=Rt(8);return Lm(e,t,n,i),SG(r,a,i),i}function cge(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=id(e),s=ho(e);return n.val=s,n}function uge(e,t,r,n){var s=Rt(14);return Lm(e,t,n,s),Rm(r,s),s}var ZD=wme;function dge(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Im(e,a),o=[];n>e.l;)o.push(C2(e));return[a,s,i,o]}function eO(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=_me(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var fge=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function tO(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Im(e,i,r);s&32&&(u=fge[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:Nye(e,d,r,o);return{chKey:a,Name:u,itab:c,rgce:f}}function PG(e,t,r){if(r.biff<8)return hge(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(bme(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function hge(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=T2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function mge(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=Im(e,n,r),i=Im(e,s,r);return[a,i]}function gge(e,t,r){var n=AG(e);e.l++;var s=e.read_shift(1);return t-=8,[Eye(e,t,r),s,n]}function rO(e,t,r){var n=Sme(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Tye(e,t,r)]}function pge(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function xge(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=rg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function yge(e,t,r){return xge(e,t,r)}function vge(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(m3(e));return r}function wge(e){var t=Rt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)EG(e[r],t);return t}function bge(e,t,r){if(r&&r.biff<8)return Sge(e,t,r);var n=jG(e),s=Nme(e,t-22,n[1]);return{cmo:n,ft:s}}var _ge={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Sge(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((_ge[n]||vo)(e,t,r)),{cmo:[s,n,a],ft:i}}function kge(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=hme(e,6,r);var o=e.read_shift(2);e.read_shift(2),Ba(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Im(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Tge(e,t){var r=m3(e);e.l+=16;var n=xme(e,t-24);return[r,n]}function Cge(e){var t=Rt(24),r=ea(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return bi([t,yme(e[1])])}function Nge(e,t){e.read_shift(2);var r=m3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(zo,""),[r,n]}function Ege(e){var t=e[1].Tooltip,r=Rt(10+2*(t.length+1));r.write_shift(2,2048);var n=ea(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Age(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=$D[r]||r,r=e.read_shift(2),t[1]=$D[r]||r,t}function jge(e){return e||(e=Rt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Pge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(CG(e));return r}function Mge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(CG(e));return r}function Fge(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function MG(e,t,r){if(!r.cellStyles)return vo(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Dge(e,t){var r=Rt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Oge(e,t){var r={};return t<32||(e.l+=16,r.header=ho(e),r.footer=ho(e),e.l+=2),r}function Rge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function Ige(e){for(var t=Rt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Lge=id,Bge=_G,$ge=C2;function zge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function Uge(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=id(e);++e.l;var s=rg(e,t-7,r);return n.t="str",n.val=s,n}function Wge(e){var t=id(e);++e.l;var r=ho(e);return t.t="n",t.val=r,t}function Hge(e,t,r){var n=Rt(15);return j2(n,e,t),n.write_shift(8,r,"f"),n}function Gge(e){var t=id(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Vge(e,t,r){var n=Rt(9);return j2(n,e,t),n.write_shift(2,r),n}function qge(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Kge(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Yge(e,t,r){var n=e.l+t,s=id(e),a=e.read_shift(2),i=Im(e,a,r);return e.l=n,s.t="str",s.val=i,s}var Xge=[2,3,48,49,131,139,140,245],J8=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=d3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=Gf(1);switch(c.type){case"base64":d=Fl(Bl(o));break;case"binary":d=Fl(o);break;case"buffer":case"array":d=o;break}Hi(d,0);var f=d.read_shift(1),h=!!(f&136),g=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:g=!0,h=!0;break;case 49:g=!0,h=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,v=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(v=d.read_shift(2));var T=d.read_shift(2),k=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var b=[],C={},E=Math.min(d.length,f==2?521:v-10-(g?264:0)),j=x?32:11;d.l<E&&d[d.l]!=13;)switch(C={},C.name=Av.utils.decode(k,d.slice(d.l,d.l+j)).replace(/[\u0000\r\n].*$/g,""),d.l+=j,C.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(C.offset=d.read_shift(4)),C.len=d.read_shift(1),f==2&&(C.offset=d.read_shift(2)),C.dec=d.read_shift(1),C.name.length&&b.push(C),f!=2&&(d.l+=x?13:14),C.type){case"B":(!g||C.len!=8)&&c.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+C.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var P=0,A=0;for(u[0]=[],A=0;A!=b.length;++A)u[0][A]=b[A].name;for(;y-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,u[++P]=[],A=0,A=0;A!=b.length;++A){var M=d.slice(d.l,d.l+b[A].len);d.l+=b[A].len,Hi(M,0);var F=Av.utils.decode(k,M);switch(b[A].type){case"C":F.trim().length&&(u[P][A]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[P][A]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[P][A]=F;break;case"F":u[P][A]=parseFloat(F.trim());break;case"+":case"I":u[P][A]=x?M.read_shift(-4,"i")^2147483648:M.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[P][A]=!0;break;case"N":case"F":u[P][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[P][A]="##MEMO##"+(x?parseInt(F.trim(),10):M.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[P][A]=+F||0);break;case"@":u[P][A]=new Date(M.read_shift(-8,"f")-621356832e5);break;case"T":u[P][A]=new Date((M.read_shift(4)-2440588)*864e5+M.read_shift(4));break;case"Y":u[P][A]=M.read_shift(4,"i")/1e4+M.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[P][A]=-M.read_shift(-8,"f");break;case"B":if(g&&b[A].len==8){u[P][A]=M.read_shift(8,"f");break}case"G":case"P":M.l+=b[A].len;break;case"0":if(b[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[A].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=C1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,c){try{return ah(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&ru(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=dl(),f=K4(o,{header:1,raw:!0,cellDates:!0}),h=f[0],g=f.slice(1),x=o["!cols"]||[],y=0,v=0,T=0,k=1;for(y=0;y<h.length;++y){if(((x[y]||{}).DBF||{}).name){h[y]=x[y].DBF.name,++T;continue}if(h[y]!=null){if(++T,typeof h[y]=="number"&&(h[y]=h[y].toString(10)),typeof h[y]!="string")throw new Error("DBF Invalid column name "+h[y]+" |"+typeof h[y]+"|");if(h.indexOf(h[y])!==y){for(v=0;v<1024;++v)if(h.indexOf(h[y]+"_"+v)==-1){h[y]+="_"+v;break}}}}var b=Ln(o["!ref"]),C=[],E=[],j=[];for(y=0;y<=b.e.c-b.s.c;++y){var P="",A="",M=0,F=[];for(v=0;v<g.length;++v)g[v][y]!=null&&F.push(g[v][y]);if(F.length==0||h[y]==null){C[y]="?";continue}for(v=0;v<F.length;++v){switch(typeof F[v]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=F[v]instanceof Date?"D":"C";break;default:A="C"}M=Math.max(M,String(F[v]).length),P=P&&P!=A?"C":A}M>250&&(M=250),A=((x[y]||{}).DBF||{}).type,A=="C"&&x[y].DBF.len>M&&(M=x[y].DBF.len),P=="B"&&A=="N"&&(P="N",j[y]=x[y].DBF.dec,M=x[y].DBF.len),E[y]=P=="C"||A=="N"?M:a[P]||0,k+=E[y],C[y]=P}var B=d.next(32);for(B.write_shift(4,318902576),B.write_shift(4,g.length),B.write_shift(2,296+32*T),B.write_shift(2,k),y=0;y<4;++y)B.write_shift(4,0);for(B.write_shift(4,0|(+t[bH]||3)<<8),y=0,v=0;y<h.length;++y)if(h[y]!=null){var V=d.next(32),ee=(h[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);V.write_shift(1,ee,"sbcs"),V.write_shift(1,C[y]=="?"?"C":C[y],"sbcs"),V.write_shift(4,v),V.write_shift(1,E[y]||a[C[y]]||0),V.write_shift(1,j[y]||0),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(1,0),V.write_shift(4,0),V.write_shift(4,0),v+=E[y]||a[C[y]]||0}var ae=d.next(264);for(ae.write_shift(4,13),y=0;y<65;++y)ae.write_shift(4,0);for(y=0;y<g.length;++y){var Z=d.next(k);for(Z.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(C[v]){case"L":Z.write_shift(1,g[y][v]==null?63:g[y][v]?84:70);break;case"B":Z.write_shift(8,g[y][v]||0,"f");break;case"N":var te="0";for(typeof g[y][v]=="number"&&(te=g[y][v].toFixed(j[v]||0)),T=0;T<E[v]-te.length;++T)Z.write_shift(1,32);Z.write_shift(1,te,"sbcs");break;case"D":g[y][v]?(Z.write_shift(4,("0000"+g[y][v].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(g[y][v].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+g[y][v].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var L=String(g[y][v]!=null?g[y][v]:"").slice(0,E[v]);for(Z.write_shift(1,L,"sbcs"),T=0;T<E[v]-L.length;++T)Z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),FG=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ga(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,g){var x=e[g];return typeof x=="number"?hD(x):x},n=function(h,g,x){var y=g.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return y==59?h:hD(y)};e["|"]=254;function s(h,g){switch(g.type){case"base64":return a(Bl(h),g);case"binary":return a(h,g);case"buffer":return a(kn&&Buffer.isBuffer(h)?h.toString("binary"):sh(h),g);case"array":return a(Om(h),g)}throw new Error("Unrecognized type "+g.type)}function a(h,g){var x=h.split(/[\n\r]+/),y=-1,v=-1,T=0,k=0,b=[],C=[],E=null,j={},P=[],A=[],M=[],F=0,B;for(+g.codepage>=0&&ru(+g.codepage);T!==x.length;++T){F=0;var V=x[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),ee=V.replace(/;;/g,"\0").split(";").map(function(X){return X.replace(/\u0000/g,";")}),ae=ee[0],Z;if(V.length>0)switch(ae){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ee[1].charAt(0)=="P"&&C.push(V.slice(3).replace(/;;/g,";"));break;case"C":var te=!1,L=!1,K=!1,I=!1,H=-1,U=-1;for(k=1;k<ee.length;++k)switch(ee[k].charAt(0)){case"A":break;case"X":v=parseInt(ee[k].slice(1))-1,L=!0;break;case"Y":for(y=parseInt(ee[k].slice(1))-1,L||(v=0),B=b.length;B<=y;++B)b[B]=[];break;case"K":Z=ee[k].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(au(Z))?isNaN(Kp(Z).getDate())||(Z=Ms(Z)):(Z=au(Z),E!==null&&k1(E)&&(Z=h3(Z))),te=!0;break;case"E":I=!0;var R=Dp(ee[k].slice(1),{r:y,c:v});b[y][v]=[b[y][v],R];break;case"S":K=!0,b[y][v]=[b[y][v],"S5S"];break;case"G":break;case"R":H=parseInt(ee[k].slice(1))-1;break;case"C":U=parseInt(ee[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}if(te&&(b[y][v]&&b[y][v].length==2?b[y][v][0]=Z:b[y][v]=Z,E=null),K){if(I)throw new Error("SYLK shared formula cannot have own formula");var z=H>-1&&b[H][U];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");b[y][v][1]=JG(z[1],{r:y-H,c:v-U})}break;case"F":var G=0;for(k=1;k<ee.length;++k)switch(ee[k].charAt(0)){case"X":v=parseInt(ee[k].slice(1))-1,++G;break;case"Y":for(y=parseInt(ee[k].slice(1))-1,B=b.length;B<=y;++B)b[B]=[];break;case"M":F=parseInt(ee[k].slice(1))/20;break;case"F":break;case"G":break;case"P":E=C[parseInt(ee[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(M=ee[k].slice(1).split(" "),B=parseInt(M[0],10);B<=parseInt(M[1],10);++B)F=parseInt(M[2],10),A[B-1]=F===0?{hidden:!0}:{wch:F},Vf(A[B-1]);break;case"C":v=parseInt(ee[k].slice(1))-1,A[v]||(A[v]={});break;case"R":y=parseInt(ee[k].slice(1))-1,P[y]||(P[y]={}),F>0?(P[y].hpt=F,P[y].hpx=Xp(F)):F===0&&(P[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}G<1&&(E=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}}return P.length>0&&(j["!rows"]=P),A.length>0&&(j["!cols"]=A),g&&g.sheetRows&&(b=b.slice(0,g.sheetRows)),[b,j]}function i(h,g){var x=s(h,g),y=x[0],v=x[1],T=C1(y,g);return ga(v).forEach(function(k){T[k]=v[k]}),T}function o(h,g){return ah(i(h,g),g)}function c(h,g,x,y){var v="C;Y"+(x+1)+";X"+(y+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+EN(h.f,{r:x,c:y}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,g){g.forEach(function(x,y){var v="F;W"+(y+1)+" "+(y+1)+" ";x.hidden?v+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=Iv(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Lv(x.wpx)),typeof x.wch=="number"&&(v+=Math.round(x.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,g){g.forEach(function(x,y){var v="F;";x.hidden?v+="M0;":x.hpt?v+="M"+20*x.hpt+";":x.hpx&&(v+="M"+20*Bv(x.hpx)+";"),v.length>2&&h.push(v+"R"+(y+1))})}function f(h,g){var x=["ID;PWXL;N;E"],y=[],v=Ln(h["!ref"]),T,k=Array.isArray(h),b=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),h["!cols"]&&u(x,h["!cols"]),h["!rows"]&&d(x,h["!rows"]),x.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var C=v.s.r;C<=v.e.r;++C)for(var E=v.s.c;E<=v.e.c;++E){var j=en({r:C,c:E});T=k?(h[C]||[])[E]:h[j],!(!T||T.v==null&&(!T.f||T.F))&&y.push(c(T,h,C,E))}return x.join(b)+b+y.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:i,from_sheet:f}})(),DG=(function(){function e(a,i){switch(i.type){case"base64":return t(Bl(a),i);case"binary":return t(a,i);case"buffer":return t(kn&&Buffer.isBuffer(a)?a.toString("binary"):sh(a),i);case"array":return t(Om(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),g=h[0],x=h[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){f[++c]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[c][u]=!0:y==="FALSE"?f[c][u]=!1:isNaN(au(x))?isNaN(Kp(x).getDate())?f[c][u]=x:f[c][u]=Ms(x):f[c][u]=au(x),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[c][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(a,i){return C1(e(a,i),i)}function n(a,i){return ah(r(a,i),i)}var s=(function(){var a=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Ln(c["!ref"]),f,h=Array.isArray(c);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var y=en({r:g,c:x});if(f=h?(c[g]||[])[x]:c[y],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=kc(f.z||Qr[14],si(Ms(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var T=`\r
`,k=u.join(T);return k}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),OG=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var g=f.split(`
`),x=-1,y=-1,v=0,T=[];v!==g.length;++v){var k=g[v].trim().split(":");if(k[0]==="cell"){var b=ea(k[1]);if(T.length<=b.r)for(x=T.length;x<=b.r;++x)T[x]||(T[x]=[]);switch(x=b.r,y=b.c,k[2]){case"t":T[x][y]=e(k[3]);break;case"v":T[x][y]=+k[3];break;case"vtf":var C=k[k.length-1];case"vtc":switch(k[3]){case"nl":T[x][y]=!!+k[4];break;default:T[x][y]=+k[4];break}k[2]=="vtf"&&(T[x][y]=[T[x][y],C])}}}return h&&h.sheetRows&&(T=T.slice(0,h.sheetRows)),T}function n(f,h){return C1(r(f,h),h)}function s(f,h){return ah(n(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],g=[],x,y="",v=fl(f["!ref"]),T=Array.isArray(f),k=v.s.r;k<=v.e.r;++k)for(var b=v.s.c;b<=v.e.c;++b)if(y=en({r:k,c:b}),x=T?(f[k]||[])[b]:f[y],!(!x||x.v==null||x.t==="z")){switch(g=["cell",y,"t"],x.t){case"s":case"str":g.push(t(x.v));break;case"n":x.f?(g[2]="vtf",g[3]="n",g[4]=x.v,g[5]=t(x.f)):(g[2]="v",g[3]=x.v);break;case"b":g[2]="vt"+(x.f?"f":"c"),g[3]="nl",g[4]=x.v?"1":"0",g[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var C=si(Ms(x.v));g[2]="vtc",g[3]="nd",g[4]=""+C,g[5]=x.w||kc(x.z||Qr[14],C);break;case"e":continue}h.push(g.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[a,i,o,i,u(f),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),Yp=(function(){function e(d,f,h,g,x){x.raw?f[h][g]=d:d===""||(d==="TRUE"?f[h][g]=!0:d==="FALSE"?f[h][g]=!1:isNaN(au(d))?isNaN(Kp(d).getDate())?f[h][g]=d:f[h][g]=Ms(d):f[h][g]=au(d))}function t(d,f){var h=f||{},g=[];if(!d||d.length===0)return g;for(var x=d.split(/[\r\n]/),y=x.length-1;y>=0&&x[y].length===0;)--y;for(var v=10,T=0,k=0;k<=y;++k)T=x[k].indexOf(" "),T==-1?T=x[k].length:T++,v=Math.max(v,T);for(k=0;k<=y;++k){g[k]=[];var b=0;for(e(x[k].slice(0,v).trim(),g,k,b,h),b=1;b<=(x[k].length-v)/10+1;++b)e(x[k].slice(v+(b-1)*10,v+b*10).trim(),g,k,b,h)}return h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},h=!1,g=0,x=0;g<d.length;++g)(x=d.charCodeAt(g))==34?h=!h:!h&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g]);if(!x.length){f=n;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g])}return x.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[x.pop()[1]]||44}function a(d,f){var h=f||{},g="",x=h.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):h&&h.FS?g=h.FS:g=s(d.slice(0,1024));var v=0,T=0,k=0,b=0,C=0,E=g.charCodeAt(0),j=!1,P=0,A=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var M=h.dateNF!=null?Rfe(h.dateNF):null;function F(){var B=d.slice(b,C),V={};if(B.charAt(0)=='"'&&B.charAt(B.length-1)=='"'&&(B=B.slice(1,-1).replace(/""/g,'"')),B.length===0)V.t="z";else if(h.raw)V.t="s",V.v=B;else if(B.trim().length===0)V.t="s",V.v=B;else if(B.charCodeAt(0)==61)B.charCodeAt(1)==34&&B.charCodeAt(B.length-1)==34?(V.t="s",V.v=B.slice(2,-1).replace(/""/g,'"')):dxe(B)?(V.t="n",V.f=B.slice(1)):(V.t="s",V.v=B);else if(B=="TRUE")V.t="b",V.v=!0;else if(B=="FALSE")V.t="b",V.v=!1;else if(!isNaN(k=au(B)))V.t="n",h.cellText!==!1&&(V.w=B),V.v=k;else if(!isNaN(Kp(B).getDate())||M&&B.match(M)){V.z=h.dateNF||Qr[14];var ee=0;M&&B.match(M)&&(B=Ife(B,h.dateNF,B.match(M)||[]),ee=1),h.cellDates?(V.t="d",V.v=Ms(B,ee)):(V.t="n",V.v=si(Ms(B,ee))),h.cellText!==!1&&(V.w=kc(V.z,V.v instanceof Date?si(V.v):V.v)),h.cellNF||delete V.z}else V.t="s",V.v=B;if(V.t=="z"||(h.dense?(x[v]||(x[v]=[]),x[v][T]=V):x[en({c:T,r:v})]=V),b=C+1,A=d.charCodeAt(b),y.e.c<T&&(y.e.c=T),y.e.r<v&&(y.e.r=v),P==E)++T;else if(T=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;C<d.length;++C)switch(P=d.charCodeAt(C)){case 34:A===34&&(j=!j);break;case E:case 10:case 13:if(!j&&F())break e;break}return C-b>0&&F(),x["!ref"]=vn(y),x}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):C1(t(d,f),f)}function o(d,f){var h="",g=f.type=="string"?[0,0,0,0]:RN(d,f);switch(f.type){case"base64":h=Bl(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Av<"u"||(h=kn&&Buffer.isBuffer(d)?d.toString("binary"):sh(d));break;case"array":h=Om(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return g[0]==239&&g[1]==187&&g[2]==191?h=ms(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=ms(h):f.type=="binary"&&typeof Av<"u",h.slice(0,19)=="socialcalc:version:"?OG.to_sheet(f.type=="string"?h:ms(h),f):i(h,f)}function c(d,f){return ah(o(d,f),f)}function u(d){for(var f=[],h=Ln(d["!ref"]),g,x=Array.isArray(d),y=h.s.r;y<=h.e.r;++y){for(var v=[],T=h.s.c;T<=h.e.c;++T){var k=en({r:y,c:T});if(g=x?(d[y]||[])[T]:d[k],!g||g.v==null){v.push("          ");continue}for(var b=(g.w||(f0(g),g.w)||"").slice(0,10);b.length<10;)b+=" ";v.push(b+(T===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}})();function Jge(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=FG.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Yp.to_workbook(e,t)}}var mm=(function(){function e(R,z,G){if(R){Hi(R,R.l||0);for(var X=G.Enum||H;R.l<R.length;){var ne=R.read_shift(2),q=X[ne]||X[65535],se=R.read_shift(2),ue=R.l+se,me=q.f&&q.f(R,se,G);if(R.l=ue,z(me,q,ne))return}}}function t(R,z){switch(z.type){case"base64":return r(Fl(Bl(R)),z);case"binary":return r(Fl(R),z);case"buffer":case"array":return r(R,z)}throw"Unsupported type "+z.type}function r(R,z){if(!R)return R;var G=z||{},X=G.dense?[]:{},ne="Sheet1",q="",se=0,ue={},me=[],Ne=[],ce={s:{r:0,c:0},e:{r:0,c:0}},Ue=G.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)G.Enum=H,e(R,function(Me,Nt,$e){switch($e){case 0:G.vers=Me,Me>=4096&&(G.qpro=!0);break;case 6:ce=Me;break;case 204:Me&&(q=Me);break;case 222:q=Me;break;case 15:case 51:G.qpro||(Me[1].v=Me[1].v.slice(1));case 13:case 14:case 16:$e==14&&(Me[2]&112)==112&&(Me[2]&15)>1&&(Me[2]&15)<15&&(Me[1].z=G.dateNF||Qr[14],G.cellDates&&(Me[1].t="d",Me[1].v=h3(Me[1].v))),G.qpro&&Me[3]>se&&(X["!ref"]=vn(ce),ue[ne]=X,me.push(ne),X=G.dense?[]:{},ce={s:{r:0,c:0},e:{r:0,c:0}},se=Me[3],ne=q||"Sheet"+(se+1),q="");var St=G.dense?(X[Me[0].r]||[])[Me[0].c]:X[en(Me[0])];if(St){St.t=Me[1].t,St.v=Me[1].v,Me[1].z!=null&&(St.z=Me[1].z),Me[1].f!=null&&(St.f=Me[1].f);break}G.dense?(X[Me[0].r]||(X[Me[0].r]=[]),X[Me[0].r][Me[0].c]=Me[1]):X[en(Me[0])]=Me[1];break}},G);else if(R[2]==26||R[2]==14)G.Enum=U,R[2]==14&&(G.qpro=!0,R.l=0),e(R,function(Me,Nt,$e){switch($e){case 204:ne=Me;break;case 22:Me[1].v=Me[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Me[3]>se&&(X["!ref"]=vn(ce),ue[ne]=X,me.push(ne),X=G.dense?[]:{},ce={s:{r:0,c:0},e:{r:0,c:0}},se=Me[3],ne="Sheet"+(se+1)),Ue>0&&Me[0].r>=Ue)break;G.dense?(X[Me[0].r]||(X[Me[0].r]=[]),X[Me[0].r][Me[0].c]=Me[1]):X[en(Me[0])]=Me[1],ce.e.c<Me[0].c&&(ce.e.c=Me[0].c),ce.e.r<Me[0].r&&(ce.e.r=Me[0].r);break;case 27:Me[14e3]&&(Ne[Me[14e3][0]]=Me[14e3][1]);break;case 1537:Ne[Me[0]]=Me[1],Me[0]==se&&(ne=Me[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(X["!ref"]=vn(ce),ue[q||ne]=X,me.push(q||ne),!Ne.length)return{SheetNames:me,Sheets:ue};for(var pe={},je=[],We=0;We<Ne.length;++We)ue[me[We]]?(je.push(Ne[We]||me[We]),pe[Ne[We]]=ue[Ne[We]]||ue[me[We]]):(je.push(Ne[We]),pe[Ne[We]]={"!ref":"A1"});return{SheetNames:je,Sheets:pe}}function n(R,z){var G=z||{};if(+G.codepage>=0&&ru(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var X=dl(),ne=Ln(R["!ref"]),q=Array.isArray(R),se=[];fr(X,0,a(1030)),fr(X,6,c(ne));for(var ue=Math.min(ne.e.r,8191),me=ne.s.r;me<=ue;++me)for(var Ne=ja(me),ce=ne.s.c;ce<=ne.e.c;++ce){me===ne.s.r&&(se[ce]=Zs(ce));var Ue=se[ce]+Ne,pe=q?(R[me]||[])[ce]:R[Ue];if(!(!pe||pe.t=="z"))if(pe.t=="n")(pe.v|0)==pe.v&&pe.v>=-32768&&pe.v<=32767?fr(X,13,g(me,ce,pe.v)):fr(X,14,y(me,ce,pe.v));else{var je=f0(pe);fr(X,15,f(me,ce,je.slice(0,239)))}}return fr(X,1),X.end()}function s(R,z){var G=z||{};if(+G.codepage>=0&&ru(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var X=dl();fr(X,0,i(R));for(var ne=0,q=0;ne<R.SheetNames.length;++ne)(R.Sheets[R.SheetNames[ne]]||{})["!ref"]&&fr(X,27,I(R.SheetNames[ne],q++));var se=0;for(ne=0;ne<R.SheetNames.length;++ne){var ue=R.Sheets[R.SheetNames[ne]];if(!(!ue||!ue["!ref"])){for(var me=Ln(ue["!ref"]),Ne=Array.isArray(ue),ce=[],Ue=Math.min(me.e.r,8191),pe=me.s.r;pe<=Ue;++pe)for(var je=ja(pe),We=me.s.c;We<=me.e.c;++We){pe===me.s.r&&(ce[We]=Zs(We));var Me=ce[We]+je,Nt=Ne?(ue[pe]||[])[We]:ue[Me];if(!(!Nt||Nt.t=="z"))if(Nt.t=="n")fr(X,23,F(pe,We,se,Nt.v));else{var $e=f0(Nt);fr(X,22,P(pe,We,se,$e.slice(0,239)))}}++se}}return fr(X,1),X.end()}function a(R){var z=Rt(2);return z.write_shift(2,R),z}function i(R){var z=Rt(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var G=0,X=0,ne=0,q=0;q<R.SheetNames.length;++q){var se=R.SheetNames[q],ue=R.Sheets[se];if(!(!ue||!ue["!ref"])){++ne;var me=fl(ue["!ref"]);G<me.e.r&&(G=me.e.r),X<me.e.c&&(X=me.e.c)}}return G>8191&&(G=8191),z.write_shift(2,G),z.write_shift(1,ne),z.write_shift(1,X),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function o(R,z,G){var X={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&G.qpro?(X.s.c=R.read_shift(1),R.l++,X.s.r=R.read_shift(2),X.e.c=R.read_shift(1),R.l++,X.e.r=R.read_shift(2),X):(X.s.c=R.read_shift(2),X.s.r=R.read_shift(2),z==12&&G.qpro&&(R.l+=2),X.e.c=R.read_shift(2),X.e.r=R.read_shift(2),z==12&&G.qpro&&(R.l+=2),X.s.c==65535&&(X.s.c=X.e.c=X.s.r=X.e.r=0),X)}function c(R){var z=Rt(8);return z.write_shift(2,R.s.c),z.write_shift(2,R.s.r),z.write_shift(2,R.e.c),z.write_shift(2,R.e.r),z}function u(R,z,G){var X=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(X[0].c=R.read_shift(1),X[3]=R.read_shift(1),X[0].r=R.read_shift(2),R.l+=2):(X[2]=R.read_shift(1),X[0].c=R.read_shift(2),X[0].r=R.read_shift(2)),X}function d(R,z,G){var X=R.l+z,ne=u(R,z,G);if(ne[1].t="s",G.vers==20768){R.l++;var q=R.read_shift(1);return ne[1].v=R.read_shift(q,"utf8"),ne}return G.qpro&&R.l++,ne[1].v=R.read_shift(X-R.l,"cstr"),ne}function f(R,z,G){var X=Rt(7+G.length);X.write_shift(1,255),X.write_shift(2,z),X.write_shift(2,R),X.write_shift(1,39);for(var ne=0;ne<X.length;++ne){var q=G.charCodeAt(ne);X.write_shift(1,q>=128?95:q)}return X.write_shift(1,0),X}function h(R,z,G){var X=u(R,z,G);return X[1].v=R.read_shift(2,"i"),X}function g(R,z,G){var X=Rt(7);return X.write_shift(1,255),X.write_shift(2,z),X.write_shift(2,R),X.write_shift(2,G,"i"),X}function x(R,z,G){var X=u(R,z,G);return X[1].v=R.read_shift(8,"f"),X}function y(R,z,G){var X=Rt(13);return X.write_shift(1,255),X.write_shift(2,z),X.write_shift(2,R),X.write_shift(8,G,"f"),X}function v(R,z,G){var X=R.l+z,ne=u(R,z,G);if(ne[1].v=R.read_shift(8,"f"),G.qpro)R.l=X;else{var q=R.read_shift(2);C(R.slice(R.l,R.l+q),ne),R.l+=q}return ne}function T(R,z,G){var X=z&32768;return z&=-32769,z=(X?R:0)+(z>=8192?z-16384:z),(X?"":"$")+(G?Zs(z):ja(z))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function C(R,z){Hi(R,0);for(var G=[],X=0,ne="",q="",se="",ue="";R.l<R.length;){var me=R[R.l++];switch(me){case 0:G.push(R.read_shift(8,"f"));break;case 1:q=T(z[0].c,R.read_shift(2),!0),ne=T(z[0].r,R.read_shift(2),!1),G.push(q+ne);break;case 2:{var Ne=T(z[0].c,R.read_shift(2),!0),ce=T(z[0].r,R.read_shift(2),!1);q=T(z[0].c,R.read_shift(2),!0),ne=T(z[0].r,R.read_shift(2),!1),G.push(Ne+ce+":"+q+ne)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(R.read_shift(2));break;case 6:{for(var Ue="";me=R[R.l++];)Ue+=String.fromCharCode(me);G.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:ue=G.pop(),se=G.pop(),G.push(["AND","OR"][me-20]+"("+se+","+ue+")");break;default:if(me<32&&b[me])ue=G.pop(),se=G.pop(),G.push(se+b[me]+ue);else if(k[me]){if(X=k[me][1],X==69&&(X=R[R.l++]),X>G.length){console.error("WK1 bad formula parse 0x"+me.toString(16)+":|"+G.join("|")+"|");return}var pe=G.slice(-X);G.length-=X,G.push(k[me][0]+"("+pe.join(",")+")")}else return me<=7?console.error("WK1 invalid opcode "+me.toString(16)):me<=24?console.error("WK1 unsupported op "+me.toString(16)):me<=30?console.error("WK1 invalid opcode "+me.toString(16)):me<=115?console.error("WK1 unsupported function opcode "+me.toString(16)):console.error("WK1 unrecognized opcode "+me.toString(16))}}G.length==1?z[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function E(R){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=R.read_shift(2),z[3]=R[R.l++],z[0].c=R[R.l++],z}function j(R,z){var G=E(R);return G[1].t="s",G[1].v=R.read_shift(z-4,"cstr"),G}function P(R,z,G,X){var ne=Rt(6+X.length);ne.write_shift(2,R),ne.write_shift(1,G),ne.write_shift(1,z),ne.write_shift(1,39);for(var q=0;q<X.length;++q){var se=X.charCodeAt(q);ne.write_shift(1,se>=128?95:se)}return ne.write_shift(1,0),ne}function A(R,z){var G=E(R);G[1].v=R.read_shift(2);var X=G[1].v>>1;if(G[1].v&1)switch(X&7){case 0:X=(X>>3)*5e3;break;case 1:X=(X>>3)*500;break;case 2:X=(X>>3)/20;break;case 3:X=(X>>3)/200;break;case 4:X=(X>>3)/2e3;break;case 5:X=(X>>3)/2e4;break;case 6:X=(X>>3)/16;break;case 7:X=(X>>3)/64;break}return G[1].v=X,G}function M(R,z){var G=E(R),X=R.read_shift(4),ne=R.read_shift(4),q=R.read_shift(2);if(q==65535)return X===0&&ne===3221225472?(G[1].t="e",G[1].v=15):X===0&&ne===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var se=q&32768;return q=(q&32767)-16446,G[1].v=(1-se*2)*(ne*Math.pow(2,q+32)+X*Math.pow(2,q)),G}function F(R,z,G,X){var ne=Rt(14);if(ne.write_shift(2,R),ne.write_shift(1,G),ne.write_shift(1,z),X==0)return ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(2,65535),ne;var q=0,se=0,ue=0,me=0;return X<0&&(q=1,X=-X),se=Math.log2(X)|0,X/=Math.pow(2,se-31),me=X>>>0,(me&2147483648)==0&&(X/=2,++se,me=X>>>0),X-=me,me|=2147483648,me>>>=0,X*=Math.pow(2,32),ue=X>>>0,ne.write_shift(4,ue),ne.write_shift(4,me),se+=16383+(q?32768:0),ne.write_shift(2,se),ne}function B(R,z){var G=M(R);return R.l+=z-14,G}function V(R,z){var G=E(R),X=R.read_shift(4);return G[1].v=X>>6,G}function ee(R,z){var G=E(R),X=R.read_shift(8,"f");return G[1].v=X,G}function ae(R,z){var G=ee(R);return R.l+=z-10,G}function Z(R,z){return R[R.l+z-1]==0?R.read_shift(z,"cstr"):""}function te(R,z){var G=R[R.l++];G>z-1&&(G=z-1);for(var X="";X.length<G;)X+=String.fromCharCode(R[R.l++]);return X}function L(R,z,G){if(!(!G.qpro||z<21)){var X=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var ne=R.read_shift(z-21,"cstr");return[X,ne]}}function K(R,z){for(var G={},X=R.l+z;R.l<X;){var ne=R.read_shift(2);if(ne==14e3){for(G[ne]=[0,""],G[ne][0]=R.read_shift(2);R[R.l];)G[ne][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return G}function I(R,z){var G=Rt(5+R.length);G.write_shift(2,14e3),G.write_shift(2,z);for(var X=0;X<R.length;++X){var ne=R.charCodeAt(X);G[G.l++]=ne>127?95:ne}return G[G.l++]=0,G}var H={0:{n:"BOF",f:Ba},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:te},65535:{n:""}},U={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:j},23:{n:"NUMBER17",f:M},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:B},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:V},38:{n:"??"},39:{n:"NUMBER27",f:ee},40:{n:"FORMULA28",f:ae},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:L},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function Qge(e){var t={},r=e.match(wo),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=nn(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=Z7[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var Zge=(function(){var e=Mv("t"),t=Mv("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Rn(i[1])},c=a.match(t);return c&&(o.s=Qge(c[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),epe=(function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(a.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),tpe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,rpe=/<(?:\w+:)?r>/,npe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function SN(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Rn(ms(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ms(e),r&&(n.h=cN(n.t))):e.match(rpe)&&(n.r=ms(e),n.t=Rn(ms((e.replace(npe,"").match(tpe)||[]).join("").replace(wo,""))),r&&(n.h=epe(Zge(n.r)))),n):{t:""}}var spe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,ape=/<(?:\w+:)?(?:si|sstItem)>/g,ipe=/<\/(?:\w+:)?(?:si|sstItem)>/;function ope(e,t){var r=[],n="";if(!e)return r;var s=e.match(spe);if(s){n=s[2].replace(ape,"").split(ipe);for(var a=0;a!=n.length;++a){var i=SN(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=nn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var lpe=/^\s|\s$|[\t\n\r]/;function RG(e,t){if(!t.bookSST)return"";var r=[Ma];r[r.length]=dr("sst",null,{xmlns:Jm[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(lpe)&&(a+=' xml:space="preserve"'),a+=">"+is(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function cpe(e){return[e.read_shift(4),e.read_shift(4)]}function upe(e,t){var r=[],n=!1;return S0(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function dpe(e,t){return t||(t=Rt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var fpe=_he;function hpe(e){var t=dl();Ut(t,159,dpe(e));for(var r=0;r<e.length;++r)Ut(t,19,fpe(e[r]));return Ut(t,160),t.end()}function IG(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function r0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function mpe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=r0(e,4),t.U=r0(e,4),t.W=r0(e,4),t}function gpe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function ppe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(gpe(e));return t}function xpe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function ype(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=r0(e,4),t.U=r0(e,4),t.W=r0(e,4),t}function vpe(e){var t=ype(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function LG(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function BG(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function wpe(e){var t=r0(e);switch(t.Minor){case 2:return[t.Minor,bpe(e)];case 3:return[t.Minor,_pe()];case 4:return[t.Minor,Spe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function bpe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=LG(e,r),s=BG(e,e.length-e.l);return{t:"Std",h:n,v:s}}function _pe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Spe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(wo,function(a){var i=nn(a);switch(ad(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function kpe(e,t){var r={},n=r.EncryptionVersionInfo=r0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=LG(e,s),t-=s,r.EncryptionVerifier=BG(e,t),r}function Tpe(e){var t={},r=t.EncryptionVersionInfo=r0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function kN(e){var t=0,r,n=IG(e),s=n.length+1,a,i,o,c,u;for(r=Gf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var $G=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=IG(i),c=a(o),u=o.length,d=Gf(16),f=0;f!=16;++f)d[f]=0;var h,g,x;for((u&1)===1&&(h=c>>8,d[u]=s(e[0],h),--u,h=c&255,g=o[o.length-1],d[u]=s(g,h));u>0;)--u,h=c>>8,d[u]=s(o[u],h),--u,h=c&255,d[u]=s(o[u],h);for(u=15,x=15-o.length;x>0;)h=c>>8,d[u]=s(e[x],h),--u,--x,h=c&255,d[u]=s(o[u],h),--u,--x;return d}})(),Cpe=function(e,t,r,n,s){s||(s=t),n||(n=$G(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},Npe=function(e){var t=0,r=$G(e);return function(n){var s=Cpe("",n,t,r);return t=s[1],s[0]}};function Epe(e,t,r,n){var s={key:Ba(e),verificationBytes:Ba(e)};return r.password&&(s.verifier=kN(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=Npe(r.password)),s}function Ape(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Tpe(e):n.Data=kpe(e,t),n}function jpe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Ape(e,t-2,n):Epe(e,r.biff>=8?t:t-2,r,n),n}var zG=(function(){function e(s,a){switch(a.type){case"base64":return t(Bl(s),a);case"binary":return t(s,a);case"buffer":return t(kn&&Buffer.isBuffer(s)?s.toString("binary"):sh(s),a);case"array":return t(Om(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,g=0,x,y=-1;x=h.exec(d);){switch(x[0]){case"\\cell":var v=d.slice(g,h.lastIndex-x[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var T={v,t:"s"};Array.isArray(o)?o[f][y]=T:o[en({r:f,c:y})]=T}break}g=h.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=vn(u),o}function r(s,a){return ah(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Ln(s["!ref"]),o,c=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=en({r:u,c:d});o=c?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(f0(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Ppe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Rv(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Mpe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,c=0,u=s+a;switch(c=i/(u>1?2-u:u),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function Fpe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=s*o,i[0]+=s,i[1]+=c;break;case 1:c=s*(2-o),i[0]+=c,i[1]+=s;break;case 2:c=s*(o-2),i[1]+=s,i[2]+=c;break;case 3:c=s*(4-o),i[1]+=c,i[2]+=s;break;case 4:c=s*(o-4),i[2]+=s,i[0]+=c;break;case 5:c=s*(6-o),i[2]+=c,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function V4(e,t){if(t===0)return e;var r=Mpe(Ppe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Rv(Fpe(r))}var UG=6,Dpe=15,Ope=1,uo=UG;function Iv(e){return Math.floor((e+Math.round(128/uo)/256)*uo)}function Lv(e){return Math.floor((e-5)/uo*100+.5)/100}function q4(e){return Math.round((e*uo+5)/uo*256)/256}function W5(e){return q4(Lv(Iv(e)))}function TN(e){var t=Math.abs(e-W5(e)),r=uo;if(t>.005)for(uo=Ope;uo<Dpe;++uo)Math.abs(e-W5(e))<=t&&(t=Math.abs(e-W5(e)),r=uo);uo=r}function Vf(e){e.width?(e.wpx=Iv(e.width),e.wch=Lv(e.wpx),e.MDW=uo):e.wpx?(e.wch=Lv(e.wpx),e.width=q4(e.wch),e.MDW=uo):typeof e.wch=="number"&&(e.width=q4(e.wch),e.wpx=Iv(e.width),e.MDW=uo),e.customWidth&&delete e.customWidth}var Rpe=96,WG=Rpe;function Bv(e){return e*96/WG}function Xp(e){return e*WG/96}var Ipe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Lpe(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=nn(i);switch(ad(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=As(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=As(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Bpe(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=nn(i);switch(ad(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function $pe(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=nn(i);switch(ad(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=ms(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?As(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?As(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?As(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?As(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?As(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?As(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?As(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=Z7[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=As(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var c=fm[s.color.index];s.color.index==81&&(c=fm[1]),c||(c=fm[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=V4(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function zpe(e,t,r){t.NumberFmt=[];for(var n=ga(Qr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Qr[n[s]];var a=e[0].match(wo);if(a)for(s=0;s<a.length;++s){var i=nn(a[s]);switch(ad(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Rn(ms(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}t0(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Upe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=dr("numFmt",null,{numFmtId:n,formatCode:is(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=dr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var wb=["numFmtId","fillId","fontId","borderId","xfId"],bb=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Wpe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(wo)||[]).forEach(function(a){var i=nn(a),o=0;switch(ad(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<wb.length;++o)n[wb[o]]&&(n[wb[o]]=parseInt(n[wb[o]],10));for(o=0;o<bb.length;++o)n[bb[o]]&&(n[bb[o]]=As(n[bb[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=As(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Hpe(e){var t=[];return t[t.length]=dr("cellXfs",null),e.forEach(function(r){t[t.length]=dr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=dr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Gpe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&zpe(f,d,u),(f=o.match(s))&&$pe(f,d,c,u),(f=o.match(n))&&Bpe(f,d,c,u),(f=o.match(a))&&Lpe(f,d,c,u),(f=o.match(r))&&Wpe(f,d,u),d}})();function HG(e,t){var r=[Ma,dr("styleSheet",null,{xmlns:Jm[0],"xmlns:vt":ti.vt})],n;return e.SSF&&(n=Upe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Hpe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Vpe(e,t){var r=e.read_shift(2),n=xo(e);return[r,n]}function qpe(e,t,r){r||(r=Rt(6+4*t.length)),r.write_shift(2,e),Si(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Kpe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=Ahe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Ehe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=xo(e),n}function Ype(e,t){t||(t=Rt(153)),t.write_shift(2,e.sz*20),jhe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),W4(e.color,t);var n=0;return n=2,t.write_shift(1,n),Si(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Xpe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],H5,Jpe=vo;function nO(e,t){t||(t=Rt(84)),H5||(H5=d3(Xpe));var r=H5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(W4({auto:1},t),W4({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Qpe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function GG(e,t,r){r||(r=Rt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Sy(e,t){return t||(t=Rt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Zpe=vo;function e1e(e,t){return t||(t=Rt(51)),t.write_shift(1,0),Sy(null,t),Sy(null,t),Sy(null,t),Sy(null,t),Sy(null,t),t.length>t.l?t.slice(0,t.l):t}function t1e(e,t){return t||(t=Rt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),U4(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function r1e(e,t,r){var n=Rt(2052);return n.write_shift(4,e),U4(t,n),U4(r,n),n.length>n.l?n.slice(0,n.l):n}function n1e(e,t,r){var n={};n.NumberFmt=[];for(var s in Qr)n.NumberFmt[s]=Qr[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return S0(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],t0(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=V4(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function s1e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Ut(e,615,iu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Ut(e,44,qpe(s,t[s]))}),Ut(e,616))}}function a1e(e){var t=1;Ut(e,611,iu(t)),Ut(e,43,Ype({sz:12,color:{theme:1},name:"Calibri",family:2})),Ut(e,612)}function i1e(e){var t=2;Ut(e,603,iu(t)),Ut(e,45,nO({patternType:"none"})),Ut(e,45,nO({patternType:"gray125"})),Ut(e,604)}function o1e(e){var t=1;Ut(e,613,iu(t)),Ut(e,46,e1e()),Ut(e,614)}function l1e(e){var t=1;Ut(e,626,iu(t)),Ut(e,47,GG({numFmtId:0},65535)),Ut(e,627)}function c1e(e,t){Ut(e,617,iu(t.length)),t.forEach(function(r){Ut(e,47,GG(r,0))}),Ut(e,618)}function u1e(e){var t=1;Ut(e,619,iu(t)),Ut(e,48,t1e({xfId:0,name:"Normal"})),Ut(e,620)}function d1e(e){var t=0;Ut(e,505,iu(t)),Ut(e,506)}function f1e(e){var t=0;Ut(e,508,r1e(t,"TableStyleMedium9","PivotStyleMedium4")),Ut(e,509)}function h1e(e,t){var r=dl();return Ut(r,278),s1e(r,e.SSF),a1e(r),i1e(r),o1e(r),l1e(r),c1e(r,t.cellXfs),u1e(r),d1e(r),f1e(r),Ut(r,279),r.end()}var m1e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function g1e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(wo)||[]).forEach(function(s){var a=nn(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[m1e.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function p1e(){}function x1e(){}var y1e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,v1e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,w1e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function b1e(e,t,r){t.themeElements={};var n;[["clrScheme",y1e,g1e],["fontScheme",v1e,p1e],["fmtScheme",w1e,x1e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var _1e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function VG(e,t){(!e||e.length===0)&&(e=CN());var r,n={};if(!(r=e.match(_1e)))throw new Error("themeElements not found in theme");return b1e(r[0],n,t),n.raw=e,n}function CN(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ma];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function S1e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=LH(a,{type:"array"})}catch{return}var o=Dl(i,"theme/theme/theme1.xml",!0);if(o)return VG(o,r)}}function k1e(e){return e.read_shift(4)}function T1e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=C1e(e,4);break;case 2:t.xclrValue=TG(e);break;case 3:t.xclrValue=k1e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function C1e(e,t){return vo(e,t)}function N1e(e,t){return vo(e,t)}function E1e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=T1e(e);break;case 6:n[1]=N1e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function A1e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push(E1e(e,r-e.l));return{ixfe:n,ext:a}}function j1e(e,t){t.forEach(function(r){r[0]})}function P1e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:xo(e)}}function M1e(e){var t=Rt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Si(e.name,t),t.slice(0,t.l)}function F1e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function D1e(e){var t=Rt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function O1e(e,t){var r=Rt(8+2*t.length);return r.write_shift(4,e),Si(t,r),r.slice(0,r.l)}function R1e(e){return e.l+=4,e.read_shift(4)!=0}function I1e(e,t){var r=Rt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function L1e(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return S0(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function B1e(){var e=dl();return Ut(e,332),Ut(e,334,iu(1)),Ut(e,335,M1e({name:"XLDAPR",version:12e4,flags:3496657072})),Ut(e,336),Ut(e,339,O1e(1,"XLDAPR")),Ut(e,52),Ut(e,35,iu(514)),Ut(e,4096,iu(0)),Ut(e,4097,dc(1)),Ut(e,36),Ut(e,53),Ut(e,340),Ut(e,337,I1e(1)),Ut(e,51,D1e([[1,0]])),Ut(e,338),Ut(e,333),e.end()}function $1e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(wo,function(o){var c=nn(o);switch(ad(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):a==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function qG(){var e=[Ma];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function z1e(e){var t=[];if(!e)return t;var r=1;return(e.match(wo)||[]).forEach(function(n){var s=nn(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function U1e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=en(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function W1e(e,t,r){var n=[];return S0(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function H1e(e,t,r,n){if(!e)return e;var s=n||{},a=!1;S0(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!c.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function G1e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var _p=1024;function KG(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[dr("xml",null,{"xmlns:v":Al.v,"xmlns:o":Al.o,"xmlns:x":Al.x,"xmlns:mv":Al.mv}).replace(/\/>/,">"),dr("o:shapelayout",dr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),dr("v:shapetype",[dr("v:stroke",null,{joinstyle:"miter"}),dr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];_p<e*1e3;)_p+=1e3;return t.forEach(function(a){var i=ea(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?dr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=dr("v:fill",c,o),d={on:"t",obscured:"t"};++_p,s=s.concat(["<v:shape"+Fv({id:"_x0000_s"+_p,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,dr("v:shadow",null,d),dr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",qi("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),qi("x:AutoFill","False"),qi("x:Row",String(i.r)),qi("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function sO(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=ea(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var c=Ln(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=vn(c);u!==e["!ref"]&&(e["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function V1e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=nn(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ea(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&SN(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function YG(e){var t=[Ma,dr("comments",null,{xmlns:Jm[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=is(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(is(c.a))),a.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(qi("t",is(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;t.push(qi("t",is(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function q1e(e,t){var r=[],n=!1,s={},a=0;return e.replace(wo,function(o,c){var u=nn(o);switch(ad(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=c+o.length;break;case"</text>":s.t=e.slice(a,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function K1e(e,t,r){var n=[Ma,dr("ThreadedComments",null,{xmlns:ti.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=c.id:c.parentId=a,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(dr("threadedComment",qi("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Y1e(e,t){var r=[],n=!1;return e.replace(wo,function(a){var i=nn(a);switch(ad(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function X1e(e){var t=[Ma,dr("personList",null,{xmlns:ti.TCMNT,"xmlns:x":Jm[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(dr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function J1e(e){var t={};t.iauthor=e.read_shift(4);var r=tg(e);return t.rfx=r.s,t.ref=en(r.s),e.l+=16,t}function Q1e(e,t){return t==null&&(t=Rt(36)),t.write_shift(4,e[1].iauthor),N1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Z1e=xo;function exe(e){return Si(e.slice(0,54))}function txe(e,t){var r=[],n=[],s={},a=!1;return S0(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function rxe(e){var t=dl(),r=[];return Ut(t,628),Ut(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Ut(t,632,exe(s.a)))})}),Ut(t,631),Ut(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:ea(n[0]),e:ea(n[0])};Ut(t,635,Q1e([a,s])),s.t&&s.t.length>0&&Ut(t,637,khe(s)),Ut(t,636),delete s.iauthor})}),Ut(t,634),Ut(t,629),t.end()}var nxe="application/vnd.ms-office.vbaProject";function sxe(e){var t=Wr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Wr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Wr.write(t)}function axe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Wr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var XG=["xlsb","xlsm","xlam","biff8","xla"];function ixe(){return{"!type":"dialog"}}function oxe(){return{"!type":"dialog"}}function lxe(){return{"!type":"macro"}}function cxe(){return{"!type":"macro"}}var Dp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,c=!1;a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,s+(o?"":"$")+Zs(d)+(c?"":"$")+ja(u)}return function(s,a){return t=a,s.replace(e,r)}})(),NN=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,EN=(function(){return function(t,r){return t.replace(NN,function(n,s,a,i,o,c){var u=mN(i)-(a?0:r.c),d=hN(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+h})}})();function JG(e,t){return e.replace(NN,function(r,n,s,a,i,o){return n+(s=="$"?s+a:Zs(mN(a)+t.c))+(i=="$"?i+o:ja(hN(o)+t.r))})}function uxe(e,t,r){var n=fl(t),s=n.s,a=ea(r),i={r:a.r-s.r,c:a.c-s.c};return JG(e,i)}function dxe(e){return e.length!=1}function aO(e){return e.replace(/_xlfn\./g,"")}function Ia(e){e.l+=1}function qf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function QG(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return ZG(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=qf(e),o=qf(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function ZG(e){var t=qf(e),r=qf(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function fxe(e,t,r){if(r.biff<8)return ZG(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=qf(e),i=qf(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function eV(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return hxe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=qf(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function hxe(e){var t=qf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function mxe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function gxe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return pxe(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function pxe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function xxe(e,t,r){var n=(e[e.l++]&96)>>5,s=QG(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function yxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=QG(e,a,r);return[n,s,i]}function vxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function wxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function bxe(e,t,r){var n=(e[e.l++]&96)>>5,s=fxe(e,t-1,r);return[n,s]}function _xe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function iO(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Sxe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function kxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Txe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Cxe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Nxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function tV(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Exe(e){return e.read_shift(2),tV(e)}function Axe(e){return e.read_shift(2),tV(e)}function jxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=eV(e,0,r);return[n,s]}function Pxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=gxe(e,0,r);return[n,s]}function Mxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=eV(e,0,r);return[n,s,a]}function Fxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Rye[s],sV[s],n]}function Dxe(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:Oxe(e);return[s,(a[0]===0?sV:Oye)[a[1]]]}function Oxe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Rxe(e,t,r){e.l+=r&&r.biff==2?3:4}function Ixe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Lxe(e){return e.l++,k0[e.read_shift(1)]}function Bxe(e){return e.l++,e.read_shift(2)}function $xe(e){return e.l++,e.read_shift(1)!==0}function zxe(e){return e.l++,ho(e)}function Uxe(e,t,r){return e.l++,T2(e,t-1,r)}function Wxe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ka(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=k0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ho(e);break;case 2:r[1]=rg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Hxe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?tg:m3)(e));return s}function Gxe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Wxe(e,r.biff);return i}function Vxe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function qxe(e,t,r){if(r.biff==5)return Kxe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function Kxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Yxe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Xxe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Jxe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Qxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var Zxe=vo,eye=vo,tye=vo;function N2(e,t,r){return e.l+=2,[mxe(e)]}function AN(e){return e.l+=6,[]}var rye=N2,nye=AN,sye=AN,aye=N2;function rV(e){return e.l+=2,[Ba(e),e.read_shift(2)&1]}var iye=N2,oye=rV,lye=AN,cye=N2,uye=N2,dye=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function fye(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=dye[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function hye(e){return e.l+=2,[e.read_shift(4)]}function mye(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function gye(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function pye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function xye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function yye(e){return e.l+=4,[0,0]}var oO={1:{n:"PtgExp",f:Ixe},2:{n:"PtgTbl",f:tye},3:{n:"PtgAdd",f:Ia},4:{n:"PtgSub",f:Ia},5:{n:"PtgMul",f:Ia},6:{n:"PtgDiv",f:Ia},7:{n:"PtgPower",f:Ia},8:{n:"PtgConcat",f:Ia},9:{n:"PtgLt",f:Ia},10:{n:"PtgLe",f:Ia},11:{n:"PtgEq",f:Ia},12:{n:"PtgGe",f:Ia},13:{n:"PtgGt",f:Ia},14:{n:"PtgNe",f:Ia},15:{n:"PtgIsect",f:Ia},16:{n:"PtgUnion",f:Ia},17:{n:"PtgRange",f:Ia},18:{n:"PtgUplus",f:Ia},19:{n:"PtgUminus",f:Ia},20:{n:"PtgPercent",f:Ia},21:{n:"PtgParen",f:Ia},22:{n:"PtgMissArg",f:Ia},23:{n:"PtgStr",f:Uxe},26:{n:"PtgSheet",f:mye},27:{n:"PtgEndSheet",f:gye},28:{n:"PtgErr",f:Lxe},29:{n:"PtgBool",f:$xe},30:{n:"PtgInt",f:Bxe},31:{n:"PtgNum",f:zxe},32:{n:"PtgArray",f:_xe},33:{n:"PtgFunc",f:Fxe},34:{n:"PtgFuncVar",f:Dxe},35:{n:"PtgName",f:Vxe},36:{n:"PtgRef",f:jxe},37:{n:"PtgArea",f:xxe},38:{n:"PtgMemArea",f:Yxe},39:{n:"PtgMemErr",f:Zxe},40:{n:"PtgMemNoMem",f:eye},41:{n:"PtgMemFunc",f:Xxe},42:{n:"PtgRefErr",f:Jxe},43:{n:"PtgAreaErr",f:vxe},44:{n:"PtgRefN",f:Pxe},45:{n:"PtgAreaN",f:bxe},46:{n:"PtgMemAreaN",f:pye},47:{n:"PtgMemNoMemN",f:xye},57:{n:"PtgNameX",f:qxe},58:{n:"PtgRef3d",f:Mxe},59:{n:"PtgArea3d",f:yxe},60:{n:"PtgRefErr3d",f:Qxe},61:{n:"PtgAreaErr3d",f:wxe},255:{}},vye={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},wye={1:{n:"PtgElfLel",f:rV},2:{n:"PtgElfRw",f:cye},3:{n:"PtgElfCol",f:rye},6:{n:"PtgElfRwV",f:uye},7:{n:"PtgElfColV",f:aye},10:{n:"PtgElfRadical",f:iye},11:{n:"PtgElfRadicalS",f:lye},13:{n:"PtgElfColS",f:nye},15:{n:"PtgElfColSV",f:sye},16:{n:"PtgElfRadicalLel",f:oye},25:{n:"PtgList",f:fye},29:{n:"PtgSxName",f:hye},255:{}},bye={0:{n:"PtgAttrNoop",f:yye},1:{n:"PtgAttrSemi",f:Nxe},2:{n:"PtgAttrIf",f:Txe},4:{n:"PtgAttrChoose",f:Sxe},8:{n:"PtgAttrGoto",f:kxe},16:{n:"PtgAttrSum",f:Rxe},32:{n:"PtgAttrBaxcel",f:iO},33:{n:"PtgAttrBaxcel",f:iO},64:{n:"PtgAttrSpace",f:Exe},65:{n:"PtgAttrSpaceSemi",f:Axe},128:{n:"PtgAttrIfError",f:Cxe},255:{}};function E2(e,t,r,n){if(n.biff<8)return vo(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Gxe(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Hxe(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(vo(e,t)),a}function A2(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=oO[a]||oO[vye[a]],(a===24||a===25)&&(s=(a===24?wye:bye)[e[e.l+1]]),!s||!s.f?vo(e,t):i.push([s.n,s.f(e,t,r)]);return i}function _ye(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Sye={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function kye(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function nV(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function lO(e,t,r){var n=nV(e,t,r);return n=="#REF"?n:kye(n,r)}function co(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,g,x="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",T=0,k=e[0].length;T<k;++T){var b=e[0][T];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=ha(" ",e[0][y][1][1]);break;case 1:v=ha("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}o.push(u+Sye[b[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Zy(b[1][1],i,s),o.push(ev(d,a));break;case"PtgRefN":d=r?Zy(b[1][1],r,s):b[1][1],o.push(ev(d,a));break;case"PtgRef3d":f=b[1][1],d=Zy(b[1][2],i,s),x=lO(n,f,s),o.push(x+"!"+ev(d,a));break;case"PtgFunc":case"PtgFuncVar":var C=b[1][0],E=b[1][1];C||(C=0),C&=127;var j=C==0?[]:o.slice(-C);o.length-=C,E==="User"&&(E=j.shift()),o.push(E+"("+j.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":g=ID(b[1][1],r?{s:r}:i,s),o.push($5(g,s));break;case"PtgArea":g=ID(b[1][1],i,s),o.push($5(g,s));break;case"PtgArea3d":f=b[1][1],g=b[1][2],x=lO(n,f,s),o.push(x+"!"+$5(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var P=(n.names||[])[h-1]||(n[0]||[])[h],A=P?P.Name:"SH33TJSNAME"+String(h);A&&A.slice(0,6)=="_xlfn."&&!s.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var M=b[1][1];h=b[1][2];var F;if(s.biff<=5)M<0&&(M=-M),n[M]&&(F=n[M][h]);else{var B="";if(((n[M]||[])[0]||[])[0]==14849||(((n[M]||[])[0]||[])[0]==1025?n[M][h]&&n[M][h].itab>0&&(B=n.SheetNames[n[M][h].itab-1]+"!"):B=n.SheetNames[h-1]+"!"),n[M]&&n[M][h])B+=n[M][h].Name;else if(n[0]&&n[0][h])B+=n[0][h].Name;else{var V=(nV(n,M,s)||"").split(";;");V[h-1]?B=V[h-1]:B+="SH33TJSERRX"}o.push(B);break}F||(F={Name:"SH33TJSERRY"}),o.push(F.Name);break;case"PtgParen":var ee="(",ae=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:ee=ha(" ",e[0][y][1][1])+ee;break;case 3:ee=ha("\r",e[0][y][1][1])+ee;break;case 4:ae=ha(" ",e[0][y][1][1])+ae;break;case 5:ae=ha("\r",e[0][y][1][1])+ae;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}o.push(ee+o.pop()+ae);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[en(d)]){var te=n.sharedf[en(d)];o.push(co(te,i,Z,n,s))}else{var L=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(co(u[1],i,Z,n,s)),L=!0;break}L||o.push(b[1])}break;case"PtgArray":o.push("{"+_ye(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&K.indexOf(e[0][T][0])==-1){b=e[0][y];var I=!0;switch(b[1][0]){case 4:I=!1;case 0:v=ha(" ",b[1][1]);break;case 5:I=!1;case 1:v=ha("\r",b[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((I?v:"")+o.pop()+(I?"":v)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Tye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],vo(e,t-2)];var o=A2(e,i,r);return t!==i+s&&(a=E2(e,t-i-s,o,r)),e.l=n,[o,a]}function Cye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],vo(e,t-2)];var o=A2(e,i,r);return t!==i+s&&(a=E2(e,t-i-s,o,r)),e.l=n,[o,a]}function Nye(e,t,r,n){var s=e.l+t,a=A2(e,n,r),i;return s!==e.l&&(i=E2(e,s-e.l,a,r)),[a,i]}function Eye(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=A2(e,a,r);return a==65535?[[],vo(e,t-2)]:(t!==a+2&&(s=E2(e,n-a-2,i,r)),[i,s])}function Aye(e){var t;if(Kd(e,e.l+6)!==65535)return[ho(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function jye(e){if(e==null){var t=Rt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Rm(e);return Rm(0)}function G5(e,t,r){var n=e.l+t,s=id(e);r.biff==2&&++e.l;var a=Aye(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=Cye(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function Pye(e,t,r,n,s){var a=Lm(t,r,s),i=jye(e.v),o=Rt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Rt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=bi([a,i,o,u]);return f}function g3(e,t,r){var n=e.read_shift(4),s=A2(e,n,r),a=e.read_shift(4),i=a>0?E2(e,a,s,r):null;return[s,i]}var Mye=g3,p3=g3,Fye=g3,Dye=g3,Oye={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},sV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Rye={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function cO(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Iye(e){var t="of:="+e.replace(NN,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function V5(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Lye(e){return e.replace(/\./,"!")}var rv={},Op={},nv=typeof Map<"u";function jN(e,t,r){var n=0,s=e.length;if(r){if(nv?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=nv?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(nv?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function x3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(uo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Lv(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=q4(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function gm(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function ih(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){t0(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function aV(e,t,r,n,s,a){try{n.cellNF&&(e.z=Qr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ms(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Qr[t]==null&&t0(Ofe[t]||"General",t),e.t==="e")e.w=e.w||k0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Pv(e.v);else if(e.t==="d"){var i=si(e.v);(i|0)===i?e.w=i.toString(10):e.w=Pv(i)}else{if(e.v===void 0)return"";e.w=Dm(e.v,Op)}else e.t==="d"?e.w=kc(t,si(e.v),Op):e.w=kc(t,e.v,Op)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=V4(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=V4(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function Bye(e,t,r){if(e&&e["!ref"]){var n=Ln(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function $ye(e,t){var r=Ln(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=vn(r))}var zye=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Uye=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Wye=/<(?:\w:)?hyperlink [^>]*>/mg,Hye=/"(\w*:\w*)"/,Gye=/<(?:\w:)?col\b[^>]*[\/]?>/g,Vye=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,qye=/<(?:\w:)?pageMargins[^>]*\/>/g,iV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Kye=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Yye=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Xye(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Uye);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(iV);h?PN(h[0],o,s,r):(h=u.match(Kye))&&Qye(h[0],h[1]||"",o,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var x=u.slice(g,g+50).match(Hye);x&&$ye(o,x[1])}var y=u.match(Yye);y&&y[1]&&dve(y[1],s);var v=[];if(t.cellStyles){var T=u.match(Gye);T&&ive(v,T)}f&&mve(f[1],o,t,c,a,i);var k=d.match(Vye);k&&(o["!autofilter"]=lve(k[0]));var b=[],C=d.match(zye);if(C)for(g=0;g!=C.length;++g)b[g]=Ln(C[g].slice(C[g].indexOf('"')+1));var E=d.match(Wye);E&&nve(o,E,n);var j=d.match(qye);if(j&&(o["!margins"]=sve(nn(j[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=vn(c)),t.sheetRows>0&&o["!ref"]){var P=Ln(o["!ref"]);t.sheetRows<=+P.e.r&&(P.e.r=t.sheetRows-1,P.e.r>c.e.r&&(P.e.r=c.e.r),P.e.r<P.s.r&&(P.s.r=P.e.r),P.e.c>c.e.c&&(P.e.c=c.e.c),P.e.c<P.s.c&&(P.s.c=P.e.c),o["!fullref"]=o["!ref"],o["!ref"]=vn(P))}return v.length>0&&(o["!cols"]=v),b.length>0&&(o["!merges"]=b),o}function Jye(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+vn(e[r])+'"/>';return t+"</mergeCells>"}function PN(e,t,r,n){var s=nn(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Rn(ms(s.codeName)))}function Qye(e,t,r,n,s){PN(e.slice(0,e.indexOf(">")),r,n,s)}function Zye(e,t,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}a=!0,i.codeName=Hu(is(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+dr("outlinePr",null,u)}!a&&!o||(s[s.length]=dr("sheetPr",o,i))}var eve=["objects","scenarios","selectLockedCells","selectUnlockedCells"],tve=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function rve(e){var t={sheet:1};return eve.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),tve.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=kN(e.password).toString(16).toUpperCase()),dr("sheetProtection",null,t)}function nve(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=nn(ms(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+Rn(a.location))):(a.Target="#"+Rn(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Ln(a.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=en({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function sve(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function ave(e){return gm(e),dr("pageMargins",null,e)}function ive(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=nn(t[n],!0);s.hidden&&(s.hidden=As(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,TN(s.width)),Vf(s);a<=i;)e[a++]=Fs(s)}}function ove(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=dr("col",null,x3(s,n)));return r[r.length]="</cols>",r.join("")}function lve(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function cve(e,t,r,n){var s=typeof e.ref=="string"?e.ref:vn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=fl(s);i.s.r==i.e.r&&(i.e.r=fl(t["!ref"]).e.r,s=vn(i));for(var o=0;o<a.length;++o){var c=a[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),dr("autoFilter",null,{ref:s})}var uve=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function dve(e,t){t.Views||(t.Views=[{}]),(e.match(uve)||[]).forEach(function(r,n){var s=nn(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),As(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function fve(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),dr("sheetViews",dr("sheetView",null,s),{})}function hve(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=k0[e.v];break;case"d":n&&n.cellDates?s=Ms(e.v,-1).toISOString():(e=Fs(e),e.t="n",s=""+(e.v=si(Ms(e.v)))),typeof e.z>"u"&&(e.z=Qr[14]);break;default:s=e.v;break}var o=qi("v",is(s)),c={r:t},u=ih(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=qi("v",""+jN(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=a&&(e.t=a,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=dr("f",is(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),dr("c",o,c)}var mve=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Mv("v"),i=Mv("f");return function(c,u,d,f,h,g){for(var x=0,y="",v=[],T=[],k=0,b=0,C=0,E="",j,P,A=0,M=0,F,B,V=0,ee=0,ae=Array.isArray(g.CellXf),Z,te=[],L=[],K=Array.isArray(u),I=[],H={},U=!1,R=!!d.sheetStubs,z=c.split(t),G=0,X=z.length;G!=X;++G){y=z[G].trim();var ne=y.length;if(ne!==0){var q=0;e:for(x=0;x<ne;++x)switch(y[x]){case">":if(y[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(P=nn(y.slice(q,x),!0),A=P.r!=null?parseInt(P.r,10):A+1,M=-1,d.sheetRows&&d.sheetRows<A)continue;H={},U=!1,P.ht&&(U=!0,H.hpt=parseFloat(P.ht),H.hpx=Xp(H.hpt)),P.hidden=="1"&&(U=!0,H.hidden=!0),P.outlineLevel!=null&&(U=!0,H.level=+P.outlineLevel),U&&(I[A-1]=H)}break;case"<":q=x;break}if(q>=x)break;if(P=nn(y.slice(q,x),!0),A=P.r!=null?parseInt(P.r,10):A+1,M=-1,!(d.sheetRows&&d.sheetRows<A)){f.s.r>A-1&&(f.s.r=A-1),f.e.r<A-1&&(f.e.r=A-1),d&&d.cellStyles&&(H={},U=!1,P.ht&&(U=!0,H.hpt=parseFloat(P.ht),H.hpx=Xp(H.hpt)),P.hidden=="1"&&(U=!0,H.hidden=!0),P.outlineLevel!=null&&(U=!0,H.level=+P.outlineLevel),U&&(I[A-1]=H)),v=y.slice(x).split(e);for(var se=0;se!=v.length&&v[se].trim().charAt(0)=="<";++se);for(v=v.slice(se),x=0;x!=v.length;++x)if(y=v[x].trim(),y.length!==0){if(T=y.match(r),k=x,b=0,C=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,T!=null&&T.length===2){for(k=0,E=T[1],b=0;b!=E.length&&!((C=E.charCodeAt(b)-64)<1||C>26);++b)k=26*k+C;--k,M=k}else++M;for(b=0;b!=y.length&&y.charCodeAt(b)!==62;++b);if(++b,P=nn(y.slice(0,b),!0),P.r||(P.r=en({r:A-1,c:M})),E=y.slice(b),j={t:""},(T=E.match(a))!=null&&T[1]!==""&&(j.v=Rn(T[1])),d.cellFormula){if((T=E.match(i))!=null&&T[1]!==""){if(j.f=Rn(ms(T[1])).replace(/\r\n/g,`
`),d.xlfn||(j.f=aO(j.f)),T[0].indexOf('t="array"')>-1)j.F=(E.match(s)||[])[1],j.F.indexOf(":")>-1&&te.push([Ln(j.F),j.F]);else if(T[0].indexOf('t="shared"')>-1){B=nn(T[0]);var ue=Rn(ms(T[1]));d.xlfn||(ue=aO(ue)),L[parseInt(B.si,10)]=[B,ue,P.r]}}else(T=E.match(/<f[^>]*\/>/))&&(B=nn(T[0]),L[B.si]&&(j.f=uxe(L[B.si][1],L[B.si][2],P.r)));var me=ea(P.r);for(b=0;b<te.length;++b)me.r>=te[b][0].s.r&&me.r<=te[b][0].e.r&&me.c>=te[b][0].s.c&&me.c<=te[b][0].e.c&&(j.F=te[b][1])}if(P.t==null&&j.v===void 0)if(j.f||j.F)j.v=0,j.t="n";else if(R)j.t="z";else continue;else j.t=P.t||"n";switch(f.s.c>M&&(f.s.c=M),f.e.c<M&&(f.e.c=M),j.t){case"n":if(j.v==""||j.v==null){if(!R)continue;j.t="z"}else j.v=parseFloat(j.v);break;case"s":if(typeof j.v>"u"){if(!R)continue;j.t="z"}else F=rv[parseInt(j.v,10)],j.v=F.t,j.r=F.r,d.cellHTML&&(j.h=F.h);break;case"str":j.t="s",j.v=j.v!=null?ms(j.v):"",d.cellHTML&&(j.h=cN(j.v));break;case"inlineStr":T=E.match(n),j.t="s",T!=null&&(F=SN(T[1]))?(j.v=F.t,d.cellHTML&&(j.h=F.h)):j.v="";break;case"b":j.v=As(j.v);break;case"d":d.cellDates?j.v=Ms(j.v,1):(j.v=si(Ms(j.v,1)),j.t="n");break;case"e":(!d||d.cellText!==!1)&&(j.w=j.v),j.v=lG[j.v];break}if(V=ee=0,Z=null,ae&&P.s!==void 0&&(Z=g.CellXf[P.s],Z!=null&&(Z.numFmtId!=null&&(V=Z.numFmtId),d.cellStyles&&Z.fillId!=null&&(ee=Z.fillId))),aV(j,V,ee,d,h,g),d.cellDates&&ae&&j.t=="n"&&k1(Qr[V])&&(j.t="d",j.v=h3(j.v)),P.cm&&d.xlmeta){var Ne=(d.xlmeta.Cell||[])[+P.cm-1];Ne&&Ne.type=="XLDAPR"&&(j.D=!0)}if(K){var ce=ea(P.r);u[ce.r]||(u[ce.r]=[]),u[ce.r][ce.c]=j}else u[P.r]=j}}}}I.length>0&&(u["!rows"]=I)}})();function gve(e,t,r,n){var s=[],a=[],i=Ln(e["!ref"]),o="",c,u="",d=[],f=0,h=0,g=e["!rows"],x=Array.isArray(e),y={r:u},v,T=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=Zs(h);for(f=i.s.r;f<=i.e.r;++f){for(a=[],u=ja(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var k=x?(e[f]||[])[h]:e[c];k!==void 0&&(o=hve(k,c,e,t))!=null&&a.push(o)}(a.length>0||g&&g[f])&&(y={r:u},g&&g[f]&&(v=g[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Bv(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=dr("row",a.join(""),y))}if(g)for(;f<g.length;++f)g&&g[f]&&(y={r:f+1},v=g[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Bv(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=dr("row","",y));return s.join("")}function oV(e,t,r,n){var s=[Ma,dr("worksheet",null,{xmlns:Jm[0],"xmlns:r":ti.r})],a=r.SheetNames[e],i=0,o="",c=r.Sheets[a];c==null&&(c={});var u=c["!ref"]||"A1",d=Ln(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=vn(d)}n||(n={}),c["!comments"]=[];var f=[];Zye(c,r,e,t,s),s[s.length]=dr("dimension",null,{ref:u}),s[s.length]=fve(c,t,e,r),t.sheetFormat&&(s[s.length]=dr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=ove(c,c["!cols"])),s[i=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=gve(c,t),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),c["!protect"]&&(s[s.length]=rve(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=cve(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Jye(c["!merges"]));var h=-1,g,x=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(x=ns(n,-1,is(y[1].Target).replace(/#.*$/,""),Nn.HLINK),g["r:id"]="rId"+x),(h=y[1].Target.indexOf("#"))>-1&&(g.location=is(y[1].Target.slice(h+1))),y[1].Tooltip&&(g.tooltip=is(y[1].Tooltip)),s[s.length]=dr("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=ave(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=qi("ignoredErrors",dr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=ns(n,-1,"../drawings/drawing"+(e+1)+".xml",Nn.DRAW),s[s.length]=dr("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=f),c["!comments"].length>0&&(x=ns(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Nn.VML),s[s.length]=dr("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function pve(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function xve(e,t,r){var n=Rt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=Bv(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[en(u)];x&&(f<0&&(f=g),h=g)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var y=n.l;return n.l=c,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function yve(e,t,r,n){var s=xve(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Ut(e,0,s)}var vve=tg,wve=N1;function bve(){}function _ve(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=The(e),r}function Sve(e,t,r){r==null&&(r=Rt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return W4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),nG(e,r),r.slice(0,r.l)}function kve(e){var t=Ac(e);return[t]}function Tve(e,t,r){return r==null&&(r=Rt(8)),Qm(t,r)}function Cve(e){var t=Zm(e);return[t]}function Nve(e,t,r){return r==null&&(r=Rt(4)),eg(t,r)}function Eve(e){var t=Ac(e),r=e.read_shift(1);return[t,r,"b"]}function Ave(e,t,r){return r==null&&(r=Rt(9)),Qm(t,r),r.write_shift(1,e.v?1:0),r}function jve(e){var t=Zm(e),r=e.read_shift(1);return[t,r,"b"]}function Pve(e,t,r){return r==null&&(r=Rt(5)),eg(t,r),r.write_shift(1,e.v?1:0),r}function Mve(e){var t=Ac(e),r=e.read_shift(1);return[t,r,"e"]}function Fve(e,t,r){return r==null&&(r=Rt(9)),Qm(t,r),r.write_shift(1,e.v),r}function Dve(e){var t=Zm(e),r=e.read_shift(1);return[t,r,"e"]}function Ove(e,t,r){return r==null&&(r=Rt(8)),eg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Rve(e){var t=Ac(e),r=e.read_shift(4);return[t,r,"s"]}function Ive(e,t,r){return r==null&&(r=Rt(12)),Qm(t,r),r.write_shift(4,t.v),r}function Lve(e){var t=Zm(e),r=e.read_shift(4);return[t,r,"s"]}function Bve(e,t,r){return r==null&&(r=Rt(8)),eg(t,r),r.write_shift(4,t.v),r}function $ve(e){var t=Ac(e),r=ho(e);return[t,r,"n"]}function zve(e,t,r){return r==null&&(r=Rt(16)),Qm(t,r),Rm(e.v,r),r}function lV(e){var t=Zm(e),r=ho(e);return[t,r,"n"]}function Uve(e,t,r){return r==null&&(r=Rt(12)),eg(t,r),Rm(e.v,r),r}function Wve(e){var t=Ac(e),r=yN(e);return[t,r,"n"]}function Hve(e,t,r){return r==null&&(r=Rt(12)),Qm(t,r),sG(e.v,r),r}function Gve(e){var t=Zm(e),r=yN(e);return[t,r,"n"]}function Vve(e,t,r){return r==null&&(r=Rt(8)),eg(t,r),sG(e.v,r),r}function qve(e){var t=Ac(e),r=gN(e);return[t,r,"is"]}function Kve(e){var t=Ac(e),r=xo(e);return[t,r,"str"]}function Yve(e,t,r){return r==null&&(r=Rt(12+4*e.v.length)),Qm(t,r),Si(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Xve(e){var t=Zm(e),r=xo(e);return[t,r,"str"]}function Jve(e,t,r){return r==null&&(r=Rt(8+4*e.v.length)),eg(t,r),Si(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Qve(e,t,r){var n=e.l+t,s=Ac(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=p3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function Zve(e,t,r){var n=e.l+t,s=Ac(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=p3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function e2e(e,t,r){var n=e.l+t,s=Ac(e);s.r=r["!row"];var a=ho(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=p3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function t2e(e,t,r){var n=e.l+t,s=Ac(e);s.r=r["!row"];var a=xo(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=p3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}var r2e=tg,n2e=N1;function s2e(e,t){return t==null&&(t=Rt(4)),t.write_shift(4,e),t}function a2e(e,t){var r=e.l+t,n=tg(e),s=pN(e),a=xo(e),i=xo(e),o=xo(e);e.l=r;var c={rfx:n,relId:s,loc:a,display:o};return i&&(c.Tooltip=i),c}function i2e(e,t){var r=Rt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));N1({s:ea(e[0]),e:ea(e[0])},r),xN("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Si(s||"",r),Si(e[1].Tooltip||"",r),Si("",r),r.slice(0,r.l)}function o2e(){}function l2e(e,t,r){var n=e.l+t,s=aG(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=Mye(e,n-e.l,r);i[1]=o}else e.l=n;return i}function c2e(e,t,r){var n=e.l+t,s=tg(e),a=[s];if(r.cellFormula){var i=Dye(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}function u2e(e,t,r){r==null&&(r=Rt(18));var n=x3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var cV=["left","right","top","bottom","header","footer"];function d2e(e){var t={};return cV.forEach(function(r){t[r]=ho(e)}),t}function f2e(e,t){return t==null&&(t=Rt(48)),gm(e),cV.forEach(function(r){Rm(e[r],t)}),t}function h2e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function m2e(e,t,r){r==null&&(r=Rt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function g2e(e){var t=Rt(24);return t.write_shift(4,4),t.write_shift(4,1),N1(e,t),t}function p2e(e,t){return t==null&&(t=Rt(66)),t.write_shift(2,e.password?kN(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function x2e(){}function y2e(){}function v2e(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,g,x,y,v,T,k,b,C,E,j=[];o.biff=12,o["!row"]=0;var P=0,A=!1,M=[],F={},B=o.supbooks||s.supbooks||[[]];if(B.sharedf=F,B.arrayf=M,B.SheetNames=s.SheetNames||s.Sheets.map(function(K){return K.name}),!o.supbooks&&(o.supbooks=B,s.Names))for(var V=0;V<s.Names.length;++V)B[0][V+1]=s.Names[V];var ee=[],ae=[],Z=!1;$v[16]={n:"BrtShortReal",f:lV};var te;if(S0(e,function(I,H,U){if(!h)switch(U){case 148:u=I;break;case 0:g=I,o.sheetRows&&o.sheetRows<=g.r&&(h=!0),C=ja(v=g.r),o["!row"]=g.r,(I.hidden||I.hpt||I.level!=null)&&(I.hpt&&(I.hpx=Xp(I.hpt)),ae[I.r]=I);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:I[2]},I[2]){case"n":x.v=I[1];break;case"s":b=rv[I[1]],x.v=b.t,x.r=b.r;break;case"b":x.v=!!I[1];break;case"e":x.v=I[1],o.cellText!==!1&&(x.w=k0[x.v]);break;case"str":x.t="s",x.v=I[1];break;case"is":x.t="s",x.v=I[1].t;break}if((y=i.CellXf[I[0].iStyleRef])&&aV(x,y.numFmtId,null,o,a,i),T=I[0].c==-1?T+1:I[0].c,o.dense?(c[v]||(c[v]=[]),c[v][T]=x):c[Zs(T)+C]=x,o.cellFormula){for(A=!1,P=0;P<M.length;++P){var R=M[P];g.r>=R[0].s.r&&g.r<=R[0].e.r&&T>=R[0].s.c&&T<=R[0].e.c&&(x.F=vn(R[0]),A=!0)}!A&&I.length>3&&(x.f=I[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),o.cellDates&&y&&x.t=="n"&&k1(Qr[y.numFmtId])){var z=rm(x.v);z&&(x.t="d",x.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}te&&(te.type=="XLDAPR"&&(x.D=!0),te=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},T=I[0].c==-1?T+1:I[0].c,o.dense?(c[v]||(c[v]=[]),c[v][T]=x):c[Zs(T)+C]=x,d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),te&&(te.type=="XLDAPR"&&(x.D=!0),te=void 0);break;case 176:j.push(I);break;case 49:te=((o.xlmeta||{}).Cell||[])[I-1];break;case 494:var G=n["!id"][I.relId];for(G?(I.Target=G.Target,I.loc&&(I.Target+="#"+I.loc),I.Rel=G):I.relId==""&&(I.Target="#"+I.loc),v=I.rfx.s.r;v<=I.rfx.e.r;++v)for(T=I.rfx.s.c;T<=I.rfx.e.c;++T)o.dense?(c[v]||(c[v]=[]),c[v][T]||(c[v][T]={t:"z",v:void 0}),c[v][T].l=I):(k=en({c:T,r:v}),c[k]||(c[k]={t:"z",v:void 0}),c[k].l=I);break;case 426:if(!o.cellFormula)break;M.push(I),E=o.dense?c[v][T]:c[Zs(T)+C],E.f=co(I[1],d,{r:g.r,c:T},B,o),E.F=vn(I[0]);break;case 427:if(!o.cellFormula)break;F[en(I[0].s)]=I[1],E=o.dense?c[v][T]:c[Zs(T)+C],E.f=co(I[1],d,{r:g.r,c:T},B,o);break;case 60:if(!o.cellStyles)break;for(;I.e>=I.s;)ee[I.e--]={width:I.w/256,hidden:!!(I.flags&1),level:I.level},Z||(Z=!0,TN(I.w/256)),Vf(ee[I.e+1]);break;case 161:c["!autofilter"]={ref:vn(I)};break;case 476:c["!margins"]=I;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),I.name&&(s.Sheets[r].CodeName=I.name),(I.above||I.left)&&(c["!outline"]={above:I.above,left:I.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),I.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!H.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+U.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=vn(u||d)),o.sheetRows&&c["!ref"]){var L=Ln(c["!ref"]);o.sheetRows<=+L.e.r&&(L.e.r=o.sheetRows-1,L.e.r>d.e.r&&(L.e.r=d.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>d.e.c&&(L.e.c=d.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),c["!fullref"]=c["!ref"],c["!ref"]=vn(L))}return j.length>0&&(c["!merges"]=j),ee.length>0&&(c["!cols"]=ee),ae.length>0&&(c["!rows"]=ae),c}function w2e(e,t,r,n,s,a,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Fs(t),t.z=t.z||Qr[14],t.v=si(Ms(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=ih(s.cellXfs,t,s),t.l&&a["!links"].push([en(c),t.l]),t.c&&a["!comments"].push([en(c),t.c]),t.t){case"s":case"str":return s.bookSST?(o=jN(s.Strings,t.v,s.revStrings),c.t="s",c.v=o,i?Ut(e,18,Bve(t,c)):Ut(e,7,Ive(t,c))):(c.t="str",i?Ut(e,17,Jve(t,c)):Ut(e,6,Yve(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Ut(e,13,Vve(t,c)):Ut(e,2,Hve(t,c)):i?Ut(e,16,Uve(t,c)):Ut(e,5,zve(t,c)),!0;case"b":return c.t="b",i?Ut(e,15,Pve(t,c)):Ut(e,4,Ave(t,c)),!0;case"e":return c.t="e",i?Ut(e,14,Ove(t,c)):Ut(e,3,Fve(t,c)),!0}return i?Ut(e,12,Nve(t,c)):Ut(e,1,Tve(t,c)),!0}function b2e(e,t,r,n){var s=Ln(t["!ref"]||"A1"),a,i="",o=[];Ut(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=ja(d),yve(e,t,s,d);var f=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=Zs(h)),a=o[h]+i;var g=c?(t[d]||[])[h]:t[a];if(!g){f=!1;continue}f=w2e(e,g,d,h,n,t,f)}}Ut(e,146)}function _2e(e,t){!t||!t["!merges"]||(Ut(e,177,s2e(t["!merges"].length)),t["!merges"].forEach(function(r){Ut(e,176,n2e(r))}),Ut(e,178))}function S2e(e,t){!t||!t["!cols"]||(Ut(e,390),t["!cols"].forEach(function(r,n){r&&Ut(e,60,u2e(n,r))}),Ut(e,391))}function k2e(e,t){!t||!t["!ref"]||(Ut(e,648),Ut(e,649,g2e(Ln(t["!ref"]))),Ut(e,650))}function T2e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=ns(r,-1,n[1].Target.replace(/#.*$/,""),Nn.HLINK);Ut(e,494,i2e(n,s))}}),delete t["!links"]}function C2e(e,t,r,n){if(t["!comments"].length>0){var s=ns(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Nn.VML);Ut(e,551,xN("rId"+s)),t["!legacy"]=s}}function N2e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:vn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=fl(a);o.s.r==o.e.r&&(o.e.r=fl(t["!ref"]).e.r,a=vn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ut(e,161,N1(Ln(a))),Ut(e,162)}}function E2e(e,t,r){Ut(e,133),Ut(e,137,m2e(t,r)),Ut(e,138),Ut(e,134)}function A2e(e,t){t["!protect"]&&Ut(e,535,p2e(t["!protect"]))}function j2e(e,t,r,n){var s=dl(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Ln(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Ut(s,129),(r.vbaraw||i["!outline"])&&Ut(s,147,Sve(o,i["!outline"])),Ut(s,148,wve(c)),E2e(s,i,r.Workbook),S2e(s,i),b2e(s,i,e,t),A2e(s,i),N2e(s,i,r,e),_2e(s,i),T2e(s,i,n),i["!margins"]&&Ut(s,476,f2e(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&k2e(s,i),C2e(s,i,e,n),Ut(s,130),s.end()}function P2e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=Rn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function M2e(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=P2e(f);d.s.r=d.s.c=0,d.e.c=o,u=Zs(o),h[0].forEach(function(g,x){i[u+ja(x)]={t:"n",v:g,z:h[1]},c=x}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=vn(d)),i}function F2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(iV);return o&&PN(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function D2e(e,t){e.l+=10;var r=xo(e);return{name:r}}function O2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return S0(e,function(c,u,d){switch(d){case 550:a["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var MN=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],R2e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],I2e=[],L2e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function uO(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=As(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function dO(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=As(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function uV(e){dO(e.WBProps,MN),dO(e.CalcPr,L2e),uO(e.WBView,R2e),uO(e.Sheets,I2e),Op.date1904=As(e.WBProps.date1904)}function B2e(e){return!e.Workbook||!e.Workbook.WBProps?"false":As(e.Workbook.WBProps.date1904)?"true":"false"}var $2e="][*?/\\".split("");function dV(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return $2e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function z2e(e,t,r){e.forEach(function(n,s){dV(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function U2e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];z2e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Bye(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var W2e=/<\w+:workbook/;function H2e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(wo,function(c,u){var d=nn(c);switch(ad(d[0])){case"<?xml":break;case"<workbook":c.match(W2e)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":MN.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=As(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=ms(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Rn(ms(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=ms(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),As(d.hidden||"0")&&(a.Hidden=!0),i=u+c.length;break;case"</definedName>":a.Ref=Rn(ms(e.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Jm.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return uV(r),r}function fV(e){var t=[Ma];t[t.length]=dr("workbook",null,{xmlns:Jm[0],"xmlns:r":ti.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(MN.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=dr("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:is(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=dr("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=dr("definedName",is(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function G2e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=G8(e),r.name=xo(e),r}function V2e(e,t){return t||(t=Rt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),xN(e.strRelID,t),Si(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function q2e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?xo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function K2e(e,t){t||(t=Rt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),nG(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Y2e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function X2e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=Che(e),i=Fye(e,0,r),o=pN(e);e.l=n;var c={Name:a,Ptg:i};return s<268435455&&(c.Sheet=s),o&&(c.Comment=o),c}function J2e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],$v[16]={n:"BrtFRTArchID$",f:Y2e},S0(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=co(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,a.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),uV(r),r.Names=a,r.supbooks=i,r}function Q2e(e,t){Ut(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ut(e,156,V2e(s))}Ut(e,144)}function Z2e(e,t){t||(t=Rt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Si("SheetJS",t),Si(R4.version,t),Si(R4.version,t),Si("7262",t),t.length>t.l?t.slice(0,t.l):t}function ewe(e,t){t||(t=Rt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function twe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Ut(e,135),Ut(e,158,ewe(s)),Ut(e,136))}}function rwe(e,t){var r=dl();return Ut(r,131),Ut(r,128,Z2e()),Ut(r,153,K2e(e.Workbook&&e.Workbook.WBProps||null)),twe(r,e),Q2e(r,e),Ut(r,132),r.end()}function nwe(e,t,r){return t.slice(-4)===".bin"?J2e(e,r):H2e(e,r)}function swe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?v2e(e,n,r,s,a,i,o):Xye(e,n,r,s,a,i,o)}function awe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?O2e(e,n,r,s,a):F2e(e,n,r,s,a)}function iwe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?lxe():cxe()}function owe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?ixe():oxe()}function lwe(e,t,r,n){return t.slice(-4)===".bin"?n1e(e,r,n):Gpe(e,r,n)}function cwe(e,t,r){return VG(e,r)}function uwe(e,t,r){return t.slice(-4)===".bin"?upe(e,r):ope(e,r)}function dwe(e,t,r){return t.slice(-4)===".bin"?txe(e,r):V1e(e,r)}function fwe(e,t,r){return t.slice(-4)===".bin"?W1e(e):z1e(e)}function hwe(e,t,r,n){return r.slice(-4)===".bin"?H1e(e,t,r,n):void 0}function mwe(e,t,r){return t.slice(-4)===".bin"?L1e(e,t,r):$1e(e,t,r)}function gwe(e,t,r){return(t.slice(-4)===".bin"?rwe:fV)(e)}function pwe(e,t,r,n,s){return(t.slice(-4)===".bin"?j2e:oV)(e,r,n,s)}function xwe(e,t,r){return(t.slice(-4)===".bin"?h1e:HG)(e,r)}function ywe(e,t,r){return(t.slice(-4)===".bin"?hpe:RG)(e,r)}function vwe(e,t,r){return(t.slice(-4)===".bin"?rxe:YG)(e)}function wwe(e){return(e.slice(-4)===".bin"?B1e:qG)()}var hV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,mV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Yc(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(hV),a,i,o,c;if(s)for(c=0;c!=s.length;++c)a=s[c].match(mV),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function bwe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(hV),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(mV),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var sv;function _we(e,t){var r=sv[e]||Rn(e);return r==="General"?Dm(t):kc(r,t)}function Swe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=As(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Ms(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Rn(t)]=s}function kwe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||k0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Pv(e.v):e.w=Dm(e.v):e.w=_we(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=sv[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&k1(n)){var s=rm(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function Twe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Ipe[n.Pattern]||n.Pattern)}e[t.ID]=t}function Cwe(e,t,r,n,s,a,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var g=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&g.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=As(e);break;case"String":n.t="s",n.r=ED(Rn(e)),n.v=e.indexOf("<")>-1?Rn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ms(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Rn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=lG[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=ED(t||e));break}if(kwe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=Rn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Dp(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Dp("RC:RC",s):n.ArrayRange&&(n.F=Dp(n.ArrayRange,s),c.push([Ln(n.F),n.F]))}else for(x=0;x<c.length;++x)s.r>=c[x][0].s.r&&s.r<=c[x][0].e.r&&s.c>=c[x][0].s.c&&s.c<=c[x][0].e.c&&(n.F=c[x][1]);u.cellStyles&&(g.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Nwe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function q5(e,t){var r=t||{};T1();var n=Ry(uN(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ms(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=Fs(r);return i.type="string",Yp.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Nt){s.indexOf("<"+Nt)>=0&&(a=!0)}),a)return fbe(n,r);sv={"General Number":"General","General Date":Qr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Qr[15],"Short Date":Qr[14],"Long Time":Qr[19],"Medium Time":Qr[18],"Short Time":Qr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Qr[2],Standard:Qr[4],Percent:Qr[10],Scientific:Qr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},g="",x={},y={},v=Yc('<Data ss:Type="String">'),T=0,k=0,b=0,C={s:{r:2e6,c:2e6},e:{r:0,c:0}},E={},j={},P="",A=0,M=[],F={},B={},V=0,ee=[],ae=[],Z={},te=[],L,K=!1,I=[],H=[],U={},R=0,z=0,G={Sheets:[],WBProps:{date1904:!1}},X={};Dv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ne="";o=Dv.exec(n);)switch(o[3]=(ne=o[3]).toLowerCase()){case"data":if(ne=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?Cwe(n.slice(T,o.index),P,v,c[c.length-1][0]=="comment"?Z:x,{c:k,r:b},E,te[k],y,I,r):(P="",v=Yc(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(ae.length>0&&(x.c=ae),(!r.sheetRows||r.sheetRows>b)&&x.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][k]=x):h[Zs(k)+ja(b)]=x),x.HRef&&(x.l={Target:Rn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(R=k+(parseInt(x.MergeAcross,10)|0),z=b+(parseInt(x.MergeDown,10)|0),M.push({s:{c:k,r:b},e:{c:R,r:z}})),!r.sheetStubs)x.MergeAcross?k=R+1:++k;else if(x.MergeAcross||x.MergeDown){for(var q=k;q<=R;++q)for(var se=b;se<=z;++se)(q>k||se>b)&&(r.dense?(h[se]||(h[se]=[]),h[se][q]={t:"z"}):h[Zs(q)+ja(se)]={t:"z"});k=R+1}else++k;else x=bwe(o[0]),x.Index&&(k=+x.Index-1),k<C.s.c&&(C.s.c=k),k>C.e.c&&(C.e.c=k),o[0].slice(-2)==="/>"&&++k,ae=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<C.s.r&&(C.s.r=b),b>C.e.r&&(C.e.r=b),o[0].slice(-2)==="/>"&&(y=Yc(o[0]),y.Index&&(b=+y.Index-1)),k=0,++b):(y=Yc(o[0]),y.Index&&(b=+y.Index-1),U={},(y.AutoFitHeight=="0"||y.Height)&&(U.hpx=parseInt(y.Height,10),U.hpt=Bv(U.hpx),H[b]=U),y.Hidden=="1"&&(U.hidden=!0,H[b]=U));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(g),C.s.r<=C.e.r&&C.s.c<=C.e.c&&(h["!ref"]=vn(C),r.sheetRows&&r.sheetRows<=C.e.r&&(h["!fullref"]=h["!ref"],C.e.r=r.sheetRows-1,h["!ref"]=vn(C))),M.length&&(h["!merges"]=M),te.length>0&&(h["!cols"]=te),H.length>0&&(h["!rows"]=H),d[g]=h}else C={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=k=0,c.push([o[3],!1]),u=Yc(o[0]),g=Rn(u.Name),h=r.dense?[]:{},M=[],I=[],H=[],X={name:g,Hidden:0},G.Sheets.push(X);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),te=[],K=!1}break;case"style":o[1]==="/"?Twe(E,j,r):j=Yc(o[0]);break;case"numberformat":j.nf=Rn(Yc(o[0]).Format||"General"),sv[j.nf]&&(j.nf=sv[j.nf]);for(var ue=0;ue!=392&&Qr[ue]!=j.nf;++ue);if(ue==392){for(ue=57;ue!=392;++ue)if(Qr[ue]==null){t0(j.nf,ue);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(L=Yc(o[0]),L.Hidden&&(L.hidden=!0,delete L.Hidden),L.Width&&(L.wpx=parseInt(L.Width,10)),!K&&L.wpx>10){K=!0,uo=UG;for(var me=0;me<te.length;++me)te[me]&&Vf(te[me])}K&&Vf(L),te[L.Index-1||te.length]=L;for(var Ne=0;Ne<+L.Span;++Ne)te[te.length]=Fs(L);break;case"namedrange":if(o[1]==="/")break;G.Names||(G.Names=[]);var ce=nn(o[0]),Ue={Name:ce.Name,Ref:Dp(ce.RefersTo.slice(1),{r:0,c:0})};G.Sheets.length>0&&(Ue.Sheet=G.Sheets.length-1),G.Names.push(Ue);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?P+=n.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;j.Interior=Yc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Jhe(F,ne,n.slice(V,o.index)):V=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Nwe(Z),ae.push(Z)}else c.push([o[3],!1]),u=Yc(o[0]),Z={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var pe=Yc(o[0]);h["!autofilter"]={ref:Dp(pe.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return pO(n,r);var je=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:je=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:je=!1}break;case"excelworkbook":switch(o[3]){case"date1904":G.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:je=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:je=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(V,o.index)){case"SheetHidden":X.Hidden=1;break;case"SheetVeryHidden":X.Hidden=2;break}else V=o.index+o[0].length;break;case"header":h["!margins"]||gm(h["!margins"]={},"xlml"),isNaN(+nn(o[0]).Margin)||(h["!margins"].header=+nn(o[0]).Margin);break;case"footer":h["!margins"]||gm(h["!margins"]={},"xlml"),isNaN(+nn(o[0]).Margin)||(h["!margins"].footer=+nn(o[0]).Margin);break;case"pagemargins":var We=nn(o[0]);h["!margins"]||gm(h["!margins"]={},"xlml"),isNaN(+We.Top)||(h["!margins"].top=+We.Top),isNaN(+We.Left)||(h["!margins"].left=+We.Left),isNaN(+We.Right)||(h["!margins"].right=+We.Right),isNaN(+We.Bottom)||(h["!margins"].bottom=+We.Bottom);break;case"displayrighttoleft":G.Views||(G.Views=[]),G.Views[0]||(G.Views[0]={}),G.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:je=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:je=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:je=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:je=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:je=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:je=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:je=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:je=!1}break;case"smarttags":break;default:je=!1;break}if(je||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Swe(B,ne,ee,n.slice(V,o.index)):(ee=o,V=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Me={};return!r.bookSheets&&!r.bookProps&&(Me.Sheets=d),Me.SheetNames=f,Me.Workbook=G,Me.SSF=Fs(Qr),Me.Props=F,Me.Custprops=B,Me}function Q8(e,t){switch(DN(t=t||{}),t.type||"base64"){case"base64":return q5(Bl(e),t);case"binary":case"buffer":case"file":return q5(e,t);case"array":return q5(sh(e),t)}}function Ewe(e,t){var r=[];return e.Props&&r.push(Qhe(e.Props,t)),e.Custprops&&r.push(Zhe(e.Props,e.Custprops)),r.join("")}function Awe(){return""}function jwe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(dr("NumberFormat",null,{"ss:Format":is(Qr[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(dr("Style",a.join(""),i))}),dr("Styles",r.join(""))}function gV(e){return dr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+EN(e.Ref,{r:0,c:0})})}function Pwe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(gV(s)))}return dr("Names",r.join(""))}function Mwe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(gV(o)))}return a.join("")}function Fwe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(dr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(dr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(dr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(dr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(qi("ProtectContents","True")),e["!protect"].objects&&s.push(qi("ProtectObjects","True")),e["!protect"].scenarios&&s.push(qi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(qi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(qi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":dr("WorksheetOptions",s.join(""),{xmlns:Al.x})}function Dwe(e){return e.map(function(t){var r=the(t.t||""),n=dr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return dr("Comment",n,{"ss:Author":t.a})}).join("")}function Owe(e,t,r,n,s,a,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+is(EN(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=ea(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=is(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=is(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=k0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Qr[14]);break;case"s":f="String",h=ehe(e.v||"");break}var g=ih(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var x=e.v!=null?h:"",y=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(y+=Dwe(e.c)),dr("Cell",y,o)}function Rwe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Xp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Iwe(e,t,r,n){if(!e["!ref"])return"";var s=Ln(e["!ref"]),a=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,T){Vf(v);var k=!!v.width,b=x3(T,v),C={"ss:Index":T+1};k&&(C["ss:Width"]=Iv(b.width)),v.hidden&&(C["ss:Hidden"]="1"),o.push(dr("Column",null,C))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[Rwe(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var h=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>f)&&!(a[i].s.r>u)&&!(a[i].e.c<f)&&!(a[i].e.r<u)){(a[i].s.c!=f||a[i].s.r!=u)&&(h=!0);break}if(!h){var g={r:u,c:f},x=en(g),y=c?(e[u]||[])[f]:e[x];d.push(Owe(y,x,e,t,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Lwe(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?Mwe(a,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?Iwe(a,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(Fwe(a,t,e,r)),n.join("")}function Bwe(e,t){t||(t={}),e.SSF||(e.SSF=Fs(Qr)),e.SSF&&(T1(),u3(e.SSF),t.revssf=f3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],ih(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Ewe(e,t)),r.push(Awe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(dr("Worksheet",Lwe(n,t,e),{"ss:Name":is(e.SheetNames[n])}));return r[2]=jwe(e,t),r[3]=Pwe(e),Ma+dr("Workbook",r.join(""),{xmlns:Al.ss,"xmlns:o":Al.o,"xmlns:x":Al.x,"xmlns:ss":Al.ss,"xmlns:dt":Al.dt,"xmlns:html":Al.html})}function $we(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Phe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Mhe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var zwe=[60,1084,2066,2165,2175];function Uwe(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var c=Kd(r,r.l),u=Z8[c],d=0;u!=null&&zwe.indexOf(c)>-1;)a=Kd(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=Z8[c=Kd(r,r.l)];var f=bi(i);Hi(f,0);var h=0;f.lens=[];for(var g=0;g<i.length;++g)f.lens.push(h),h+=i[g].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,s)}function Fu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Qr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||k0[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Pv(e.v):e.w=Dm(e.v):e.w=kc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&k1(Qr[n]||String(n))){var s=rm(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function _b(e,t,r){return{v:e,ixfe:t,t:r}}function Wwe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,c=[],u="",d={},f,h="",g,x,y,v,T={},k=[],b,C,E=[],j=[],P={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},M=function(nt){return nt<8?fm[nt]:nt<64&&j[nt-8]||fm[nt]},F=function(nt,kt,Wt){var rr=kt.XF.data;if(!(!rr||!rr.patternType||!Wt||!Wt.cellStyles)){kt.s={},kt.s.patternType=rr.patternType;var ur;(ur=Rv(M(rr.icvFore)))&&(kt.s.fgColor={rgb:ur}),(ur=Rv(M(rr.icvBack)))&&(kt.s.bgColor={rgb:ur})}},B=function(nt,kt,Wt){if(!(U>1)&&!(Wt.sheetRows&&nt.r>=Wt.sheetRows)){if(Wt.cellStyles&&kt.XF&&kt.XF.data&&F(nt,kt,Wt),delete kt.ixfe,delete kt.XF,f=nt,h=en(nt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),nt.r<i.s.r&&(i.s.r=nt.r),nt.c<i.s.c&&(i.s.c=nt.c),nt.r+1>i.e.r&&(i.e.r=nt.r+1),nt.c+1>i.e.c&&(i.e.c=nt.c+1),Wt.cellFormula&&kt.f){for(var rr=0;rr<k.length;++rr)if(!(k[rr][0].s.c>nt.c||k[rr][0].s.r>nt.r)&&!(k[rr][0].e.c<nt.c||k[rr][0].e.r<nt.r)){kt.F=vn(k[rr][0]),(k[rr][0].s.c!=nt.c||k[rr][0].s.r!=nt.r)&&delete kt.f,kt.f&&(kt.f=""+co(k[rr][1],i,nt,I,V));break}}Wt.dense?(s[nt.r]||(s[nt.r]=[]),s[nt.r][nt.c]=kt):s[h]=kt}},V={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(V.password=t.password);var ee,ae=[],Z=[],te=[],L=[],K=!1,I=[];I.SheetNames=V.snames,I.sharedf=V.sharedf,I.arrayf=V.arrayf,I.names=[],I.XTI=[];var H=0,U=0,R=0,z=[],G=[],X;V.codepage=1200,ru(1200);for(var ne=!1;e.l<e.length-1;){var q=e.l,se=e.read_shift(2);if(se===0&&H===10)break;var ue=e.l===e.length?0:e.read_shift(2),me=Z8[se];if(me&&me.f){if(t.bookSheets&&H===133&&se!==133)break;if(H=se,me.r===2||me.r==12){var Ne=e.read_shift(2);if(ue-=2,!V.enc&&Ne!==se&&((Ne&255)<<8|Ne>>8)!==se)throw new Error("rt mismatch: "+Ne+"!="+se);me.r==12&&(e.l+=10,ue-=10)}var ce={};if(se===10?ce=me.f(e,ue,V):ce=Uwe(se,me,e,ue,V),U==0&&[9,521,1033,2057].indexOf(H)===-1)continue;switch(se){case 34:r.opts.Date1904=P.WBProps.date1904=ce;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(V.enc||(e.l=0),V.enc=ce,!t.password)throw new Error("File is password-protected");if(ce.valid==null)throw new Error("Encryption scheme unsupported");if(!ce.valid)throw new Error("Password is incorrect");break;case 92:V.lastuser=ce;break;case 66:var Ue=Number(ce);switch(Ue){case 21010:Ue=1200;break;case 32768:Ue=1e4;break;case 32769:Ue=1252;break}ru(V.codepage=Ue),ne=!0;break;case 317:V.rrtabid=ce;break;case 25:V.winlocked=ce;break;case 439:r.opts.RefreshAll=ce;break;case 12:r.opts.CalcCount=ce;break;case 16:r.opts.CalcDelta=ce;break;case 17:r.opts.CalcIter=ce;break;case 13:r.opts.CalcMode=ce;break;case 14:r.opts.CalcPrecision=ce;break;case 95:r.opts.CalcSaveRecalc=ce;break;case 15:V.CalcRefMode=ce;break;case 2211:r.opts.FullCalc=ce;break;case 129:ce.fDialog&&(s["!type"]="dialog"),ce.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ce.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:E.push(ce);break;case 430:I.push([ce]),I[I.length-1].XTI=[];break;case 35:case 547:I[I.length-1].push(ce);break;case 24:case 536:X={Name:ce.Name,Ref:co(ce.rgce,i,null,I,V)},ce.itab>0&&(X.Sheet=ce.itab-1),I.names.push(X),I[0]||(I[0]=[],I[0].XTI=[]),I[I.length-1].push(ce),ce.Name=="_xlnm._FilterDatabase"&&ce.itab>0&&ce.rgce&&ce.rgce[0]&&ce.rgce[0][0]&&ce.rgce[0][0][0]=="PtgArea3d"&&(G[ce.itab-1]={ref:vn(ce.rgce[0][0][1][2])});break;case 22:V.ExternCount=ce;break;case 23:I.length==0&&(I[0]=[],I[0].XTI=[]),I[I.length-1].XTI=I[I.length-1].XTI.concat(ce),I.XTI=I.XTI.concat(ce);break;case 2196:if(V.biff<8)break;X!=null&&(X.Comment=ce[1]);break;case 18:s["!protect"]=ce;break;case 19:ce!==0&&V.WTF&&console.error("Password verifier: "+ce);break;case 133:a[ce.pos]=ce,V.snames.push(ce.name);break;case 10:{if(--U)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=vn(i),t.sheetRows&&t.sheetRows<=i.e.r){var pe=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=vn(i),i.e.r=pe}i.e.r++,i.e.c++}ae.length>0&&(s["!merges"]=ae),Z.length>0&&(s["!objects"]=Z),te.length>0&&(s["!cols"]=te),L.length>0&&(s["!rows"]=L),P.Sheets.push(A)}u===""?d=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(V.biff===8&&(V.biff={9:2,521:3,1033:4}[se]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ce.BIFFVer]||8),V.biffguess=ce.BIFFVer==0,ce.BIFFVer==0&&ce.dt==4096&&(V.biff=5,ne=!0,ru(V.codepage=28591)),V.biff==8&&ce.BIFFVer==0&&ce.dt==16&&(V.biff=2),U++)break;if(s=t.dense?[]:{},V.biff<8&&!ne&&(ne=!0,ru(V.codepage=t.codepage||1252)),V.biff<5||ce.BIFFVer==0&&ce.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var je={pos:e.l-ue,name:u};a[je.pos]=je,V.snames.push(u)}else u=(a[q]||{name:""}).name;ce.dt==32&&(s["!type"]="chart"),ce.dt==64&&(s["!type"]="macro"),ae=[],Z=[],V.arrayf=k=[],te=[],L=[],K=!1,A={Hidden:(a[q]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ce.r]||[])[ce.c]:s[en({c:ce.c,r:ce.r})])&&++ce.c,b={ixfe:ce.ixfe,XF:E[ce.ixfe]||{},v:ce.val,t:"n"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B({c:ce.c,r:ce.r},b,t);break;case 5:case 517:b={ixfe:ce.ixfe,XF:E[ce.ixfe],v:ce.val,t:ce.t},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B({c:ce.c,r:ce.r},b,t);break;case 638:b={ixfe:ce.ixfe,XF:E[ce.ixfe],v:ce.rknum,t:"n"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B({c:ce.c,r:ce.r},b,t);break;case 189:for(var We=ce.c;We<=ce.C;++We){var Me=ce.rkrec[We-ce.c][0];b={ixfe:Me,XF:E[Me],v:ce.rkrec[We-ce.c][1],t:"n"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B({c:We,r:ce.r},b,t)}break;case 6:case 518:case 1030:{if(ce.val=="String"){o=ce;break}if(b=_b(ce.val,ce.cell.ixfe,ce.tt),b.XF=E[b.ixfe],t.cellFormula){var Nt=ce.formula;if(Nt&&Nt[0]&&Nt[0][0]&&Nt[0][0][0]=="PtgExp"){var $e=Nt[0][0][1][0],St=Nt[0][0][1][1],At=en({r:$e,c:St});T[At]?b.f=""+co(ce.formula,i,ce.cell,I,V):b.F=((t.dense?(s[$e]||[])[St]:s[At])||{}).F}else b.f=""+co(ce.formula,i,ce.cell,I,V)}R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B(ce.cell,b,t),o=ce}break;case 7:case 519:if(o)o.val=ce,b=_b(ce,o.cell.ixfe,"s"),b.XF=E[b.ixfe],t.cellFormula&&(b.f=""+co(o.formula,i,o.cell,I,V)),R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B(o.cell,b,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(ce);var Bt=en(ce[0].s);if(g=t.dense?(s[ce[0].s.r]||[])[ce[0].s.c]:s[Bt],t.cellFormula&&g){if(!o||!Bt||!g)break;g.f=""+co(ce[1],i,ce[0],I,V),g.F=vn(ce[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;T[en(o.cell)]=ce[0],g=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[en(o.cell)],(g||{}).f=""+co(ce[0],i,f,I,V)}}break;case 253:b=_b(c[ce.isst].t,ce.ixfe,"s"),c[ce.isst].h&&(b.h=c[ce.isst].h),b.XF=E[b.ixfe],R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B({c:ce.c,r:ce.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:ce.ixfe,XF:E[ce.ixfe],t:"z"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B({c:ce.c,r:ce.r},b,t));break;case 190:if(t.sheetStubs)for(var Gt=ce.c;Gt<=ce.C;++Gt){var or=ce.ixfe[Gt-ce.c];b={ixfe:or,XF:E[or],t:"z"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B({c:Gt,r:ce.r},b,t)}break;case 214:case 516:case 4:b=_b(ce.val,ce.ixfe,"s"),b.XF=E[b.ixfe],R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),B({c:ce.c,r:ce.r},b,t);break;case 0:case 512:U===1&&(i=ce);break;case 252:c=ce;break;case 1054:if(V.biff==4){z[R++]=ce[1];for(var yr=0;yr<R+163&&Qr[yr]!=ce[1];++yr);yr>=163&&t0(ce[1],R+163)}else t0(ce[1],ce[0]);break;case 30:{z[R++]=ce;for(var it=0;it<R+163&&Qr[it]!=ce;++it);it>=163&&t0(ce,R+163)}break;case 229:ae=ae.concat(ce);break;case 93:Z[ce.cmo[0]]=V.lastobj=ce;break;case 438:V.lastobj.TxO=ce;break;case 127:V.lastobj.ImData=ce;break;case 440:for(v=ce[0].s.r;v<=ce[0].e.r;++v)for(y=ce[0].s.c;y<=ce[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[en({c:y,r:v})],g&&(g.l=ce[1]);break;case 2048:for(v=ce[0].s.r;v<=ce[0].e.r;++v)for(y=ce[0].s.c;y<=ce[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[en({c:y,r:v})],g&&g.l&&(g.l.Tooltip=ce[1]);break;case 28:{if(V.biff<=5&&V.biff>=2)break;g=t.dense?(s[ce[0].r]||[])[ce[0].c]:s[en(ce[0])];var Ve=Z[ce[2]];g||(t.dense?(s[ce[0].r]||(s[ce[0].r]=[]),g=s[ce[0].r][ce[0].c]={t:"z"}):g=s[en(ce[0])]={t:"z"},i.e.r=Math.max(i.e.r,ce[0].r),i.s.r=Math.min(i.s.r,ce[0].r),i.e.c=Math.max(i.e.c,ce[0].c),i.s.c=Math.min(i.s.c,ce[0].c)),g.c||(g.c=[]),x={a:ce[1],t:Ve.TxO.t},g.c.push(x)}break;case 2173:j1e(E[ce.ixfe],ce.ext);break;case 125:{if(!V.cellStyles)break;for(;ce.e>=ce.s;)te[ce.e--]={width:ce.w/256,level:ce.level||0,hidden:!!(ce.flags&1)},K||(K=!0,TN(ce.w/256)),Vf(te[ce.e+1])}break;case 520:{var at={};ce.level!=null&&(L[ce.r]=at,at.level=ce.level),ce.hidden&&(L[ce.r]=at,at.hidden=!0),ce.hpt&&(L[ce.r]=at,at.hpt=ce.hpt,at.hpx=Xp(ce.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||gm(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[se]]=ce;break;case 161:s["!margins"]||gm(s["!margins"]={}),s["!margins"].header=ce.header,s["!margins"].footer=ce.footer;break;case 574:ce.RTL&&(P.Views[0].RTL=!0);break;case 146:j=ce;break;case 2198:ee=ce;break;case 140:C=ce;break;case 442:u?A.CodeName=ce||A.name:P.WBProps.CodeName=ce||"ThisWorkbook";break}}else me||console.error("Missing Info for XLS Record 0x"+se.toString(16)),e.l+=ue}return r.SheetNames=ga(a).sort(function(pt,nt){return Number(pt)-Number(nt)}).map(function(pt){return a[pt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&G.forEach(function(pt,nt){r.Sheets[r.SheetNames[nt]]["!autofilter"]=pt}),r.Strings=c,r.SSF=Fs(Qr),V.enc&&(r.Encryption=V.enc),ee&&(r.Themes=ee),r.Metadata={},C!==void 0&&(r.Metadata.Country=C),I.names.length>0&&(P.Names=I.names),r.Workbook=P,r}var av={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Hwe(e,t,r){var n=Wr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=VD(n,V8,av.DSI);for(var a in s)t[a]=s[a]}catch(u){if(r.WTF)throw u}var i=Wr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=VD(i,q8,av.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(mG(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Gwe(e,t){var r=[],n=[],s=[],a=0,i,o=_D(V8,"n"),c=_D(q8,"n");if(e.Props)for(i=ga(e.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],e.Props[i[a]]]);if(e.Custprops)for(i=ga(e.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],e.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)bG.indexOf(s[a][0])>-1||hG.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&Wr.utils.cfb_add(t,"/SummaryInformation",qD(n,av.SI,c,q8)),(r.length||u.length)&&Wr.utils.cfb_add(t,"/DocumentSummaryInformation",qD(r,av.DSI,o,V8,u.length?u:null,av.UDI))}function pV(e,t){t||(t={}),DN(t),tN(),t.codepage&&eN(t.codepage);var r,n;if(e.FullPaths){if(Wr.find(e,"/encryption"))throw new Error("File is password-protected");r=Wr.find(e,"!CompObj"),n=Wr.find(e,"/Workbook")||Wr.find(e,"/Book")}else{switch(t.type){case"base64":e=Fl(Bl(e));break;case"binary":e=Fl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Hi(e,0),n={content:e}}var s,a;if(r&&$we(r),t.bookProps&&!t.bookSheets)s={};else{var i=kn?"buffer":"array";if(n&&n.content)s=Wwe(n.content,t);else if((a=Wr.find(e,"PerfectOffice_MAIN"))&&a.content)s=mm.to_workbook(a.content,(t.type=i,t));else if((a=Wr.find(e,"NativeContent_MAIN"))&&a.content)s=mm.to_workbook(a.content,(t.type=i,t));else throw(a=Wr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Wr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=sxe(e))}var o={};return e.FullPaths&&Hwe(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function Vwe(e,t){var r=t||{},n=Wr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Wr.utils.cfb_add(n,s,xV(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Gwe(e,n),r.biff==8&&e.vbaraw&&axe(n,Wr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var $v={0:{f:pve},1:{f:kve},2:{f:Wve},3:{f:Mve},4:{f:Eve},5:{f:$ve},6:{f:Kve},7:{f:Rve},8:{f:t2e},9:{f:e2e},10:{f:Qve},11:{f:Zve},12:{f:Cve},13:{f:Gve},14:{f:Dve},15:{f:jve},16:{f:lV},17:{f:Xve},18:{f:Lve},19:{f:gN},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:X2e},40:{},42:{},43:{f:Kpe},44:{f:Vpe},45:{f:Jpe},46:{f:Zpe},47:{f:Qpe},48:{},49:{f:vhe},50:{},51:{f:F1e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:MG},62:{f:qve},63:{f:U1e},64:{f:x2e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:vo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:h2e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:_ve},148:{f:vve,p:16},151:{f:o2e},152:{},153:{f:q2e},154:{},155:{},156:{f:G2e},157:{},158:{},159:{T:1,f:cpe},160:{T:-1},161:{T:1,f:tg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:r2e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:P1e},336:{T:-1},337:{f:R1e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:G8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:PG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:l2e},427:{f:c2e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:d2e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:bve},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:a2e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:G8},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Z1e},633:{T:1},634:{T:-1},635:{T:1,f:J1e},636:{T:-1},637:{f:She},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:D2e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:y2e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Z8={6:{f:G5},10:{f:yf},12:{f:Ba},13:{f:Ba},14:{f:ka},15:{f:ka},16:{f:ho},17:{f:ka},18:{f:ka},19:{f:Ba},20:{f:ZD},21:{f:ZD},23:{f:PG},24:{f:tO},25:{f:ka},26:{},27:{},28:{f:yge},29:{},34:{f:ka},35:{f:eO},38:{f:ho},39:{f:ho},40:{f:ho},41:{f:ho},42:{f:ka},43:{f:ka},47:{f:jpe},49:{f:Gme},51:{f:Ba},60:{},61:{f:$me},64:{f:ka},65:{f:Hme},66:{f:Ba},77:{},80:{},81:{},82:{},85:{f:Ba},89:{},90:{},91:{},92:{f:Ame},93:{f:bge},94:{},95:{f:ka},96:{},97:{},99:{f:ka},125:{f:MG},128:{f:ige},129:{f:Pme},130:{f:Ba},131:{f:ka},132:{f:ka},133:{f:Mme},134:{},140:{f:Age},141:{f:Ba},144:{},146:{f:Mge},151:{},152:{},153:{},154:{},155:{},156:{f:Ba},157:{},158:{},160:{f:Bge},161:{f:Oge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:rge},190:{f:nge},193:{f:yf},197:{},198:{},199:{},200:{},201:{},202:{f:ka},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ba},220:{},221:{f:ka},222:{},224:{f:age},225:{f:Eme},226:{f:yf},227:{},229:{f:vge},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Dme},253:{f:qme},255:{f:Rme},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:_G},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ka},353:{f:yf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:dge},431:{f:ka},432:{},433:{},434:{},437:{},438:{f:kge},439:{f:ka},440:{f:Tge},441:{},442:{f:C2},443:{},444:{f:Ba},445:{},446:{},448:{f:yf},449:{f:Bme,r:2},450:{f:yf},512:{f:XD},513:{f:Lge},515:{f:cge},516:{f:Yme},517:{f:QD},519:{f:$ge},520:{f:Ime},523:{},545:{f:rO},549:{f:YD},566:{},574:{f:Ume},638:{f:tge},659:{},1048:{},1054:{f:Jme},1084:{},1212:{f:gge},2048:{f:Nge},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:vb},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:yf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Fge,r:12},2173:{f:A1e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ka,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:mge,r:12},2197:{},2198:{f:S1e,r:12},2199:{},2200:{},2201:{},2202:{f:pge,r:12},2203:{f:yf},2204:{},2205:{},2206:{},2207:{},2211:{f:Lme},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ba},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Rge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Pge},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:XD},1:{},2:{f:Gge},3:{f:Wge},4:{f:Uge},5:{f:QD},7:{f:qge},8:{},9:{f:vb},11:{},22:{f:Ba},30:{f:Zme},31:{},32:{},33:{f:rO},36:{},37:{f:YD},50:{f:Kge},62:{},52:{},67:{},68:{f:Ba},69:{},86:{},126:{},127:{f:zge},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Yge},223:{},234:{},354:{},421:{},518:{f:G5},521:{f:vb},536:{f:tO},547:{f:eO},561:{},579:{},1030:{f:G5},1033:{f:vb},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function fr(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&fN(r)&&e.push(r)}}function qwe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return fr(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function j2(e,t,r){return e||(e=Rt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Kwe(e,t,r,n){var s=Rt(9);return j2(s,e,t),SG(r,n||"b",s),s}function Ywe(e,t,r){var n=Rt(8+2*r.length);return j2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Xwe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?si(Ms(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?fr(e,2,Vge(r,n,s)):fr(e,3,Hge(r,n,s));return;case"b":case"e":fr(e,5,Kwe(r,n,t.v,t.t));return;case"s":case"str":fr(e,4,Ywe(r,n,(t.v||"").slice(0,255)));return}fr(e,1,j2(null,r,n))}function Jwe(e,t,r,n){var s=Array.isArray(t),a=Ln(t["!ref"]||"A1"),i,o="",c=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=vn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=ja(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(c[d]=Zs(d)),i=c[d]+o;var f=s?(t[u]||[])[d]:t[i];f&&Xwe(e,f,u,d)}}}function Qwe(e,t){for(var r=t||{},n=dl(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return fr(n,r.biff==4?1033:r.biff==3?521:9,_N(e,16,r)),Jwe(n,e.Sheets[e.SheetNames[s]],s,r),fr(n,10),n.end()}function Zwe(e,t,r){fr(e,49,Vme({sz:12,name:"Arial"},r))}function ebe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&fr(e,1054,Qme(s,t[s],r))})}function tbe(e,t){var r=Rt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),fr(e,2151,r),r=Rt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),EG(Ln(t["!ref"]||"A1"),r),r.write_shift(4,4),fr(e,2152,r)}function rbe(e,t){for(var r=0;r<16;++r)fr(e,224,JD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){fr(e,224,JD(n,0,t))})}function nbe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];fr(e,440,Cge(n)),n[1].Tooltip&&fr(e,2048,Ege(n))}delete t["!links"]}function sbe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&fr(e,125,Dge(x3(s,n),s))})}}function abe(e,t,r,n,s){var a=16+ih(s.cellXfs,t,s);if(t.v==null&&!t.bf){fr(e,513,Lm(r,n,a));return}if(t.bf)fr(e,6,Pye(t,r,n,s,a));else switch(t.t){case"d":case"n":var i=t.t=="d"?si(Ms(t.v)):t.v;fr(e,515,uge(r,n,i,a));break;case"b":case"e":fr(e,517,lge(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var o=jN(s.Strings,t.v,s.revStrings);fr(e,253,Kme(r,n,o,a))}else fr(e,516,Xme(r,n,(t.v||"").slice(0,255),a,s));break;default:fr(e,513,Lm(r,n,a))}}function ibe(e,t,r){var n=dl(),s=r.SheetNames[e],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(a),u=t.biff==8,d,f="",h=[],g=Ln(a["!ref"]||"A1"),x=u?65536:16384;if(g.e.c>255||g.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,x-1)}fr(n,2057,_N(r,16,t)),fr(n,13,dc(1)),fr(n,12,dc(100)),fr(n,15,Oo(!0)),fr(n,17,Oo(!1)),fr(n,16,Rm(.001)),fr(n,95,Oo(!0)),fr(n,42,Oo(!1)),fr(n,43,Oo(!1)),fr(n,130,dc(1)),fr(n,128,oge()),fr(n,131,Oo(!1)),fr(n,132,Oo(!1)),u&&sbe(n,a["!cols"]),fr(n,512,ege(g,t)),u&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){f=ja(y);for(var v=g.s.c;v<=g.e.c;++v){y===g.s.r&&(h[v]=Zs(v)),d=h[v]+f;var T=c?(a[y]||[])[v]:a[d];T&&(abe(n,T,y,v,t),u&&T.l&&a["!links"].push([d,T.l]))}}var k=o.CodeName||o.name||s;return u&&fr(n,574,Wme((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&fr(n,229,wge(a["!merges"])),u&&nbe(n,a),fr(n,442,kG(k)),u&&tbe(n,a),fr(n,10),n.end()}function obe(e,t,r){var n=dl(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,c=r.biff==5;if(fr(n,2057,_N(e,5,r)),r.bookType=="xla"&&fr(n,135),fr(n,225,o?dc(1200):null),fr(n,193,lme(2)),c&&fr(n,191),c&&fr(n,192),fr(n,226),fr(n,92,jme("SheetJS",r)),fr(n,66,dc(o?1200:1252)),o&&fr(n,353,dc(0)),o&&fr(n,448),fr(n,317,Ige(e.SheetNames.length)),o&&e.vbaraw&&fr(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";fr(n,442,kG(u))}fr(n,156,dc(17)),fr(n,25,Oo(!1)),fr(n,18,Oo(!1)),fr(n,19,dc(0)),o&&fr(n,431,Oo(!1)),o&&fr(n,444,dc(0)),fr(n,61,zme()),fr(n,64,Oo(!1)),fr(n,141,dc(0)),fr(n,34,Oo(B2e(e)=="true")),fr(n,14,Oo(!0)),o&&fr(n,439,Oo(!1)),fr(n,218,dc(0)),Zwe(n,e,r),ebe(n,e.SSF,r),rbe(n,r),o&&fr(n,352,Oo(!1));var d=n.end(),f=dl();o&&fr(f,140,jge()),o&&r.Strings&&qwe(f,252,Ome(r.Strings)),fr(f,10);var h=f.end(),g=dl(),x=0,y=0;for(y=0;y<e.SheetNames.length;++y)x+=(o?12:11)+(o?2:1)*e.SheetNames[y].length;var v=d.length+x+h.length;for(y=0;y<e.SheetNames.length;++y){var T=a[y]||{};fr(g,133,Fme({pos:v,hs:T.Hidden||0,dt:0,name:e.SheetNames[y]},r)),v+=t[y].length}var k=g.end();if(x!=k.length)throw new Error("BS8 "+x+" != "+k.length);var b=[];return d.length&&b.push(d),k.length&&b.push(k),h.length&&b.push(h),bi(b)}function lbe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Fs(Qr)),e&&e.SSF&&(T1(),u3(e.SSF),r.revssf=f3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,ON(r),r.cellXfs=[],ih(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=ibe(s,r,e);return n.unshift(obe(e,n,r)),bi(n)}function xV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=fl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return lbe(e,t);case 4:case 3:case 2:return Qwe(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function fO(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,c=Vfe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<c.length;++i){var y=c[i].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var T=y.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var k=T[o].trim();if(k.match(/<t[dh]/i)){for(var b=k,C=0;b.charAt(0)=="<"&&(C=b.indexOf(">"))>-1;)b=b.slice(C+1);for(var E=0;E<x.length;++E){var j=x[E];j.s.c==d&&j.s.r<u&&u<=j.e.r&&(d=j.e.c+1,E=-1)}var P=nn(k.slice(0,k.indexOf(">")));h=P.colspan?+P.colspan:1,((f=+P.rowspan)>1||h>1)&&x.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var A=P.t||P["data-t"]||"";if(!b.length){d+=h;continue}if(b=zH(b),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!b.length){d+=h;continue}var M={t:"s",v:b};r.raw||!b.trim().length||A=="s"||(b==="TRUE"?M={t:"b",v:!0}:b==="FALSE"?M={t:"b",v:!1}:isNaN(au(b))?isNaN(Kp(b).getDate())||(M={t:"d",v:Ms(b)},r.cellDates||(M={t:"n",v:si(M.v)}),M.z=r.dateNF||Qr[14]):M={t:"n",v:au(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=M):n[en({r:u,c:d})]=M,d+=h}}}}return n["!ref"]=vn(g),x.length&&(n["!merges"]=x),n}function cbe(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=en({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||cN(f.w||(f0(f),f.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(g["data-t"]=f&&f.t||"z",f.v!=null&&(g["data-v"]=f.v),f.z!=null&&(g["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),g.id=(n.id||"sjs")+"-"+d,a.push(dr("td",h,g))}}var x="<tr>";return x+a.join("")+"</tr>"}var ube='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',dbe="</body></html>";function fbe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return ah(fO(r[0],t),t);var n=LN();return r.forEach(function(s,a){BN(n,fO(s,t),"Sheet"+(a+1))}),n}function hbe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function yV(e,t){var r=t||{},n=r.header!=null?r.header:ube,s=r.footer!=null?r.footer:dbe,a=[n],i=fl(e["!ref"]);r.dense=Array.isArray(e),a.push(hbe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(cbe(e,i,o,r));return a.push("</table>"+s),a.join("")}function vV(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?ea(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=fl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],h=0,g=e["!rows"]||(e["!rows"]=[]),x=0,y=0,v=0,T=0,k=0,b=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&y<c;++x){var C=o[x];if(hO(C)){if(n.display)continue;g[y]={hidden:!0}}var E=C.children;for(v=T=0;v<E.length;++v){var j=E[v];if(!(n.display&&hO(j))){var P=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):zH(j.innerHTML),A=j.getAttribute("data-z")||j.getAttribute("z");for(h=0;h<f.length;++h){var M=f[h];M.s.c==T+a&&M.s.r<y+s&&y+s<=M.e.r&&(T=M.e.c+1-a,h=-1)}b=+j.getAttribute("colspan")||1,((k=+j.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:y+s,c:T+a},e:{r:y+s+(k||1)-1,c:T+a+(b||1)-1}});var F={t:"s",v:P},B=j.getAttribute("data-t")||j.getAttribute("t")||"";P!=null&&(P.length==0?F.t=B||"z":n.raw||P.trim().length==0||B=="s"||(P==="TRUE"?F={t:"b",v:!0}:P==="FALSE"?F={t:"b",v:!1}:isNaN(au(P))?isNaN(Kp(P).getDate())||(F={t:"d",v:Ms(P)},n.cellDates||(F={t:"n",v:si(F.v)}),F.z=n.dateNF||Qr[14]):F={t:"n",v:au(P)})),F.z===void 0&&A!=null&&(F.z=A);var V="",ee=j.getElementsByTagName("A");if(ee&&ee.length)for(var ae=0;ae<ee.length&&!(ee[ae].hasAttribute("href")&&(V=ee[ae].getAttribute("href"),V.charAt(0)!="#"));++ae);V&&V.charAt(0)!="#"&&(F.l={Target:V}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][T+a]=F):e[en({c:T+a,r:y+s})]=F,u.e.c<T+a&&(u.e.c=T+a),T+=b}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=vn(u),y>=c&&(e["!fullref"]=vn((u.e.r=o.length-x+y-1+s,u))),e}function wV(e,t){var r=t||{},n=r.dense?[]:{};return vV(n,e,t)}function mbe(e,t){return ah(wV(e,t),t)}function hO(e){var t="",r=gbe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function gbe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function pbe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Rn(t.replace(/<[^>]*>/g,""));return[r]}var mO={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function bV(e,t){var r=t||{},n=uN(e),s=[],a,i,o={name:""},c="",u=0,d,f,h={},g=[],x=r.dense?[]:{},y,v,T={value:""},k="",b=0,C=[],E=-1,j=-1,P={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,M={},F=[],B={},V=0,ee=0,ae=[],Z=1,te=1,L=[],K={Names:[]},I={},H=["",""],U=[],R={},z="",G=0,X=!1,ne=!1,q=0;for(Dv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Dv.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(P.e.c>=P.s.c&&P.e.r>=P.s.r?x["!ref"]=vn(P):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=P.e.r&&(x["!fullref"]=x["!ref"],P.e.r=r.sheetRows-1,x["!ref"]=vn(P)),F.length&&(x["!merges"]=F),ae.length&&(x["!rows"]=ae),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),h[d.name]=x,ne=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=nn(y[0],!1),E=j=-1,P.s.r=P.s.c=1e7,P.e.r=P.e.c=0,x=r.dense?[]:{},F=[],ae=[],ne=!0);break;case"table-row-group":y[1]==="/"?--A:++A;break;case"table-row":case"":if(y[1]==="/"){E+=Z,Z=1;break}if(f=nn(y[0],!1),f.?E=f.-1:E==-1&&(E=0),Z=+f["number-rows-repeated"]||1,Z<10)for(q=0;q<Z;++q)A>0&&(ae[E+q]={level:A});j=-1;break;case"covered-table-cell":y[1]!=="/"&&++j,r.sheetStubs&&(r.dense?(x[E]||(x[E]=[]),x[E][j]={t:"z"}):x[en({r:E,c:j})]={t:"z"}),k="",C=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++j,T=nn(y[0],!1),te=parseInt(T["number-columns-repeated"]||"1",10),v={t:"z",v:null},T.formula&&r.cellFormula!=!1&&(v.f=cO(Rn(T.formula))),(T.||T["value-type"])=="string"&&(v.t="s",v.v=Rn(T["string-value"]||""),r.dense?(x[E]||(x[E]=[]),x[E][j]=v):x[en({r:E,c:j})]=v),j+=te-1;else if(y[1]!=="/"){++j,k="",b=0,C=[],te=1;var se=Z?E+Z-1:E;if(j>P.e.c&&(P.e.c=j),j<P.s.c&&(P.s.c=j),E<P.s.r&&(P.s.r=E),se>P.e.r&&(P.e.r=se),T=nn(y[0],!1),U=[],R={},v={t:T.||T["value-type"],v:null},r.cellFormula)if(T.formula&&(T.formula=Rn(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(V=parseInt(T["number-matrix-rows-spanned"],10)||0,ee=parseInt(T["number-matrix-columns-spanned"],10)||0,B={s:{r:E,c:j},e:{r:E+V-1,c:j+ee-1}},v.F=vn(B),L.push([B,v.F])),T.formula)v.f=cO(T.formula);else for(q=0;q<L.length;++q)E>=L[q][0].s.r&&E<=L[q][0].e.r&&j>=L[q][0].s.c&&j<=L[q][0].e.c&&(v.F=L[q][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(V=parseInt(T["number-rows-spanned"],10)||0,ee=parseInt(T["number-columns-spanned"],10)||0,B={s:{r:E,c:j},e:{r:E+V-1,c:j+ee-1}},F.push(B)),T["number-columns-repeated"]&&(te=parseInt(T["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=As(T["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(T.value);break;case"percentage":v.t="n",v.v=parseFloat(T.value);break;case"currency":v.t="n",v.v=parseFloat(T.value);break;case"date":v.t="d",v.v=Ms(T["date-value"]),r.cellDates||(v.t="n",v.v=si(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=Wfe(T["time-value"])/86400,r.cellDates&&(v.t="d",v.v=h3(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(T.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",T["string-value"]!=null&&(k=Rn(T["string-value"]),C=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(X=!1,v.t==="s"&&(v.v=k||"",C.length&&(v.R=C),X=b==0),I.Target&&(v.l=I),U.length>0&&(v.c=U,U=[]),k&&r.cellText!==!1&&(v.w=k),X&&(v.t="z",delete v.v),(!X||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=E))for(var ue=0;ue<Z;++ue){if(te=parseInt(T["number-columns-repeated"]||"1",10),r.dense)for(x[E+ue]||(x[E+ue]=[]),x[E+ue][j]=ue==0?v:Fs(v);--te>0;)x[E+ue][j+te]=Fs(v);else for(x[en({r:E+ue,c:j})]=v;--te>0;)x[en({r:E+ue,c:j+te})]=Fs(v);P.e.c<=j&&(P.e.c=j)}te=parseInt(T["number-columns-repeated"]||"1",10),j+=te-1,te=0,v={},k="",C=[]}I={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;R.t=k,C.length&&(R.R=C),R.a=z,U.push(R)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);z="",G=0,k="",b=0,C=[];break;case"creator":y[1]==="/"?z=n.slice(G,y.index):G=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",b=0,C=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(M[o.name]=c,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(c="",o=nn(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=nn(y[0],!1),c+=mO[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=nn(y[0],!1),c+=mO[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=nn(y[0],!1),H=V5(i["cell-range-address"]);var me={Name:i.name,Ref:H[0]+"!"+H[1]};ne&&(me.Sheet=g.length),K.Names.push(me);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!T||!T["string-value"])){var Ne=pbe(n.slice(b,y.index));k=(k.length>0?k+`
`:"")+Ne[0]}else nn(y[0],!1),b=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{H=V5(nn(y[0])["target-range-address"]),h[H[0]]["!autofilter"]={ref:H[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(I=nn(y[0],!1),!I.href)break;I.Target=Rn(I.href),delete I.href,I.Target.charAt(0)=="#"&&I.Target.indexOf(".")>-1?(H=V5(I.Target.slice(1)),I.Target="#"+H[0]+"!"+H[1]):I.Target.match(/^\.\.[\\\/]/)&&(I.Target=I.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var ce={Sheets:h,SheetNames:g,Workbook:K};return r.bookSheets&&delete ce.Sheets,ce}function gO(e,t){t=t||{},uc(e,"META-INF/manifest.xml")&&Whe(La(e,"META-INF/manifest.xml"),t);var r=Dl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=bV(ms(r),t);return uc(e,"meta.xml")&&(n.Props=dG(La(e,"meta.xml"))),n}function pO(e,t){return bV(e,t)}var xbe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Fv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ma+t}})(),xO=(function(){var e=function(a){return is(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var c=[];c.push('      <table:table table:name="'+is(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=fl(a["!ref"]||"A1"),h=a["!merges"]||[],g=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=f.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+y+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var T=!1,k={},b="";for(g=0;g!=h.length;++g)if(!(h[g].s.c>d)&&!(h[g].s.r>u)&&!(h[g].e.c<d)&&!(h[g].e.r<u)){(h[g].s.c!=d||h[g].s.r!=u)&&(T=!0),k["table:number-columns-spanned"]=h[g].e.c-h[g].s.c+1,k["table:number-rows-spanned"]=h[g].e.r-h[g].s.r+1;break}if(T){c.push(r);continue}var C=en({r:u,c:d}),E=x?(a[u]||[])[d]:a[C];if(E&&E.f&&(k["table:formula"]=is(Iye(E.f)),E.F&&E.F.slice(0,C.length)==C)){var j=fl(E.F);k["table:number-matrix-columns-spanned"]=j.e.c-j.s.c+1,k["table:number-matrix-rows-spanned"]=j.e.r-j.s.r+1}if(!E){c.push(t);continue}switch(E.t){case"b":b=E.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=E.v?"true":"false";break;case"n":b=E.w||String(E.v||0),k["office:value-type"]="float",k["office:value"]=E.v||0;break;case"s":case"str":b=E.v==null?"":E.v,k["office:value-type"]="string";break;case"d":b=E.w||Ms(E.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=Ms(E.v).toISOString(),k["table:style-name"]="ce1";break;default:c.push(t);continue}var P=e(b);if(E.l&&E.l.Target){var A=E.l.Target;A=A.charAt(0)=="#"?"#"+Lye(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),P=dr("text:a",P,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+dr("table:table-cell",dr("text:p",P,{}),k)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Vf(f),f.ods=o;var h=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++c}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Ma],u=Fv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Fv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(uG().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function _V(e,t){if(t.bookType=="fods")return xO(e,t);var r=iN(),n="",s=[],a=[];return n="mimetype",wn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",wn(r,n,xO(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",wn(r,n,xbe(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",wn(r,n,Ma+uG()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",wn(r,n,Vhe(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",wn(r,n,Hhe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Bm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function eT(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ms(sh(e))}function ybe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Fl(Hu(e))}function vbe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Kf(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function yO(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function wbe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function bbe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function zv(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ts(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ma(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function $n(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=zv(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=zv(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Bi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(ts(n*8+s.type)),s.type==2&&t.push(ts(s.data.length)),t.push(s.data))})}),Kf(t)}function FN(e,t){return e?.map(function(r){return t(r.data)})||[]}function ic(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=zv(e,n),a=$n(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:ma(a[1][0].data),messages:[]};a[2].forEach(function(o){var c=$n(o.data),u=ma(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(i.merge=ma(a[3][0].data)>>>0>0),r.push(i)}return r}function np(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ts(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ts(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:ts(i.data.length)}],n[2].push({data:Bi(i.meta),type:2})});var a=Bi(n);t.push(ts(a.length)),t.push(a),s.forEach(function(i){return t.push(i)})}),Kf(t)}function _be(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=zv(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Kf(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var d=Kf(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function oc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(_be(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Kf(t)}function sp(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=ts(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Kf(t)}function Sbe(e,t,r,n){var s=Bm(e),a=s.getUint32(4,!0),i=(n>1?12:8)+yO(a&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=yO(a&(n>1?12288:4096))*4,a&16&&(c=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function kbe(e,t,r){var n=Bm(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(c=wbe(e,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function K5(e,t){var r=new Uint8Array(32),n=Bm(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,bbe(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function Y5(e,t){var r=new Uint8Array(32),n=Bm(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function Tbe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Sbe(e,t,r,e[0]);case 5:return kbe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function lo(e){var t=$n(e);return zv(t[1][0].data)}function vO(e,t){var r=$n(t.data),n=ma(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=$n(i.data),c=ma(o[1][0].data)>>>0;switch(n){case 1:a[c]=eT(o[3][0].data);break;case 8:{var u=e[lo(o[9][0].data)][0],d=$n(u.data),f=e[lo(d[1][0].data)][0],h=ma(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var g=$n(f.data);a[c]=g[3].map(function(x){return eT(x.data)}).join("")}break}}),a}function Cbe(e,t){var r,n,s,a,i,o,c,u,d,f,h,g,x,y,v=$n(e),T=ma(v[1][0].data)>>>0,k=ma(v[2][0].data)>>>0,b=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&ma(v[8][0].data)>0||!1,C,E;if((a=(s=v[7])==null?void 0:s[0])!=null&&a.data&&t!=0)C=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,E=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)C=(g=(h=v[4])==null?void 0:h[0])==null?void 0:g.data,E=(y=(x=v[3])==null?void 0:x[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var j=b?4:1,P=Bm(C),A=[],M=0;M<C.length/2;++M){var F=P.getUint16(M*2,!0);F<65535&&A.push([M,F])}if(A.length!=k)throw"Expected ".concat(k," cells, found ").concat(A.length);var B=[];for(M=0;M<A.length-1;++M)B[A[M][0]]=E.subarray(A[M][1]*j,A[M+1][1]*j);return A.length>=1&&(B[A[A.length-1][0]]=E.subarray(A[A.length-1][1]*j)),{R:T,cells:B}}function Nbe(e,t){var r,n=$n(t.data),s=(r=n?.[7])!=null&&r[0]?ma(n[7][0].data)>>>0>0?1:0:-1,a=FN(n[5],function(i){return Cbe(i,s)});return{nrows:ma(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function Ebe(e,t,r){var n,s=$n(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ma(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(ma(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=vn(a);var i=$n(s[4][0].data),o=vO(e,e[lo(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?vO(e,e[lo(i[17][0].data)][0]):[],u=$n(i[3][0].data),d=0;u[1].forEach(function(f){var h=$n(f.data),g=e[lo(h[2][0].data)][0],x=ma(g.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var y=Nbe(e,g);y.data.forEach(function(v,T){v.forEach(function(k,b){var C=en({r:d+T,c:b}),E=Tbe(k,o,c);E&&(r[C]=E)})}),d+=y.nrows})}function Abe(e,t){var r=$n(t.data),n={"!ref":"A1"},s=e[lo(r[2][0].data)],a=ma(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return Ebe(e,s[0],n),n}function jbe(e,t){var r,n=$n(t.data),s={name:(r=n[1])!=null&&r[0]?eT(n[1][0].data):"",sheets:[]},a=FN(n[2],lo);return a.forEach(function(i){e[i].forEach(function(o){var c=ma(o.meta[1][0].data);c==6e3&&s.sheets.push(Abe(e,o))})}),s}function Pbe(e,t){var r=LN(),n=$n(t.data),s=FN(n[1],lo);if(s.forEach(function(a){e[a].forEach(function(i){var o=ma(i.meta[1][0].data);if(o==2){var c=jbe(e,i);c.sheets.forEach(function(u,d){BN(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function X5(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=oc(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=ic(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ma(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(c){a[c].forEach(function(u){var d=ma(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Pbe(a,o)}function Mbe(e,t,r){var n,s,a,i;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=e[8])==null?void 0:a[0])==null?void 0:i.data)&&ma(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=Bm(e[7][0].data),d=0,f=[],h=Bm(e[4][0].data),g=0,x=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),h.setUint16(y*2,g,!0);var v,T;switch(typeof t[y]){case"string":v=K5({t:"s",v:t[y]},r),T=Y5({t:"s",v:t[y]},r);break;case"number":v=K5({t:"n",v:t[y]},r),T=Y5({t:"n",v:t[y]},r);break;case"boolean":v=K5({t:"b",v:t[y]},r),T=Y5({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}f.push(v),d+=v.length,x.push(T),g+=T.length,++c}for(e[2][0].data=ts(c);y<e[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535,!0);return e[6][0].data=Kf(f),e[3][0].data=Kf(x),c}function Fbe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=fl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(vn(n)));var a=K4(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(z){return z.forEach(function(G){typeof G=="string"&&i.push(G)})});var o={},c=[],u=Wr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(z,G){return[z,u.FullPaths[G]]}).forEach(function(z){var G=z[0],X=z[1];if(G.type==2&&G.name.match(/\.iwa/)){var ne=G.content,q=oc(ne),se=ic(q);se.forEach(function(ue){c.push(ue.id),o[ue.id]={deps:[],location:X,type:ma(ue.messages[0].meta[1][0].data)}})}}),c.sort(function(z,G){return z-G});var d=c.filter(function(z){return z>1}).map(function(z){return[z,ts(z)]});u.FileIndex.map(function(z,G){return[z,u.FullPaths[G]]}).forEach(function(z){var G=z[0];if(z[1],!!G.name.match(/\.iwa/)){var X=ic(oc(G.content));X.forEach(function(ne){ne.messages.forEach(function(q){d.forEach(function(se){ne.messages.some(function(ue){return ma(ue.meta[1][0].data)!=11006&&vbe(ue.data,se[1])})&&o[se[0]].deps.push(ne.id)})})})}});for(var f=Wr.find(u,o[1].location),h=ic(oc(f.content)),g,x=0;x<h.length;++x){var y=h[x];y.id==1&&(g=y)}var v=lo($n(g.messages[0].data)[1][0].data);for(f=Wr.find(u,o[v].location),h=ic(oc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);for(v=lo($n(g.messages[0].data)[2][0].data),f=Wr.find(u,o[v].location),h=ic(oc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);for(v=lo($n(g.messages[0].data)[2][0].data),f=Wr.find(u,o[v].location),h=ic(oc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);var T=$n(g.messages[0].data);{T[6][0].data=ts(n.e.r+1),T[7][0].data=ts(n.e.c+1);var k=lo(T[46][0].data),b=Wr.find(u,o[k].location),C=ic(oc(b.content));{for(var E=0;E<C.length&&C[E].id!=k;++E);if(C[E].id!=k)throw"Bad ColumnRowUIDMapArchive";var j=$n(C[E].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var P=0;P<=n.e.c;++P){var A=[];A[1]=A[2]=[{type:0,data:ts(P+420690)}],j[1].push({type:2,data:Bi(A)}),j[2].push({type:0,data:ts(P)}),j[3].push({type:0,data:ts(P)})}j[4]=[],j[5]=[],j[6]=[];for(var M=0;M<=n.e.r;++M)A=[],A[1]=A[2]=[{type:0,data:ts(M+726270)}],j[4].push({type:2,data:Bi(A)}),j[5].push({type:0,data:ts(M)}),j[6].push({type:0,data:ts(M)});C[E].messages[0].data=Bi(j)}b.content=sp(np(C)),b.size=b.content.length,delete T[46];var F=$n(T[4][0].data);{F[7][0].data=ts(n.e.r+1);var B=$n(F[1][0].data),V=lo(B[2][0].data);b=Wr.find(u,o[V].location),C=ic(oc(b.content));{if(C[0].id!=V)throw"Bad HeaderStorageBucket";var ee=$n(C[0].messages[0].data);for(M=0;M<a.length;++M){var ae=$n(ee[2][0].data);ae[1][0].data=ts(M),ae[4][0].data=ts(a[M].length),ee[2][M]={type:ee[2][0].type,data:Bi(ae)}}C[0].messages[0].data=Bi(ee)}b.content=sp(np(C)),b.size=b.content.length;var Z=lo(F[2][0].data);b=Wr.find(u,o[Z].location),C=ic(oc(b.content));{if(C[0].id!=Z)throw"Bad HeaderStorageBucket";for(ee=$n(C[0].messages[0].data),P=0;P<=n.e.c;++P)ae=$n(ee[2][0].data),ae[1][0].data=ts(P),ae[4][0].data=ts(n.e.r+1),ee[2][P]={type:ee[2][0].type,data:Bi(ae)};C[0].messages[0].data=Bi(ee)}b.content=sp(np(C)),b.size=b.content.length;var te=lo(F[4][0].data);(function(){for(var z=Wr.find(u,o[te].location),G=ic(oc(z.content)),X,ne=0;ne<G.length;++ne){var q=G[ne];q.id==te&&(X=q)}var se=$n(X.messages[0].data);{se[3]=[];var ue=[];i.forEach(function(ce,Ue){ue[1]=[{type:0,data:ts(Ue)}],ue[2]=[{type:0,data:ts(1)}],ue[3]=[{type:2,data:ybe(ce)}],se[3].push({type:2,data:Bi(ue)})})}X.messages[0].data=Bi(se);var me=np(G),Ne=sp(me);z.content=Ne,z.size=z.content.length})();var L=$n(F[3][0].data);{var K=L[1][0];delete L[2];var I=$n(K.data);{var H=lo(I[2][0].data);(function(){for(var z=Wr.find(u,o[H].location),G=ic(oc(z.content)),X,ne=0;ne<G.length;++ne){var q=G[ne];q.id==H&&(X=q)}var se=$n(X.messages[0].data);{delete se[6],delete L[7];var ue=new Uint8Array(se[5][0].data);se[5]=[];for(var me=0,Ne=0;Ne<=n.e.r;++Ne){var ce=$n(ue);me+=Mbe(ce,a[Ne],i),ce[1][0].data=ts(Ne),se[5].push({data:Bi(ce),type:2})}se[1]=[{type:0,data:ts(n.e.c+1)}],se[2]=[{type:0,data:ts(n.e.r+1)}],se[3]=[{type:0,data:ts(me)}],se[4]=[{type:0,data:ts(n.e.r+1)}]}X.messages[0].data=Bi(se);var Ue=np(G),pe=sp(Ue);z.content=pe,z.size=z.content.length})()}K.data=Bi(I)}F[3][0].data=Bi(L)}T[4][0].data=Bi(F)}g.messages[0].data=Bi(T);var U=np(h),R=sp(U);return f.content=R,f.size=f.content.length,u}function SV(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function DN(e){SV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function ON(e){SV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Dbe(e){return Nn.WS.indexOf(e)>-1?"sheet":e==Nn.CS?"chart":e==Nn.DS?"dialog":e==Nn.MS?"macro":e&&e.length?e:"sheet"}function Obe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,Dbe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Rbe(e,t,r,n,s,a,i,o,c,u,d,f){try{a[n]=tv(Dl(e,r,!0),t);var h=La(e,t),g;switch(o){case"sheet":g=swe(h,t,s,c,a[n],u,d,f);break;case"chart":if(g=awe(h,t,s,c,a[n],u,d,f),!g||!g["!drawel"])break;var x=Ly(g["!drawel"].Target,t),y=Ov(x),v=G1e(Dl(e,x,!0),tv(Dl(e,y,!0),x)),T=Ly(v,x),k=Ov(T);g=M2e(Dl(e,T,!0),T,c,tv(Dl(e,k,!0),T),u,g);break;case"macro":g=iwe(h,t,s,c,a[n],u,d,f);break;case"dialog":g=owe(h,t,s,c,a[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var b=[];a&&a[n]&&ga(a[n]).forEach(function(C){var E="";if(a[n][C].Type==Nn.CMNT){E=Ly(a[n][C].Target,t);var j=dwe(La(e,E,!0),E,c);if(!j||!j.length)return;sO(g,j,!1)}a[n][C].Type==Nn.TCMNT&&(E=Ly(a[n][C].Target,t),b=b.concat(q1e(La(e,E,!0),c)))}),b&&b.length&&sO(g,b,!0,c.people||[])}catch(C){if(c.WTF)throw C}}function sc(e){return e.charAt(0)=="/"?e.slice(1):e}function Ibe(e,t){if(T1(),t=t||{},DN(t),uc(e,"META-INF/manifest.xml")||uc(e,"objectdata.xml"))return gO(e,t);if(uc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof X5<"u"){if(e.FileIndex)return X5(e);var r=Wr.utils.cfb_new();return TD(e).forEach(function(ae){wn(r,ae,Kfe(e,ae))}),X5(r)}throw new Error("Unsupported NUMBERS file")}if(!uc(e,"[Content_Types].xml"))throw uc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):uc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=TD(e),s=zhe(Dl(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",La(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!La(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(rv=[],s.sst)try{rv=uwe(La(e,sc(s.sst)),s.sst,t)}catch(ae){if(t.WTF)throw ae}t.cellStyles&&s.themes.length&&(c=cwe(Dl(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=lwe(La(e,sc(s.style)),s.style,c,t))}s.links.map(function(ae){try{var Z=tv(Dl(e,Ov(sc(ae))),ae);return hwe(La(e,sc(ae)),Z,ae,t)}catch{}});var d=nwe(La(e,sc(s.workbooks[0])),s.workbooks[0],t),f={},h="";s.coreprops.length&&(h=La(e,sc(s.coreprops[0]),!0),h&&(f=dG(h)),s.extprops.length!==0&&(h=La(e,sc(s.extprops[0]),!0),h&&Khe(h,f,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(h=Dl(e,sc(s.custprops[0]),!0),h&&(g=Xhe(h,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(Z){return Z.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=g),t.bookSheets&&typeof i<"u"&&(x.SheetNames=i),t.bookSheets?x.SheetNames:t.bookProps))return x;i={};var y={};t.bookDeps&&s.calcchain&&(y=fwe(La(e,sc(s.calcchain)),s.calcchain));var v=0,T={},k,b;{var C=d.Sheets;f.Worksheets=C.length,f.SheetNames=[];for(var E=0;E!=C.length;++E)f.SheetNames[E]=C[E].name}var j=a?"bin":"xml",P=s.workbooks[0].lastIndexOf("/"),A=(s.workbooks[0].slice(0,P+1)+"_rels/"+s.workbooks[0].slice(P+1)+".rels").replace(/^\//,"");uc(e,A)||(A="xl/_rels/workbook."+j+".rels");var M=tv(Dl(e,A,!0),A.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=mwe(La(e,sc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=Y1e(La(e,sc(s.people[0])),t)),M&&(M=Obe(M,d.Sheets));var F=La(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var B="sheet";if(M&&M[v]?(k="xl/"+M[v][1].replace(/[\/]?xl\//,""),uc(e,k)||(k=M[v][1]),uc(e,k)||(k=A.replace(/_rels\/.*$/,"")+M[v][1]),B=M[v][2]):(k="xl/worksheets/sheet"+(v+1-F)+"."+j,k=k.replace(/sheet0\./,"sheet.")),b=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var V=!1,ee=0;ee!=t.sheets.length;++ee)typeof t.sheets[ee]=="number"&&t.sheets[ee]==v&&(V=1),typeof t.sheets[ee]=="string"&&t.sheets[ee].toLowerCase()==f.SheetNames[v].toLowerCase()&&(V=1);if(!V)continue e}}Rbe(e,k,b,f.SheetNames[v],v,T,i,B,t,d,c,u)}return x={Directory:s,Workbook:d,Props:f,Custprops:g,Deps:y,Sheets:i,SheetNames:f.SheetNames,Strings:rv,Styles:u,Themes:c,SSF:Fs(Qr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(ae,Z){ae=ae.replace(/^Root Entry[\/]/,""),x.keys.push(ae),x.files[ae]=e.FileIndex[Z]}))),t&&t.bookVBA&&(s.vba.length>0?x.vbaraw=La(e,sc(s.vba[0]),!0):s.defaults&&s.defaults.bin===nxe&&(x.vbaraw=La(e,"xl/vbaProject.bin",!0))),x}function Lbe(e,t){var r=t||{},n="Workbook",s=Wr.find(e,n);try{if(n="/!DataSpaces/Version",s=Wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(mpe(s.content),n="/!DataSpaces/DataSpaceMap",s=Wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=ppe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=xpe(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);vpe(s.content)}catch{}if(n="/EncryptionInfo",s=Wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=wpe(s.content);if(n="/EncryptedPackage",s=Wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Bbe(e,t){return t.bookType=="ods"?_V(e,t):t.bookType=="numbers"?Fbe(e,t):t.bookType=="xlsb"?$be(e,t):zbe(e,t)}function $be(e,t){_p=1024,e&&!e.SSF&&(e.SSF=Fs(Qr)),e&&e.SSF&&(T1(),u3(e.SSF),t.revssf=f3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,nv?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=XG.indexOf(t.bookType)>-1,s=wN();ON(t=t||{});var a=iN(),i="",o=0;if(t.cellXfs=[],ih(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",wn(a,i,fG(e.Props,t)),s.coreprops.push(i),ns(t.rels,2,i,Nn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,wn(a,i,gG(e.Props)),s.extprops.push(i),ns(t.rels,3,i,Nn.EXT_PROPS),e.Custprops!==e.Props&&ga(e.Custprops||{}).length>0&&(i="docProps/custom.xml",wn(a,i,pG(e.Custprops)),s.custprops.push(i),ns(t.rels,4,i,Nn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,wn(a,i,pwe(o-1,i,t,e,d)),s.sheets.push(i),ns(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Nn.WS[0])}if(f){var g=f["!comments"],x=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,wn(a,y,vwe(g,y)),s.comments.push(y),ns(d,-1,"../comments"+o+"."+r,Nn.CMNT),x=!0),f["!legacy"]&&x&&wn(a,"xl/drawings/vmlDrawing"+o+".vml",KG(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&wn(a,Ov(i),Fp(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,wn(a,i,ywe(t.Strings,i,t)),s.strs.push(i),ns(t.wbrels,-1,"sharedStrings."+r,Nn.SST)),i="xl/workbook."+r,wn(a,i,gwe(e,i)),s.workbooks.push(i),ns(t.rels,1,i,Nn.WB),i="xl/theme/theme1.xml",wn(a,i,CN(e.Themes,t)),s.themes.push(i),ns(t.wbrels,-1,"theme/theme1.xml",Nn.THEME),i="xl/styles."+r,wn(a,i,xwe(e,i,t)),s.styles.push(i),ns(t.wbrels,-1,"styles."+r,Nn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",wn(a,i,e.vbaraw),s.vba.push(i),ns(t.wbrels,-1,"vbaProject.bin",Nn.VBA)),i="xl/metadata."+r,wn(a,i,wwe(i)),s.metadata.push(i),ns(t.wbrels,-1,"metadata."+r,Nn.XLMETA),wn(a,"[Content_Types].xml",cG(s,t)),wn(a,"_rels/.rels",Fp(t.rels)),wn(a,"xl/_rels/workbook."+r+".rels",Fp(t.wbrels)),delete t.revssf,delete t.ssf,a}function zbe(e,t){_p=1024,e&&!e.SSF&&(e.SSF=Fs(Qr)),e&&e.SSF&&(T1(),u3(e.SSF),t.revssf=f3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,nv?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=XG.indexOf(t.bookType)>-1,s=wN();ON(t=t||{});var a=iN(),i="",o=0;if(t.cellXfs=[],ih(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",wn(a,i,fG(e.Props,t)),s.coreprops.push(i),ns(t.rels,2,i,Nn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,wn(a,i,gG(e.Props)),s.extprops.push(i),ns(t.rels,3,i,Nn.EXT_PROPS),e.Custprops!==e.Props&&ga(e.Custprops||{}).length>0&&(i="docProps/custom.xml",wn(a,i,pG(e.Custprops)),s.custprops.push(i),ns(t.rels,4,i,Nn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,wn(a,i,oV(o-1,t,e,f)),s.sheets.push(i),ns(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Nn.WS[0])}if(h){var x=h["!comments"],y=!1,v="";if(x&&x.length>0){var T=!1;x.forEach(function(k){k[1].forEach(function(b){b.T==!0&&(T=!0)})}),T&&(v="xl/threadedComments/threadedComment"+o+"."+r,wn(a,v,K1e(x,d,t)),s.threadedcomments.push(v),ns(f,-1,"../threadedComments/threadedComment"+o+"."+r,Nn.TCMNT)),v="xl/comments"+o+"."+r,wn(a,v,YG(x)),s.comments.push(v),ns(f,-1,"../comments"+o+"."+r,Nn.CMNT),y=!0}h["!legacy"]&&y&&wn(a,"xl/drawings/vmlDrawing"+o+".vml",KG(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&wn(a,Ov(i),Fp(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,wn(a,i,RG(t.Strings,t)),s.strs.push(i),ns(t.wbrels,-1,"sharedStrings."+r,Nn.SST)),i="xl/workbook."+r,wn(a,i,fV(e)),s.workbooks.push(i),ns(t.rels,1,i,Nn.WB),i="xl/theme/theme1.xml",wn(a,i,CN(e.Themes,t)),s.themes.push(i),ns(t.wbrels,-1,"theme/theme1.xml",Nn.THEME),i="xl/styles."+r,wn(a,i,HG(e,t)),s.styles.push(i),ns(t.wbrels,-1,"styles."+r,Nn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",wn(a,i,e.vbaraw),s.vba.push(i),ns(t.wbrels,-1,"vbaProject.bin",Nn.VBA)),i="xl/metadata."+r,wn(a,i,qG()),s.metadata.push(i),ns(t.wbrels,-1,"metadata."+r,Nn.XLMETA),d.length>1&&(i="xl/persons/person.xml",wn(a,i,X1e(d)),s.people.push(i),ns(t.wbrels,-1,"persons/person.xml",Nn.PEOPLE)),wn(a,"[Content_Types].xml",cG(s,t)),wn(a,"_rels/.rels",Fp(t.rels)),wn(a,"xl/_rels/workbook."+r+".rels",Fp(t.wbrels)),delete t.revssf,delete t.ssf,a}function RN(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Bl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Ube(e,t){return Wr.find(e,"EncryptedPackage")?Lbe(e,t):pV(e,t)}function Wbe(e,t){var r,n=e,s=t||{};return s.type||(s.type=kn&&Buffer.isBuffer(e)?"buffer":"base64"),r=LH(n,s),Ibe(r,s)}function kV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Q8(e.slice(r),t);default:break e}return Yp.to_workbook(e,t)}function Hbe(e,t){var r="",n=RN(e,t);switch(t.type){case"base64":r=Bl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Om(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ms(r)),t.type="binary",kV(r,t)}function Gbe(e,t){var r=e;return t.type=="base64"&&(r=Bl(r)),r=Av.utils.decode(1200,r.slice(2),"str"),t.type="binary",kV(r,t)}function Vbe(e){return e.match(/[^\x00-\x7F]/)?Hu(e):e}function J5(e,t,r,n){return n?(r.type="string",Yp.to_workbook(e,r)):Yp.to_workbook(t,r)}function tT(e,t){tN();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return tT(new Uint8Array(e),(r=Fs(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Op={},r.dateNF&&(Op.dateNF=r.dateNF),r.type||(r.type=kn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=kn?"buffer":"binary",n=$fe(e),typeof Uint8Array<"u"&&!kn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=Vbe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Fs(r),r.type="array",tT(rN(n),r)}switch((s=RN(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Ube(Wr.read(n,r),r);break;case 9:if(s[1]<=8)return pV(n,r);break;case 60:return Q8(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Jge(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return DG.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Wbe(n,r):J5(e,n,r,a);case 239:return s[3]===60?Q8(n,r):J5(e,n,r,a);case 255:if(s[1]===254)return Gbe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return mm.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return mm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return J8.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return zG.to_workbook(n,r);break;case 10:case 13:case 32:return Hbe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Xge.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?J8.to_workbook(n,r):J5(e,n,r,a)}function TV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return S2(t.file,Wr.write(e,{type:kn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Wr.write(e,t)}function qbe(e,t){var r=Fs(t||{}),n=Bbe(e,r);return Kbe(n,r)}function Kbe(e,t){var r={},n=kn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Wr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(c3(s))}return t.password&&typeof encrypt_agile<"u"?TV(encrypt_agile(s,t.password),t):t.type==="file"?S2(t.file,s):t.type=="string"?ms(s):s}function Ybe(e,t){var r=t||{},n=Vwe(e,r);return TV(n,r)}function Ou(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return jv(Hu(n));case"binary":return Hu(n);case"string":return e;case"file":return S2(t.file,n,"utf8");case"buffer":return kn?_0(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ou(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Xbe(e,t){switch(t.type){case"base64":return jv(e);case"binary":return e;case"string":return e;case"file":return S2(t.file,e,"binary");case"buffer":return kn?_0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Sb(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?jv(r):t.type=="string"?ms(r):r;case"file":return S2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function CV(e,t){tN(),U2e(e);var r=Fs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=CV(e,r);return r.type="array",c3(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ou(Bwe(e,r),r);case"slk":case"sylk":return Ou(FG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Ou(yV(e.Sheets[e.SheetNames[s]],r),r);case"txt":return Xbe(NV(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Ou(IN(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Ou(DG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Sb(J8.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Ou(Yp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Ou(zG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Ou(OG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Ou(_V(e,r),r);case"wk1":return Sb(mm.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Sb(mm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Sb(xV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Ybe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return qbe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Jbe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Qbe(e,t,r){var n={};return n.type="file",n.file=t,Jbe(n),CV(e,n)}function Zbe(e,t,r,n,s,a,i,o){var c=ja(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var g=t.s.c;g<=t.e.c;++g){var x=i?e[r][g]:e[n[g]+c];if(x===void 0||x.t===void 0){if(u===void 0)continue;a[g]!=null&&(h[a[g]]=u);continue}var y=x.v;switch(x.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[g]!=null){if(y==null)if(x.t=="e"&&y===null)h[a[g]]=null;else if(u!==void 0)h[a[g]]=u;else if(d&&y===null)h[a[g]]=null;else continue;else h[a[g]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?y:f0(x,y,o);y!=null&&(f=!1)}}return{row:h,isempty:f}}function K4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Ln(d);break;case"number":c=Ln(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(s=0);var f=ja(c.s.r),h=[],g=[],x=0,y=0,v=Array.isArray(e),T=c.s.r,k=0,b={};v&&!e[T]&&(e[T]=[]);var C=u.skipHidden&&e["!cols"]||[],E=u.skipHidden&&e["!rows"]||[];for(k=c.s.c;k<=c.e.c;++k)if(!(C[k]||{}).hidden)switch(h[k]=Zs(k),r=v?e[T][k]:e[h[k]+f],n){case 1:a[k]=k-c.s.c;break;case 2:a[k]=h[k];break;case 3:a[k]=u.header[k-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=f0(r,null,u),y=b[i]||0,!y)b[i]=1;else{do o=i+"_"+y++;while(b[o]);b[i]=y,b[o]=1}a[k]=o}for(T=c.s.r+s;T<=c.e.r;++T)if(!(E[T]||{}).hidden){var j=Zbe(e,c,T,h,n,a,v,u);(j.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[x++]=j.row)}return g.length=x,g}var wO=/"/g;function e4e(e,t,r,n,s,a,i,o){for(var c=!0,u=[],d="",f=ja(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var g=o.dense?(e[r]||[])[h]:e[n[h]+f];if(g==null)d="";else if(g.v!=null){c=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:f0(g,null,o));for(var x=0,y=0;x!==d.length;++x)if((y=d.charCodeAt(x))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(wO,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(c=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(wO,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function IN(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Ln(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(h[x]||{}).hidden||(f[x]=Zs(x));for(var y=0,v=s.s.r;v<=s.e.r;++v)(g[v]||{}).hidden||(d=e4e(e,s,v,f,i,c,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function NV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=IN(e,t);return r}function t4e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Ln(e["!ref"]),a="",i=[],o,c=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=Zs(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=ja(d),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function EV(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?ea(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var f=Ln(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+s)}else i==-1&&(i=0,d.e.r=t.length-1+s);var h=n.header||[],g=0;t.forEach(function(y,v){ga(y).forEach(function(T){(g=h.indexOf(T))==-1&&(h[g=h.length]=T);var k=y[T],b="z",C="",E=en({c:o+g,r:i+v+s});u=Uv(a,E),k&&typeof k=="object"&&!(k instanceof Date)?a[E]=k:(typeof k=="number"?b="n":typeof k=="boolean"?b="b":typeof k=="string"?b="s":k instanceof Date?(b="d",n.cellDates||(b="n",k=si(k)),C=n.dateNF||Qr[14]):k===null&&n.nullError&&(b="e",k=0),u?(u.t=b,u.v=k,delete u.w,delete u.R,C&&(u.z=C)):a[E]=u={t:b,v:k},C&&(u.z=C))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var x=ja(i);if(s)for(g=0;g<h.length;++g)a[Zs(g+o)+x]={t:"s",v:h[g]};return a["!ref"]=vn(d),a}function r4e(e,t){return EV(null,e,t)}function Uv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ea(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Uv(e,en(t)):Uv(e,en({r:t,c:r||0}))}function n4e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function LN(){return{SheetNames:[],Sheets:{}}}function BN(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(dV(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function s4e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=n4e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function a4e(e,t){return e.z=t,e}function AV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function i4e(e,t,r){return AV(e,"#"+t,r)}function o4e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function l4e(e,t,r,n){for(var s=typeof t!="string"?t:Ln(t),a=typeof t=="string"?t:vn(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var c=Uv(e,i,o);c.t="n",c.F=a,delete c.v,i==s.s.r&&o==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Jb={encode_col:Zs,encode_row:ja,encode_cell:en,encode_range:vn,decode_col:mN,decode_row:hN,split_cell:yhe,decode_cell:ea,decode_range:fl,format_cell:f0,sheet_add_aoa:rG,sheet_add_json:EV,sheet_add_dom:vV,aoa_to_sheet:C1,json_to_sheet:r4e,table_to_sheet:wV,table_to_book:mbe,sheet_to_csv:IN,sheet_to_txt:NV,sheet_to_json:K4,sheet_to_html:yV,sheet_to_formulae:t4e,sheet_to_row_object_array:K4,sheet_get_cell:Uv,book_new:LN,book_append_sheet:BN,book_set_sheet_visibility:s4e,cell_set_number_format:a4e,cell_set_hyperlink:AV,cell_set_internal_link:i4e,cell_add_comment:o4e,sheet_set_array_formula:l4e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const jV=({onBackToCabinet:e,selectedGrade:t,selectedClass:r,openRetestModal:n,forceRefreshOnMount:s=!1})=>{Wo(),y0();const{user:a,isAuthenticated:i}=Os(),{showNotification:o}=ai(),c=_.useCallback(De=>{let qe=null;if(typeof De?.percentage=="number"&&!Number.isNaN(De.percentage))return qe=Math.round(De.percentage),console.debug("[TeacherResults] Using provided percentage",{percentage:De.percentage,rounded:qe,result:De}),qe;const Lt=De?.retest_best_score??De?.score,gt=De?.retest_best_max_score??De?.max_score,xr=Number(Lt??0),Et=Number(gt??0);return Et>0&&(qe=Math.round(xr/Et*100)),qe},[]);_.useCallback(De=>{const qe=c(De);return qe===null?"text-gray-600":qe<50?"text-red-600 font-semibold":qe<70?"text-yellow-600":"text-green-600"},[c]),_.useCallback(De=>{const qe=c(De);return qe!==null&&qe<50},[c]);const[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,x]=_.useState(""),[y,v]=_.useState([]),[T,k]=_.useState(null),[b,C]=_.useState(!1),[E,j]=_.useState([]),[P,A]=_.useState([]),[M,F]=_.useState([1,2]),[B,V]=_.useState(null),[ee,ae]=_.useState(null),[Z,te]=_.useState(null),[L,K]=_.useState("main"),[I,H]=_.useState(null),[U,R]=_.useState(null),z=I||t,G=U||r,[X,ne]=_.useState(null),[q,se]=_.useState({}),[ue,me]=_.useState(!1),[Ne,ce]=_.useState(new Set),[Ue,pe]=_.useState(!0),[je,We]=_.useState(null),[Me,Nt]=_.useState(null),[$e,St]=_.useState(!1),[At,Bt]=_.useState(!1),[Gt,or]=_.useState(!1),yr=_.useRef(null),[it,Ve]=_.useState(null),[at,pt]=_.useState(!1),[nt,kt]=_.useState(null),[Wt,rr]=_.useState(!1),[ur,Nr]=_.useState(null),[wr,ft]=_.useState(""),[Tt,Ot]=_.useState(""),[he,Ee]=_.useState(!1),[Ae,Fe]=_.useState(!1),[xt,$t]=_.useState(null),[lr,Ke]=_.useState(""),[ct,yt]=_.useState(!1),[Jt,cr]=_.useState(new Set),[Rr,Hr]=_.useState({}),[He,Ct]=_.useState(!1),[le,ve]=_.useState(null),[ge,we]=_.useState(""),[Te,Se]=_.useState(!1),[Ze,ut]=_.useState(null),[Je,de]=_.useState(null),[ye,Pe]=_.useState(!1),[Be,Ye]=_.useState(!1),[ot,wt]=_.useState({isOpen:!1,testResult:null}),[er,Ft]=_.useState({}),Yt=_.useRef(new Set),_r=_.useRef({}),Ir=_.useRef(null);_.useEffect(()=>{console.log(" editingColumns state changed:",Array.from(Jt)),Yt.current=Jt},[Jt]),_.useEffect(()=>{console.log(" columnScores state changed:",Rr),_r.current=Rr},[Rr]);const ar=_.useCallback(De=>{console.log(" Toggling test collapse for:",De),ce(qe=>{const Lt=new Set(qe);return Lt.has(De)?(Lt.delete(De),console.log(" Expanding test:",De)):(Lt.add(De),console.log(" Collapsing test:",De)),console.log(" New collapsed tests:",Array.from(Lt)),Lt})},[]),Ur=_.useCallback(()=>{if(yr.current){const{scrollLeft:De,scrollWidth:qe,clientWidth:Lt}=yr.current;Bt(De>0),or(De<qe-Lt-1)}},[]);_.useEffect(()=>{$r()},[]),_.useEffect(()=>{if(B&&yr.current){const De=setTimeout(Ur,100);return()=>clearTimeout(De)}},[B,Ur]),_.useEffect(()=>{console.log(" Current collapsed tests state:",Array.from(Ne))},[Ne]);const Fr=_.useCallback(async(De,qe=!1)=>{try{me(!0);const Lt=a?.teacher_id,gt=`${z}/${G}`,xr=await n0e.getTeacherStudentResults(Lt,z,gt,De,qe);if(xr.success){console.log(" Results loaded for term:",De,xr.results?.length||0,"results"),console.log(" Students loaded:",xr.students?.length||0,"students");const Et=[],Gr=new Set,Pn=new Set;xr.results&&xr.results.length>0&&xr.results.forEach(nr=>{nr.test_name&&!Gr.has(nr.test_name)&&(Gr.add(nr.test_name),Et.push({test_name:nr.test_name,test_type:nr.test_type,subject:nr.subject})),nr.subject&&Pn.add(nr.subject)});const ze=(xr.students||[]).map(nr=>{const gs={};return(xr.results||[]).filter(an=>an.student_id===nr.student_id).forEach(an=>{an.test_name&&(gs[an.test_name]={id:an.id,test_type:an.test_type,test_id:an.test_id,subject_id:an.subject_id,score:an.score,max_score:an.max_score,retest_offered:an.retest_offered,caught_cheating:an.caught_cheating,visibility_change_times:an.visibility_change_times,answers:an.answers,ai_feedback:an.ai_feedback,name:an.name,surname:an.surname,test_name:an.test_name})}),{...nr,...gs}}),hr={results:xr.results||[],students:ze,class:ze,unique_tests:Et,subjects:Array.from(Pn),count:xr.count||0,student_count:xr.student_count||0};console.log(" Processed results data:",{uniqueTests:Et.length,subjects:Array.from(Pn),resultsCount:xr.results?.length||0,studentsWithScores:ze.length,sampleStudent:ze[0]}),V(hr),se(hr),te(new Date)}}catch(Lt){console.error(" Error loading results for term:",Lt),V(null),se(null)}finally{me(!1)}},[a,z,G]);_.useEffect(()=>{(async()=>{try{St(!0),await cu.loadAcademicCalendar();const qe=cu.getCurrentSemesterTerms();Nt(qe),qe?.currentTerm&&(We(qe.currentTerm.id),z&&G&&Fr(qe.currentTerm.id,s))}catch(qe){console.error(" Error initializing academic calendar:",qe)}finally{St(!1)}})()},[z,G,Fr,s]),_.useEffect(()=>{t&&r&&(console.log(" Props detected:",{grade:t,class:r}),Me?.currentTerm&&(We(Me.currentTerm.id),Fr(Me.currentTerm.id,s)))},[t,r,Me,Fr,s]);const $r=_.useCallback(async()=>{console.log(" Initializing teacher results...");try{if(h(!0),x(""),!i||!a){console.log(" User not authenticated"),x("User not authenticated");return}if(a.role!==Ro.TEACHER){console.error(" Invalid user role for teacher results:",a.role),x("Access denied. Teacher role required.");return}console.log(" Loading teacher assignments..."),await Tr(),console.log(" TODO: Load academic calendar service"),console.log(" Teacher results initialization complete!")}catch(De){console.error(" Error initializing teacher results:",De),x("Failed to initialize teacher results")}finally{h(!1)}},[i,a]),Tr=_.useCallback(async()=>{console.log(" Loading teacher assignments...");try{const De=`teacher_data_${a?.teacher_id||a?.id||""}`;let qe=Ts(De);qe&&qe.subjects&&qe.subjects.length>0&&(qe.subjects.some(ze=>ze.subject&&ze.classes&&ze.classes.length>0)||(console.log(" Cached data has invalid subject structure, forcing refresh"),localStorage.removeItem(De),qe=null)),qe?console.log(" Cache HIT! Using cached teacher data"):(console.log(" Cache MISS! Fetching teacher data from API"),qe=await $s.getTeacherData(),console.log(" Teacher data loaded:",qe),hs(De,qe,as.teacher_subjects)),d(qe);const Lt=[];qe&&qe.subjects&&(console.log(" Teacher subjects structure:",qe.subjects),qe.subjects.forEach(Pn=>{console.log(" Processing subject:",Pn),Pn.classes&&Pn.classes.forEach(ze=>{ze.grade&&ze.class&&Lt.push({grade:ze.grade,class:ze.class,subject:Pn.subject||Pn.name||"Unknown Subject"})})})),A(Lt),console.log(" Available classes from teacher data:",Lt);const gt=`teacher_tests_${a?.teacher_id||a?.id||""}`,xr=Ts(gt);xr&&xr.some(Pn=>Pn.test_type==="drawing")&&(console.log(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(gt));let Et=Ts(gt);Et?console.log(" Cache HIT! Using cached teacher tests"):(console.log(" Cache MISS! Fetching teacher tests from API"),Et=await Sn.getTeacherTests(),console.log(" Teacher tests loaded:",Et),hs(gt,Et,as.teacher_tests));const Gr=Et.flatMap(Pn=>Pn.assignments||[]);v(Gr),console.log(" Raw assignments data:",Gr),console.log(" Teacher assignments loaded:",Gr.length)}catch(De){console.error(" Error loading teacher assignments:",De),o("Failed to load teacher assignments","error")}},[o]),Is=_.useCallback(async(De,qe)=>{console.log(" Showing classes for grade:",De,"class:",qe),H(De),R(qe),k(null),V(null),De&&qe&&console.log(" TODO: Implement academic calendar service for term selection")},[]);_.useCallback((De,qe)=>{console.log(" Showing semesters for class:",De,qe),k(null),V(null),console.log(" TODO: Implement academic calendar service for term selection")},[]),_.useCallback((De,qe)=>{console.log(" Class clicked:",De,qe),C(!0),console.log(" TODO: Implement academic calendar service for term selection")},[]);const sn=_.useCallback(async(De,qe=!1)=>{!z||!G||(console.log(" Loading results for semester:",De,"forceRefresh:",qe),k(De),Me?.currentTerm&&await Fr(Me.currentTerm.id,qe))},[z,G,Me,Fr]),Jn=_.useCallback(()=>Me?l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Semester: ",Me?.semester===1?"Semester 1":"Semester 2"]}),l.jsx("div",{className:"flex space-x-4",children:Me?.terms.map(De=>l.jsx(dt.button,{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${De.isCurrent?"bg-blue-600 text-white shadow-lg":je===De.id?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{We(De.id),Fr(De.id)},whileHover:{scale:1.05},whileTap:{scale:.95},children:De.label},De.id))})]}):l.jsx("div",{className:"flex space-x-4 mb-6",children:l.jsx("div",{className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-500",children:"Loading terms..."})}),[Me,je,Fr]);_.useCallback(De=>De.reduce((qe,Lt)=>(qe[Lt.student_id]||(qe[Lt.student_id]=[]),qe[Lt.student_id].push(Lt),qe),{}),[]),_.useCallback(De=>{if(De.length===0)return 0;const qe=De.reduce((Lt,gt)=>Lt+(gt.percentage||0),0);return Math.round(qe/De.length)},[]),_.useCallback(De=>{De.score<De.passing_score&&window.confirm("Give another try?")&&Hn(De.student_id,De.test_id)},[]);const Hn=_.useCallback(async(De,qe)=>{try{(await fetch("/.netlify/functions/reset-test-attempt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:De,testId:qe})})).ok&&(G&&sn(T,!0),o("Test made accessible to student","success"))}catch(Lt){console.error("Error resetting test attempt:",Lt),o("Failed to reset test attempt","error")}},[G,T,sn,o]),os=_.useCallback((De,qe)=>{if(De===null||qe===null)return"";const Lt=Math.round(De/qe*100);return Lt>=80?"text-green-600 bg-green-50":Lt>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"},[]),hn=_.useCallback(De=>{Ve(De),pt(!0)},[]),ke=_.useCallback((De,qe="overview",Lt)=>{try{const xr=!!De?.ai_feedback,Et=typeof De?.ai_feedback;let Gr=[];if(xr)if(Et==="string")try{Gr=Object.keys(JSON.parse(De.ai_feedback))}catch{Gr=["<invalid json>"]}else Et==="object"&&(Gr=Object.keys(De.ai_feedback||{}));console.log("[AI DEBUG] Opening speaking result",{hasAi:xr,aiType:Et,aiKeys:Gr})}catch{}const gt={...De,__initialTab:qe};Lt&&(gt.__audioUrl=Lt),kt(gt),rr(!0)},[]),jt=_.useCallback(async(De,qe)=>{if(!De||!qe)return console.error("fetchTestQuestions: Missing testType or testId",{testType:De,testId:qe}),null;const Lt=`${De}_${qe}`;if(er[Lt])return console.log(" Using cached questions for",Lt),er[Lt];Ye(!0);try{console.log(" Fetching questions for",{testType:De,testId:qe});const gt=await Sn.getTestQuestions(De,qe);return console.log(" Questions fetched:",gt?.length||0,"questions"),Ft(xr=>({...xr,[Lt]:gt})),gt}catch(gt){return console.error(" Error fetching test questions:",gt),o("Failed to load test questions","error"),null}finally{Ye(!1)}},[er,o]),Dr=_.useCallback(async(De,qe)=>{if(console.log(" Opening answer modal for:",{testResult:De,test:qe}),console.log(" [handleViewAnswers] testResult.answers:",De?.answers),console.log(" [handleViewAnswers] testResult.answers type:",typeof De?.answers),console.log(" [handleViewAnswers] testResult.retest_offered:",De?.retest_offered),console.log(" [handleViewAnswers] Full testResult keys:",De?Object.keys(De):"null"),De.test_type==="drawing"||qe?.test_type==="drawing"){hn(De);return}if(De.test_type==="speaking"||qe?.test_type==="speaking"){ke(De);return}const Lt=De.test_type||qe?.test_type;if(Lt==="word_matching"||Lt==="matching_type"){o("Word matching and picture matching tests have separate view mechanisms","info");return}ut(De),de(null),Pe(!0),Ye(!0);const gt=De.test_id||qe?.test_id;if(!Lt||!gt){o("Unable to load test questions: Missing test type or ID","error"),Ye(!1);return}try{const xr=await jt(Lt,gt);xr?de(xr):o("Failed to load test questions","error")}finally{Ye(!1)}},[jt,hn,ke,o]);_.useCallback((De,qe,Lt)=>{Nr({resultId:De,score:qe,maxScore:Lt}),ft(qe?.toString()||""),Ot(Lt?.toString()||""),Fe(!0)},[]),_.useCallback(De=>{ft(De)},[]),_.useCallback(De=>{Ot(De)},[]),_.useCallback(async()=>{if(ur){Ee(!0);try{const De={resultId:ur.resultId,score:parseInt(wr)||0,maxScore:parseInt(Tt)||1};(await fetch(Wd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)})).ok?(o("Score updated successfully","success"),G&&sn(T,!0),Nr(null),ft(""),Ot(""),Fe(!1)):o("Failed to update score","error")}catch(De){console.error("Error updating score:",De),o("Failed to update score","error")}finally{Ee(!1)}}},[ur,wr,Tt,G,T,sn,o]),_.useCallback(()=>{Nr(null),ft(""),Ot(""),Fe(!1)},[]);const Jr=_.useCallback((De,qe)=>{$t({resultId:De,score:qe}),Ke(qe.toString())},[]),Gn=_.useCallback(async()=>{if(xt){yt(!0);try{const De={resultId:xt.resultId,score:parseInt(lr)||0},qe=await fetch(Wd.UPDATE_SPEAKING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)});if(qe.ok){const Lt=await qe.json();o("Speaking test score updated successfully","success"),nt&&kt(gt=>({...gt,score:Lt.score,percentage:Lt.percentage})),G&&sn(T,!0),$t(null),Ke("")}else{const Lt=await qe.json();o(Lt.error||"Failed to update speaking test score","error")}}catch(De){console.error("Error updating speaking test score:",De),o("Failed to update speaking test score","error")}finally{yt(!1)}}},[xt,lr,G,T,sn,o]),En=_.useCallback(()=>{$t(null),Ke("")},[]),ls=(De,qe)=>{console.log(" Starting column editing for drawing test:",De),console.log(" Current editingColumns before update:",Array.from(Jt)),console.log(" Results data passed to function:",qe),cr(Lt=>{const gt=new Set(Lt).add(De);return console.log(" Updated editingColumns:",Array.from(gt)),gt}),console.log(" Initializing column scores for test:",De),console.log(" Results data:",qe),console.log(" Results.class:","null"),console.log(" No results or class data available")},Vs=_.useCallback(De=>{cr(qe=>{const Lt=new Set(qe);return Lt.delete(De),Lt}),Hr(qe=>{const Lt={...qe};return delete Lt[De],Lt})},[]),li=_.useCallback((De,qe,Lt,gt)=>{const xr=gt.toString();_r.current[De]||(_r.current[De]={}),_r.current[De][qe]||(_r.current[De][qe]={}),_r.current[De][qe][Lt]=xr;const Et=parseInt(gt)||0;Hr(Gr=>({...Gr,[De]:{...Gr[De],[qe]:{...Gr[De]?.[qe],[Lt]:Et}}}))},[]);_.useCallback(async De=>{if(_r.current[De]){Ct(!0);try{const qe=Object.entries(_r.current[De]).map(([Et,Gr])=>({resultId:Gr.resultId,score:parseInt(Gr.score)||0,maxScore:parseInt(Gr.maxScore)||100}));console.log(" Saving column scores for",De,":",qe);const Lt=qe.map(Et=>(console.log(" Sending update:",Et),fetch(Wd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Et)})));(await Promise.all(Lt)).every(Et=>Et.ok)?(o(`Scores updated successfully for ${De}`,"success"),G&&sn(T,!0),Vs(De)):o("Failed to update some scores","error")}catch(qe){console.error("Error updating column scores:",qe),o("Failed to update scores","error")}finally{Ct(!1)}}},[Rr,G,T,sn,o,Vs]);const un=_.useCallback((De,qe,Lt)=>!qe||qe.length===0?l.jsx(dt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:l.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):l.jsx(dt.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:l.jsxs(dt.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[l.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:gt=>{yr.current&&(yr.current.scrollLeft=gt.target.scrollLeft)},children:l.jsx("div",{className:"min-w-full h-1",children:l.jsx("div",{className:"h-1",style:{width:`${(Lt.length+5)*120}px`}})})}),l.jsx("div",{ref:yr,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:gt=>{Ur(gt);const xr=gt.target.previousElementSibling;xr&&(xr.scrollLeft=gt.target.scrollLeft)},children:l.jsxs("table",{className:"min-w-full border-collapse text-sm min-w-max",children:[l.jsx("thead",{children:l.jsxs(dt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-20 text-center",children:"Student ID"}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 ${Ue?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[180px] bg-blue-50 cursor-pointer select-none"}`,onClick:gt=>{gt.preventDefault(),gt.stopPropagation(),pe(!Ue)},title:"Toggle student name columns",children:Ue?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),l.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-16 text-center",children:"No."}),l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 min-w-[100px]",children:"Nickname"}),Lt.map((gt,xr)=>{const Et=Ne.has(gt.test_name),Gr=gt.test_type==="drawing",Pn=Yt.current.has(gt.test_name);return console.log(` Rendering test ${gt.test_name}:`,{isDrawingTest:Gr,isEditingColumn:Pn,editingColumns:Array.from(Yt.current),test_type:gt.test_type}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 cursor-pointer hover:bg-blue-200 transition-colors select-none ${Et?"w-8 min-w-[32px] max-w-[32px] bg-gray-100":"min-w-[100px] bg-blue-50"}`,onClick:ze=>{ze.preventDefault(),ze.stopPropagation(),ar(gt.test_name)},children:Et?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:gt.test_name,children:gt.test_name.length>8?gt.test_name.substring(0,8)+"...":gt.test_name}),l.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},xr)})]})}),l.jsx("tbody",{children:l.jsx(il,{children:qe.map((gt,xr)=>l.jsxs(dt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${xr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1+xr*.05,ease:"easeOut"},whileHover:{scale:1.01,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},children:[l.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-center font-semibold text-gray-900",whileHover:{scale:1.05},transition:{duration:.2},children:gt.student_id}),Ue?l.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Et=>{Et.preventDefault(),Et.stopPropagation(),pe(!1)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):l.jsxs(l.Fragment,{children:[l.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:gt.name}),l.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:gt.surname})]}),l.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-center text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:gt.number??xr+1}),l.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-600",whileHover:{scale:1.02},transition:{duration:.2},children:gt.nickname||"-"}),Lt.map((Et,Gr)=>{const Pn=Ne.has(Et.test_name),ze=gt[Et.test_name];return Pn?(console.log(" Rendering collapsed column for test:",Et.test_name),l.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:hr=>{hr.preventDefault(),hr.stopPropagation(),console.log(" Clicked on collapsed arrow for:",Et.test_name),ar(Et.test_name)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},Gr)):l.jsx(dt.td,{className:"border-b border-gray-100 px-2 py-4 text-sm min-w-[100px]",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{duration:.3},whileHover:{scale:1.02},onClick:hr=>{console.debug("[TeacherResults] Main table TD clicked",{testResult:ze,student:gt.student_id});const nr=ze?.test_type||Et?.test_type;if(nr==="drawing"||nr==="speaking")return;const gs=c(ze),pn=gs!==null&&gs<50;if(ze?.retest_offered===!0&&(nr==="multiple_choice"||nr==="true_false"||nr==="input")){Dr(ze,Et);return}if(nr==="fill_blanks"||nr==="matching_type"||nr==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked",{testType:nr,isRed:pn,testResult:ze}),pn){if(ze?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:gt.student_id,test:Et}),n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal",{testResult:ze}),wt({isOpen:!0,testResult:ze});else if(pn){if(ze?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:gt.student_id,test:Et}),n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else Dr(ze,Et)},children:ze&&ze.test_type==="drawing"?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsx("button",{onClick:()=>hn(ze),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"View Drawing"}),(()=>{const hr=`${Et.test_name}|${gt.student_id}`,nr=le===hr,gs=Number.isFinite(ze?.score)?ze.score:0;if(!nr){const pn=c(ze),an=pn!==null&&pn<50,xn=pn!==null&&pn>=50&&pn<70,_n=ze?.retest_offered===!0,Hl=pn===null?"text-gray-600":an?"text-red-600 font-semibold":xn?"text-yellow-600":"text-green-600";return l.jsxs(dt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${Hl} cursor-pointer hover:opacity-90 ${_n?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:an?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:Ei=>{Ei.preventDefault(),Ei.stopPropagation(),an&&!_n?n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r}):(ve(hr),we(String(gs)))},title:_n?"Retest offered":an?"Offer retest":"Double-click to edit score",children:[(()=>{const Ei=ze.retest_best_score??ze.score,dh=ze.retest_best_max_score??ze.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:an?"text-red-700":"",children:Ei}),"/",l.jsx("span",{children:dh})]})})(),ze.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})}return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:10,value:ge,onChange:pn=>we(pn.target.value),onBlur:async()=>{const pn=Math.max(0,Math.min(10,parseFloat(ge||"0")));Se(!0);try{const an={resultId:ze?.id,score:pn,maxScore:10},xn=await(window.tokenManager?.getToken()||ua.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Wd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:xn?`Bearer ${xn}`:""},body:JSON.stringify(an)})).ok)throw new Error("Failed to save")}catch{}finally{Se(!1),ve(null),sn(T,!0)}},onKeyDown:async pn=>{pn.key==="Enter"?pn.currentTarget.blur():pn.key==="Escape"&&ve(null)},className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",disabled:Te}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",value:10,className:"w-12 px-2 py-1 text-xs border border-gray-300 bg-gray-100 rounded",disabled:!0})]})})(),ze.caught_cheating&&ze.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",ze.visibility_change_times,")"]})]}):ze&&(ze.test_type==="speaking"||Et.test_type==="speaking")?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[(()=>{const hr=ze?.answers;let nr;if(typeof hr=="string")if(/^https?:\/\//i.test(hr))nr=hr;else try{nr=JSON.parse(hr)?.audio_url}catch{}else hr&&typeof hr=="object"&&(nr=hr.audio_url);return!nr&&ze?.audio_url&&(nr=ze.audio_url),l.jsx(l.Fragment,{children:l.jsx("button",{onClick:()=>ke({...ze,__studentId:gt.student_id},"audio",nr),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Results"})})})(),(()=>{const hr=Yt.current.has(Et.test_name);return console.log(` Score cell for ${Et.test_name}:`,{isEditing:hr,editingColumns:Array.from(Yt.current),test_name:Et.test_name}),hr})()?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:ze.max_score||100,value:_r.current[Et.test_name]?.[gt.student_id]?.score||ze.score||"",onChange:hr=>li(Et.test_name,gt.student_id,"score",hr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",min:"1",value:_r.current[Et.test_name]?.[gt.student_id]?.maxScore||ze.max_score||100,onChange:hr=>li(Et.test_name,gt.student_id,"maxScore",hr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):l.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",onDoubleClick:()=>{console.log(" Double-clicked on speaking test score:",Et.test_name),console.log(" Results state at double-click:",B),console.log(" Test result:",ze),console.log(" Student:",gt),console.log(" Test:",Et),ze&&ze.id?(console.log(" Starting column editing for speaking test:",Et.test_name),ls(Et.test_name)):console.log(" No test result ID found, cannot edit")},title:"Double-click to edit scores",children:[(()=>{const hr=c(ze),nr=hr!==null&&hr<50,gs=hr!==null&&hr>=50&&hr<70,pn=ze.retest_offered,an=hr===null?"text-gray-600":nr?"text-red-600 font-semibold":gs?"text-yellow-600":"text-green-600";return l.jsxs(dt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${an} cursor-pointer hover:opacity-90 ${pn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:nr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:xn=>{xn.preventDefault(),xn.stopPropagation(),nr&&!pn&&(console.log(" Offering retest for speaking test:",Et.test_name),n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r}))},title:pn?"Retest offered":nr?"Offer retest":'Use "View Results" button to review',children:[(()=>{const xn=ze.retest_best_score??ze.score,_n=ze.retest_best_max_score??ze.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:nr?"text-red-700":"",children:xn}),"/",l.jsx("span",{children:_n})]})})(),ze.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),ze.caught_cheating&&ze.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",ze.visibility_change_times,")"]})]})]}):ze&&ze.score!==null&&ze.score!==void 0?l.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[(()=>{const hr=c(ze),nr=hr!==null&&hr<50,gs=hr!==null&&hr>=50&&hr<70,pn=hr===null?"text-gray-600":nr?"text-red-600 font-semibold":gs?"text-yellow-600":"text-green-600",an=ze?.retest_offered===!0;return l.jsxs(dt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${pn} cursor-pointer hover:opacity-90 ${an?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:nr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:xn=>{xn.preventDefault(),xn.stopPropagation();const _n=ze?.test_type||Et?.test_type;if(!(_n==="drawing"||_n==="speaking")){if(ze?.retest_offered===!0&&(_n==="multiple_choice"||_n==="true_false"||_n==="input")){Dr(ze,Et);return}if(_n==="fill_blanks"||_n==="matching_type"||_n==="word_matching"){if(console.debug("[TeacherResults] Score pill clicked (Fill Blanks/Matching/Word Matching)",{testType:_n,isRed:nr,testResult:ze}),nr){if(ze?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal from score pill",{testResult:ze}),wt({isOpen:!0,testResult:ze});return}if(nr){if(ze?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else Dr(ze,Et)}},title:an?"Click to view retest answers":nr?"Offer retest":"",children:[(()=>{const xn=ze.retest_best_score??ze.score,_n=ze.retest_best_max_score??ze.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:nr?"text-red-700":"",children:xn}),"/",l.jsx("span",{children:_n})]})})(),ze.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),ze.caught_cheating&&ze.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",ze.visibility_change_times,")"]})]}):l.jsx("span",{className:"text-gray-400",children:"-"})},Gr)})]},xr))})})]})})]})}),[os,Ne,ar,Ue]),gl=_.useCallback((De,qe,Lt)=>!qe||qe.length===0?l.jsx(dt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:l.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):l.jsx(dt.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:l.jsx(dt.div,{className:"overflow-x-auto -mx-4 px-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:l.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-w-max",children:l.jsxs("table",{className:"w-full border-collapse text-xs min-w-max",children:[l.jsx("thead",{children:l.jsxs(dt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-16 text-center",children:"ID"}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-3 text-left font-semibold text-gray-700 ${Ue?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[160px] bg-blue-50 cursor-pointer select-none"}`,onClick:gt=>{gt.preventDefault(),gt.stopPropagation(),pe(!Ue)},title:"Toggle student name columns",children:Ue?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),l.jsx("svg",{className:"w-3 h-3 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-12 text-center",children:"No."}),l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[80px]",children:"Nickname"}),Lt.map((gt,xr)=>(gt.test_type,Yt.current.has(gt.test_name),l.jsx(dt.th,{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[100px]",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3+xr*.05},children:l.jsx("div",{className:"flex flex-col space-y-1",children:l.jsx("span",{className:"text-xs",children:gt.test_name.length>10?gt.test_name.substring(0,10)+"...":gt.test_name})})},xr)))]})}),l.jsx("tbody",{children:l.jsx(il,{children:qe.map((gt,xr)=>l.jsxs(dt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${xr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.1+xr*.03,ease:"easeOut"},whileHover:{scale:1.005,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.995},children:[l.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-center font-semibold text-gray-900",whileHover:{scale:1.03},transition:{duration:.15},children:gt.student_id}),Ue?l.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-xs w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Et=>{Et.preventDefault(),Et.stopPropagation(),pe(!1)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):l.jsxs(l.Fragment,{children:[l.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:gt.name}),l.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:gt.surname})]}),l.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-center text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:gt.number??xr+1}),l.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-600 whitespace-normal break-words",whileHover:{scale:1.01},transition:{duration:.15},children:gt.nickname||"-"}),Lt.map((Et,Gr)=>{const Pn=Ne.has(Et.test_name),ze=gt[Et.test_name];return Pn?l.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:hr=>{hr.preventDefault(),hr.stopPropagation(),ar(Et.test_name)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},Gr):l.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-sm",whileHover:{scale:1.01},transition:{duration:.15},onClick:hr=>{console.debug("[TeacherResults] TD clicked",{testResult:ze,student:gt.student_id});const nr=ze?.test_type||Et?.test_type;if(nr==="drawing"||nr==="speaking")return;const gs=c(ze),pn=gs!==null&&gs<50;if(ze?.retest_offered===!0&&(nr==="multiple_choice"||nr==="true_false"||nr==="input")){Dr(ze,Et);return}if(nr==="fill_blanks"||nr==="matching_type"||nr==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked (nested table)",{testType:nr,isRed:pn,testResult:ze}),pn){if(ze?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:gt.student_id}),n({failedStudentIds:[gt.student_id],test_type:ze.test_type,original_test_id:ze.test_id,subject_id:ze.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal (nested table)",{testResult:ze}),wt({isOpen:!0,testResult:ze});else if(pn){if(ze?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:gt.student_id}),n({failedStudentIds:[gt.student_id],test_type:ze.test_type,original_test_id:ze.test_id,subject_id:ze.subject_id,grade:t,class:r})}else Dr(ze,Et)},children:ze&&(ze.test_type==="drawing"||Et.test_type==="drawing"||ze.test_type==="speaking"||Et.test_type==="speaking"||ze.score!==null&&ze.score!==void 0)?l.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[ze.test_type==="drawing"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>hn(ze),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View"}),Yt.current.has(Et.test_name)?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:ze.max_score||100,value:_r.current[Et.test_name]?.[gt.student_id]?.score||ze.score||"",onChange:hr=>li(Et.test_name,gt.student_id,"score",hr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",min:"1",value:_r.current[Et.test_name]?.[gt.student_id]?.maxScore||ze.max_score||100,onChange:hr=>li(Et.test_name,gt.student_id,"maxScore",hr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):(()=>{const hr=c(ze),nr=hr!==null&&hr<50,gs=hr!==null&&hr>=50&&hr<70,pn=ze.retest_offered,an=hr===null?"text-gray-600":nr?"text-red-600 font-semibold":gs?"text-yellow-600":"text-green-600";return l.jsxs(dt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${an} cursor-pointer hover:opacity-90 ${pn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:nr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>ls(Et.test_name),onClick:xn=>{xn.preventDefault(),xn.stopPropagation();const _n=ze?.test_type||Et?.test_type;if(!(_n==="drawing"||_n==="speaking")){if(ze?.retest_offered===!0&&(_n==="multiple_choice"||_n==="true_false"||_n==="input")){Dr(ze,Et);return}if(nr){if(ze?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else Dr(ze,Et)}},title:pn?"Click to view retest answers":nr?"Offer retest":"Click to view answers",children:[l.jsx("span",{className:nr?"text-red-700":"",children:ze.score}),"/",l.jsx("span",{children:ze.max_score}),ze.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})()]}):ze.test_type==="speaking"||Et.test_type==="speaking"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>ke({...ze,__studentId:gt.student_id},"audio"),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View Audio"}),xt&&xt.resultId===ze.result_id?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:ze.max_score||100,value:lr,onChange:hr=>Ke(hr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("button",{onClick:()=>Gn(),disabled:ct,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:ct?"Saving...":"Save"}),l.jsx("button",{onClick:()=>En(),disabled:ct,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):(()=>{const hr=c(ze),nr=hr!==null&&hr<50,gs=hr!==null&&hr>=50&&hr<70,pn=ze.retest_offered,an=hr===null?"text-gray-600":nr?"text-red-600 font-semibold":gs?"text-yellow-600":"text-green-600";return l.jsxs(dt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${an} cursor-pointer hover:opacity-90 ${pn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:nr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>{$t({resultId:ze.result_id,score:ze.score}),Ke(ze.score?.toString()||"")},onClick:xn=>{xn.preventDefault(),xn.stopPropagation();const _n=ze?.test_type||Et?.test_type;if(!(_n==="drawing"||_n==="speaking")){if(ze?.retest_offered===!0&&(_n==="multiple_choice"||_n==="true_false"||_n==="input")){Dr(ze,Et);return}if(nr){if(ze?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else Dr(ze,Et)}},title:pn?"Click to view retest answers":nr?"Offer retest":"Click to view answers, double-click to edit score",children:[l.jsx("span",{className:nr?"text-red-700":"",children:ze.score||0}),"/",l.jsx("span",{children:ze.max_score||100}),ze.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})()]}):(()=>{const hr=c(ze),nr=hr!==null&&hr<50,gs=hr!==null&&hr>=50&&hr<70,pn=hr!==null&&hr>=70,an=ze?.retest_offered===!0;console.debug("[TeacherResults] Render pill",{studentId:gt.student_id,pct:hr,isRed:nr,isYellow:gs,isGreen:pn,score:ze.score,max:ze.max_score,percentageField:ze.percentage});const _n=`px-1 py-0.5 rounded text-xs font-medium ${hr===null?"text-gray-600":nr?"text-red-600 font-semibold":gs?"text-yellow-600":"text-green-600"} cursor-pointer hover:opacity-90 pointer-events-auto ${an?"bg-blue-50 text-blue-700 border border-blue-200":""}`;return l.jsxs(dt.div,{className:_n,style:nr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onClick:Hl=>{Hl.preventDefault(),Hl.stopPropagation();const Ei=ze?.test_type||Et?.test_type;if(!(Ei==="drawing"||Ei==="speaking")){if(ze?.retest_offered===!0&&(Ei==="multiple_choice"||Ei==="true_false"||Ei==="input")){Dr(ze,Et);return}if(nr){if(ze?.retest_offered){o("Retest is already offered","info");return}const dh=window.getComputedStyle(Hl.currentTarget).color;console.debug("[TeacherResults] Red pill clicked -> opening retest modal",{studentId:gt.student_id,className:_n,computedColor:dh}),n({failedStudentIds:[gt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else Dr(ze,Et)}},title:an?"Click to view retest answers":nr?"Offer retest":"Click to view answers",children:[l.jsx("span",{className:nr?"text-red-700":"",children:ze.score}),"/",l.jsx("span",{children:ze.max_score}),ze.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),ze.caught_cheating&&ze.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",ze.visibility_change_times,")"]})]}):l.jsx("span",{className:"text-gray-400",children:"-"})},Gr)})]},xr))})})]})})})}),[os,Ne,ar,Ue]),Ie=_.useCallback(()=>{if(!B)return null;console.log(" renderResults - results:",B),console.log(" renderResults - results.class:",B.class),console.log(" renderResults - results.unique_tests:",B.unique_tests);const De=B.class&&Array.isArray(B.class)&&B.class.length>0;if(console.log(" renderResults - hasStudentData:",De),!De)return console.log(" renderResults - No student data, showing no students message"),l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No students found for this class and semester."})});const qe=B.unique_tests||[];return console.log(" renderResults - uniqueTests:",qe),Ir.current=B,l.jsxs("div",{className:"space-y-6",children:[l.jsxs(dt.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[l.jsxs(dt.h2,{className:"text-2xl font-bold mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},children:["Test Results - Grade M",z,", Class ",z,"/",G,", Semester ",T]}),l.jsxs(dt.p,{className:"text-cyan-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:["Viewing results for ",B.subjects?.length||0," subject(s)"]}),l.jsxs(dt.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[l.jsx("button",{onClick:()=>{const Lt=B.unique_tests?.map(gt=>gt.test_name)||[];ce(new Set(Lt))},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Collapse All Tests"}),l.jsx("button",{onClick:()=>ce(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Expand All Tests"})]})]}),l.jsxs(dt.div,{className:"bg-white rounded-lg shadow p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[l.jsx(dt.h3,{className:"text-lg font-semibold text-gray-900 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:"Class Results"}),l.jsx("div",{className:"hidden md:block",children:un("All Subjects",B.class,qe)}),l.jsx("div",{className:"md:hidden",children:gl("All Subjects",B.class,qe)})]})]})},[B,un,z,G,T]),Pt=_.useCallback(()=>{if(!B||!B.class||!B.unique_tests)return;const De=["Student ID","Name","Surname","No.","Nickname",...B.unique_tests.map(Gr=>Gr.test_name)],qe=B.class.map((Gr,Pn)=>{const ze=[];return ze.push(Gr.student_id),ze.push(Gr.name),ze.push(Gr.surname),ze.push(Gr.number??Pn+1),ze.push(Gr.nickname||"-"),B.unique_tests.forEach(hr=>{const nr=Gr[hr.test_name];nr&&nr.score!==null&&nr.score!==void 0?ze.push(`${nr.score}/${nr.max_score}`):ze.push("-")}),ze}),Lt=Jb.aoa_to_sheet([De,...qe]),gt=Jb.book_new(),xr=[{wch:10},{wch:15},{wch:15},{wch:6},{wch:12},...B.unique_tests.map(()=>({wch:15}))];Lt["!cols"]=xr,Jb.book_append_sheet(gt,Lt,"Class Results");const Et=`class-results-${z}-${G}-semester-${T}.xlsx`;Qbe(gt,Et),o("Excel file exported successfully!","success")},[B,z,G,T,o]);return f?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Results..."})]})}):g?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:g}),l.jsx(rt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"flex justify-between items-center py-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Results"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",Z?Z.toLocaleString():"Never"]})]})})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class"}),P.length>0?(()=>{const De=P.reduce((qe,Lt)=>{const gt=Lt.subject||"Unknown Subject";return qe[gt]||(qe[gt]=[]),qe[gt].push(Lt),qe},{});return l.jsx("div",{className:"space-y-6",children:Object.entries(De).map(([qe,Lt])=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-3 flex flex-col sm:flex-row sm:items-center items-center",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),qe]}),l.jsxs("span",{className:"ml-0 sm:ml-2 text-sm text-gray-500 mt-1 sm:mt-0",children:["(",Lt.length," classes)"]})]}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Lt.map((gt,xr)=>l.jsxs(rt,{variant:z===gt.grade&&G===gt.class?"primary":"outline",onClick:()=>Is(gt.grade,gt.class),className:"px-3 py-1 text-xs font-medium min-w-[60px]",children:[gt.grade,"/",gt.class]},`${gt.grade}-${gt.class}-${xr}`))})]},qe))})})():l.jsx("p",{className:"text-gray-500",children:"No classes available"})]}),G&&Jn(),G&&B&&l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[z," ",G," - Test Results ",je?`(Term ${Me?.terms.find(De=>De.id===je)?.term})`:""]}),l.jsx("div",{className:"flex space-x-3",children:l.jsxs("button",{type:"button",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",onClick:Pt,children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-4 h-4 object-contain"}),l.jsx("span",{className:"font-medium text-sm",children:"Export Excel"})]})})]}),Ie()]}),G&&!B&&l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-200 border-t-blue-500"}),l.jsx("span",{className:"text-gray-600",children:"Loading results"})]})})})]})}),it&&at&&l.jsx(fb,{children:l.jsx(yH,{drawing:it,isOpen:at,onClose:()=>pt(!1),isTeacherView:!0,onSaveScore:async({resultId:De,score:qe,maxScore:Lt})=>{try{const gt=await(window.tokenManager?.getToken()||ua.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Wd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:gt?`Bearer ${gt}`:""},body:JSON.stringify({resultId:De,score:qe,maxScore:Lt})})).ok)throw new Error("Failed to save");await sn(T,!0)}catch{o("Failed to save drawing score","error")}}})}),l.jsx(fb,{children:l.jsx(ife,{onScoreUpdate:De=>{G&&sn(T,!0),Ze&&ut(qe=>({...qe,score:De.score,max_score:De.maxScore,percentage:De.percentage}))},isOpen:ye,onClose:()=>{Pe(!1),ut(null),de(null)},testResult:Ze,questions:Je,isLoadingQuestions:Be})}),l.jsx(fb,{children:l.jsx(ofe,{isOpen:ot.isOpen,onClose:()=>wt({isOpen:!1,testResult:null}),testResult:ot.testResult,onScoreUpdate:De=>{G&&sn(T,!0)}})}),nt&&Wt&&l.jsx(fb,{children:l.jsx(afe,{result:nt,isOpen:Wt,onClose:()=>rr(!1),initialTab:nt.__initialTab||"overview",editingSpeakingScore:xt,tempSpeakingScore:lr,isSavingSpeakingScore:ct,onStartSpeakingScoreEdit:Jr,onSaveSpeakingScore:Gn,onCancelSpeakingScoreEdit:En,onTempSpeakingScoreChange:Ke})})]})},c4e={getTestPerformance:async(e,t=null)=>{try{await cu.loadAcademicCalendar();const n=cu.getCurrentTerm()?.id;if(!n)throw new Error("No current academic period found");console.log(` Fetching test performance for teacher ${e}, period ${n}, class: ${t||"all"}`);let s=`/.netlify/functions/get-test-performance?teacher_id=${e}&academic_period_id=${n}`;if(t){const[o,c]=t.split("/"),u=o.startsWith("M")?o:`M${o}`;s+=`&grade=${u}&class=${c}`}const a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch performance data");return console.log(` Performance data loaded: ${i.count} tests`),i.data}catch(r){throw console.error(" Error fetching test performance:",r),r}}};function PV(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=PV(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ds(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=PV(e))&&(n&&(n+=" "),n+=t);return n}var Q5={},Z5={},bO;function u4e(){return bO||(bO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Z5)),Z5}var e6={},_O;function MV(){return _O||(_O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(e6)),e6}var t6={},SO;function FV(){return SO||(SO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(t6)),t6}var r6={},kO;function $N(){return kO||(kO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let a=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<s;){const u=r[a];o?u==="\\"&&a+1<s?(a++,i+=r[a]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,a++}return i&&n.push(i),n}e.toPath=t})(r6)),r6}var TO;function zN(){return TO||(TO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u4e(),r=MV(),n=FV(),s=$N();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?a(o,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=a})(Q5)),Q5}var n6,CO;function d4e(){return CO||(CO=1,n6=zN().get),n6}var f4e=d4e();const y3=Ec(f4e);var s6={exports:{}},Xn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NO;function h4e(){if(NO)return Xn;NO=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function b(E){if(typeof E=="object"&&E!==null){var j=E.$$typeof;switch(j){case t:switch(E=E.type,E){case c:case u:case n:case a:case s:case f:return E;default:switch(E=E&&E.$$typeof,E){case o:case d:case x:case g:case i:return E;default:return j}}case r:return j}}}function C(E){return b(E)===u}return Xn.AsyncMode=c,Xn.ConcurrentMode=u,Xn.ContextConsumer=o,Xn.ContextProvider=i,Xn.Element=t,Xn.ForwardRef=d,Xn.Fragment=n,Xn.Lazy=x,Xn.Memo=g,Xn.Portal=r,Xn.Profiler=a,Xn.StrictMode=s,Xn.Suspense=f,Xn.isAsyncMode=function(E){return C(E)||b(E)===c},Xn.isConcurrentMode=C,Xn.isContextConsumer=function(E){return b(E)===o},Xn.isContextProvider=function(E){return b(E)===i},Xn.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},Xn.isForwardRef=function(E){return b(E)===d},Xn.isFragment=function(E){return b(E)===n},Xn.isLazy=function(E){return b(E)===x},Xn.isMemo=function(E){return b(E)===g},Xn.isPortal=function(E){return b(E)===r},Xn.isProfiler=function(E){return b(E)===a},Xn.isStrictMode=function(E){return b(E)===s},Xn.isSuspense=function(E){return b(E)===f},Xn.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===n||E===u||E===a||E===s||E===f||E===h||typeof E=="object"&&E!==null&&(E.$$typeof===x||E.$$typeof===g||E.$$typeof===i||E.$$typeof===o||E.$$typeof===d||E.$$typeof===v||E.$$typeof===T||E.$$typeof===k||E.$$typeof===y)},Xn.typeOf=b,Xn}var EO;function m4e(){return EO||(EO=1,s6.exports=h4e()),s6.exports}m4e();var pc=e=>e===0?0:e>0?1:-1,Tc=e=>typeof e=="number"&&e!=+e,nm=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ln=e=>(typeof e=="number"||e instanceof Number)&&!Tc(e),Zu=e=>ln(e)||typeof e=="string",g4e=0,Wv=e=>{var t=++g4e;return"".concat(e||"").concat(t)},Yf=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ln(t)&&typeof t!="string")return n;var a;if(nm(t)){if(r==null)return n;var i=t.indexOf("%");a=r*parseFloat(t.slice(0,i))/100}else a=+t;return Tc(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},DV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Hd(e,t,r){return ln(e)&&ln(t)?e+r*(t-e):t}function OV(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):y3(n,t))===r)}var ki=e=>e===null||typeof e>"u",UN=e=>ki(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),p4e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function WN(e){if(typeof e!="string")return!1;var t=p4e;return t.includes(e)}var x4e=["viewBox","children"],AO=["points","pathLength"],a6={svg:x4e,polygon:AO,polyline:AO},HN=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{WN(s)&&(n[s]=(a=>r[s](r,a)))}),n},y4e=(e,t,r)=>n=>(e(t,r,n),null),v4e=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];WN(s)&&typeof a=="function"&&(n||(n={}),n[s]=y4e(a,t,r))}),n},w4e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function RV(e){if(typeof e!="string")return!1;var t=w4e;return t.includes(e)}function ng(e){var t=Object.entries(e).filter(r=>{var[n]=r;return RV(n)});return Object.fromEntries(t)}var IV=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,b4e=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(s=n&&a6?.[n])!==null&&s!==void 0?s:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&a.includes(t)||RV(t)),c=!!r&&WN(t);return i||o||c},Ji=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(_.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(a=>{var i;b4e((i=n)===null||i===void 0?void 0:i[a],a,t,r)&&(s[a]=n[a])}),s},_4e=["children","width","height","viewBox","className","style","title","desc"];function rT(){return rT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rT.apply(null,arguments)}function S4e(e,t){if(e==null)return{};var r,n,s=k4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function k4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var LV=_.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:i,style:o,title:c,desc:u}=e,d=S4e(e,_4e),f=a||{width:n,height:s,x:0,y:0},h=Ds("recharts-surface",i);return _.createElement("svg",rT({},Ji(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),_.createElement("title",null,c),_.createElement("desc",null,u),r)}),T4e=["children","className"];function nT(){return nT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nT.apply(null,arguments)}function C4e(e,t){if(e==null)return{};var r,n,s=N4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function N4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var E1=_.forwardRef((e,t)=>{var{children:r,className:n}=e,s=C4e(e,T4e),a=Ds("recharts-layer",n);return _.createElement("g",nT({className:a},Ji(s,!0),{ref:t}),r)}),E4e=_.createContext(null);function la(e){return function(){return e}}const sT=Math.PI,aT=2*sT,Kh=1e-6,A4e=aT-Kh;function BV(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function j4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BV;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class P4e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BV:j4e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,c=n-t,u=s-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Kh)if(!(Math.abs(f*c-u*d)>Kh)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-i,x=s-o,y=c*c+u*u,v=g*g+x*x,T=Math.sqrt(y),k=Math.sqrt(h),b=a*Math.tan((sT-Math.acos((y+h-v)/(2*T*k)))/2),C=b/k,E=b/T;Math.abs(C-1)>Kh&&this._append`L${t+C*d},${r+C*f}`,this._append`A${a},${a},0,0,${+(f*g>d*x)},${this._x1=t+E*c},${this._y1=r+E*u}`}}arc(t,r,n,s,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),c=n*Math.sin(s),u=t+o,d=r+c,f=1^i,h=i?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Kh||Math.abs(this._y1-d)>Kh)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%aT+aT),h>A4e?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Kh&&this._append`A${n},${n},0,${+(h>=sT)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function $V(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new P4e(t)}function GN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zV(e){this._context=e}zV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function v3(e){return new zV(e)}function UV(e){return e[0]}function WV(e){return e[1]}function HV(e,t){var r=la(!0),n=null,s=v3,a=null,i=$V(o);e=typeof e=="function"?e:e===void 0?UV:la(e),t=typeof t=="function"?t:t===void 0?WV:la(t);function o(c){var u,d=(c=GN(c)).length,f,h=!1,g;for(n==null&&(a=s(g=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,u,c),+t(f,u,c));if(g)return a=null,g+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:la(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:la(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:la(!!c),o):r},o.curve=function(c){return arguments.length?(s=c,n!=null&&(a=s(n)),o):s},o.context=function(c){return arguments.length?(c==null?n=a=null:a=s(n=c),o):n},o}function kb(e,t,r){var n=null,s=la(!0),a=null,i=v3,o=null,c=$V(u);e=typeof e=="function"?e:e===void 0?UV:la(+e),t=typeof t=="function"?t:la(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?WV:la(+r);function u(f){var h,g,x,y=(f=GN(f)).length,v,T=!1,k,b=new Array(y),C=new Array(y);for(a==null&&(o=i(k=c())),h=0;h<=y;++h){if(!(h<y&&s(v=f[h],h,f))===T)if(T=!T)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=h-1;x>=g;--x)o.point(b[x],C[x]);o.lineEnd(),o.areaEnd()}T&&(b[h]=+e(v,h,f),C[h]=+t(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):C[h]))}if(k)return o=null,k+""||null}function d(){return HV().defined(s).curve(i).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:la(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:la(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:la(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:la(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:la(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:la(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:la(!!f),u):s},u.curve=function(f){return arguments.length?(i=f,a!=null&&(o=i(a)),u):i},u.context=function(f){return arguments.length?(f==null?a=o=null:o=i(a=f),u):a},u}class GV{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function M4e(e){return new GV(e,!0)}function F4e(e){return new GV(e,!1)}function Y4(){}function X4(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function VV(e){this._context=e}VV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:X4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:X4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function D4e(e){return new VV(e)}function qV(e){this._context=e}qV.prototype={areaStart:Y4,areaEnd:Y4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:X4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function O4e(e){return new qV(e)}function KV(e){this._context=e}KV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:X4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function R4e(e){return new KV(e)}function YV(e){this._context=e}YV.prototype={areaStart:Y4,areaEnd:Y4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function I4e(e){return new YV(e)}function jO(e){return e<0?-1:1}function PO(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(jO(a)+jO(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function MO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function i6(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function J4(e){this._context=e}J4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:i6(this,this._t0,MO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,i6(this,MO(this,r=PO(this,e,t)),r);break;default:i6(this,this._t0,r=PO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function XV(e){this._context=new JV(e)}(XV.prototype=Object.create(J4.prototype)).point=function(e,t){J4.prototype.point.call(this,t,e)};function JV(e){this._context=e}JV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function L4e(e){return new J4(e)}function B4e(e){return new XV(e)}function QV(e){this._context=e}QV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=FO(e),s=FO(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function FO(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),i=new Array(r);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function $4e(e){return new QV(e)}function w3(e,t){this._context=e,this._t=t}w3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function z4e(e){return new w3(e,.5)}function U4e(e){return new w3(e,0)}function W4e(e){return new w3(e,1)}function Jp(e,t){if((i=e.length)>1)for(var r=1,n,s,a=e[t[0]],i,o=a.length;r<i;++r)for(s=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function iT(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function H4e(e,t){return e[t]}function G4e(e){const t=[];return t.key=e,t}function V4e(){var e=la([]),t=iT,r=Jp,n=H4e;function s(a){var i=Array.from(e.apply(this,arguments),G4e),o,c=i.length,u=-1,d;for(const f of a)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,a)]).data=f;for(o=0,d=GN(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:la(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:la(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?iT:typeof a=="function"?a:la(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Jp,s):r},s}function q4e(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,i;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}Jp(e,t)}}function K4e(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Jp(e,t)}}function Y4e(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,i;n<a;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,g=(f-h)/2,x=0;x<o;++x){var y=e[t[x]],v=y[n][1]||0,T=y[n-1][1]||0;g+=v-T}c+=f,u+=g*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,Jp(e,t)}}var o6={},l6={},DO;function X4e(){return DO||(DO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const i=r[a],o=n(i);s.has(o)||s.set(o,i)}return Array.from(s.values())}e.uniqBy=t})(l6)),l6}var c6={},OO;function ZV(){return OO||(OO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(c6)),c6}var u6={},d6={},f6={},RO;function J4e(){return RO||(RO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(f6)),f6}var IO;function VN(){return IO||(IO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J4e();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(d6)),d6}var h6={},LO;function Q4e(){return LO||(LO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(h6)),h6}var BO;function Z4e(){return BO||(BO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VN(),r=Q4e();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(u6)),u6}var m6={},g6={},$O;function e_e(){return $O||($O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zN();function r(n){return function(s){return t.get(s,n)}}e.property=r})(g6)),g6}var p6={},x6={},y6={},v6={},zO;function eq(){return zO||(zO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(v6)),v6}var w6={},UO;function tq(){return UO||(UO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(w6)),w6}var b6={},WO;function rq(){return WO||(WO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(b6)),b6}var HO;function t_e(){return HO||(HO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qN(),r=eq(),n=tq(),s=rq();function a(f,h,g){return typeof g!="function"?t.isMatch(f,h):i(f,h,function x(y,v,T,k,b,C){const E=g(y,v,T,k,b,C);return E!==void 0?!!E:i(y,v,x,C)},new Map)}function i(f,h,g,x){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,g,x);case"function":return Object.keys(h).length>0?i(f,{...h},g,x):s.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:s.eq(f,h)}}function o(f,h,g,x){if(h==null)return!0;if(Array.isArray(h))return u(f,h,g,x);if(h instanceof Map)return c(f,h,g,x);if(h instanceof Set)return d(f,h,g,x);const y=Object.keys(h);if(f==null)return y.length===0;if(y.length===0)return!0;if(x&&x.has(h))return x.get(h)===f;x&&x.set(h,f);try{for(let v=0;v<y.length;v++){const T=y[v];if(!n.isPrimitive(f)&&!(T in f)||h[T]===void 0&&f[T]!==void 0||h[T]===null&&f[T]!==null||!g(f[T],h[T],T,f,h,x))return!1}return!0}finally{x&&x.delete(h)}}function c(f,h,g,x){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,v]of h.entries()){const T=f.get(y);if(g(T,v,y,f,h,x)===!1)return!1}return!0}function u(f,h,g,x){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let v=0;v<h.length;v++){const T=h[v];let k=!1;for(let b=0;b<f.length;b++){if(y.has(b))continue;const C=f[b];let E=!1;if(g(C,T,v,f,h,x)&&(E=!0),E){y.add(b),k=!0;break}}if(!k)return!1}return!0}function d(f,h,g,x){return h.size===0?!0:f instanceof Set?u([...f],[...h],g,x):!1}e.isMatchWith=a,e.isSetMatch=d})(y6)),y6}var GO;function qN(){return GO||(GO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t_e();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(x6)),x6}var _6={},S6={},k6={},VO;function r_e(){return VO||(VO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(k6)),k6}var T6={},qO;function nq(){return qO||(qO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(T6)),T6}var C6={},KO;function sq(){return KO||(KO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",g="[object Object]",x="[object Error]",y="[object DataView]",v="[object Uint8Array]",T="[object Uint8ClampedArray]",k="[object Uint16Array]",b="[object Uint32Array]",C="[object BigUint64Array]",E="[object Int8Array]",j="[object Int16Array]",P="[object Int32Array]",A="[object BigInt64Array]",M="[object Float32Array]",F="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=C,e.booleanTag=s,e.dataViewTag=y,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=M,e.float64ArrayTag=F,e.functionTag=f,e.int16ArrayTag=j,e.int32ArrayTag=P,e.int8ArrayTag=E,e.mapTag=c,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=k,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=T})(C6)),C6}var N6={},YO;function n_e(){return YO||(YO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(N6)),N6}var XO;function aq(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r_e(),r=nq(),n=sq(),s=tq(),a=n_e();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,g=new Map,x=void 0){const y=x?.(d,f,h,g);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const v=new Array(d.length);g.set(d,v);for(let T=0;T<d.length;T++)v[T]=o(d[T],T,h,g,x);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;g.set(d,v);for(const[T,k]of d)v.set(T,o(k,T,h,g,x));return v}if(d instanceof Set){const v=new Set;g.set(d,v);for(const T of d)v.add(o(T,void 0,h,g,x));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,v);for(let T=0;T<d.length;T++)v[T]=o(d[T],T,h,g,x);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,v),c(v,d,h,g,x),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return g.set(d,v),c(v,d,h,g,x),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return g.set(d,v),c(v,d,h,g,x),v}if(d instanceof Error){const v=new d.constructor;return g.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,g,x),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return g.set(d,v),c(v,d,h,g,x),v}return d}function c(d,f,h=d,g,x){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const T=y[v],k=Object.getOwnPropertyDescriptor(d,T);(k==null||k.writable)&&(d[T]=o(f[T],T,h,g,x))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c})(S6)),S6}var JO;function s_e(){return JO||(JO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aq();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(_6)),_6}var QO;function a_e(){return QO||(QO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qN(),r=s_e();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(p6)),p6}var E6={},A6={},j6={},ZO;function i_e(){return ZO||(ZO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aq(),r=sq();function n(s,a){return t.cloneDeepWith(s,(i,o,c,u)=>{const d=a?.(i,o,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s?.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(j6)),j6}var eR;function o_e(){return eR||(eR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i_e();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(A6)),A6}var P6={},M6={},tR;function iq(){return tR||(tR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(M6)),M6}var F6={},rR;function l_e(){return rR||(rR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nq();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(F6)),F6}var nR;function c_e(){return nR||(nR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MV(),r=iq(),n=l_e(),s=$N();function a(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&i?.[o]==null?c=s.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(P6)),P6}var sR;function u_e(){return sR||(sR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qN(),r=FV(),n=o_e(),s=zN(),a=c_e();function i(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,o);return d===void 0?a.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i})(E6)),E6}var aR;function d_e(){return aR||(aR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZV(),r=e_e(),n=a_e(),s=u_e();function a(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?s.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=a})(m6)),m6}var iR;function f_e(){return iR||(iR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X4e(),r=ZV(),n=Z4e(),s=d_e();function a(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),s.iteratee(o)):[]}e.uniqBy=a})(o6)),o6}var D6,oR;function h_e(){return oR||(oR=1,D6=f_e().uniqBy),D6}var m_e=h_e();const lR=Ec(m_e);function g_e(e,t,r){return t===!0?lR(e,r):typeof t=="function"?lR(e,t):e}var O6={exports:{}},R6={},I6={exports:{}},L6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cR;function p_e(){if(cR)return L6;cR=1;var e=Gm();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var g=h(),x=n({inst:{value:g,getSnapshot:h}}),y=x[0].inst,v=x[1];return a(function(){y.value=g,y.getSnapshot=h,c(y)&&v({inst:y})},[f,g,h]),s(function(){return c(y)&&v({inst:y}),f(function(){c(y)&&v({inst:y})})},[f]),i(g),g}function c(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!r(f,g)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return L6.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,L6}var uR;function x_e(){return uR||(uR=1,I6.exports=p_e()),I6.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR;function y_e(){if(dR)return R6;dR=1;var e=Gm(),t=x_e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return R6.useSyncExternalStoreWithSelector=function(u,d,f,h,g){var x=a(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=o(function(){function T(j){if(!k){if(k=!0,b=j,j=h(j),g!==void 0&&y.hasValue){var P=y.value;if(g(P,j))return C=P}return C=j}if(P=C,n(b,j))return P;var A=h(j);return g!==void 0&&g(P,A)?(b=j,P):(b=j,C=A)}var k=!1,b,C,E=f===void 0?null:f;return[function(){return T(d())},E===null?void 0:function(){return T(E())}]},[d,f,h,g]);var v=s(u,x[0],x[1]);return i(function(){y.hasValue=!0,y.value=v},[v]),c(v),v},R6}var fR;function v_e(){return fR||(fR=1,O6.exports=y_e()),O6.exports}var w_e=v_e(),KN=_.createContext(null),b_e=e=>e,Vo=()=>{var e=_.useContext(KN);return e?e.store.dispatch:b_e},Qb=()=>{},__e=()=>Qb,S_e=(e,t)=>e===t;function Xr(e){var t=_.useContext(KN);return w_e.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:__e,t?t.store.getState:Qb,t?t.store.getState:Qb,t?e:Qb,S_e)}function k_e(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function T_e(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function C_e(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var hR=e=>Array.isArray(e)?e:[e];function N_e(e){const t=Array.isArray(e[0])?e[0]:e;return C_e(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function E_e(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var A_e=class{constructor(e){this.value=e}deref(){return this.value}},j_e=typeof WeakRef<"u"?WeakRef:A_e,P_e=0,mR=1;function Tb(){return{s:P_e,v:void 0,o:null,p:null}}function oq(e,t={}){let r=Tb();const{resultEqualityCheck:n}=t;let s,a=0;function i(){let o=r;const{length:c}=arguments;for(let f=0,h=c;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const y=x.get(g);y===void 0?(o=Tb(),x.set(g,o)):o=y}else{let x=o.p;x===null&&(o.p=x=new Map);const y=x.get(g);y===void 0?(o=Tb(),x.set(g,o)):o=y}}const u=o;let d;if(o.s===mR)d=o.v;else if(d=e.apply(null,arguments),a++,n){const f=s?.deref?.()??s;f!=null&&n(f,d)&&(d=f,a!==0&&a--),s=typeof d=="object"&&d!==null||typeof d=="function"?new j_e(d):d}return u.s=mR,u.v=d,d}return i.clearCache=()=>{r=Tb(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function M_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,i=0,o,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),k_e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:g=oq,argsMemoizeOptions:x=[]}=d,y=hR(h),v=hR(x),T=N_e(s),k=f(function(){return a++,u.apply(null,arguments)},...y),b=g(function(){i++;const E=E_e(T,arguments);return o=k.apply(null,E),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:k,dependencies:T,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var It=M_e(oq),F_e=Object.assign((e,t=It)=>{T_e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>F_e}),B6={},$6={},z6={},gR;function D_e(){return gR||(gR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const i=t(n),o=t(s);if(i===o&&i===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?o-i:i-o}return 0};e.compareValues=r})(z6)),z6}var U6={},W6={},pR;function lq(){return pR||(pR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(W6)),W6}var xR;function O_e(){return xR||(xR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lq(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,i){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||i!=null&&Object.hasOwn(i,a)}e.isKey=s})(U6)),U6}var yR;function R_e(){return yR||(yR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D_e(),r=O_e(),n=$N();function s(a,i,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const u=(g,x)=>{let y=g;for(let v=0;v<x.length&&y!=null;++v)y=y[x[v]];return y},d=(g,x)=>x==null||g==null?x:typeof g=="object"&&"key"in g?Object.hasOwn(x,g.key)?x[g.key]:u(x,g.path):typeof g=="function"?g(x):Array.isArray(g)?u(x,g):typeof x=="object"?x[g]:x,f=i.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return a.map(g=>({original:g,criteria:f.map(x=>d(x,g))})).slice().sort((g,x)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(g.criteria[y],x.criteria[y],o[y]);if(v!==0)return v}return 0}).map(g=>g.original)}e.orderBy=s})($6)),$6}var H6={},vR;function I_e(){return vR||(vR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<a?i(d,c+1):s.push(d)}};return i(r,0),s}e.flatten=t})(H6)),H6}var G6={},wR;function cq(){return wR||(wR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iq(),r=VN(),n=eq(),s=rq();function a(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?s.eq(c[o],i):!1}e.isIterateeCall=a})(G6)),G6}var bR;function L_e(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R_e(),r=I_e(),n=cq();function s(a,...i){const o=i.length;return o>1&&n.isIterateeCall(a,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(a,r.flatten(i),["asc"])}e.sortBy=s})(B6)),B6}var V6,_R;function B_e(){return _R||(_R=1,V6=L_e().sortBy),V6}var $_e=B_e();const b3=Ec($_e);var uq=e=>e.legend.settings,z_e=e=>e.legend.size,U_e=e=>e.legend.payload;It([U_e,uq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?b3(n,r):n});var Cb=1;function W_e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),n=_.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),i={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(i.height-t.height)>Cb||Math.abs(i.left-t.left)>Cb||Math.abs(i.top-t.top)>Cb||Math.abs(i.width-t.width)>Cb)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function $i(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var H_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",SR=H_e,q6=()=>Math.random().toString(36).substring(7).split("").join("."),G_e={INIT:`@@redux/INIT${q6()}`,REPLACE:`@@redux/REPLACE${q6()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${q6()}`},Q4=G_e;function YN(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function dq(e,t,r){if(typeof e!="function")throw new Error($i(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error($i(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error($i(1));return r(dq)(e,t)}let n=e,s=t,a=new Map,i=a,o=0,c=!1;function u(){i===a&&(i=new Map,a.forEach((v,T)=>{i.set(T,v)}))}function d(){if(c)throw new Error($i(3));return s}function f(v){if(typeof v!="function")throw new Error($i(4));if(c)throw new Error($i(5));let T=!0;u();const k=o++;return i.set(k,v),function(){if(T){if(c)throw new Error($i(6));T=!1,u(),i.delete(k),a=null}}}function h(v){if(!YN(v))throw new Error($i(7));if(typeof v.type>"u")throw new Error($i(8));if(typeof v.type!="string")throw new Error($i(17));if(c)throw new Error($i(9));try{c=!0,s=n(s,v)}finally{c=!1}return(a=i).forEach(k=>{k()}),v}function g(v){if(typeof v!="function")throw new Error($i(10));n=v,h({type:Q4.REPLACE})}function x(){const v=f;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error($i(11));function k(){const C=T;C.next&&C.next(d())}return k(),{unsubscribe:v(k)}},[SR](){return this}}}return h({type:Q4.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:g,[SR]:x}}function V_e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Q4.INIT})>"u")throw new Error($i(12));if(typeof r(void 0,{type:Q4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($i(13))})}function fq(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const i=t[a];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let s;try{V_e(r)}catch(a){s=a}return function(i={},o){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],g=i[f],x=h(g,o);if(typeof x>"u")throw o&&o.type,new Error($i(14));u[f]=x,c=c||x!==g}return c=c||n.length!==Object.keys(i).length,c?u:i}}function Z4(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function q_e(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error($i(15))};const i={getState:s.getState,dispatch:(c,...u)=>a(c,...u)},o=e.map(c=>c(i));return a=Z4(...o)(s.dispatch),{...s,dispatch:a}}}function hq(e){return YN(e)&&"type"in e&&typeof e.type=="string"}var mq=Symbol.for("immer-nothing"),kR=Symbol.for("immer-draftable"),$l=Symbol.for("immer-state");function Zc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qp=Object.getPrototypeOf;function $m(e){return!!e&&!!e[$l]}function h0(e){return e?gq(e)||Array.isArray(e)||!!e[kR]||!!e.constructor?.[kR]||P2(e)||S3(e):!1}var K_e=Object.prototype.constructor.toString();function gq(e){if(!e||typeof e!="object")return!1;const t=Qp(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===K_e}function e_(e,t){_3(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function _3(e){const t=e[$l];return t?t.type_:Array.isArray(e)?1:P2(e)?2:S3(e)?3:0}function oT(e,t){return _3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pq(e,t,r){const n=_3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Y_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function P2(e){return e instanceof Map}function S3(e){return e instanceof Set}function Yh(e){return e.copy_||e.base_}function lT(e,t){if(P2(e))return new Map(e);if(S3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=gq(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[$l];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const i=s[a],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Qp(e),n)}else{const n=Qp(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function XN(e,t=!1){return k3(e)||$m(e)||!h0(e)||(_3(e)>1&&Object.defineProperties(e,{set:{value:Nb},add:{value:Nb},clear:{value:Nb},delete:{value:Nb}}),Object.freeze(e),t&&Object.values(e).forEach(r=>XN(r,!0))),e}function Nb(){Zc(2)}function k3(e){return Object.isFrozen(e)}var X_e={};function zm(e){const t=X_e[e];return t||Zc(0,e),t}var Hv;function xq(){return Hv}function J_e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TR(e,t){t&&(zm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cT(e){uT(e),e.drafts_.forEach(Q_e),e.drafts_=null}function uT(e){e===Hv&&(Hv=e.parent_)}function CR(e){return Hv=J_e(Hv,e)}function Q_e(e){const t=e[$l];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function NR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[$l].modified_&&(cT(t),Zc(4)),h0(e)&&(e=t_(t,e),t.parent_||r_(t,e)),t.patches_&&zm("Patches").generateReplacementPatches_(r[$l].base_,e,t.patches_,t.inversePatches_)):e=t_(t,r,[]),cT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==mq?e:void 0}function t_(e,t,r){if(k3(t))return t;const n=t[$l];if(!n)return e_(t,(s,a)=>ER(e,n,t,s,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return r_(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let a=s,i=!1;n.type_===3&&(a=new Set(s),s.clear(),i=!0),e_(a,(o,c)=>ER(e,n,s,o,c,r,i)),r_(e,s,!1),r&&e.patches_&&zm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function ER(e,t,r,n,s,a,i){if($m(s)){const o=a&&t&&t.type_!==3&&!oT(t.assigned_,n)?a.concat(n):void 0,c=t_(e,s,o);if(pq(r,n,c),$m(c))e.canAutoFreeze_=!1;else return}else i&&r.add(s);if(h0(s)&&!k3(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;t_(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(P2(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&r_(e,s)}}function r_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&XN(t,r)}function Z_e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:xq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=JN;r&&(s=[n],a=Gv);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return n.draft_=o,n.revoke_=i,o}var JN={get(e,t){if(t===$l)return e;const r=Yh(e);if(!oT(r,t))return e3e(e,r,t);const n=r[t];return e.finalized_||!h0(n)?n:n===K6(e.base_,t)?(Y6(e),e.copy_[t]=fT(n,e)):n},has(e,t){return t in Yh(e)},ownKeys(e){return Reflect.ownKeys(Yh(e))},set(e,t,r){const n=yq(Yh(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=K6(Yh(e),t),a=s?.[$l];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Y_e(r,s)&&(r!==void 0||oT(e.base_,t)))return!0;Y6(e),dT(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return K6(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Y6(e),dT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Yh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Zc(11)},getPrototypeOf(e){return Qp(e.base_)},setPrototypeOf(){Zc(12)}},Gv={};e_(JN,(e,t)=>{Gv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Gv.deleteProperty=function(e,t){return Gv.set.call(this,e,t,void 0)};Gv.set=function(e,t,r){return JN.set.call(this,e[0],t,r,e[0])};function K6(e,t){const r=e[$l];return(r?Yh(r):e)[t]}function e3e(e,t,r){const n=yq(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function yq(e,t){if(!(t in e))return;let r=Qp(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Qp(r)}}function dT(e){e.modified_||(e.modified_=!0,e.parent_&&dT(e.parent_))}function Y6(e){e.copy_||(e.copy_=lT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var t3e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const i=this;return function(c=a,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Zc(6),n!==void 0&&typeof n!="function"&&Zc(7);let s;if(h0(t)){const a=CR(this),i=fT(t,void 0);let o=!0;try{s=r(i),o=!1}finally{o?cT(a):uT(a)}return TR(a,n),NR(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===mq&&(s=void 0),this.autoFreeze_&&XN(s,!0),n){const a=[],i=[];zm("Patches").generateReplacementPatches_(t,s,a,i),n(a,i)}return s}else Zc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){h0(e)||Zc(8),$m(e)&&(e=n0(e));const t=CR(this),r=fT(e,void 0);return r[$l].isManual_=!0,uT(t),r}finishDraft(e,t){const r=e&&e[$l];(!r||!r.isManual_)&&Zc(9);const{scope_:n}=r;return TR(n,t),NR(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=zm("Patches").applyPatches_;return $m(e)?n(e,t):this.produce(e,s=>n(s,t))}};function fT(e,t){const r=P2(e)?zm("MapSet").proxyMap_(e,t):S3(e)?zm("MapSet").proxySet_(e,t):Z_e(e,t);return(t?t.scope_:xq()).drafts_.push(r),r}function n0(e){return $m(e)||Zc(10,e),vq(e)}function vq(e){if(!h0(e)||k3(e))return e;const t=e[$l];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=lT(e,t.scope_.immer_.useStrictShallowCopy_)}else r=lT(e,!0);return e_(r,(n,s)=>{pq(r,n,vq(s))}),t&&(t.finalized_=!1),r}var r3e=new t3e,wq=r3e.produce;function bq(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var n3e=bq(),s3e=bq,a3e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Z4:Z4.apply(null,arguments)};function Cc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Il(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>hq(n)&&n.type===e,r}var _q=class By extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,By.prototype)}static get[Symbol.species](){return By}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new By(...t[0].concat(this)):new By(...t.concat(this))}};function AR(e){return h0(e)?wq(e,()=>{}):e}function Eb(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function i3e(e){return typeof e=="boolean"}var o3e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let i=new _q;return r&&(i3e(r)?i.push(n3e):i.push(s3e(r.extraArgument))),i},l3e="RTK_autoBatch",jR=e=>t=>{setTimeout(t,e)},c3e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jR(10):e.type==="callback"?e.queueNotification:jR(e.timeout),u=()=>{i=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){try{return s=!d?.meta?.[l3e],a=!s,a&&(i||(i=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},u3e=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new _q(e);return n&&s.push(c3e(typeof n=="object"?n:void 0)),s};function d3e(e){const t=o3e(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(YN(r))o=fq(r);else throw new Error(Il(1));let c;typeof n=="function"?c=n(t):c=t();let u=Z4;s&&(u=a3e({trace:!1,...typeof s=="object"&&s}));const d=q_e(...c),f=u3e(d);let h=typeof i=="function"?i(f):f();const g=u(...h);return dq(o,a,g)}function Sq(e){const t={},r=[];let n;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Il(28));if(o in t)throw new Error(Il(29));return t[o]=i,s},addAsyncThunk(a,i){return i.pending&&(t[a.pending.type]=i.pending),i.rejected&&(t[a.rejected.type]=i.rejected),i.fulfilled&&(t[a.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return r.push({matcher:a,reducer:i}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}function f3e(e){return typeof e=="function"}function h3e(e,t){let[r,n,s]=Sq(t),a;if(f3e(e))a=()=>AR(e());else{const o=AR(e);a=()=>o}function i(o=a(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if($m(d)){const g=f(d,c);return g===void 0?d:g}else{if(h0(d))return wq(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=a,i}var m3e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",g3e=(e=21)=>{let t="",r=e;for(;r--;)t+=m3e[Math.random()*64|0];return t},p3e=Symbol.for("rtk-slice-createasyncthunk");function x3e(e,t){return`${e}/${t}`}function y3e({creators:e}={}){const t=e?.asyncThunk?.[p3e];return function(n){const{name:s,reducerPath:a=s}=n;if(!s)throw new Error(Il(11));const i=(typeof n.reducers=="function"?n.reducers(w3e()):n.reducers)||{},o=Object.keys(i),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,C){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Il(12));if(E in c.sliceCaseReducersByType)throw new Error(Il(13));return c.sliceCaseReducersByType[E]=C,u},addMatcher(b,C){return c.sliceMatchers.push({matcher:b,reducer:C}),u},exposeAction(b,C){return c.actionCreators[b]=C,u},exposeCaseReducer(b,C){return c.sliceCaseReducersByName[b]=C,u}};o.forEach(b=>{const C=i[b],E={reducerName:b,type:x3e(s,b),createNotation:typeof n.reducers=="function"};_3e(C)?k3e(E,C,u,t):b3e(E,C,u)});function d(){const[b={},C=[],E=void 0]=typeof n.extraReducers=="function"?Sq(n.extraReducers):[n.extraReducers],j={...b,...c.sliceCaseReducersByType};return h3e(n.initialState,P=>{for(let A in j)P.addCase(A,j[A]);for(let A of c.sliceMatchers)P.addMatcher(A.matcher,A.reducer);for(let A of C)P.addMatcher(A.matcher,A.reducer);E&&P.addDefaultCase(E)})}const f=b=>b,h=new Map,g=new WeakMap;let x;function y(b,C){return x||(x=d()),x(b,C)}function v(){return x||(x=d()),x.getInitialState()}function T(b,C=!1){function E(P){let A=P[b];return typeof A>"u"&&C&&(A=Eb(g,E,v)),A}function j(P=f){const A=Eb(h,C,()=>new WeakMap);return Eb(A,P,()=>{const M={};for(const[F,B]of Object.entries(n.selectors??{}))M[F]=v3e(B,P,()=>Eb(g,P,v),C);return M})}return{reducerPath:b,getSelectors:j,get selectors(){return j(E)},selectSlice:E}}const k={name:s,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...T(a),injectInto(b,{reducerPath:C,...E}={}){const j=C??a;return b.inject({reducerPath:j,reducer:y},E),{...k,...T(j,!0)}}};return k}}function v3e(e,t,r,n){function s(a,...i){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return s.unwrapped=e,s}var Wl=y3e();function w3e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function b3e({type:e,reducerName:t,createNotation:r},n,s){let a,i;if("reducer"in n){if(r&&!S3e(n))throw new Error(Il(17));a=n.reducer,i=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?Cc(e,i):Cc(e))}function _3e(e){return e._reducerDefinitionType==="asyncThunk"}function S3e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function k3e({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Il(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=s(e,a,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||Ab,pending:o||Ab,rejected:c||Ab,settled:u||Ab})}function Ab(){}var T3e="task",kq="listener",Tq="completed",QN="cancelled",C3e=`task-${QN}`,N3e=`task-${Tq}`,hT=`${kq}-${QN}`,E3e=`${kq}-${Tq}`,T3=class{constructor(e){this.code=e,this.message=`${T3e} ${QN} (reason: ${e})`}name="TaskAbortError";message},ZN=(e,t)=>{if(typeof e!="function")throw new TypeError(Il(32))},n_=()=>{},Cq=(e,t=n_)=>(e.catch(t),e),Nq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),pm=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},xm=e=>{if(e.aborted){const{reason:t}=e;throw new T3(t)}};function Eq(e,t){let r=n_;return new Promise((n,s)=>{const a=()=>s(new T3(e.reason));if(e.aborted){a();return}r=Nq(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=n_})}var A3e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof T3?"cancelled":"rejected",error:r}}finally{t?.()}},s_=e=>t=>Cq(Eq(e,t).then(r=>(xm(e),r))),Aq=e=>{const t=s_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Rp}=Object,PR={},C3="listenerMiddleware",j3e=(e,t)=>{const r=n=>Nq(e,()=>pm(n,e.reason));return(n,s)=>{ZN(n);const a=new AbortController;r(a);const i=A3e(async()=>{xm(e),xm(a.signal);const o=await n({pause:s_(a.signal),delay:Aq(a.signal),signal:a.signal});return xm(a.signal),o},()=>pm(a,N3e));return s?.autoJoin&&t.push(i.catch(n_)),{result:s_(e)(i),cancel(){pm(a,C3e)}}}},P3e=(e,t)=>{const r=async(n,s)=>{xm(t);let a=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),u()}})];s!=null&&o.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await Eq(t,Promise.race(o));return xm(t),c}finally{a()}};return(n,s)=>Cq(r(n,s))},jq=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Cc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Il(21));return ZN(a),{predicate:s,type:t,effect:a}},Pq=Rp(e=>{const{type:t,predicate:r,effect:n}=jq(e);return{id:g3e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Il(22))}}},{withTypes:()=>Pq}),MR=(e,t)=>{const{type:r,effect:n,predicate:s}=jq(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},mT=e=>{e.pending.forEach(t=>{pm(t,hT)})},M3e=e=>()=>{e.forEach(mT),e.clear()},FR=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Mq=Rp(Cc(`${C3}/add`),{withTypes:()=>Mq}),F3e=Cc(`${C3}/removeAll`),Fq=Rp(Cc(`${C3}/remove`),{withTypes:()=>Fq}),D3e=(...e)=>{console.error(`${C3}/error`,...e)},M2=(e={})=>{const t=new Map,{extra:r,onError:n=D3e}=e;ZN(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&mT(d)}),a=d=>{const f=MR(t,d)??Pq(d);return s(f)};Rp(a,{withTypes:()=>a});const i=d=>{const f=MR(t,d);return f&&(f.unsubscribe(),d.cancelActive&&mT(f)),!!f};Rp(i,{withTypes:()=>i});const o=async(d,f,h,g)=>{const x=new AbortController,y=P3e(a,x.signal),v=[];try{d.pending.add(x),await Promise.resolve(d.effect(f,Rp({},h,{getOriginalState:g,condition:(T,k)=>y(T,k).then(Boolean),take:y,delay:Aq(x.signal),pause:s_(x.signal),extra:r,signal:x.signal,fork:j3e(x.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((T,k,b)=>{T!==x&&(pm(T,hT),b.delete(T))})},cancel:()=>{pm(x,hT),d.pending.delete(x)},throwIfCancelled:()=>{xm(x.signal)}})))}catch(T){T instanceof T3||FR(n,T,{raisedBy:"effect"})}finally{await Promise.all(v),pm(x,E3e),d.pending.delete(x)}},c=M3e(t);return{middleware:d=>f=>h=>{if(!hq(h))return f(h);if(Mq.match(h))return a(h.payload);if(F3e.match(h)){c();return}if(Fq.match(h))return i(h.payload);let g=d.getState();const x=()=>{if(g===PR)throw new Error(Il(23));return g};let y;try{if(y=f(h),t.size>0){const v=d.getState(),T=Array.from(t.values());for(const k of T){let b=!1;try{b=k.predicate(h,v,g)}catch(C){b=!1,FR(n,C,{raisedBy:"predicate"})}b&&o(k,h,d,x)}}}finally{g=PR}return y},startListening:a,stopListening:i,clearListeners:c}};function Il(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var O3e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Dq=Wl({name:"chartLayout",initialState:O3e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:R3e,setLayout:I3e,setChartSize:L3e,setScale:B3e}=Dq.actions,$3e=Dq.reducer;function DR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(r),!0).forEach(function(n){z3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z3e(e,t,r){return(t=U3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U3e(e){var t=W3e(e,"string");return typeof t=="symbol"?t:t+""}function W3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a_=Math.PI/180,H3e=e=>e*180/Math.PI,Ki=(e,t,r,n)=>({x:e+Math.cos(-a_*n)*r,y:t+Math.sin(-a_*n)*r}),G3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},V3e=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},q3e=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,i=V3e({x:r,y:n},{x:s,y:a});if(i<=0)return{radius:i,angle:0};var o=(r-s)/i,c=Math.acos(o);return n>a&&(c=2*Math.PI-c),{radius:i,angle:H3e(c),angleInRadian:c}},K3e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},Y3e=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),i=Math.min(s,a);return e+i*360},X3e=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:a}=q3e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(s<i||s>o||s===0)return null;var{startAngle:c,endAngle:u}=K3e(t),d=a,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?OR(OR({},t),{},{radius:s,angle:Y3e(d,t)}):null};function Oq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function RR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(r),!0).forEach(function(n){J3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J3e(e,t,r){return(t=Q3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q3e(e){var t=Z3e(e,"string");return typeof t=="symbol"?t:t+""}function Z3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uo(e,t,r){return ki(e)||ki(t)?r:Zu(t)?y3(e,t,r):typeof t=="function"?t(e):r}var eSe=(e,t,r,n,s)=>{var a,i=-1,o=(a=t?.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(pc(d-u)!==pc(f-d)){var g=[];if(pc(f-d)===pc(s[1]-s[0])){h=f;var x=d+s[1]-s[0];g[0]=Math.min(x,(x+u)/2),g[1]=Math.max(x,(x+u)/2)}else{h=u;var y=f+s[1]-s[0];g[0]=Math.min(d,(y+d)/2),g[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){({index:i}=r[c]);break}}else{var T=Math.min(u,f),k=Math.max(u,f);if(e>(T+d)/2&&e<=(k+d)/2){({index:i}=r[c]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:i}=t[b]);break}}return i},tSe=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&a!=="center"&&ln(e[a]))return fc(fc({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&i!=="middle"&&ln(e[i]))return fc(fc({},e),{},{[i]:e[i]+(s||0)})}return e},oh=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Rq=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var s,a,i=e.map(o=>(o.coordinate===t&&(s=!0),o.coordinate===r&&(a=!0),o.coordinate));return s||i.push(t),a||i.push(r),i},Iq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:g}=e;if(!i)return null;var x=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,y=s==="category"&&i.bandwidth?i.bandwidth()/x:0;if(y=g==="angleAxis"&&a&&a.length>=2?pc(a[0]-a[1])*2*y:y,f||h){var v=(f||h||[]).map((T,k)=>{var b=n?n.indexOf(T):T;return{coordinate:i(b)+y,value:T,offset:y,index:k}});return v.filter(T=>!Tc(T.coordinate))}return c&&u?u.map((T,k)=>({coordinate:i(T)+y,value:T,index:k,offset:y})):i.ticks&&d!=null?i.ticks(d).map((T,k)=>({coordinate:i(T)+y,value:T,offset:y,index:k})):i.domain().map((T,k)=>({coordinate:i(T)+y,value:n?n[T]:T,index:k,offset:y}))},IR=1e-4,rSe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-IR,a=Math.max(n[0],n[1])+IR,i=e(t[0]),o=e(t[r-1]);(i<s||i>a||o<s||o>a)&&e.domain([t[0],t[r-1]])}},nSe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,i=0;i<t;++i){var o=Tc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1])}},sSe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var i=Tc(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},aSe={sign:nSe,expand:q4e,none:Jp,silhouette:K4e,wiggle:Y4e,positive:sSe},iSe=(e,t,r)=>{var n=aSe[r],s=V4e().keys(t).value((a,i)=>+Uo(a,i,0)).order(iT).offset(n);return s(e)};function LR(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:i}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ki(s[t.dataKey])){var o=OV(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Uo(s,ki(i)?t.dataKey:i);return ki(c)?null:t.scale(c)}var oSe=e=>{var t=e.flat(2).filter(ln);return[Math.min(...t),Math.max(...t)]},lSe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],cSe=(e,t,r)=>{if(e!=null)return lSe(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:i}=a,o=i.reduce((c,u)=>{var d=Oq(u,t,r),f=oSe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},BR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$R=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gT=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=b3(t,d=>d.coordinate),a=1/0,i=1,o=s.length;i<o;i++){var c=s[i],u=s[i-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function zR(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return fc(fc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function Lq(e,t){if(e)return String(e);if(typeof t=="string")return t}function uSe(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var a=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return a?{x:e,y:t}:null}return n?X3e({x:e,y:t},n):null}var dSe=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,{radius:i}=n;return fc(fc(fc({},n),Ki(n.cx,n.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,{angle:c}=n;return fc(fc(fc({},n),Ki(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},fSe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,T0=e=>e.layout.width,C0=e=>e.layout.height,hSe=e=>e.layout.scale,Bq=e=>e.layout.margin,N3=It(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),E3=It(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),mSe="data-recharts-item-index",gSe="data-recharts-item-data-key",F2=60;function UR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(r),!0).forEach(function(n){pSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pSe(e,t,r){return(t=xSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xSe(e){var t=ySe(e,"string");return typeof t=="symbol"?t:t+""}function ySe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vSe=e=>e.brush.height;function wSe(e){var t=E3(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:F2;return r+s}return r},0)}function bSe(e){var t=E3(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:F2;return r+s}return r},0)}function _Se(e){var t=N3(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function SSe(e){var t=N3(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Qi=It([T0,C0,Bq,vSe,wSe,bSe,_Se,SSe,uq,z_e],(e,t,r,n,s,a,i,o,c,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+a},f={top:(r.top||0)+i,bottom:(r.bottom||0)+o},h=jb(jb({},f),d),g=h.bottom;h.bottom+=n,h=tSe(h,c,u);var x=e-h.left-h.right,y=t-h.top-h.bottom;return jb(jb({brushBottom:g},h),{},{width:Math.max(x,0),height:Math.max(y,0)})}),kSe=It(Qi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),$q=It(T0,C0,(e,t)=>({x:0,y:0,width:e,height:t})),TSe=_.createContext(null),jc=()=>_.useContext(TSe)!=null,A3=e=>e.brush,j3=It([A3,Qi,Bq],(e,t,r)=>({height:e.height,x:ln(e.x)?e.x:t.left,y:ln(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:ln(e.width)?e.width:t.width})),eE=()=>{var e,t=jc(),r=Xr(kSe),n=Xr(j3),s=(e=Xr(A3))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},CSe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},zq=()=>{var e;return(e=Xr(Qi))!==null&&e!==void 0?e:CSe},Uq=()=>Xr(T0),Wq=()=>Xr(C0),Rs=e=>e.layout.layoutType,tE=()=>Xr(Rs),NSe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Hq=Wl({name:"legend",initialState:NSe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=n0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Fje,setLegendSettings:Dje,addLegendPayload:ESe,removeLegendPayload:ASe}=Hq.actions,jSe=Hq.reducer;function pT(){return pT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pT.apply(null,arguments)}function WR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(r),!0).forEach(function(n){PSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PSe(e,t,r){return(t=MSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MSe(e){var t=FSe(e,"string");return typeof t=="symbol"?t:t+""}function FSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DSe(e){return Array.isArray(e)&&Zu(e[0])&&Zu(e[1])?e.join(" ~ "):e}var OSe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,g=()=>{if(a&&a.length){var E={padding:0,margin:0},j=(o?b3(a,o):a).map((P,A)=>{if(P.type==="none")return null;var M=P.formatter||i||DSe,{value:F,name:B}=P,V=F,ee=B;if(M){var ae=M(F,B,P,A,a);if(Array.isArray(ae))[V,ee]=ae;else if(ae!=null)V=ae;else return null}var Z=X6({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},n);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:Z},Zu(ee)?_.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,Zu(ee)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},V),_.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:E},j)}return null},x=X6({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=X6({margin:0},s),v=!ki(d),T=v?d:"",k=Ds("recharts-default-tooltip",c),b=Ds("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(T=f(d,a));var C=h?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",pT({className:k,style:x},C),_.createElement("p",{className:b,style:y},_.isValidElement(T)?T:"".concat(T)),g())},ky="recharts-tooltip-wrapper",RSe={visibility:"hidden"};function ISe(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ds(ky,{["".concat(ky,"-right")]:ln(r)&&t&&ln(t.x)&&r>=t.x,["".concat(ky,"-left")]:ln(r)&&t&&ln(t.x)&&r<t.x,["".concat(ky,"-bottom")]:ln(n)&&t&&ln(t.y)&&n>=t.y,["".concat(ky,"-top")]:ln(n)&&t&&ln(t.y)&&n<t.y})}function HR(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(a&&ln(a[n]))return a[n];var d=r[n]-o-(s>0?s:0),f=r[n]+s;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var g=d,x=h;return g<x?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function LSe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function BSe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=HR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=HR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=LSe({translateX:d,translateY:f,useTranslate3d:o})):u=RSe,{cssProperties:u,cssClasses:ISe({translateX:d,translateY:f,coordinate:r})}}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(n){xT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xT(e,t,r){return(t=$Se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Se(e){var t=zSe(e,"string");return typeof t=="symbol"?t:t+""}function zSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class USe extends _.PureComponent{constructor(){super(...arguments),xT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:g,wrapperStyle:x,lastBoundingBox:y,innerRef:v,hasPortalFromProps:T}=this.props,{cssClasses:k,cssProperties:b}=BSe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:g}),C=T?{}:Pb(Pb({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),E=Pb(Pb({},C),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:E,ref:v},a)}}var WSe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),A1={devToolsEnabled:!1,isSsr:WSe()},Gq=()=>Xr(e=>e.rootProps.accessibilityLayer);function uu(e){return Number.isFinite(e)}function i_(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function yT(){return yT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yT.apply(null,arguments)}function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VR(Object(r),!0).forEach(function(n){HSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HSe(e,t,r){return(t=GSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GSe(e){var t=VSe(e,"string");return typeof t=="symbol"?t:t+""}function VSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KR={curveBasisClosed:O4e,curveBasisOpen:R4e,curveBasis:D4e,curveBumpX:M4e,curveBumpY:F4e,curveLinearClosed:I4e,curveLinear:v3,curveMonotoneX:L4e,curveMonotoneY:B4e,curveNatural:$4e,curveStep:z4e,curveStepAfter:W4e,curveStepBefore:U4e},Mb=e=>uu(e.x)&&uu(e.y),Ty=e=>e.x,Cy=e=>e.y,qSe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(UN(e));return(r==="curveMonotone"||r==="curveBump")&&t?KR["".concat(r).concat(t==="vertical"?"Y":"X")]:KR[r]||v3},KSe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,i=qSe(t,s),o=a?r.filter(Mb):r,c;if(Array.isArray(n)){var u=a?n.filter(f=>Mb(f)):n,d=o.map((f,h)=>qR(qR({},f),{},{base:u[h]}));return s==="vertical"?c=kb().y(Cy).x1(Ty).x0(f=>f.base.x):c=kb().x(Ty).y1(Cy).y0(f=>f.base.y),c.defined(Mb).curve(i),c(d)}return s==="vertical"&&ln(n)?c=kb().y(Cy).x1(Ty).x0(n):ln(n)?c=kb().x(Ty).y1(Cy).y0(n):c=HV().x(Ty).y(Cy),c.defined(Mb).curve(i),c(o)},Vq=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?KSe(e):n;return _.createElement("path",yT({},ng(e),HN(e),{className:Ds("recharts-curve",t),d:a===null?void 0:a,ref:s}))},YSe=["x","y","top","left","width","height","className"];function vT(){return vT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vT.apply(null,arguments)}function YR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function XSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(r),!0).forEach(function(n){JSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JSe(e,t,r){return(t=QSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QSe(e){var t=ZSe(e,"string");return typeof t=="symbol"?t:t+""}function ZSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e5e(e,t){if(e==null)return{};var r,n,s=t5e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function t5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var r5e=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),n5e=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:i=0,className:o}=e,c=e5e(e,YSe),u=XSe({x:t,y:r,top:n,left:s,width:a,height:i},c);return!ln(t)||!ln(r)||!ln(a)||!ln(i)||!ln(n)||!ln(s)?null:_.createElement("path",vT({},Ji(u,!0),{className:Ds("recharts-cross",o),d:r5e(t,r,a,i,n,s)}))};function s5e(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function XR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function a5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XR(Object(r),!0).forEach(function(n){i5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i5e(e,t,r){return(t=o5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o5e(e){var t=l5e(e,"string");return typeof t=="symbol"?t:t+""}function l5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pc(e,t){var r=a5e({},e),n=t,s=Object.keys(t),a=s.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return a}function c5e(){}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(n){u5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u5e(e,t,r){return(t=d5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d5e(e){var t=f5e(e,"string");return typeof t=="symbol"?t:t+""}function f5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h5e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),m5e=(e,t,r)=>e.map(n=>"".concat(h5e(n)," ").concat(t,"ms ").concat(r)).join(","),g5e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Vv=(e,t)=>Object.keys(t).reduce((r,n)=>QR(QR({},r),{},{[n]:e(n,t[n])}),{});function ZR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZR(Object(r),!0).forEach(function(n){p5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p5e(e,t,r){return(t=x5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x5e(e){var t=y5e(e,"string");return typeof t=="symbol"?t:t+""}function y5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o_=(e,t,r)=>e+(t-e)*r,wT=e=>{var{from:t,to:r}=e;return t!==r},qq=(e,t,r)=>{var n=Vv((s,a)=>{if(wT(a)){var[i,o]=e(a.from,a.to,a.velocity);return Wi(Wi({},a),{},{from:i,velocity:o})}return a},t);return r<1?Vv((s,a)=>wT(a)?Wi(Wi({},a),{},{velocity:o_(a.velocity,n[s].velocity,r),from:o_(a.from,n[s].from,r)}):a,t):qq(e,n,r-1)};function v5e(e,t,r,n,s,a){var i,o=n.reduce((h,g)=>Wi(Wi({},h),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),c=()=>Vv((h,g)=>g.from,o),u=()=>!Object.values(o).filter(wT).length,d=null,f=h=>{i||(i=h);var g=h-i,x=g/r.dt;o=qq(r,o,x),s(Wi(Wi(Wi({},e),t),c())),i=h,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{d()})}function w5e(e,t,r,n,s,a,i){var o=null,c=s.reduce((f,h)=>Wi(Wi({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,g=Vv((y,v)=>o_(...v,r(h)),c);if(a(Wi(Wi(Wi({},e),t),g)),h<1)o=i.setTimeout(d);else{var x=Vv((y,v)=>o_(...v,r(1)),c);a(Wi(Wi(Wi({},e),t),x))}};return()=>(o=i.setTimeout(d),()=>{o()})}const b5e=(e,t,r,n,s,a)=>{var i=g5e(e,t);return r.isStepper===!0?v5e(e,t,r,i,s,a):w5e(e,t,r,n,i,s,a)};var l_=1e-4,Kq=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Yq=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),eI=(e,t)=>r=>{var n=Kq(e,t);return Yq(n,r)},_5e=(e,t)=>r=>{var n=Kq(e,t),s=[...n.map((a,i)=>a*i).slice(1),0];return Yq(s,r)},tI=function(){for(var t,r,n,s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else i.length===4&&([t,n,r,s]=i);var u=eI(t,r),d=eI(n,s),f=_5e(t,r),h=x=>x>1?1:x<0?0:x,g=x=>{for(var y=x>1?1:x,v=y,T=0;T<8;++T){var k=u(v)-y,b=f(v);if(Math.abs(k-y)<l_||b<l_)return d(v);v=h(v-k/b)}return d(v)};return g.isStepper=!1,g},S5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*s/1e3,h=c*s/1e3+i;return Math.abs(h-o)<l_&&Math.abs(f)<l_?[o,0]:[h,f]};return a.isStepper=!0,a.dt=s,a},k5e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tI(e);case"spring":return S5e();default:if(e.split("(")[0]==="cubic-bezier")return tI(e)}return typeof e=="function"?e:null};function T5e(e){var t,r=()=>null,n=!1,s=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){s=e.setTimeout(a.bind(null,u),c);return}a(c),s=e.setTimeout(a.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,s&&(s(),s=null),a(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class C5e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{cancelAnimationFrame(s)}}}function N5e(){return T5e(new C5e)}var E5e=_.createContext(N5e);function A5e(e,t){var r=_.useContext(E5e);return _.useMemo(()=>t??r(e),[e,t,r])}var j5e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rI={t:0},J6={t:1};function Xq(e){var t=Pc(e,j5e),{isActive:r,canBegin:n,duration:s,easing:a,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=A5e(t.animationId,t.animationManager),[f,h]=_.useState(r?rI:J6),g=_.useRef(null);return _.useEffect(()=>{r||h(J6)},[r]),_.useEffect(()=>{if(!r||!n)return c5e;var x=b5e(rI,J6,k5e(a),s,h,d.getTimeoutController()),y=()=>{g.current=x()};return d.start([c,i,y,s,o]),()=>{d.stop(),g.current&&g.current(),o()}},[r,n,s,a,i,c,o,d]),u(f.t)}function Jq(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(Wv(t)),n=_.useRef(e);return n.current!==e&&(r.current=Wv(t),n.current=e),r.current}function nI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nI(Object(r),!0).forEach(function(n){P5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P5e(e,t,r){return(t=M5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M5e(e){var t=F5e(e,"string");return typeof t=="symbol"?t:t+""}function F5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c_(){return c_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c_.apply(null,arguments)}var aI=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>a?a:s[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);u="M ".concat(e,",").concat(t+i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+o*g,",").concat(t,`
            L `).concat(e+r-o*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*g,`
            L `).concat(e+r,",").concat(t+n-i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r-o*g,",").concat(t+n,`
            L `).concat(e+o*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*g," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},D5e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},O5e=e=>{var t=Pc(e,D5e),r=_.useRef(null),[n,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ae=r.current.getTotalLength();ae&&s(ae)}catch{}},[]);var{x:a,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:g,isAnimationActive:x,isUpdateAnimationActive:y}=t,v=_.useRef(o),T=_.useRef(c),k=_.useRef(a),b=_.useRef(i),C=_.useMemo(()=>({x:a,y:i,width:o,height:c,radius:u}),[a,i,o,c,u]),E=Jq(C,"rectangle-");if(a!==+a||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var j=Ds("recharts-rectangle",d);if(!y)return _.createElement("path",c_({},Ji(t,!0),{className:j,d:aI(a,i,o,c,u)}));var P=v.current,A=T.current,M=k.current,F=b.current,B="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),ee=m5e(["strokeDasharray"],h,typeof f=="string"?f:void 0);return _.createElement(Xq,{animationId:E,key:E,canBegin:n>0,duration:h,easing:f,isActive:y,begin:g},ae=>{var Z=Hd(P,o,ae),te=Hd(A,c,ae),L=Hd(M,a,ae),K=Hd(F,i,ae);r.current&&(v.current=Z,T.current=te,k.current=L,b.current=K);var I;return x?ae>0?I={transition:ee,strokeDasharray:V}:I={strokeDasharray:B}:I={strokeDasharray:V},_.createElement("path",c_({},Ji(t,!0),{className:j,d:aI(L,K,Z,te,u),ref:r,style:sI(sI({},I),t.style)}))})};function Qq(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,i=Ki(t,r,n,s),o=Ki(t,r,n,a);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function bT(){return bT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bT.apply(null,arguments)}var R5e=(e,t)=>{var r=pc(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Fb=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/a_,f=c?s:s+a*d,h=Ki(t,r,u,f),g=Ki(t,r,n,f),x=c?s-a*d:s,y=Ki(t,r,u*Math.cos(d*a_),x);return{center:h,circleTangency:g,lineTangency:y,theta:d}},Zq=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:i}=e,o=R5e(a,i),c=a+o,u=Ki(t,r,s,a),d=Ki(t,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Ki(t,r,n,a),g=Ki(t,r,n,c);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},I5e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=pc(u-c),{circleTangency:f,lineTangency:h,theta:g}=Fb({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:y,theta:v}=Fb({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),T=o?Math.abs(c-u):Math.abs(c-u)-g-v;if(T<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Zq({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var k="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:C,theta:E}=Fb({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:j,lineTangency:P,theta:A}=Fb({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),M=o?Math.abs(c-u):Math.abs(c-u)-E-A;if(M<0&&a===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(M>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},L5e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},B5e=e=>{var t=Pc(e,L5e),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(a<s||u===d)return null;var h=Ds("recharts-sector",f),g=a-s,x=Yf(i,g,0,!0),y;return x>0&&Math.abs(u-d)<360?y=I5e({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(x,g/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):y=Zq({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),_.createElement("path",bT({},Ji(t,!0),{className:h,d:y}))};function $5e(e,t,r){var n,s,a,i;if(e==="horizontal")n=t.x,a=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Ki(o,c,u,f),g=Ki(o,c,d,f);n=h.x,s=h.y,a=g.x,i=g.y}else return Qq(t);return[{x:n,y:s},{x:a,y:i}]}var Q6={},Z6={},ek={},iI;function z5e(){return iI||(iI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lq();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(ek)),ek}var oI;function U5e(){return oI||(oI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z5e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Z6)),Z6}var lI;function W5e(){return lI||(lI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cq(),r=U5e();function n(s,a,i){i&&typeof i!="number"&&t.isIterateeCall(s,a,i)&&(a=i=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),i=i===void 0?s<a?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((a-s)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=s,s+=i;return c}e.range=n})(Q6)),Q6}var tk,cI;function H5e(){return cI||(cI=1,tk=W5e().range),tk}var G5e=H5e();const eK=Ec(G5e);function If(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function V5e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rE(e){let t,r,n;e.length!==2?(t=If,r=(o,c)=>If(e(o),c),n=(o,c)=>e(o)-c):(t=e===If||e===V5e?e:q5e,r=e,n=e);function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=s(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:s,center:i,right:a}}function q5e(){return 0}function tK(e){return e===null?NaN:+e}function*K5e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Y5e=rE(If),D2=Y5e.right;rE(tK).center;class uI extends Map{constructor(t,r=Q5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(dI(this,t))}has(t){return super.has(dI(this,t))}set(t,r){return super.set(X5e(this,t),r)}delete(t){return super.delete(J5e(this,t))}}function dI({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function X5e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function J5e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Q5e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Z5e(e=If){if(e===If)return rK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function rK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e6e=Math.sqrt(50),t6e=Math.sqrt(10),r6e=Math.sqrt(2);function u_(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=e6e?10:a>=t6e?5:a>=r6e?2:1;let o,c,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?u_(e,t,r*2):[o,c,u]}function _T(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,i]=n?u_(t,e,r):u_(e,t,r);if(!(a>=s))return[];const o=a-s+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(a-u)/-i;else for(let u=0;u<o;++u)c[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(s+u)/-i;else for(let u=0;u<o;++u)c[u]=(s+u)*i;return c}function ST(e,t,r){return t=+t,e=+e,r=+r,u_(e,t,r)[2]}function kT(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?ST(t,e,r):ST(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function fI(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function hI(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function nK(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?rK:Z5e(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(t-u*f/c+h)),x=Math.min(n,Math.floor(t+(c-u)*f/c+h));nK(e,t,g,x,s)}const a=e[t];let i=r,o=n;for(Ny(e,r,t),s(e[n],a)>0&&Ny(e,r,n);i<o;){for(Ny(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}s(e[r],a)===0?Ny(e,r,o):(++o,Ny(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Ny(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function n6e(e,t,r){if(e=Float64Array.from(K5e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return hI(e);if(t>=1)return fI(e);var n,s=(n-1)*t,a=Math.floor(s),i=fI(nK(e,a).subarray(0,a+1)),o=hI(e.subarray(a+1));return i+(o-i)*(s-a)}}function s6e(e,t,r=tK){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return i+(o-i)*(s-a)}}function a6e(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Mc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function N0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const TT=Symbol("implicit");function nE(){var e=new uI,t=[],r=[],n=TT;function s(a){let i=e.get(a);if(i===void 0){if(n!==TT)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new uI;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return nE(t,r).unknown(n)},Mc.apply(s,arguments),s}function sE(){var e=nE().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,g=s<n,x=g?s:n,y=g?n:s;a=(y-x)/Math.max(1,h-c+u*2),o&&(a=Math.floor(a)),x+=(y-x-a*(h-c))*d,i=a*(1-c),o&&(x=Math.round(x),i=Math.round(i));var v=a6e(h).map(function(T){return x+a*T});return r(g?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return sE(t(),[n,s]).round(o).paddingInner(c).paddingOuter(u).align(d)},Mc.apply(f(),arguments)}function sK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return sK(t())},e}function i6e(){return sK(sE.apply(null,arguments).paddingInner(1))}function aE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function aK(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function O2(){}var qv=.7,d_=1/qv,Ip="\\s*([+-]?\\d+)\\s*",Kv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o6e=/^#([0-9a-f]{3,8})$/,l6e=new RegExp(`^rgb\\(${Ip},${Ip},${Ip}\\)$`),c6e=new RegExp(`^rgb\\(${Xu},${Xu},${Xu}\\)$`),u6e=new RegExp(`^rgba\\(${Ip},${Ip},${Ip},${Kv}\\)$`),d6e=new RegExp(`^rgba\\(${Xu},${Xu},${Xu},${Kv}\\)$`),f6e=new RegExp(`^hsl\\(${Kv},${Xu},${Xu}\\)$`),h6e=new RegExp(`^hsla\\(${Kv},${Xu},${Xu},${Kv}\\)$`),mI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aE(O2,Yv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gI,formatHex:gI,formatHex8:m6e,formatHsl:g6e,formatRgb:pI,toString:pI});function gI(){return this.rgb().formatHex()}function m6e(){return this.rgb().formatHex8()}function g6e(){return iK(this).formatHsl()}function pI(){return this.rgb().formatRgb()}function Yv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=o6e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?xI(t):r===3?new ll(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Db(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Db(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=l6e.exec(e))?new ll(t[1],t[2],t[3],1):(t=c6e.exec(e))?new ll(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=u6e.exec(e))?Db(t[1],t[2],t[3],t[4]):(t=d6e.exec(e))?Db(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=f6e.exec(e))?wI(t[1],t[2]/100,t[3]/100,1):(t=h6e.exec(e))?wI(t[1],t[2]/100,t[3]/100,t[4]):mI.hasOwnProperty(e)?xI(mI[e]):e==="transparent"?new ll(NaN,NaN,NaN,0):null}function xI(e){return new ll(e>>16&255,e>>8&255,e&255,1)}function Db(e,t,r,n){return n<=0&&(e=t=r=NaN),new ll(e,t,r,n)}function p6e(e){return e instanceof O2||(e=Yv(e)),e?(e=e.rgb(),new ll(e.r,e.g,e.b,e.opacity)):new ll}function CT(e,t,r,n){return arguments.length===1?p6e(e):new ll(e,t,r,n??1)}function ll(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}aE(ll,CT,aK(O2,{brighter(e){return e=e==null?d_:Math.pow(d_,e),new ll(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qv:Math.pow(qv,e),new ll(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ll(ym(this.r),ym(this.g),ym(this.b),f_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yI,formatHex:yI,formatHex8:x6e,formatRgb:vI,toString:vI}));function yI(){return`#${sm(this.r)}${sm(this.g)}${sm(this.b)}`}function x6e(){return`#${sm(this.r)}${sm(this.g)}${sm(this.b)}${sm((isNaN(this.opacity)?1:this.opacity)*255)}`}function vI(){const e=f_(this.opacity);return`${e===1?"rgb(":"rgba("}${ym(this.r)}, ${ym(this.g)}, ${ym(this.b)}${e===1?")":`, ${e})`}`}function f_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ym(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sm(e){return e=ym(e),(e<16?"0":"")+e.toString(16)}function wI(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new eu(e,t,r,n)}function iK(e){if(e instanceof eu)return new eu(e.h,e.s,e.l,e.opacity);if(e instanceof O2||(e=Yv(e)),!e)return new eu;if(e instanceof eu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,c=(a+s)/2;return o?(t===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?a+s:2-a-s,i*=60):o=c>0&&c<1?0:i,new eu(i,o,c,e.opacity)}function y6e(e,t,r,n){return arguments.length===1?iK(e):new eu(e,t,r,n??1)}function eu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}aE(eu,y6e,aK(O2,{brighter(e){return e=e==null?d_:Math.pow(d_,e),new eu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qv:Math.pow(qv,e),new eu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new ll(rk(e>=240?e-240:e+120,s,n),rk(e,s,n),rk(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new eu(bI(this.h),Ob(this.s),Ob(this.l),f_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=f_(this.opacity);return`${e===1?"hsl(":"hsla("}${bI(this.h)}, ${Ob(this.s)*100}%, ${Ob(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bI(e){return e=(e||0)%360,e<0?e+360:e}function Ob(e){return Math.max(0,Math.min(1,e||0))}function rk(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const iE=e=>()=>e;function v6e(e,t){return function(r){return e+r*t}}function w6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function b6e(e){return(e=+e)==1?oK:function(t,r){return r-t?w6e(t,r,e):iE(isNaN(t)?r:t)}}function oK(e,t){var r=t-e;return r?v6e(e,r):iE(isNaN(e)?t:e)}const _I=(function e(t){var r=b6e(t);function n(s,a){var i=r((s=CT(s)).r,(a=CT(a)).r),o=r(s.g,a.g),c=r(s.b,a.b),u=oK(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function _6e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function S6e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function k6e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)s[i]=j1(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(o){for(i=0;i<n;++i)a[i]=s[i](o);return a}}function T6e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function h_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function C6e(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=j1(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var NT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nk=new RegExp(NT.source,"g");function N6e(e){return function(){return e}}function E6e(e){return function(t){return e(t)+""}}function A6e(e,t){var r=NT.lastIndex=nk.lastIndex=0,n,s,a,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=NT.exec(e))&&(s=nk.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,c.push({i,x:h_(n,s)})),r=nk.lastIndex;return r<t.length&&(a=t.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?c[0]?E6e(c[0].x):N6e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function j1(e,t){var r=typeof t,n;return t==null||r==="boolean"?iE(t):(r==="number"?h_:r==="string"?(n=Yv(t))?(t=n,_I):A6e:t instanceof Yv?_I:t instanceof Date?T6e:S6e(t)?_6e:Array.isArray(t)?k6e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?C6e:h_)(e,t)}function oE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function j6e(e,t){t===void 0&&(t=e,e=j1);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return a[o](i-o)}}function P6e(e){return function(){return e}}function m_(e){return+e}var SI=[0,1];function Bo(e){return e}function ET(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:P6e(isNaN(t)?NaN:.5)}function M6e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function F6e(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=ET(s,n),a=r(i,a)):(n=ET(n,s),a=r(a,i)),function(o){return a(n(o))}}function D6e(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=ET(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(o){var c=D2(e,o,1,n)-1;return a[c](s[c](o))}}function R2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function P3(){var e=SI,t=SI,r=j1,n,s,a,i=Bo,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==Bo&&(i=M6e(e[0],e[h-1])),o=h>2?D6e:F6e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(s((u||(u=o(t,e.map(n),h_)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,m_),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=oE,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Bo,d()):i!==Bo},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return n=h,s=g,d()}}function lE(){return P3()(Bo,Bo)}function O6e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function g_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Zp(e){return e=g_(Math.abs(e)),e?e[1]:NaN}function R6e(e,t){return function(r,n){for(var s=r.length,a=[],i=0,o=e[0],c=0;s>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),a.push(r.substring(s-=o,s+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return a.reverse().join(t)}}function I6e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var L6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xv(e){if(!(t=L6e.exec(e)))throw new Error("invalid format: "+e);var t;return new cE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xv.prototype=cE.prototype;function cE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function B6e(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var lK;function $6e(e,t){var r=g_(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(lK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+g_(e,Math.max(0,t+a-1))[0]}function kI(e,t){var r=g_(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const TI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:O6e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kI(e*100,t),r:kI,s:$6e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function CI(e){return e}var NI=Array.prototype.map,EI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function z6e(e){var t=e.grouping===void 0||e.thousands===void 0?CI:R6e(NI.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?CI:I6e(NI.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Xv(f);var h=f.fill,g=f.align,x=f.sign,y=f.symbol,v=f.zero,T=f.width,k=f.comma,b=f.precision,C=f.trim,E=f.type;E==="n"?(k=!0,E="g"):TI[E]||(b===void 0&&(b=12),C=!0,E="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var j=y==="$"?r:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",P=y==="$"?n:/[%p]/.test(E)?i:"",A=TI[E],M=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function F(B){var V=j,ee=P,ae,Z,te;if(E==="c")ee=A(B)+ee,B="";else{B=+B;var L=B<0||1/B<0;if(B=isNaN(B)?c:A(Math.abs(B),b),C&&(B=B6e(B)),L&&+B==0&&x!=="+"&&(L=!1),V=(L?x==="("?x:o:x==="-"||x==="("?"":x)+V,ee=(E==="s"?EI[8+lK/3]:"")+ee+(L&&x==="("?")":""),M){for(ae=-1,Z=B.length;++ae<Z;)if(te=B.charCodeAt(ae),48>te||te>57){ee=(te===46?s+B.slice(ae+1):B.slice(ae))+ee,B=B.slice(0,ae);break}}}k&&!v&&(B=t(B,1/0));var K=V.length+B.length+ee.length,I=K<T?new Array(T-K+1).join(h):"";switch(k&&v&&(B=t(I+B,I.length?T-ee.length:1/0),I=""),g){case"<":B=V+B+ee+I;break;case"=":B=V+I+B+ee;break;case"^":B=I.slice(0,K=I.length>>1)+V+B+ee+I.slice(K);break;default:B=I+V+B+ee;break}return a(B)}return F.toString=function(){return f+""},F}function d(f,h){var g=u((f=Xv(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Zp(h)/3)))*3,y=Math.pow(10,-x),v=EI[8+x/3];return function(T){return g(y*T)+v}}return{format:u,formatPrefix:d}}var Rb,uE,cK;U6e({thousands:",",grouping:[3],currency:["$",""]});function U6e(e){return Rb=z6e(e),uE=Rb.format,cK=Rb.formatPrefix,Rb}function W6e(e){return Math.max(0,-Zp(Math.abs(e)))}function H6e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zp(t)/3)))*3-Zp(Math.abs(e)))}function G6e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zp(t)-Zp(e))+1}function uK(e,t,r,n){var s=kT(e,t,r),a;switch(n=Xv(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=H6e(s,i))&&(n.precision=a),cK(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=G6e(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=W6e(s))&&(n.precision=a-(n.type==="%")*2);break}}return uE(n)}function lh(e){var t=e.domain;return e.ticks=function(r){var n=t();return _T(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return uK(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,i=n[s],o=n[a],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);d-- >0;){if(u=ST(i,o,r),u===c)return n[s]=i,n[a]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function dK(){var e=lE();return e.copy=function(){return R2(e,dK())},Mc.apply(e,arguments),lh(e)}function fK(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,m_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return fK(e).unknown(t)},e=arguments.length?Array.from(e,m_):[0,1],lh(r)}function hK(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],i;return a<s&&(i=r,r=n,n=i,i=s,s=a,a=i),e[r]=t.floor(s),e[n]=t.ceil(a),e}function AI(e){return Math.log(e)}function jI(e){return Math.exp(e)}function V6e(e){return-Math.log(-e)}function q6e(e){return-Math.exp(-e)}function K6e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Y6e(e){return e===10?K6e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function X6e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function PI(e){return(t,r)=>-e(-t,r)}function dE(e){const t=e(AI,jI),r=t.domain;let n=10,s,a;function i(){return s=X6e(n),a=Y6e(n),r()[0]<0?(s=PI(s),a=PI(a),e(V6e,q6e)):e(AI,jI),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=s(u),g=s(d),x,y;const v=o==null?10:+o;let T=[];if(!(n%1)&&g-h<v){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(x=1;x<n;++x)if(y=h<0?x/a(-h):x*a(h),!(y<u)){if(y>d)break;T.push(y)}}else for(;h<=g;++h)for(x=n-1;x>=1;--x)if(y=h>0?x/a(-h):x*a(h),!(y<u)){if(y>d)break;T.push(y)}T.length*2<v&&(T=_T(u,d,v))}else T=_T(h,g,Math.min(g-h,v)).map(a);return f?T.reverse():T},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Xv(c)).precision==null&&(c.trim=!0),c=uE(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(hK(r(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),t}function mK(){const e=dE(P3()).domain([1,10]);return e.copy=()=>R2(e,mK()).base(e.base()),Mc.apply(e,arguments),e}function MI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function FI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fE(e){var t=1,r=e(MI(t),FI(t));return r.constant=function(n){return arguments.length?e(MI(t=+n),FI(t)):t},lh(r)}function gK(){var e=fE(P3());return e.copy=function(){return R2(e,gK()).constant(e.constant())},Mc.apply(e,arguments)}function DI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function J6e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Q6e(e){return e<0?-e*e:e*e}function hE(e){var t=e(Bo,Bo),r=1;function n(){return r===1?e(Bo,Bo):r===.5?e(J6e,Q6e):e(DI(r),DI(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},lh(t)}function mE(){var e=hE(P3());return e.copy=function(){return R2(e,mE()).exponent(e.exponent())},Mc.apply(e,arguments),e}function Z6e(){return mE.apply(null,arguments).exponent(.5)}function OI(e){return Math.sign(e)*e*e}function eke(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function pK(){var e=lE(),t=[0,1],r=!1,n;function s(a){var i=eke(e(a));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(a){return e.invert(OI(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,m_)).map(OI)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return pK(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Mc.apply(s,arguments),lh(s)}function xK(){var e=[],t=[],r=[],n;function s(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=s6e(e,i/o);return a}function a(i){return i==null||isNaN(i=+i)?n:t[D2(r,i)]}return a.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(If),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return xK().domain(e).range(t).unknown(n)},Mc.apply(a,arguments)}function yK(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function i(c){return c!=null&&c<=c?s[D2(n,c,0,r)]:a}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,o()):s.slice()},i.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return yK().domain([e,t]).range(s).unknown(a)},Mc.apply(lh(i),arguments)}function vK(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[D2(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return vK().domain(e).range(t).unknown(r)},Mc.apply(s,arguments)}const sk=new Date,ak=new Date;function ii(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const c=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return c;let u;do c.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<i);return c},s.filter=a=>ii(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!a(i););else for(;--o>=0;)for(;t(i,1),!a(i););}),r&&(s.count=(a,i)=>(sk.setTime(+a),ak.setTime(+i),e(sk),e(ak),Math.floor(r(sk,ak))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?i=>n(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const p_=ii(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);p_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ii(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):p_);p_.range;const Yd=1e3,xc=Yd*60,Xd=xc*60,m0=Xd*24,gE=m0*7,RI=m0*30,ik=m0*365,am=ii(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yd)},(e,t)=>(t-e)/Yd,e=>e.getUTCSeconds());am.range;const pE=ii(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yd)},(e,t)=>{e.setTime(+e+t*xc)},(e,t)=>(t-e)/xc,e=>e.getMinutes());pE.range;const xE=ii(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xc)},(e,t)=>(t-e)/xc,e=>e.getUTCMinutes());xE.range;const yE=ii(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yd-e.getMinutes()*xc)},(e,t)=>{e.setTime(+e+t*Xd)},(e,t)=>(t-e)/Xd,e=>e.getHours());yE.range;const vE=ii(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xd)},(e,t)=>(t-e)/Xd,e=>e.getUTCHours());vE.range;const I2=ii(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xc)/m0,e=>e.getDate()-1);I2.range;const M3=ii(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/m0,e=>e.getUTCDate()-1);M3.range;const wK=ii(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/m0,e=>Math.floor(e/m0));wK.range;function sg(e){return ii(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*xc)/gE)}const F3=sg(0),x_=sg(1),tke=sg(2),rke=sg(3),e1=sg(4),nke=sg(5),ske=sg(6);F3.range;x_.range;tke.range;rke.range;e1.range;nke.range;ske.range;function ag(e){return ii(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/gE)}const D3=ag(0),y_=ag(1),ake=ag(2),ike=ag(3),t1=ag(4),oke=ag(5),lke=ag(6);D3.range;y_.range;ake.range;ike.range;t1.range;oke.range;lke.range;const wE=ii(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());wE.range;const bE=ii(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());bE.range;const g0=ii(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());g0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ii(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});g0.range;const p0=ii(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());p0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ii(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});p0.range;function bK(e,t,r,n,s,a){const i=[[am,1,Yd],[am,5,5*Yd],[am,15,15*Yd],[am,30,30*Yd],[a,1,xc],[a,5,5*xc],[a,15,15*xc],[a,30,30*xc],[s,1,Xd],[s,3,3*Xd],[s,6,6*Xd],[s,12,12*Xd],[n,1,m0],[n,2,2*m0],[r,1,gE],[t,1,RI],[t,3,3*RI],[e,1,ik]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const g=f&&typeof f.range=="function"?f:c(u,d,f),x=g?g.range(u,+d+1):[];return h?x.reverse():x}function c(u,d,f){const h=Math.abs(d-u)/f,g=rE(([,,v])=>v).right(i,h);if(g===i.length)return e.every(kT(u/ik,d/ik,f));if(g===0)return p_.every(Math.max(kT(u,d,f),1));const[x,y]=i[h/i[g-1][2]<i[g][2]/h?g-1:g];return x.every(y)}return[o,c]}const[cke,uke]=bK(p0,bE,D3,wK,vE,xE),[dke,fke]=bK(g0,wE,F3,I2,yE,pE);function ok(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function lk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ey(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function hke(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=Ay(s),d=jy(s),f=Ay(a),h=jy(a),g=Ay(i),x=jy(i),y=Ay(o),v=jy(o),T=Ay(c),k=jy(c),b={a:L,A:K,b:I,B:H,c:null,d:UI,e:UI,f:Rke,g:Vke,G:Kke,H:Fke,I:Dke,j:Oke,L:_K,m:Ike,M:Lke,p:U,q:R,Q:GI,s:VI,S:Bke,u:$ke,U:zke,V:Uke,w:Wke,W:Hke,x:null,X:null,y:Gke,Y:qke,Z:Yke,"%":HI},C={a:z,A:G,b:X,B:ne,c:null,d:WI,e:WI,f:Zke,g:c8e,G:d8e,H:Xke,I:Jke,j:Qke,L:kK,m:e8e,M:t8e,p:q,q:se,Q:GI,s:VI,S:r8e,u:n8e,U:s8e,V:a8e,w:i8e,W:o8e,x:null,X:null,y:l8e,Y:u8e,Z:f8e,"%":HI},E={a:F,A:B,b:V,B:ee,c:ae,d:$I,e:$I,f:Ake,g:BI,G:LI,H:zI,I:zI,j:Tke,L:Eke,m:kke,M:Cke,p:M,q:Ske,Q:Pke,s:Mke,S:Nke,u:yke,U:vke,V:wke,w:xke,W:bke,x:Z,X:te,y:BI,Y:LI,Z:_ke,"%":jke};b.x=j(r,b),b.X=j(n,b),b.c=j(t,b),C.x=j(r,C),C.X=j(n,C),C.c=j(t,C);function j(ue,me){return function(Ne){var ce=[],Ue=-1,pe=0,je=ue.length,We,Me,Nt;for(Ne instanceof Date||(Ne=new Date(+Ne));++Ue<je;)ue.charCodeAt(Ue)===37&&(ce.push(ue.slice(pe,Ue)),(Me=II[We=ue.charAt(++Ue)])!=null?We=ue.charAt(++Ue):Me=We==="e"?" ":"0",(Nt=me[We])&&(We=Nt(Ne,Me)),ce.push(We),pe=Ue+1);return ce.push(ue.slice(pe,Ue)),ce.join("")}}function P(ue,me){return function(Ne){var ce=Ey(1900,void 0,1),Ue=A(ce,ue,Ne+="",0),pe,je;if(Ue!=Ne.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(me&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(pe=lk(Ey(ce.y,0,1)),je=pe.getUTCDay(),pe=je>4||je===0?y_.ceil(pe):y_(pe),pe=M3.offset(pe,(ce.V-1)*7),ce.y=pe.getUTCFullYear(),ce.m=pe.getUTCMonth(),ce.d=pe.getUTCDate()+(ce.w+6)%7):(pe=ok(Ey(ce.y,0,1)),je=pe.getDay(),pe=je>4||je===0?x_.ceil(pe):x_(pe),pe=I2.offset(pe,(ce.V-1)*7),ce.y=pe.getFullYear(),ce.m=pe.getMonth(),ce.d=pe.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),je="Z"in ce?lk(Ey(ce.y,0,1)).getUTCDay():ok(Ey(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(je+5)%7:ce.w+ce.U*7-(je+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,lk(ce)):ok(ce)}}function A(ue,me,Ne,ce){for(var Ue=0,pe=me.length,je=Ne.length,We,Me;Ue<pe;){if(ce>=je)return-1;if(We=me.charCodeAt(Ue++),We===37){if(We=me.charAt(Ue++),Me=E[We in II?me.charAt(Ue++):We],!Me||(ce=Me(ue,Ne,ce))<0)return-1}else if(We!=Ne.charCodeAt(ce++))return-1}return ce}function M(ue,me,Ne){var ce=u.exec(me.slice(Ne));return ce?(ue.p=d.get(ce[0].toLowerCase()),Ne+ce[0].length):-1}function F(ue,me,Ne){var ce=g.exec(me.slice(Ne));return ce?(ue.w=x.get(ce[0].toLowerCase()),Ne+ce[0].length):-1}function B(ue,me,Ne){var ce=f.exec(me.slice(Ne));return ce?(ue.w=h.get(ce[0].toLowerCase()),Ne+ce[0].length):-1}function V(ue,me,Ne){var ce=T.exec(me.slice(Ne));return ce?(ue.m=k.get(ce[0].toLowerCase()),Ne+ce[0].length):-1}function ee(ue,me,Ne){var ce=y.exec(me.slice(Ne));return ce?(ue.m=v.get(ce[0].toLowerCase()),Ne+ce[0].length):-1}function ae(ue,me,Ne){return A(ue,t,me,Ne)}function Z(ue,me,Ne){return A(ue,r,me,Ne)}function te(ue,me,Ne){return A(ue,n,me,Ne)}function L(ue){return i[ue.getDay()]}function K(ue){return a[ue.getDay()]}function I(ue){return c[ue.getMonth()]}function H(ue){return o[ue.getMonth()]}function U(ue){return s[+(ue.getHours()>=12)]}function R(ue){return 1+~~(ue.getMonth()/3)}function z(ue){return i[ue.getUTCDay()]}function G(ue){return a[ue.getUTCDay()]}function X(ue){return c[ue.getUTCMonth()]}function ne(ue){return o[ue.getUTCMonth()]}function q(ue){return s[+(ue.getUTCHours()>=12)]}function se(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var me=j(ue+="",b);return me.toString=function(){return ue},me},parse:function(ue){var me=P(ue+="",!1);return me.toString=function(){return ue},me},utcFormat:function(ue){var me=j(ue+="",C);return me.toString=function(){return ue},me},utcParse:function(ue){var me=P(ue+="",!0);return me.toString=function(){return ue},me}}}var II={"-":"",_:" ",0:"0"},Ci=/^\s*\d+/,mke=/^%/,gke=/[\\^$*+?|[\]().{}]/g;function Wn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function pke(e){return e.replace(gke,"\\$&")}function Ay(e){return new RegExp("^(?:"+e.map(pke).join("|")+")","i")}function jy(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function xke(e,t,r){var n=Ci.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function yke(e,t,r){var n=Ci.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function vke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function wke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function bke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function LI(e,t,r){var n=Ci.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function BI(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function _ke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Ske(e,t,r){var n=Ci.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function kke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function $I(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Tke(e,t,r){var n=Ci.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function zI(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Cke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Nke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Eke(e,t,r){var n=Ci.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Ake(e,t,r){var n=Ci.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function jke(e,t,r){var n=mke.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Pke(e,t,r){var n=Ci.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Mke(e,t,r){var n=Ci.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function UI(e,t){return Wn(e.getDate(),t,2)}function Fke(e,t){return Wn(e.getHours(),t,2)}function Dke(e,t){return Wn(e.getHours()%12||12,t,2)}function Oke(e,t){return Wn(1+I2.count(g0(e),e),t,3)}function _K(e,t){return Wn(e.getMilliseconds(),t,3)}function Rke(e,t){return _K(e,t)+"000"}function Ike(e,t){return Wn(e.getMonth()+1,t,2)}function Lke(e,t){return Wn(e.getMinutes(),t,2)}function Bke(e,t){return Wn(e.getSeconds(),t,2)}function $ke(e){var t=e.getDay();return t===0?7:t}function zke(e,t){return Wn(F3.count(g0(e)-1,e),t,2)}function SK(e){var t=e.getDay();return t>=4||t===0?e1(e):e1.ceil(e)}function Uke(e,t){return e=SK(e),Wn(e1.count(g0(e),e)+(g0(e).getDay()===4),t,2)}function Wke(e){return e.getDay()}function Hke(e,t){return Wn(x_.count(g0(e)-1,e),t,2)}function Gke(e,t){return Wn(e.getFullYear()%100,t,2)}function Vke(e,t){return e=SK(e),Wn(e.getFullYear()%100,t,2)}function qke(e,t){return Wn(e.getFullYear()%1e4,t,4)}function Kke(e,t){var r=e.getDay();return e=r>=4||r===0?e1(e):e1.ceil(e),Wn(e.getFullYear()%1e4,t,4)}function Yke(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Wn(t/60|0,"0",2)+Wn(t%60,"0",2)}function WI(e,t){return Wn(e.getUTCDate(),t,2)}function Xke(e,t){return Wn(e.getUTCHours(),t,2)}function Jke(e,t){return Wn(e.getUTCHours()%12||12,t,2)}function Qke(e,t){return Wn(1+M3.count(p0(e),e),t,3)}function kK(e,t){return Wn(e.getUTCMilliseconds(),t,3)}function Zke(e,t){return kK(e,t)+"000"}function e8e(e,t){return Wn(e.getUTCMonth()+1,t,2)}function t8e(e,t){return Wn(e.getUTCMinutes(),t,2)}function r8e(e,t){return Wn(e.getUTCSeconds(),t,2)}function n8e(e){var t=e.getUTCDay();return t===0?7:t}function s8e(e,t){return Wn(D3.count(p0(e)-1,e),t,2)}function TK(e){var t=e.getUTCDay();return t>=4||t===0?t1(e):t1.ceil(e)}function a8e(e,t){return e=TK(e),Wn(t1.count(p0(e),e)+(p0(e).getUTCDay()===4),t,2)}function i8e(e){return e.getUTCDay()}function o8e(e,t){return Wn(y_.count(p0(e)-1,e),t,2)}function l8e(e,t){return Wn(e.getUTCFullYear()%100,t,2)}function c8e(e,t){return e=TK(e),Wn(e.getUTCFullYear()%100,t,2)}function u8e(e,t){return Wn(e.getUTCFullYear()%1e4,t,4)}function d8e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?t1(e):t1.ceil(e),Wn(e.getUTCFullYear()%1e4,t,4)}function f8e(){return"+0000"}function HI(){return"%"}function GI(e){return+e}function VI(e){return Math.floor(+e/1e3)}var ap,CK,NK;h8e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function h8e(e){return ap=hke(e),CK=ap.format,ap.parse,NK=ap.utcFormat,ap.utcParse,ap}function m8e(e){return new Date(e)}function g8e(e){return e instanceof Date?+e:+new Date(+e)}function _E(e,t,r,n,s,a,i,o,c,u){var d=lE(),f=d.invert,h=d.domain,g=u(".%L"),x=u(":%S"),y=u("%I:%M"),v=u("%I %p"),T=u("%a %d"),k=u("%b %d"),b=u("%B"),C=u("%Y");function E(j){return(c(j)<j?g:o(j)<j?x:i(j)<j?y:a(j)<j?v:n(j)<j?s(j)<j?T:k:r(j)<j?b:C)(j)}return d.invert=function(j){return new Date(f(j))},d.domain=function(j){return arguments.length?h(Array.from(j,g8e)):h().map(m8e)},d.ticks=function(j){var P=h();return e(P[0],P[P.length-1],j??10)},d.tickFormat=function(j,P){return P==null?E:u(P)},d.nice=function(j){var P=h();return(!j||typeof j.range!="function")&&(j=t(P[0],P[P.length-1],j??10)),j?h(hK(P,j)):d},d.copy=function(){return R2(d,_E(e,t,r,n,s,a,i,o,c,u))},d}function p8e(){return Mc.apply(_E(dke,fke,g0,wE,F3,I2,yE,pE,am,CK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function x8e(){return Mc.apply(_E(cke,uke,p0,bE,D3,M3,vE,xE,am,NK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function O3(){var e=0,t=1,r,n,s,a,i=Bo,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(s===0?.5:(f=(a(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var g,x;return arguments.length?([g,x]=h,i=f(g,x),u):[i(0),i(1)]}}return u.range=d(j1),u.rangeRound=d(oE),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function ch(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function EK(){var e=lh(O3()(Bo));return e.copy=function(){return ch(e,EK())},N0.apply(e,arguments)}function AK(){var e=dE(O3()).domain([1,10]);return e.copy=function(){return ch(e,AK()).base(e.base())},N0.apply(e,arguments)}function jK(){var e=fE(O3());return e.copy=function(){return ch(e,jK()).constant(e.constant())},N0.apply(e,arguments)}function SE(){var e=hE(O3());return e.copy=function(){return ch(e,SE()).exponent(e.exponent())},N0.apply(e,arguments)}function y8e(){return SE.apply(null,arguments).exponent(.5)}function PK(){var e=[],t=Bo;function r(n){if(n!=null&&!isNaN(n=+n))return t((D2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(If),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>n6e(e,a/n))},r.copy=function(){return PK(t).domain(e)},N0.apply(r,arguments)}function R3(){var e=0,t=.5,r=1,n=1,s,a,i,o,c,u=Bo,d,f=!1,h;function g(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-a)*(n*y<n*a?o:c),u(f?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),a=d(t=+t),i=d(r=+r),o=s===a?0:.5/(a-s),c=a===i?0:.5/(i-a),n=a<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(f=!!y,g):f},g.interpolator=function(y){return arguments.length?(u=y,g):u};function x(y){return function(v){var T,k,b;return arguments.length?([T,k,b]=v,u=j6e(y,[T,k,b]),g):[u(0),u(.5),u(1)]}}return g.range=x(j1),g.rangeRound=x(oE),g.unknown=function(y){return arguments.length?(h=y,g):h},function(y){return d=y,s=y(e),a=y(t),i=y(r),o=s===a?0:.5/(a-s),c=a===i?0:.5/(i-a),n=a<s?-1:1,g}}function MK(){var e=lh(R3()(Bo));return e.copy=function(){return ch(e,MK())},N0.apply(e,arguments)}function FK(){var e=dE(R3()).domain([.1,1,10]);return e.copy=function(){return ch(e,FK()).base(e.base())},N0.apply(e,arguments)}function DK(){var e=fE(R3());return e.copy=function(){return ch(e,DK()).constant(e.constant())},N0.apply(e,arguments)}function kE(){var e=hE(R3());return e.copy=function(){return ch(e,kE()).exponent(e.exponent())},N0.apply(e,arguments)}function v8e(){return kE.apply(null,arguments).exponent(.5)}const $y=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:sE,scaleDiverging:MK,scaleDivergingLog:FK,scaleDivergingPow:kE,scaleDivergingSqrt:v8e,scaleDivergingSymlog:DK,scaleIdentity:fK,scaleImplicit:TT,scaleLinear:dK,scaleLog:mK,scaleOrdinal:nE,scalePoint:i6e,scalePow:mE,scaleQuantile:xK,scaleQuantize:yK,scaleRadial:pK,scaleSequential:EK,scaleSequentialLog:AK,scaleSequentialPow:SE,scaleSequentialQuantile:PK,scaleSequentialSqrt:y8e,scaleSequentialSymlog:jK,scaleSqrt:Z6e,scaleSymlog:gK,scaleThreshold:vK,scaleTime:p8e,scaleUtc:x8e,tickFormat:uK},Symbol.toStringTag,{value:"Module"}));var uh=e=>e.chartData,w8e=It([uh],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),TE=(e,t,r,n)=>n?w8e(e):uh(e);function r1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(uu(t)&&uu(r))return!0}return!1}function qI(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function b8e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(uu(r))s=r;else if(typeof r=="function")return;if(uu(n))a=n;else if(typeof n=="function")return;var i=[s,a];if(r1(i))return i}}function _8e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(r1(n))return qI(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,i,o;if(s==="auto")t!=null&&(i=Math.min(...t));else if(ln(s))i=s;else if(typeof s=="function")try{t!=null&&(i=s(t?.[0]))}catch{}else if(typeof s=="string"&&BR.test(s)){var c=BR.exec(s);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t?.[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(ln(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[1]))}catch{}else if(typeof a=="string"&&$R.test(a)){var d=$R.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t?.[1];var h=[i,o];if(r1(h))return t==null?h:qI(h,t,r)}}}var P1=1e9,S8e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NE,Ws=!0,Nc="[DecimalError] ",vm=Nc+"Invalid argument: ",CE=Nc+"Exponent out of range: ",M1=Math.floor,Xh=Math.pow,k8e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ol,yi=1e7,Es=7,OK=9007199254740991,v_=M1(OK/Es),Mr={};Mr.absoluteValue=Mr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Mr.comparedTo=Mr.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};Mr.decimalPlaces=Mr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Es;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Mr.dividedBy=Mr.div=function(e){return s0(this,new this.constructor(e))};Mr.dividedToIntegerBy=Mr.idiv=function(e){var t=this,r=t.constructor;return vs(s0(t,new r(e),0,1),r.precision)};Mr.equals=Mr.eq=function(e){return!this.cmp(e)};Mr.exponent=function(){return Ua(this)};Mr.greaterThan=Mr.gt=function(e){return this.cmp(e)>0};Mr.greaterThanOrEqualTo=Mr.gte=function(e){return this.cmp(e)>=0};Mr.isInteger=Mr.isint=function(){return this.e>this.d.length-2};Mr.isNegative=Mr.isneg=function(){return this.s<0};Mr.isPositive=Mr.ispos=function(){return this.s>0};Mr.isZero=function(){return this.s===0};Mr.lessThan=Mr.lt=function(e){return this.cmp(e)<0};Mr.lessThanOrEqualTo=Mr.lte=function(e){return this.cmp(e)<1};Mr.logarithm=Mr.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ol))throw Error(Nc+"NaN");if(r.s<1)throw Error(Nc+(r.s?"NaN":"-Infinity"));return r.eq(Ol)?new n(0):(Ws=!1,t=s0(Jv(r,a),Jv(e,a),a),Ws=!0,vs(t,s))};Mr.minus=Mr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LK(t,e):RK(t,(e.s=-e.s,e))};Mr.modulo=Mr.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Nc+"NaN");return r.s?(Ws=!1,t=s0(r,e,0,1).times(e),Ws=!0,r.minus(t)):vs(new n(r),s)};Mr.naturalExponential=Mr.exp=function(){return IK(this)};Mr.naturalLogarithm=Mr.ln=function(){return Jv(this)};Mr.negated=Mr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Mr.plus=Mr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RK(t,e):LK(t,(e.s=-e.s,e))};Mr.precision=Mr.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vm+e);if(t=Ua(s)+1,n=s.d.length-1,r=n*Es+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Mr.squareRoot=Mr.sqrt=function(){var e,t,r,n,s,a,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Nc+"NaN")}for(e=Ua(o),Ws=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=Gu(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=M1((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=i=r+3;;)if(a=n,n=a.plus(s0(o,a,i+2)).times(.5),Gu(a.d).slice(0,i)===(t=Gu(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(vs(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;i+=4}return Ws=!0,vs(n,r)};Mr.times=Mr.mul=function(e){var t,r,n,s,a,i,o,c,u,d=this,f=d.constructor,h=d.d,g=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=g.length,c<u&&(a=h,h=g,g=a,i=c,c=u,u=i),a=[],i=c+u,n=i;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)o=a[s]+g[n]*h[s-n-1]+t,a[s--]=o%yi|0,t=o/yi|0;a[s]=(a[s]+t)%yi|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Ws?vs(e,f.precision):e};Mr.toDecimalPlaces=Mr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ed(e,0,P1),t===void 0?t=n.rounding:ed(t,0,8),vs(r,e+Ua(r)+1,t))};Mr.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Um(n,!0):(ed(e,0,P1),t===void 0?t=s.rounding:ed(t,0,8),n=vs(new s(n),e+1,t),r=Um(n,!0,e+1)),r};Mr.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?Um(s):(ed(e,0,P1),t===void 0?t=a.rounding:ed(t,0,8),n=vs(new a(s),e+Ua(s)+1,t),r=Um(n.abs(),!1,e+Ua(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Mr.toInteger=Mr.toint=function(){var e=this,t=e.constructor;return vs(new t(e),Ua(e)+1,t.rounding)};Mr.toNumber=function(){return+this};Mr.toPower=Mr.pow=function(e){var t,r,n,s,a,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Ol);if(o=new c(o),!o.s){if(e.s<1)throw Error(Nc+"Infinity");return o}if(o.eq(Ol))return o;if(n=c.precision,e.eq(Ol))return vs(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,a=o.s,i){if((r=d<0?-d:d)<=OK){for(s=new c(Ol),t=Math.ceil(n/Es+4),Ws=!1;r%2&&(s=s.times(o),YI(s.d,t)),r=M1(r/2),r!==0;)o=o.times(o),YI(o.d,t);return Ws=!0,e.s<0?new c(Ol).div(s):vs(s,n)}}else if(a<0)throw Error(Nc+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Ws=!1,s=e.times(Jv(o,n+u)),Ws=!0,s=IK(s),s.s=a,s};Mr.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=Ua(s),n=Um(s,r<=a.toExpNeg||r>=a.toExpPos)):(ed(e,1,P1),t===void 0?t=a.rounding:ed(t,0,8),s=vs(new a(s),e,t),r=Ua(s),n=Um(s,e<=r||r<=a.toExpNeg,e)),n};Mr.toSignificantDigits=Mr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ed(e,1,P1),t===void 0?t=n.rounding:ed(t,0,8)),vs(new n(r),e,t)};Mr.toString=Mr.valueOf=Mr.val=Mr.toJSON=Mr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ua(e),r=e.constructor;return Um(e,t<=r.toExpNeg||t>=r.toExpPos)};function RK(e,t){var r,n,s,a,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ws?vs(t,f):t;if(c=e.d,u=t.d,i=e.e,s=t.e,c=c.slice(),a=i-s,a){for(a<0?(n=c,a=-a,o=u.length):(n=u,s=i,o=c.length),i=Math.ceil(f/Es),o=i>o?i+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/yi|0,c[a]%=yi;for(r&&(c.unshift(r),++s),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=s,Ws?vs(t,f):t}function ed(e,t,r){if(e!==~~e||e<t||e>r)throw Error(vm+e)}function Gu(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)n=e[t]+"",r=Es-n.length,r&&(a+=bf(r)),a+=n;i=e[t],n=i+"",r=Es-n.length,r&&(a+=bf(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var s0=(function(){function e(n,s){var a,i=0,o=n.length;for(n=n.slice();o--;)a=n[o]*s+i,n[o]=a%yi|0,i=a/yi|0;return i&&n.unshift(i),n}function t(n,s,a,i){var o,c;if(a!=i)c=a>i?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=s[o]){c=n[o]>s[o]?1:-1;break}return c}function r(n,s,a){for(var i=0;a--;)n[a]-=i,i=n[a]<s[a]?1:0,n[a]=i*yi+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,i){var o,c,u,d,f,h,g,x,y,v,T,k,b,C,E,j,P,A,M=n.constructor,F=n.s==s.s?1:-1,B=n.d,V=s.d;if(!n.s)return new M(n);if(!s.s)throw Error(Nc+"Division by zero");for(c=n.e-s.e,P=V.length,E=B.length,g=new M(F),x=g.d=[],u=0;V[u]==(B[u]||0);)++u;if(V[u]>(B[u]||0)&&--c,a==null?k=a=M.precision:i?k=a+(Ua(n)-Ua(s))+1:k=a,k<0)return new M(0);if(k=k/Es+2|0,u=0,P==1)for(d=0,V=V[0],k++;(u<E||d)&&k--;u++)b=d*yi+(B[u]||0),x[u]=b/V|0,d=b%V|0;else{for(d=yi/(V[0]+1)|0,d>1&&(V=e(V,d),B=e(B,d),P=V.length,E=B.length),C=P,y=B.slice(0,P),v=y.length;v<P;)y[v++]=0;A=V.slice(),A.unshift(0),j=V[0],V[1]>=yi/2&&++j;do d=0,o=t(V,y,P,v),o<0?(T=y[0],P!=v&&(T=T*yi+(y[1]||0)),d=T/j|0,d>1?(d>=yi&&(d=yi-1),f=e(V,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,P<h?A:V,h))):(d==0&&(o=d=1),f=V.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(V,y,P,v),o<1&&(d++,r(y,P<v?A:V,v))),v=y.length):o===0&&(d++,y=[0]),x[u++]=d,o&&y[0]?y[v++]=B[C]||0:(y=[B[C]],v=1);while((C++<E||y[0]!==void 0)&&k--)}return x[0]||x.shift(),g.e=c,vs(g,i?a+Ua(g)+1:a)}})();function IK(e,t){var r,n,s,a,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(Ua(e)>16)throw Error(CE+Ua(e));if(!e.s)return new d(Ol);for(Ws=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Xh(2,u))/Math.LN10*2+5|0,o+=n,r=s=a=new d(Ol),d.precision=o;;){if(s=vs(s.times(e),o),r=r.times(++c),i=a.plus(s0(s,r,o)),Gu(i.d).slice(0,o)===Gu(a.d).slice(0,o)){for(;u--;)a=vs(a.times(a),o);return d.precision=f,t==null?(Ws=!0,vs(a,f)):a}a=i}}function Ua(e){for(var t=e.e*Es,r=e.d[0];r>=10;r/=10)t++;return t}function ck(e,t,r){if(t>e.LN10.sd())throw Ws=!0,r&&(e.precision=r),Error(Nc+"LN10 precision limit exceeded");return vs(new e(e.LN10),t)}function bf(e){for(var t="";e--;)t+="0";return t}function Jv(e,t){var r,n,s,a,i,o,c,u,d,f=1,h=10,g=e,x=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(Nc+(g.s?"NaN":"-Infinity"));if(g.eq(Ol))return new y(0);if(t==null?(Ws=!1,u=v):u=t,g.eq(10))return t==null&&(Ws=!0),ck(y,u);if(u+=h,y.precision=u,r=Gu(x),n=r.charAt(0),a=Ua(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Gu(g.d),n=r.charAt(0),f++;a=Ua(g),n>1?(g=new y("0."+r),a++):g=new y(n+"."+r.slice(1))}else return c=ck(y,u+2,v).times(a+""),g=Jv(new y(n+"."+r.slice(1)),u-h).plus(c),y.precision=v,t==null?(Ws=!0,vs(g,v)):g;for(o=i=g=s0(g.minus(Ol),g.plus(Ol),u),d=vs(g.times(g),u),s=3;;){if(i=vs(i.times(d),u),c=o.plus(s0(i,new y(s),u)),Gu(c.d).slice(0,u)===Gu(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(ck(y,u+2,v).times(a+""))),o=s0(o,new y(f),u),y.precision=v,t==null?(Ws=!0,vs(o,v)):o;o=c,s+=2}}function KI(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=M1(r/Es),e.d=[],n=(r+1)%Es,r<0&&(n+=Es),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Es;n<s;)e.d.push(+t.slice(n,n+=Es));t=t.slice(n),n=Es-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ws&&(e.e>v_||e.e<-v_))throw Error(CE+r)}else e.s=0,e.e=0,e.d=[0];return e}function vs(e,t,r){var n,s,a,i,o,c,u,d,f=e.d;for(i=1,a=f[0];a>=10;a/=10)i++;if(n=t-i,n<0)n+=Es,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Es),a=f.length,d>=a)return e;for(u=a=f[d],i=1;a>=10;a/=10)i++;n%=Es,s=n-Es+i}if(r!==void 0&&(a=Xh(10,i-s-1),o=u/a%10|0,c=t<0||f[d+1]!==void 0||u%a,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?s>0?u/Xh(10,i-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(a=Ua(e),f.length=1,t=t-a-1,f[0]=Xh(10,(Es-t%Es)%Es),e.e=M1(-t/Es)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Xh(10,Es-n),f[d]=s>0?(u/Xh(10,i-s)%Xh(10,s)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==yi&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=yi)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Ws&&(e.e>v_||e.e<-v_))throw Error(CE+Ua(e));return e}function LK(e,t){var r,n,s,a,i,o,c,u,d,f,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ws?vs(t,g):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),s=Math.max(Math.ceil(g/Es),o)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=c.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,s=f.length-o;s>0;--s)c[o++]=0;for(s=f.length;s>i;){if(c[--s]<f[s]){for(a=s;a&&c[--a]===0;)c[a]=yi-1;--c[a],c[s]+=yi}c[s]-=f[s]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ws?vs(t,g):t):new h(0)}function Um(e,t,r){var n,s=Ua(e),a=Gu(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+bf(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+bf(-s-1)+a,r&&(n=r-i)>0&&(a+=bf(n))):s>=i?(a+=bf(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+bf(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=bf(n))),e.s<0?"-"+a:a}function YI(e,t){if(e.length>t)return e.length=t,!0}function BK(e){var t,r,n;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(vm+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return KI(i,a.toString())}else if(typeof a!="string")throw Error(vm+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,k8e.test(a))KI(i,a);else throw Error(vm+a)}if(s.prototype=Mr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=BK,s.config=s.set=T8e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function T8e(e){if(!e||typeof e!="object")throw Error(Nc+"Object expected");var t,r,n,s=["precision",1,P1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(M1(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(vm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(vm+r+": "+n);return this}var NE=BK(S8e);Ol=new NE(1);const ss=NE;var C8e=e=>e,$K={},zK=e=>e===$K,XI=e=>function t(){return arguments.length===0||arguments.length===1&&zK(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},UK=(e,t)=>e===1?t:XI(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(i=>i!==$K).length;return a>=e?t(...n):UK(e-a,XI(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>zK(d)?o.shift():d);return t(...u,...o)}))}),I3=e=>UK(e.length,e),AT=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},N8e=I3((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),E8e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return C8e;var s=r.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce((o,c)=>c(o),a(...arguments))}},jT=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),WK=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=s,r=e(...s)),r}};function HK(e){var t;return e===0?t=1:t=Math.floor(new ss(e).abs().log(10).toNumber())+1,t}function GK(e,t,r){for(var n=new ss(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}I3((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});I3((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});I3((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var VK=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},qK=(e,t,r)=>{if(e.lte(0))return new ss(0);var n=HK(e.toNumber()),s=new ss(10).pow(n),a=e.div(s),i=n!==1?.05:.1,o=new ss(Math.ceil(a.div(i).toNumber())).add(r).mul(i),c=o.mul(s);return t?new ss(c.toNumber()):new ss(Math.ceil(c.toNumber()))},A8e=(e,t,r)=>{var n=new ss(1),s=new ss(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new ss(10).pow(HK(e)-1),s=new ss(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new ss(Math.floor(e)))}else e===0?s=new ss(Math.floor((t-1)/2)):r||(s=new ss(Math.floor(e)));var i=Math.floor((t-1)/2),o=E8e(N8e(c=>s.add(new ss(c-i).mul(n)).toNumber()),AT);return o(0,t)},KK=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ss(0),tickMin:new ss(0),tickMax:new ss(0)};var i=qK(new ss(r).sub(t).div(n-1),s,a),o;t<=0&&r>=0?o=new ss(0):(o=new ss(t).add(r).div(2),o=o.sub(new ss(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ss(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?KK(t,r,n,s,a+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new ss(c).mul(i)),tickMax:o.add(new ss(u).mul(i))})};function j8e(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[i,o]=VK([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...AT(0,n-1).map(()=>1/0)]:[...AT(0,n-1).map(()=>-1/0),o];return t>r?jT(c):c}if(i===o)return A8e(i,n,s);var{step:u,tickMin:d,tickMax:f}=KK(i,o,a,s,0),h=GK(d,f.add(new ss(.1).mul(u)),u);return t>r?jT(h):h}function P8e(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,i]=VK([r,n]);if(a===-1/0||i===1/0)return[r,n];if(a===i)return[a];var o=Math.max(t,2),c=qK(new ss(i).sub(a).div(o-1),s,0),u=[...GK(new ss(a),new ss(i),c),i];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?jT(u):u}var M8e=WK(j8e),F8e=WK(P8e),D8e=e=>e.rootProps.barCategoryGap,L3=e=>e.rootProps.stackOffset,EE=e=>e.options.chartName,AE=e=>e.rootProps.syncId,YK=e=>e.rootProps.syncMethod,jE=e=>e.options.eventEmitter,Gd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Cl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},B3=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},O8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Gd.angleAxisId,includeHidden:!1,name:void 0,reversed:Gd.reversed,scale:Gd.scale,tick:Gd.tick,tickCount:void 0,ticks:void 0,type:Gd.type,unit:void 0},R8e={allowDataOverflow:Cl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cl.scale,tick:Cl.tick,tickCount:Cl.tickCount,ticks:void 0,type:Cl.type,unit:void 0},I8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Gd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gd.scale,tick:Gd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},L8e={allowDataOverflow:Cl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cl.scale,tick:Cl.tick,tickCount:Cl.tickCount,ticks:void 0,type:"category",unit:void 0},PE=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?I8e:O8e,ME=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?L8e:R8e,$3=e=>e.polarOptions,FE=It([T0,C0,Qi],G3e),XK=It([$3,FE],(e,t)=>{if(e!=null)return Yf(e.innerRadius,t,0)}),JK=It([$3,FE],(e,t)=>{if(e!=null)return Yf(e.outerRadius,t,t*.8)}),B8e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},QK=It([$3],B8e);It([PE,QK],B3);var ZK=It([FE,XK,JK],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});It([ME,ZK],B3);var eY=It([Rs,$3,XK,JK,T0,C0],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:Yf(i,s,s/2),cy:Yf(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ha=(e,t)=>t,z3=(e,t,r)=>r;function tY(e){return e?.id}var oi=e=>{var t=Rs(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},F1=e=>e.tooltip.settings.axisId,Ni=e=>{var t=oi(e),r=F1(e);return L2(e,t,r)},rY=It([Ni],e=>e?.dataKey);function nY(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,i=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=tY(o);u.forEach((f,h)=>{var g=a==null||s?h:String(Uo(f,a,null)),x=Uo(f,o.dataKey,0),y;i.has(g)?y=i.get(g):y={},Object.assign(y,{[d]:x}),i.set(g,y)})}}),Array.from(i.values())}function DE(e){return e.stackId!=null&&e.dataKey!=null}function JI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function w_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JI(Object(r),!0).forEach(function(n){$8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $8e(e,t,r){return(t=z8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z8e(e){var t=U8e(e,"string");return typeof t=="symbol"?t:t+""}function U8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PT=[0,"auto"],kl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},sY=(e,t)=>e.cartesianAxis.xAxis[t],E0=(e,t)=>{var r=sY(e,t);return r??kl},Tl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:PT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:F2},aY=(e,t)=>e.cartesianAxis.yAxis[t],A0=(e,t)=>{var r=aY(e,t);return r??Tl},W8e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},OE=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??W8e},ml=(e,t,r)=>{switch(t){case"xAxis":return E0(e,r);case"yAxis":return A0(e,r);case"zAxis":return OE(e,r);case"angleAxis":return PE(e,r);case"radiusAxis":return ME(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},H8e=(e,t,r)=>{switch(t){case"xAxis":return E0(e,r);case"yAxis":return A0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},L2=(e,t,r)=>{switch(t){case"xAxis":return E0(e,r);case"yAxis":return A0(e,r);case"angleAxis":return PE(e,r);case"radiusAxis":return ME(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},iY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function oY(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var lY=e=>e.graphicalItems.cartesianItems,G8e=It([Ha,z3],oY),cY=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),B2=It([lY,ml,G8e],cY),uY=It([B2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(DE)),dY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),fY=It([B2],dY),hY=e=>e.map(t=>t.data).filter(Boolean).flat(1),V8e=It([B2],hY),mY=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},RE=It([V8e,TE],mY),gY=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Uo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Uo(s,n)}))):e.map(n=>({value:n})),U3=It([RE,ml,B2],gY);function pY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ig(e){return e.filter(t=>Zu(t)||t instanceof Date).map(Number).filter(t=>Tc(t)===!1)}function q8e(e,t,r){return!r||typeof t!="number"||Tc(t)?[]:r.length?ig(r.flatMap(n=>{var s=Uo(e,n.dataKey),a,i;if(Array.isArray(s)?[a,i]=s:a=i=s,!(!uu(a)||!uu(i)))return[t-a,t+i]})):[]}var K8e=It([uY,TE,Ni],nY),xY=(e,t,r)=>{var n={},s=t.reduce((a,i)=>(i.stackId==null||(a[i.stackId]==null&&(a[i.stackId]=[]),a[i.stackId].push(i)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[i,o]=a,c=o.map(tY);return[i,{stackedData:iSe(e,c,r),graphicalItems:o}]}))},Y8e=It([K8e,uY,L3],xY),yY=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var a=cSe(e,n,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},X8e=It([Y8e,uh,Ha],yY),vY=(e,t,r,n,s)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>pY(s,f)),d=Uo(a,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:q8e(a,d,u)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:Uo(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),W3=e=>e.errorBars,wY=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>pY(r,n));It([fY,W3,Ha],wY);var J8e=It([RE,ml,fY,W3,Ha],vY);function Q8e(e){var{value:t}=e;if(Zu(t)||t instanceof Date)return t}var QI=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=ig(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Z8e=(e,t,r)=>{var n=e.map(Q8e).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&DV(n))?eK(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},IE=e=>{var t;if(e==null||!("domain"in e))return PT;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ig(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:PT},b_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),i=Math.min(...a),o=Math.max(...a);return[i,o]}},bY=e=>e.referenceElements.dots,D1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),eTe=It([bY,Ha,z3],D1),_Y=e=>e.referenceElements.areas,tTe=It([_Y,Ha,z3],D1),SY=e=>e.referenceElements.lines,rTe=It([SY,Ha,z3],D1),kY=(e,t)=>{var r=ig(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nTe=It(eTe,Ha,kY),TY=(e,t)=>{var r=ig(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},sTe=It([tTe,Ha],TY),CY=(e,t)=>{var r=ig(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},aTe=It(rTe,Ha,CY),iTe=It(nTe,aTe,sTe,(e,t,r)=>b_(e,r,t)),oTe=It([ml],IE),NY=(e,t,r,n,s,a,i)=>{var o=b8e(t,e.allowDataOverflow);if(o!=null)return o;var c=a==="vertical"&&i==="xAxis"||a==="horizontal"&&i==="yAxis",u=c?b_(r,s,QI(n)):b_(s,QI(n));return _8e(t,u,e.allowDataOverflow)},lTe=It([ml,oTe,X8e,J8e,iTe,Rs,Ha],NY),cTe=[0,1],EY=(e,t,r,n,s,a,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=oh(t,a);return u&&o==null?eK(0,r.length):c==="category"?Z8e(n,e,u):s==="expand"?cTe:i}},LE=It([ml,Rs,RE,U3,L3,Ha,lTe],EY),AY=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:i}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(UN(a));return o in $y?o:"point"}}},$2=It([ml,Rs,iY,EE,Ha],AY);function uTe(e){if(e!=null){if(e in $y)return $y[e]();var t="scale".concat(UN(e));if(t in $y)return $y[t]()}}function BE(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=uTe(t);if(s!=null){var a=s.domain(r).range(n);return rSe(a),a}}}var jY=(e,t,r)=>{var n=IE(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&r1(e))return M8e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&r1(e))return F8e(e,t.tickCount,t.allowDecimals)}},$E=It([LE,L2,$2],jY),PY=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&r1(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],i=t[1],o=r[r.length-1];return[Math.min(s,a),Math.max(i,o)]}return t},dTe=It([ml,LE,$E,Ha],PY),fTe=It(U3,ml,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ig(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var i=n[a+1]-n[a];r=Math.min(r,i)}return r/s}}),MY=It(fTe,Rs,D8e,Qi,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!uu(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var i=Yf(r,e*a),o=e*a/2;return o-i-(o-i)/a*i}return 0}),hTe=(e,t)=>{var r=E0(e,t);return r==null||typeof r.padding!="string"?0:MY(e,"xAxis",t,r.padding)},mTe=(e,t)=>{var r=A0(e,t);return r==null||typeof r.padding!="string"?0:MY(e,"yAxis",t,r.padding)},gTe=It(E0,hTe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),pTe=It(A0,mTe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),xTe=It([Qi,gTe,j3,A3,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),yTe=It([Qi,Rs,pTe,j3,A3,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:i}=s;return a?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),z2=(e,t,r,n)=>{var s;switch(t){case"xAxis":return xTe(e,r,n);case"yAxis":return yTe(e,r,n);case"zAxis":return(s=OE(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return QK(e);case"radiusAxis":return ZK(e,r);default:return}},FY=It([ml,z2],B3),O1=It([ml,$2,dTe,FY],BE);It([B2,W3,Ha],wY);function DY(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var H3=(e,t)=>t,G3=(e,t,r)=>r,vTe=It(N3,H3,G3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(DY)),wTe=It(E3,H3,G3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(DY)),OY=(e,t)=>({width:e.width,height:t.height}),bTe=(e,t)=>{var r=typeof t.width=="number"?t.width:F2;return{width:r,height:e.height}},_Te=It(Qi,E0,OY),STe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},kTe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},TTe=It(C0,Qi,vTe,H3,G3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var c=OY(t,o);i==null&&(i=STe(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;a[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),a}),CTe=It(T0,Qi,wTe,H3,G3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var c=bTe(t,o);i==null&&(i=kTe(t,n,e));var u=n==="left"&&!s||n==="right"&&s;a[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),a}),NTe=(e,t)=>{var r=E0(e,t);if(r!=null)return TTe(e,r.orientation,r.mirror)},ETe=It([Qi,E0,NTe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),ATe=(e,t)=>{var r=A0(e,t);if(r!=null)return CTe(e,r.orientation,r.mirror)},jTe=It([Qi,A0,ATe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),PTe=It(Qi,A0,(e,t)=>{var r=typeof t.width=="number"?t.width:F2;return{width:r,height:e.height}}),RY=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:i}=r,o=oh(e,n),c=t.map(u=>u.value);if(i&&o&&a==="category"&&s&&DV(c))return c}},zE=It([Rs,U3,ml,Ha],RY),IY=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,i=oh(e,n);if(i&&(s==="number"||a!=="auto"))return t.map(o=>o.value)}},UE=It([Rs,U3,L2,Ha],IY),ZI=It([Rs,H8e,$2,O1,zE,UE,z2,$E,Ha],(e,t,r,n,s,a,i,o,c)=>{if(t==null)return null;var u=oh(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:a,duplicateDomain:s,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),MTe=(e,t,r,n,s,a,i,o,c)=>{if(!(t==null||n==null)){var u=oh(e,c),{type:d,ticks:f,tickCount:h}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/g:0;x=c==="angleAxis"&&a!=null&&a.length>=2?pc(a[0]-a[1])*2*x:x;var y=f||s;if(y){var v=y.map((T,k)=>{var b=i?i.indexOf(T):T;return{index:k,coordinate:n(b)+x,value:T,offset:x}});return v.filter(T=>!Tc(T.coordinate))}return u&&o?o.map((T,k)=>({coordinate:n(T)+x,value:T,index:k,offset:x})):n.ticks?n.ticks(h).map(T=>({coordinate:n(T)+x,value:T,offset:x})):n.domain().map((T,k)=>({coordinate:n(T)+x,value:i?i[T]:T,index:k,offset:x}))}},LY=It([Rs,L2,$2,O1,$E,z2,zE,UE,Ha],MTe),FTe=(e,t,r,n,s,a,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=oh(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&n?.length>=2?pc(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},BY=It([Rs,L2,O1,z2,zE,UE,Ha],FTe),$Y=It(ml,O1,(e,t)=>{if(!(e==null||t==null))return w_(w_({},e),{},{scale:t})}),DTe=It([ml,$2,LE,FY],BE);It((e,t,r)=>OE(e,r),DTe,(e,t)=>{if(!(e==null||t==null))return w_(w_({},e),{},{scale:t})});var OTe=It([Rs,N3,E3],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),zY=e=>e.options.defaultTooltipEventType,UY=e=>e.options.validateTooltipEventTypes;function WY(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function WE(e,t){var r=zY(e),n=UY(e);return WY(t,r,n)}function RTe(e){return Xr(t=>WE(t,e))}var HY=(e,t)=>{var r,n=Number(t);if(!(Tc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},ITe=e=>e.tooltip.settings,Sf={active:!1,index:null,dataKey:void 0,coordinate:void 0},LTe={itemInteraction:{click:Sf,hover:Sf},axisInteraction:{click:Sf,hover:Sf},keyboardInteraction:Sf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},GY=Wl({name:"tooltip",initialState:LTe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=n0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:BTe,removeTooltipEntrySettings:$Te,setTooltipSettingsState:zTe,setActiveMouseOverItemIndex:UTe,mouseLeaveItem:Oje,mouseLeaveChart:VY,setActiveClickItemIndex:Rje,setMouseOverAxisIndex:qY,setMouseClickAxisIndex:WTe,setSyncInteraction:MT,setKeyboardInteraction:FT}=GY.actions,HTe=GY.reducer;function eL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ib(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eL(Object(r),!0).forEach(function(n){GTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GTe(e,t,r){return(t=VTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VTe(e){var t=qTe(e,"string");return typeof t=="symbol"?t:t+""}function qTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KTe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function YTe(e){return e.index!=null}var KY=(e,t,r,n)=>{if(t==null)return Sf;var s=KTe(e,t,r);if(s==null)return Sf;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(YTe(s)){if(a)return Ib(Ib({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Ib(Ib({},Sf),{},{coordinate:s.coordinate})},HE=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!uu(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},YY=(e,t,r,n,s,a,i,o)=>{if(!(a==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var d=s?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},XY=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var i;return((i=a.settings)===null||i===void 0?void 0:i.dataKey)===s})},U2=e=>e.options.tooltipPayloadSearcher,R1=e=>e.tooltip;function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(n){XTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XTe(e,t,r){return(t=JTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JTe(e){var t=QTe(e,"string");return typeof t=="symbol"?t:t+""}function QTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZTe(e,t){return e??t}var JY=(e,t,r,n,s,a,i)=>{if(!(t==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,g)=>{var x,{dataDefinedOnItem:y,settings:v}=g,T=ZTe(y,o),k=Array.isArray(T)?Oq(T,u,d):T,b=(x=v?.dataKey)!==null&&x!==void 0?x:n,C=v?.nameKey,E;if(n&&Array.isArray(k)&&!Array.isArray(k[0])&&i==="axis"?E=OV(k,n,s):E=a(k,t,c,C),Array.isArray(E))E.forEach(P=>{var A=rL(rL({},v),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});h.push(zR({tooltipEntrySettings:A,dataKey:P.dataKey,payload:P.payload,value:Uo(P.payload,P.dataKey),name:P.name}))});else{var j;h.push(zR({tooltipEntrySettings:v,dataKey:b,payload:E,value:Uo(E,b),name:(j=Uo(E,C))!==null&&j!==void 0?j:v?.name}))}return h},f)}},GE=It([Ni,Rs,iY,EE,oi],AY),eCe=It([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),tCe=It([oi,F1],oY),W2=It([eCe,Ni,tCe],cY),rCe=It([W2],e=>e.filter(DE)),nCe=It([W2],hY),I1=It([nCe,uh],mY),sCe=It([rCe,uh,Ni],nY),VE=It([I1,Ni,W2],gY),aCe=It([Ni],IE),iCe=It([W2],e=>e.filter(DE)),oCe=It([sCe,iCe,L3],xY),lCe=It([oCe,uh,oi],yY),cCe=It([W2],dY),uCe=It([I1,Ni,cCe,W3,oi],vY),dCe=It([bY,oi,F1],D1),fCe=It([dCe,oi],kY),hCe=It([_Y,oi,F1],D1),mCe=It([hCe,oi],TY),gCe=It([SY,oi,F1],D1),pCe=It([gCe,oi],CY),xCe=It([fCe,pCe,mCe],b_),yCe=It([Ni,aCe,lCe,uCe,xCe,Rs,oi],NY),QY=It([Ni,Rs,I1,VE,L3,oi,yCe],EY),vCe=It([QY,Ni,GE],jY),wCe=It([Ni,QY,vCe,oi],PY),ZY=e=>{var t=oi(e),r=F1(e),n=!1;return z2(e,t,r,n)},eX=It([Ni,ZY],B3),tX=It([Ni,GE,wCe,eX],BE),bCe=It([Rs,VE,Ni,oi],RY),_Ce=It([Rs,VE,Ni,oi],IY),SCe=(e,t,r,n,s,a,i,o)=>{if(t){var{type:c}=t,u=oh(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&s!=null&&s?.length>=2?pc(s[0]-s[1])*2*f:f,u&&i?i.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:a?a[h]:h,index:g,offset:f}))}}},j0=It([Rs,Ni,GE,tX,ZY,bCe,_Ce,oi],SCe),qE=It([zY,UY,ITe],(e,t,r)=>WY(r.shared,e,t)),rX=e=>e.tooltip.settings.trigger,KE=e=>e.tooltip.settings.defaultIndex,V3=It([R1,qE,rX,KE],KY),Qv=It([V3,I1],HE),nX=It([j0,Qv],HY),kCe=It([V3],e=>{if(e)return e.dataKey}),sX=It([R1,qE,rX,KE],XY),TCe=It([T0,C0,Rs,Qi,j0,KE,sX,U2],YY),CCe=It([V3,TCe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),NCe=It([V3],e=>e.active),ECe=It([sX,Qv,uh,rY,nX,U2,qE],JY),ACe=It([ECe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function nL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nL(Object(r),!0).forEach(function(n){jCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jCe(e,t,r){return(t=PCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PCe(e){var t=MCe(e,"string");return typeof t=="symbol"?t:t+""}function MCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FCe=()=>Xr(Ni),DCe=()=>{var e=FCe(),t=Xr(j0),r=Xr(tX);return gT(sL(sL({},e),{},{scale:r}),t)},OCe=()=>Xr(EE),YE=(e,t)=>t,aX=(e,t,r)=>r,XE=(e,t,r,n)=>n,RCe=It(j0,e=>b3(e,t=>t.coordinate)),JE=It([R1,YE,aX,XE],KY),iX=It([JE,I1],HE),ICe=(e,t,r)=>{if(t!=null){var n=R1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},oX=It([R1,YE,aX,XE],XY),__=It([T0,C0,Rs,Qi,j0,XE,oX,U2],YY),LCe=It([JE,__],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),lX=It(j0,iX,HY),BCe=It([oX,iX,uh,rY,lX,U2,YE],JY),$Ce=It([JE],e=>({isActive:e.active,activeIndex:e.index})),zCe=(e,t,r,n,s,a,i,o)=>{if(!(!e||!t||!n||!s||!a)){var c=uSe(e.chartX,e.chartY,t,r,o);if(c){var u=fSe(c,t),d=eSe(u,i,a,n,s),f=dSe(t,a,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function DT(){return DT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DT.apply(null,arguments)}function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){UCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UCe(e,t,r){return(t=WCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WCe(e){var t=HCe(e,"string");return typeof t=="symbol"?t:t+""}function HCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GCe(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:a,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var g,x;if(u==="ScatterChart")g=d,x=n5e;else if(u==="BarChart")g=s5e(i,d,s,a),x=O5e;else if(i==="radial"){var{cx:y,cy:v,radius:T,startAngle:k,endAngle:b}=Qq(d);g={cx:y,cy:v,startAngle:k,endAngle:b,innerRadius:T,outerRadius:T},x=B5e}else g={points:$5e(i,d,s)},x=Vq;var C=typeof o=="object"&&"className"in o?o.className:void 0,E=Lb(Lb(Lb(Lb({stroke:"#ccc",pointerEvents:"none"},s),g),Ji(o,!1)),{},{payload:f,payloadIndex:h,className:Ds("recharts-tooltip-cursor",C)});return _.isValidElement(o)?_.cloneElement(o,E):_.createElement(x,E)}function VCe(e){var t=DCe(),r=zq(),n=tE(),s=OCe();return _.createElement(GCe,DT({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var cX=_.createContext(null),qCe=()=>_.useContext(cX),uk={exports:{}},iL;function KCe(){return iL||(iL=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,f||c,h),x=r?r+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],g]:c._events[x].push(g):(c._events[x]=g,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,x=new Array(g);h<g;h++)x[h]=f[h].fn;return x},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,g,x){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],T=arguments.length,k,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),T){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,g),!0;case 6:return v.fn.call(v.context,d,f,h,g,x),!0}for(b=1,k=new Array(T-1);b<T;b++)k[b-1]=arguments[b];v.fn.apply(v.context,k)}else{var C=v.length,E;for(b=0;b<C;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),T){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!k)for(E=1,k=new Array(T-1);E<T;E++)k[E-1]=arguments[E];v[b].fn.apply(v[b].context,k)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return i(this,g),this;var x=this._events[g];if(x.fn)x.fn===d&&(!h||x.once)&&(!f||x.context===f)&&i(this,g);else{for(var y=0,v=[],T=x.length;y<T;y++)(x[y].fn!==d||h&&!x[y].once||f&&x[y].context!==f)&&v.push(x[y]);v.length?this._events[g]=v.length===1?v[0]:v:i(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(uk)),uk.exports}var YCe=KCe();const XCe=Ec(YCe);var Zv=new XCe,OT="recharts.syncEvent.tooltip",oL="recharts.syncEvent.brush";function JCe(e,t){if(t){var r=Number.parseInt(t,10);if(!Tc(r))return e?.[r]}}var QCe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},uX=Wl({name:"options",initialState:QCe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ZCe=uX.reducer,{createEventEmitter:e7e}=uX.actions;function t7e(e){return e.tooltip.syncInteraction}var r7e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},dX=Wl({name:"chartData",initialState:r7e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:lL,setDataStartEndIndexes:n7e,setComputedData:Ije}=dX.actions,s7e=dX.reducer,a7e=["x","y"];function cL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cL(Object(r),!0).forEach(function(n){i7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i7e(e,t,r){return(t=o7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o7e(e){var t=l7e(e,"string");return typeof t=="symbol"?t:t+""}function l7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c7e(e,t){if(e==null)return{};var r,n,s=u7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function u7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fX=()=>{};function d7e(){var e=Xr(AE),t=Xr(jE),r=Vo(),n=Xr(YK),s=Xr(j0),a=tE(),i=eE(),o=Xr(c=>c.rootProps.className);_.useEffect(()=>{if(e==null)return fX;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate){var g=d.payload.coordinate,{x,y}=g,v=c7e(g,a7e),T=Vh(Vh(Vh({},v),typeof x=="number"&&{x:Math.max(i.x,Math.min(x,i.x+i.width))}),typeof y=="number"&&{y:Math.max(i.y,Math.min(y,i.y+i.height))}),k=Vh(Vh({},d),{},{payload:Vh(Vh({},d.payload),{},{coordinate:T})});r(k)}else r(d);return}if(s!=null){var b;if(typeof n=="function"){var C={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(s,C);b=s[E]}else n==="value"&&(b=s.find(ee=>String(ee.value)===d.payload.label));var{coordinate:j}=d.payload;if(b==null||d.payload.active===!1||j==null||i==null){r(MT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:P,y:A}=j,M=Math.min(P,i.x+i.width),F=Math.min(A,i.y+i.height),B={x:a==="horizontal"?b.coordinate:M,y:a==="horizontal"?F:b.coordinate},V=MT({active:d.payload.active,coordinate:B,dataKey:d.payload.dataKey,index:String(b.index),label:d.payload.label});r(V)}}};return Zv.on(OT,c),()=>{Zv.off(OT,c)}},[o,r,t,e,n,s,a,i])}function f7e(){var e=Xr(AE),t=Xr(jE),r=Vo();_.useEffect(()=>{if(e==null)return fX;var n=(s,a,i)=>{t!==i&&e===s&&r(n7e(a))};return Zv.on(oL,n),()=>{Zv.off(oL,n)}},[r,t,e])}function h7e(){var e=Vo();_.useEffect(()=>{e(e7e())},[e]),d7e(),f7e()}function m7e(e,t,r,n,s,a){var i=Xr(h=>ICe(h,e,t)),o=Xr(jE),c=Xr(AE),u=Xr(YK),d=Xr(t7e),f=d?.active;_.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=MT({active:a,coordinate:r,dataKey:i,index:s,label:typeof n=="number"?String(n):n});Zv.emit(OT,c,h,o)}},[f,r,i,s,n,o,c,u,a])}function uL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uL(Object(r),!0).forEach(function(n){g7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g7e(e,t,r){return(t=p7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p7e(e){var t=x7e(e,"string");return typeof t=="symbol"?t:t+""}function x7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y7e(e){return e.dataKey}function v7e(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(OSe,t)}var fL=[],w7e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!A1.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function b7e(e){var t=Pc(e,w7e),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:g,wrapperStyle:x,cursor:y,shared:v,trigger:T,defaultIndex:k,portal:b,axisId:C}=t,E=Vo(),j=typeof k=="number"?String(k):k;_.useEffect(()=>{E(zTe({shared:v,trigger:T,axisId:C,active:r,defaultIndex:j}))},[E,v,T,C,r,j]);var P=eE(),A=Gq(),M=RTe(v),{activeIndex:F,isActive:B}=Xr(X=>$Ce(X,M,T,j)),V=Xr(X=>BCe(X,M,T,j)),ee=Xr(X=>lX(X,M,T,j)),ae=Xr(X=>LCe(X,M,T,j)),Z=V,te=qCe(),L=r??B,[K,I]=W_e([Z,L]),H=M==="axis"?ee:void 0;m7e(M,T,ae,H,F,L);var U=b??te;if(U==null)return null;var R=Z??fL;L||(R=fL),o&&R.length&&(R=g_e(Z.filter(X=>X.value!=null&&(X.hide!==!0||t.includeHidden)),d,y7e));var z=R.length>0,G=_.createElement(USe,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:c,active:L,coordinate:ae,hasPayload:z,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:P,wrapperStyle:x,lastBoundingBox:K,innerRef:I,hasPortalFromProps:!!b},v7e(i,dL(dL({},t),{},{payload:R,label:H,active:L,coordinate:ae,accessibilityLayer:A})));return _.createElement(_.Fragment,null,Tk.createPortal(G,U),L&&_.createElement(VCe,{cursor:y,tooltipEventType:M,coordinate:ae,payload:Z,index:F}))}var dk={},fk={},hk={},hL;function _7e(){return hL||(hL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let i,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const g=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},x=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{x(),i=void 0,o=null},v=()=>{d()},T=function(...k){if(s?.aborted)return;i=this,o=k;const b=h==null;g(),c&&b&&d()};return T.schedule=g,T.cancel=y,T.flush=v,s?.addEventListener("abort",y,{once:!0}),T}e.debounce=t})(hk)),hk}var mL;function S7e(){return mL||(mL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_7e();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:i=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),g=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},x=()=>(h.flush(),d);return g.cancel=h.cancel,g.flush=x,g}e.debounce=r})(fk)),fk}var gL;function k7e(){return gL||(gL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S7e();function r(n,s=0,a={}){const{leading:i=!0,trailing:o=!0}=a;return t.debounce(n,s,{leading:i,maxWait:s,trailing:o})}e.throttle=r})(dk)),dk}var mk,pL;function T7e(){return pL||(pL=1,mk=k7e().throttle),mk}var C7e=T7e();const N7e=Ec(C7e);var iv=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]};function xL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xL(Object(r),!0).forEach(function(n){E7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E7e(e,t,r){return(t=A7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A7e(e){var t=j7e(e,"string");return typeof t=="symbol"?t:t+""}function j7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P7e=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:a="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:g,style:x={}}=e,y=_.useRef(null),v=_.useRef();v.current=g,_.useImperativeHandle(t,()=>y.current);var[T,k]=_.useState({containerWidth:n.width,containerHeight:n.height}),b=_.useCallback((E,j)=>{k(P=>{var A=Math.round(E),M=Math.round(j);return P.containerWidth===A&&P.containerHeight===M?P:{containerWidth:A,containerHeight:M}})},[]);_.useEffect(()=>{var E=M=>{var F,{width:B,height:V}=M[0].contentRect;b(B,V),(F=v.current)===null||F===void 0||F.call(v,B,V)};d>0&&(E=N7e(E,d,{trailing:!0,leading:!1}));var j=new ResizeObserver(E),{width:P,height:A}=y.current.getBoundingClientRect();return b(P,A),j.observe(y.current),()=>{j.disconnect()}},[b,d]);var C=_.useMemo(()=>{var{containerWidth:E,containerHeight:j}=T;if(E<0||j<0)return null;iv(nm(s)||nm(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,a),iv(!r||r>0,"The aspect(%s) must be greater than zero.",r);var P=nm(s)?E:s,A=nm(a)?j:a;return r&&r>0&&(P?A=P/r:A&&(P=A*r),c&&A>c&&(A=c)),iv(P>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,A,s,a,i,o,r),_.Children.map(u,M=>_.cloneElement(M,{width:P,height:A,style:gk({width:P,height:A},M.props.style)}))},[r,u,a,c,o,i,T,s]);return _.createElement("div",{id:f?"".concat(f):void 0,className:Ds("recharts-responsive-container",h),style:gk(gk({},x),{},{width:s,height:a,minWidth:i,minHeight:o,maxHeight:c}),ref:y},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},C))});function M7e(e,t,r){return(t=F7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F7e(e){var t=D7e(e,"string");return typeof t=="symbol"?t:t+""}function D7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class O7e{constructor(t){M7e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function yL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function R7e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yL(Object(r),!0).forEach(function(n){I7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I7e(e,t,r){return(t=L7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L7e(e){var t=B7e(e,"string");return typeof t=="symbol"?t:t+""}function B7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $7e={cacheSize:2e3,enableCache:!0},hX=R7e({},$7e),vL=new O7e(hX.cacheSize),z7e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},wL="recharts_measurement_span";function U7e(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(o)}var bL=(e,t)=>{try{var r=document.getElementById(wL);r||(r=document.createElement("span"),r.setAttribute("id",wL),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,z7e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ov=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||A1.isSsr)return{width:0,height:0};if(!hX.enableCache)return bL(t,r);var n=U7e(t,r),s=vL.get(n);if(s)return s;var a=bL(t,r);return vL.set(n,a),a},_L=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W7e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,H7e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,mX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},G7e=Object.keys(mX),Sp="NaN";function V7e(e,t){return e*mX[t]}class sl{static parse(t){var r,[,n,s]=(r=H7e.exec(t))!==null&&r!==void 0?r:[];return new sl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Tc(t)&&(this.unit=""),r!==""&&!W7e.test(r)&&(this.num=NaN,this.unit=""),G7e.includes(r)&&(this.num=V7e(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Tc(this.num)}}function gX(e){if(e.includes(Sp))return Sp;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=_L.exec(t))!==null&&r!==void 0?r:[],i=sl.parse(n??""),o=sl.parse(a??""),c=s==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return Sp;t=t.replace(_L,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=SL.exec(t))!==null&&u!==void 0?u:[],g=sl.parse(d??""),x=sl.parse(h??""),y=f==="+"?g.add(x):g.subtract(x);if(y.isNaN())return Sp;t=t.replace(SL,y.toString())}return t}var kL=/\(([^()]*)\)/;function q7e(e){for(var t=e,r;(r=kL.exec(t))!=null;){var[,n]=r;t=t.replace(kL,gX(n))}return t}function K7e(e){var t=e.replace(/\s+/g,"");return t=q7e(t),t=gX(t),t}function Y7e(e){try{return K7e(e)}catch{return Sp}}function pk(e){var t=Y7e(e.slice(5,-1));return t===Sp?"":t}var X7e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],J7e=["dx","dy","angle","className","breakAll"];function RT(){return RT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RT.apply(null,arguments)}function TL(e,t){if(e==null)return{};var r,n,s=Q7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Q7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pX=/[ \f\n\r\t\v\u2028\u2029]+/,xX=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];ki(t)||(r?s=t.toString().split(""):s=t.toString().split(pX));var a=s.map(o=>({word:o,width:ov(o,n).width})),i=r?0:ov("",n).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},Z7e=(e,t,r,n,s)=>{var{maxLines:a,children:i,style:o,breakAll:c}=e,u=ln(a),d=i,f=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce((V,ee)=>{var{word:ae,width:Z}=ee,te=V[V.length-1];if(te&&(n==null||s||te.width+Z+r<Number(n)))te.words.push(ae),te.width+=Z+r;else{var L={words:[ae],width:Z};V.push(L)}return V},[])},h=f(t),g=F=>F.reduce((B,V)=>B.width>V.width?B:V);if(!u||s)return h;var x=h.length>a||g(h).width>Number(n);if(!x)return h;for(var y="",v=F=>{var B=d.slice(0,F),V=xX({breakAll:c,style:o,children:B+y}).wordsWithComputedWidth,ee=f(V),ae=ee.length>a||g(ee).width>Number(n);return[ae,ee]},T=0,k=d.length-1,b=0,C;T<=k&&b<=d.length-1;){var E=Math.floor((T+k)/2),j=E-1,[P,A]=v(j),[M]=v(E);if(!P&&!M&&(T=E+1),P&&M&&(k=E-1),!P&&M){C=A;break}b++}return C||h},CL=e=>{var t=ki(e)?[]:e.toString().split(pX);return[{words:t}]},eNe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:i}=e;if((t||r)&&!A1.isSsr){var o,c,u=xX({breakAll:a,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return CL(n);return Z7e({breakAll:a,children:n,maxLines:i,style:s},o,c,t,r)}return CL(n)},NL="#808080",QE=_.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=NL}=e,d=TL(e,X7e),f=_.useMemo(()=>eNe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:g,angle:x,className:y,breakAll:v}=d,T=TL(d,J7e);if(!Zu(r)||!Zu(n)||f.length===0)return null;var k=r+(ln(h)?h:0),b=n+(ln(g)?g:0),C;switch(c){case"start":C=pk("calc(".concat(a,")"));break;case"middle":C=pk("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:C=pk("calc(".concat(f.length-1," * -").concat(s,")"));break}var E=[];if(i){var j=f[0].width,{width:P}=d;E.push("scale(".concat(ln(P)?P/j:1,")"))}return x&&E.push("rotate(".concat(x,", ").concat(k,", ").concat(b,")")),E.length&&(T.transform=E.join(" ")),_.createElement("text",RT({},Ji(T,!0),{ref:t,x:k,y:b,className:Ds("recharts-text",y),textAnchor:o,fill:u.includes("url")?NL:u}),f.map((A,M)=>{var F=A.words.join(v?"":" ");return _.createElement("tspan",{x:k,dy:M===0?C:s,key:"".concat(F,"-").concat(M)},F)}))});QE.displayName="Text";var tNe=["labelRef"];function rNe(e,t){if(e==null)return{};var r,n,s=nNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function EL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(r),!0).forEach(function(n){sNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sNe(e,t,r){return(t=aNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aNe(e){var t=iNe(e,"string");return typeof t=="symbol"?t:t+""}function iNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vd.apply(null,arguments)}var yX=_.createContext(null),oNe=e=>{var{x:t,y:r,width:n,height:s,children:a}=e,i=_.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return _.createElement(yX.Provider,{value:i},a)},vX=()=>{var e=_.useContext(yX),t=eE();return e||t},lNe=_.createContext(null),cNe=()=>{var e=_.useContext(lNe),t=Xr(eY);return e||t},uNe=e=>{var{value:t,formatter:r}=e,n=ki(e.children)?t:e.children;return typeof r=="function"?r(n):n},ZE=e=>e!=null&&typeof e=="function",dNe=(e,t)=>{var r=pc(t-e),n=Math.min(Math.abs(t-e),360);return r*n},fNe=(e,t,r,n,s)=>{var{offset:a,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:g}=s,x=(u+d)/2,y=dNe(f,h),v=y>=0?1:-1,T,k;switch(t){case"insideStart":T=f+v*a,k=g;break;case"insideEnd":T=h-v*a,k=!g;break;case"end":T=h+v*a,k=g;break;default:throw new Error("Unsupported position ".concat(t))}k=y<=0?k:!k;var b=Ki(o,c,x,T),C=Ki(o,c,x,T+(k?1:-1)*359),E="M".concat(b.x,",").concat(b.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(C.x,",").concat(C.y),j=ki(e.id)?Wv("recharts-radial-line-"):e.id;return _.createElement("text",Vd({},n,{dominantBaseline:"central",className:Ds("recharts-radial-bar-label",i)}),_.createElement("defs",null,_.createElement("path",{id:j,d:E})),_.createElement("textPath",{xlinkHref:"#".concat(j)},r))},hNe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=Ki(n,s,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=(a+i)/2,{x:g,y:x}=Ki(n,s,h,u);return{x:g,y:x,textAnchor:"middle",verticalAnchor:"middle"}},wX=e=>"cx"in e&&ln(e.cx),mNe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!wX(r)&&(a=r);var{x:i,y:o,width:c,height:u}=t,d=u>=0?1:-1,f=d*n,h=d>0?"end":"start",g=d>0?"start":"end",x=c>=0?1:-1,y=x*n,v=x>0?"end":"start",T=x>0?"start":"end";if(s==="top"){var k={x:i+c/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return Ta(Ta({},k),a?{height:Math.max(o-a.y,0),width:c}:{})}if(s==="bottom"){var b={x:i+c/2,y:o+u+f,textAnchor:"middle",verticalAnchor:g};return Ta(Ta({},b),a?{height:Math.max(a.y+a.height-(o+u),0),width:c}:{})}if(s==="left"){var C={x:i-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"};return Ta(Ta({},C),a?{width:Math.max(C.x-a.x,0),height:u}:{})}if(s==="right"){var E={x:i+c+y,y:o+u/2,textAnchor:T,verticalAnchor:"middle"};return Ta(Ta({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:u}:{})}var j=a?{width:c,height:u}:{};return s==="insideLeft"?Ta({x:i+y,y:o+u/2,textAnchor:T,verticalAnchor:"middle"},j):s==="insideRight"?Ta({x:i+c-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"},j):s==="insideTop"?Ta({x:i+c/2,y:o+f,textAnchor:"middle",verticalAnchor:g},j):s==="insideBottom"?Ta({x:i+c/2,y:o+u-f,textAnchor:"middle",verticalAnchor:h},j):s==="insideTopLeft"?Ta({x:i+y,y:o+f,textAnchor:T,verticalAnchor:g},j):s==="insideTopRight"?Ta({x:i+c-y,y:o+f,textAnchor:v,verticalAnchor:g},j):s==="insideBottomLeft"?Ta({x:i+y,y:o+u-f,textAnchor:T,verticalAnchor:h},j):s==="insideBottomRight"?Ta({x:i+c-y,y:o+u-f,textAnchor:v,verticalAnchor:h},j):s&&typeof s=="object"&&(ln(s.x)||nm(s.x))&&(ln(s.y)||nm(s.y))?Ta({x:i+Yf(s.x,c),y:o+Yf(s.y,u),textAnchor:"end",verticalAnchor:"end"},j):Ta({x:i+c/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},j)},gNe={offset:5};function _f(e){var t=Pc(e,gNe),{viewBox:r,position:n,value:s,children:a,content:i,className:o="",textBreakAll:c,labelRef:u}=t,d=cNe(),f=vX(),h=n==="center"?f:d??f,g=r||h;if(!g||ki(s)&&ki(a)&&!_.isValidElement(i)&&typeof i!="function")return null;var x=Ta(Ta({},t),{},{viewBox:g});if(_.isValidElement(i)){var{labelRef:y}=x,v=rNe(x,tNe);return _.cloneElement(i,v)}var T;if(typeof i=="function"){if(T=_.createElement(i,x),_.isValidElement(T))return T}else T=uNe(t);var k=wX(g),b=Ji(t,!0);if(k&&(n==="insideStart"||n==="insideEnd"||n==="end"))return fNe(t,n,T,b,g);var C=k?hNe(g,t.offset,t.position):mNe(t,g);return _.createElement(QE,Vd({ref:u,className:Ds("recharts-label",o)},b,C,{breakAll:c}),T)}_f.displayName="Label";var pNe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?_.createElement(_f,Vd({key:"label-implicit"},n)):Zu(e)?_.createElement(_f,Vd({key:"label-implicit",value:e},n)):_.isValidElement(e)?e.type===_f?_.cloneElement(e,Ta({key:"label-implicit"},n)):_.createElement(_f,Vd({key:"label-implicit",content:e},n)):ZE(e)?_.createElement(_f,Vd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?_.createElement(_f,Vd({},e,{key:"label-implicit"},n)):null};function xNe(e){var{label:t}=e,r=vX();return pNe(t,r)||null}var xk={},yk={},AL;function yNe(){return AL||(AL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(yk)),yk}var vk={},jL;function vNe(){return jL||(jL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(vk)),vk}var PL;function wNe(){return PL||(PL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yNe(),r=vNe(),n=VN();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(xk)),xk}var wk,ML;function bNe(){return ML||(ML=1,wk=wNe().last),wk}var _Ne=bNe();const SNe=Ec(_Ne);var kNe=["valueAccessor"],TNe=["dataKey","clockWise","id","textBreakAll"];function S_(){return S_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S_.apply(null,arguments)}function FL(e,t){if(e==null)return{};var r,n,s=CNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function CNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var NNe=e=>Array.isArray(e.value)?SNe(e.value):e.value,bX=_.createContext(void 0),ENe=bX.Provider,_X=_.createContext(void 0);_X.Provider;function ANe(){return _.useContext(bX)}function jNe(){return _.useContext(_X)}function Zb(e){var{valueAccessor:t=NNe}=e,r=FL(e,kNe),{dataKey:n,clockWise:s,id:a,textBreakAll:i}=r,o=FL(r,TNe),c=ANe(),u=jNe(),d=c||u;return!d||!d.length?null:_.createElement(E1,{className:"recharts-label-list"},d.map((f,h)=>{var g,x=ki(n)?t(f,h):Uo(f&&f.payload,n),y=ki(a)?{}:{id:"".concat(a,"-").concat(h)};return _.createElement(_f,S_({},Ji(f,!0),o,y,{fill:(g=r.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:x,textBreakAll:i,viewBox:f.viewBox,key:"label-".concat(h),index:h}))}))}Zb.displayName="LabelList";function PNe(e){var{label:t}=e;return t?t===!0?_.createElement(Zb,{key:"labelList-implicit"}):_.isValidElement(t)||ZE(t)?_.createElement(Zb,{key:"labelList-implicit",content:t}):typeof t=="object"?_.createElement(Zb,S_({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function IT(){return IT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IT.apply(null,arguments)}var SX=e=>{var{cx:t,cy:r,r:n,className:s}=e,a=Ds("recharts-dot",s);return t===+t&&r===+r&&n===+n?_.createElement("circle",IT({},ng(e),HN(e),{className:a,cx:t,cy:r,r:n})):null},MNe={radiusAxis:{},angleAxis:{}},kX=Wl({name:"polarAxis",initialState:MNe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Lje,removeRadiusAxis:Bje,addAngleAxis:$je,removeAngleAxis:zje}=kX.actions,FNe=kX.reducer;function DNe(e){var{fn:t,args:r}=e,n=Vo(),s=jc();return _.useEffect(()=>{if(!s){var a=t(r);return n(BTe(a)),()=>{n($Te(a))}}},[t,r,n,s]),null}var ONe=()=>{};function RNe(e){var{legendPayload:t}=e,r=Vo(),n=jc();return _.useEffect(()=>n?ONe:(r(ESe(t)),()=>{r(ASe(t))}),[r,n,t]),null}var bk,INe=()=>{var[e]=_.useState(()=>Wv("uid-"));return e},LNe=(bk=ZL.useId)!==null&&bk!==void 0?bk:INe;function BNe(e,t){var r=LNe();return t||(e?"".concat(e,"-").concat(r):r)}var $Ne=_.createContext(void 0),zNe=e=>{var{id:t,type:r,children:n}=e,s=BNe("recharts-".concat(r),t);return _.createElement($Ne.Provider,{value:s},n(s))},UNe={cartesianItems:[],polarItems:[]},TX=Wl({name:"graphicalItems",initialState:UNe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=n0(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=n0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=n0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:WNe,replaceCartesianGraphicalItem:HNe,removeCartesianGraphicalItem:GNe,addPolarGraphicalItem:Uje,removePolarGraphicalItem:Wje}=TX.actions,VNe=TX.reducer;function qNe(e){var t=Vo(),r=_.useRef(null);return _.useEffect(()=>{r.current===null?t(WNe(e)):r.current!==e&&t(HNe({prev:r.current,next:e})),r.current=e},[t,e]),_.useEffect(()=>()=>{r.current&&(t(GNe(r.current)),r.current=null)},[t]),null}function DL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(r),!0).forEach(function(n){KNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KNe(e,t,r){return(t=YNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YNe(e){var t=XNe(e,"string");return typeof t=="symbol"?t:t+""}function XNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JNe={xAxis:{},yAxis:{},zAxis:{}},CX=Wl({name:"cartesianAxis",initialState:JNe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=OL(OL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:QNe,removeXAxis:ZNe,addYAxis:eEe,removeYAxis:tEe,addZAxis:Hje,removeZAxis:Gje,updateYAxisWidth:rEe}=CX.actions,nEe=CX.reducer,sEe=It([Qi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),aEe=It([sEe,T0,C0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),e9=()=>Xr(aEe),iEe=()=>Xr(ACe);function RL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function IL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RL(Object(r),!0).forEach(function(n){oEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oEe(e,t,r){return(t=lEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lEe(e){var t=cEe(e,"string");return typeof t=="symbol"?t:t+""}function cEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uEe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:a}=e;if(s===!1||t.x==null||t.y==null)return null;var i=IL(IL({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ji(s,!1)),HN(s)),o;return _.isValidElement(s)?o=_.cloneElement(s,i):typeof s=="function"?o=s(i):o=_.createElement(SX,i),_.createElement(E1,{className:"recharts-active-dot"},o)};function dEe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,a=Xr(Qv),i=iEe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return ki(o)?null:uEe({point:o,childIndex:Number(a),mainColor:r,dataKey:s,activeDot:n})}var fEe={},NX=Wl({name:"errorBars",initialState:fEe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Vje,replaceErrorBar:qje,removeErrorBar:Kje}=NX.actions,hEe=NX.reducer,mEe=["children"];function gEe(e,t){if(e==null)return{};var r,n,s=pEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xEe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},yEe=_.createContext(xEe);function vEe(e){var{children:t}=e,r=gEe(e,mEe);return _.createElement(yEe.Provider,{value:r},t)}function EX(e,t){var r,n,s=Xr(u=>E0(u,e)),a=Xr(u=>A0(u,t)),i=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:kl.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Tl.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function wEe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=e9(),{needClipX:a,needClipY:i,needClip:o}=EX(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=s;return _.createElement("clipPath",{id:"clipPath-".concat(n)},_.createElement("rect",{x:a?c:c-d/2,y:i?u:u-f/2,width:a?d:d*2,height:i?f:f*2}))}var bEe=e=>{var{chartData:t}=e,r=Vo(),n=jc();return _.useEffect(()=>n?()=>{}:(r(lL(t)),()=>{r(lL(void 0))}),[t,r,n]),null},LL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},AX=Wl({name:"brush",initialState:LL,reducers:{setBrushSettings(e,t){return t.payload==null?LL:t.payload}}}),{setBrushSettings:Yje}=AX.actions,_Ee=AX.reducer;function SEe(e,t,r){return(t=kEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kEe(e){var t=TEe(e,"string");return typeof t=="symbol"?t:t+""}function TEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class t9{static create(t){return new t9(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}SEe(t9,"EPS",1e-4);function CEe(e){return(e%180+180)%180}var NEe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=CEe(s),i=a*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},EEe={dots:[],areas:[],lines:[]},jX=Wl({name:"referenceElements",initialState:EEe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=n0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=n0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=n0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Xje,removeDot:Jje,addArea:Qje,removeArea:Zje,addLine:ePe,removeLine:tPe}=jX.actions,AEe=jX.reducer,jEe=_.createContext(void 0),PEe=e=>{var{children:t}=e,[r]=_.useState("".concat(Wv("recharts"),"-clip")),n=e9();if(n==null)return null;var{x:s,y:a,width:i,height:o}=n;return _.createElement(jEe.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:s,y:a,height:o,width:i}))),t)};function n1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function PX(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function MEe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return NEe(n,r)}function FEe(e,t,r){var n=r==="width",{x:s,y:a,width:i,height:o}=e;return t===1?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}function k_(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function DEe(e,t){return PX(e,t+1)}function OEe(e,t,r,n,s){for(var a=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var x=n?.[c];if(x===void 0)return{v:PX(n,u)};var y=c,v,T=()=>(v===void 0&&(v=r(x,y)),v),k=x.coordinate,b=c===0||k_(e,k,T,d,o);b||(c=0,d=i,u+=1),b&&(d=k+e*(T()/2+s),c+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function BL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BL(Object(r),!0).forEach(function(n){REe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function REe(e,t,r){return(t=IEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IEe(e){var t=LEe(e,"string");return typeof t=="symbol"?t:t+""}function LEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BEe(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,{start:o}=t,{end:c}=t,u=function(h){var g=a[h],x,y=()=>(x===void 0&&(x=r(g,h)),x);if(h===i-1){var v=e*(g.coordinate+e*y()/2-c);a[h]=g=oo(oo({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else a[h]=g=oo(oo({},g),{},{tickCoord:g.coordinate});var T=k_(e,g.tickCoord,y,o,c);T&&(c=g.tickCoord-e*(y()/2+s),a[h]=oo(oo({},g),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return a}function $Ee(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(a){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=oo(oo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var g=k_(e,d.tickCoord,()=>f,c,u);g&&(u=d.tickCoord-e*(f/2+s),i[o-1]=oo(oo({},d),{},{isShow:!0}))}for(var x=a?o-1:o,y=function(k){var b=i[k],C,E=()=>(C===void 0&&(C=r(b,k)),C);if(k===0){var j=e*(b.coordinate-e*E()/2-c);i[k]=b=oo(oo({},b),{},{tickCoord:j<0?b.coordinate-j*e:b.coordinate})}else i[k]=b=oo(oo({},b),{},{tickCoord:b.coordinate});var P=k_(e,b.tickCoord,E,c,u);P&&(c=b.tickCoord+e*(E()/2+s),i[k]=oo(oo({},b),{},{isShow:!0}))},v=0;v<x;v++)y(v);return i}function r9(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(ln(c)||A1.isSsr){var h;return(h=DEe(s,ln(c)?c:0))!==null&&h!==void 0?h:[]}var g=[],x=o==="top"||o==="bottom"?"width":"height",y=d&&x==="width"?ov(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,C)=>{var E=typeof u=="function"?u(b.value,C):b.value;return x==="width"?MEe(ov(E,{fontSize:t,letterSpacing:r}),y,f):ov(E,{fontSize:t,letterSpacing:r})[x]},T=s.length>=2?pc(s[1].coordinate-s[0].coordinate):1,k=FEe(a,T,x);return c==="equidistantPreserveStart"?OEe(T,k,v,s,i):(c==="preserveStart"||c==="preserveStartEnd"?g=$Ee(T,k,v,s,i,c==="preserveStartEnd"):g=BEe(T,k,v,s,i),g.filter(b=>b.isShow))}var zEe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=s+a,u=i+c+o+(r?n:0);return Math.round(u)}return 0},UEe=["axisLine","width","height","className","hide","ticks"],WEe=["viewBox"],HEe=["viewBox"];function LT(e,t){if(e==null)return{};var r,n,s=GEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wm(){return Wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wm.apply(null,arguments)}function $L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ja(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$L(Object(r),!0).forEach(function(n){VEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$L(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VEe(e,t,r){return(t=qEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qEe(e){var t=KEe(e,"string");return typeof t=="symbol"?t:t+""}function KEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n9={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function YEe(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:i,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=Ja(Ja(Ja({},c),Ji(o,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!i||a==="bottom"&&i);u=Ja(Ja({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var f=+(a==="left"&&!i||a==="right"&&i);u=Ja(Ja({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+s})}return _.createElement("line",Wm({},u,{className:Ds("recharts-cartesian-axis-line",y3(o,"className"))}))}function XEe(e,t,r,n,s,a,i,o,c){var u,d,f,h,g,x,y=o?-1:1,v=e.tickSize||i,T=ln(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,h=r+ +!o*s,f=h-y*v,x=f-y*c,g=T;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,g=u-y*c,x=T;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,g=u+y*c,x=T;break;default:u=d=e.coordinate,h=r+ +o*s,f=h+y*v,x=f+y*c,g=T;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:g,y:x}}}function JEe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function QEe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function ZEe(e){var{option:t,tickProps:r,value:n}=e,s,a=Ds(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))s=_.cloneElement(t,Ja(Ja({},r),{},{className:a}));else if(typeof t=="function")s=t(Ja(Ja({},r),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=Ds(i,t?.className)),s=_.createElement(QE,Wm({},r,{className:i}),n)}return s}function e9e(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:a,unit:i,padding:o,tickTextProps:c,orientation:u,mirror:d,x:f,y:h,width:g,height:x,tickSize:y,tickMargin:v,fontSize:T,letterSpacing:k,getTicksConfig:b,events:C}=e,E=r9(Ja(Ja({},b),{},{ticks:t}),T,k),j=JEe(u,d),P=QEe(u,d),A=ng(b),M=Ji(r,!1),F=Ja(Ja({},A),{},{fill:"none"},Ji(n,!1)),B=E.map((V,ee)=>{var{line:ae,tick:Z}=XEe(V,f,h,g,x,u,y,d,v),te=Ja(Ja(Ja(Ja({textAnchor:j,verticalAnchor:P},A),{},{stroke:"none",fill:s},M),Z),{},{index:ee,payload:V,visibleTicksCount:E.length,tickFormatter:a,padding:o},c);return _.createElement(E1,Wm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},v4e(C,V,ee)),n&&_.createElement("line",Wm({},F,ae,{className:Ds("recharts-cartesian-axis-tick-line",y3(n,"className"))})),r&&_.createElement(ZEe,{option:r,tickProps:te,value:"".concat(typeof a=="function"?a(V.value,ee):V.value).concat(i||"")}))});return B.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},B):null}var t9e=_.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:i,ticks:o}=e,c=LT(e,UEe),[u,d]=_.useState(""),[f,h]=_.useState(""),g=_.useRef([]);_.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return zEe({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=_.useCallback(y=>{if(y){var v=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=Array.from(v);var T=v[0];if(T){var k=window.getComputedStyle(T),b=k.fontSize,C=k.letterSpacing;(b!==u||C!==f)&&(d(b),h(C))}}},[u,f]);return i||n!=null&&n<=0||s!=null&&s<=0?null:_.createElement(E1,{className:Ds("recharts-cartesian-axis",a),ref:x},_.createElement(YEe,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:ng(e)}),_.createElement(e9e,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:f,getTicksConfig:e,events:c}),_.createElement(oNe,{x:e.x,y:e.y,width:e.width,height:e.height},_.createElement(xNe,{label:e.label}),e.children))}),r9e=_.memo(t9e,(e,t)=>{var{viewBox:r}=e,n=LT(e,WEe),{viewBox:s}=t,a=LT(t,HEe);return n1(r,s)&&n1(n,a)}),s9=_.forwardRef((e,t)=>{var r=Pc(e,n9);return _.createElement(r9e,Wm({},r,{ref:t}))});s9.displayName="CartesianAxis";var n9e=["x1","y1","x2","y2","key"],s9e=["offset"],a9e=["xAxisId","yAxisId"],i9e=["xAxisId","yAxisId"];function zL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(r),!0).forEach(function(n){o9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o9e(e,t,r){return(t=l9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l9e(e){var t=c9e(e,"string");return typeof t=="symbol"?t:t+""}function c9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(null,arguments)}function T_(e,t){if(e==null)return{};var r,n,s=u9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function u9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var d9e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:a,height:i,ry:o}=e;return _.createElement("rect",{x:n,y:s,ry:o,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function MX(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:a,y2:i,key:o}=t,c=T_(t,n9e),u=ng(c),{offset:d}=u,f=T_(u,s9e);r=_.createElement("line",im({},f,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function f9e(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=T_(e,a9e),c=s.map((u,d)=>{var f=fo(fo({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return MX(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function h9e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=T_(e,i9e),c=s.map((u,d)=>{var f=fo(fo({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return MX(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function m9e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],x=g?s+i-f:u[h+1]-f;if(x<=0)return null;var y=h%t.length;return _.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:x,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function g9e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],x=g?s+i-f:u[h+1]-f;if(x<=0)return null;var y=h%r.length;return _.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:x,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var p9e=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return Rq(r9(fo(fo(fo({},n9),r),{},{ticks:Iq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},x9e=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return Rq(r9(fo(fo(fo({},n9),r),{},{ticks:Iq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},y9e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function FX(e){var t=Uq(),r=Wq(),n=zq(),s=fo(fo({},Pc(e,y9e)),{},{x:ln(e.x)?e.x:n.left,y:ln(e.y)?e.y:n.top,width:ln(e.width)?e.width:n.width,height:ln(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:g}=s,x=jc(),y=Xr(M=>ZI(M,"xAxis",a,x)),v=Xr(M=>ZI(M,"yAxis",i,x));if(!ln(u)||u<=0||!ln(d)||d<=0||!ln(o)||o!==+o||!ln(c)||c!==+c)return null;var T=s.verticalCoordinatesGenerator||p9e,k=s.horizontalCoordinatesGenerator||x9e,{horizontalPoints:b,verticalPoints:C}=s;if((!b||!b.length)&&typeof k=="function"){var E=h&&h.length,j=k({yAxis:v?fo(fo({},v),{},{ticks:E?h:v.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);iv(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(b=j)}if((!C||!C.length)&&typeof T=="function"){var P=g&&g.length,A=T({xAxis:y?fo(fo({},y),{},{ticks:P?g:y.ticks}):void 0,width:t,height:r,offset:n},P?!0:f);iv(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(C=A)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(d9e,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),_.createElement(m9e,im({},s,{horizontalPoints:b})),_.createElement(g9e,im({},s,{verticalPoints:C})),_.createElement(f9e,im({},s,{offset:n,horizontalPoints:b,xAxis:y,yAxis:v})),_.createElement(h9e,im({},s,{offset:n,verticalPoints:C,xAxis:y,yAxis:v})))}FX.displayName="CartesianGrid";var DX=(e,t,r,n)=>$Y(e,"xAxis",t,n),OX=(e,t,r,n)=>BY(e,"xAxis",t,n),RX=(e,t,r,n)=>$Y(e,"yAxis",r,n),IX=(e,t,r,n)=>BY(e,"yAxis",r,n),v9e=It([Rs,DX,RX,OX,IX],(e,t,r,n,s)=>oh(e,"xAxis")?gT(t,n,!1):gT(r,s,!1)),w9e=(e,t,r,n,s)=>s;function b9e(e){return e.type==="line"}var _9e=It([lY,w9e],(e,t)=>e.filter(b9e).find(r=>r.id===t)),S9e=It([Rs,DX,RX,OX,IX,_9e,v9e,TE],(e,t,r,n,s,a,i,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||i==null)){var{dataKey:f,data:h}=a,g;if(h!=null&&h.length>0?g=h:g=c?.slice(u,d+1),g!=null)return G9e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:i,displayedData:g})}}),k9e=["id"],T9e=["type","layout","connectNulls","needClip"],C9e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function UL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(r),!0).forEach(function(n){N9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N9e(e,t,r){return(t=E9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E9e(e){var t=A9e(e,"string");return typeof t=="symbol"?t:t+""}function A9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a9(e,t){if(e==null)return{};var r,n,s=j9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function j9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hm(){return Hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hm.apply(null,arguments)}var P9e=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:Lq(r,t),payload:e}]};function M9e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:a,name:i,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:Lq(i,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var LX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function F9e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var D9e=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return LX(t,e);for(var s=Math.floor(e/n),a=e%n,i=t-e,o=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>a){o=[...r.slice(0,c),a-u];break}var d=o.length%2===0?[0,i]:[i];return[...F9e(r,s),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function O9e(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Ds("recharts-line-dot",typeof e!="boolean"?e.className:"");r=_.createElement(SX,Hm({},t,{className:n}))}return r}function R9e(e,t){return e==null?!1:t?!0:e.length===1}function I9e(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:a,needClip:i}=n;if(!R9e(r,s))return null;var{id:o}=n,c=a9(n,k9e),u=IV(s),d=ng(c),f=Ji(s,!0),h=r.map((x,y)=>{var v=Pl(Pl(Pl({key:"dot-".concat(y),r:3},d),f),{},{index:y,cx:x.x,cy:x.y,dataKey:a,value:x.value,payload:x.payload,points:r});return O9e(s,v)}),g={clipPath:i?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return _.createElement(E1,Hm({className:"recharts-line-dots",key:"dots"},g),h)}function L9e(e){var{showLabels:t,children:r,points:n}=e,s=_.useMemo(()=>n?.map(a=>{var i={x:a.x,y:a.y,width:0,height:0};return Pl(Pl({},i),{},{value:a.value,payload:a.payload,viewBox:i,parentViewBox:void 0,fill:void 0})}),[n]);return _.createElement(ENe,{value:t?s:null},r)}function WL(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:a}=e,{type:i,layout:o,connectNulls:c,needClip:u}=a,d=a9(a,T9e),f=Pl(Pl({},Ji(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:o,connectNulls:c,strokeDasharray:s??a.strokeDasharray});return _.createElement(_.Fragment,null,n?.length>1&&_.createElement(Vq,Hm({},f,{pathRef:r})),_.createElement(I9e,{points:n,clipPathId:t,props:a}))}function B9e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function $9e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:a}=e,{points:i,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:g,height:x,onAnimationEnd:y,onAnimationStart:v}=r,T=s.current,k=Jq(r,"recharts-line-"),[b,C]=_.useState(!1),E=!b,j=_.useCallback(()=>{typeof y=="function"&&y(),C(!1)},[y]),P=_.useCallback(()=>{typeof v=="function"&&v(),C(!0)},[v]),A=B9e(n.current),M=a.current;return _.createElement(L9e,{points:i,showLabels:E},r.children,_.createElement(Xq,{animationId:k,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:j,onAnimationStart:P,key:k},F=>{var B=Hd(M,A+M,F),V=Math.min(B,A),ee;if(c)if(o){var ae="".concat(o).split(/[,\s]+/gim).map(L=>parseFloat(L));ee=D9e(V,A,ae)}else ee=LX(A,V);else ee=o==null?void 0:String(o);if(T){var Z=T.length/i.length,te=F===1?i:i.map((L,K)=>{var I=Math.floor(K*Z);if(T[I]){var H=T[I];return Pl(Pl({},L),{},{x:Hd(H.x,L.x,F),y:Hd(H.y,L.y,F)})}return h?Pl(Pl({},L),{},{x:Hd(g*2,L.x,F),y:Hd(x/2,L.y,F)}):Pl(Pl({},L),{},{x:L.x,y:L.y})});return s.current=te,_.createElement(WL,{props:r,points:te,clipPathId:t,pathRef:n,strokeDasharray:ee})}return F>0&&A>0&&(s.current=i,a.current=V),_.createElement(WL,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:ee})}),_.createElement(PNe,{label:r.label}))}function z9e(e){var{clipPathId:t,props:r}=e,n=_.useRef(null),s=_.useRef(0),a=_.useRef(null);return _.createElement($9e,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:a})}var U9e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Uo(e.payload,t)});class W9e extends _.Component{render(){var t,{hide:r,dot:n,points:s,className:a,xAxisId:i,yAxisId:o,top:c,left:u,width:d,height:f,id:h,needClip:g}=this.props;if(r)return null;var x=Ds("recharts-line",a),y=h,{r:v=3,strokeWidth:T=2}=(t=Ji(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},k=IV(n),b=v*2+T;return _.createElement(_.Fragment,null,_.createElement(E1,{className:x},g&&_.createElement("defs",null,_.createElement(wEe,{clipPathId:y,xAxisId:i,yAxisId:o}),!k&&_.createElement("clipPath",{id:"clipPath-dots-".concat(y)},_.createElement("rect",{x:u-b/2,y:c-b/2,width:d+b,height:f+b}))),_.createElement(vEe,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:U9e,errorBarOffset:0},_.createElement(z9e,{props:this.props,clipPathId:y}))),_.createElement(dEe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var BX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!A1.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function H9e(e){var t=Pc(e,BX),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:g,yAxisId:x,id:y}=t,v=a9(t,C9e),{needClip:T}=EX(g,x),k=e9(),b=tE(),C=jc(),E=Xr(F=>S9e(F,g,x,C,y));if(b!=="horizontal"&&b!=="vertical"||E==null||k==null)return null;var{height:j,width:P,x:A,y:M}=k;return _.createElement(W9e,Hm({},v,{id:y,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:g,yAxisId:x,points:E,layout:b,height:j,width:P,left:A,top:M,needClip:T}))}function G9e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:i,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=Uo(u,i);if(t==="horizontal"){var h=LR({axis:r,ticks:s,bandSize:o,entry:u,index:d}),g=ki(f)?null:n.scale(f);return{x:h,y:g,value:f,payload:u}}var x=ki(f)?null:r.scale(f),y=LR({axis:n,ticks:a,bandSize:o,entry:u,index:d});return x==null||y==null?null:{x,y,value:f,payload:u}}).filter(Boolean)}function V9e(e){var t=Pc(e,BX),r=jc();return _.createElement(zNe,{id:t.id,type:"line"},n=>_.createElement(_.Fragment,null,_.createElement(RNe,{legendPayload:P9e(t)}),_.createElement(DNe,{fn:M9e,args:t}),_.createElement(qNe,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),_.createElement(H9e,Hm({},t,{id:n}))))}var $X=_.memo(V9e);$X.displayName="Line";var q9e=["dangerouslySetInnerHTML","ticks"],K9e=["id"],Y9e=["domain"],X9e=["domain"];function BT(){return BT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BT.apply(null,arguments)}function C_(e,t){if(e==null)return{};var r,n,s=J9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function J9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Q9e(e){var t=Vo();return _.useEffect(()=>(t(QNe(e)),()=>{t(ZNe(e))}),[e,t]),null}var Z9e=e=>{var{xAxisId:t,className:r}=e,n=Xr($q),s=jc(),a="xAxis",i=Xr(v=>O1(v,a,t,s)),o=Xr(v=>LY(v,a,t,s)),c=Xr(v=>_Te(v,t)),u=Xr(v=>ETe(v,t)),d=Xr(v=>sY(v,t));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,g=C_(e,q9e),{id:x}=d,y=C_(d,K9e);return _.createElement(s9,BT({},g,y,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:Ds("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o}))},eAe={allowDataOverflow:kl.allowDataOverflow,allowDecimals:kl.allowDecimals,allowDuplicatedCategory:kl.allowDuplicatedCategory,height:kl.height,hide:!1,mirror:kl.mirror,orientation:kl.orientation,padding:kl.padding,reversed:kl.reversed,scale:kl.scale,tickCount:kl.tickCount,type:kl.type,xAxisId:0},tAe=e=>{var t,r,n,s,a,i=Pc(e,eAe);return _.createElement(_.Fragment,null,_.createElement(Q9e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),_.createElement(Z9e,i))},rAe=(e,t)=>{var{domain:r}=e,n=C_(e,Y9e),{domain:s}=t,a=C_(t,X9e);return n1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:n1({domain:r},{domain:s}):!1},zX=_.memo(tAe,rAe);zX.displayName="XAxis";var nAe=["dangerouslySetInnerHTML","ticks"],sAe=["id"],aAe=["domain"],iAe=["domain"];function $T(){return $T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$T.apply(null,arguments)}function N_(e,t){if(e==null)return{};var r,n,s=oAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lAe(e){var t=Vo();return _.useEffect(()=>(t(eEe(e)),()=>{t(tEe(e))}),[e,t]),null}var cAe=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=_.useRef(null),i=_.useRef(null),o=Xr($q),c=jc(),u=Vo(),d="yAxis",f=Xr(E=>O1(E,d,t,c)),h=Xr(E=>PTe(E,t)),g=Xr(E=>jTe(E,t)),x=Xr(E=>LY(E,d,t,c)),y=Xr(E=>aY(E,t));if(_.useLayoutEffect(()=>{if(!(n!=="auto"||!h||ZE(s)||_.isValidElement(s)||y==null)){var E=a.current;if(E){var j=E.getCalculatedWidth();Math.round(h.width)!==Math.round(j)&&u(rEe({id:t,width:j}))}}},[x,h,u,s,t,n,y]),h==null||g==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:T}=e,k=N_(e,nAe),{id:b}=y,C=N_(y,sAe);return _.createElement(s9,$T({},k,C,{ref:a,labelRef:i,scale:f,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Ds("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x}))},uAe={allowDataOverflow:Tl.allowDataOverflow,allowDecimals:Tl.allowDecimals,allowDuplicatedCategory:Tl.allowDuplicatedCategory,hide:!1,mirror:Tl.mirror,orientation:Tl.orientation,padding:Tl.padding,reversed:Tl.reversed,scale:Tl.scale,tickCount:Tl.tickCount,type:Tl.type,width:Tl.width,yAxisId:0},dAe=e=>{var t,r,n,s,a,i=Pc(e,uAe);return _.createElement(_.Fragment,null,_.createElement(lAe,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),_.createElement(cAe,i))},fAe=(e,t)=>{var{domain:r}=e,n=N_(e,aAe),{domain:s}=t,a=N_(t,iAe);return n1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:n1({domain:r},{domain:s}):!1},UX=_.memo(dAe,fAe);UX.displayName="YAxis";var _k={exports:{}},Sk={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HL;function hAe(){if(HL)return Sk;HL=1;var e=Gm();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return Sk.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=i(function(){function v(E){if(!T){if(T=!0,k=E,E=f(E),h!==void 0&&x.hasValue){var j=x.value;if(h(j,E))return b=j}return b=E}if(j=b,r(k,E))return j;var P=f(E);return h!==void 0&&h(j,P)?(k=E,j):(k=E,b=P)}var T=!1,k,b,C=d===void 0?null:d;return[function(){return v(u())},C===null?void 0:function(){return v(C())}]},[u,d,f,h]);var y=n(c,g[0],g[1]);return a(function(){x.hasValue=!0,x.value=y},[y]),o(y),y},Sk}var GL;function mAe(){return GL||(GL=1,_k.exports=hAe()),_k.exports}mAe();function gAe(e){e()}function pAe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){gAe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var VL={notify(){},get:()=>[]};function xAe(e,t){let r,n=VL,s=0,a=!1;function i(y){d();const v=n.subscribe(y);let T=!1;return()=>{T||(T=!0,v(),f())}}function o(){n.notify()}function c(){x.onStateChange&&x.onStateChange()}function u(){return a}function d(){s++,r||(r=e.subscribe(c),n=pAe())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=VL)}function h(){a||(a=!0,d())}function g(){a&&(a=!1,f())}const x={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:g,getListeners:()=>n};return x}var yAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vAe=yAe(),wAe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",bAe=wAe(),_Ae=()=>vAe||bAe?_.useLayoutEffect:_.useEffect,SAe=_Ae(),kAe=Symbol.for("react-redux-context"),TAe=typeof globalThis<"u"?globalThis:{};function CAe(){if(!_.createContext)return{};const e=TAe[kAe]??=new Map;let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var NAe=CAe();function EAe(e){const{children:t,context:r,serverState:n,store:s}=e,a=_.useMemo(()=>{const c=xAe(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),i=_.useMemo(()=>s.getState(),[s]);SAe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,i]);const o=r||NAe;return _.createElement(o.Provider,{value:a},t)}var AAe=EAe,jAe=(e,t)=>t,i9=It([jAe,Rs,eY,oi,eX,j0,RCe,Qi],zCe),o9=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},WX=Cc("mouseClick"),HX=M2();HX.startListening({actionCreator:WX,effect:(e,t)=>{var r=e.payload,n=i9(t.getState(),o9(r));n?.activeIndex!=null&&t.dispatch(WTe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var zT=Cc("mouseMove"),GX=M2();GX.startListening({actionCreator:zT,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=WE(n,n.tooltip.settings.shared),a=i9(n,o9(r));s==="axis"&&(a?.activeIndex!=null?t.dispatch(qY({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(VY()))}});var qL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},VX=Wl({name:"rootProps",initialState:qL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:qL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),PAe=VX.reducer,{updateOptions:MAe}=VX.actions,qX=Wl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:rPe}=qX.actions,FAe=qX.reducer,KX=Cc("keyDown"),YX=Cc("focus"),l9=M2();l9.startListening({actionCreator:KX,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var i=Number(HE(s,I1(r))),o=j0(r);if(a==="Enter"){var c=__(r,"axis","hover",String(s.index));t.dispatch(FT({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=OTe(r),d=u==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var g=__(r,"axis","hover",String(h));t.dispatch(FT({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});l9.startListening({actionCreator:YX,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",i=__(r,"axis","hover",String(a));t.dispatch(FT({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:i}))}}}});var lc=Cc("externalEvent"),XX=M2();XX.startListening({actionCreator:lc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:CCe(r),activeDataKey:kCe(r),activeIndex:Qv(r),activeLabel:nX(r),activeTooltipIndex:Qv(r),isTooltipActive:NCe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var DAe=It([R1],e=>e.tooltipItemPayloads),OAe=It([DAe,U2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(o=>o.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var i=t(a,r);return i}}}),JX=Cc("touchMove"),QX=M2();QX.startListening({actionCreator:JX,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=WE(n,n.tooltip.settings.shared);if(s==="axis"){var a=i9(n,o9({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&t.dispatch(qY({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(mSe),d=(i=c.getAttribute(gSe))!==null&&i!==void 0?i:void 0,f=OAe(t.getState(),u,d);t.dispatch(UTe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var RAe=fq({brush:_Ee,cartesianAxis:nEe,chartData:s7e,errorBars:hEe,graphicalItems:VNe,layout:$3e,legend:jSe,options:ZCe,polarAxis:FNe,polarOptions:FAe,referenceElements:AEe,rootProps:PAe,tooltip:HTe}),IAe=function(t){return d3e({reducer:RAe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([HX.middleware,GX.middleware,l9.middleware,XX.middleware,QX.middleware]),devTools:A1.devToolsEnabled})};function LAe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=jc(),a=_.useRef(null);if(s)return r;a.current==null&&(a.current=IAe(t));var i=KN;return _.createElement(AAe,{context:i,store:a.current},r)}function BAe(e){var{layout:t,width:r,height:n,margin:s}=e,a=Vo(),i=jc();return _.useEffect(()=>{i||(a(I3e(t)),a(L3e({width:r,height:n})),a(R3e(s)))},[a,i,t,r,n,s]),null}function $Ae(e){var t=Vo();return _.useEffect(()=>{t(MAe(e))},[t,e]),null}var zAe=["children"];function UAe(e,t){if(e==null)return{};var r,n,s=WAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function E_(){return E_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E_.apply(null,arguments)}var HAe={width:"100%",height:"100%"},GAe=_.forwardRef((e,t)=>{var r=Uq(),n=Wq(),s=Gq();if(!i_(r)||!i_(n))return null;var{children:a,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=s?0:void 0,typeof i.role=="string"?d=i.role:d=s?"application":void 0,_.createElement(LV,E_({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:HAe,ref:t}),a)}),VAe=e=>{var{children:t}=e,r=Xr(j3);if(!r)return null;var{width:n,height:s,y:a,x:i}=r;return _.createElement(LV,{width:n,height:s,x:i,y:a},t)},KL=_.forwardRef((e,t)=>{var{children:r}=e,n=UAe(e,zAe),s=jc();return s?_.createElement(VAe,null,r):_.createElement(GAe,E_({ref:t},n),r)});function qAe(){var e=Vo(),[t,r]=_.useState(null),n=Xr(hSe);return _.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;uu(a)&&a!==n&&e(B3e(a))}},[t,e,n]),r}function YL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KAe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YL(Object(r),!0).forEach(function(n){YAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YAe(e,t,r){return(t=XAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XAe(e){var t=JAe(e,"string");return typeof t=="symbol"?t:t+""}function JAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QAe=_.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:g,onTouchMove:x,onTouchStart:y,style:v,width:T}=e,k=Vo(),[b,C]=_.useState(null),[E,j]=_.useState(null);h7e();var P=qAe(),A=_.useCallback(R=>{P(R),typeof t=="function"&&t(R),C(R),j(R)},[P,t,C,j]),M=_.useCallback(R=>{k(WX(R)),k(lc({handler:a,reactEvent:R}))},[k,a]),F=_.useCallback(R=>{k(zT(R)),k(lc({handler:u,reactEvent:R}))},[k,u]),B=_.useCallback(R=>{k(VY()),k(lc({handler:d,reactEvent:R}))},[k,d]),V=_.useCallback(R=>{k(zT(R)),k(lc({handler:f,reactEvent:R}))},[k,f]),ee=_.useCallback(()=>{k(YX())},[k]),ae=_.useCallback(R=>{k(KX(R.key))},[k]),Z=_.useCallback(R=>{k(lc({handler:i,reactEvent:R}))},[k,i]),te=_.useCallback(R=>{k(lc({handler:o,reactEvent:R}))},[k,o]),L=_.useCallback(R=>{k(lc({handler:c,reactEvent:R}))},[k,c]),K=_.useCallback(R=>{k(lc({handler:h,reactEvent:R}))},[k,h]),I=_.useCallback(R=>{k(lc({handler:y,reactEvent:R}))},[k,y]),H=_.useCallback(R=>{k(JX(R)),k(lc({handler:x,reactEvent:R}))},[k,x]),U=_.useCallback(R=>{k(lc({handler:g,reactEvent:R}))},[k,g]);return _.createElement(cX.Provider,{value:b},_.createElement(E4e.Provider,{value:E},_.createElement("div",{className:Ds("recharts-wrapper",n),style:KAe({position:"relative",cursor:"default",width:T,height:s},v),onClick:M,onContextMenu:Z,onDoubleClick:te,onFocus:ee,onKeyDown:ae,onMouseDown:L,onMouseEnter:F,onMouseLeave:B,onMouseMove:V,onMouseUp:K,onTouchEnd:U,onTouchMove:H,onTouchStart:I,ref:A},r)))}),ZAe=["children","className","width","height","style","compact","title","desc"];function eje(e,t){if(e==null)return{};var r,n,s=tje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rje=_.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:a,style:i,compact:o,title:c,desc:u}=e,d=eje(e,ZAe),f=ng(d);return o?_.createElement(KL,{otherAttributes:f,title:c,desc:u},r):_.createElement(QAe,{className:n,style:i,width:s,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(KL,{otherAttributes:f,title:c,desc:u,ref:t},_.createElement(PEe,null,r)))}),nje=["width","height"];function UT(){return UT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UT.apply(null,arguments)}function sje(e,t){if(e==null)return{};var r,n,s=aje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function aje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ije={top:5,right:5,bottom:5,left:5},oje={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ije,reverseStackOrder:!1,syncMethod:"index"},lje=_.forwardRef(function(t,r){var n,s=Pc(t.categoricalChartProps,oje),{width:a,height:i}=s,o=sje(s,nje);if(!i_(a)||!i_(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,g={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(LAe,{preloadedState:{options:g},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},_.createElement(bEe,{chartData:h.data}),_.createElement(BAe,{width:a,height:i,layout:s.layout,margin:s.margin}),_.createElement($Ae,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(rje,UT({},o,{width:a,height:i,ref:r})))}),cje=["axis"],uje=_.forwardRef((e,t)=>_.createElement(lje,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cje,tooltipPayloadSearcher:JCe,categoricalChartProps:e,ref:t}));const dje=({data:e=[],loading:t=!1,error:r=null})=>{if(t)return l.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:l.jsx("div",{className:"spinner-border text-primary",role:"status",children:l.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r)return l.jsxs("div",{className:"alert alert-danger",role:"alert",children:[l.jsx("h5",{className:"alert-heading",children:"Error Loading Performance Data"}),l.jsx("p",{children:r})]});if(!e||e.length===0)return l.jsx("div",{className:"text-center text-muted",style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{children:[l.jsx("h5",{children:"No Test Data Available"}),l.jsx("p",{children:"No tests have been completed yet for the current term."})]})});const n=e.map(s=>({testName:s.test_name,testDate:s.submitted_at,averageScore:parseFloat(s.average_score),totalStudents:s.total_students,testId:s.test_id}));return l.jsxs("div",{className:"test-performance-graph",children:[l.jsx("div",{style:{width:"100%",height:"400px"},children:l.jsx(P7e,{children:l.jsxs(uje,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[l.jsx(FX,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),l.jsx(zX,{dataKey:"testDate",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"#666",fontSize:12}),l.jsx(UX,{domain:[0,100],tickFormatter:s=>`${s}%`,stroke:"#666",fontSize:12}),l.jsx(b7e,{formatter:(s,a)=>[`${parseFloat(s).toFixed(1)}%`,"Average Score"],labelFormatter:s=>{const a=n.find(i=>i.testDate===s);if(a){const i=new Date(s);return`${a.testName} (${i.toLocaleDateString("en-US",{month:"long",day:"numeric"})})`}return s},contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),l.jsx($X,{type:"monotone",dataKey:"averageScore",stroke:"#007bff",strokeWidth:3,connectNulls:!0,dot:{r:6,fill:"#007bff",stroke:"#fff",strokeWidth:2},activeDot:{r:8,fill:"#ff6b35",stroke:"#fff",strokeWidth:2}})]})})}),l.jsx("div",{className:"mt-3",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Total Tests: "}),l.jsx("strong",{children:n.length})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Average Score: "}),l.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(i=>i.averageScore!==null&&i.averageScore!==void 0&&!isNaN(i.averageScore));return s.length===0?"N/A":`${(s.reduce((i,o)=>i+o.averageScore,0)/s.length).toFixed(1)}%`})():"N/A"})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Best Test: "}),l.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(a=>a.averageScore!==null&&a.averageScore!==void 0&&!isNaN(a.averageScore));return s.length===0?"N/A":s.reduce((a,i)=>i.averageScore>a.averageScore?i:a).testName})():"N/A"})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Latest Test: "}),l.jsx("strong",{children:n.length>0?n[n.length-1].testName:"N/A"})]})})]})})]})},XL=({onBackToLogin:e})=>{const t=Wo(),{user:r,isAuthenticated:n,logout:s,getCurrentTeacherUsername:a}=Os(),{teacherData:i,loadTeacherData:o}=o3(),{activeTests:c,loadActiveTests:u}=b2(),{showNotification:d,notifications:f,removeNotification:h}=ai(),[g,x]=_.useState(!0),[y,v]=_.useState(""),[T,k]=_.useState("main"),[b,C]=_.useState([]),[E,j]=_.useState([]),[P,A]=_.useState(null),[M,F]=_.useState(null),[B,V]=_.useState(null),[ee,ae]=_.useState(!1),[Z,te]=_.useState(!1),[L,K]=_.useState(null),[I,H]=_.useState([]),[U,R]=_.useState(null),[z,G]=_.useState(!1),[X,ne]=_.useState(!1),[q,se]=_.useState(null),[ue,me]=_.useState(!1),[Ne,ce]=_.useState(null),[Ue,pe]=_.useState(null),[je,We]=_.useState([]),[Me,Nt]=_.useState(!1),[$e,St]=_.useState(null),[At,Bt]=_.useState([]),[Gt,or]=_.useState(!1),[yr,it]=_.useState(null),[Ve,at]=_.useState(null),[pt,nt]=_.useState(!1),[kt,Wt]=_.useState(!1),[rr,ur]=_.useState(0),[Nr,wr]=_.useState(!1),[ft,Tt]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Ot,he]=_.useState([]),[Ee,Ae]=_.useState([]),[Fe,xt]=_.useState(!1),[$t,lr]=_.useState(!1),[Ke,ct]=_.useState(null),[yt,Jt]=_.useState([]),[cr,Rr]=_.useState(!1),[Hr,He]=_.useState("subject");_.useEffect(()=>{Ze()},[]),_.useEffect(()=>{const Ie=Pt=>{pt&&!Pt.target.closest(".relative")&&nt(!1),kt&&!Pt.target.closest(".relative")&&Wt(!1)};return document.addEventListener("mousedown",Ie),()=>{document.removeEventListener("mousedown",Ie)}},[pt,kt]);const Ct=_.useCallback(()=>{be.debug(" showChangePasswordTab called"),wr(!0),nt(!1),Wt(!1)},[]),le=_.useCallback(()=>{be.debug(" hideChangePasswordTab called"),wr(!1),Tt({currentPassword:"",newPassword:"",confirmPassword:""})},[]),ve=_.useCallback(async()=>{if(!r)return;const{currentPassword:Ie,newPassword:Pt,confirmPassword:De}=ft;if(!Ie||!Pt||!De){d("Please fill in all fields","error");return}if(Pt!==De){d("New passwords do not match","error");return}if(Pt.length<6){d("New password must be at least 6 characters long","error");return}const qe=/[a-zA-Z]/.test(Pt),Lt=/[0-9]/.test(Pt);if(!qe||!Lt){d("New password must contain both letters and numbers","error");return}try{const gt=await $s.changePassword({username:r.username,currentPassword:Ie,newPassword:Pt});gt.success?(d("Password changed successfully!","success"),le()):d(gt.message||"Failed to change password","error")}catch(gt){be.error("Password change error:",gt),d("Failed to change password. Please try again.","error")}},[r,ft,d]),ge=_.useCallback(Ie=>{const{name:Pt,value:De}=Ie.target;Tt(qe=>({...qe,[Pt]:De}))},[]),we=_.useCallback(async()=>{be.debug(" Loading teacher data...");try{const Ie=await $s.getTeacherData();return be.debug(" Teacher data loaded:",Ie),pe(new Date),Ie}catch(Ie){throw be.error(" Error loading teacher data:",Ie),Ie}},[]),Te=_.useCallback(async(Ie=null)=>{be.debug(" Loading teacher subjects...");try{if(!Ie){const qe=`teacher_subjects_${r?.teacher_id||r?.id||""}`,Lt=Ts(qe);if(Lt)return be.debug(" Using cached teacher subjects"),C(Lt),Lt}let Pt=Ie,De;if(Ie?(be.debug(" Using passed teacher data for subjects"),De=$s.getTeacherSubjects(Ie.subjects)):(be.debug(" No teacher data passed, fetching from API"),Pt=await $s.getTeacherData(),be.debug(" Raw teacher data:",Pt),De=$s.getTeacherSubjects(Pt.subjects)),be.debug(" Teacher subjects loaded:",De),C(De),!Ie){const qe=`teacher_subjects_${r?.teacher_id||r?.id||""}`;hs(qe,De,as.teacher_subjects)}return be.debug(" Available classes for performance chart:",De[0]?.classes||[]),be.debug(" Performance chart will load when user clicks on a class"),De}catch(Pt){throw be.error(" Error loading teacher subjects:",Pt),Pt}},[r?.teacher_id,r?.id]),Se=_.useCallback(async()=>{be.debug(" Loading teacher active tests...");try{const Ie=`teacher_tests_${r?.teacher_id||r?.id||""}`,Pt=Ts(Ie);Pt&&Pt.some(Lt=>Lt.test_type==="drawing")&&(be.debug(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(Ie));const De=Ts(Ie);if(De)return be.debug(" Using cached teacher tests"),j(De),De;const qe=await Sn.getTeacherTests();return be.debug(" Teacher tests loaded:",qe),j(qe),hs(Ie,qe,as.teacher_tests),qe}catch(Ie){throw be.error(" Error loading teacher tests:",Ie),Ie}},[r?.teacher_id,r?.id]),Ze=_.useCallback(async()=>{be.debug(" Initializing Teacher Cabinet...");try{if(x(!0),v(""),!n||!r){be.debug(" User not authenticated"),v("User not authenticated");return}if(r.role!==Ro.TEACHER){be.error(" Invalid user role for teacher cabinet:",r.role),v("Access denied. Teacher role required.");return}be.debug(" Loading teacher data...");const Ie=await we();be.debug(" Loading subjects and tests in parallel...");const[Pt,De]=await Promise.allSettled([Te(Ie),Se()]);let qe=!1;Pt.status==="rejected"&&(be.warn(" Subjects loading failed:",Pt.reason),qe=!0),De.status==="rejected"&&(be.warn(" Tests loading failed:",De.reason),qe=!0),qe&&d("Some data failed to load, but you can continue","warning"),be.debug(" Teacher Cabinet initialization complete!")}catch(Ie){be.error(" Error initializing teacher cabinet:",Ie),v("Failed to initialize teacher cabinet")}finally{x(!1)}},[n,r,we,Te,Se,d]),ut=_.useCallback(()=>{be.debug(" Showing subject selection prompt..."),ae(!0),Je(),He("subject")},[]),Je=_.useCallback(async()=>{be.debug(" Loading available subjects..."),xt(!0);try{const Ie=await $s.getSubjectsForSelection();he(Ie),be.debug(" Available subjects loaded:",Ie)}catch(Ie){be.error(" Error loading available subjects:",Ie),d("Failed to load subjects","error")}finally{xt(!1)}},[]),de=_.useCallback(Ie=>{if(!Ie){ct(null);return}const Pt=Ot.find(De=>De.subject_id==Ie);Pt&&(ct(Pt),Jt([]),He("classes"))},[Ot]),ye=_.useCallback((Ie,Pt)=>{Jt(De=>De.some(qe=>qe.grade===Ie&&qe.class===Pt)?De.filter(qe=>!(qe.grade===Ie&&qe.class===Pt)):[...De,{grade:Ie,class:Pt}])},[]),Pe=_.useCallback(()=>{if(!Ke||yt.length===0){d("Please select at least one class","warning");return}const Ie={subject_id:parseInt(Ke.subject_id),subject_name:Ke.subject,classes:yt};Ae(Pt=>[...Pt,Ie]),ct(null),Jt([]),He("subject"),d(`Added ${Ke.subject} with ${yt.length} classes`,"success")},[Ke,yt]),Be=_.useCallback(Ie=>{Ae(Pt=>Pt.filter((De,qe)=>qe!==Ie))},[]),Ye=_.useCallback(async(Ie,Pt,De)=>{be.debug(" Deleting teacher subject:",{subjectId:Ie,grade:Pt,classNumber:De});try{const qe={subjectId:Ie,grade:Pt,class:De};be.debug(" Sending delete request with data:",qe);const Lt=await $s.deleteTeacherSubject(qe);if(Lt.success)d("Subject assignment deleted successfully!","success"),await Te();else throw new Error(Lt.error||"Failed to delete subject assignment")}catch(qe){be.error(" Error deleting subject assignment:",qe),d("Error deleting subject assignment. Please try again.","error")}},[Te,d]),ot=_.useCallback((Ie,Pt,De,qe)=>{ce({subjectId:Ie,subjectName:Pt,grade:De,classNumber:qe}),me(!0)},[]),wt=_.useCallback(async()=>{Ne&&(await Ye(Ne.subjectId,Ne.grade,Ne.classNumber),me(!1),ce(null))},[Ne,Ye]),er=_.useCallback(()=>{me(!1),ce(null)},[]),Ft=_.useCallback(async()=>{if(Ee.length===0){d("Please select at least one subject","warning");return}lr(!0);try{const Ie=await $s.saveTeacherSubjects(Ee);if(Ie.success)d("Subjects saved successfully!","success"),ae(!1),Ae([]),He("subject"),await Te();else throw new Error(Ie.error||"Failed to save subjects")}catch(Ie){be.error(" Error saving teacher subjects:",Ie),d("Failed to save subjects","error")}finally{lr(!1)}},[Ee,Te]);_.useCallback(async Ie=>{be.debug(" Saving teacher subjects:",Ie);try{const Pt=await $s.saveTeacherSubjects(Ie);if(Pt.success)d("Subjects saved successfully!","success"),await Te(),ae(!1);else throw new Error(Pt.error||"Failed to save subjects")}catch(Pt){be.error(" Error saving teacher subjects:",Pt),d("Failed to save subjects","error")}},[Te]);const Yt=_.useCallback(()=>{be.debug(" Showing active tests..."),k("tests")},[]),_r=_.useCallback(async Ie=>{be.debug(" Showing test details:",Ie);const Pt=E?.find(xr=>xr.test_type===Ie.test_type&&xr.test_id===Ie.test_id)||{},De=Pt.assignments||Ie.assignments||[],qe=De.some(xr=>xr.is_active),Lt=Ie.selectedAssignmentId||Ie.assignment_id||null,gt={...Pt,...Ie,assignments:De,selectedAssignmentId:Lt,hasActiveAssignment:qe};K(gt),te(!0),H([]),R(null),G(!0);try{if(["input","true_false","multiple_choice","word_matching","fill_blanks"].includes(Ie.test_type)){const xr=await Sn.getTestQuestionsWithInfo(Ie.test_type,Ie.test_id);H(xr.questions||[]),R(xr.testInfo||null),be.debug(" Test questions and info loaded:",{questionsCount:xr.questions?.length||0,testInfo:xr.testInfo})}}catch(xr){console.error("Error loading test questions:",xr),d("Error loading test questions. Please try again.","error")}finally{G(!1)}},[E,d]);_.useCallback(async(Ie,Pt,De)=>{be.debug(" Removing class assignment:",Ie,Pt,De);try{const qe=await Sn.removeClassAssignment(Ie,Pt,De);if(qe.success)d("Assignment removed successfully!","success"),await Se();else throw new Error(qe.error||"Failed to remove assignment")}catch(qe){be.error(" Error removing class assignment:",qe),d("Failed to remove assignment","error")}},[Se]);const Ir=_.useCallback(async Ie=>{be.debug(" Marking assignment as completed:",Ie),St(Ie);try{const Pt=await Sn.markAssignmentCompleted(Ie);if(Pt.success){j(qe=>qe.map(Lt=>({...Lt,assignments:Lt.assignments?.map(gt=>gt.assignment_id===Ie?{...gt,is_active:!1}:gt)||[]}))),d("Test assignment marked as completed!","success");const De=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(De),be.debug(" Cleared teacher tests cache"),Se().catch(qe=>{be.error(" Error refreshing tests after completion:",qe)})}else throw new Error(Pt.error||"Failed to mark assignment as completed")}catch(Pt){be.error(" Error marking assignment as completed:",Pt),d("Failed to mark assignment as completed","error")}finally{St(null)}},[Se,d,r?.teacher_id,r?.id]),ar=_.useCallback(async()=>{be.debug(" Refreshing active tests data...");try{const Ie=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Ie),be.debug(" Cache cleared, forcing fresh API call"),be.debug(" Making direct API call to get-teacher-active-tests with noCache");const Pt=await Sn.getTeacherTests(!0);be.debug(" Direct API call returned:",Pt),j(Pt),be.debug(" activeTestsData state updated:",Pt),d(`Tests refreshed successfully! Found ${Pt?.length||0} tests.`,"success")}catch(Ie){be.error(" Error refreshing tests:",Ie),d("Failed to refresh tests","error")}},[d,r?.teacher_id,r?.id]),[Ur,Fr]=_.useState(null),$r=_.useCallback(async Ie=>{be.debug(" Activating assignment:",Ie),Fr(Ie);try{const Pt=await Sn.activateAssignment(Ie);if(!Pt.success)throw new Error(Pt.error||"Failed to activate assignment");let De=null;j(Lt=>{const gt=Lt.map(xr=>({...xr,assignments:xr.assignments?.map(Et=>Et.assignment_id===Ie?{...Et,is_active:!0}:Et)||[]}));return De=gt,gt}),De&&K(Lt=>{if(!Lt)return Lt;const gt=De.find(Gr=>Gr.test_id===Lt.test_id&&Gr.test_type===Lt.test_type);if(!gt)return Lt;const xr=gt.assignments||Lt.assignments||[],Et=xr.some(Gr=>Gr.is_active);return{...Lt,...gt,assignments:xr,hasActiveAssignment:Et}}),d("Test assignment activated! Students can now see this test.","success");const qe=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(qe),be.debug(" Cleared teacher tests cache"),ar().catch(Lt=>{be.error(" Error performing hard refresh after activation:",Lt)})}catch(Pt){be.error(" Error activating assignment:",Pt),d("Failed to activate assignment","error")}finally{Fr(null)}},[ar,d,r?.teacher_id,r?.id]),Tr=_.useMemo(()=>!E||E.length===0?[]:E.flatMap(Ie=>{if(!Ie.assignments||Ie.assignments.length===0)return[];const Pt=Ie.assignments.some(De=>De.is_active);return Ie.assignments.map(De=>({test_id:Ie.test_id,test_type:Ie.test_type,test_name:Ie.test_name,num_questions:Ie.num_questions,created_at:Ie.created_at,subject_id:Ie.subject_id,subject:Ie.subject,teacher_id:Ie.teacher_id,assignments:Ie.assignments,has_active_assignment:Pt,assignment_id:De.assignment_id,grade:De.grade,class:De.class,is_active:De.is_active,assigned_at:De.assigned_at,days_remaining:De.days_remaining}))}),[E]),Is=_.useCallback(async(Ie=null)=>{if(r?.teacher_id){or(!0),it(null);try{be.debug(" Loading test performance data for class:",Ie);const Pt=await c4e.getTestPerformance(r.teacher_id,Ie);Bt(Pt),be.debug(" Test performance data loaded:",Pt.length,"tests")}catch(Pt){be.error(" Error loading test performance data:",Pt),it(Pt.message)}finally{or(!1)}}},[r?.teacher_id]);_.useCallback((Ie,Pt)=>{be.debug(" Showing class results:",Ie,Pt),be.debug(" Class click - grade:",Ie,"className:",Pt),F(Ie),V(Pt),k("results");const De=`${Ie}/${Pt}`;be.debug(" Loading performance data for clicked class:",De),at(De),Is(De)},[Is]);const[sn,Jn]=_.useState([]),[Hn,os]=_.useState([]),hn=_.useCallback(async()=>{try{const Pt=await(await Za(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestAssignments(r.teacher_id);Jn(Pt)}catch(Ie){be.warn("Failed to load retests",Ie)}},[r]);_.useCallback(async Ie=>{try{const De=await(await Za(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestTargets(Ie);os(De)}catch(Pt){be.warn("Failed to load retest targets",Pt)}},[]);const[ke,jt]=_.useState(!1),[Dr,Jr]=_.useState(!1);_.useEffect(()=>{be.debug("[TeacherCabinet] showRetestModal state changed:",ke)},[ke]);const[Gn,En]=_.useState({test_type:"",original_test_id:"",subject_id:"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:[]}),ls=_.useCallback(async Ie=>{be.debug("[TeacherCabinet] openRetestModal called with:",Ie);const{test_type:Pt,original_test_id:De,subject_id:qe,failedStudentIds:Lt=[],grade:gt,class:xr}=Ie||{};En({test_type:Pt||"multiple_choice",original_test_id:De||"",subject_id:qe||"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:Lt}),gt!==void 0&&F(gt),xr!==void 0&&V(xr),be.debug("[TeacherCabinet] Setting showRetestModal to true"),jt(!0)},[]),Vs=_.useCallback(async()=>{Jr(!0);try{const Ie=await Za(()=>import("./retestService-C6b0YDiD.js"),[]),Pt=new Date,De=new Date(Pt.getTime()+Gn.window_days*24*60*60*1e3),qe={...Gn,teacher_id:r.teacher_id,grade:M,class:B,window_start:Pt.toISOString(),window_end:De.toISOString()};be.debug("[Retest][TeacherCabinet] Prepared payload:",JSON.stringify(qe)),be.debug("[Retest][TeacherCabinet] Selected students count:",(qe.student_ids||[]).length,"IDs:",qe.student_ids),await Ie.retestService.createRetestAssignment(qe),d("Retest created","success"),jt(!1),hn(),ur(Lt=>Lt+1)}catch(Ie){be.error("Create retest error",Ie),d(Ie.message||"Failed to create retest","error")}finally{Jr(!1)}},[Gn,M,B,hn]);if(g)return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Cabinet..."})]}),l.jsx("div",{className:"flex flex-wrap gap-2"})]});if(y)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Cabinet Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:y}),l.jsx(rt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return l.jsxs(dt.div,{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(dt.div,{className:"bg-gradient-to-r from-sky-400 to-sky-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-6",children:[l.jsxs(dt.div,{className:"flex-1 text-center",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Teacher Cabinet"}),l.jsxs("p",{className:"text-sky-100 text-sm sm:text-base md:text-lg",children:["Welcome, Teacher ",a()||""]})]}),l.jsxs(dt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsx("div",{className:"hidden md:block",children:l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>nt(!pt),className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border border-white/20 text-white hover:bg-white/20 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:[l.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Menu"}),l.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-200",style:{transform:pt?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),pt&&l.jsxs(dt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[l.jsxs("button",{onClick:()=>{nt(!1),Ct()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),l.jsx("span",{children:"Change Password"})]}),l.jsxs("button",{onClick:()=>{nt(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:"Logout"})]})]})]})}),l.jsxs("div",{className:"md:hidden",children:[l.jsx("button",{onClick:()=>Wt(!kt),className:"flex items-center justify-center w-10 h-10 bg-white/10 border border-white/20 text-white hover:bg-white/20 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),kt&&l.jsxs(dt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[l.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:a()||"Teacher"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Account"})]}),l.jsxs("button",{onClick:()=>{Wt(!1),Ct()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),l.jsx("span",{children:"Change Password"})]}),l.jsxs("button",{onClick:()=>{Wt(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:"Logout"})]})]})]})]})]})})}),l.jsx(dt.div,{className:"bg-white border-b shadow-sm",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:l.jsx("nav",{className:"flex space-x-1 sm:space-x-8 overflow-x-auto",children:[{key:"main",label:"Main Dashboard",shortLabel:"Dashboard"},{key:"tests",label:"Test Management",shortLabel:"Tests"},{key:"results",label:"Class Results",shortLabel:"Results"},{key:"subjects",label:"Subject Management",shortLabel:"Subjects"}].map((Ie,Pt)=>l.jsxs(dt.button,{onClick:()=>Ie.key==="tests"?Yt():k(Ie.key),className:`py-2 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors duration-200 whitespace-nowrap flex-shrink-0 flex-1 sm:flex-none ${T===Ie.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+Pt*.1,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:[l.jsx("span",{className:"sm:hidden",children:Ie.shortLabel}),l.jsx("span",{className:"hidden sm:inline",children:Ie.label})]},Ie.key))})})}),l.jsx(dt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:l.jsxs(il,{mode:"wait",children:[T==="main"&&l.jsx(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:li()},"main"),T==="subjects"&&l.jsx(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:un()},"subjects"),T==="tests"&&l.jsx(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:gl()},"tests"),T==="results"&&l.jsx(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:l.jsx(jV,{selectedGrade:M,selectedClass:B,onBackToCabinet:()=>k("main"),openRetestModal:ls,forceRefreshOnMount:rr>0},rr)},"results")]})}),ee&&l.jsx(Na,{isOpen:ee,onClose:()=>{ae(!1),He("subject"),Ae([]),ct(null),Jt([])},title:"Select Subjects and Classes",size:"large",children:l.jsxs("div",{className:"space-y-6 px-4 max-h-[80vh] overflow-y-auto",children:[Hr==="subject"&&l.jsxs(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Select Subject"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the subject you want to teach:"}),Fe?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading subjects..."})]}):l.jsxs("select",{value:Ke?.subject_id||"",onChange:Ie=>de(Ie.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select a subject"}),Ot.map(Ie=>l.jsx("option",{value:Ie.subject_id,children:Ie.subject},Ie.subject_id))]})]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(rt,{variant:"outline",onClick:()=>ae(!1),children:"Cancel"}),l.jsx(rt,{variant:"primary",onClick:()=>He("classes"),disabled:!Ke,children:"Next: Select Classes"})]})]}),Hr==="classes"&&Ke&&l.jsxs(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Step 2: Select Classes for ",Ke.subject]}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the classes you teach for this subject:"}),l.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg p-4",children:l.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7].map(Ie=>{let Pt;return Ie===1||Ie===2||Ie===3?Pt=[15,16]:Ie===4||Ie===5||Ie===6?Pt=[13,14]:Ie===7?Pt=[69,70]:Pt=[],l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-medium text-gray-700 text-sm",children:["Grade ",Ie]}),l.jsx("div",{className:"space-y-1",children:Pt.map(De=>l.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[l.jsx("input",{type:"checkbox",checked:yt.some(qe=>qe.grade===Ie.toString()&&qe.class===De.toString()),onChange:()=>ye(Ie.toString(),De.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsxs("span",{className:"text-xs text-gray-700",children:["Class ",De]})]},De))})]},Ie)})})})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(rt,{variant:"outline",onClick:()=>He("subject"),children:"Back to Subjects"}),l.jsxs("div",{className:"space-x-3",children:[l.jsx(rt,{variant:"outline",onClick:()=>ae(!1),children:"Cancel"}),l.jsx(rt,{variant:"primary",onClick:Pe,disabled:yt.length===0,children:"Add Subject"})]})]})]}),Ee.length>0&&l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Selected Subjects"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Review your selected subjects and classes:"}),l.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:Ee.map((Ie,Pt)=>l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:Ie.subject_name}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Classes: ",Ie.classes.map(De=>`Grade ${De.grade} Class ${De.class}`).join(", ")]})]}),l.jsx("button",{onClick:()=>Be(Pt),className:"text-red-600 hover:text-red-800 p-1",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Pt))})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(rt,{variant:"outline",onClick:()=>He("subject"),children:"Add More Subjects"}),l.jsxs("div",{className:"space-x-3",children:[l.jsx(rt,{variant:"outline",onClick:()=>ae(!1),children:"Cancel"}),l.jsx(rt,{variant:"primary",onClick:Ft,disabled:$t,className:"relative",children:$t?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save All Subjects"})]})]})]})]})}),ke&&l.jsxs(Na,{isOpen:ke,onClose:()=>jt(!1),title:"Create Retest",size:"medium",children:[l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retest Window"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Gn.window_days,onChange:Ie=>En(Pt=>({...Pt,window_days:Number(Ie.target.value)})),children:[l.jsx("option",{value:1,children:"1 day"}),l.jsx("option",{value:2,children:"2 days"}),l.jsx("option",{value:3,children:"3 days"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attempts"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Gn.max_attempts,onChange:Ie=>En(Pt=>({...Pt,max_attempts:Number(Ie.target.value)})),children:[l.jsx("option",{value:1,children:"1 attempt"}),l.jsx("option",{value:2,children:"2 attempts"}),l.jsx("option",{value:3,children:"3 attempts"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Students can retry immediately if they fail"})]})]})}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:()=>jt(!1),disabled:Dr,className:"px-4 py-2 text-sm rounded border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),l.jsx("button",{onClick:Vs,disabled:Dr,className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Dr?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm"}),"Creating Retest..."]}):"Create Retest"})]})]}),Z&&L&&l.jsx(Q7,{isOpen:Z,onClose:()=>te(!1),testType:L.test_type,testId:L.test_id,testName:L.test_name,questions:I,isLoading:z,canEdit:!L.hasActiveAssignment,canEditSettings:!L.hasActiveAssignment,subject:L.subject,createdAt:L.created_at,assignments:L.assignments||[],testInfo:U,onSave:async(Ie,Pt,De)=>{try{await Sn.updateTestQuestions(Ie,Pt,De),d("Questions updated successfully!","success");const qe=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(qe),await _r(L)}catch(qe){throw console.error("Error saving questions:",qe),d("Failed to update questions","error"),qe}},onSettingsSave:async Ie=>{try{await Sn.updateTestSettings(L.test_type,L.test_id,Ie),d("Settings updated successfully!","success"),await _r(L)}catch(Pt){throw d("Failed to update settings","error"),Pt}}}),ue&&Ne&&l.jsx(Na,{isOpen:ue,onClose:er,title:"Delete Subject Assignment",size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:l.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject Assignment"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the assignment for"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:Ne.subjectName})," ","in Grade ",Ne.grade,", Class ",Ne.classNumber,"?"]}),l.jsx("p",{className:"text-xs text-red-600",children:"This action cannot be undone."})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(rt,{variant:"outline",onClick:er,children:"Cancel"}),l.jsx(rt,{variant:"danger",onClick:wt,children:"Delete Assignment"})]})]})}),l.jsx(dt.div,{className:"fixed top-4 right-4 space-y-2 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8,duration:.5},children:f.map(Ie=>l.jsx(dt.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:l.jsx("div",{className:`p-4 rounded-lg shadow-lg ${Ie.type==="success"?"bg-green-600 text-white":Ie.type==="error"?"bg-red-600 text-white":Ie.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:Ie.message}),l.jsx("button",{onClick:()=>h(Ie.id),className:"ml-4 text-white hover:text-gray-200",children:""})]})})},Ie.id))}),Nr&&l.jsx(Na,{isOpen:Nr,onClose:le,title:"Change Password",size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),l.jsx("input",{type:"password",name:"currentPassword",value:ft.currentPassword,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter current password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),l.jsx("input",{type:"password",name:"newPassword",value:ft.newPassword,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter new password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",name:"confirmPassword",value:ft.confirmPassword,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Confirm new password"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx(rt,{type:"button",variant:"secondary",onClick:le,className:"flex-1",children:"Cancel"}),l.jsx(rt,{type:"button",onClick:ve,className:"flex-1",children:"Change Password"})]})]})})]});function li(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsxs(zt,{children:[l.jsx(zt.Header,{children:l.jsx(zt.Title,{children:"My Subjects & Classes"})}),l.jsx(zt.Body,{children:b.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any subjects assigned yet."}),l.jsx(rt,{variant:"outline",onClick:()=>k("subjects"),children:"Manage Subjects"})]}):l.jsx("div",{className:"space-y-6",children:b.map((Ie,Pt)=>l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+Pt*.1,duration:.3},className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Ie.name}),l.jsxs("span",{className:"text-sm text-gray-500",children:[Ie.classes?.length||0," classes"]})]}),Ie.classes&&Ie.classes.length>0?l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Ie.classes.map((De,qe)=>l.jsx(dt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+Pt*.1+qe*.05,duration:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:l.jsxs(rt,{variant:"outline",size:"sm",onClick:()=>{F(De.grade),V(De.class),k("results")},className:"font-medium",children:[De.grade,"/",De.class]})},qe))}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("span",{className:"text-sm",children:"No classes assigned to this subject"})})]},Ie.id))})})]})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:l.jsxs(zt,{children:[l.jsxs(zt.Header,{children:[l.jsx(zt.Title,{children:"Test Performance Overview"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Test performance over time with average scores"})]}),l.jsx(zt.Body,{children:b.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"mb-2",children:l.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),l.jsx("p",{className:"text-gray-500",children:"No subjects assigned - no performance data available"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:(()=>{const Ie=[];return b.forEach(Pt=>{Pt.classes&&Pt.classes.forEach(De=>{const qe=`${De.grade}/${De.class}`;Ie.find(Lt=>Lt.key===qe)||Ie.push({key:qe,grade:De.grade,class:De.class,subject:Pt.name})})}),Ie})().map((Ie,Pt)=>l.jsxs("button",{onClick:()=>{be.debug(" Class button clicked:",Ie.key),at(Ie.key),Is(Ie.key)},className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${Ve===Ie.key?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[Ie.grade,"/",Ie.class]},Ie.key))}),Ve?l.jsx("div",{className:"mt-4",children:l.jsx(dje,{data:At,loading:Gt,error:yr})}):l.jsxs("div",{className:"mt-4 text-center text-muted py-4",children:[l.jsx("div",{className:"mb-2",children:l.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),l.jsx("p",{className:"text-gray-500",children:"Select a class above to view test performance data"})]})]})})]})})]})}function un(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsx(zt,{children:l.jsx(zt.Header,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(zt.Title,{children:"Subject Management"}),l.jsx(rt,{variant:"primary",onClick:ut,children:"Add Subject"})]})})})}),b.length===0?l.jsx(dt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:l.jsx(zt,{children:l.jsx(zt.Body,{children:l.jsxs("div",{className:"text-center p-12",children:[l.jsx(dt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No subjects assigned yet"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first subject to get started with creating tests and managing classes."}),l.jsx(rt,{variant:"primary",onClick:ut,size:"lg",children:"Add Your First Subject"})]})})})}):l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:l.jsxs(zt,{children:[l.jsx(zt.Header,{children:l.jsx(zt.Title,{children:"Your Subjects"})}),l.jsx(zt.Body,{children:l.jsx("div",{className:"space-y-4",children:b.map((Ie,Pt)=>l.jsx(dt.div,{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-green-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+Pt*.1,duration:.3},whileHover:{scale:1.02,backgroundColor:"#f9fafb"},children:l.jsx("div",{className:"flex justify-between items-start",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:Ie.name}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Ie.classes?.map((De,qe)=>l.jsxs(dt.div,{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 text-xs rounded-full px-3 py-1",initial:{scale:0},animate:{scale:1},transition:{delay:.4+Pt*.1+qe*.05,duration:.2},whileHover:{scale:1.1},children:[l.jsxs("span",{children:[De.grade," - ",De.className]}),l.jsx("button",{onClick:()=>ot(Ie.id,Ie.name,De.grade,De.class),className:"ml-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete this subject assignment",children:l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},qe))||l.jsx("span",{className:"text-gray-500 text-sm",children:"No classes assigned"})})]})})},Pt))})})]})})]})}function gl(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsx(zt,{children:l.jsx(zt.Header,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(zt.Title,{children:"Active Tests"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(rt,{variant:"outline",onClick:ar,children:"Refresh"}),l.jsx(rt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),children:"Create New Test"})]})]})})})}),Tr.length===0?l.jsx(dt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:l.jsx(zt,{children:l.jsx(zt.Body,{children:l.jsxs("div",{className:"text-center p-12",children:[l.jsx(dt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No active tests found"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first test to get started with assessments."}),l.jsx(rt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),size:"lg",children:"Create Your First Test"})]})})})}):l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"space-y-4",children:Tr.map((Ie,Pt)=>l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+Pt*.1,duration:.3},whileHover:{scale:1.01},children:l.jsx(zt,{children:l.jsxs(zt.Body,{children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row sm:items-center sm:space-x-4 gap-2",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 min-w-0 flex-shrink-0 max-w-xs truncate",title:Ie.test_name,children:Ie.test_name}),l.jsx("span",{className:"hidden sm:inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex-shrink-0",children:Ie.test_type}),l.jsxs("span",{className:"hidden sm:inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold flex-shrink-0",children:[Ie.grade,"/",Ie.class]})]}),l.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ie.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:Ie.is_active?"Active":"Inactive"}),l.jsx("div",{className:"text-sm text-gray-500 flex-shrink-0",children:new Date(Ie.created_at).toLocaleDateString()})]})]}),l.jsxs("div",{className:"hidden sm:flex gap-2 ml-4 flex-shrink-0",children:[l.jsx(rt,{variant:"outline",onClick:()=>_r({...Ie,selectedAssignmentId:Ie.assignment_id,assignments:Ie.assignments}),size:"sm",children:"Details"}),!Ie.is_active&&l.jsx(rt,{variant:"primary",onClick:()=>$r(Ie.assignment_id),size:"sm",disabled:Ur===Ie.assignment_id,children:Ur===Ie.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),l.jsx(rt,{variant:"success",onClick:()=>Ir(Ie.assignment_id),size:"sm",disabled:$e===Ie.assignment_id,children:$e===Ie.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 sm:hidden",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold",children:[Ie.grade,"/",Ie.class]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ie.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:Ie.is_active?"Active":"Inactive"}),l.jsx("span",{className:"text-xs text-gray-500",children:new Date(Ie.created_at).toLocaleDateString()})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(rt,{variant:"outline",onClick:()=>_r({...Ie,assignments:[{assignment_id:Ie.assignment_id,grade:Ie.grade,class:Ie.class,is_active:Ie.is_active}]}),size:"sm",className:"text-xs",children:"Details"}),!Ie.is_active&&l.jsx(rt,{variant:"primary",onClick:()=>$r(Ie.assignment_id),size:"sm",disabled:Ur===Ie.assignment_id,children:Ur===Ie.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),l.jsx(rt,{variant:"success",onClick:()=>Ir(Ie.assignment_id),size:"sm",disabled:$e===Ie.assignment_id,children:$e===Ie.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]})]})})},`${Ie.test_id}-${Ie.assignment_id}-${Pt}`))})]})}},fje={multipleChoice:"multiple_choice",trueFalse:"true_false",input:"input",matching:"matching_type",wordMatching:"word_matching",drawing:"drawing",fillBlanks:"fill_blanks",speaking:"speaking"},JL=()=>{const{user:e}=Os();Wde();const{notifications:t,showNotification:r,removeNotification:n}=ai(),[s,a]=_.useState(!1),[i,o]=_.useState(!1),[c,u]=_.useState("typeSelection"),[d,f]=_.useState(!1),[h,g]=_.useState(null),[x,y]=_.useState([]),[v,T]=_.useState(!1),[k,b]=_.useState(!1),[C,E]=_.useState(!1),[j,P]=_.useState(!1),[A,M]=_.useState({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:"",isShuffled:!1}),[F,B]=_.useState([]),[V,ee]=_.useState(null);_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null);const ae=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in initializeTestCreation, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" Setting up test creation event listeners..."),U(),console.log(" Test creation initialization complete")},[e,r]),Z=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestTypeSelection, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" showTestTypeSelection called - starting new test creation"),o(!1),console.log(" Reset testAssignmentCompleted flag to false"),a(!0),console.log(" Set isInTestCreation flag to true"),te(),u("typeSelection"),K("testTypeSelection")},[e,r]),te=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in disableNavigationButtons, redirecting to login");return}console.log(" Disabling navigation buttons..."),f(!0)},[e]),L=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in enableNavigationButtons, redirecting to login");return}console.log(" Enabling navigation buttons..."),f(!1)},[e]),K=_.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveTestCreationState, redirecting to login");return}console.log("  saveTestCreationState called with step:",de),console.log("  Call stack:",new Error().stack);const ye={multipleChoice:{buttonVisible:!0,hintVisible:!1},trueFalse:{buttonVisible:!0,hintVisible:!1},input:{buttonVisible:!0,hintVisible:!1}},Pe={isInTestCreation:!0,currentStep:de,timestamp:Date.now(),excelState:ye};localStorage.setItem("test_creation_state",JSON.stringify(Pe)),console.log(" Saved test creation state:",Pe);const Be={};switch(de){case"testTypeSelection":break;case"multipleChoiceForm":Be.testName=A.testName||"",Be.numQuestions=A.numQuestions||"",Be.numOptions=A.numOptions||"",Be.questions=A.questions||{};break;case"trueFalseForm":Be.testName=A.testName||"",Be.numQuestions=A.numQuestions||"",Be.questions=A.questions||{};break;case"inputForm":Be.testName=A.testName||"",Be.numQuestions=A.numQuestions||"",Be.questions=A.questions||{};break;case"formCreation":Be.testName=A.testName||"",Be.numQuestions=A.numQuestions||"",Be.numOptions=A.numOptions||"",Be.questions=A.questions||{},Be.enableTimer=!!A.enableTimer,Be.timerMinutes=A.timerMinutes||"",Be.isShuffled=!!A.isShuffled;break;case"assignment":case"testAssignment":Be.testName=A.testName||"",Be.numQuestions=A.numQuestions||"",Be.numOptions=A.numOptions||"",Be.questions=A.questions||{};break;default:console.log(" Unknown step in saveTestCreationState:",de);break}Object.keys(Be).length>0&&(localStorage.setItem(`form_data_${de}`,JSON.stringify(Be)),console.log(" Saved form data for step:",de,Be))},[e,A]),I=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearTestCreationState, redirecting to login");return}localStorage.removeItem("test_creation_state"),localStorage.removeItem("test_creation_form_data");const de=[];for(let ye=0;ye<localStorage.length;ye++){const Pe=localStorage.key(ye);Pe&&(Pe.includes("test")||Pe.includes("form")||Pe.includes("question"))&&de.push(Pe)}de.forEach(ye=>{localStorage.removeItem(ye),console.log(" Removed localStorage key:",ye)}),console.log(" Cleared test creation state from localStorage")},[e]);_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearAllTestFields, redirecting to login");return}console.log(" Clearing all test form fields..."),M({testName:"",numQuestions:0,numOptions:0,questions:{}}),g(null),B([]),ee(null),console.log(" Cleared all test form fields")},[e]);const H=_.useCallback(()=>{console.log(" Resetting Excel upload state..."),kt({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),["multiple-choice","true-false","input","word-matching"].forEach(ye=>{const Pe=document.querySelector(`.excel-upload-btn[data-test-type="${ye}"]`);Pe&&(Pe.style.display="none",console.log(" Excel button hidden for:",ye));const Be=document.querySelector(`.excel-hint[data-test-type="${ye}"]`);Be&&(Be.style.display="none",console.log(" Excel hint hidden for:",ye));const Ye=document.querySelector(`.excel-file-input[data-test-type="${ye}"]`);Ye&&(Ye.value="",console.log(" File input cleared for:",ye))}),console.log(" Excel upload state reset complete")},[]),U=_.useCallback(()=>{console.log(" Setting up auto-save listeners for initial form fields..."),["testName","numQuestions","numOptions","enableTimer","timerMinutes","isShuffled"].forEach(ye=>{const Pe=document.getElementById(ye);Pe&&Pe.addEventListener("input",()=>{console.log(` Auto-save triggered for field: ${ye}`)})}),console.log(" Form auto-save setup complete")},[]);_.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveFormDataForStep, redirecting to login");return}console.log("  saveFormDataForStep called with step:",de),console.log("  Call stack:",new Error().stack);const ye={};switch(de){case"testTypeSelection":break;case"multipleChoiceForm":ye.testName=A.testName||"",ye.numQuestions=A.numQuestions||"",ye.numOptions=A.numOptions||"",ye.questions=A.questions||{};break;case"trueFalseForm":ye.testName=A.testName||"",ye.numQuestions=A.numQuestions||"",ye.questions=A.questions||{};break;case"inputForm":ye.testName=A.testName||"",ye.numQuestions=A.numQuestions||"",ye.questions=A.questions||{};break;case"formCreation":ye.testName=A.testName||"",ye.numQuestions=A.numQuestions||"",ye.numOptions=A.numOptions||"",ye.questions=A.questions||{};break;default:console.log(" Unknown step for form data save:",de);return}localStorage.setItem("test_creation_form_data",JSON.stringify({step:de,data:ye,timestamp:Date.now()})),console.log(" Saved form data for step:",de,ye)},[e,A]);const R=_.useCallback(async de=>{console.log(" Restoring form data for step:",de);try{const ye=localStorage.getItem(`form_data_${de}`);if(ye){const Pe=JSON.parse(ye);console.log(" Restored form data:",Pe),M(Be=>{const Ye={...Be,...Pe};return console.log(" Updated formData with restored data:",Ye),console.log(" Matching test data in restored data:",Ye.matchingTestData),Ye}),Object.keys(Pe).forEach(Be=>{const Ye=document.getElementById(Be);Ye&&Pe[Be]!==void 0&&(Ye.value=Pe[Be])}),console.log(" Form data restored for step:",de)}else console.log(" No saved data found for step:",de)}catch(ye){console.error(" Error restoring form data:",ye)}},[e]),z=_.useCallback(()=>{console.log(" Setting up multiple choice form auto-save..."),["mcNumOptions"].forEach(Pe=>{const Be=document.getElementById(Pe);Be&&Be.addEventListener("input",()=>{console.log(` Auto-save triggered for MC field: ${Pe}`)})}),document.querySelectorAll("#mcQuestionsContainer input, #mcQuestionsContainer textarea, #mcQuestionsContainer select").forEach(Pe=>{Pe.addEventListener("input",()=>{console.log(" Auto-save triggered for MC question field")})}),console.log(" Multiple choice form auto-save setup complete")},[]),G=_.useCallback(()=>{console.log(" Setting up true/false form auto-save..."),document.querySelectorAll("#tfQuestionsContainer input, #tfQuestionsContainer textarea, #tfQuestionsContainer select").forEach(ye=>{ye.addEventListener("input",()=>{console.log(" Auto-save triggered for TF question field")})}),console.log(" True/false form auto-save setup complete")},[]),X=_.useCallback(()=>{console.log(" Setting up input form auto-save..."),document.querySelectorAll("#inputQuestionsContainer input, #inputQuestionsContainer textarea, #inputQuestionsContainer select").forEach(ye=>{ye.addEventListener("input",()=>{console.log(" Auto-save triggered for Input question field")})}),console.log(" Input form auto-save setup complete")},[]),ne=_.useCallback(de=>{console.log(" showExcelUploadButton called with testType:",de);const ye=de==="multiple-choice"?"multipleChoice":de==="true-false"?"trueFalse":de==="input"?"input":de;kt(Pe=>({...Pe,[ye]:{...Pe[ye],buttonVisible:!0}}))},[]),q=_.useCallback(de=>{console.log(" showExcelHint called with testType:",de);const ye=de==="multiple-choice"?"multipleChoice":de==="true-false"?"trueFalse":de==="input"?"input":de;kt(Pe=>({...Pe,[ye]:{...Pe[ye],hintVisible:!0}}))},[]),se=_.useCallback(async(de,ye,Pe)=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTestAssignmentOptions, redirecting to login");return}console.log("displayTestAssignmentOptions called with:",{classes:de,testType:ye,testId:Pe}),y(de),console.log(" Test assignment options displayed for:",{testType:ye,testId:Pe,classesCount:de.length})},[e]),ue=_.useCallback(async(de,ye)=>{try{if(console.log("Loading teacher grades and classes for test assignment"),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}console.log("Teacher ID:",e.teacher_id);const Be=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log("Teacher subjects response:",Be),Be.success&&Be.subjects&&Be.subjects.length>0?(console.log("Teacher subjects loaded:",Be.subjects),y(Be.subjects),se(Be.subjects,de,ye)):(console.log("No teacher subjects found"),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(Pe){console.error("Error loading teacher grades and classes:",Pe),r("Error loading teacher grades and classes","error")}},[e,r,se]),me=_.useCallback(async()=>{if(console.log(" Loading available classes..."),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}try{const ye=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log(" Teacher subjects response:",ye),ye.success&&ye.subjects&&ye.subjects.length>0?(console.log(" Teacher subjects loaded:",ye.subjects),y(ye.subjects)):(console.log("No teacher subjects found"),y([]),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(de){console.error(" Error loading available classes:",de),r("Failed to load available classes","error")}},[e,r]);_.useCallback(async(de,ye)=>{if(i){o(!1);return}if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestAssignment, redirecting to login");return}te(),K("testAssignment"),ee(ye),g(de),u("testAssignment"),ue(de,ye),console.log(" Test assignment interface shown for:",{testType:de,testId:ye})},[i,e,te,K,ue]);const Ne=_.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTeacherActiveTests, redirecting to login");return}if(console.log(" Displaying teacher active tests:",de),de.length===0){Me([]);return}Me(de),console.log(" Active tests displayed:",de.length,"tests")},[e]);_.useCallback(async(de,ye)=>{try{console.log(" Loading test questions for:",{testType:de,testId:ye});const Pe=await Sn.getTestQuestions(ye,de);return console.log(" Test questions loaded:",Pe),Pe}catch(Pe){throw console.error("Error loading test questions:",Pe),Pe}},[]),_.useCallback((de,ye,Pe,Be)=>{console.log(" Showing teacher test details modal:",{testType:de,testId:ye,testName:Pe,questionsCount:Be.length}),console.log("Test Details:",{testType:de,testId:ye,testName:Pe,questions:Be.map(Ye=>({id:Ye.question_id,question:Ye.question,correctAnswer:Ye.correct_answer}))}),r(`Test details for "${Pe}" loaded successfully.`,"success")},[r]);const ce=_.useCallback(async()=>{console.log(" DEBUG: loadTeacherActiveTests called");try{console.log(" DEBUG: Fetching teacher active tests using JWT authentication...");const de=await Sn.getTeacherTests();console.log(" DEBUG: Tests loaded:",de),de&&de.length>0?(console.log(" DEBUG: Success! Displaying",de.length,"tests"),Ne(de)):(console.log(" DEBUG: No tests found"),Me([]))}catch(de){console.error(" DEBUG: Error loading active tests:",de),r("Error loading active tests.","error")}},[r,Ne]),Ue=_.useCallback(()=>{console.log("showTestCreationSuccessMessage called"),r("Test created and assigned successfully!","success"),u("typeSelection"),M({testName:"",numQuestions:0,numOptions:0,questions:{}}),B([]),o(!1),a(!1),I()},[r,I]),pe=_.useCallback(async(de,ye)=>{if(console.log(" === ASSIGN TEST TO CLASSES DEBUG START ==="),console.log(" Test Type:",de),console.log(" Test ID:",ye),console.log(" Current formData:",A),console.log(" Selected Classes:",F),console.log(" User:",e),!e||!e.teacher_id){console.error(" No valid teacher session found in assignTestToClasses, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}if(console.log(" Teacher ID:",e.teacher_id),F.length===0){console.warn(" No classes selected"),r("Please select at least one class.","warning");return}try{console.log(" Preparing test + assignment request..."),await cu.loadAcademicCalendar();const Be=cu.getCurrentTerm()?.id;if(!Be)throw new Error("No current academic period found");const Ye=F.map(Ft=>{const Yt={grade:parseInt(Ft.grade),class:parseInt(Ft.class),subject_id:parseInt(Ft.subject_id),academic_period_id:Be,due_date:null};return console.log(" Created assignment:",Yt),Yt});if(console.log(" Final assignments array:",Ye),de==="matching"){console.log(" Processing matching test..."),console.log(" Setting isAssigningTest to true for matching test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(ar=>setTimeout(ar,100));const Ft=A.matchingTestData;if(console.log(" Matching test data from formData:",Ft),!Ft){console.error(" Matching test data not found in formData"),r("Matching test data not found. Please recreate the test.","error");return}console.log(" Matching test data found, processing...");let Yt;Ft.processedQuestions?(console.log(" Using pre-processed questions from MatchingTestCreator"),Yt=Ft.processedQuestions):(console.log(" Converting blocks to questions (fallback)..."),console.log(" Blocks:",Ft.blocks),console.log(" Words:",Ft.words),console.log(" Arrows:",Ft.arrows),Yt=Ft.blocks.map((ar,Ur)=>{const Fr=Ft.words.find(sn=>sn.blockId===ar.id)?.word||`Word ${Ur+1}`,$r=Ft.arrows.some(sn=>sn.startBlock===ar.id),Tr=Ft.arrows.find(sn=>sn.startBlock===ar.id)||null,Is={question_id:Ur+1,word:Fr,block_coordinates:{x:ar.x,y:ar.y,width:ar.width,height:ar.height},has_arrow:$r,arrow:Tr?{startX:Tr.startX,startY:Tr.startY,endX:Tr.endX,endY:Tr.endY,style:Tr.style||{}}:null};return console.log(` Question ${Ur+1}:`,Is),Is})),console.log(" Final questions array:",Yt);const _r={teacher_id:e.teacher_id,test_name:A.testName,image_url:Ft.imageUrl,num_blocks:Ft.blocks.length,questions:Yt,allowed_time:A.enableTimer?Math.max(0,Math.floor(Number(A.timerMinutes||0)*60)):null,assignments:Ye};console.log(" Final matching test data payload:",_r),console.log(" Calling testService.saveMatchingTest...");const Ir=await Sn.saveMatchingTest(_r);console.log(" API Response:",Ir),Ir.success?(console.log(" Matching test created and assigned successfully!"),r("Matching test created and assigned successfully!","success"),console.log("Matching test created and assigned successfully"),o(!0),je()):(console.error(" Failed to create matching test:",Ir.message),r("Error creating and assigning matching test: "+Ir.message,"error")),P(!1);return}if(de==="wordMatching"){console.log(" Processing word matching test..."),console.log(" Setting isAssigningTest to true for word matching test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(ar=>setTimeout(ar,100));const Ft=A.wordMatchingData;if(console.log(" Word matching test data from formData:",Ft),!Ft){console.error(" Word matching test data not found in formData"),r("Word matching test data not found. Please recreate the test.","error");return}console.log(" Word matching test data found, processing...");const Yt=Ft.wordPairs.map((ar,Ur)=>({question_id:Ur+1,left_word:ar.leftWord,right_word:ar.rightWord}));console.log(" Final word matching questions array:",Yt);const _r={teacher_id:e.teacher_id,test_type:"word_matching",test_name:A.testName,num_questions:Ft.wordPairs.length,interaction_type:Ft.interactionType||"drag",questions:Yt,allowed_time:A.enableTimer?Math.max(0,Math.floor(Number(A.timerMinutes||0)*60)):null,assignments:Ye};console.log(" Final word matching test data payload:",_r),console.log(" Calling testService.assignTestToClasses for word matching...");const Ir=await Sn.assignTestToClasses(_r);console.log(" API Response:",Ir),Ir.success?(console.log(" Word matching test created and assigned successfully!"),r("Word matching test created and assigned successfully!","success"),console.log("Word matching test created and assigned successfully"),o(!0),je()):(console.error(" Failed to create word matching test:",Ir.message),r("Error creating and assigning word matching test: "+Ir.message,"error")),P(!1);return}if(de==="drawing"){console.log(" Processing drawing test..."),console.log(" Setting isAssigningTest to true for drawing test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(ar=>setTimeout(ar,100));const Ft=A.drawingData;if(console.log(" Drawing test data from formData:",Ft),!Ft){console.error(" Drawing test data not found in formData"),r("Drawing test data not found. Please recreate the test.","error");return}console.log(" Drawing test data found, processing...");const Yt=Ft.questions||[];console.log(" Drawing questions array:",Yt);const _r={teacher_id:e.teacher_id,test_type:"drawing",test_name:A.testName,num_questions:Ft.num_questions,passing_score:Ft.passing_score,questions:Yt,allowed_time:A.enableTimer?Math.max(0,Math.floor(Number(A.timerMinutes||0)*60)):null,assignments:Ye};console.log(" Final drawing test data payload:",_r),console.log(" Calling testService.assignTestToClasses...");const Ir=await Sn.assignTestToClasses(_r);console.log(" API Response:",Ir),Ir.success?(console.log(" Drawing test created and assigned successfully!"),r("Drawing test created and assigned successfully!","success"),o(!0),je()):(console.error(" Failed to create drawing test:",Ir.message),r("Error creating and assigning drawing test: "+Ir.message,"error")),P(!1);return}if(de==="fillBlanks"){console.log(" Processing fill blanks test..."),console.log(" Setting isAssigningTest to true for fill blanks test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(ar=>setTimeout(ar,100));const Ft=A.fillBlanksData;if(console.log(" Fill blanks test data from formData:",Ft),!Ft){console.error(" Fill blanks test data not found in formData"),r("Fill blanks test data not found. Please recreate the test.","error");return}console.log(" Fill blanks test data found, processing...");const Yt=Ft.blanks||[];console.log(" Fill blanks questions array:",Yt);const _r={teacher_id:e.teacher_id,test_type:"fill_blanks",test_name:A.testName,test_text:Ft.test_text,num_questions:Ft.num_questions,num_blanks:Ft.num_blanks,separate_type:Ft.separate_type,allowed_time:A.enableTimer?Math.max(0,Math.floor(Number(A.timerMinutes||0)*60)):null,questions:Yt,assignments:Ye};console.log(" Final fill blanks test data payload:",_r),console.log(" Calling testService.assignTestToClasses...");const Ir=await Sn.assignTestToClasses(_r);console.log(" API Response:",Ir),Ir.success?(console.log(" Fill blanks test created and assigned successfully!"),r("Fill blanks test created and assigned successfully!","success"),o(!0),je()):(console.error(" Failed to create fill blanks test:",Ir.message),r("Error creating and assigning fill blanks test: "+Ir.message,"error")),P(!1);return}if(de==="speaking"){console.log(" Processing speaking test..."),console.log(" Setting isAssigningTest to true for speaking test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(ar=>setTimeout(ar,100));const Ft=A.speakingData;if(console.log(" Speaking test data from formData:",Ft),!Ft){console.error(" Speaking test data not found in formData"),r("Speaking test data not found. Please recreate the test.","error");return}console.log(" Speaking test data found, processing...");const Yt={teacher_id:e.teacher_id,test_type:"speaking",test_name:A.testName,time_limit:Ft.time_limit,min_duration:Ft.min_duration,max_duration:Ft.max_duration,max_attempts:Ft.max_attempts,min_words:Ft.min_words,passing_score:Ft.passing_score,allowed_time:A.enableTimer?Math.max(0,Math.floor(Number(A.timerMinutes||0)*60)):null,questions:Ft.questions,assignments:Ye};console.log(" Final speaking test data payload:",Yt),console.log(" Calling save-speaking-test-with-assignments for speaking test...");const Ir=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-speaking-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Yt)})).json();console.log(" API Response:",Ir),Ir.success?(console.log(" Speaking test created and assigned successfully!"),r("Speaking test created and assigned successfully!","success"),o(!0),je()):(console.error(" Failed to create speaking test:",Ir.message),r("Error creating and assigning speaking test: "+Ir.message,"error")),P(!1);return}console.log(" Processing non-matching test..."),console.log(" Form data questions:",A.questions);const ot=Object.keys(A.questions).map(Ft=>{const Yt=A.questions[Ft];console.log(` Processing question ${Ft}:`,Yt);let _r;if(de==="input")_r={correct_answers:Yt.correct_answers||[Yt.correctAnswer||""]};else if(de==="trueFalse"){const ar=Yt.correct_answer||Yt.correctAnswer||Yt.correct_answers?.[0]||"";_r={correct_answer:ar==="true"}}else _r={correct_answer:Yt.correctAnswer||Yt.correct_answer||Yt.correct_answers?.[0]||""};const Ir={question_id:parseInt(Ft),question:Yt.question,..._r,options:Yt.options||[]};return console.log(` Question ${Ft} correct_answers:`,Yt.correct_answers),console.log(` Question ${Ft} correctAnswer:`,Yt.correctAnswer),console.log(` Converted question ${Ft}:`,Ir),Ir});console.log(" Final questions array:",ot);const wt={teacher_id:e.teacher_id,test_type:fje[de],test_name:A.testName,num_questions:A.numQuestions,num_options:A.numOptions,questions:ot,allowed_time:A.enableTimer?Math.max(0,Math.floor(Number(A.timerMinutes||0)*60)):null,is_shuffled:!!A.isShuffled,assignments:Ye};console.log(" Final test data payload:",wt),console.log(" Setting isAssigningTest to true..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ft=>setTimeout(Ft,100)),console.log(" Calling testService.assignTestToClasses...");const er=await Sn.assignTestToClasses(wt);console.log(" API Response:",er),er.success?(console.log(" Test created and assigned successfully!"),r("Test created and assigned successfully!","success"),console.log("Test created and assigned successfully"),o(!0),je()):(console.error(" Failed to create and assign test:",er.message),r("Error creating and assigning test: "+er.message,"error"))}catch(Pe){console.error(" Exception in assignTestToClasses:",Pe),console.error("Error creating and assigning test:",Pe),r("Error creating and assigning test. Please try again.","error")}finally{P(!1)}console.log(" === ASSIGN TEST TO CLASSES DEBUG END ===")},[e,F,A,r,Ue]),je=_.useCallback(async()=>{console.log("returnToMainCabinet called - restoring main cabinet view");try{a(!1),o(!1),u("typeSelection"),g(null),ee(null),B([]),L(),I(),Ue(),console.log(" Returned to main cabinet")}catch(de){console.error("Error returning to main cabinet:",de)}},[L,I,Ue]),[We,Me]=_.useState([]),[Nt,$e]=_.useState(!1);_.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await ce(),r("Active tests data refreshed.","success")}catch(de){console.error("Error refreshing active tests data:",de),r("Error refreshing data.","error")}},[ce,r]);const[St,At]=_.useState([]),[Bt,Gt]=_.useState([]),[or,yr]=_.useState(!1),[it,Ve]=_.useState(!1),at=_.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayExistingSubjectsInSelection, redirecting to login");return}console.log("Displaying existing subjects in selection interface:",de),At(de),console.log(" Existing subjects displayed in selection:",de.length,"subjects")},[e]);_.useCallback(async()=>{try{console.log("Loading existing subjects...");const de=await $s.getTeacherSubjects();console.log("Existing subjects loaded:",de),de&&de.length>0?at(de):(console.log("No existing subjects found"),At([]))}catch(de){console.error("Error loading existing subjects:",de),r("Error loading subjects.","error")}},[r,at]);const pt=_.useCallback(de=>{console.log("Checking for outside click...");const ye=document.getElementById("dropdownMenu"),Pe=document.querySelector("[data-menu-button]");ye&&!ye.contains(de.target)&&!Pe?.contains(de.target)&&(console.log("Outside click detected, closing menu"),ye.classList.remove("show"),document.removeEventListener("click",pt))},[]),[nt,kt]=_.useState({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),Wt=_.useCallback((de,ye)=>{const Pe=de.target.files[0];if(!Pe)return;if(!Pe.name.match(/\.(xlsx|xls)$/i)){r("Please select a valid Excel file (.xlsx or .xls)","error"),de.target.value="";return}if(Pe.size>5*1024*1024){r("File is too large. Please select a file smaller than 5MB.","error"),de.target.value="";return}E(!0);const Be=new FileReader;Be.onload=function(Ye){try{console.log(" File loaded, processing data...");const ot=new Uint8Array(Ye.target.result),wt=tT(ot,{type:"array"}),er=wt.SheetNames[0],Ft=wt.Sheets[er],Yt=Jb.sheet_to_json(Ft,{header:1});console.log(" Parsed Excel data:",Yt),ur(Yt,ye),E(!1)}catch(ot){console.error("Error processing Excel file:",ot),r("Error reading Excel file: "+ot.message,"error"),de.target.value="",E(!1)}},Be.onerror=function(){r("Failed to read file","error"),de.target.value="",E(!1)},Be.readAsArrayBuffer(Pe)},[r]),rr=_.useCallback(()=>{console.log(" Initializing Excel upload for all test types...");const de=document.querySelectorAll(".excel-upload-btn");console.log(` Found ${de.length} Excel upload buttons`),de.forEach((ye,Pe)=>{const Be=ye.dataset.testType,Ye=document.querySelector(`.excel-file-input[data-test-type="${Be}"]`);console.log(` Processing button ${Pe+1}: testType=${Be}, fileInput=${Ye?"found":"not found"}`),Ye?(ye._excelClickHandler&&ye.removeEventListener("click",ye._excelClickHandler),Ye._excelChangeHandler&&Ye.removeEventListener("change",Ye._excelChangeHandler),ye._excelClickHandler=()=>{console.log(` Excel upload button clicked for test type: ${Be}`),Ye.click()},Ye._excelChangeHandler=ot=>{console.log(` File input changed for test type: ${Be}`),Wt(ot,Be)},ye.addEventListener("click",ye._excelClickHandler),Ye.addEventListener("change",Ye._excelChangeHandler),console.log(` Excel upload initialized for test type: ${Be}`)):console.warn(` File input not found for test type: ${Be}`)}),console.log(" Excel upload initialization complete")},[Wt]),ur=_.useCallback((de,ye)=>{const Pe=de.filter(Ft=>Array.isArray(Ft)&&Ft.length>0&&Ft.some(Yt=>Yt&&Yt.toString().trim()!==""));console.log(" Original Excel data rows:",de.length),console.log(" Filtered Excel data rows:",Pe.length);const Ye=Nr(Pe,ye).dataRows;if(Ye.length===0){const Ft="No data rows found after header processing. Please check your Excel file.";r(Ft,"error"),alert(Ft),Ae(ye);return}console.log(` Processing Excel data for test type: ${ye}`),console.log(" Data rows after header processing:",Ye);const ot=Tt(Ye,ye);if(console.log(" Recognition result:",ot),!ot.recognized){console.log(` Excel data recognition failed for test type: ${ye}`);const Ft="Excel data recognition failed. Please check your file format.";r(Ft,"error"),alert(Ft),Ae(ye);return}console.log(` Excel data recognition successful for test type: ${ye}`);const wt=Ye.length,er=Ee(ye);if(er===0)console.log(` No question count specified, using CSV count: ${wt}`),M(Ft=>({...Ft,numQuestions:wt}));else if(wt!==er){const Ft=`Your CSV file has ${wt} data rows, but you specified ${er} questions.

Please either:
1. Change your question count to ${wt}, or
2. Fix your CSV file to have exactly ${er} data rows

Then try uploading again.`;r(Ft,"error"),Ae(ye);return}Fe(Ye,ye)},[r]),Nr=_.useCallback((de,ye)=>{if(de.length===0)return{hasHeaders:!1,headerRow:null,dataRows:de};const Pe=de[0],Be=wr(ye);if(ft(Pe,Be).isLikelyHeader){const ot=`The first row of your Excel file looks like it contains headers:

"${Pe.join(" | ")}"

Does the first row contain column headers?

Click "OK" if YES (headers will be removed)
Click "Cancel" if NO (first row will be treated as data)`;if(window.confirm(ot))return{hasHeaders:!0,headerRow:Pe,dataRows:de.slice(1)}}return{hasHeaders:!1,headerRow:null,dataRows:de}},[]),wr=_.useCallback(de=>{switch(de){case"multipleChoice":return{keywords:["question","answer","correct","option","a","b","c","d","e","f"],expectedColumns:4};case"trueFalse":return{keywords:["question","answer","correct","true","false"],expectedColumns:2};case"input":return{keywords:["question","answer","correct"],expectedColumns:2};default:return{keywords:[],expectedColumns:0}}},[]),ft=_.useCallback((de,ye)=>{if(!de||de.length===0)return{isLikelyHeader:!1};if(de.length<ye.expectedColumns)return{isLikelyHeader:!1};const Pe=de.join(" ").toLowerCase(),Be=ye.keywords.filter(ot=>Pe.includes(ot.toLowerCase()));return{isLikelyHeader:Be.length>ye.keywords.length/2,keywordMatches:Be}},[]),Tt=_.useCallback((de,ye)=>{if(de.length===0)return r("No data rows found. Please check your Excel file.","error"),{recognized:!1,data:[]};console.log(` Checking data pattern for test type: ${ye}`),console.log(" Excel data to validate:",de);const Pe=Ot(de,ye);if(console.log(" Recognition result:",Pe),!Pe.matches){const Be=`Your Excel file doesn't match the expected format.

Required format:
${he(ye)}

Please review your Excel file and make sure it follows this format exactly.

Then try uploading again.`;return console.log(" Data pattern validation failed:",Be),console.log(" Calling showNotification with message:",Be),r(Be,"error"),console.log(" showNotification called"),alert(Be),{recognized:!1,data:[]}}return console.log(` Data pattern validation passed for test type: ${ye}`),{recognized:!0,data:de}},[r]),Ot=_.useCallback((de,ye)=>{if(ye==="multipleChoice")for(let Pe=0;Pe<de.length;Pe++){const Be=de[Pe];if(Be.length<4)return{matches:!1,issue:`Row ${Pe+1} has ${Be.length} columns but needs at least 4`};if(!Be[0]||Be[0].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no question in column 1`};if(!Be[1]||Be[1].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no correct answer in column 2`}}else if(ye==="trueFalse")for(let Pe=0;Pe<de.length;Pe++){const Be=de[Pe];if(Be.length<2)return{matches:!1,issue:`Row ${Pe+1} has ${Be.length} columns but needs at least 2`};if(!Be[0]||Be[0].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no question in column 1`};const Ye=Be[1]?.toString().trim().toLowerCase();if(!Ye||!["true","false","t","f"].includes(Ye))return{matches:!1,issue:`Row ${Pe+1} has invalid correct answer in column 2 (must be True/False)`}}else if(ye==="input")for(let Pe=0;Pe<de.length;Pe++){const Be=de[Pe];if(Be.length<2)return{matches:!1,issue:`Row ${Pe+1} has ${Be.length} columns but needs at least 2`};if(!Be[0]||Be[0].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no question in column 1`};if(!Be[1]||Be[1].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no correct answer in column 2`}}return{matches:!0}},[]),he=_.useCallback(de=>{switch(de){case"multipleChoice":return`Column 1: Question
Column 2: Correct Answer (A, B, C, D, E, or F)
Column 3: Option A
Column 4: Option B
Column 5: Option C (optional)
Column 6: Option D (optional)
Column 7: Option E (optional)
Column 8: Option F (optional)`;case"trueFalse":return`Column 1: Question
Column 2: Correct Answer (True or False)`;case"input":return`Column 1: Question
Column 2: Correct Answer`;default:return"Unknown test type"}},[]),Ee=_.useCallback(de=>A.numQuestions||0,[A.numQuestions]),Ae=_.useCallback(de=>{console.log(` Clearing file input for test type: ${de}`)},[]),Fe=_.useCallback((de,ye)=>{switch(console.log(` populateFromExcelForTestType called with testType: ${ye}`),ye){case"multipleChoice":case"multiple-choice":xt(de);break;case"trueFalse":case"true-false":$t(de);break;case"input":lr(de);break;default:console.log(` Unknown test type: ${ye}`)}},[]),xt=_.useCallback(de=>{console.log(" populateMultipleChoiceFromExcel called with:",de);const ye=Math.max(...de.map(Ye=>Ye.length-2)),Pe=Math.min(ye,6);console.log(` Excel data has ${ye} option columns, using ${Pe} options`),M(Ye=>({...Ye,numOptions:Pe}));const Be={};de.forEach((Ye,ot)=>{const wt=ot+1;console.log(` Row ${ot+1} data:`,Ye);const er={question:(Ye[0]||"").toString().trim(),options:[],correctAnswer:(Ye[1]||"").toString().trim().toUpperCase()};console.log(` Question ${wt} correctAnswer:`,er.correctAnswer),["A","B","C","D","E","F"].slice(0,Pe).forEach((_r,Ir)=>{const ar=(Ye[Ir+2]||"").toString().trim();console.log(` Option ${Ir} (${_r}):`,ar),er.options.push(ar)}),Be[wt]=er}),M(Ye=>{const ot={...Ye,questions:Be};return console.log(" Updating form data with:",ot),ot}),console.log(" Populated multiple choice questions from Excel:",Be),r(`Successfully loaded ${de.length} questions from CSV file!`,"success"),z(),Ke("multiple-choice")},[A.numOptions,z,r]),$t=_.useCallback(de=>{console.log(" populateTrueFalseFromExcel called with:",de);const ye={};de.forEach((Pe,Be)=>{const Ye=Be+1,ot={question:(Pe[0]||"").toString().trim(),correctAnswer:Pe[1]?.toString().trim().toLowerCase()==="true"?"true":"false"};ye[Ye]=ot}),M(Pe=>({...Pe,questions:ye})),console.log(" Populated true/false questions from Excel:",ye),r(`Successfully loaded ${de.length} questions from CSV file!`,"success"),G(),Ke("true-false")},[G,r]),lr=_.useCallback(de=>{console.log(" populateInputFromExcel called with:",de);const ye={};de.forEach((Pe,Be)=>{const Ye=Be+1,ot=[];for(let er=1;er<Pe.length;er++){const Ft=(Pe[er]||"").toString().trim();Ft&&ot.push(Ft)}const wt={question:(Pe[0]||"").toString().trim(),correctAnswer:ot[0]||"",correct_answers:ot};console.log(` Excel question ${Ye} data:`,wt),ye[Ye]=wt}),M(Pe=>({...Pe,questions:ye})),console.log(" Populated input questions from Excel:",ye),r(`Successfully loaded ${de.length} questions from Excel file!`,"success"),X(),Ke("input")},[X,r]),Ke=_.useCallback(de=>{switch(console.log(` Reattaching form event listeners for test type: ${de}`),document.querySelectorAll('[data-listener-attached="true"]').forEach(Pe=>{Pe.removeEventListener("input",()=>{}),Pe.removeAttribute("data-listener-attached")}),de){case"multiple-choice":z();break;case"true-false":G();break;case"input":X();break;default:console.warn("Unknown test type for event listener reattachment:",de)}console.log(` Form event listeners reattached for test type: ${de}`)},[z,G,X]),ct=_.useCallback(()=>{const de=localStorage.getItem("test_creation_state");if(!de)return console.log(" No test creation state found in localStorage"),!1;try{const ye=JSON.parse(de);console.log(" Found test creation state:",ye);const Pe=Date.now()-ye.timestamp,Be=1800*1e3;if(Pe>Be)return console.log(" Test creation state is too old, clearing it"),I(),!1;switch(a(!0),console.log(" Restored isInTestCreation flag to true"),te(),ye.excelState&&H(),ye.currentStep){case"testTypeSelection":console.log(" Restoring test type selection step"),u("typeSelection");break;case"multipleChoiceForm":console.log(" Restoring multiple choice form step"),g("multipleChoice"),u("formCreation");break;case"trueFalseForm":console.log(" Restoring true/false form step"),g("trueFalse"),u("formCreation");break;case"inputForm":console.log(" Restoring input form step"),g("input"),u("formCreation");break;case"testAssignment":case"assignment":console.log(" Restoring test assignment step"),console.log(" Cannot restore test assignment step without test data, going back to type selection"),u("typeSelection");break;default:console.log(" Unknown step in state, defaulting to type selection"),u("typeSelection")}return R(ye.currentStep),!0}catch(ye){return console.error(" Error restoring test creation state:",ye),I(),!1}},[I,te,H,R]);_.useEffect(()=>{console.log(" Initializing Teacher Tests..."),ae(),ct(),me(),rr()},[ae,ct,me,rr]),_.useEffect(()=>{A.numQuestions>0&&h&&h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&(console.log(" Excel upload buttons rendered, initializing event listeners..."),setTimeout(()=>{rr()},100))},[A.numQuestions,h,rr]);const yt=de=>{console.log(" Test type selected:",de),console.log(" Setting testType to:",de),g(de),u("formCreation"),M({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:""}),K("formCreation"),setTimeout(()=>{rr()},100)},Jt=(de,ye)=>{M(Pe=>({...Pe,[de]:ye}))},cr=(de,ye,Pe)=>{M(Be=>({...Be,questions:{...Be.questions,[de]:{...Be.questions[de],[ye]:Pe}}}))},Rr=(de,ye,Pe,Be=0)=>{const Ye={};for(let ot=1;ot<=Pe;ot++)de==="multipleChoice"?Ye[ot]={question:"",options:Array.from({length:Be},()=>""),correctAnswer:""}:de==="trueFalse"?Ye[ot]={question:"",correctAnswer:""}:de==="input"&&(Ye[ot]={question:"",correct_answers:[""]});M(ot=>({...ot,questions:Ye})),de==="multipleChoice"?(ne("multiple-choice"),q("multiple-choice")):de==="trueFalse"?(ne("true-false"),q("true-false")):de==="input"&&(ne("input"),q("input"))},Hr=async()=>{if(!h||!A.testName||!A.numQuestions){r("Please fill in all required fields","error");return}console.log(" Test form completed, proceeding to assignment step"),K("testAssignment",A),u("testAssignment"),r("Test form completed! Now select classes and subjects.","success")},He=(de,ye,Pe,Be,Ye)=>{B(Pe?ot=>[...ot,{grade:de,class:ye,subject_id:Be,subject:Ye}]:ot=>ot.filter(wt=>!(wt.grade===de&&wt.class===ye&&wt.subject_id===Be)))},Ct=_.useCallback(async de=>{console.log(" [DEBUG] handleMatchingTestSave called"),console.log(" [DEBUG] Received testData:",de),console.log(" [DEBUG] Current formData:",A),console.log(" [DEBUG] Current testType:",h),console.log(" [DEBUG] Current user:",e),console.log(" [DEBUG] Current currentStep:",c),b(!0);try{const ye=de.blocks.map((Ye,ot)=>{const wt=de.words.find(Yt=>Yt.blockId===Ye.id)?.word||`Word ${ot+1}`,er=de.arrows.some(Yt=>Yt.startBlock===Ye.id),Ft=de.arrows.find(Yt=>Yt.startBlock===Ye.id)||null;return{question_id:ot+1,word:wt,block_coordinates:{x:Ye.x,y:Ye.y,width:Ye.width,height:Ye.height},has_arrow:er,arrow:Ft?{startX:Ft.startX,startY:Ft.startY,endX:Ft.endX,endY:Ft.endY,style:Ft.style||{}}:null}}),Pe={teacher_id:e.teacher_id,test_name:A.testName||`Matching Test - ${new Date().toLocaleString()}`,image_url:de.imageUrl,num_blocks:de.blocks.length,questions:ye,assignments:[]};console.log(" Sending matching test payload:",Pe);const Be={...A,testName:Pe.test_name,numQuestions:Pe.num_blocks,numOptions:0,questions:ye.reduce((Ye,ot,wt)=>(Ye[wt+1]={question:ot.word,correctAnswer:ot.word,options:[]},Ye),{}),matchingTestData:de};console.log(" Assignment form data:",Be),M(Be),K("testAssignment",Be),console.log(" Setting current step to testAssignment"),u("testAssignment"),r("Matching test data saved! Now select classes and subjects.","success")}catch(ye){console.error(" Error saving matching test:",ye),r("Failed to save matching test: "+ye.message,"error")}finally{b(!1)}},[e,A,h,r,K]),le=_.useCallback(()=>{console.log(" Cancelling matching test creation"),u("typeSelection"),M({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),ve=_.useCallback(async de=>{console.log(" [DEBUG] handleWordMatchingTestSave called"),console.log(" [DEBUG] Received testData:",de),b(!0);try{M(ye=>({...ye,wordMatchingData:de,numQuestions:de.numQuestions||de.wordPairs?.length||0})),u("testAssignment"),r("Word matching test created! Now assign it to classes.","success")}catch(ye){console.error("Error saving word matching test:",ye),r("Failed to save word matching test: "+ye.message,"error")}finally{b(!1)}},[r]),ge=_.useCallback(()=>{console.log(" Cancelling word matching test creation"),u("typeSelection"),M({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),we=_.useCallback(async de=>{console.log(" [DEBUG] handleDrawingTestSave called"),console.log(" [DEBUG] Received testData:",de),b(!0);try{M(ye=>({...ye,drawingData:de,numQuestions:de.num_questions||de.questions?.length||0})),u("testAssignment"),r("Drawing test created! Now assign it to classes.","success")}catch(ye){console.error(" Error saving drawing test:",ye),r("Error saving drawing test","error")}finally{b(!1)}},[r]),Te=_.useCallback(()=>{console.log(" Cancelling drawing test creation"),u("typeSelection"),M({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Se=_.useCallback(()=>{console.log(" Cancelling fill blanks test creation"),u("typeSelection"),M({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ze=_.useCallback(async de=>{console.log(" [DEBUG] handleFillBlanksTestSave called"),console.log(" [DEBUG] Received testData:",de),b(!0);try{M(ye=>({...ye,fillBlanksData:de,numQuestions:de.num_questions||de.blanks?.length||0})),u("testAssignment"),r("Fill blanks test created! Now assign it to classes.","success")}catch(ye){console.error(" Error saving fill blanks test:",ye),r("Error saving fill blanks test","error")}finally{b(!1)}},[r]),ut=_.useCallback(()=>{console.log(" Cancelling speaking test creation"),u("typeSelection"),M({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Je=_.useCallback(async de=>{console.log(" [DEBUG] handleSpeakingTestSave called"),console.log(" [DEBUG] Received testData:",de),b(!0);try{M(ye=>({...ye,speakingData:de,numQuestions:de.questions?.length||0})),u("testAssignment"),r("Speaking test created! Now assign it to classes.","success")}catch(ye){console.error(" Error saving speaking test:",ye),r("Error saving speaking test","error")}finally{b(!1)}},[r]);return l.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs(il,{mode:"wait",children:[c==="typeSelection"&&l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs(rt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:"Back to Main"})]}),l.jsx("div",{className:"flex-1"})]}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Test"}),l.jsx("p",{className:"text-gray-600",children:"Choose the type of test you want to create"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"multipleChoice",title:"Multiple Choice",description:"Questions with multiple answer options",icon:"/pics/multiple-choice.png"},{type:"trueFalse",title:"True/False",description:"Questions with true or false answers",icon:"/pics/true-false.png"},{type:"input",title:"Input",description:"Questions requiring text input",icon:"/pics/input.png"},{type:"matching",title:"Picture Matching",description:"Labeling pictures",icon:"/pics/matching.png"},{type:"wordMatching",title:"Word Matching",description:"Matching word pairs by dragging or drawing arrows",icon:"/pics/matching-words.png"},{type:"drawing",title:"Drawing Test",description:"Interactive drawing tests with canvas for students",icon:"/pics/drawing.png"},{type:"fillBlanks",title:"Fill Blanks",description:"Text with multiple choice blanks",icon:"/pics/fill-blanks.png"},{type:"speaking",title:"Speaking Test",description:"Audio recording with AI-powered feedback",icon:"/pics/speaking.png"}].map(({type:de,title:ye,description:Pe,icon:Be})=>l.jsx(dt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>yt(de),children:l.jsxs(zt,{className:"h-full text-center hover:shadow-lg transition-shadow",children:[l.jsx("div",{className:"mb-3 flex justify-center",children:l.jsx("img",{src:Be,alt:ye,className:"w-12 h-12 object-contain"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ye}),l.jsx("p",{className:"text-sm text-gray-600",children:Pe})]})},de))})]}),c==="formCreation"&&l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex space-x-2",children:l.jsx(rt,{variant:"outline",onClick:Z,children:" Back to Test Types"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Create ",h==="multipleChoice"?"Multiple Choice":h==="trueFalse"?"True/False":h==="input"?"Input":h==="drawing"?"Drawing":h==="fillBlanks"?"Fill Blanks":h==="wordMatching"?"Word Matching":h==="speaking"?"Speaking":"Picture Matching"," Test"]}),l.jsx("p",{className:"text-gray-600",children:"Fill in the test details and questions"})]})]})}),l.jsx(zt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Information"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name"}),l.jsx("input",{type:"text",value:A.testName,onChange:de=>Jt("testName",de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter test name"})]}),h!=="matching"&&h!=="wordMatching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),l.jsx("input",{type:"number",min:"1",max:"50",value:A.numQuestions,onChange:de=>{const ye=parseInt(de.target.value)||0;Jt("numQuestions",ye),ye>0&&Rr(h,A.testName,ye,A.numOptions)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of questions"})]}),h==="multipleChoice"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Options per Question"}),l.jsx("input",{type:"number",min:"2",max:"6",value:A.numOptions,onChange:de=>{const ye=parseInt(de.target.value)||0;Jt("numOptions",ye),ye>0&&ye<2&&r("Multiple choice tests require at least 2 options per question. Please enter 2 or more.","warning"),A.numQuestions>0&&Rr(h,A.testName,A.numQuestions,ye)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of options (2-6)"})]}),h!=="speaking"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:!!A.enableTimer,onChange:de=>Jt("enableTimer",de.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Enable timer for this test"})]}),A.enableTimer&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm text-gray-700",children:"Time (minutes):"}),l.jsx("input",{type:"number",min:"1",max:"1440",value:A.timerMinutes,onChange:de=>Jt("timerMinutes",de.target.value.replace(/[^0-9]/g,"")),className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 30"})]})]}),h!=="drawing"&&h!=="matching"&&h!=="wordMatching"&&h!=="fillBlanks"&&h!=="speaking"&&l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:!!A.isShuffled,onChange:de=>Jt("isShuffled",de.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle questions during test"})]})})]})]})}),h==="matching"&&l.jsx(zt,{children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Picture Matching Test"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image and create interactive matching blocks with words."}),l.jsx(Bae,{testName:A.testName,onTestSaved:Ct,onCancel:le,onBackToCabinet:je,isSaving:k,validationErrors:{}})]})}),h==="wordMatching"&&l.jsx(zt,{children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Word Matching Test"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Create word pairs for students to match by dragging or drawing arrows."}),l.jsx(Ude,{testName:A.testName,onTestSaved:ve,onCancel:ge,onBackToCabinet:je,isSaving:k,validationErrors:{}})]})}),h==="drawing"&&l.jsxs(zt,{children:[console.log(" Rendering DrawingTestCreator, testType:",h),l.jsx(jce,{testName:A.testName,onTestSaved:we,onCancel:Te,onBackToCabinet:je,isSaving:k,validationErrors:{}})]}),h==="fillBlanks"&&l.jsxs(zt,{children:[console.log(" Rendering FillBlanksTestCreator, testType:",h),l.jsx(Dce,{testName:A.testName,allowedTime:A.enableTimer&&parseInt(A.timerMinutes)||null,onTestSaved:Ze,onCancel:Se,onBackToCabinet:je,isSaving:k,validationErrors:{}})]}),h==="speaking"&&l.jsxs(zt,{children:[console.log(" Rendering SpeakingTestCreator, testType:",h),l.jsx(Rce,{testName:A.testName,onTestSaved:Je,onCancel:ut,onBackToCabinet:je,isSaving:k,validationErrors:{}})]}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&A.numQuestions>0&&l.jsx(zt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excel Upload"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Upload an Excel file to automatically populate questions, or fill them in manually below."}),l.jsxs("div",{className:"space-y-6",children:[h==="multipleChoice"&&nt.multipleChoice?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"multiple-choice",disabled:C,children:C?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"multiple-choice"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Multiple Choice Format:"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[l.jsx("div",{children:"Column 1: Question"}),l.jsx("div",{children:"Column 2: Correct Answer (A-F)"}),l.jsx("div",{children:"Column 3: Option A text"}),l.jsx("div",{children:"Column 4: Option B text"}),l.jsx("div",{children:"Column 5: Option C text"}),l.jsx("div",{children:"Column 6: Option D text"})]})]})})})]}),h==="trueFalse"&&nt.trueFalse?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"true-false",disabled:C,children:C?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"true-false"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-xs text-blue-800",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Format:"})," Question | Answer (true/false)"]}),l.jsxs("div",{className:"mt-1",children:[l.jsx("strong",{children:"Example:"})," The Earth is round | true"]}),l.jsxs("div",{className:"mt-1",children:[l.jsx("strong",{children:"Note:"})," Headers are optional"]})]})})})]}),h==="input"&&nt.input?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"input",disabled:C,children:C?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"input"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Input Test Format:"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[l.jsx("div",{children:"Column 1: Question"}),l.jsx("div",{children:"Column 2: Answer 1"}),l.jsx("div",{children:"Column 3: Answer 2 (optional)"})]})]})})})]})]})]})}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&A.numQuestions>0&&l.jsx(zt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manual Question Entry"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the questions manually using the form below."})]})}),A.numQuestions>0&&l.jsx(zt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),l.jsx("div",{className:"space-y-6",children:Object.keys(A.questions).map(de=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Question ",de]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{value:A.questions[de]?.question||"",onChange:ye=>cr(de,"question",ye.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Enter the question text",id:`question_${de}`}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(`question_${de}`),onChange:ye=>cr(de,"question",ye.target.value)})]})]}),h==="multipleChoice"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),l.jsx("div",{className:"space-y-2",children:A.questions[de]?.options?.map((ye,Pe)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("span",{className:"w-6 text-sm font-medium text-gray-700",children:[String.fromCharCode(65+Pe),":"]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:ye,onChange:Be=>{const Ye=[...A.questions[de].options];Ye[Pe]=Be.target.value,cr(de,"options",Ye)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${String.fromCharCode(65+Pe)}`,id:`option_${de}_${Pe}`}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(`option_${de}_${Pe}`),onChange:Be=>{const Ye=[...A.questions[de].options];Ye[Pe]=Be.target.value,cr(de,"options",Ye)}})]})]},Pe))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),h==="multipleChoice"?l.jsx("div",{children:l.jsxs("select",{value:A.questions[de]?.correctAnswer||"",onChange:ye=>cr(de,"correctAnswer",ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),A.questions[de]?.options?.map((ye,Pe)=>l.jsx("option",{value:String.fromCharCode(65+Pe),children:String.fromCharCode(65+Pe)},Pe))]})}):h==="trueFalse"?l.jsxs("select",{value:A.questions[de]?.correctAnswer||"",onChange:ye=>cr(de,"correctAnswer",ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),l.jsx("option",{value:"true",children:"True"}),l.jsx("option",{value:"false",children:"False"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s)"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:A.questions[de]?.correct_answers?.[0]||"",onChange:ye=>{const Be=[...A.questions[de]?.correct_answers||[""]];Be[0]=ye.target.value,cr(de,"correct_answers",Be)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the primary correct answer",id:`answer_${de}_0`}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${de}_0`),onChange:ye=>{const Be=[...A.questions[de]?.correct_answers||[""]];Be[0]=ye.target.value,cr(de,"correct_answers",Be)}})]}),A.questions[de]?.correct_answers?.slice(1).map((ye,Pe)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:ye,onChange:Be=>{const Ye=[...A.questions[de]?.correct_answers||[]];Ye[Pe+1]=Be.target.value,cr(de,"correct_answers",Ye)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Alternative answer ${Pe+2}`,id:`answer_${de}_${Pe+1}`}),l.jsx(El,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${de}_${Pe+1}`),onChange:Be=>{const Ye=[...A.questions[de]?.correct_answers||[]];Ye[Pe+1]=Be.target.value,cr(de,"correct_answers",Ye)}})]}),l.jsx("button",{type:"button",onClick:()=>{const Be=[...A.questions[de]?.correct_answers||[]];Be.splice(Pe+1,1),cr(de,"correct_answers",Be)},className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},Pe))||[],l.jsx("button",{type:"button",onClick:()=>{const Pe=[...A.questions[de]?.correct_answers||[""],""];cr(de,"correct_answers",Pe)},className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm border border-blue-300 rounded-md hover:bg-blue-50",children:"+ Add Alternative Answer"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"You can add multiple correct answers for the same question. Students will get credit for any of them."})]})]})]})]},de))})]})}),A.testName&&A.numQuestions>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx(rt,{onClick:Hr,disabled:k,className:"px-8",children:k?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test & Continue to Assignment"})})]}),c==="testAssignment"&&l.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs(rt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:"Back to Main"})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assign Test to Classes"}),l.jsx("p",{className:"text-gray-600",children:"Select which classes should take this test"})]})]}),l.jsx(rt,{variant:"outline",onClick:()=>u("formCreation"),children:" Back to Test Form"})]}),l.jsx(zt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Classes"}),x.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("p",{className:"text-gray-500 text-lg",children:"No subjects available for assignment."}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You need to assign subjects to grades and classes first."}),l.jsx("div",{className:"mt-4",children:l.jsx(rt,{onClick:()=>window.location.href="/teacher/subjects",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Subjects Page"})})]}):l.jsx("div",{className:"space-y-6",children:x.map(de=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:de.subject}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:de.classes.map(ye=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:F.some(Pe=>Pe.grade===ye.grade&&Pe.class===ye.class&&Pe.subject_id===de.subject_id),onChange:Pe=>He(ye.grade,ye.class,Pe.target.checked,de.subject_id,de.subject),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsxs("span",{className:"text-sm text-gray-700",children:[ye.grade,"/",ye.class]})]},`${ye.grade}-${ye.class}-${de.subject_id}`))})]},de.subject_id))})]})}),F.length>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx(rt,{onClick:()=>pe(h,null),disabled:v,className:"px-8",children:v?l.jsxs(l.Fragment,{children:[l.jsx(cn,{size:"sm",color:"white",className:"mr-2"}),"Assigning Test..."]}):`Assign Test to ${F.length} Class${F.length>1?"es":""}`})})]})]})}),console.log(" Checking isAssigningTest:",j),j&&l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Assigning test to classes..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your assignment"})]})}),k&&l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Saving test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we save your test"})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:t.map(de=>l.jsx(ou,{type:de.type,message:de.message,duration:de.duration,onClose:()=>n(de.id)},de.id))})]})},hje=({onDataLoaded:e,onError:t})=>{const r=Wo(),{user:n,isAuthenticated:s}=Os(),{teacherData:a,loadTeacherData:i}=o3(),[o,c]=_.useState(!0),[u,d]=_.useState(""),[f,h]=_.useState([]),[g,x]=_.useState(null),[y,v]=_.useState([]),[T,k]=_.useState([]),[b,C]=_.useState([]),[E,j]=_.useState(null),[P,A]=_.useState(0);_.useEffect(()=>{ae()},[]),_.useCallback(async te=>{console.log(" Teacher login attempt...");try{const L=await $s.teacherLogin(te);if(L.success)return ee("Login successful!","success"),await M(),L;throw new Error(L.error||"Login failed")}catch(L){throw console.error(" Teacher login error:",L),ee("Login failed. Please check your credentials.","error"),L}},[]);const M=_.useCallback(async()=>{console.log(" Loading teacher data...");try{if(c(!0),d(""),!s||!n){console.log(" User not authenticated"),d("User not authenticated");return}if(n.role!==Ro.TEACHER){console.error(" Invalid user role for teacher data:",n.role),d("Access denied. Teacher role required.");return}console.log(" Fetching teacher data from service...");const te=await $s.getTeacherData();if(te&&te.success)console.log(" Teacher data loaded successfully:",te),x(te.teacher||n),te.subjects&&(v(te.subjects),console.log(" Teacher subjects loaded:",te.subjects.length)),te.grades&&k(te.grades),te.classes&&C(te.classes),j(new Date),A(L=>L+1),e&&e(te),ee("Teacher data loaded successfully!","success");else throw new Error(te?.error||"Failed to load teacher data")}catch(te){console.error(" Error loading teacher data:",te);const L=te.message||"Failed to load teacher data";d(L),t&&t(te),ee(L,"error")}finally{c(!1)}},[s,n,e,t]),F=_.useCallback(()=>{console.log(" Returning to main cabinet..."),r("/teacher/cabinet")},[r]);_.useCallback(te=>{console.log(" Showing main cabinet with subjects:",te),te&&v(te),r("/teacher/cabinet")},[r]);const B=_.useCallback(()=>(console.log(" Rendering grade buttons..."),["M1","M2","M3","M4","M5","M6"].map(L=>({id:L,name:`Grade ${L}`,classes:V(L)}))),[]),V=_.useCallback(te=>Array.from({length:10},(K,I)=>I+1).map(K=>({id:`${te}-${K}`,name:`Class ${K}`,grade:te,classNumber:K})),[]),ee=_.useCallback((te,L)=>{const K={id:Date.now(),message:te,type:L,timestamp:new Date};h(I=>[...I,K]),setTimeout(()=>{h(I=>I.filter(H=>H.id!==K.id))},Xm.NOTIFICATION_DURATION)},[]),ae=_.useCallback(async()=>{console.log(" Initializing teacher data..."),await M()},[M]),Z=_.useCallback(async()=>{console.log(" Refreshing teacher data..."),await M()},[M]);return _.useCallback(async te=>{console.log(" Updating teacher profile:",te);try{const L=await $s.updateUserProfile(te);if(L.success)return x(K=>({...K,...te})),ee("Profile updated successfully!","success"),L;throw new Error(L.error||"Failed to update profile")}catch(L){throw console.error(" Error updating teacher profile:",L),ee("Failed to update profile","error"),L}},[]),_.useCallback(async te=>{console.log(" Changing teacher password...");try{const L=await $s.changePassword(te);if(L.success)return ee("Password changed successfully!","success"),L;throw new Error(L.error||"Failed to change password")}catch(L){throw console.error(" Error changing teacher password:",L),ee("Failed to change password","error"),L}},[]),o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Data..."})]})}):u?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Data Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:u}),l.jsxs("div",{className:"flex space-x-3 justify-center",children:[l.jsx(rt,{variant:"primary",onClick:Z,children:"Retry"}),l.jsx(rt,{variant:"outline",onClick:F,children:"Go Back"})]})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Data"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",E?E.toLocaleString():"Never"," | Version: ",P]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(rt,{variant:"outline",onClick:Z,children:"Refresh Data"}),l.jsx(rt,{variant:"outline",onClick:F,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Teacher Information"}),g?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.name||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.username||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.email||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.role||"N/A"})]})]}):l.jsx("p",{className:"text-gray-500",children:"No teacher information available"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",y.length,")"]}),y.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((te,L)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900",children:te.name}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:te.description||"No description"}),te.classes&&te.classes.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:te.classes.map((K,I)=>l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[K.grade," - ",K.className]},I))})]})]},L))}):l.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Levels"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B().map(te=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:te.name}),l.jsx("div",{className:"grid grid-cols-5 gap-1",children:te.classes.map(L=>l.jsx("button",{className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",onClick:()=>console.log("Class clicked:",L),children:L.classNumber},L.id))})]},te.id))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Statistics"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:y.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Subjects"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-green-600",children:T.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grades"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:b.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Classes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-purple-600",children:P}),l.jsx("p",{className:"text-sm text-gray-500",children:"Data Version"})]})]})]})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:f.map(te=>l.jsx(ou,{type:te.type,message:te.message,onClose:()=>h(L=>L.filter(K=>K.id!==te.id))},te.id))})]})},mje=({onBackToCabinet:e})=>{const t=Wo(),{user:r,isAuthenticated:n}=Os(),{teacherData:s}=o3(),[a,i]=_.useState(!0),[o,c]=_.useState(""),[u,d]=_.useState([]),[f,h]=_.useState([]),[g,x]=_.useState([]),[y,v]=_.useState([]),[T,k]=_.useState(null),[b,C]=_.useState([]),[E,j]=_.useState(!1),[P,A]=_.useState(!1),[M,F]=_.useState(!1),[B,V]=_.useState(!1),[ee,ae]=_.useState(null),[Z,te]=_.useState(!0),[L,K]=_.useState(null);_.useEffect(()=>{Me()},[]),_.useCallback($e=>{console.log(" Rendering existing subjects:",$e),h($e)},[]);const I=_.useCallback(()=>{console.log(" Showing subject selection prompt..."),j(!0),te(!1),H()},[]),H=_.useCallback(async()=>{console.log(" Loading existing subjects...");try{const $e=await $s.getTeacherSubjects();$e.success&&$e.subjects&&$e.subjects.length>0?(console.log(" Existing subjects found:",$e.subjects),U($e.subjects)):(console.log(" No existing subjects found"),v([]))}catch($e){console.error(" Error loading existing subjects:",$e),We("Failed to load existing subjects","error")}},[]),U=_.useCallback($e=>{console.log(" Rendering subject selection:",$e);const St=[];$e.forEach(At=>{At.classes&&Array.isArray(At.classes)&&At.classes.forEach(Bt=>{St.push({id:`${At.subject_id}-${Bt.grade}-${Bt.class}`,subjectId:At.subject_id,subjectName:At.subject,grade:Bt.grade,class:Bt.class,displayText:`${At.subject} - ${Bt.grade}/${Bt.class}`})})}),v(St),console.log(" Processed subjects for selection:",St)},[]),R=_.useCallback(async $e=>{if(console.log(" Saving teacher subjects:",$e),!$e||$e.length===0){We("Please select at least one subject and class combination.","warning");return}try{const St=$e.reduce((Bt,Gt)=>{const or=Bt.find(yr=>yr.subject_id===Gt.subjectId);return or?or.classes.push({grade:Gt.grade,class:Gt.class}):Bt.push({subject_id:Gt.subjectId,classes:[{grade:Gt.grade,class:Gt.class}]}),Bt},[]);console.log(" Transformed data for backend:",St);const At=await $s.saveTeacherSubjects(St);if(At.success)We("Subjects saved successfully!","success"),j(!1),te(!0),K(new Date),await H();else throw new Error(At.error||"Failed to save subjects")}catch(St){console.error(" Error saving subjects:",St),We("Error saving subjects. Please try again.","error")}},[]),z=_.useCallback(()=>{console.log(" Toggling subject dropdown..."),A($e=>!$e),F(!1)},[]),G=_.useCallback(async()=>{console.log(" Loading subjects for dropdown...");try{const $e=await $s.getAllSubjects();if($e.success)x($e.subjects||[]),console.log(" Available subjects loaded:",$e.subjects?.length||0);else throw new Error($e.error||"Failed to load subjects")}catch($e){console.error(" Error loading subjects for dropdown:",$e),We("Failed to load subjects","error")}},[]),X=_.useCallback($e=>{console.log(" Subject selected:",$e);const St=g.find(At=>At.subject_id===parseInt($e));St&&(k(St),F(!0),A(!1),ne())},[g]),ne=_.useCallback(()=>{console.log(" Loading grades and classes...")},[]),q=_.useCallback(($e,St)=>{console.log(" Saving classes for subject:",$e,St);const At={id:`${$e.subject_id}-${Date.now()}`,subjectId:$e.subject_id,subjectName:$e.subject,grade:St.grade,class:St.class,displayText:`${$e.subject} - ${St.grade}/${St.class}`};v(Bt=>[...Bt,At]),k(null),C([]),F(!1),ue(`Added ${$e.subject} for ${St.grade}/${St.class}`)},[]),se=_.useCallback(()=>{console.log(" Resetting subject selection..."),k(null),C([]),A(!1),F(!1)},[]),ue=_.useCallback($e=>{console.log(" Showing message:",$e),We($e,"success")},[]),me=_.useCallback($e=>{console.log(" Showing confirmation modal:",$e),ae($e),V(!0)},[]),Ne=_.useCallback(()=>{console.log(" Hiding confirmation modal..."),V(!1),ae(null)},[]),ce=_.useCallback(()=>{console.log(" Confirming save subjects..."),Ne(),R(y)},[y,R,Ne]),Ue=_.useCallback(()=>{console.log(" Cancelling save subjects..."),Ne()},[Ne]),pe=_.useCallback($e=>{console.log(" Removing subject:",$e),v(St=>St.filter(At=>At.id!==$e)),We("Subject removed","info")},[]);_.useCallback(()=>{console.log(" Showing edit subjects button..."),te(!0)},[]),_.useCallback(()=>{console.log(" Hiding edit subjects button..."),te(!1)},[]);const je=_.useCallback($e=>{console.log(" Generating class buttons for grade:",$e);let St;return $e===1||$e===2?St=["15","16"]:$e===3?St=["15","16"]:$e===4?St=["13","14"]:$e===5||$e===6?St=["13","14"]:St=[],St.map(At=>({id:`${$e}-${At}`,grade:$e,class:At,displayText:`${$e}/${At}`}))},[]);_.useCallback(($e,St)=>{console.log(" Showing class results:",$e,St),t("/teacher/results")},[t]);const We=_.useCallback(($e,St)=>{const At={id:Date.now(),message:$e,type:St,timestamp:new Date};d(Bt=>[...Bt,At]),setTimeout(()=>{d(Bt=>Bt.filter(Gt=>Gt.id!==At.id))},Xm.NOTIFICATION_DURATION)},[]),Me=_.useCallback(async()=>{console.log(" Initializing teacher subjects...");try{if(i(!0),c(""),!n||!r){console.log(" User not authenticated"),c("User not authenticated");return}if(r.role!==Ro.TEACHER){console.error(" Invalid user role for teacher subjects:",r.role),c("Access denied. Teacher role required.");return}await H(),await G(),console.log(" Teacher subjects initialization complete!")}catch($e){console.error(" Error initializing teacher subjects:",$e),c("Failed to initialize teacher subjects")}finally{i(!1)}},[n,r,H,G]),Nt=_.useCallback(()=>{e?e():t("/teacher/cabinet")},[e,t]);return a?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(cn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Subjects..."})]})}):o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Subjects Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:o}),l.jsx(rt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subject Management"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",L?L.toLocaleString():"Never"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[Z&&l.jsx(rt,{variant:"primary",onClick:I,children:"Edit Subjects"}),l.jsx(rt,{variant:"outline",onClick:Nt,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[!E&&l.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Assigned Subjects"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your teaching subjects and class assignments"})]}),l.jsx("div",{className:"flex space-x-3",children:l.jsxs(rt,{variant:"primary",onClick:I,className:"px-6 py-2",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Subjects"]})})]}),f.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(($e,St)=>l.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:$e.subject}),$e.classes&&$e.classes.length>0&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Assigned Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:$e.classes.map((At,Bt)=>l.jsxs("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full",children:["Grade ",At.grade," - Class ",At.class]},Bt))})]})]}),l.jsx("div",{className:"ml-4",children:l.jsx(rt,{variant:"outline",size:"sm",onClick:()=>pe($e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},St))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:l.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned yet"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your teaching subjects and class assignments"}),l.jsxs(rt,{variant:"primary",onClick:I,className:"px-6 py-3",children:[l.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Subject"]})]})]}),E&&l.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Subjects and Classes"}),l.jsx("p",{className:"text-gray-600",children:"Choose the subjects you want to teach and assign them to specific classes"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-lg font-semibold text-gray-900",children:"Select Subject"}),l.jsx("p",{className:"text-gray-600",children:"Choose the subject you want to teach"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs(rt,{variant:"outline",onClick:z,className:"w-full justify-between p-4 h-auto text-left border-2 border-gray-200 hover:border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white rounded-xl shadow-sm",children:[l.jsx("span",{className:"text-gray-900 font-medium",children:T?T.subject:"Select a subject"}),l.jsx("svg",{className:"w-5 h-5 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),P&&l.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map($e=>l.jsx("button",{onClick:()=>X($e.subject_id),className:"w-full px-4 py-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:l.jsx("span",{className:"text-gray-900 font-medium",children:$e.subject})},$e.subject_id))})]})]}),M&&T&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Classes for ",T.subject]}),l.jsx("p",{className:"text-gray-600",children:"Choose which classes you want to teach this subject to"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map($e=>l.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:l.jsx("span",{className:"text-white font-bold text-xs",children:$e})}),l.jsxs("h4",{className:"font-semibold text-gray-900",children:["Grade ",$e]})]}),l.jsx("div",{className:"space-y-3",children:je($e).map(St=>l.jsx(rt,{variant:"outline",size:"sm",onClick:()=>q(T,St),className:"w-full text-sm py-2 px-4 border-green-300 hover:border-green-400 hover:bg-green-100 focus:ring-2 focus:ring-green-500 rounded-lg font-medium",children:St.displayText},St.id))})]},$e))})]}),y.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Selected Subjects"}),l.jsx("p",{className:"text-gray-600",children:"Review your subject and class selections"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map($e=>l.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsx("span",{className:"text-sm font-semibold text-purple-900",children:$e.displayText})}),l.jsx(rt,{variant:"outline",size:"sm",onClick:()=>pe($e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300 focus:ring-2 focus:ring-red-500 rounded-lg",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},$e.id))})]}),l.jsxs("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-100",children:[l.jsx("div",{className:"text-sm text-gray-500",children:y.length>0?`${y.length} subject${y.length>1?"s":""} selected`:"No subjects selected"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs(rt,{variant:"outline",onClick:()=>{j(!1),te(!0),se()},className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 rounded-xl",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),l.jsxs(rt,{variant:"primary",onClick:()=>me({type:"save",data:y}),disabled:y.length===0,className:"px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),M?"Next: Select Classes":"Save Subjects"]})]})]})]})]})]})}),B&&l.jsx(Na,{isOpen:B,onClose:Ne,title:"Confirm Save",variant:"confirmation",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to save ",ee?.data?.length||0," subject assignments?"]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(rt,{variant:"outline",onClick:Ue,children:"Cancel"}),l.jsx(rt,{variant:"primary",onClick:ce,children:"Save"})]})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:u.map($e=>l.jsx(ou,{type:$e.type,message:$e.message,onClose:()=>d(St=>St.filter(At=>At.id!==$e.id))},$e.id))})]})},gje=()=>{const{user:e,role:t,isAuthenticated:r,isLoading:n}=Os(),[s,a]=_.useState("cabinet");return!r||t!=="teacher"?l.jsx(Lp,{to:"/login",replace:!0}):n?l.jsxs("div",{className:"teacher-app-loading",children:[l.jsx(cn,{}),l.jsx("p",{children:"Loading teacher interface..."})]}):l.jsx("div",{className:"teacher-app",children:l.jsxs(KT,{children:[l.jsx(Xs,{path:"/",element:l.jsx(XL,{})}),l.jsx(Xs,{path:"/cabinet",element:l.jsx(XL,{})}),l.jsx(Xs,{path:"/tests",element:l.jsx(JL,{})}),l.jsx(Xs,{path:"/tests/create",element:l.jsx(JL,{})}),l.jsx(Xs,{path:"/data",element:l.jsx(hje,{})}),l.jsx(Xs,{path:"/subjects",element:l.jsx(mje,{})}),l.jsx(Xs,{path:"/results",element:l.jsx(jV,{})}),l.jsx(Xs,{path:"*",element:l.jsx(Lp,{to:"/teacher",replace:!0})})]})})},Qe={container:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",mainContainer:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",header:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg",headerContent:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",headerFlex:"flex justify-between items-center",adminInfo:"flex items-center space-x-4",adminAvatar:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",adminText:"text-lg sm:text-xl md:text-2xl font-bold text-white",adminSubtext:"text-purple-100 text-sm sm:text-base md:text-lg",menuContainer:"relative admin-menu",menuButton:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",menuDropdown:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",menuItem:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 transition-colors",menuItemLogout:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",cardContainer:"bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",cardHeader:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",cardTitle:"text-xl font-bold text-gray-800",cardBody:"p-6",buttonGroup:"flex flex-wrap gap-3 mb-6",buttonPrimary:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-4 py-2 rounded-lg transition-colors duration-200",formContainer:"bg-gray-50 rounded-lg p-6 border border-gray-200",formGrid:"grid grid-cols-1 md:grid-cols-2 gap-4",formGroup:"space-y-2",formLabel:"block text-sm font-medium text-gray-700",formInput:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors duration-200",formCheckbox:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",formActions:"flex space-x-3 pt-4",table:"min-w-full divide-y divide-gray-200",tableHeader:"bg-gray-50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",tableBody:"bg-white divide-y divide-gray-200",tableRow:"hover:bg-gray-50 transition-colors duration-150",tableCell:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",statusActive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",statusInactive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",modalOverlay:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",modalContent:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",modalTitle:"text-xl font-semibold text-gray-900 mb-4",modalActions:"flex space-x-3 pt-4"},pje=()=>{const{user:e,isAdmin:t,logout:r}=Os(),{get:n,post:s,delete:a}=zl(),i=_.useCallback(async()=>{try{h({type:"info",message:"Checking for overdue assignments..."});const ke=await s("/.netlify/functions/check-overdue-assignments",{});if(ke&&ke.success){const jt=ke.overdue_count||0;jt>0?h({type:"success",message:`Found and marked ${jt} overdue assignments as inactive.`}):h({type:"info",message:"No overdue assignments found."})}else h({type:"error",message:ke?.error||"Failed to check assignments"})}catch(ke){h({type:"error",message:"Failed to check assignments"}),console.error("Check overdue assignments error:",ke)}},[s]),[o,c]=_.useState(!1),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1),[y,v]=_.useState(!1),[T,k]=_.useState(!1),[b,C]=_.useState(!1),[E,j]=_.useState(""),[P,A]=_.useState(null),[M,F]=_.useState({}),[B,V]=_.useState(null),[ee,ae]=_.useState({}),[Z,te]=_.useState(null),[L,K]=_.useState({}),[I,H]=_.useState([]),[U,R]=_.useState(""),[z,G]=_.useState(""),[X,ne]=_.useState(""),[q,se]=_.useState("all"),[ue,me]=_.useState(!0),[Ne,ce]=_.useState(!1),[Ue,pe]=_.useState([]),[je,We]=_.useState(""),[Me,Nt]=_.useState(""),[$e,St]=_.useState(""),[At,Bt]=_.useState(new Set),[Gt,or]=_.useState(!1),[yr,it]=_.useState(!1),[Ve,at]=_.useState([]),[pt,nt]=_.useState([]),[kt,Wt]=_.useState([]),[rr,ur]=_.useState([]),[Nr,wr]=_.useState(!1),[ft,Tt]=_.useState(!1),[Ot,he]=_.useState(!1),[Ee,Ae]=_.useState(!1),[Fe,xt]=_.useState({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),[$t,lr]=_.useState({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),[Ke,ct]=_.useState({subject_id:"",subject:"",description:"",is_active:!0}),[yt,Jt]=_.useState({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""});_.useEffect(()=>{console.log(" AdminCabinet component mounted - initializing..."),cr()},[]),_.useEffect(()=>{const ke=jt=>{Gt&&!jt.target.closest(".admin-menu")&&or(!1)};return document.addEventListener("mousedown",ke),()=>{document.removeEventListener("mousedown",ke)}},[Gt]);const cr=_.useCallback(async()=>{try{c(!0),await Ct(),console.log("Admin app initialized")}catch(ke){d("Failed to initialize admin app"),console.error("Admin app initialization error:",ke)}finally{c(!1)}},[]),Rr=_.useCallback(()=>{or(ke=>!ke)},[]),Hr=_.useCallback(()=>{it(!0),or(!1)},[]),He=_.useCallback(()=>{it(!1)},[]),Ct=_.useCallback(async()=>{try{await Promise.all([le(),ve(),ge(),we()])}catch(ke){console.error("Error loading admin data:",ke),d("Failed to load admin data")}},[]),le=_.useCallback(async()=>{try{const ke="admin_users_",jt=Ts(ke);if(jt){console.log(" Using cached users data"),at(jt);return}const Dr=await n("/.netlify/functions/get-all-users");console.log(" Users response:",Dr);const Jr=Dr.users||[];at(Jr),hs(ke,Jr,as.admin_users),console.log(" Users set to state:",Jr)}catch(ke){console.error("Error loading users:",ke)}},[n]),ve=_.useCallback(async()=>{try{const ke="admin_teachers_",jt=Ts(ke);if(jt){console.log(" Using cached teachers data"),nt(jt);return}const Dr=await n("/.netlify/functions/get-all-teachers");console.log(" Teachers response:",Dr);const Jr=Dr.teachers||[];nt(Jr),hs(ke,Jr,as.admin_teachers),console.log(" Teachers set to state:",Jr)}catch(ke){console.error("Error loading teachers:",ke)}},[n]),ge=_.useCallback(async()=>{try{const ke="admin_subjects_",jt=Ts(ke);if(jt){console.log(" Using cached subjects data"),Wt(jt);return}const Dr=await n("/.netlify/functions/get-all-subjects");console.log(" Subjects response:",Dr);const Jr=Dr.subjects||[];Wt(Jr),hs(ke,Jr,as.admin_subjects),console.log(" Subjects set to state:",Jr)}catch(ke){console.error("Error loading subjects:",ke)}},[n]),we=_.useCallback(async()=>{try{const ke="admin_academic_years_",jt=Ts(ke);if(jt){console.log(" Using cached academic years data"),ur(jt);return}const Dr=await cu.loadAcademicCalendar();Dr&&Array.isArray(Dr)?(ur(Dr),hs(ke,Dr,as.admin_academic_years)):console.error("Failed to load academic calendar")}catch(ke){console.error("Error loading academic year:",ke)}},[]),Te=_.useCallback(async()=>{try{if(C(!b),!b){const ke=Date.now(),[jt,Dr]=await Promise.all([n(`/.netlify/functions/get-all-tests?t=${ke}`),n(`/.netlify/functions/get-test-assignments?t=${ke}`)]);console.log(" Active tests response:",jt),console.log(" Assignments response:",Dr);const Jr=jt.tests||[],En=(Dr.assignments||[]).reduce((Vs,li)=>{const un=`${li.test_type}-${li.test_id}`;return Vs[un]||(Vs[un]=[]),Vs[un].push(li),Vs},{}),ls=Jr.map(Vs=>{const li=`${Vs.test_type}-${Vs.test_id}`,un=En[li]||[],gl=un.some(Ie=>Ie.is_active);return{...Vs,is_active:gl,assignments:un}});H(ls),console.log(" All tests with status set to state:",ls)}}catch(ke){console.error("Error loading tests:",ke),h({type:"error",message:"Failed to load tests"})}},[n,b]),Se=_.useCallback((ke,jt)=>{xt(Dr=>({...Dr,[ke]:jt}))},[]),Ze=_.useCallback((ke,jt)=>{lr(Dr=>({...Dr,[ke]:jt}))},[]),ut=_.useCallback((ke,jt)=>{ct(Dr=>({...Dr,[ke]:jt}))},[]);_.useCallback(()=>{console.log(" Testing local storage...");try{const ke={test:"data",timestamp:Date.now()};localStorage.setItem("test",JSON.stringify(ke));const jt=JSON.parse(localStorage.getItem("test"));console.log(" Local storage test successful:",jt),h({type:"success",message:"Local storage test successful"})}catch(ke){console.error(" Local storage test failed:",ke),h({type:"error",message:"Local storage test failed"})}},[]),_.useCallback(()=>{console.log(" Clearing local storage...");try{localStorage.clear(),console.log(" Local storage cleared"),h({type:"success",message:"Local storage cleared"})}catch(ke){console.error(" Error clearing local storage:",ke),h({type:"error",message:"Error clearing local storage"})}},[]),_.useCallback(async()=>{console.log(" Checking teacher subjects...");try{const jt=(await n("/.netlify/functions/get-all-teachers")).data||[];console.log(" Teachers data:",jt),h({type:"success",message:`Found ${jt.length} teachers`})}catch(ke){console.error(" Error checking teacher subjects:",ke),h({type:"error",message:"Error checking teacher subjects"})}},[n]);const Je=_.useCallback(async ke=>{ke.preventDefault();try{console.log(" Submitting user:",Fe);const jt=await s("/.netlify/functions/add-user",Fe);jt.success?(h({type:"success",message:"User added successfully"}),wr(!1),xt({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),le()):h({type:"error",message:jt.message||"Failed to add user"})}catch(jt){console.error(" Error adding user:",jt),h({type:"error",message:"Error adding user"})}},[Fe,s,le]),de=_.useCallback(async ke=>{ke.preventDefault();try{console.log(" Submitting teacher:",$t);const jt=await s("/.netlify/functions/add-teacher",$t);jt.success?(h({type:"success",message:"Teacher added successfully"}),Tt(!1),lr({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),ve()):h({type:"error",message:jt.message||"Failed to add teacher"})}catch(jt){console.error(" Error adding teacher:",jt),h({type:"error",message:"Error adding teacher"})}},[$t,s,ve]),ye=_.useCallback(async ke=>{ke.preventDefault();try{console.log(" Submitting subject:",Ke);const jt=await s("/.netlify/functions/add-subject",Ke);jt.success?(h({type:"success",message:"Subject added successfully"}),he(!1),ct({subject_id:"",subject:"",description:"",is_active:!0}),ge()):h({type:"error",message:jt.message||"Failed to add subject"})}catch(jt){console.error(" Error adding subject:",jt),h({type:"error",message:"Error adding subject"})}},[Ke,s,ge]),Pe=_.useCallback(ke=>{A(ke),F({name:ke.name||"",surname:ke.surname||"",grade:ke.grade||"",class:ke.class||"",student_id:ke.student_id||"",nickname:ke.nickname||"",password:ke.password||"",is_active:ke.is_active!==void 0?ke.is_active:!0})},[]),Be=_.useCallback(async()=>{try{const ke=[];Object.keys(M).forEach(jt=>{jt!=="student_id"&&M[jt]!==P[jt]&&ke.push({fieldName:jt,newValue:M[jt]})});for(const jt of ke)await s("/.netlify/functions/update-user",{userId:P.student_id,fieldName:jt.fieldName,newValue:jt.newValue});h({type:"success",message:"User updated successfully!"}),A(null),F({}),le()}catch{h({type:"error",message:"Failed to update user"})}},[M,P,s,le]),Ye=_.useCallback(async ke=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await s("/.netlify/functions/delete-user",{userId:ke})).success&&(h({type:"success",message:"User deleted successfully!"}),le())}catch{h({type:"error",message:"Failed to delete user"})}},[s,le]),ot=_.useCallback(ke=>{V(ke),ae({teacher_id:ke.teacher_id||"",username:ke.username||"",password:ke.password||"",first_name:ke.first_name||"",last_name:ke.last_name||"",is_active:ke.is_active!==void 0?ke.is_active:!0})},[]),wt=_.useCallback(async()=>{try{const ke=[];Object.keys(ee).forEach(jt=>{jt!=="teacher_id"&&ee[jt]!==B[jt]&&ke.push({fieldName:jt,newValue:ee[jt]})});for(const jt of ke)await s("/.netlify/functions/update-teacher",{teacherId:B.teacher_id,fieldName:jt.fieldName,newValue:jt.newValue});h({type:"success",message:"Teacher updated successfully!"}),V(null),ae({}),ve()}catch{h({type:"error",message:"Failed to update teacher"})}},[ee,B,s,ve]),er=_.useCallback(async ke=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{(await s("/.netlify/functions/delete-teacher",{teacherId:ke})).success&&(h({type:"success",message:"Teacher deleted successfully!"}),ve())}catch{h({type:"error",message:"Failed to delete teacher"})}},[s,ve]),Ft=_.useCallback(ke=>{te(ke),K({subject_id:ke.subject_id||"",subject:ke.subject||""})},[]),Yt=_.useCallback(async()=>{try{const ke=[];Object.keys(L).forEach(jt=>{jt!=="subject_id"&&L[jt]!==Z[jt]&&ke.push({fieldName:jt,newValue:L[jt]})});for(const jt of ke)await s("/.netlify/functions/update-subject",{subjectId:Z.subject_id,fieldName:jt.fieldName,newValue:jt.newValue});h({type:"success",message:"Subject updated successfully!"}),te(null),K({}),ge()}catch{h({type:"error",message:"Failed to update subject"})}},[L,Z,s,ge]),_r=_.useCallback(async ke=>{if(window.confirm("Are you sure you want to delete this subject?"))try{const jt=await s("/.netlify/functions/delete-subject",{subjectId:ke});jt.success?(h({type:"success",message:"Subject deleted successfully!"}),ge()):h({type:"error",message:jt.message||"Failed to delete subject"})}catch{h({type:"error",message:"Failed to delete subject"})}},[s,ge]),Ir=_.useCallback((ke,jt)=>{Jt(Dr=>({...Dr,[ke]:jt}))},[]),ar=_.useCallback(async ke=>{if(ke.preventDefault(),!yt.startDate||!yt.endDate||!yt.teacherId){h({type:"error",message:"Please fill in all required fields (Start Date, End Date, Teacher ID)"});return}if(window.confirm("Are you sure you want to delete all test data for the selected criteria? This action cannot be undone."))try{const jt=await s("/.netlify/functions/delete-test-data",yt);jt.success?(h({type:"success",message:`Successfully deleted ${jt.deletedCount} test records!`}),Ae(!1),Jt({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""})):h({type:"error",message:jt.message||"Failed to delete test data"})}catch{h({type:"error",message:"Failed to delete test data"})}},[yt,s]),Ur=_.useCallback(async(ke,jt,Dr)=>{try{const Jr=Date.now(),Gn=await n(`/.netlify/functions/get-test-assignments?t=${Jr}`);if(Gn.success&&Gn.assignments){const En=Gn.assignments.filter(ls=>ls.test_id===parseInt(ke)&&ls.test_type===jt);if(En.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const ls of En){const Vs=await s("/.netlify/functions/remove-assignment",{teacher_id:Dr,assignment_id:ls.assignment_id,test_type:jt,test_id:ke});if(!Vs.success){h({type:"error",message:`Failed to complete test: ${Vs.message}`});return}}h({type:"success",message:"Test marked as complete successfully!"}),await Te()}else h({type:"error",message:"Failed to get test assignments"})}catch(Jr){console.error("Error completing test:",Jr),h({type:"error",message:"Failed to complete test"})}},[s,n,Te]),Fr=_.useCallback(async(ke,jt,Dr)=>{try{const Jr=Date.now(),Gn=await n(`/.netlify/functions/get-test-assignments?t=${Jr}`);if(Gn.success&&Gn.assignments){const En=Gn.assignments.filter(ls=>ls.test_id===parseInt(ke)&&ls.test_type===jt);if(En.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const ls of En){const Vs=await s("/.netlify/functions/remove-assignment",{teacher_id:Dr,assignment_id:ls.assignment_id,test_type:jt,test_id:ke,mark_active:!0});if(!Vs.success){h({type:"error",message:`Failed to reactivate test: ${Vs.message}`});return}}h({type:"success",message:"Test marked as active successfully!"}),await Te()}else h({type:"error",message:"Failed to get test assignments"})}catch(Jr){console.error("Error reactivating test:",Jr),h({type:"error",message:"Failed to reactivate test"})}},[s,n,Te]),$r=_.useCallback(async(ke=!1)=>{try{const jt=Date.now(),Dr=await n(`/.netlify/functions/get-all-tests?t=${jt}`);console.log(" Actual tests response:",Dr),pe(Dr.tests||[]),console.log(" Actual tests set to state:",Dr.tests||[])}catch(jt){console.error("Error loading actual tests:",jt),h({type:"error",message:"Failed to load tests"})}},[n]),Tr=_.useCallback(async(ke,jt,Dr)=>{try{const Jr=await s("/.netlify/functions/delete-test",{test_id:ke,test_type:jt,teacher_id:Dr});if(Jr.success){h({type:"success",message:"Test deleted successfully!"});const Gn=`${jt}-${ke}-${Dr}`;Bt(En=>{const ls=new Set(En);return ls.delete(Gn),ls}),await $r(!0)}else h({type:"error",message:`Failed to delete test: ${Jr.message}`})}catch(Jr){console.error("Error deleting test:",Jr),h({type:"error",message:"Failed to delete test"})}},[s,$r]),Is=_.useCallback((ke,jt,Dr)=>{const Jr=`${jt}-${ke}-${Dr}`;Bt(Gn=>{const En=new Set(Gn);return En.has(Jr)?En.delete(Jr):En.add(Jr),En})},[]),sn=E?Ve.filter(ke=>ke.grade.toString()===E):Ve,Jn=I.filter(ke=>{const jt=q==="all"?!0:q==="active"?ke.is_active:!ke.is_active,Dr=!U||ke.teacher_id===U,Jr=!z||new Date(ke.created_at)>=new Date(z),Gn=!X||new Date(ke.created_at)<=new Date(X+"T23:59:59");return jt&&Dr&&Jr&&Gn}),Hn=Ue.filter(ke=>{const jt=!je||ke.teacher_id===je,Dr=!Me||new Date(ke.created_at)>=new Date(Me),Jr=!$e||new Date(ke.created_at)<=new Date($e+"T23:59:59");return jt&&Dr&&Jr}),os=_.useCallback(()=>{if(At.size===Hn.length&&Hn.length>0)Bt(new Set);else{const ke=Hn.map(jt=>`${jt.test_type}-${jt.test_id}-${jt.teacher_id}`);Bt(new Set(ke))}},[At.size,Hn]),hn=_.useCallback(async()=>{if(At.size!==0&&window.confirm(`Are you sure you want to delete ${At.size} test(s)?`))try{const ke=Array.from(At).map(jt=>{const[Dr,Jr,Gn]=jt.split("-");return s("/.netlify/functions/delete-test",{test_id:parseInt(Jr),test_type:Dr,teacher_id:Gn})});await Promise.all(ke),h({type:"success",message:`Successfully deleted ${At.size} test(s)!`}),Bt(new Set),await $r(!0)}catch(ke){console.error("Error deleting marked tests:",ke),h({type:"error",message:"Failed to delete some tests. Please try again."})}},[At,s,$r]);return l.jsxs(dt.div,{id:"admin-cabinet-main",className:Qe.container,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(dt.div,{className:Qe.header,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:Qe.headerContent,children:l.jsxs("div",{className:Qe.headerFlex,children:[l.jsxs(dt.div,{className:Qe.adminInfo,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(dt.div,{className:Qe.adminAvatar,initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:l.jsx("span",{className:"text-white font-semibold text-xl",children:e?.username?.charAt(0)||"A"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:Qe.adminText,children:e?.username||"Administrator"}),l.jsx("p",{className:Qe.adminSubtext,children:"Administrator Dashboard"})]})]}),l.jsxs(dt.div,{className:Qe.menuContainer,initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsxs("button",{onClick:Rr,className:Qe.menuButton,style:{zIndex:1e3},children:[l.jsx("span",{className:"hidden sm:inline",children:"Menu"}),l.jsx(dt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:Gt?180:0},transition:{duration:.2},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),l.jsx(il,{children:Gt&&l.jsx(dt.div,{className:Qe.menuDropdown,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:l.jsxs("div",{className:"py-2",children:[l.jsx(dt.button,{onClick:Hr,className:Qe.menuItem,whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),l.jsx(dt.button,{onClick:()=>{Rr(),r()},className:Qe.menuItemLogout,whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),o&&l.jsx(cn,{text:"Loading..."}),u&&l.jsx(ou,{type:"error",message:u,onClose:()=>d(null)}),f&&l.jsx(ou,{type:f.type,message:f.message,onClose:()=>h(null)}),yr&&l.jsx("div",{className:Qe.modalOverlay,children:l.jsxs("div",{className:Qe.modalContent,children:[l.jsx("h2",{className:Qe.modalTitle,children:"Change Password"}),l.jsxs("form",{className:"space-y-4",children:[l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{htmlFor:"currentPassword",className:Qe.formLabel,children:"Current Password"}),l.jsx("input",{type:"password",id:"currentPassword",className:Qe.formInput})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{htmlFor:"newPassword",className:Qe.formLabel,children:"New Password"}),l.jsx("input",{type:"password",id:"newPassword",className:Qe.formInput})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{htmlFor:"confirmPassword",className:Qe.formLabel,children:"Confirm New Password"}),l.jsx("input",{type:"password",id:"confirmPassword",className:Qe.formInput})]}),l.jsxs("div",{className:Qe.modalActions,children:[l.jsx(rt,{type:"button",variant:"secondary",onClick:He,className:"flex-1",children:"Cancel"}),l.jsx(rt,{type:"submit",variant:"primary",className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Change Password"})]})]})]})}),l.jsx(dt.div,{className:Qe.mainContainer,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:l.jsxs(zt,{className:Qe.cardContainer,children:[l.jsx(zt.Header,{className:Qe.cardHeader,children:l.jsx(zt.Title,{className:Qe.cardTitle,children:"User Management"})}),l.jsxs(zt.Body,{className:Qe.cardBody,children:[l.jsxs("div",{className:Qe.buttonGroup,children:[l.jsx(rt,{variant:"primary",onClick:()=>wr(!0),className:Qe.buttonPrimary,children:"Add User"}),l.jsx(rt,{variant:"secondary",onClick:()=>{le(),x(!g)},className:Qe.buttonSecondary,children:g?"Hide Users Table":"Get All Users "})]}),l.jsx(il,{children:Nr&&l.jsxs(dt.div,{className:Qe.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New User"}),l.jsxs("form",{onSubmit:Je,className:"space-y-4",children:[l.jsxs("div",{className:Qe.formGrid,children:[l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Grade"}),l.jsx("input",{type:"text",value:Fe.grade,onChange:ke=>Se("grade",ke.target.value),className:Qe.formInput,placeholder:"Enter grade"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Class"}),l.jsx("input",{type:"text",value:Fe.class,onChange:ke=>Se("class",ke.target.value),className:Qe.formInput,placeholder:"Enter class"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Number"}),l.jsx("input",{type:"text",value:Fe.number,onChange:ke=>Se("number",ke.target.value),className:Qe.formInput,placeholder:"Enter number"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Student ID"}),l.jsx("input",{type:"text",value:Fe.student_id,onChange:ke=>Se("student_id",ke.target.value),className:Qe.formInput,placeholder:"Enter student ID"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Name"}),l.jsx("input",{type:"text",value:Fe.name,onChange:ke=>Se("name",ke.target.value),className:Qe.formInput,placeholder:"Enter name"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Surname"}),l.jsx("input",{type:"text",value:Fe.surname,onChange:ke=>Se("surname",ke.target.value),className:Qe.formInput,placeholder:"Enter surname"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Nickname"}),l.jsx("input",{type:"text",value:Fe.nickname,onChange:ke=>Se("nickname",ke.target.value),className:Qe.formInput,placeholder:"Enter nickname"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Password"}),l.jsx("input",{type:"password",value:Fe.password,onChange:ke=>Se("password",ke.target.value),className:Qe.formInput,placeholder:"Enter password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"userActive",checked:Fe.is_active,onChange:ke=>Se("is_active",ke.target.checked),className:Qe.formCheckbox}),l.jsx("label",{htmlFor:"userActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),l.jsxs("div",{className:Qe.formActions,children:[l.jsx(rt,{type:"button",variant:"secondary",onClick:()=>wr(!1),className:Qe.buttonSecondary,children:"Cancel"}),l.jsx(rt,{type:"submit",variant:"primary",className:Qe.buttonPrimary,children:"Add User"})]})]})]})}),g&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Users (",sn.length," of ",Ve.length,")"]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Filter by Grade:"}),l.jsxs("select",{value:E,onChange:ke=>j(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Grades"}),[...new Set(Ve.map(ke=>ke.grade))].sort().map(ke=>l.jsxs("option",{value:ke,children:["Grade ",ke]},ke))]})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:l.jsxs("table",{className:Qe.table,children:[l.jsx("thead",{className:Qe.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:Qe.tableHeaderCell,children:"Name"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Grade"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Class"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Student ID"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Number"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Nickname"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:Qe.tableBody,children:sn.map((ke,jt)=>l.jsxs("tr",{className:Qe.tableRow,children:[l.jsxs("td",{className:Qe.tableCell,children:[ke.name," ",ke.surname]}),l.jsx("td",{className:Qe.tableCell,children:ke.grade}),l.jsx("td",{className:Qe.tableCell,children:ke.class}),l.jsx("td",{className:Qe.tableCell,children:ke.student_id}),l.jsx("td",{className:Qe.tableCell,children:ke.number}),l.jsx("td",{className:Qe.tableCell,children:ke.nickname}),l.jsx("td",{className:Qe.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>Pe(ke),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>Ye(ke.student_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},ke.id||jt))})]})})})]})]})]})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsxs(zt,{className:Qe.cardContainer,children:[l.jsxs(zt.Header,{className:Qe.cardHeader,children:[l.jsx(zt.Title,{className:Qe.cardTitle,children:"Teacher Management"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-xs whitespace-nowrap",title:"Check and mark overdue assignments (7+ days old) as inactive",children:"Check Overdue Assignments"}),l.jsx(rt,{variant:"primary",onClick:()=>Tt(!0),className:"text-xs whitespace-nowrap",children:"Add Teacher"}),l.jsx(rt,{variant:"secondary",onClick:()=>{ve(),v(!y)},className:"text-xs whitespace-nowrap",children:y?"Hide Teachers Table":"Get All Teachers "})]})]}),l.jsxs(zt.Body,{className:Qe.cardBody,children:[l.jsx(il,{children:ft&&l.jsxs(dt.div,{className:Qe.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Teacher"}),l.jsxs("form",{onSubmit:de,className:"space-y-4",children:[l.jsxs("div",{className:Qe.formGrid,children:[l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Teacher ID"}),l.jsx("input",{type:"text",value:$t.teacher_id,onChange:ke=>Ze("teacher_id",ke.target.value),className:Qe.formInput,placeholder:"Enter teacher ID"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Username"}),l.jsx("input",{type:"text",value:$t.username,onChange:ke=>Ze("username",ke.target.value),className:Qe.formInput,placeholder:"Enter username"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Password"}),l.jsx("input",{type:"password",value:$t.password,onChange:ke=>Ze("password",ke.target.value),className:Qe.formInput,placeholder:"Enter password"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"First Name"}),l.jsx("input",{type:"text",value:$t.first_name,onChange:ke=>Ze("first_name",ke.target.value),className:Qe.formInput,placeholder:"Enter first name"})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Last Name"}),l.jsx("input",{type:"text",value:$t.last_name,onChange:ke=>Ze("last_name",ke.target.value),className:Qe.formInput,placeholder:"Enter last name"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"teacherActive",checked:$t.is_active,onChange:ke=>Ze("is_active",ke.target.checked),className:Qe.formCheckbox}),l.jsx("label",{htmlFor:"teacherActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),l.jsxs("div",{className:Qe.formActions,children:[l.jsx(rt,{type:"button",variant:"secondary",onClick:()=>Tt(!1),className:Qe.buttonSecondary,children:"Cancel"}),l.jsx(rt,{type:"submit",variant:"primary",className:Qe.buttonPrimary,children:"Add Teacher"})]})]})]})}),P&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",value:M.name,onChange:ke=>F({...M,name:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surname"}),l.jsx("input",{type:"text",value:M.surname,onChange:ke=>F({...M,surname:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),l.jsx("input",{type:"number",value:M.grade,onChange:ke=>F({...M,grade:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),l.jsx("input",{type:"number",value:M.class,onChange:ke=>F({...M,class:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),l.jsx("input",{type:"text",value:M.student_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Student ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),l.jsx("input",{type:"text",value:M.nickname,onChange:ke=>F({...M,nickname:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",value:M.password,onChange:ke=>F({...M,password:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"is_active",checked:M.is_active,onChange:ke=>F({...M,is_active:ke.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>{A(null),F({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:Be,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update User"})]})]})}),y&&l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Teachers (",pt.length,")"]})}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:Qe.table,children:[l.jsx("thead",{className:Qe.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:Qe.tableHeaderCell,children:"Teacher ID"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Name"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Username"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Password"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Status"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Created"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:Qe.tableBody,children:pt.map((ke,jt)=>l.jsxs("tr",{className:Qe.tableRow,children:[l.jsx("td",{className:Qe.tableCell,children:ke.teacher_id}),l.jsxs("td",{className:Qe.tableCell,children:[ke.first_name," ",ke.last_name]}),l.jsx("td",{className:Qe.tableCell,children:ke.username}),l.jsx("td",{className:Qe.tableCell,children:ke.password}),l.jsx("td",{className:Qe.tableCell,children:l.jsx("span",{className:ke.is_active?Qe.statusActive:Qe.statusInactive,children:ke.is_active?"Active":"Inactive"})}),l.jsx("td",{className:Qe.tableCell,children:new Date(ke.created_at).toLocaleDateString()}),l.jsx("td",{className:Qe.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>ot(ke),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>er(ke.teacher_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},ke.teacher_id||jt))})]})})})]})]})]})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:l.jsxs(zt,{className:Qe.cardContainer,children:[l.jsx(zt.Header,{className:Qe.cardHeader,children:l.jsx(zt.Title,{className:Qe.cardTitle,children:"Subject Management"})}),l.jsxs(zt.Body,{className:Qe.cardBody,children:[l.jsxs("div",{className:Qe.buttonGroup,children:[l.jsx(rt,{variant:"primary",onClick:()=>he(!0),className:Qe.buttonPrimary,children:"Add Subject"}),l.jsx(rt,{variant:"secondary",onClick:()=>{ge(),k(!T)},className:Qe.buttonSecondary,children:T?"Hide Subjects Table":"Get All Subjects "})]}),l.jsx(il,{children:Ot&&l.jsxs(dt.div,{className:Qe.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Subject"}),l.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Subject Name"}),l.jsx("input",{type:"text",value:Ke.subject,onChange:ke=>ut("subject",ke.target.value),className:Qe.formInput,placeholder:"Enter subject name",required:!0}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subject ID will be automatically generated"})]}),l.jsxs("div",{className:Qe.formActions,children:[l.jsx(rt,{type:"button",variant:"secondary",onClick:()=>he(!1),className:Qe.buttonSecondary,children:"Cancel"}),l.jsx(rt,{type:"submit",variant:"primary",className:Qe.buttonPrimary,children:"Add Subject"})]})]})]})}),B&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Teacher"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher ID"}),l.jsx("input",{type:"text",value:ee.teacher_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teacher ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),l.jsx("input",{type:"text",value:ee.username,onChange:ke=>ae({...ee,username:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",value:ee.password,onChange:ke=>ae({...ee,password:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),l.jsx("input",{type:"text",value:ee.first_name,onChange:ke=>ae({...ee,first_name:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),l.jsx("input",{type:"text",value:ee.last_name,onChange:ke=>ae({...ee,last_name:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"teacher_is_active",checked:ee.is_active,onChange:ke=>ae({...ee,is_active:ke.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsx("label",{htmlFor:"teacher_is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>{V(null),ae({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:wt,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update Teacher"})]})]})}),Z&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Subject"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject ID"}),l.jsx("input",{type:"text",value:L.subject_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name"}),l.jsx("input",{type:"text",value:L.subject,onChange:ke=>K({...L,subject:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>te(null),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:Yt,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Subject"})]})]})}),T&&l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Subjects (",kt.length,")"]})}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:Qe.table,children:[l.jsx("thead",{className:Qe.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:Qe.tableHeaderCell,children:"Subject ID"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Subject Name"}),l.jsx("th",{className:Qe.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:Qe.tableBody,children:kt.map((ke,jt)=>l.jsxs("tr",{className:Qe.tableRow,children:[l.jsx("td",{className:Qe.tableCell,children:ke.subject_id}),l.jsx("td",{className:Qe.tableCell,children:ke.subject}),l.jsx("td",{className:Qe.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>Ft(ke),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>_r(ke.subject_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},ke.subject_id||jt))})]})})})]})]})]})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:l.jsxs(zt,{className:Qe.cardContainer,children:[l.jsx(zt.Header,{className:Qe.cardHeader,children:l.jsx(zt.Title,{className:Qe.cardTitle,children:"Test Data Deletion"})}),l.jsxs(zt.Body,{className:Qe.cardBody,children:[l.jsx("div",{className:Qe.buttonGroup,children:l.jsx(rt,{variant:"danger",onClick:()=>Ae(!0),className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})}),l.jsx(il,{children:Ee&&l.jsxs(dt.div,{className:Qe.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delete Test Data by Date Range"}),l.jsxs("form",{onSubmit:ar,className:"space-y-4",children:[l.jsxs("div",{className:Qe.formGrid,children:[l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Start Date *"}),l.jsx("input",{type:"date",value:yt.startDate,onChange:ke=>Ir("startDate",ke.target.value),className:Qe.formInput,required:!0})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"End Date *"}),l.jsx("input",{type:"date",value:yt.endDate,onChange:ke=>Ir("endDate",ke.target.value),className:Qe.formInput,required:!0})]})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Teacher ID *"}),l.jsxs("select",{value:yt.teacherId,onChange:ke=>Ir("teacherId",ke.target.value),className:Qe.formInput,required:!0,children:[l.jsx("option",{value:"",children:"Select a teacher"}),pt.map(ke=>l.jsxs("option",{value:ke.teacher_id,children:[ke.teacher_id," - ",ke.first_name," ",ke.last_name]},ke.teacher_id))]})]}),l.jsxs("div",{className:Qe.formGroup,children:[l.jsx("label",{className:Qe.formLabel,children:"Subject (Optional)"}),l.jsxs("select",{value:yt.subjectId,onChange:ke=>Ir("subjectId",ke.target.value),className:Qe.formInput,children:[l.jsx("option",{value:"",children:"All subjects"}),kt.map(ke=>l.jsx("option",{value:ke.subject_id,children:ke.subject},ke.subject_id))]})]}),l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action cannot be undone"}),l.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[l.jsx("p",{children:"This will permanently delete:"}),l.jsxs("ul",{className:"list-disc list-inside mt-1",children:[l.jsx("li",{children:"All test records within the date range"}),l.jsx("li",{children:"All test questions and answers"}),l.jsx("li",{children:"All test results and submissions"}),l.jsx("li",{children:"All test assignments"}),l.jsx("li",{children:"Associated Cloudinary images (for matching tests)"})]})]})]})]})}),l.jsxs("div",{className:Qe.formActions,children:[l.jsx(rt,{type:"button",variant:"secondary",onClick:()=>Ae(!1),className:Qe.buttonSecondary,children:"Cancel"}),l.jsx(rt,{type:"submit",variant:"danger",className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})]})]})]})})]})]})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.85,duration:.5},children:l.jsxs(zt,{className:Qe.cardContainer,children:[l.jsx(zt.Header,{className:Qe.cardHeader,children:l.jsx(zt.Title,{className:Qe.cardTitle,children:"Assignments Management"})}),l.jsxs(zt.Body,{className:Qe.cardBody,children:[l.jsx("div",{className:"mb-4",children:l.jsx(rt,{variant:"primary",onClick:Te,className:Qe.buttonPrimary,children:b?"Hide Assignments Table":"Get All Assignments "})}),b&&l.jsx("div",{className:"mb-4",children:l.jsx("p",{className:"text-sm text-gray-600",children:"Showing all tests (Active and Completed)"})}),b&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Assignments (",Jn.length," of ",I.length,")"]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("select",{value:q,onChange:ke=>se(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"completed",children:"Completed"})]}),l.jsxs("select",{value:U,onChange:ke=>R(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Teachers"}),pt.map(ke=>l.jsxs("option",{value:ke.teacher_id,children:[ke.first_name," ",ke.last_name]},ke.teacher_id))]}),l.jsx("input",{type:"date",value:z,onChange:ke=>G(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),l.jsx("input",{type:"date",value:X,onChange:ke=>ne(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:Qe.table,children:[l.jsx("thead",{className:Qe.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:Qe.tableBody,children:Jn.map((ke,jt)=>l.jsxs("tr",{className:Qe.tableRow,children:[l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:ke.test_name,children:ke.test_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:ke.test_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:ke.teacher_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:ke.num_questions}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(ke.created_at).toLocaleDateString()}),l.jsx("td",{className:"px-4 py-3 text-xs",children:l.jsx("div",{className:"flex space-x-2",children:ke.is_active?l.jsx("button",{onClick:()=>Ur(ke.test_id,ke.test_type,ke.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-orange-100 text-orange-700 hover:bg-orange-200",children:"Mark Complete"}):l.jsx("button",{onClick:()=>Fr(ke.test_id,ke.test_type,ke.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Mark Active"})})})]},`${ke.test_type}-${ke.test_id}-${jt}`))})]})})})]})]})]})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:l.jsxs(zt,{className:Qe.cardContainer,children:[l.jsx(zt.Header,{className:Qe.cardHeader,children:l.jsx(zt.Title,{className:Qe.cardTitle,children:"Test Management"})}),l.jsxs(zt.Body,{className:Qe.cardBody,children:[l.jsx("div",{className:"mb-4",children:l.jsx(rt,{variant:"primary",onClick:()=>{Ne||$r(),ce(!Ne)},className:Qe.buttonPrimary,children:Ne?"Hide Tests Table":"Get All Tests "})}),Ne&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Tests (",Hn.length," of ",Ue.length,")"]}),At.size>0&&l.jsxs(rt,{variant:"danger",onClick:hn,className:"text-sm px-4 py-2",children:["Delete Marked (",At.size,")"]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("select",{value:je,onChange:ke=>We(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Teachers"}),pt.map(ke=>l.jsxs("option",{value:ke.teacher_id,children:[ke.first_name," ",ke.last_name]},ke.teacher_id))]}),l.jsx("input",{type:"date",value:Me,onChange:ke=>Nt(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),l.jsx("input",{type:"date",value:$e,onChange:ke=>St(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:Qe.table,children:[l.jsx("thead",{className:Qe.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:l.jsx("input",{type:"checkbox",checked:At.size===Hn.length&&Hn.length>0,onChange:os,className:"cursor-pointer"})}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:Qe.tableBody,children:Hn.map((ke,jt)=>l.jsxs("tr",{className:Qe.tableRow,children:[l.jsx("td",{className:Qe.tableCell,children:l.jsx("input",{type:"checkbox",checked:At.has(`${ke.test_type}-${ke.test_id}-${ke.teacher_id}`),onChange:()=>Is(ke.test_id,ke.test_type,ke.teacher_id),className:"cursor-pointer"})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:ke.test_name,children:ke.test_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:ke.test_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:ke.teacher_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:ke.num_questions}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(ke.created_at).toLocaleDateString()}),l.jsx("td",{className:"px-4 py-3 text-xs",children:l.jsx("div",{className:"flex space-x-2",children:l.jsx("button",{onClick:()=>Tr(ke.test_id,ke.test_type,ke.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})})]},`${ke.test_type}-${ke.test_id}-${jt}`))})]})})})]})]})]})}),l.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:l.jsxs(zt,{className:Qe.cardContainer,children:[l.jsx(zt.Header,{className:Qe.cardHeader,children:l.jsx(zt.Title,{className:Qe.cardTitle,children:"Debug & Testing"})}),l.jsx(zt.Body,{className:Qe.cardBody})]})})]})})]})},xje=()=>{const{isAdmin:e,getCurrentAdminId:t,logout:r}=Os(),{get:n}=zl(),{showNotification:s}=ai();_.useEffect(()=>{a()},[]);const a=_.useCallback(async()=>{if(console.log(" Initializing Admin Application..."),!e()){console.error(" User is not an admin, redirecting to login"),s("Access Denied: You are not an administrator.","error"),r();return}try{i(),await o(),c(),u(),console.log(" Admin Application initialized successfully"),s("Admin dashboard loaded successfully","success")}catch(d){console.error(" Error initializing admin app:",d),s("Failed to initialize admin dashboard","error")}},[e,t,r,s,n]),i=_.useCallback(()=>{console.log(" Initializing global event listeners...");const d=f=>{f.ctrlKey&&f.key==="k"&&(f.preventDefault(),console.log("Admin search shortcut triggered"))};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),o=_.useCallback(async()=>{try{console.log(" Loading admin data...");const[d,f,h,g]=await Promise.allSettled([n("/.netlify/functions/get-all-users"),n("/.netlify/functions/get-all-teachers"),n("/.netlify/functions/get-all-subjects"),cu.loadAcademicCalendar()]);d.status==="fulfilled"&&d.value?.success&&console.log(" Users loaded:",d.value.users?.length||0),f.status==="fulfilled"&&f.value?.success&&console.log(" Teachers loaded:",f.value.teachers?.length||0),h.status==="fulfilled"&&h.value?.success&&console.log(" Subjects loaded:",h.value.subjects?.length||0),g.status==="fulfilled"&&Array.isArray(g.value)&&console.log(" Academic years loaded:",g.value.length||0),console.log(" Admin data loading completed")}catch(d){throw console.error(" Error loading admin data:",d),d}},[n]),c=_.useCallback(()=>{console.log(" Initializing test deletion functionality..."),console.log(" Test deletion functionality initialized")},[]),u=_.useCallback(()=>{console.log(" Exposing admin functions globally..."),window.toggleSubjectsContent=()=>{const f=document.getElementById("allSubjectsContainer"),h=document.querySelector('button[onclick="toggleSubjectsContent()"]');if(!f){console.error(" allSubjectsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Subjects":"Hide Subjects"},window.showAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm");f&&(f.style.display="block")},window.hideAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm"),h=document.getElementById("newSubjectForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm");f&&(f.style.display="block")},window.hideAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm"),h=document.getElementById("newAcademicYearForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleUsersContent=()=>{const f=document.getElementById("allUsersContainer"),h=document.querySelector('button[onclick="toggleUsersContent()"]');if(!f){console.error(" allUsersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Users":"Hide Users"},window.showAddUserForm=()=>{const f=document.getElementById("addUserForm");f&&(f.style.display="block")},window.hideAddUserForm=()=>{const f=document.getElementById("addUserForm"),h=document.getElementById("newUserForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm");f&&(f.style.display="block")},window.hideAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm"),h=document.getElementById("newTeacherForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleTeachersContent=()=>{const f=document.getElementById("allTeachersContainer"),h=document.querySelector('button[onclick="toggleTeachersContent()"]');if(!f){console.error(" allTeachersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Teachers":"Hide Teachers"},window.toggleTestsContent=()=>{const f=document.getElementById("allTestsContainer"),h=document.querySelector('button[onclick="toggleTestsContent()"]');if(!f){console.error(" allTestsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Tests":"Hide Tests"},window.toggleAssignmentsContent=()=>{const f=document.getElementById("allAssignmentsContainer"),h=document.querySelector('button[onclick="toggleAssignmentsContent()"]');if(!f){console.error(" allAssignmentsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Assignments":"Hide Assignments"},window.toggleResultsContent=()=>{const f=document.getElementById("allResultsContainer"),h=document.querySelector('button[onclick="toggleResultsContent()"]');if(!f){console.error(" allResultsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Results":"Hide Results"};const d={};window.toggleSection=f=>{console.log(` toggleSection called with sectionId: ${f}`);const h=Date.now();if(d[f]&&h-d[f]<300){console.log(` Ignoring rapid successive call for ${f}`);return}d[f]=h;const g=document.getElementById(f);if(!g){console.error(` Section with id '${f}' not found!`);return}const x=g.style.display!=="none";g.style.display=x?"none":"block";const y=document.querySelector(`button[onclick="toggleSection('${f}')"]`);y&&(y.textContent=x?"Show":"Hide")},window.addClickListeners=()=>{console.log(" Adding click listeners to section headers...");const f=document.querySelectorAll(".section-header");console.log(` Found ${f.length} section headers`),f.forEach((h,g)=>{const x=h.textContent.trim();if(console.log(` Processing header ${g+1}:`,x),h.dataset.listenerAdded==="true"){console.log(` Skipping header ${x} - listener already added`);return}h.addEventListener("click",()=>{const y=h.dataset.sectionId;y&&window.toggleSection(y)}),h.dataset.listenerAdded="true",console.log(` Added click listener to header: ${x}`)})},window.makeFieldEditable=f=>{const h=f.textContent;f.dataset.field;const g=document.createElement("input");g.type="text",g.value=h,g.className="editable-input";const x=document.createElement("button");x.textContent="Save",x.className="btn-save",x.onclick=()=>window.saveField(f,g,x,y);const y=document.createElement("button");y.textContent="Cancel",y.className="btn-cancel",y.onclick=()=>{f.textContent=h,f.style.display="block",g.remove(),x.remove(),y.remove()},f.style.display="none",f.parentNode.insertBefore(g,f),f.parentNode.insertBefore(x,f),f.parentNode.insertBefore(y,f)},window.saveField=(f,h,g,x)=>{const y=h.value.trim(),v=f.dataset.field,T=f.dataset.recordId;if(!y){alert("Field cannot be empty");return}console.log(`Saving field ${v} for record ${T} with value: ${y}`),f.textContent=y,f.style.display="block",h.remove(),g.remove(),x.remove()},window.showTestDataDeletion=()=>console.log("showTestDataDeletion called"),window.hideTestDataDeletionForm=()=>console.log("hideTestDataDeletionForm called"),window.loadTeacherGradesClasses=()=>console.log("loadTeacherGradesClasses called"),window.checkTeacherSubjects=()=>console.log("checkTeacherSubjects called"),window.initializeTestDeletion=()=>console.log("initializeTestDeletion called"),window.handleAssignmentDeletion=()=>console.log("handleAssignmentDeletion called"),window.handleTestDataDeletion=()=>console.log("handleTestDataDeletion called"),window.getSelectedGradesClasses=()=>console.log("getSelectedGradesClasses called"),window.hideAssignmentDeletionForm=()=>console.log("hideAssignmentDeletionForm called"),window.addKeyboardAccessibility=()=>console.log("addKeyboardAccessibility called"),window.testToggleSection=()=>console.log("testToggleSection called"),window.testAllToggles=()=>console.log("testAllToggles called"),window.manualToggleTest=()=>console.log("manualToggleTest called"),window.addEditableFieldListeners=()=>console.log("addEditableFieldListeners called"),window.deleteTest=()=>console.log("deleteTest called"),window.testLocalStorage=()=>{console.log("Testing localStorage...");try{localStorage.setItem("test","value");const f=localStorage.getItem("test");return localStorage.removeItem("test"),console.log(" localStorage is working"),!0}catch(f){return console.error(" localStorage error:",f),!1}},window.clearAllLocalStorage=()=>{console.log("Clearing all localStorage..."),localStorage.clear(),console.log(" localStorage cleared")},window.exportLocalStorage=()=>{console.log("Exporting localStorage...");const f={};for(let y=0;y<localStorage.length;y++){const v=localStorage.key(y);f[v]=localStorage.getItem(v)}const h=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),g=URL.createObjectURL(h),x=document.createElement("a");x.href=g,x.download="localStorage-backup.json",x.click(),URL.revokeObjectURL(g)},console.log(" Admin functions exposed globally")},[]);return e()?l.jsx(pje,{}):l.jsxs("div",{className:"admin-error",children:[l.jsx("h2",{children:"Access Denied"}),l.jsx("p",{children:"You don't have permission to access the admin dashboard."}),l.jsx("button",{onClick:r,children:"Return to Login"})]})},kk=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:n,isLoading:s}=Os();return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(n)?l.jsx(Lp,{to:"/unauthorized",replace:!0}):e:l.jsx(Lp,{to:"/login",replace:!0})},yje=()=>l.jsxs("div",{className:"unauthorized-page",children:[l.jsx("h1",{children:"Access Denied"}),l.jsx("p",{children:"You don't have permission to access this page."})]}),vje=()=>l.jsx(mB,{children:l.jsx(lH,{children:l.jsx(iH,{children:l.jsx(EQ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsx("div",{className:"app",children:l.jsxs(KT,{children:[l.jsx(Xs,{path:"/privacy",element:l.jsx(Qde,{})}),l.jsx(Xs,{path:"/login",element:l.jsx(Xde,{})}),l.jsx(Xs,{path:"/unauthorized",element:l.jsx(yje,{})}),l.jsx(Xs,{path:"/student/*",element:l.jsx(kk,{allowedRoles:["student"],children:l.jsx(sfe,{})})}),l.jsx(Xs,{path:"/teacher/*",element:l.jsx(kk,{allowedRoles:["teacher"],children:l.jsx(gje,{})})}),l.jsx(Xs,{path:"/admin/*",element:l.jsx(kk,{allowedRoles:["admin"],children:l.jsx(xje,{})})}),l.jsx(Xs,{path:"/",element:l.jsx(Lp,{to:"/login",replace:!0})}),l.jsx(Xs,{path:"*",element:l.jsx(Lp,{to:"/login",replace:!0})})]})})})})})});class wje{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data",this.startIntegrityMonitoring()}startIntegrityMonitoring(){setInterval(()=>{this.performIntegrityCheck().catch(t=>{console.error("Integrity check failed:",t)})},3e4)}async performIntegrityCheck(){try{const t=await ua.get();t&&!this.validateTokenFormat(t)&&(console.warn("Integrity check failed - corrupted token detected"),await this.restoreFromBackup()||(console.warn("No valid backup available - clearing authentication"),await this.clearAuth()))}catch(t){console.error("Error during integrity check:",t)}}async getToken(){const t=await ua.get();return t&&!this.validateTokenFormat(t)?(console.warn("Corrupted token detected in storage - clearing it"),this.clearAuth(),null):t}getTokenSync(){return null}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}async setToken(t){if(!this.validateTokenFormat(t))return console.error("Invalid token format - refusing to store corrupted token"),!1;try{this.decodeToken(t);const r=await ua.get();if(r)try{localStorage.setItem(`${this.tokenKey}_backup`,r)}catch{}const n=await ua.set(t);return n?console.log("Token stored successfully with secure storage (hash verification, retry, write verification)"):console.error("Failed to store token - secure storage failed"),n}catch(r){return console.error("Failed to store token - token is corrupted:",r),!1}}async restoreFromBackup(){try{const t=localStorage.getItem(`${this.tokenKey}_backup`);if(t&&this.validateTokenFormat(t))return console.log("Restoring token from backup"),await ua.set(t)}catch(t){console.warn("Failed to restore from backup",t)}return!1}validateTokenFormat(t){if(!t||typeof t!="string")return console.warn("Token validation failed: not a string"),!1;if(!t.includes("."))return console.warn("Token validation failed: not a JWT format"),!1;const r=t.split(".");if(r.length!==3)return console.warn("Token validation failed: not 3 parts"),!1;for(let n=0;n<r.length;n++)try{atob(r[n].replace(/-/g,"+").replace(/_/g,"/"))}catch{return console.warn(`Token validation failed: part ${n} is not valid base64`),!1}return!0}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){return this.setToken(t)?(this.setUserData({role:r}),localStorage.setItem("accessToken",t),!0):(console.error("Failed to set token - token validation failed"),!1)}async isAuthenticated(){const t=await this.getToken();if(!t)return!1;try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),!1;const r=t.split(".");if(r.length!==3)return console.warn("Invalid token format - not 3 parts"),this.clearAuth(),!1;const n=JSON.parse(atob(r[1])),s=Date.now()/1e3;return n.exp>s}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}async clearAuth(){try{await ua.clear(),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey),localStorage.removeItem(`${this.tokenKey}_backup`)}catch(t){console.error("Failed to clear localStorage - possible corruption:",t),this.forceClearAllAuthData()}}forceClearAllAuthData(){["auth_token","accessToken","userRole","userData","refresh_token","auth_token_backup"].forEach(r=>{try{localStorage.removeItem(r)}catch(n){console.warn(`Failed to remove ${r}:`,n)}})}logout(){this.clearAuth(),window.location.href="/login"}async getAuthHeader(){const t=await this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=await this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401)if(await this.refreshToken()){const o=await this.getToken();return s.Authorization=`Bearer ${o}`,fetch(t,{...r,headers:s})}else throw this.logout(),new Error("Authentication failed");return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json(),s=n.accessToken||n.token;return s?await this.setToken(s)?(n.refreshToken&&this.setRefreshToken(n.refreshToken),!0):(console.error("Failed to store refreshed token"),!1):(console.error("Refresh token response missing accessToken"),!1)}else{const n=await r.json().catch(()=>({}));return console.error("Token refresh failed:",r.status,n.message||"Unknown error"),!1}}catch(r){console.error("Error refreshing token:",r)}return!1}async getAccessToken(){return await this.getToken()}decodeToken(t){try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),null;const r=t.split(".");return r.length!==3?(console.warn("Invalid token format - not 3 parts"),this.clearAuth(),null):JSON.parse(atob(r[1]))}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),null}}async init(){return await this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{await this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}}const ZX=new wje;window.tokenManager=ZX;if(typeof document<"u"){const e=async()=>{await ZX.init()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}class eJ{constructor(){this.currentRole=null,this.loadedFunctions=new Set,this.blockedFunctions=new Set,this.initialized=!1,this.retryCount=0,this.maxRetries=20}initialize(){if(this.initialized){console.log("[DEBUG] Role-based loader already initialized, skipping...");return}if(this.retryCount>=this.maxRetries){console.warn("[DEBUG] Max retries reached, stopping role-based loader initialization");return}if(this.retryCount++,(this.retryCount%5===1||this.retryCount===this.maxRetries)&&console.log(`[DEBUG] Role-based loader initializing... (attempt ${this.retryCount}/${this.maxRetries})`),console.log("[DEBUG] Token manager available:",!!window.tokenManager),window.tokenManager&&window.tokenManager.isAuthenticated()){const t=window.tokenManager.getUserRole();console.log("[DEBUG] Role from token manager:",t),console.log("[DEBUG] Access token exists:",!!window.tokenManager.getAccessToken()),t?(this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess()):(console.log("[DEBUG] No role found, waiting for role to be set..."),setTimeout(()=>this.initialize(),500))}else console.log("[DEBUG] Token manager not available or not authenticated, waiting..."),setTimeout(()=>this.initialize(),500)}setupRoleBasedAccess(){this.currentRole||(console.warn("No role detected, defaulting to student access"),this.currentRole="student");let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check:",r),t=!1}console.log(`Role-based loader initialized for: ${this.currentRole}${t?" (admin)":""}`),this.loadRoleSpecificFunctions(),this.setupRoleBasedUI(),this.replaceBlockedFunctions()}loadRoleSpecificFunctions(){this.currentRole==="teacher"?this.loadTeacherFunctions():this.currentRole==="student"&&this.loadStudentFunctions()}loadTeacherFunctions(){console.log("Teacher functions already available in main script")}loadStudentFunctions(){console.log("Student functions already available in main script")}loadFunction(t,r){console.log(`Function ${t} already available in main script for ${r}`),this.loadedFunctions.add(t)}setupRoleBasedUI(){let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check in UI:",r),t=!1}this.currentRole==="student"&&this.hideTeacherElements(),this.currentRole==="teacher"&&!t&&this.hideStudentElements()}hideTeacherElements(){[".teacher-cabinet",".test-creation-panel",".grade-management-panel",".class-management-panel",'[data-role="teacher"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}hideStudentElements(){[".student-cabinet",".test-taking-panel",".results-viewing-panel",'[data-role="student"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}replaceBlockedFunctions(){this.currentRole==="student"?this.blockTeacherFunctions():this.currentRole==="teacher"&&this.blockStudentFunctions()}blockTeacherFunctions(){Object.entries({createTest:()=>this.showAccessDenied("teacher"),assignTest:()=>this.showAccessDenied("teacher"),gradeTest:()=>this.showAccessDenied("teacher"),manageClasses:()=>this.showAccessDenied("teacher"),viewAllResults:()=>this.showAccessDenied("teacher")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}blockStudentFunctions(){Object.entries({takeTest:()=>this.showAccessDenied("student"),submitTest:()=>this.showAccessDenied("student"),viewMyResults:()=>this.showAccessDenied("student")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}showAccessDenied(t){const r=`Access denied. This function requires ${t} role.`;console.warn(r),typeof showNotification=="function"?showNotification(r,"warning"):alert(r)}isFunctionBlocked(t){return this.blockedFunctions.has(t)}isFunctionLoaded(t){return this.loadedFunctions.has(t)}getCurrentRole(){return this.currentRole}hasRole(t){return this.currentRole===t}reloadRoleAccess(){this.initialize()}setupAccessAfterLogin(){if(console.log("[DEBUG] Setting up role-based access after login..."),console.log("[DEBUG] Role-based loader will now initialize (no more retry loop before login)"),!window.tokenManager)return console.error("[ERROR] Token manager not available during setupAccessAfterLogin"),!1;if(!window.tokenManager.isAuthenticated())return console.error("[ERROR] User not authenticated during setupAccessAfterLogin"),!1;const t=window.tokenManager.getUserRole();return t?(console.log("[DEBUG] Setting role after login:",t),this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess(),console.log("[DEBUG] Role-based access setup completed successfully for role:",t),!0):(console.error("[ERROR] No role found in token during setupAccessAfterLogin"),!1)}}window.roleBasedLoader=new eJ;typeof e4<"u"&&e4.exports&&(e4.exports=eJ);const bje=()=>{const e={schemaVersion:"2.0",enhancedFeatures:!0,newUserStructure:!0,newTestStructure:!0};localStorage.setItem("app_init_data",JSON.stringify(e))},_je=()=>{bje(),PJ.createRoot(document.getElementById("root")).render(l.jsx(zs.StrictMode,{children:l.jsx(vje,{})}))};_je()});export default Sje();
