var vJ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var dje=vJ((Gje,Zb)=>{function qL(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var e4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bS={exports:{}},kx={},_S={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F9;function wJ(){if(F9)return Cn;F9=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function v(W,R,z){this.props=W,this.context=R,this.refs=y,this.updater=z||g}v.prototype.isReactComponent={},v.prototype.setState=function(W,R){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,R,"setState")},v.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function T(){}T.prototype=v.prototype;function k(W,R,z){this.props=W,this.context=R,this.refs=y,this.updater=z||g}var b=k.prototype=new T;b.constructor=k,x(b,v.prototype),b.isPureReactComponent=!0;var E=Array.isArray,N=Object.prototype.hasOwnProperty,P={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function j(W,R,z){var G,Q={},re=null,q=null;if(R!=null)for(G in R.ref!==void 0&&(q=R.ref),R.key!==void 0&&(re=""+R.key),R)N.call(R,G)&&!M.hasOwnProperty(G)&&(Q[G]=R[G]);var se=arguments.length-2;if(se===1)Q.children=z;else if(1<se){for(var ce=Array(se),pe=0;pe<se;pe++)ce[pe]=arguments[pe+2];Q.children=ce}if(W&&W.defaultProps)for(G in se=W.defaultProps,se)Q[G]===void 0&&(Q[G]=se[G]);return{$$typeof:e,type:W,key:re,ref:q,props:Q,_owner:P.current}}function A(W,R){return{$$typeof:e,type:W.type,key:R,ref:W.ref,props:W.props,_owner:W._owner}}function F(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function L(W){var R={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(z){return R[z]})}var V=/\/+/g;function J(W,R){return typeof W=="object"&&W!==null&&W.key!=null?L(""+W.key):R.toString(36)}function ne(W,R,z,G,Q){var re=typeof W;(re==="undefined"||re==="boolean")&&(W=null);var q=!1;if(W===null)q=!0;else switch(re){case"string":case"number":q=!0;break;case"object":switch(W.$$typeof){case e:case t:q=!0}}if(q)return q=W,Q=Q(q),W=G===""?"."+J(q,0):G,E(Q)?(z="",W!=null&&(z=W.replace(V,"$&/")+"/"),ne(Q,R,z,"",function(pe){return pe})):Q!=null&&(F(Q)&&(Q=A(Q,z+(!Q.key||q&&q.key===Q.key?"":(""+Q.key).replace(V,"$&/")+"/")+W)),R.push(Q)),1;if(q=0,G=G===""?".":G+":",E(W))for(var se=0;se<W.length;se++){re=W[se];var ce=G+J(re,se);q+=ne(re,R,z,ce,Q)}else if(ce=h(W),typeof ce=="function")for(W=ce.call(W),se=0;!(re=W.next()).done;)re=re.value,ce=G+J(re,se++),q+=ne(re,R,z,ce,Q);else if(re==="object")throw R=String(W),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return q}function ee(W,R,z){if(W==null)return W;var G=[],Q=0;return ne(W,G,"","",function(re){return R.call(z,re,Q++)}),G}function ie(W){if(W._status===-1){var R=W._result;R=R(),R.then(function(z){(W._status===0||W._status===-1)&&(W._status=1,W._result=z)},function(z){(W._status===0||W._status===-1)&&(W._status=2,W._result=z)}),W._status===-1&&(W._status=0,W._result=R)}if(W._status===1)return W._result.default;throw W._result}var B={current:null},Y={transition:null},I={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:Y,ReactCurrentOwner:P};function H(){throw Error("act(...) is not supported in production builds of React.")}return Cn.Children={map:ee,forEach:function(W,R,z){ee(W,function(){R.apply(this,arguments)},z)},count:function(W){var R=0;return ee(W,function(){R++}),R},toArray:function(W){return ee(W,function(R){return R})||[]},only:function(W){if(!F(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Cn.Component=v,Cn.Fragment=r,Cn.Profiler=s,Cn.PureComponent=k,Cn.StrictMode=n,Cn.Suspense=l,Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,Cn.act=H,Cn.cloneElement=function(W,R,z){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var G=x({},W.props),Q=W.key,re=W.ref,q=W._owner;if(R!=null){if(R.ref!==void 0&&(re=R.ref,q=P.current),R.key!==void 0&&(Q=""+R.key),W.type&&W.type.defaultProps)var se=W.type.defaultProps;for(ce in R)N.call(R,ce)&&!M.hasOwnProperty(ce)&&(G[ce]=R[ce]===void 0&&se!==void 0?se[ce]:R[ce])}var ce=arguments.length-2;if(ce===1)G.children=z;else if(1<ce){se=Array(ce);for(var pe=0;pe<ce;pe++)se[pe]=arguments[pe+2];G.children=se}return{$$typeof:e,type:W.type,key:Q,ref:re,props:G,_owner:q}},Cn.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:a,_context:W},W.Consumer=W},Cn.createElement=j,Cn.createFactory=function(W){var R=j.bind(null,W);return R.type=W,R},Cn.createRef=function(){return{current:null}},Cn.forwardRef=function(W){return{$$typeof:o,render:W}},Cn.isValidElement=F,Cn.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:ie}},Cn.memo=function(W,R){return{$$typeof:u,type:W,compare:R===void 0?null:R}},Cn.startTransition=function(W){var R=Y.transition;Y.transition={};try{W()}finally{Y.transition=R}},Cn.unstable_act=H,Cn.useCallback=function(W,R){return B.current.useCallback(W,R)},Cn.useContext=function(W){return B.current.useContext(W)},Cn.useDebugValue=function(){},Cn.useDeferredValue=function(W){return B.current.useDeferredValue(W)},Cn.useEffect=function(W,R){return B.current.useEffect(W,R)},Cn.useId=function(){return B.current.useId()},Cn.useImperativeHandle=function(W,R,z){return B.current.useImperativeHandle(W,R,z)},Cn.useInsertionEffect=function(W,R){return B.current.useInsertionEffect(W,R)},Cn.useLayoutEffect=function(W,R){return B.current.useLayoutEffect(W,R)},Cn.useMemo=function(W,R){return B.current.useMemo(W,R)},Cn.useReducer=function(W,R,z){return B.current.useReducer(W,R,z)},Cn.useRef=function(W){return B.current.useRef(W)},Cn.useState=function(W){return B.current.useState(W)},Cn.useSyncExternalStore=function(W,R,z){return B.current.useSyncExternalStore(W,R,z)},Cn.useTransition=function(){return B.current.useTransition()},Cn.version="18.3.1",Cn}var D9;function Wm(){return D9||(D9=1,_S.exports=wJ()),_S.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O9;function bJ(){if(O9)return kx;O9=1;var e=Wm(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,l,u){var d,f={},h=null,g=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(g=l.ref);for(d in l)n.call(l,d)&&!a.hasOwnProperty(d)&&(f[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:t,type:o,key:h,ref:g,props:f,_owner:s.current}}return kx.Fragment=r,kx.jsx=i,kx.jsxs=i,kx}var R9;function _J(){return R9||(R9=1,bS.exports=bJ()),bS.exports}var c=_J(),_=Wm();const Ls=Nc(_),KL=qL({__proto__:null,default:Ls},[_]);var Bw={},SS={exports:{}},Zo={},kS={exports:{}},TS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I9;function SJ(){return I9||(I9=1,(function(e){function t(Y,I){var H=Y.length;Y.push(I);e:for(;0<H;){var W=H-1>>>1,R=Y[W];if(0<s(R,I))Y[W]=I,Y[H]=R,H=W;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var I=Y[0],H=Y.pop();if(H!==I){Y[0]=H;e:for(var W=0,R=Y.length,z=R>>>1;W<z;){var G=2*(W+1)-1,Q=Y[G],re=G+1,q=Y[re];if(0>s(Q,H))re<R&&0>s(q,Q)?(Y[W]=q,Y[re]=H,W=re):(Y[W]=Q,Y[G]=H,W=G);else if(re<R&&0>s(q,H))Y[W]=q,Y[re]=H,W=re;else break e}}return I}function s(Y,I){var H=Y.sortIndex-I.sortIndex;return H!==0?H:Y.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,h=3,g=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=Y)n(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=r(u)}}function E(Y){if(y=!1,b(Y),!x)if(r(l)!==null)x=!0,ie(N);else{var I=r(u);I!==null&&B(E,I.startTime-Y)}}function N(Y,I){x=!1,y&&(y=!1,T(j),j=-1),g=!0;var H=h;try{for(b(I),f=r(l);f!==null&&(!(f.expirationTime>I)||Y&&!L());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var R=W(f.expirationTime<=I);I=e.unstable_now(),typeof R=="function"?f.callback=R:f===r(l)&&n(l),b(I)}else n(l);f=r(l)}if(f!==null)var z=!0;else{var G=r(u);G!==null&&B(E,G.startTime-I),z=!1}return z}finally{f=null,h=H,g=!1}}var P=!1,M=null,j=-1,A=5,F=-1;function L(){return!(e.unstable_now()-F<A)}function V(){if(M!==null){var Y=e.unstable_now();F=Y;var I=!0;try{I=M(!0,Y)}finally{I?J():(P=!1,M=null)}}else P=!1}var J;if(typeof k=="function")J=function(){k(V)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ee=ne.port2;ne.port1.onmessage=V,J=function(){ee.postMessage(null)}}else J=function(){v(V,0)};function ie(Y){M=Y,P||(P=!0,J())}function B(Y,I){j=v(function(){Y(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,ie(N))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var H=h;h=I;try{return Y()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,I){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var H=h;h=Y;try{return I()}finally{h=H}},e.unstable_scheduleCallback=function(Y,I,H){var W=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,Y){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=H+R,Y={id:d++,callback:I,priorityLevel:Y,startTime:H,expirationTime:R,sortIndex:-1},H>W?(Y.sortIndex=H,t(u,Y),r(l)===null&&Y===r(u)&&(y?(T(j),j=-1):y=!0,B(E,H-W))):(Y.sortIndex=R,t(l,Y),x||g||(x=!0,ie(N))),Y},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(Y){var I=h;return function(){var H=h;h=I;try{return Y.apply(this,arguments)}finally{h=H}}}})(TS)),TS}var L9;function zT(){return L9||(L9=1,kS.exports=SJ()),kS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B9;function kJ(){if(B9)return Zo;B9=1;var e=Wm(),t=zT();function r(m){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+m,C=1;C<arguments.length;C++)p+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(m,p){i(m,p),i(m+"Capture",p)}function i(m,p){for(s[m]=p,m=0;m<p.length;m++)n.add(p[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function h(m){return l.call(f,m)?!0:l.call(d,m)?!1:u.test(m)?f[m]=!0:(d[m]=!0,!1)}function g(m,p,C,O){if(C!==null&&C.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return O?!1:C!==null?!C.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function x(m,p,C,O){if(p===null||typeof p>"u"||g(m,p,C,O))return!0;if(O)return!1;if(C!==null)switch(C.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function y(m,p,C,O,K,te,me){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=O,this.attributeNamespace=K,this.mustUseProperty=C,this.propertyName=m,this.type=p,this.sanitizeURL=te,this.removeEmptyString=me}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){v[m]=new y(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var p=m[0];v[p]=new y(p,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){v[m]=new y(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){v[m]=new y(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){v[m]=new y(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){v[m]=new y(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){v[m]=new y(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){v[m]=new y(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){v[m]=new y(m,5,!1,m.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function k(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!0,!0)});function b(m,p,C,O){var K=v.hasOwnProperty(p)?v[p]:null;(K!==null?K.type!==0:O||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(x(p,C,K,O)&&(C=null),O||K===null?h(p)&&(C===null?m.removeAttribute(p):m.setAttribute(p,""+C)):K.mustUseProperty?m[K.propertyName]=C===null?K.type===3?!1:"":C:(p=K.attributeName,O=K.attributeNamespace,C===null?m.removeAttribute(p):(K=K.type,C=K===3||K===4&&C===!0?"":""+C,O?m.setAttributeNS(O,p,C):m.setAttribute(p,C))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),L=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),Y=Symbol.iterator;function I(m){return m===null||typeof m!="object"?null:(m=Y&&m[Y]||m["@@iterator"],typeof m=="function"?m:null)}var H=Object.assign,W;function R(m){if(W===void 0)try{throw Error()}catch(C){var p=C.stack.trim().match(/\n( *(at )?)/);W=p&&p[1]||""}return`
`+W+m}var z=!1;function G(m,p){if(!m||z)return"";z=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(_t){var O=_t}Reflect.construct(m,[],p)}else{try{p.call()}catch(_t){O=_t}m.call(p.prototype)}else{try{throw Error()}catch(_t){O=_t}m()}}catch(_t){if(_t&&O&&typeof _t.stack=="string"){for(var K=_t.stack.split(`
`),te=O.stack.split(`
`),me=K.length-1,Oe=te.length-1;1<=me&&0<=Oe&&K[me]!==te[Oe];)Oe--;for(;1<=me&&0<=Oe;me--,Oe--)if(K[me]!==te[Oe]){if(me!==1||Oe!==1)do if(me--,Oe--,0>Oe||K[me]!==te[Oe]){var Ge=`
`+K[me].replace(" at new "," at ");return m.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",m.displayName)),Ge}while(1<=me&&0<=Oe);break}}}finally{z=!1,Error.prepareStackTrace=C}return(m=m?m.displayName||m.name:"")?R(m):""}function Q(m){switch(m.tag){case 5:return R(m.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return m=G(m.type,!1),m;case 11:return m=G(m.type.render,!1),m;case 1:return m=G(m.type,!0),m;default:return""}}function re(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case M:return"Fragment";case P:return"Portal";case A:return"Profiler";case j:return"StrictMode";case J:return"Suspense";case ne:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case L:return(m.displayName||"Context")+".Consumer";case F:return(m._context.displayName||"Context")+".Provider";case V:var p=m.render;return m=m.displayName,m||(m=p.displayName||p.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case ee:return p=m.displayName||null,p!==null?p:re(m.type)||"Memo";case ie:p=m._payload,m=m._init;try{return re(m(p))}catch{}}return null}function q(m){var p=m.type;switch(m.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=p.render,m=m.displayName||m.name||"",p.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(p);case 8:return p===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function se(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function ce(m){var p=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function pe(m){var p=ce(m)?"checked":"value",C=Object.getOwnPropertyDescriptor(m.constructor.prototype,p),O=""+m[p];if(!m.hasOwnProperty(p)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var K=C.get,te=C.set;return Object.defineProperty(m,p,{configurable:!0,get:function(){return K.call(this)},set:function(me){O=""+me,te.call(this,me)}}),Object.defineProperty(m,p,{enumerable:C.enumerable}),{getValue:function(){return O},setValue:function(me){O=""+me},stopTracking:function(){m._valueTracker=null,delete m[p]}}}}function ke(m){m._valueTracker||(m._valueTracker=pe(m))}function le(m){if(!m)return!1;var p=m._valueTracker;if(!p)return!0;var C=p.getValue(),O="";return m&&(O=ce(m)?m.checked?"true":"false":m.value),m=O,m!==C?(p.setValue(m),!0):!1}function ye(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function je(m,p){var C=p.checked;return H({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??m._wrapperState.initialChecked})}function Ne(m,p){var C=p.defaultValue==null?"":p.defaultValue,O=p.checked!=null?p.checked:p.defaultChecked;C=se(p.value!=null?p.value:C),m._wrapperState={initialChecked:O,initialValue:C,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function We(m,p){p=p.checked,p!=null&&b(m,"checked",p,!1)}function $e(m,p){We(m,p);var C=se(p.value),O=p.type;if(C!=null)O==="number"?(C===0&&m.value===""||m.value!=C)&&(m.value=""+C):m.value!==""+C&&(m.value=""+C);else if(O==="submit"||O==="reset"){m.removeAttribute("value");return}p.hasOwnProperty("value")?He(m,p.type,C):p.hasOwnProperty("defaultValue")&&He(m,p.type,se(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(m.defaultChecked=!!p.defaultChecked)}function Nt(m,p,C){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var O=p.type;if(!(O!=="submit"&&O!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+m._wrapperState.initialValue,C||p===m.value||(m.value=p),m.defaultValue=p}C=m.name,C!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,C!==""&&(m.name=C)}function He(m,p,C){(p!=="number"||ye(m.ownerDocument)!==m)&&(C==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+C&&(m.defaultValue=""+C))}var Et=Array.isArray;function Rt(m,p,C,O){if(m=m.options,p){p={};for(var K=0;K<C.length;K++)p["$"+C[K]]=!0;for(C=0;C<m.length;C++)K=p.hasOwnProperty("$"+m[C].value),m[C].selected!==K&&(m[C].selected=K),K&&O&&(m[C].defaultSelected=!0)}else{for(C=""+se(C),p=null,K=0;K<m.length;K++){if(m[K].value===C){m[K].selected=!0,O&&(m[K].defaultSelected=!0);return}p!==null||m[K].disabled||(p=m[K])}p!==null&&(p.selected=!0)}}function Mt(m,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return H({},p,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function ur(m,p){var C=p.value;if(C==null){if(C=p.children,p=p.defaultValue,C!=null){if(p!=null)throw Error(r(92));if(Et(C)){if(1<C.length)throw Error(r(93));C=C[0]}p=C}p==null&&(p=""),C=p}m._wrapperState={initialValue:se(C)}}function wr(m,p){var C=se(p.value),O=se(p.defaultValue);C!=null&&(C=""+C,C!==m.value&&(m.value=C),p.defaultValue==null&&m.defaultValue!==C&&(m.defaultValue=C)),O!=null&&(m.defaultValue=""+O)}function dr(m){var p=m.textContent;p===m._wrapperState.initialValue&&p!==""&&p!==null&&(m.value=p)}function wt(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ke(m,p){return m==null||m==="http://www.w3.org/1999/xhtml"?wt(p):m==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var it,vt=(function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,C,O,K){MSApp.execUnsafeLocalFunction(function(){return m(p,C,O,K)})}:m})(function(m,p){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=p;else{for(it=it||document.createElement("div"),it.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=it.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;p.firstChild;)m.appendChild(p.firstChild)}});function st(m,p){if(p){var C=m.firstChild;if(C&&C===m.lastChild&&C.nodeType===3){C.nodeValue=p;return}}m.textContent=p}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ot=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(m){ot.forEach(function(p){p=p+m.charAt(0).toUpperCase()+m.substring(1),qe[p]=qe[m]})});function kt(m,p,C){return p==null||typeof p=="boolean"||p===""?"":C||typeof p!="number"||p===0||qe.hasOwnProperty(m)&&qe[m]?(""+p).trim():p+"px"}function Ut(m,p){m=m.style;for(var C in p)if(p.hasOwnProperty(C)){var O=C.indexOf("--")===0,K=kt(C,p[C],O);C==="float"&&(C="cssFloat"),O?m.setProperty(C,K):m[C]=K}}var Qt=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gt(m,p){if(p){if(Qt[m]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,m));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function Zt(m,p){if(m.indexOf("-")===-1)return typeof p.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ir=null;function kr(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var ve=null,Pe=null,Me=null;function ze(m){if(m=_h(m)){if(typeof ve!="function")throw Error(r(280));var p=m.stateNode;p&&(p=Pa(p),ve(m.stateNode,m.type,p))}}function At(m){Pe?Me?Me.push(m):Me=[m]:Pe=m}function Kt(){if(Pe){var m=Pe,p=Me;if(Me=Pe=null,ze(m),p)for(m=0;m<p.length;m++)ze(p[m])}}function hr(m,p){return m(p)}function Ye(){}var ft=!1;function lt(m,p,C){if(ft)return m(p,C);ft=!0;try{return hr(m,p,C)}finally{ft=!1,(Pe!==null||Me!==null)&&(Ye(),Kt())}}function Wt(m,p){var C=m.stateNode;if(C===null)return null;var O=Pa(C);if(O===null)return null;C=O[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(m=m.type,O=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!O;break e;default:m=!1}if(m)return null;if(C&&typeof C!="function")throw Error(r(231,p,typeof C));return C}var Fe=!1;if(o)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{Fe=!1}function yt(m,p,C,O,K,te,me,Oe,Ge){var _t=Array.prototype.slice.call(arguments,3);try{p.apply(C,_t)}catch(Jt){this.onError(Jt)}}var zt=!1,or=null,de=!1,_e=null,ge={onError:function(m){zt=!0,or=m}};function be(m,p,C,O,K,te,me,Oe,Ge){zt=!1,or=null,yt.apply(ge,arguments)}function Ce(m,p,C,O,K,te,me,Oe,Ge){if(be.apply(this,arguments),zt){if(zt){var _t=or;zt=!1,or=null}else throw Error(r(198));de||(de=!0,_e=_t)}}function Ee(m){var p=m,C=m;if(m.alternate)for(;p.return;)p=p.return;else{m=p;do p=m,(p.flags&4098)!==0&&(C=p.return),m=p.return;while(m)}return p.tag===3?C:null}function rt(m){if(m.tag===13){var p=m.memoizedState;if(p===null&&(m=m.alternate,m!==null&&(p=m.memoizedState)),p!==null)return p.dehydrated}return null}function bt(m){if(Ee(m)!==m)throw Error(r(188))}function at(m){var p=m.alternate;if(!p){if(p=Ee(m),p===null)throw Error(r(188));return p!==m?null:m}for(var C=m,O=p;;){var K=C.return;if(K===null)break;var te=K.alternate;if(te===null){if(O=K.return,O!==null){C=O;continue}break}if(K.child===te.child){for(te=K.child;te;){if(te===C)return bt(K),m;if(te===O)return bt(K),p;te=te.sibling}throw Error(r(188))}if(C.return!==O.return)C=K,O=te;else{for(var me=!1,Oe=K.child;Oe;){if(Oe===C){me=!0,C=K,O=te;break}if(Oe===O){me=!0,O=K,C=te;break}Oe=Oe.sibling}if(!me){for(Oe=te.child;Oe;){if(Oe===C){me=!0,C=te,O=K;break}if(Oe===O){me=!0,O=te,C=K;break}Oe=Oe.sibling}if(!me)throw Error(r(189))}}if(C.alternate!==O)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?m:p}function ue(m){return m=at(m),m!==null?he(m):null}function he(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var p=he(m);if(p!==null)return p;m=m.sibling}return null}var Ae=t.unstable_scheduleCallback,Ie=t.unstable_cancelCallback,Ze=t.unstable_shouldYield,mt=t.unstable_requestPaint,Tt=t.unstable_now,lr=t.unstable_getCurrentPriorityLevel,Ft=t.unstable_ImmediatePriority,Ct=t.unstable_UserBlockingPriority,fr=t.unstable_NormalPriority,Er=t.unstable_LowPriority,Fr=t.unstable_IdlePriority,on=null,ln=null;function Yr(m){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(on,m,void 0,(m.current.flags&128)===128)}catch{}}var Pr=Math.clz32?Math.clz32:Tn,as=Math.log,Kr=Math.LN2;function Tn(m){return m>>>=0,m===0?32:31-(as(m)/Kr|0)|0}var Ds=64,oi=4194304;function Kn(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Se(m,p){var C=m.pendingLanes;if(C===0)return 0;var O=0,K=m.suspendedLanes,te=m.pingedLanes,me=C&268435455;if(me!==0){var Oe=me&~K;Oe!==0?O=Kn(Oe):(te&=me,te!==0&&(O=Kn(te)))}else me=C&~K,me!==0?O=Kn(me):te!==0&&(O=Kn(te));if(O===0)return 0;if(p!==0&&p!==O&&(p&K)===0&&(K=O&-O,te=p&-p,K>=te||K===16&&(te&4194240)!==0))return p;if((O&4)!==0&&(O|=C&16),p=m.entangledLanes,p!==0)for(m=m.entanglements,p&=O;0<p;)C=31-Pr(p),K=1<<C,O|=m[C],p&=~K;return O}function Pt(m,p){switch(m){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rr(m,p){for(var C=m.suspendedLanes,O=m.pingedLanes,K=m.expirationTimes,te=m.pendingLanes;0<te;){var me=31-Pr(te),Oe=1<<me,Ge=K[me];Ge===-1?((Oe&C)===0||(Oe&O)!==0)&&(K[me]=Pt(Oe,p)):Ge<=p&&(m.expiredLanes|=Oe),te&=~Oe}}function Xr(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Hn(){var m=Ds;return Ds<<=1,(Ds&4194240)===0&&(Ds=64),m}function Nn(m){for(var p=[],C=0;31>C;C++)p.push(m);return p}function is(m,p,C){m.pendingLanes|=p,p!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,p=31-Pr(p),m[p]=C}function Hs(m,p){var C=m.pendingLanes&~p;m.pendingLanes=p,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=p,m.mutableReadLanes&=p,m.entangledLanes&=p,p=m.entanglements;var O=m.eventTimes;for(m=m.expirationTimes;0<C;){var K=31-Pr(C),te=1<<K;p[K]=0,O[K]=-1,m[K]=-1,C&=~te}}function li(m,p){var C=m.entangledLanes|=p;for(m=m.entanglements;C;){var O=31-Pr(C),K=1<<O;K&p|m[O]&p&&(m[O]|=p),C&=~K}}var cn=0;function gl(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var Le,Dt,De,Ve,$t,gt=!1,br=[],jt=null,Ur=null,Pn=null,Ue=new Map,pr=new Map,sr=[],fs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gn(m,p){switch(m){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Ue.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(p.pointerId)}}function nn(m,p,C,O,K,te){return m===null||m.nativeEvent!==te?(m={blockedOn:p,domEventName:C,eventSystemFlags:O,nativeEvent:te,targetContainers:[K]},p!==null&&(p=_h(p),p!==null&&Dt(p)),m):(m.eventSystemFlags|=O,p=m.targetContainers,K!==null&&p.indexOf(K)===-1&&p.push(K),m)}function pn(m,p,C,O,K){switch(p){case"focusin":return jt=nn(jt,m,p,C,O,K),!0;case"dragenter":return Ur=nn(Ur,m,p,C,O,K),!0;case"mouseover":return Pn=nn(Pn,m,p,C,O,K),!0;case"pointerover":var te=K.pointerId;return Ue.set(te,nn(Ue.get(te)||null,m,p,C,O,K)),!0;case"gotpointercapture":return te=K.pointerId,pr.set(te,nn(pr.get(te)||null,m,p,C,O,K)),!0}return!1}function bn(m){var p=bu(m.target);if(p!==null){var C=Ee(p);if(C!==null){if(p=C.tag,p===13){if(p=rt(C),p!==null){m.blockedOn=p,$t(m.priority,function(){De(C)});return}}else if(p===3&&C.stateNode.current.memoizedState.isDehydrated){m.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Hl(m){if(m.blockedOn!==null)return!1;for(var p=m.targetContainers;0<p.length;){var C=ig(m.domEventName,m.eventSystemFlags,p[0],m.nativeEvent);if(C===null){C=m.nativeEvent;var O=new C.constructor(C.type,C);ir=O,C.target.dispatchEvent(O),ir=null}else return p=_h(C),p!==null&&Dt(p),m.blockedOn=C,!1;p.shift()}return!0}function Ni(m,p,C){Hl(m)&&C.delete(p)}function lh(){gt=!1,jt!==null&&Hl(jt)&&(jt=null),Ur!==null&&Hl(Ur)&&(Ur=null),Pn!==null&&Hl(Pn)&&(Pn=null),Ue.forEach(Ni),pr.forEach(Ni)}function fu(m,p){m.blockedOn===p&&(m.blockedOn=null,gt||(gt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lh)))}function Zi(m){function p(K){return fu(K,m)}if(0<br.length){fu(br[0],m);for(var C=1;C<br.length;C++){var O=br[C];O.blockedOn===m&&(O.blockedOn=null)}}for(jt!==null&&fu(jt,m),Ur!==null&&fu(Ur,m),Pn!==null&&fu(Pn,m),Ue.forEach(p),pr.forEach(p),C=0;C<sr.length;C++)O=sr[C],O.blockedOn===m&&(O.blockedOn=null);for(;0<sr.length&&(C=sr[0],C.blockedOn===null);)bn(C),C.blockedOn===null&&sr.shift()}var A0=E.ReactCurrentBatchConfig,ag=!0;function pl(m,p,C,O){var K=cn,te=A0.transition;A0.transition=null;try{cn=1,j0(m,p,C,O)}finally{cn=K,A0.transition=te}}function Fc(m,p,C,O){var K=cn,te=A0.transition;A0.transition=null;try{cn=4,j0(m,p,C,O)}finally{cn=K,A0.transition=te}}function j0(m,p,C,O){if(ag){var K=ig(m,p,C,O);if(K===null)_g(m,p,O,P0,C),gn(m,O);else if(pn(K,m,p,C,O))O.stopPropagation();else if(gn(m,O),p&4&&-1<fs.indexOf(m)){for(;K!==null;){var te=_h(K);if(te!==null&&Le(te),te=ig(m,p,C,O),te===null&&_g(m,p,O,P0,C),te===K)break;K=te}K!==null&&O.stopPropagation()}else _g(m,p,O,null,C)}}var P0=null;function ig(m,p,C,O){if(P0=null,m=kr(O),m=bu(m),m!==null)if(p=Ee(m),p===null)m=null;else if(C=p.tag,C===13){if(m=rt(p),m!==null)return m;m=null}else if(C===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;m=null}else p!==m&&(m=null);return P0=m,null}function W2(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lr()){case Ft:return 1;case Ct:return 4;case fr:case Er:return 16;case Fr:return 536870912;default:return 16}default:return 16}}var Ha=null,hu=null,Dc=null;function ch(){if(Dc)return Dc;var m,p=hu,C=p.length,O,K="value"in Ha?Ha.value:Ha.textContent,te=K.length;for(m=0;m<C&&p[m]===K[m];m++);var me=C-m;for(O=1;O<=me&&p[C-O]===K[te-O];O++);return Dc=K.slice(m,1<O?1-O:void 0)}function od(m){var p=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&p===13&&(m=13)):m=p,m===10&&(m=13),32<=m||m===13?m:0}function Ai(){return!0}function bo(){return!1}function ga(m){function p(C,O,K,te,me){this._reactName=C,this._targetInst=K,this.type=O,this.nativeEvent=te,this.target=me,this.currentTarget=null;for(var Oe in m)m.hasOwnProperty(Oe)&&(C=m[Oe],this[Oe]=C?C(te):te[Oe]);return this.isDefaultPrevented=(te.defaultPrevented!=null?te.defaultPrevented:te.returnValue===!1)?Ai:bo,this.isPropagationStopped=bo,this}return H(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),p}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=ga(eo),yl=H({},eo,{view:0,detail:0}),H2=ga(yl),uh,dh,Ga,ji=H({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cd,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Ga&&(Ga&&m.type==="mousemove"?(uh=m.screenX-Ga.screenX,dh=m.screenY-Ga.screenY):dh=uh=0,Ga=m),uh)},movementY:function(m){return"movementY"in m?m.movementY:dh}}),hs=ga(ji),fh=H({},ji,{dataTransfer:0}),vl=ga(fh),G2=H({},yl,{relatedTarget:0}),og=ga(G2),O1=H({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),R1=ga(O1),V2=H({},eo,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),lg=ga(V2),q2=H({},eo,{data:0}),ld=ga(q2),I1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q3(m){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(m):(m=cg[m])?!!p[m]:!1}function cd(){return q3}var ug=H({},yl,{key:function(m){if(m.key){var p=I1[m.key]||m.key;if(p!=="Unidentified")return p}return m.type==="keypress"?(m=od(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?V3[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cd,charCode:function(m){return m.type==="keypress"?od(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?od(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),K2=ga(ug),Y2=H({},ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ud=ga(Y2),X2=H({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cd}),dg=ga(X2),fg=H({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=ga(fg),L1=H({},ji,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),B1=ga(L1),J2=[9,13,27,32],hh=o&&"CompositionEvent"in window,dd=null;o&&"documentMode"in document&&(dd=document.documentMode);var F0=o&&"TextEvent"in window&&!dd,_o=o&&(!hh||dd&&8<dd&&11>=dd),mu=" ",hg=!1;function $1(m,p){switch(m){case"keyup":return J2.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wl(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var So=!1;function z1(m,p){switch(m){case"compositionend":return wl(p);case"keypress":return p.which!==32?null:(hg=!0,mu);case"textInput":return m=p.data,m===mu&&hg?null:m;default:return null}}function Q2(m,p){if(So)return m==="compositionend"||!hh&&$1(m,p)?(m=ch(),Dc=hu=Ha=null,So=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return _o&&p.locale!=="ko"?null:p.data;default:return null}}var Oc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(m){var p=m&&m.nodeName&&m.nodeName.toLowerCase();return p==="input"?!!Oc[m.type]:p==="textarea"}function mh(m,p,C,O){At(O),p=Sg(p,"onChange"),0<p.length&&(C=new xl("onChange","change",null,C,O),m.push({event:C,listeners:p}))}var D0=null,gu=null;function Z2(m){Q1(m,0)}function pu(m){var p=xa(m);if(le(p))return m}function Vo(m,p){if(m==="change")return p}var O0=!1;if(o){var xu;if(o){var qo="oninput"in document;if(!qo){var mg=document.createElement("div");mg.setAttribute("oninput","return;"),qo=typeof mg.oninput=="function"}xu=qo}else xu=!1;O0=xu&&(!document.documentMode||9<document.documentMode)}function fd(){D0&&(D0.detachEvent("onpropertychange",U1),gu=D0=null)}function U1(m){if(m.propertyName==="value"&&pu(gu)){var p=[];mh(p,gu,m,kr(m)),lt(Z2,p)}}function W1(m,p,C){m==="focusin"?(fd(),D0=p,gu=C,D0.attachEvent("onpropertychange",U1)):m==="focusout"&&fd()}function Ss(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return pu(gu)}function gg(m,p){if(m==="click")return pu(p)}function H1(m,p){if(m==="input"||m==="change")return pu(p)}function G1(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var to=typeof Object.is=="function"?Object.is:G1;function hd(m,p){if(to(m,p))return!0;if(typeof m!="object"||m===null||typeof p!="object"||p===null)return!1;var C=Object.keys(m),O=Object.keys(p);if(C.length!==O.length)return!1;for(O=0;O<C.length;O++){var K=C[O];if(!l.call(p,K)||!to(m[K],p[K]))return!1}return!0}function yu(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function ys(m,p){var C=yu(m);m=0;for(var O;C;){if(C.nodeType===3){if(O=m+C.textContent.length,m<=p&&O>=p)return{node:C,offset:p-m};m=O}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=yu(C)}}function Zs(m,p){return m&&p?m===p?!0:m&&m.nodeType===3?!1:p&&p.nodeType===3?Zs(m,p.parentNode):"contains"in m?m.contains(p):m.compareDocumentPosition?!!(m.compareDocumentPosition(p)&16):!1:!1}function pa(){for(var m=window,p=ye();p instanceof m.HTMLIFrameElement;){try{var C=typeof p.contentWindow.location.href=="string"}catch{C=!1}if(C)m=p.contentWindow;else break;p=ye(m.document)}return p}function R0(m){var p=m&&m.nodeName&&m.nodeName.toLowerCase();return p&&(p==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||p==="textarea"||m.contentEditable==="true")}function gh(m){var p=pa(),C=m.focusedElem,O=m.selectionRange;if(p!==C&&C&&C.ownerDocument&&Zs(C.ownerDocument.documentElement,C)){if(O!==null&&R0(C)){if(p=O.start,m=O.end,m===void 0&&(m=p),"selectionStart"in C)C.selectionStart=p,C.selectionEnd=Math.min(m,C.value.length);else if(m=(p=C.ownerDocument||document)&&p.defaultView||window,m.getSelection){m=m.getSelection();var K=C.textContent.length,te=Math.min(O.start,K);O=O.end===void 0?te:Math.min(O.end,K),!m.extend&&te>O&&(K=O,O=te,te=K),K=ys(C,te);var me=ys(C,O);K&&me&&(m.rangeCount!==1||m.anchorNode!==K.node||m.anchorOffset!==K.offset||m.focusNode!==me.node||m.focusOffset!==me.offset)&&(p=p.createRange(),p.setStart(K.node,K.offset),m.removeAllRanges(),te>O?(m.addRange(p),m.extend(me.node,me.offset)):(p.setEnd(me.node,me.offset),m.addRange(p)))}}for(p=[],m=C;m=m.parentNode;)m.nodeType===1&&p.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<p.length;C++)m=p[C],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var ph=o&&"documentMode"in document&&11>=document.documentMode,I0=null,ja=null,md=null,xh=!1;function pg(m,p,C){var O=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;xh||I0==null||I0!==ye(O)||(O=I0,"selectionStart"in O&&R0(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),md&&hd(md,O)||(md=O,O=Sg(ja,"onSelect"),0<O.length&&(p=new xl("onSelect","select",null,p,C),m.push({event:p,listeners:O}),p.target=I0)))}function ko(m,p){var C={};return C[m.toLowerCase()]=p.toLowerCase(),C["Webkit"+m]="webkit"+p,C["Moz"+m]="moz"+p,C}var Va={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionend:ko("Transition","TransitionEnd")},gd={},xg={};o&&(xg=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function L0(m){if(gd[m])return gd[m];if(!Va[m])return m;var p=Va[m],C;for(C in p)if(p.hasOwnProperty(C)&&C in xg)return gd[m]=p[C];return m}var V1=L0("animationend"),q1=L0("animationiteration"),K1=L0("animationstart"),Y1=L0("transitionend"),X1=new Map,J1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ic(m,p){X1.set(m,p),a(p,[m])}for(var yg=0;yg<J1.length;yg++){var pd=J1[yg],ew=pd.toLowerCase(),vg=pd[0].toUpperCase()+pd.slice(1);Ic(ew,"on"+vg)}Ic(V1,"onAnimationEnd"),Ic(q1,"onAnimationIteration"),Ic(K1,"onAnimationStart"),Ic("dblclick","onDoubleClick"),Ic("focusin","onFocus"),Ic("focusout","onBlur"),Ic(Y1,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tw=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function wg(m,p,C){var O=m.type||"unknown-event";m.currentTarget=C,Ce(O,p,void 0,m),m.currentTarget=null}function Q1(m,p){p=(p&4)!==0;for(var C=0;C<m.length;C++){var O=m[C],K=O.event;O=O.listeners;e:{var te=void 0;if(p)for(var me=O.length-1;0<=me;me--){var Oe=O[me],Ge=Oe.instance,_t=Oe.currentTarget;if(Oe=Oe.listener,Ge!==te&&K.isPropagationStopped())break e;wg(K,Oe,_t),te=Ge}else for(me=0;me<O.length;me++){if(Oe=O[me],Ge=Oe.instance,_t=Oe.currentTarget,Oe=Oe.listener,Ge!==te&&K.isPropagationStopped())break e;wg(K,Oe,_t),te=Ge}}}if(de)throw m=_e,de=!1,_e=null,m}function os(m,p){var C=p[Tg];C===void 0&&(C=p[Tg]=new Set);var O=m+"__bubble";C.has(O)||(Z1(p,m,2,!1),C.add(O))}function bg(m,p,C){var O=0;p&&(O|=4),Z1(C,m,O,p)}var yh="_reactListening"+Math.random().toString(36).slice(2);function xd(m){if(!m[yh]){m[yh]=!0,n.forEach(function(C){C!=="selectionchange"&&(tw.has(C)||bg(C,!1,m),bg(C,!0,m))});var p=m.nodeType===9?m:m.ownerDocument;p===null||p[yh]||(p[yh]=!0,bg("selectionchange",!1,p))}}function Z1(m,p,C,O){switch(W2(p)){case 1:var K=pl;break;case 4:K=Fc;break;default:K=j0}C=K.bind(null,p,C,m),K=void 0,!Fe||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(K=!0),O?K!==void 0?m.addEventListener(p,C,{capture:!0,passive:K}):m.addEventListener(p,C,!0):K!==void 0?m.addEventListener(p,C,{passive:K}):m.addEventListener(p,C,!1)}function _g(m,p,C,O,K){var te=O;if((p&1)===0&&(p&2)===0&&O!==null)e:for(;;){if(O===null)return;var me=O.tag;if(me===3||me===4){var Oe=O.stateNode.containerInfo;if(Oe===K||Oe.nodeType===8&&Oe.parentNode===K)break;if(me===4)for(me=O.return;me!==null;){var Ge=me.tag;if((Ge===3||Ge===4)&&(Ge=me.stateNode.containerInfo,Ge===K||Ge.nodeType===8&&Ge.parentNode===K))return;me=me.return}for(;Oe!==null;){if(me=bu(Oe),me===null)return;if(Ge=me.tag,Ge===5||Ge===6){O=te=me;continue e}Oe=Oe.parentNode}}O=O.return}lt(function(){var _t=te,Jt=kr(C),tr=[];e:{var Yt=X1.get(m);if(Yt!==void 0){var Nr=xl,Ir=m;switch(m){case"keypress":if(od(C)===0)break e;case"keydown":case"keyup":Nr=K2;break;case"focusin":Ir="focus",Nr=og;break;case"focusout":Ir="blur",Nr=og;break;case"beforeblur":case"afterblur":Nr=og;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nr=hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nr=vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nr=dg;break;case V1:case q1:case K1:Nr=R1;break;case Y1:Nr=M0;break;case"scroll":Nr=H2;break;case"wheel":Nr=B1;break;case"copy":case"cut":case"paste":Nr=lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nr=ud}var Lr=(p&4)!==0,ba=!Lr&&m==="scroll",ct=Lr?Yt!==null?Yt+"Capture":null:Yt;Lr=[];for(var Qe=_t,ht;Qe!==null;){ht=Qe;var cr=ht.stateNode;if(ht.tag===5&&cr!==null&&(ht=cr,ct!==null&&(cr=Wt(Qe,ct),cr!=null&&Lr.push(B0(Qe,cr,ht)))),ba)break;Qe=Qe.return}0<Lr.length&&(Yt=new Nr(Yt,Ir,null,C,Jt),tr.push({event:Yt,listeners:Lr}))}}if((p&7)===0){e:{if(Yt=m==="mouseover"||m==="pointerover",Nr=m==="mouseout"||m==="pointerout",Yt&&C!==ir&&(Ir=C.relatedTarget||C.fromElement)&&(bu(Ir)||Ir[Vl]))break e;if((Nr||Yt)&&(Yt=Jt.window===Jt?Jt:(Yt=Jt.ownerDocument)?Yt.defaultView||Yt.parentWindow:window,Nr?(Ir=C.relatedTarget||C.toElement,Nr=_t,Ir=Ir?bu(Ir):null,Ir!==null&&(ba=Ee(Ir),Ir!==ba||Ir.tag!==5&&Ir.tag!==6)&&(Ir=null)):(Nr=null,Ir=_t),Nr!==Ir)){if(Lr=hs,cr="onMouseLeave",ct="onMouseEnter",Qe="mouse",(m==="pointerout"||m==="pointerover")&&(Lr=ud,cr="onPointerLeave",ct="onPointerEnter",Qe="pointer"),ba=Nr==null?Yt:xa(Nr),ht=Ir==null?Yt:xa(Ir),Yt=new Lr(cr,Qe+"leave",Nr,C,Jt),Yt.target=ba,Yt.relatedTarget=ht,cr=null,bu(Jt)===_t&&(Lr=new Lr(ct,Qe+"enter",Ir,C,Jt),Lr.target=ht,Lr.relatedTarget=ba,cr=Lr),ba=cr,Nr&&Ir)t:{for(Lr=Nr,ct=Ir,Qe=0,ht=Lr;ht;ht=yd(ht))Qe++;for(ht=0,cr=ct;cr;cr=yd(cr))ht++;for(;0<Qe-ht;)Lr=yd(Lr),Qe--;for(;0<ht-Qe;)ct=yd(ct),ht--;for(;Qe--;){if(Lr===ct||ct!==null&&Lr===ct.alternate)break t;Lr=yd(Lr),ct=yd(ct)}Lr=null}else Lr=null;Nr!==null&&rw(tr,Yt,Nr,Lr,!1),Ir!==null&&ba!==null&&rw(tr,ba,Ir,Lr,!0)}}e:{if(Yt=_t?xa(_t):window,Nr=Yt.nodeName&&Yt.nodeName.toLowerCase(),Nr==="select"||Nr==="input"&&Yt.type==="file")var Br=Vo;else if(Rc(Yt))if(O0)Br=H1;else{Br=Ss;var Wr=W1}else(Nr=Yt.nodeName)&&Nr.toLowerCase()==="input"&&(Yt.type==="checkbox"||Yt.type==="radio")&&(Br=gg);if(Br&&(Br=Br(m,_t))){mh(tr,Br,C,Jt);break e}Wr&&Wr(m,Yt,_t),m==="focusout"&&(Wr=Yt._wrapperState)&&Wr.controlled&&Yt.type==="number"&&He(Yt,"number",Yt.value)}switch(Wr=_t?xa(_t):window,m){case"focusin":(Rc(Wr)||Wr.contentEditable==="true")&&(I0=Wr,ja=_t,md=null);break;case"focusout":md=ja=I0=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,pg(tr,C,Jt);break;case"selectionchange":if(ph)break;case"keydown":case"keyup":pg(tr,C,Jt)}var Hr;if(hh)e:{switch(m){case"compositionstart":var sn="onCompositionStart";break e;case"compositionend":sn="onCompositionEnd";break e;case"compositionupdate":sn="onCompositionUpdate";break e}sn=void 0}else So?$1(m,C)&&(sn="onCompositionEnd"):m==="keydown"&&C.keyCode===229&&(sn="onCompositionStart");sn&&(_o&&C.locale!=="ko"&&(So||sn!=="onCompositionStart"?sn==="onCompositionEnd"&&So&&(Hr=ch()):(Ha=Jt,hu="value"in Ha?Ha.value:Ha.textContent,So=!0)),Wr=Sg(_t,sn),0<Wr.length&&(sn=new ld(sn,m,null,C,Jt),tr.push({event:sn,listeners:Wr}),Hr?sn.data=Hr:(Hr=wl(C),Hr!==null&&(sn.data=Hr)))),(Hr=F0?z1(m,C):Q2(m,C))&&(_t=Sg(_t,"onBeforeInput"),0<_t.length&&(Jt=new ld("onBeforeInput","beforeinput",null,C,Jt),tr.push({event:Jt,listeners:_t}),Jt.data=Hr))}Q1(tr,p)})}function B0(m,p,C){return{instance:m,listener:p,currentTarget:C}}function Sg(m,p){for(var C=p+"Capture",O=[];m!==null;){var K=m,te=K.stateNode;K.tag===5&&te!==null&&(K=te,te=Wt(m,C),te!=null&&O.unshift(B0(m,te,K)),te=Wt(m,p),te!=null&&O.push(B0(m,te,K))),m=m.return}return O}function yd(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function rw(m,p,C,O,K){for(var te=p._reactName,me=[];C!==null&&C!==O;){var Oe=C,Ge=Oe.alternate,_t=Oe.stateNode;if(Ge!==null&&Ge===O)break;Oe.tag===5&&_t!==null&&(Oe=_t,K?(Ge=Wt(C,te),Ge!=null&&me.unshift(B0(C,Ge,Oe))):K||(Ge=Wt(C,te),Ge!=null&&me.push(B0(C,Ge,Oe)))),C=C.return}me.length!==0&&m.push({event:p,listeners:me})}var K3=/\r\n?/g,nw=/\u0000|\uFFFD/g;function ex(m){return(typeof m=="string"?m:""+m).replace(K3,`
`).replace(nw,"")}function vh(m,p,C){if(p=ex(p),ex(m)!==p&&C)throw Error(r(425))}function vd(){}var tx=null,rx=null;function nx(m,p){return m==="textarea"||m==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var To=typeof setTimeout=="function"?setTimeout:void 0,sx=typeof clearTimeout=="function"?clearTimeout:void 0,wh=typeof Promise=="function"?Promise:void 0,sw=typeof queueMicrotask=="function"?queueMicrotask:typeof wh<"u"?function(m){return wh.resolve(null).then(m).catch(aw)}:To;function aw(m){setTimeout(function(){throw m})}function kg(m,p){var C=p,O=0;do{var K=C.nextSibling;if(m.removeChild(C),K&&K.nodeType===8)if(C=K.data,C==="/$"){if(O===0){m.removeChild(K),Zi(p);return}O--}else C!=="$"&&C!=="$?"&&C!=="$!"||O++;C=K}while(C);Zi(p)}function Gl(m){for(;m!=null;m=m.nextSibling){var p=m.nodeType;if(p===1||p===3)break;if(p===8){if(p=m.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return m}function wd(m){m=m.previousSibling;for(var p=0;m;){if(m.nodeType===8){var C=m.data;if(C==="$"||C==="$!"||C==="$?"){if(p===0)return m;p--}else C==="/$"&&p++}m=m.previousSibling}return null}var wu=Math.random().toString(36).slice(2),Ko="__reactFiber$"+wu,bh="__reactProps$"+wu,Vl="__reactContainer$"+wu,Tg="__reactEvents$"+wu,iw="__reactListeners$"+wu,ow="__reactHandles$"+wu;function bu(m){var p=m[Ko];if(p)return p;for(var C=m.parentNode;C;){if(p=C[Vl]||C[Ko]){if(C=p.alternate,p.child!==null||C!==null&&C.child!==null)for(m=wd(m);m!==null;){if(C=m[Ko])return C;m=wd(m)}return p}m=C,C=m.parentNode}return null}function _h(m){return m=m[Ko]||m[Vl],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function xa(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(r(33))}function Pa(m){return m[bh]||null}var Cg=[],bd=-1;function Lc(m){return{current:m}}function ls(m){0>bd||(m.current=Cg[bd],Cg[bd]=null,bd--)}function Jn(m,p){bd++,Cg[bd]=m.current,m.current=p}var ql={},qa=Lc(ql),ci=Lc(!1),_u=ql;function _d(m,p){var C=m.type.contextTypes;if(!C)return ql;var O=m.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===p)return O.__reactInternalMemoizedMaskedChildContext;var K={},te;for(te in C)K[te]=p[te];return O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=p,m.__reactInternalMemoizedMaskedChildContext=K),K}function ui(m){return m=m.childContextTypes,m!=null}function $0(){ls(ci),ls(qa)}function ax(m,p,C){if(qa.current!==ql)throw Error(r(168));Jn(qa,p),Jn(ci,C)}function Eg(m,p,C){var O=m.stateNode;if(p=p.childContextTypes,typeof O.getChildContext!="function")return C;O=O.getChildContext();for(var K in O)if(!(K in p))throw Error(r(108,q(m)||"Unknown",K));return H({},C,O)}function Sd(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||ql,_u=qa.current,Jn(qa,m),Jn(ci,ci.current),!0}function lw(m,p,C){var O=m.stateNode;if(!O)throw Error(r(169));C?(m=Eg(m,p,_u),O.__reactInternalMemoizedMergedChildContext=m,ls(ci),ls(qa),Jn(qa,m)):ls(ci),Jn(ci,C)}var Kl=null,z0=!1,Ng=!1;function Sh(m){Kl===null?Kl=[m]:Kl.push(m)}function Bc(m){z0=!0,Sh(m)}function Su(){if(!Ng&&Kl!==null){Ng=!0;var m=0,p=cn;try{var C=Kl;for(cn=1;m<C.length;m++){var O=C[m];do O=O(!0);while(O!==null)}Kl=null,z0=!1}catch(K){throw Kl!==null&&(Kl=Kl.slice(m+1)),Ae(Ft,Su),K}finally{cn=p,Ng=!1}}return null}var Pi=[],kd=0,ku=null,Tu=0,Mi=[],Fi=0,Cu=null,Co=1,vs="";function Td(m,p){Pi[kd++]=Tu,Pi[kd++]=ku,ku=m,Tu=p}function cw(m,p,C){Mi[Fi++]=Co,Mi[Fi++]=vs,Mi[Fi++]=Cu,Cu=m;var O=Co;m=vs;var K=32-Pr(O)-1;O&=~(1<<K),C+=1;var te=32-Pr(p)+K;if(30<te){var me=K-K%5;te=(O&(1<<me)-1).toString(32),O>>=me,K-=me,Co=1<<32-Pr(p)+K|C<<K|O,vs=te+m}else Co=1<<te|C<<K|O,vs=m}function U0(m){m.return!==null&&(Td(m,1),cw(m,1,0))}function Ma(m){for(;m===ku;)ku=Pi[--kd],Pi[kd]=null,Tu=Pi[--kd],Pi[kd]=null;for(;m===Cu;)Cu=Mi[--Fi],Mi[Fi]=null,vs=Mi[--Fi],Mi[Fi]=null,Co=Mi[--Fi],Mi[Fi]=null}var Eo=null,_r=null,Gn=!1,No=null;function ix(m,p){var C=tc(5,null,null,0);C.elementType="DELETED",C.stateNode=p,C.return=m,p=m.deletions,p===null?(m.deletions=[C],m.flags|=16):p.push(C)}function uw(m,p){switch(m.tag){case 5:var C=m.type;return p=p.nodeType!==1||C.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(m.stateNode=p,Eo=m,_r=Gl(p.firstChild),!0):!1;case 6:return p=m.pendingProps===""||p.nodeType!==3?null:p,p!==null?(m.stateNode=p,Eo=m,_r=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(C=Cu!==null?{id:Co,overflow:vs}:null,m.memoizedState={dehydrated:p,treeContext:C,retryLane:1073741824},C=tc(18,null,null,0),C.stateNode=p,C.return=m,m.child=C,Eo=m,_r=null,!0):!1;default:return!1}}function Cd(m){return(m.mode&1)!==0&&(m.flags&128)===0}function W0(m){if(Gn){var p=_r;if(p){var C=p;if(!uw(m,p)){if(Cd(m))throw Error(r(418));p=Gl(C.nextSibling);var O=Eo;p&&uw(m,p)?ix(O,C):(m.flags=m.flags&-4097|2,Gn=!1,Eo=m)}}else{if(Cd(m))throw Error(r(418));m.flags=m.flags&-4097|2,Gn=!1,Eo=m}}}function Ag(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Eo=m}function kh(m){if(m!==Eo)return!1;if(!Gn)return Ag(m),Gn=!0,!1;var p;if((p=m.tag!==3)&&!(p=m.tag!==5)&&(p=m.type,p=p!=="head"&&p!=="body"&&!nx(m.type,m.memoizedProps)),p&&(p=_r)){if(Cd(m))throw ox(),Error(r(418));for(;p;)ix(m,p),p=Gl(p.nextSibling)}if(Ag(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));e:{for(m=m.nextSibling,p=0;m;){if(m.nodeType===8){var C=m.data;if(C==="/$"){if(p===0){_r=Gl(m.nextSibling);break e}p--}else C!=="$"&&C!=="$!"&&C!=="$?"||p++}m=m.nextSibling}_r=null}}else _r=Eo?Gl(m.stateNode.nextSibling):null;return!0}function ox(){for(var m=_r;m;)m=Gl(m.nextSibling)}function Ed(){_r=Eo=null,Gn=!1}function Th(m){No===null?No=[m]:No.push(m)}var lx=E.ReactCurrentBatchConfig;function Gs(m,p,C){if(m=C.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(r(309));var O=C.stateNode}if(!O)throw Error(r(147,m));var K=O,te=""+m;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===te?p.ref:(p=function(me){var Oe=K.refs;me===null?delete Oe[te]:Oe[te]=me},p._stringRef=te,p)}if(typeof m!="string")throw Error(r(284));if(!C._owner)throw Error(r(290,m))}return m}function ro(m,p){throw m=Object.prototype.toString.call(p),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":m))}function bl(m){var p=m._init;return p(m._payload)}function jg(m){function p(ct,Qe){if(m){var ht=ct.deletions;ht===null?(ct.deletions=[Qe],ct.flags|=16):ht.push(Qe)}}function C(ct,Qe){if(!m)return null;for(;Qe!==null;)p(ct,Qe),Qe=Qe.sibling;return null}function O(ct,Qe){for(ct=new Map;Qe!==null;)Qe.key!==null?ct.set(Qe.key,Qe):ct.set(Qe.index,Qe),Qe=Qe.sibling;return ct}function K(ct,Qe){return ct=uf(ct,Qe),ct.index=0,ct.sibling=null,ct}function te(ct,Qe,ht){return ct.index=ht,m?(ht=ct.alternate,ht!==null?(ht=ht.index,ht<Qe?(ct.flags|=2,Qe):ht):(ct.flags|=2,Qe)):(ct.flags|=1048576,Qe)}function me(ct){return m&&ct.alternate===null&&(ct.flags|=2),ct}function Oe(ct,Qe,ht,cr){return Qe===null||Qe.tag!==6?(Qe=gS(ht,ct.mode,cr),Qe.return=ct,Qe):(Qe=K(Qe,ht),Qe.return=ct,Qe)}function Ge(ct,Qe,ht,cr){var Br=ht.type;return Br===M?Jt(ct,Qe,ht.props.children,cr,ht.key):Qe!==null&&(Qe.elementType===Br||typeof Br=="object"&&Br!==null&&Br.$$typeof===ie&&bl(Br)===Qe.type)?(cr=K(Qe,ht.props),cr.ref=Gs(ct,Qe,ht),cr.return=ct,cr):(cr=Pw(ht.type,ht.key,ht.props,null,ct.mode,cr),cr.ref=Gs(ct,Qe,ht),cr.return=ct,cr)}function _t(ct,Qe,ht,cr){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==ht.containerInfo||Qe.stateNode.implementation!==ht.implementation?(Qe=pS(ht,ct.mode,cr),Qe.return=ct,Qe):(Qe=K(Qe,ht.children||[]),Qe.return=ct,Qe)}function Jt(ct,Qe,ht,cr,Br){return Qe===null||Qe.tag!==7?(Qe=Rh(ht,ct.mode,cr,Br),Qe.return=ct,Qe):(Qe=K(Qe,ht),Qe.return=ct,Qe)}function tr(ct,Qe,ht){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Qe=gS(""+Qe,ct.mode,ht),Qe.return=ct,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case N:return ht=Pw(Qe.type,Qe.key,Qe.props,null,ct.mode,ht),ht.ref=Gs(ct,null,Qe),ht.return=ct,ht;case P:return Qe=pS(Qe,ct.mode,ht),Qe.return=ct,Qe;case ie:var cr=Qe._init;return tr(ct,cr(Qe._payload),ht)}if(Et(Qe)||I(Qe))return Qe=Rh(Qe,ct.mode,ht,null),Qe.return=ct,Qe;ro(ct,Qe)}return null}function Yt(ct,Qe,ht,cr){var Br=Qe!==null?Qe.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number")return Br!==null?null:Oe(ct,Qe,""+ht,cr);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case N:return ht.key===Br?Ge(ct,Qe,ht,cr):null;case P:return ht.key===Br?_t(ct,Qe,ht,cr):null;case ie:return Br=ht._init,Yt(ct,Qe,Br(ht._payload),cr)}if(Et(ht)||I(ht))return Br!==null?null:Jt(ct,Qe,ht,cr,null);ro(ct,ht)}return null}function Nr(ct,Qe,ht,cr,Br){if(typeof cr=="string"&&cr!==""||typeof cr=="number")return ct=ct.get(ht)||null,Oe(Qe,ct,""+cr,Br);if(typeof cr=="object"&&cr!==null){switch(cr.$$typeof){case N:return ct=ct.get(cr.key===null?ht:cr.key)||null,Ge(Qe,ct,cr,Br);case P:return ct=ct.get(cr.key===null?ht:cr.key)||null,_t(Qe,ct,cr,Br);case ie:var Wr=cr._init;return Nr(ct,Qe,ht,Wr(cr._payload),Br)}if(Et(cr)||I(cr))return ct=ct.get(ht)||null,Jt(Qe,ct,cr,Br,null);ro(Qe,cr)}return null}function Ir(ct,Qe,ht,cr){for(var Br=null,Wr=null,Hr=Qe,sn=Qe=0,pi=null;Hr!==null&&sn<ht.length;sn++){Hr.index>sn?(pi=Hr,Hr=null):pi=Hr.sibling;var Bn=Yt(ct,Hr,ht[sn],cr);if(Bn===null){Hr===null&&(Hr=pi);break}m&&Hr&&Bn.alternate===null&&p(ct,Hr),Qe=te(Bn,Qe,sn),Wr===null?Br=Bn:Wr.sibling=Bn,Wr=Bn,Hr=pi}if(sn===ht.length)return C(ct,Hr),Gn&&Td(ct,sn),Br;if(Hr===null){for(;sn<ht.length;sn++)Hr=tr(ct,ht[sn],cr),Hr!==null&&(Qe=te(Hr,Qe,sn),Wr===null?Br=Hr:Wr.sibling=Hr,Wr=Hr);return Gn&&Td(ct,sn),Br}for(Hr=O(ct,Hr);sn<ht.length;sn++)pi=Nr(Hr,ct,sn,ht[sn],cr),pi!==null&&(m&&pi.alternate!==null&&Hr.delete(pi.key===null?sn:pi.key),Qe=te(pi,Qe,sn),Wr===null?Br=pi:Wr.sibling=pi,Wr=pi);return m&&Hr.forEach(function(df){return p(ct,df)}),Gn&&Td(ct,sn),Br}function Lr(ct,Qe,ht,cr){var Br=I(ht);if(typeof Br!="function")throw Error(r(150));if(ht=Br.call(ht),ht==null)throw Error(r(151));for(var Wr=Br=null,Hr=Qe,sn=Qe=0,pi=null,Bn=ht.next();Hr!==null&&!Bn.done;sn++,Bn=ht.next()){Hr.index>sn?(pi=Hr,Hr=null):pi=Hr.sibling;var df=Yt(ct,Hr,Bn.value,cr);if(df===null){Hr===null&&(Hr=pi);break}m&&Hr&&df.alternate===null&&p(ct,Hr),Qe=te(df,Qe,sn),Wr===null?Br=df:Wr.sibling=df,Wr=df,Hr=pi}if(Bn.done)return C(ct,Hr),Gn&&Td(ct,sn),Br;if(Hr===null){for(;!Bn.done;sn++,Bn=ht.next())Bn=tr(ct,Bn.value,cr),Bn!==null&&(Qe=te(Bn,Qe,sn),Wr===null?Br=Bn:Wr.sibling=Bn,Wr=Bn);return Gn&&Td(ct,sn),Br}for(Hr=O(ct,Hr);!Bn.done;sn++,Bn=ht.next())Bn=Nr(Hr,ct,sn,Bn.value,cr),Bn!==null&&(m&&Bn.alternate!==null&&Hr.delete(Bn.key===null?sn:Bn.key),Qe=te(Bn,Qe,sn),Wr===null?Br=Bn:Wr.sibling=Bn,Wr=Bn);return m&&Hr.forEach(function(yJ){return p(ct,yJ)}),Gn&&Td(ct,sn),Br}function ba(ct,Qe,ht,cr){if(typeof ht=="object"&&ht!==null&&ht.type===M&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case N:e:{for(var Br=ht.key,Wr=Qe;Wr!==null;){if(Wr.key===Br){if(Br=ht.type,Br===M){if(Wr.tag===7){C(ct,Wr.sibling),Qe=K(Wr,ht.props.children),Qe.return=ct,ct=Qe;break e}}else if(Wr.elementType===Br||typeof Br=="object"&&Br!==null&&Br.$$typeof===ie&&bl(Br)===Wr.type){C(ct,Wr.sibling),Qe=K(Wr,ht.props),Qe.ref=Gs(ct,Wr,ht),Qe.return=ct,ct=Qe;break e}C(ct,Wr);break}else p(ct,Wr);Wr=Wr.sibling}ht.type===M?(Qe=Rh(ht.props.children,ct.mode,cr,ht.key),Qe.return=ct,ct=Qe):(cr=Pw(ht.type,ht.key,ht.props,null,ct.mode,cr),cr.ref=Gs(ct,Qe,ht),cr.return=ct,ct=cr)}return me(ct);case P:e:{for(Wr=ht.key;Qe!==null;){if(Qe.key===Wr)if(Qe.tag===4&&Qe.stateNode.containerInfo===ht.containerInfo&&Qe.stateNode.implementation===ht.implementation){C(ct,Qe.sibling),Qe=K(Qe,ht.children||[]),Qe.return=ct,ct=Qe;break e}else{C(ct,Qe);break}else p(ct,Qe);Qe=Qe.sibling}Qe=pS(ht,ct.mode,cr),Qe.return=ct,ct=Qe}return me(ct);case ie:return Wr=ht._init,ba(ct,Qe,Wr(ht._payload),cr)}if(Et(ht))return Ir(ct,Qe,ht,cr);if(I(ht))return Lr(ct,Qe,ht,cr);ro(ct,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"?(ht=""+ht,Qe!==null&&Qe.tag===6?(C(ct,Qe.sibling),Qe=K(Qe,ht),Qe.return=ct,ct=Qe):(C(ct,Qe),Qe=gS(ht,ct.mode,cr),Qe.return=ct,ct=Qe),me(ct)):C(ct,Qe)}return ba}var Nd=jg(!0),Yo=jg(!1),Ch=Lc(null),Ao=null,H0=null,Pg=null;function Mg(){Pg=H0=Ao=null}function Fg(m){var p=Ch.current;ls(Ch),m._currentValue=p}function Dg(m,p,C){for(;m!==null;){var O=m.alternate;if((m.childLanes&p)!==p?(m.childLanes|=p,O!==null&&(O.childLanes|=p)):O!==null&&(O.childLanes&p)!==p&&(O.childLanes|=p),m===C)break;m=m.return}}function $c(m,p){Ao=m,Pg=H0=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&p)!==0&&(oe=!0),m.firstContext=null)}function Di(m){var p=m._currentValue;if(Pg!==m)if(m={context:m,memoizedValue:p,next:null},H0===null){if(Ao===null)throw Error(r(308));H0=m,Ao.dependencies={lanes:0,firstContext:m}}else H0=H0.next=m;return p}var Yl=null;function G0(m){Yl===null?Yl=[m]:Yl.push(m)}function Eh(m,p,C,O){var K=p.interleaved;return K===null?(C.next=C,G0(p)):(C.next=K.next,K.next=C),p.interleaved=C,jo(m,O)}function jo(m,p){m.lanes|=p;var C=m.alternate;for(C!==null&&(C.lanes|=p),C=m,m=m.return;m!==null;)m.childLanes|=p,C=m.alternate,C!==null&&(C.childLanes|=p),C=m,m=m.return;return C.tag===3?C.stateNode:null}var Xl=!1;function Nh(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Og(m,p){m=m.updateQueue,p.updateQueue===m&&(p.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Jl(m,p){return{eventTime:m,lane:p,tag:0,payload:null,callback:null,next:null}}function Ql(m,p,C){var O=m.updateQueue;if(O===null)return null;if(O=O.shared,(On&2)!==0){var K=O.pending;return K===null?p.next=p:(p.next=K.next,K.next=p),O.pending=p,jo(m,C)}return K=O.interleaved,K===null?(p.next=p,G0(O)):(p.next=K.next,K.next=p),O.interleaved=p,jo(m,C)}function Rg(m,p,C){if(p=p.updateQueue,p!==null&&(p=p.shared,(C&4194240)!==0)){var O=p.lanes;O&=m.pendingLanes,C|=O,p.lanes=C,li(m,C)}}function Ah(m,p){var C=m.updateQueue,O=m.alternate;if(O!==null&&(O=O.updateQueue,C===O)){var K=null,te=null;if(C=C.firstBaseUpdate,C!==null){do{var me={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};te===null?K=te=me:te=te.next=me,C=C.next}while(C!==null);te===null?K=te=p:te=te.next=p}else K=te=p;C={baseState:O.baseState,firstBaseUpdate:K,lastBaseUpdate:te,shared:O.shared,effects:O.effects},m.updateQueue=C;return}m=C.lastBaseUpdate,m===null?C.firstBaseUpdate=p:m.next=p,C.lastBaseUpdate=p}function V0(m,p,C,O){var K=m.updateQueue;Xl=!1;var te=K.firstBaseUpdate,me=K.lastBaseUpdate,Oe=K.shared.pending;if(Oe!==null){K.shared.pending=null;var Ge=Oe,_t=Ge.next;Ge.next=null,me===null?te=_t:me.next=_t,me=Ge;var Jt=m.alternate;Jt!==null&&(Jt=Jt.updateQueue,Oe=Jt.lastBaseUpdate,Oe!==me&&(Oe===null?Jt.firstBaseUpdate=_t:Oe.next=_t,Jt.lastBaseUpdate=Ge))}if(te!==null){var tr=K.baseState;me=0,Jt=_t=Ge=null,Oe=te;do{var Yt=Oe.lane,Nr=Oe.eventTime;if((O&Yt)===Yt){Jt!==null&&(Jt=Jt.next={eventTime:Nr,lane:0,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null});e:{var Ir=m,Lr=Oe;switch(Yt=p,Nr=C,Lr.tag){case 1:if(Ir=Lr.payload,typeof Ir=="function"){tr=Ir.call(Nr,tr,Yt);break e}tr=Ir;break e;case 3:Ir.flags=Ir.flags&-65537|128;case 0:if(Ir=Lr.payload,Yt=typeof Ir=="function"?Ir.call(Nr,tr,Yt):Ir,Yt==null)break e;tr=H({},tr,Yt);break e;case 2:Xl=!0}}Oe.callback!==null&&Oe.lane!==0&&(m.flags|=64,Yt=K.effects,Yt===null?K.effects=[Oe]:Yt.push(Oe))}else Nr={eventTime:Nr,lane:Yt,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Jt===null?(_t=Jt=Nr,Ge=tr):Jt=Jt.next=Nr,me|=Yt;if(Oe=Oe.next,Oe===null){if(Oe=K.shared.pending,Oe===null)break;Yt=Oe,Oe=Yt.next,Yt.next=null,K.lastBaseUpdate=Yt,K.shared.pending=null}}while(!0);if(Jt===null&&(Ge=tr),K.baseState=Ge,K.firstBaseUpdate=_t,K.lastBaseUpdate=Jt,p=K.shared.interleaved,p!==null){K=p;do me|=K.lane,K=K.next;while(K!==p)}else te===null&&(K.shared.lanes=0);Mh|=me,m.lanes=me,m.memoizedState=tr}}function Os(m,p,C){if(m=p.effects,p.effects=null,m!==null)for(p=0;p<m.length;p++){var O=m[p],K=O.callback;if(K!==null){if(O.callback=null,O=C,typeof K!="function")throw Error(r(191,K));K.call(O)}}}var hn={},Qn=Lc(hn),ws=Lc(hn),Vs=Lc(hn);function ya(m){if(m===hn)throw Error(r(174));return m}function Eu(m,p){switch(Jn(Vs,p),Jn(ws,m),Jn(Qn,hn),m=p.nodeType,m){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Ke(null,"");break;default:m=m===8?p.parentNode:p,p=m.namespaceURI||null,m=m.tagName,p=Ke(p,m)}ls(Qn),Jn(Qn,p)}function bs(){ls(Qn),ls(ws),ls(Vs)}function q0(m){ya(Vs.current);var p=ya(Qn.current),C=Ke(p,m.type);p!==C&&(Jn(ws,m),Jn(Qn,C))}function zc(m){ws.current===m&&(ls(Qn),ls(ws))}var cs=Lc(0);function K0(m){for(var p=m;p!==null;){if(p.tag===13){var C=p.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break;for(;p.sibling===null;){if(p.return===null||p.return===m)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ad=[];function di(){for(var m=0;m<Ad.length;m++)Ad[m]._workInProgressVersionPrimary=null;Ad.length=0}var Y0=E.ReactCurrentDispatcher,jh=E.ReactCurrentBatchConfig,Oi=0,Yn=null,Rs=null,ea=null,_l=!1,Nu=!1,Xo=0,Ig=0;function ta(){throw Error(r(321))}function Ph(m,p){if(p===null)return!1;for(var C=0;C<p.length&&C<m.length;C++)if(!to(m[C],p[C]))return!1;return!0}function X0(m,p,C,O,K,te){if(Oi=te,Yn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Y0.current=m===null||m.memoizedState===null?X3:Pu,m=C(O,K),Nu){te=0;do{if(Nu=!1,Xo=0,25<=te)throw Error(r(301));te+=1,ea=Rs=null,p.updateQueue=null,Y0.current=Ug,m=C(O,K)}while(Nu)}if(Y0.current=ef,p=Rs!==null&&Rs.next!==null,Oi=0,ea=Rs=Yn=null,_l=!1,p)throw Error(r(300));return m}function J0(){var m=Xo!==0;return Xo=0,m}function ms(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ea===null?Yn.memoizedState=ea=m:ea=ea.next=m,ea}function va(){if(Rs===null){var m=Yn.alternate;m=m!==null?m.memoizedState:null}else m=Rs.next;var p=ea===null?Yn.memoizedState:ea.next;if(p!==null)ea=p,Rs=m;else{if(m===null)throw Error(r(310));Rs=m,m={memoizedState:Rs.memoizedState,baseState:Rs.baseState,baseQueue:Rs.baseQueue,queue:Rs.queue,next:null},ea===null?Yn.memoizedState=ea=m:ea=ea.next=m}return ea}function fi(m,p){return typeof p=="function"?p(m):p}function hi(m){var p=va(),C=p.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=m;var O=Rs,K=O.baseQueue,te=C.pending;if(te!==null){if(K!==null){var me=K.next;K.next=te.next,te.next=me}O.baseQueue=K=te,C.pending=null}if(K!==null){te=K.next,O=O.baseState;var Oe=me=null,Ge=null,_t=te;do{var Jt=_t.lane;if((Oi&Jt)===Jt)Ge!==null&&(Ge=Ge.next={lane:0,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),O=_t.hasEagerState?_t.eagerState:m(O,_t.action);else{var tr={lane:Jt,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null};Ge===null?(Oe=Ge=tr,me=O):Ge=Ge.next=tr,Yn.lanes|=Jt,Mh|=Jt}_t=_t.next}while(_t!==null&&_t!==te);Ge===null?me=O:Ge.next=Oe,to(O,p.memoizedState)||(oe=!0),p.memoizedState=O,p.baseState=me,p.baseQueue=Ge,C.lastRenderedState=O}if(m=C.interleaved,m!==null){K=m;do te=K.lane,Yn.lanes|=te,Mh|=te,K=K.next;while(K!==m)}else K===null&&(C.lanes=0);return[p.memoizedState,C.dispatch]}function Lg(m){var p=va(),C=p.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=m;var O=C.dispatch,K=C.pending,te=p.memoizedState;if(K!==null){C.pending=null;var me=K=K.next;do te=m(te,me.action),me=me.next;while(me!==K);to(te,p.memoizedState)||(oe=!0),p.memoizedState=te,p.baseQueue===null&&(p.baseState=te),C.lastRenderedState=te}return[te,O]}function Bg(){}function $g(m,p){var C=Yn,O=va(),K=p(),te=!to(O.memoizedState,K);if(te&&(O.memoizedState=K,oe=!0),O=O.queue,fx(cx.bind(null,C,O,m),[m]),O.getSnapshot!==p||te||ea!==null&&ea.memoizedState.tag&1){if(C.flags|=2048,Q0(9,Uc.bind(null,C,O,K,p),void 0,null),gi===null)throw Error(r(349));(Oi&30)!==0||dw(C,p,K)}return K}function dw(m,p,C){m.flags|=16384,m={getSnapshot:p,value:C},p=Yn.updateQueue,p===null?(p={lastEffect:null,stores:null},Yn.updateQueue=p,p.stores=[m]):(C=p.stores,C===null?p.stores=[m]:C.push(m))}function Uc(m,p,C,O){p.value=C,p.getSnapshot=O,ux(p)&&zg(m)}function cx(m,p,C){return C(function(){ux(p)&&zg(m)})}function ux(m){var p=m.getSnapshot;m=m.value;try{var C=p();return!to(m,C)}catch{return!0}}function zg(m){var p=jo(m,1);p!==null&&Vc(p,m,1,-1)}function Au(m){var p=ms();return typeof m=="function"&&(m=m()),p.memoizedState=p.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:m},p.queue=m,m=m.dispatch=xw.bind(null,Yn,m),[p.memoizedState,m]}function Q0(m,p,C,O){return m={tag:m,create:p,destroy:C,deps:O,next:null},p=Yn.updateQueue,p===null?(p={lastEffect:null,stores:null},Yn.updateQueue=p,p.lastEffect=m.next=m):(C=p.lastEffect,C===null?p.lastEffect=m.next=m:(O=C.next,C.next=m,m.next=O,p.lastEffect=m)),m}function dx(){return va().memoizedState}function Z0(m,p,C,O){var K=ms();Yn.flags|=m,K.memoizedState=Q0(1|p,C,void 0,O===void 0?null:O)}function jd(m,p,C,O){var K=va();O=O===void 0?null:O;var te=void 0;if(Rs!==null){var me=Rs.memoizedState;if(te=me.destroy,O!==null&&Ph(O,me.deps)){K.memoizedState=Q0(p,C,te,O);return}}Yn.flags|=m,K.memoizedState=Q0(1|p,C,te,O)}function fw(m,p){return Z0(8390656,8,m,p)}function fx(m,p){return jd(2048,8,m,p)}function hx(m,p){return jd(4,2,m,p)}function mx(m,p){return jd(4,4,m,p)}function ju(m,p){if(typeof p=="function")return m=m(),p(m),function(){p(null)};if(p!=null)return m=m(),p.current=m,function(){p.current=null}}function hw(m,p,C){return C=C!=null?C.concat([m]):null,jd(4,4,ju.bind(null,p,m),C)}function Wc(){}function gx(m,p){var C=va();p=p===void 0?null:p;var O=C.memoizedState;return O!==null&&p!==null&&Ph(p,O[1])?O[0]:(C.memoizedState=[m,p],m)}function gs(m,p){var C=va();p=p===void 0?null:p;var O=C.memoizedState;return O!==null&&p!==null&&Ph(p,O[1])?O[0]:(m=m(),C.memoizedState=[m,p],m)}function mw(m,p,C){return(Oi&21)===0?(m.baseState&&(m.baseState=!1,oe=!0),m.memoizedState=C):(to(C,p)||(C=Hn(),Yn.lanes|=C,Mh|=C,m.baseState=!0),p)}function gw(m,p){var C=cn;cn=C!==0&&4>C?C:4,m(!0);var O=jh.transition;jh.transition={};try{m(!1),p()}finally{cn=C,jh.transition=O}}function pw(){return va().memoizedState}function Y3(m,p,C){var O=lf(m);if(C={lane:O,action:C,hasEagerState:!1,eagerState:null,next:null},px(m))yw(p,C);else if(C=Eh(m,p,C,O),C!==null){var K=Mo();Vc(C,m,O,K),Po(C,p,O)}}function xw(m,p,C){var O=lf(m),K={lane:O,action:C,hasEagerState:!1,eagerState:null,next:null};if(px(m))yw(p,K);else{var te=m.alternate;if(m.lanes===0&&(te===null||te.lanes===0)&&(te=p.lastRenderedReducer,te!==null))try{var me=p.lastRenderedState,Oe=te(me,C);if(K.hasEagerState=!0,K.eagerState=Oe,to(Oe,me)){var Ge=p.interleaved;Ge===null?(K.next=K,G0(p)):(K.next=Ge.next,Ge.next=K),p.interleaved=K;return}}catch{}finally{}C=Eh(m,p,K,O),C!==null&&(K=Mo(),Vc(C,m,O,K),Po(C,p,O))}}function px(m){var p=m.alternate;return m===Yn||p!==null&&p===Yn}function yw(m,p){Nu=_l=!0;var C=m.pending;C===null?p.next=p:(p.next=C.next,C.next=p),m.pending=p}function Po(m,p,C){if((C&4194240)!==0){var O=p.lanes;O&=m.pendingLanes,C|=O,p.lanes=C,li(m,C)}}var ef={readContext:Di,useCallback:ta,useContext:ta,useEffect:ta,useImperativeHandle:ta,useInsertionEffect:ta,useLayoutEffect:ta,useMemo:ta,useReducer:ta,useRef:ta,useState:ta,useDebugValue:ta,useDeferredValue:ta,useTransition:ta,useMutableSource:ta,useSyncExternalStore:ta,useId:ta,unstable_isNewReconciler:!1},X3={readContext:Di,useCallback:function(m,p){return ms().memoizedState=[m,p===void 0?null:p],m},useContext:Di,useEffect:fw,useImperativeHandle:function(m,p,C){return C=C!=null?C.concat([m]):null,Z0(4194308,4,ju.bind(null,p,m),C)},useLayoutEffect:function(m,p){return Z0(4194308,4,m,p)},useInsertionEffect:function(m,p){return Z0(4,2,m,p)},useMemo:function(m,p){var C=ms();return p=p===void 0?null:p,m=m(),C.memoizedState=[m,p],m},useReducer:function(m,p,C){var O=ms();return p=C!==void 0?C(p):p,O.memoizedState=O.baseState=p,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:p},O.queue=m,m=m.dispatch=Y3.bind(null,Yn,m),[O.memoizedState,m]},useRef:function(m){var p=ms();return m={current:m},p.memoizedState=m},useState:Au,useDebugValue:Wc,useDeferredValue:function(m){return ms().memoizedState=m},useTransition:function(){var m=Au(!1),p=m[0];return m=gw.bind(null,m[1]),ms().memoizedState=m,[p,m]},useMutableSource:function(){},useSyncExternalStore:function(m,p,C){var O=Yn,K=ms();if(Gn){if(C===void 0)throw Error(r(407));C=C()}else{if(C=p(),gi===null)throw Error(r(349));(Oi&30)!==0||dw(O,p,C)}K.memoizedState=C;var te={value:C,getSnapshot:p};return K.queue=te,fw(cx.bind(null,O,te,m),[m]),O.flags|=2048,Q0(9,Uc.bind(null,O,te,C,p),void 0,null),C},useId:function(){var m=ms(),p=gi.identifierPrefix;if(Gn){var C=vs,O=Co;C=(O&~(1<<32-Pr(O)-1)).toString(32)+C,p=":"+p+"R"+C,C=Xo++,0<C&&(p+="H"+C.toString(32)),p+=":"}else C=Ig++,p=":"+p+"r"+C.toString(32)+":";return m.memoizedState=p},unstable_isNewReconciler:!1},Pu={readContext:Di,useCallback:gx,useContext:Di,useEffect:fx,useImperativeHandle:hw,useInsertionEffect:hx,useLayoutEffect:mx,useMemo:gs,useReducer:hi,useRef:dx,useState:function(){return hi(fi)},useDebugValue:Wc,useDeferredValue:function(m){var p=va();return mw(p,Rs.memoizedState,m)},useTransition:function(){var m=hi(fi)[0],p=va().memoizedState;return[m,p]},useMutableSource:Bg,useSyncExternalStore:$g,useId:pw,unstable_isNewReconciler:!1},Ug={readContext:Di,useCallback:gx,useContext:Di,useEffect:fx,useImperativeHandle:hw,useInsertionEffect:hx,useLayoutEffect:mx,useMemo:gs,useReducer:Lg,useRef:dx,useState:function(){return Lg(fi)},useDebugValue:Wc,useDeferredValue:function(m){var p=va();return Rs===null?p.memoizedState=m:mw(p,Rs.memoizedState,m)},useTransition:function(){var m=Lg(fi)[0],p=va().memoizedState;return[m,p]},useMutableSource:Bg,useSyncExternalStore:$g,useId:pw,unstable_isNewReconciler:!1};function Ka(m,p){if(m&&m.defaultProps){p=H({},p),m=m.defaultProps;for(var C in m)p[C]===void 0&&(p[C]=m[C]);return p}return p}function tf(m,p,C,O){p=m.memoizedState,C=C(O,p),C=C==null?p:H({},p,C),m.memoizedState=C,m.lanes===0&&(m.updateQueue.baseState=C)}var rf={isMounted:function(m){return(m=m._reactInternals)?Ee(m)===m:!1},enqueueSetState:function(m,p,C){m=m._reactInternals;var O=Mo(),K=lf(m),te=Jl(O,K);te.payload=p,C!=null&&(te.callback=C),p=Ql(m,te,K),p!==null&&(Vc(p,m,K,O),Rg(p,m,K))},enqueueReplaceState:function(m,p,C){m=m._reactInternals;var O=Mo(),K=lf(m),te=Jl(O,K);te.tag=1,te.payload=p,C!=null&&(te.callback=C),p=Ql(m,te,K),p!==null&&(Vc(p,m,K,O),Rg(p,m,K))},enqueueForceUpdate:function(m,p){m=m._reactInternals;var C=Mo(),O=lf(m),K=Jl(C,O);K.tag=2,p!=null&&(K.callback=p),p=Ql(m,K,O),p!==null&&(Vc(p,m,O,C),Rg(p,m,O))}};function Wg(m,p,C,O,K,te,me){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(O,te,me):p.prototype&&p.prototype.isPureReactComponent?!hd(C,O)||!hd(K,te):!0}function vw(m,p,C){var O=!1,K=ql,te=p.contextType;return typeof te=="object"&&te!==null?te=Di(te):(K=ui(p)?_u:qa.current,O=p.contextTypes,te=(O=O!=null)?_d(m,K):ql),p=new p(C,te),m.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=rf,m.stateNode=p,p._reactInternals=m,O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=K,m.__reactInternalMemoizedMaskedChildContext=te),p}function xx(m,p,C,O){m=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(C,O),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(C,O),p.state!==m&&rf.enqueueReplaceState(p,p.state,null)}function Hg(m,p,C,O){var K=m.stateNode;K.props=C,K.state=m.memoizedState,K.refs={},Nh(m);var te=p.contextType;typeof te=="object"&&te!==null?K.context=Di(te):(te=ui(p)?_u:qa.current,K.context=_d(m,te)),K.state=m.memoizedState,te=p.getDerivedStateFromProps,typeof te=="function"&&(tf(m,p,te,C),K.state=m.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(p=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),p!==K.state&&rf.enqueueReplaceState(K,K.state,null),V0(m,C,K,O),K.state=m.memoizedState),typeof K.componentDidMount=="function"&&(m.flags|=4194308)}function Pd(m,p){try{var C="",O=p;do C+=Q(O),O=O.return;while(O);var K=C}catch(te){K=`
Error generating stack: `+te.message+`
`+te.stack}return{value:m,source:p,stack:K,digest:null}}function Gg(m,p,C){return{value:m,source:null,stack:C??null,digest:p??null}}function nf(m,p){try{console.error(p.value)}catch(C){setTimeout(function(){throw C})}}var J3=typeof WeakMap=="function"?WeakMap:Map;function ww(m,p,C){C=Jl(-1,C),C.tag=3,C.payload={element:null};var O=p.value;return C.callback=function(){Tw||(Tw=!0,oS=O),nf(m,p)},C}function w(m,p,C){C=Jl(-1,C),C.tag=3;var O=m.type.getDerivedStateFromError;if(typeof O=="function"){var K=p.value;C.payload=function(){return O(K)},C.callback=function(){nf(m,p)}}var te=m.stateNode;return te!==null&&typeof te.componentDidCatch=="function"&&(C.callback=function(){nf(m,p),typeof O!="function"&&(af===null?af=new Set([this]):af.add(this));var me=p.stack;this.componentDidCatch(p.value,{componentStack:me!==null?me:""})}),C}function S(m,p,C){var O=m.pingCache;if(O===null){O=m.pingCache=new J3;var K=new Set;O.set(p,K)}else K=O.get(p),K===void 0&&(K=new Set,O.set(p,K));K.has(C)||(K.add(C),m=oJ.bind(null,m,p,C),p.then(m,m))}function D(m){do{var p;if((p=m.tag===13)&&(p=m.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return m;m=m.return}while(m!==null);return null}function U(m,p,C,O,K){return(m.mode&1)===0?(m===p?m.flags|=65536:(m.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(p=Jl(-1,1),p.tag=2,Ql(C,p,1))),C.lanes|=1),m):(m.flags|=65536,m.lanes=K,m)}var X=E.ReactCurrentOwner,oe=!1;function Te(m,p,C,O){p.child=m===null?Yo(p,null,C,O):Nd(p,m.child,C,O)}function et(m,p,C,O,K){C=C.render;var te=p.ref;return $c(p,K),O=X0(m,p,C,O,te,K),C=J0(),m!==null&&!oe?(p.updateQueue=m.updateQueue,p.flags&=-2053,m.lanes&=~K,mi(m,p,K)):(Gn&&C&&U0(p),p.flags|=1,Te(m,p,O,K),p.child)}function St(m,p,C,O,K){if(m===null){var te=C.type;return typeof te=="function"&&!mS(te)&&te.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(p.tag=15,p.type=te,ar(m,p,te,O,K)):(m=Pw(C.type,null,O,p,p.mode,K),m.ref=p.ref,m.return=p,p.child=m)}if(te=m.child,(m.lanes&K)===0){var me=te.memoizedProps;if(C=C.compare,C=C!==null?C:hd,C(me,O)&&m.ref===p.ref)return mi(m,p,K)}return p.flags|=1,m=uf(te,O),m.ref=p.ref,m.return=p,p.child=m}function ar(m,p,C,O,K){if(m!==null){var te=m.memoizedProps;if(hd(te,O)&&m.ref===p.ref)if(oe=!1,p.pendingProps=O=te,(m.lanes&K)!==0)(m.flags&131072)!==0&&(oe=!0);else return p.lanes=m.lanes,mi(m,p,K)}return Sr(m,p,C,O,K)}function Mr(m,p,C){var O=p.pendingProps,K=O.children,te=m!==null?m.memoizedState:null;if(O.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jn(qg,Sl),Sl|=C;else{if((C&1073741824)===0)return m=te!==null?te.baseLanes|C:C,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:m,cachePool:null,transitions:null},p.updateQueue=null,Jn(qg,Sl),Sl|=m,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},O=te!==null?te.baseLanes:C,Jn(qg,Sl),Sl|=O}else te!==null?(O=te.baseLanes|C,p.memoizedState=null):O=C,Jn(qg,Sl),Sl|=O;return Te(m,p,K,C),p.child}function un(m,p){var C=p.ref;(m===null&&C!==null||m!==null&&m.ref!==C)&&(p.flags|=512,p.flags|=2097152)}function Sr(m,p,C,O,K){var te=ui(C)?_u:qa.current;return te=_d(p,te),$c(p,K),C=X0(m,p,C,O,te,K),O=J0(),m!==null&&!oe?(p.updateQueue=m.updateQueue,p.flags&=-2053,m.lanes&=~K,mi(m,p,K)):(Gn&&O&&U0(p),p.flags|=1,Te(m,p,C,K),p.child)}function us(m,p,C,O,K){if(ui(C)){var te=!0;Sd(p)}else te=!1;if($c(p,K),p.stateNode===null)An(m,p),vw(p,C,O),Hg(p,C,O,K),O=!0;else if(m===null){var me=p.stateNode,Oe=p.memoizedProps;me.props=Oe;var Ge=me.context,_t=C.contextType;typeof _t=="object"&&_t!==null?_t=Di(_t):(_t=ui(C)?_u:qa.current,_t=_d(p,_t));var Jt=C.getDerivedStateFromProps,tr=typeof Jt=="function"||typeof me.getSnapshotBeforeUpdate=="function";tr||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(Oe!==O||Ge!==_t)&&xx(p,me,O,_t),Xl=!1;var Yt=p.memoizedState;me.state=Yt,V0(p,O,me,K),Ge=p.memoizedState,Oe!==O||Yt!==Ge||ci.current||Xl?(typeof Jt=="function"&&(tf(p,C,Jt,O),Ge=p.memoizedState),(Oe=Xl||Wg(p,C,Oe,O,Yt,Ge,_t))?(tr||typeof me.UNSAFE_componentWillMount!="function"&&typeof me.componentWillMount!="function"||(typeof me.componentWillMount=="function"&&me.componentWillMount(),typeof me.UNSAFE_componentWillMount=="function"&&me.UNSAFE_componentWillMount()),typeof me.componentDidMount=="function"&&(p.flags|=4194308)):(typeof me.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=O,p.memoizedState=Ge),me.props=O,me.state=Ge,me.context=_t,O=Oe):(typeof me.componentDidMount=="function"&&(p.flags|=4194308),O=!1)}else{me=p.stateNode,Og(m,p),Oe=p.memoizedProps,_t=p.type===p.elementType?Oe:Ka(p.type,Oe),me.props=_t,tr=p.pendingProps,Yt=me.context,Ge=C.contextType,typeof Ge=="object"&&Ge!==null?Ge=Di(Ge):(Ge=ui(C)?_u:qa.current,Ge=_d(p,Ge));var Nr=C.getDerivedStateFromProps;(Jt=typeof Nr=="function"||typeof me.getSnapshotBeforeUpdate=="function")||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(Oe!==tr||Yt!==Ge)&&xx(p,me,O,Ge),Xl=!1,Yt=p.memoizedState,me.state=Yt,V0(p,O,me,K);var Ir=p.memoizedState;Oe!==tr||Yt!==Ir||ci.current||Xl?(typeof Nr=="function"&&(tf(p,C,Nr,O),Ir=p.memoizedState),(_t=Xl||Wg(p,C,_t,O,Yt,Ir,Ge)||!1)?(Jt||typeof me.UNSAFE_componentWillUpdate!="function"&&typeof me.componentWillUpdate!="function"||(typeof me.componentWillUpdate=="function"&&me.componentWillUpdate(O,Ir,Ge),typeof me.UNSAFE_componentWillUpdate=="function"&&me.UNSAFE_componentWillUpdate(O,Ir,Ge)),typeof me.componentDidUpdate=="function"&&(p.flags|=4),typeof me.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof me.componentDidUpdate!="function"||Oe===m.memoizedProps&&Yt===m.memoizedState||(p.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||Oe===m.memoizedProps&&Yt===m.memoizedState||(p.flags|=1024),p.memoizedProps=O,p.memoizedState=Ir),me.props=O,me.state=Ir,me.context=Ge,O=_t):(typeof me.componentDidUpdate!="function"||Oe===m.memoizedProps&&Yt===m.memoizedState||(p.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||Oe===m.memoizedProps&&Yt===m.memoizedState||(p.flags|=1024),O=!1)}return Vn(m,p,C,O,te,K)}function Vn(m,p,C,O,K,te){un(m,p);var me=(p.flags&128)!==0;if(!O&&!me)return K&&lw(p,C,!1),mi(m,p,te);O=p.stateNode,X.current=p;var Oe=me&&typeof C.getDerivedStateFromError!="function"?null:O.render();return p.flags|=1,m!==null&&me?(p.child=Nd(p,m.child,null,te),p.child=Nd(p,null,Oe,te)):Te(m,p,Oe,te),p.memoizedState=O.state,K&&lw(p,C,!0),p.child}function Ri(m){var p=m.stateNode;p.pendingContext?ax(m,p.pendingContext,p.pendingContext!==p.context):p.context&&ax(m,p.context,!1),Eu(m,p.containerInfo)}function Zl(m,p,C,O,K){return Ed(),Th(K),p.flags|=256,Te(m,p,C,O),p.child}var pt={dehydrated:null,treeContext:null,retryLane:0};function nt(m){return{baseLanes:m,cachePool:null,transitions:null}}function Ot(m,p,C){var O=p.pendingProps,K=cs.current,te=!1,me=(p.flags&128)!==0,Oe;if((Oe=me)||(Oe=m!==null&&m.memoizedState===null?!1:(K&2)!==0),Oe?(te=!0,p.flags&=-129):(m===null||m.memoizedState!==null)&&(K|=1),Jn(cs,K&1),m===null)return W0(p),m=p.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((p.mode&1)===0?p.lanes=1:m.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(me=O.children,m=O.fallback,te?(O=p.mode,te=p.child,me={mode:"hidden",children:me},(O&1)===0&&te!==null?(te.childLanes=0,te.pendingProps=me):te=Mw(me,O,0,null),m=Rh(m,O,C,null),te.return=p,m.return=p,te.sibling=m,p.child=te,p.child.memoizedState=nt(C),p.memoizedState=pt,m):Tr(p,me));if(K=m.memoizedState,K!==null&&(Oe=K.dehydrated,Oe!==null))return xn(m,p,me,O,Oe,K,C);if(te){te=O.fallback,me=p.mode,K=m.child,Oe=K.sibling;var Ge={mode:"hidden",children:O.children};return(me&1)===0&&p.child!==K?(O=p.child,O.childLanes=0,O.pendingProps=Ge,p.deletions=null):(O=uf(K,Ge),O.subtreeFlags=K.subtreeFlags&14680064),Oe!==null?te=uf(Oe,te):(te=Rh(te,me,C,null),te.flags|=2),te.return=p,O.return=p,O.sibling=te,p.child=O,O=te,te=p.child,me=m.child.memoizedState,me=me===null?nt(C):{baseLanes:me.baseLanes|C,cachePool:null,transitions:me.transitions},te.memoizedState=me,te.childLanes=m.childLanes&~C,p.memoizedState=pt,O}return te=m.child,m=te.sibling,O=uf(te,{mode:"visible",children:O.children}),(p.mode&1)===0&&(O.lanes=C),O.return=p,O.sibling=null,m!==null&&(C=p.deletions,C===null?(p.deletions=[m],p.flags|=16):C.push(m)),p.child=O,p.memoizedState=null,O}function Tr(m,p){return p=Mw({mode:"visible",children:p},m.mode,0,null),p.return=m,m.child=p}function $r(m,p,C,O){return O!==null&&Th(O),Nd(p,m.child,null,C),m=Tr(p,p.pendingProps.children),m.flags|=2,p.memoizedState=null,m}function xn(m,p,C,O,K,te,me){if(C)return p.flags&256?(p.flags&=-257,O=Gg(Error(r(422))),$r(m,p,me,O)):p.memoizedState!==null?(p.child=m.child,p.flags|=128,null):(te=O.fallback,K=p.mode,O=Mw({mode:"visible",children:O.children},K,0,null),te=Rh(te,K,me,null),te.flags|=2,O.return=p,te.return=p,O.sibling=te,p.child=O,(p.mode&1)!==0&&Nd(p,m.child,null,me),p.child.memoizedState=nt(me),p.memoizedState=pt,te);if((p.mode&1)===0)return $r(m,p,me,null);if(K.data==="$!"){if(O=K.nextSibling&&K.nextSibling.dataset,O)var Oe=O.dgst;return O=Oe,te=Error(r(419)),O=Gg(te,O,void 0),$r(m,p,me,O)}if(Oe=(me&m.childLanes)!==0,oe||Oe){if(O=gi,O!==null){switch(me&-me){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}K=(K&(O.suspendedLanes|me))!==0?0:K,K!==0&&K!==te.retryLane&&(te.retryLane=K,jo(m,K),Vc(O,m,K,-1))}return hS(),O=Gg(Error(r(421))),$r(m,p,me,O)}return K.data==="$?"?(p.flags|=128,p.child=m.child,p=lJ.bind(null,m),K._reactRetry=p,null):(m=te.treeContext,_r=Gl(K.nextSibling),Eo=p,Gn=!0,No=null,m!==null&&(Mi[Fi++]=Co,Mi[Fi++]=vs,Mi[Fi++]=Cu,Co=m.id,vs=m.overflow,Cu=p),p=Tr(p,O.children),p.flags|=4096,p)}function dn(m,p,C){m.lanes|=p;var O=m.alternate;O!==null&&(O.lanes|=p),Dg(m.return,p,C)}function Mn(m,p,C,O,K){var te=m.memoizedState;te===null?m.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:O,tail:C,tailMode:K}:(te.isBackwards=p,te.rendering=null,te.renderingStartTime=0,te.last=O,te.tail=C,te.tailMode=K)}function wa(m,p,C){var O=p.pendingProps,K=O.revealOrder,te=O.tail;if(Te(m,p,O.children,C),O=cs.current,(O&2)!==0)O=O&1|2,p.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=p.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&dn(m,C,p);else if(m.tag===19)dn(m,C,p);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break e;for(;m.sibling===null;){if(m.return===null||m.return===p)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}O&=1}if(Jn(cs,O),(p.mode&1)===0)p.memoizedState=null;else switch(K){case"forwards":for(C=p.child,K=null;C!==null;)m=C.alternate,m!==null&&K0(m)===null&&(K=C),C=C.sibling;C=K,C===null?(K=p.child,p.child=null):(K=C.sibling,C.sibling=null),Mn(p,!1,K,C,te);break;case"backwards":for(C=null,K=p.child,p.child=null;K!==null;){if(m=K.alternate,m!==null&&K0(m)===null){p.child=K;break}m=K.sibling,K.sibling=C,C=K,K=m}Mn(p,!0,C,null,te);break;case"together":Mn(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function An(m,p){(p.mode&1)===0&&m!==null&&(m.alternate=null,p.alternate=null,p.flags|=2)}function mi(m,p,C){if(m!==null&&(p.dependencies=m.dependencies),Mh|=p.lanes,(C&p.childLanes)===0)return null;if(m!==null&&p.child!==m.child)throw Error(r(153));if(p.child!==null){for(m=p.child,C=uf(m,m.pendingProps),p.child=C,C.return=p;m.sibling!==null;)m=m.sibling,C=C.sibling=uf(m,m.pendingProps),C.return=p;C.sibling=null}return p.child}function Q3(m,p,C){switch(p.tag){case 3:Ri(p),Ed();break;case 5:q0(p);break;case 1:ui(p.type)&&Sd(p);break;case 4:Eu(p,p.stateNode.containerInfo);break;case 10:var O=p.type._context,K=p.memoizedProps.value;Jn(Ch,O._currentValue),O._currentValue=K;break;case 13:if(O=p.memoizedState,O!==null)return O.dehydrated!==null?(Jn(cs,cs.current&1),p.flags|=128,null):(C&p.child.childLanes)!==0?Ot(m,p,C):(Jn(cs,cs.current&1),m=mi(m,p,C),m!==null?m.sibling:null);Jn(cs,cs.current&1);break;case 19:if(O=(C&p.childLanes)!==0,(m.flags&128)!==0){if(O)return wa(m,p,C);p.flags|=128}if(K=p.memoizedState,K!==null&&(K.rendering=null,K.tail=null,K.lastEffect=null),Jn(cs,cs.current),O)break;return null;case 22:case 23:return p.lanes=0,Mr(m,p,C)}return mi(m,p,C)}var s9,Z3,a9,i9;s9=function(m,p){for(var C=p.child;C!==null;){if(C.tag===5||C.tag===6)m.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===p)break;for(;C.sibling===null;){if(C.return===null||C.return===p)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Z3=function(){},a9=function(m,p,C,O){var K=m.memoizedProps;if(K!==O){m=p.stateNode,ya(Qn.current);var te=null;switch(C){case"input":K=je(m,K),O=je(m,O),te=[];break;case"select":K=H({},K,{value:void 0}),O=H({},O,{value:void 0}),te=[];break;case"textarea":K=Mt(m,K),O=Mt(m,O),te=[];break;default:typeof K.onClick!="function"&&typeof O.onClick=="function"&&(m.onclick=vd)}Gt(C,O);var me;C=null;for(_t in K)if(!O.hasOwnProperty(_t)&&K.hasOwnProperty(_t)&&K[_t]!=null)if(_t==="style"){var Oe=K[_t];for(me in Oe)Oe.hasOwnProperty(me)&&(C||(C={}),C[me]="")}else _t!=="dangerouslySetInnerHTML"&&_t!=="children"&&_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&_t!=="autoFocus"&&(s.hasOwnProperty(_t)?te||(te=[]):(te=te||[]).push(_t,null));for(_t in O){var Ge=O[_t];if(Oe=K?.[_t],O.hasOwnProperty(_t)&&Ge!==Oe&&(Ge!=null||Oe!=null))if(_t==="style")if(Oe){for(me in Oe)!Oe.hasOwnProperty(me)||Ge&&Ge.hasOwnProperty(me)||(C||(C={}),C[me]="");for(me in Ge)Ge.hasOwnProperty(me)&&Oe[me]!==Ge[me]&&(C||(C={}),C[me]=Ge[me])}else C||(te||(te=[]),te.push(_t,C)),C=Ge;else _t==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Oe=Oe?Oe.__html:void 0,Ge!=null&&Oe!==Ge&&(te=te||[]).push(_t,Ge)):_t==="children"?typeof Ge!="string"&&typeof Ge!="number"||(te=te||[]).push(_t,""+Ge):_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&(s.hasOwnProperty(_t)?(Ge!=null&&_t==="onScroll"&&os("scroll",m),te||Oe===Ge||(te=[])):(te=te||[]).push(_t,Ge))}C&&(te=te||[]).push("style",C);var _t=te;(p.updateQueue=_t)&&(p.flags|=4)}},i9=function(m,p,C,O){C!==O&&(p.flags|=4)};function yx(m,p){if(!Gn)switch(m.tailMode){case"hidden":p=m.tail;for(var C=null;p!==null;)p.alternate!==null&&(C=p),p=p.sibling;C===null?m.tail=null:C.sibling=null;break;case"collapsed":C=m.tail;for(var O=null;C!==null;)C.alternate!==null&&(O=C),C=C.sibling;O===null?p||m.tail===null?m.tail=null:m.tail.sibling=null:O.sibling=null}}function no(m){var p=m.alternate!==null&&m.alternate.child===m.child,C=0,O=0;if(p)for(var K=m.child;K!==null;)C|=K.lanes|K.childLanes,O|=K.subtreeFlags&14680064,O|=K.flags&14680064,K.return=m,K=K.sibling;else for(K=m.child;K!==null;)C|=K.lanes|K.childLanes,O|=K.subtreeFlags,O|=K.flags,K.return=m,K=K.sibling;return m.subtreeFlags|=O,m.childLanes=C,p}function JX(m,p,C){var O=p.pendingProps;switch(Ma(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(p),null;case 1:return ui(p.type)&&$0(),no(p),null;case 3:return O=p.stateNode,bs(),ls(ci),ls(qa),di(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(m===null||m.child===null)&&(kh(p)?p.flags|=4:m===null||m.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,No!==null&&(uS(No),No=null))),Z3(m,p),no(p),null;case 5:zc(p);var K=ya(Vs.current);if(C=p.type,m!==null&&p.stateNode!=null)a9(m,p,C,O,K),m.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!O){if(p.stateNode===null)throw Error(r(166));return no(p),null}if(m=ya(Qn.current),kh(p)){O=p.stateNode,C=p.type;var te=p.memoizedProps;switch(O[Ko]=p,O[bh]=te,m=(p.mode&1)!==0,C){case"dialog":os("cancel",O),os("close",O);break;case"iframe":case"object":case"embed":os("load",O);break;case"video":case"audio":for(K=0;K<vu.length;K++)os(vu[K],O);break;case"source":os("error",O);break;case"img":case"image":case"link":os("error",O),os("load",O);break;case"details":os("toggle",O);break;case"input":Ne(O,te),os("invalid",O);break;case"select":O._wrapperState={wasMultiple:!!te.multiple},os("invalid",O);break;case"textarea":ur(O,te),os("invalid",O)}Gt(C,te),K=null;for(var me in te)if(te.hasOwnProperty(me)){var Oe=te[me];me==="children"?typeof Oe=="string"?O.textContent!==Oe&&(te.suppressHydrationWarning!==!0&&vh(O.textContent,Oe,m),K=["children",Oe]):typeof Oe=="number"&&O.textContent!==""+Oe&&(te.suppressHydrationWarning!==!0&&vh(O.textContent,Oe,m),K=["children",""+Oe]):s.hasOwnProperty(me)&&Oe!=null&&me==="onScroll"&&os("scroll",O)}switch(C){case"input":ke(O),Nt(O,te,!0);break;case"textarea":ke(O),dr(O);break;case"select":case"option":break;default:typeof te.onClick=="function"&&(O.onclick=vd)}O=K,p.updateQueue=O,O!==null&&(p.flags|=4)}else{me=K.nodeType===9?K:K.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=wt(C)),m==="http://www.w3.org/1999/xhtml"?C==="script"?(m=me.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof O.is=="string"?m=me.createElement(C,{is:O.is}):(m=me.createElement(C),C==="select"&&(me=m,O.multiple?me.multiple=!0:O.size&&(me.size=O.size))):m=me.createElementNS(m,C),m[Ko]=p,m[bh]=O,s9(m,p,!1,!1),p.stateNode=m;e:{switch(me=Zt(C,O),C){case"dialog":os("cancel",m),os("close",m),K=O;break;case"iframe":case"object":case"embed":os("load",m),K=O;break;case"video":case"audio":for(K=0;K<vu.length;K++)os(vu[K],m);K=O;break;case"source":os("error",m),K=O;break;case"img":case"image":case"link":os("error",m),os("load",m),K=O;break;case"details":os("toggle",m),K=O;break;case"input":Ne(m,O),K=je(m,O),os("invalid",m);break;case"option":K=O;break;case"select":m._wrapperState={wasMultiple:!!O.multiple},K=H({},O,{value:void 0}),os("invalid",m);break;case"textarea":ur(m,O),K=Mt(m,O),os("invalid",m);break;default:K=O}Gt(C,K),Oe=K;for(te in Oe)if(Oe.hasOwnProperty(te)){var Ge=Oe[te];te==="style"?Ut(m,Ge):te==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Ge!=null&&vt(m,Ge)):te==="children"?typeof Ge=="string"?(C!=="textarea"||Ge!=="")&&st(m,Ge):typeof Ge=="number"&&st(m,""+Ge):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(s.hasOwnProperty(te)?Ge!=null&&te==="onScroll"&&os("scroll",m):Ge!=null&&b(m,te,Ge,me))}switch(C){case"input":ke(m),Nt(m,O,!1);break;case"textarea":ke(m),dr(m);break;case"option":O.value!=null&&m.setAttribute("value",""+se(O.value));break;case"select":m.multiple=!!O.multiple,te=O.value,te!=null?Rt(m,!!O.multiple,te,!1):O.defaultValue!=null&&Rt(m,!!O.multiple,O.defaultValue,!0);break;default:typeof K.onClick=="function"&&(m.onclick=vd)}switch(C){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}}O&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return no(p),null;case 6:if(m&&p.stateNode!=null)i9(m,p,m.memoizedProps,O);else{if(typeof O!="string"&&p.stateNode===null)throw Error(r(166));if(C=ya(Vs.current),ya(Qn.current),kh(p)){if(O=p.stateNode,C=p.memoizedProps,O[Ko]=p,(te=O.nodeValue!==C)&&(m=Eo,m!==null))switch(m.tag){case 3:vh(O.nodeValue,C,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&vh(O.nodeValue,C,(m.mode&1)!==0)}te&&(p.flags|=4)}else O=(C.nodeType===9?C:C.ownerDocument).createTextNode(O),O[Ko]=p,p.stateNode=O}return no(p),null;case 13:if(ls(cs),O=p.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Gn&&_r!==null&&(p.mode&1)!==0&&(p.flags&128)===0)ox(),Ed(),p.flags|=98560,te=!1;else if(te=kh(p),O!==null&&O.dehydrated!==null){if(m===null){if(!te)throw Error(r(318));if(te=p.memoizedState,te=te!==null?te.dehydrated:null,!te)throw Error(r(317));te[Ko]=p}else Ed(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;no(p),te=!1}else No!==null&&(uS(No),No=null),te=!0;if(!te)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=C,p):(O=O!==null,O!==(m!==null&&m.memoizedState!==null)&&O&&(p.child.flags|=8192,(p.mode&1)!==0&&(m===null||(cs.current&1)!==0?Ya===0&&(Ya=3):hS())),p.updateQueue!==null&&(p.flags|=4),no(p),null);case 4:return bs(),Z3(m,p),m===null&&xd(p.stateNode.containerInfo),no(p),null;case 10:return Fg(p.type._context),no(p),null;case 17:return ui(p.type)&&$0(),no(p),null;case 19:if(ls(cs),te=p.memoizedState,te===null)return no(p),null;if(O=(p.flags&128)!==0,me=te.rendering,me===null)if(O)yx(te,!1);else{if(Ya!==0||m!==null&&(m.flags&128)!==0)for(m=p.child;m!==null;){if(me=K0(m),me!==null){for(p.flags|=128,yx(te,!1),O=me.updateQueue,O!==null&&(p.updateQueue=O,p.flags|=4),p.subtreeFlags=0,O=C,C=p.child;C!==null;)te=C,m=O,te.flags&=14680066,me=te.alternate,me===null?(te.childLanes=0,te.lanes=m,te.child=null,te.subtreeFlags=0,te.memoizedProps=null,te.memoizedState=null,te.updateQueue=null,te.dependencies=null,te.stateNode=null):(te.childLanes=me.childLanes,te.lanes=me.lanes,te.child=me.child,te.subtreeFlags=0,te.deletions=null,te.memoizedProps=me.memoizedProps,te.memoizedState=me.memoizedState,te.updateQueue=me.updateQueue,te.type=me.type,m=me.dependencies,te.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),C=C.sibling;return Jn(cs,cs.current&1|2),p.child}m=m.sibling}te.tail!==null&&Tt()>Kg&&(p.flags|=128,O=!0,yx(te,!1),p.lanes=4194304)}else{if(!O)if(m=K0(me),m!==null){if(p.flags|=128,O=!0,C=m.updateQueue,C!==null&&(p.updateQueue=C,p.flags|=4),yx(te,!0),te.tail===null&&te.tailMode==="hidden"&&!me.alternate&&!Gn)return no(p),null}else 2*Tt()-te.renderingStartTime>Kg&&C!==1073741824&&(p.flags|=128,O=!0,yx(te,!1),p.lanes=4194304);te.isBackwards?(me.sibling=p.child,p.child=me):(C=te.last,C!==null?C.sibling=me:p.child=me,te.last=me)}return te.tail!==null?(p=te.tail,te.rendering=p,te.tail=p.sibling,te.renderingStartTime=Tt(),p.sibling=null,C=cs.current,Jn(cs,O?C&1|2:C&1),p):(no(p),null);case 22:case 23:return fS(),O=p.memoizedState!==null,m!==null&&m.memoizedState!==null!==O&&(p.flags|=8192),O&&(p.mode&1)!==0?(Sl&1073741824)!==0&&(no(p),p.subtreeFlags&6&&(p.flags|=8192)):no(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function QX(m,p){switch(Ma(p),p.tag){case 1:return ui(p.type)&&$0(),m=p.flags,m&65536?(p.flags=m&-65537|128,p):null;case 3:return bs(),ls(ci),ls(qa),di(),m=p.flags,(m&65536)!==0&&(m&128)===0?(p.flags=m&-65537|128,p):null;case 5:return zc(p),null;case 13:if(ls(cs),m=p.memoizedState,m!==null&&m.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Ed()}return m=p.flags,m&65536?(p.flags=m&-65537|128,p):null;case 19:return ls(cs),null;case 4:return bs(),null;case 10:return Fg(p.type._context),null;case 22:case 23:return fS(),null;case 24:return null;default:return null}}var bw=!1,so=!1,ZX=typeof WeakSet=="function"?WeakSet:Set,Dr=null;function Vg(m,p){var C=m.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(O){ra(m,p,O)}else C.current=null}function eS(m,p,C){try{C()}catch(O){ra(m,p,O)}}var o9=!1;function eJ(m,p){if(tx=ag,m=pa(),R0(m)){if("selectionStart"in m)var C={start:m.selectionStart,end:m.selectionEnd};else e:{C=(C=m.ownerDocument)&&C.defaultView||window;var O=C.getSelection&&C.getSelection();if(O&&O.rangeCount!==0){C=O.anchorNode;var K=O.anchorOffset,te=O.focusNode;O=O.focusOffset;try{C.nodeType,te.nodeType}catch{C=null;break e}var me=0,Oe=-1,Ge=-1,_t=0,Jt=0,tr=m,Yt=null;t:for(;;){for(var Nr;tr!==C||K!==0&&tr.nodeType!==3||(Oe=me+K),tr!==te||O!==0&&tr.nodeType!==3||(Ge=me+O),tr.nodeType===3&&(me+=tr.nodeValue.length),(Nr=tr.firstChild)!==null;)Yt=tr,tr=Nr;for(;;){if(tr===m)break t;if(Yt===C&&++_t===K&&(Oe=me),Yt===te&&++Jt===O&&(Ge=me),(Nr=tr.nextSibling)!==null)break;tr=Yt,Yt=tr.parentNode}tr=Nr}C=Oe===-1||Ge===-1?null:{start:Oe,end:Ge}}else C=null}C=C||{start:0,end:0}}else C=null;for(rx={focusedElem:m,selectionRange:C},ag=!1,Dr=p;Dr!==null;)if(p=Dr,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,Dr=m;else for(;Dr!==null;){p=Dr;try{var Ir=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Ir!==null){var Lr=Ir.memoizedProps,ba=Ir.memoizedState,ct=p.stateNode,Qe=ct.getSnapshotBeforeUpdate(p.elementType===p.type?Lr:Ka(p.type,Lr),ba);ct.__reactInternalSnapshotBeforeUpdate=Qe}break;case 3:var ht=p.stateNode.containerInfo;ht.nodeType===1?ht.textContent="":ht.nodeType===9&&ht.documentElement&&ht.removeChild(ht.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(cr){ra(p,p.return,cr)}if(m=p.sibling,m!==null){m.return=p.return,Dr=m;break}Dr=p.return}return Ir=o9,o9=!1,Ir}function vx(m,p,C){var O=p.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var K=O=O.next;do{if((K.tag&m)===m){var te=K.destroy;K.destroy=void 0,te!==void 0&&eS(p,C,te)}K=K.next}while(K!==O)}}function _w(m,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var C=p=p.next;do{if((C.tag&m)===m){var O=C.create;C.destroy=O()}C=C.next}while(C!==p)}}function tS(m){var p=m.ref;if(p!==null){var C=m.stateNode;switch(m.tag){case 5:m=C;break;default:m=C}typeof p=="function"?p(m):p.current=m}}function l9(m){var p=m.alternate;p!==null&&(m.alternate=null,l9(p)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(p=m.stateNode,p!==null&&(delete p[Ko],delete p[bh],delete p[Tg],delete p[iw],delete p[ow])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function c9(m){return m.tag===5||m.tag===3||m.tag===4}function u9(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||c9(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function rS(m,p,C){var O=m.tag;if(O===5||O===6)m=m.stateNode,p?C.nodeType===8?C.parentNode.insertBefore(m,p):C.insertBefore(m,p):(C.nodeType===8?(p=C.parentNode,p.insertBefore(m,C)):(p=C,p.appendChild(m)),C=C._reactRootContainer,C!=null||p.onclick!==null||(p.onclick=vd));else if(O!==4&&(m=m.child,m!==null))for(rS(m,p,C),m=m.sibling;m!==null;)rS(m,p,C),m=m.sibling}function nS(m,p,C){var O=m.tag;if(O===5||O===6)m=m.stateNode,p?C.insertBefore(m,p):C.appendChild(m);else if(O!==4&&(m=m.child,m!==null))for(nS(m,p,C),m=m.sibling;m!==null;)nS(m,p,C),m=m.sibling}var Ii=null,Hc=!1;function sf(m,p,C){for(C=C.child;C!==null;)d9(m,p,C),C=C.sibling}function d9(m,p,C){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(on,C)}catch{}switch(C.tag){case 5:so||Vg(C,p);case 6:var O=Ii,K=Hc;Ii=null,sf(m,p,C),Ii=O,Hc=K,Ii!==null&&(Hc?(m=Ii,C=C.stateNode,m.nodeType===8?m.parentNode.removeChild(C):m.removeChild(C)):Ii.removeChild(C.stateNode));break;case 18:Ii!==null&&(Hc?(m=Ii,C=C.stateNode,m.nodeType===8?kg(m.parentNode,C):m.nodeType===1&&kg(m,C),Zi(m)):kg(Ii,C.stateNode));break;case 4:O=Ii,K=Hc,Ii=C.stateNode.containerInfo,Hc=!0,sf(m,p,C),Ii=O,Hc=K;break;case 0:case 11:case 14:case 15:if(!so&&(O=C.updateQueue,O!==null&&(O=O.lastEffect,O!==null))){K=O=O.next;do{var te=K,me=te.destroy;te=te.tag,me!==void 0&&((te&2)!==0||(te&4)!==0)&&eS(C,p,me),K=K.next}while(K!==O)}sf(m,p,C);break;case 1:if(!so&&(Vg(C,p),O=C.stateNode,typeof O.componentWillUnmount=="function"))try{O.props=C.memoizedProps,O.state=C.memoizedState,O.componentWillUnmount()}catch(Oe){ra(C,p,Oe)}sf(m,p,C);break;case 21:sf(m,p,C);break;case 22:C.mode&1?(so=(O=so)||C.memoizedState!==null,sf(m,p,C),so=O):sf(m,p,C);break;default:sf(m,p,C)}}function f9(m){var p=m.updateQueue;if(p!==null){m.updateQueue=null;var C=m.stateNode;C===null&&(C=m.stateNode=new ZX),p.forEach(function(O){var K=cJ.bind(null,m,O);C.has(O)||(C.add(O),O.then(K,K))})}}function Gc(m,p){var C=p.deletions;if(C!==null)for(var O=0;O<C.length;O++){var K=C[O];try{var te=m,me=p,Oe=me;e:for(;Oe!==null;){switch(Oe.tag){case 5:Ii=Oe.stateNode,Hc=!1;break e;case 3:Ii=Oe.stateNode.containerInfo,Hc=!0;break e;case 4:Ii=Oe.stateNode.containerInfo,Hc=!0;break e}Oe=Oe.return}if(Ii===null)throw Error(r(160));d9(te,me,K),Ii=null,Hc=!1;var Ge=K.alternate;Ge!==null&&(Ge.return=null),K.return=null}catch(_t){ra(K,p,_t)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)h9(p,m),p=p.sibling}function h9(m,p){var C=m.alternate,O=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Gc(p,m),Mu(m),O&4){try{vx(3,m,m.return),_w(3,m)}catch(Lr){ra(m,m.return,Lr)}try{vx(5,m,m.return)}catch(Lr){ra(m,m.return,Lr)}}break;case 1:Gc(p,m),Mu(m),O&512&&C!==null&&Vg(C,C.return);break;case 5:if(Gc(p,m),Mu(m),O&512&&C!==null&&Vg(C,C.return),m.flags&32){var K=m.stateNode;try{st(K,"")}catch(Lr){ra(m,m.return,Lr)}}if(O&4&&(K=m.stateNode,K!=null)){var te=m.memoizedProps,me=C!==null?C.memoizedProps:te,Oe=m.type,Ge=m.updateQueue;if(m.updateQueue=null,Ge!==null)try{Oe==="input"&&te.type==="radio"&&te.name!=null&&We(K,te),Zt(Oe,me);var _t=Zt(Oe,te);for(me=0;me<Ge.length;me+=2){var Jt=Ge[me],tr=Ge[me+1];Jt==="style"?Ut(K,tr):Jt==="dangerouslySetInnerHTML"?vt(K,tr):Jt==="children"?st(K,tr):b(K,Jt,tr,_t)}switch(Oe){case"input":$e(K,te);break;case"textarea":wr(K,te);break;case"select":var Yt=K._wrapperState.wasMultiple;K._wrapperState.wasMultiple=!!te.multiple;var Nr=te.value;Nr!=null?Rt(K,!!te.multiple,Nr,!1):Yt!==!!te.multiple&&(te.defaultValue!=null?Rt(K,!!te.multiple,te.defaultValue,!0):Rt(K,!!te.multiple,te.multiple?[]:"",!1))}K[bh]=te}catch(Lr){ra(m,m.return,Lr)}}break;case 6:if(Gc(p,m),Mu(m),O&4){if(m.stateNode===null)throw Error(r(162));K=m.stateNode,te=m.memoizedProps;try{K.nodeValue=te}catch(Lr){ra(m,m.return,Lr)}}break;case 3:if(Gc(p,m),Mu(m),O&4&&C!==null&&C.memoizedState.isDehydrated)try{Zi(p.containerInfo)}catch(Lr){ra(m,m.return,Lr)}break;case 4:Gc(p,m),Mu(m);break;case 13:Gc(p,m),Mu(m),K=m.child,K.flags&8192&&(te=K.memoizedState!==null,K.stateNode.isHidden=te,!te||K.alternate!==null&&K.alternate.memoizedState!==null||(iS=Tt())),O&4&&f9(m);break;case 22:if(Jt=C!==null&&C.memoizedState!==null,m.mode&1?(so=(_t=so)||Jt,Gc(p,m),so=_t):Gc(p,m),Mu(m),O&8192){if(_t=m.memoizedState!==null,(m.stateNode.isHidden=_t)&&!Jt&&(m.mode&1)!==0)for(Dr=m,Jt=m.child;Jt!==null;){for(tr=Dr=Jt;Dr!==null;){switch(Yt=Dr,Nr=Yt.child,Yt.tag){case 0:case 11:case 14:case 15:vx(4,Yt,Yt.return);break;case 1:Vg(Yt,Yt.return);var Ir=Yt.stateNode;if(typeof Ir.componentWillUnmount=="function"){O=Yt,C=Yt.return;try{p=O,Ir.props=p.memoizedProps,Ir.state=p.memoizedState,Ir.componentWillUnmount()}catch(Lr){ra(O,C,Lr)}}break;case 5:Vg(Yt,Yt.return);break;case 22:if(Yt.memoizedState!==null){p9(tr);continue}}Nr!==null?(Nr.return=Yt,Dr=Nr):p9(tr)}Jt=Jt.sibling}e:for(Jt=null,tr=m;;){if(tr.tag===5){if(Jt===null){Jt=tr;try{K=tr.stateNode,_t?(te=K.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none"):(Oe=tr.stateNode,Ge=tr.memoizedProps.style,me=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null,Oe.style.display=kt("display",me))}catch(Lr){ra(m,m.return,Lr)}}}else if(tr.tag===6){if(Jt===null)try{tr.stateNode.nodeValue=_t?"":tr.memoizedProps}catch(Lr){ra(m,m.return,Lr)}}else if((tr.tag!==22&&tr.tag!==23||tr.memoizedState===null||tr===m)&&tr.child!==null){tr.child.return=tr,tr=tr.child;continue}if(tr===m)break e;for(;tr.sibling===null;){if(tr.return===null||tr.return===m)break e;Jt===tr&&(Jt=null),tr=tr.return}Jt===tr&&(Jt=null),tr.sibling.return=tr.return,tr=tr.sibling}}break;case 19:Gc(p,m),Mu(m),O&4&&f9(m);break;case 21:break;default:Gc(p,m),Mu(m)}}function Mu(m){var p=m.flags;if(p&2){try{e:{for(var C=m.return;C!==null;){if(c9(C)){var O=C;break e}C=C.return}throw Error(r(160))}switch(O.tag){case 5:var K=O.stateNode;O.flags&32&&(st(K,""),O.flags&=-33);var te=u9(m);nS(m,te,K);break;case 3:case 4:var me=O.stateNode.containerInfo,Oe=u9(m);rS(m,Oe,me);break;default:throw Error(r(161))}}catch(Ge){ra(m,m.return,Ge)}m.flags&=-3}p&4096&&(m.flags&=-4097)}function tJ(m,p,C){Dr=m,m9(m)}function m9(m,p,C){for(var O=(m.mode&1)!==0;Dr!==null;){var K=Dr,te=K.child;if(K.tag===22&&O){var me=K.memoizedState!==null||bw;if(!me){var Oe=K.alternate,Ge=Oe!==null&&Oe.memoizedState!==null||so;Oe=bw;var _t=so;if(bw=me,(so=Ge)&&!_t)for(Dr=K;Dr!==null;)me=Dr,Ge=me.child,me.tag===22&&me.memoizedState!==null?x9(K):Ge!==null?(Ge.return=me,Dr=Ge):x9(K);for(;te!==null;)Dr=te,m9(te),te=te.sibling;Dr=K,bw=Oe,so=_t}g9(m)}else(K.subtreeFlags&8772)!==0&&te!==null?(te.return=K,Dr=te):g9(m)}}function g9(m){for(;Dr!==null;){var p=Dr;if((p.flags&8772)!==0){var C=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:so||_w(5,p);break;case 1:var O=p.stateNode;if(p.flags&4&&!so)if(C===null)O.componentDidMount();else{var K=p.elementType===p.type?C.memoizedProps:Ka(p.type,C.memoizedProps);O.componentDidUpdate(K,C.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var te=p.updateQueue;te!==null&&Os(p,te,O);break;case 3:var me=p.updateQueue;if(me!==null){if(C=null,p.child!==null)switch(p.child.tag){case 5:C=p.child.stateNode;break;case 1:C=p.child.stateNode}Os(p,me,C)}break;case 5:var Oe=p.stateNode;if(C===null&&p.flags&4){C=Oe;var Ge=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ge.autoFocus&&C.focus();break;case"img":Ge.src&&(C.src=Ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var _t=p.alternate;if(_t!==null){var Jt=_t.memoizedState;if(Jt!==null){var tr=Jt.dehydrated;tr!==null&&Zi(tr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}so||p.flags&512&&tS(p)}catch(Yt){ra(p,p.return,Yt)}}if(p===m){Dr=null;break}if(C=p.sibling,C!==null){C.return=p.return,Dr=C;break}Dr=p.return}}function p9(m){for(;Dr!==null;){var p=Dr;if(p===m){Dr=null;break}var C=p.sibling;if(C!==null){C.return=p.return,Dr=C;break}Dr=p.return}}function x9(m){for(;Dr!==null;){var p=Dr;try{switch(p.tag){case 0:case 11:case 15:var C=p.return;try{_w(4,p)}catch(Ge){ra(p,C,Ge)}break;case 1:var O=p.stateNode;if(typeof O.componentDidMount=="function"){var K=p.return;try{O.componentDidMount()}catch(Ge){ra(p,K,Ge)}}var te=p.return;try{tS(p)}catch(Ge){ra(p,te,Ge)}break;case 5:var me=p.return;try{tS(p)}catch(Ge){ra(p,me,Ge)}}}catch(Ge){ra(p,p.return,Ge)}if(p===m){Dr=null;break}var Oe=p.sibling;if(Oe!==null){Oe.return=p.return,Dr=Oe;break}Dr=p.return}}var rJ=Math.ceil,Sw=E.ReactCurrentDispatcher,sS=E.ReactCurrentOwner,ec=E.ReactCurrentBatchConfig,On=0,gi=null,Fa=null,Li=0,Sl=0,qg=Lc(0),Ya=0,wx=null,Mh=0,kw=0,aS=0,bx=null,Jo=null,iS=0,Kg=1/0,Md=null,Tw=!1,oS=null,af=null,Cw=!1,of=null,Ew=0,_x=0,lS=null,Nw=-1,Aw=0;function Mo(){return(On&6)!==0?Tt():Nw!==-1?Nw:Nw=Tt()}function lf(m){return(m.mode&1)===0?1:(On&2)!==0&&Li!==0?Li&-Li:lx.transition!==null?(Aw===0&&(Aw=Hn()),Aw):(m=cn,m!==0||(m=window.event,m=m===void 0?16:W2(m.type)),m)}function Vc(m,p,C,O){if(50<_x)throw _x=0,lS=null,Error(r(185));is(m,C,O),((On&2)===0||m!==gi)&&(m===gi&&((On&2)===0&&(kw|=C),Ya===4&&cf(m,Li)),Qo(m,O),C===1&&On===0&&(p.mode&1)===0&&(Kg=Tt()+500,z0&&Su()))}function Qo(m,p){var C=m.callbackNode;Rr(m,p);var O=Se(m,m===gi?Li:0);if(O===0)C!==null&&Ie(C),m.callbackNode=null,m.callbackPriority=0;else if(p=O&-O,m.callbackPriority!==p){if(C!=null&&Ie(C),p===1)m.tag===0?Bc(v9.bind(null,m)):Sh(v9.bind(null,m)),sw(function(){(On&6)===0&&Su()}),C=null;else{switch(gl(O)){case 1:C=Ft;break;case 4:C=Ct;break;case 16:C=fr;break;case 536870912:C=Fr;break;default:C=fr}C=E9(C,y9.bind(null,m))}m.callbackPriority=p,m.callbackNode=C}}function y9(m,p){if(Nw=-1,Aw=0,(On&6)!==0)throw Error(r(327));var C=m.callbackNode;if(Yg()&&m.callbackNode!==C)return null;var O=Se(m,m===gi?Li:0);if(O===0)return null;if((O&30)!==0||(O&m.expiredLanes)!==0||p)p=jw(m,O);else{p=O;var K=On;On|=2;var te=b9();(gi!==m||Li!==p)&&(Md=null,Kg=Tt()+500,Dh(m,p));do try{aJ();break}catch(Oe){w9(m,Oe)}while(!0);Mg(),Sw.current=te,On=K,Fa!==null?p=0:(gi=null,Li=0,p=Ya)}if(p!==0){if(p===2&&(K=Xr(m),K!==0&&(O=K,p=cS(m,K))),p===1)throw C=wx,Dh(m,0),cf(m,O),Qo(m,Tt()),C;if(p===6)cf(m,O);else{if(K=m.current.alternate,(O&30)===0&&!nJ(K)&&(p=jw(m,O),p===2&&(te=Xr(m),te!==0&&(O=te,p=cS(m,te))),p===1))throw C=wx,Dh(m,0),cf(m,O),Qo(m,Tt()),C;switch(m.finishedWork=K,m.finishedLanes=O,p){case 0:case 1:throw Error(r(345));case 2:Oh(m,Jo,Md);break;case 3:if(cf(m,O),(O&130023424)===O&&(p=iS+500-Tt(),10<p)){if(Se(m,0)!==0)break;if(K=m.suspendedLanes,(K&O)!==O){Mo(),m.pingedLanes|=m.suspendedLanes&K;break}m.timeoutHandle=To(Oh.bind(null,m,Jo,Md),p);break}Oh(m,Jo,Md);break;case 4:if(cf(m,O),(O&4194240)===O)break;for(p=m.eventTimes,K=-1;0<O;){var me=31-Pr(O);te=1<<me,me=p[me],me>K&&(K=me),O&=~te}if(O=K,O=Tt()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*rJ(O/1960))-O,10<O){m.timeoutHandle=To(Oh.bind(null,m,Jo,Md),O);break}Oh(m,Jo,Md);break;case 5:Oh(m,Jo,Md);break;default:throw Error(r(329))}}}return Qo(m,Tt()),m.callbackNode===C?y9.bind(null,m):null}function cS(m,p){var C=bx;return m.current.memoizedState.isDehydrated&&(Dh(m,p).flags|=256),m=jw(m,p),m!==2&&(p=Jo,Jo=C,p!==null&&uS(p)),m}function uS(m){Jo===null?Jo=m:Jo.push.apply(Jo,m)}function nJ(m){for(var p=m;;){if(p.flags&16384){var C=p.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var O=0;O<C.length;O++){var K=C[O],te=K.getSnapshot;K=K.value;try{if(!to(te(),K))return!1}catch{return!1}}}if(C=p.child,p.subtreeFlags&16384&&C!==null)C.return=p,p=C;else{if(p===m)break;for(;p.sibling===null;){if(p.return===null||p.return===m)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function cf(m,p){for(p&=~aS,p&=~kw,m.suspendedLanes|=p,m.pingedLanes&=~p,m=m.expirationTimes;0<p;){var C=31-Pr(p),O=1<<C;m[C]=-1,p&=~O}}function v9(m){if((On&6)!==0)throw Error(r(327));Yg();var p=Se(m,0);if((p&1)===0)return Qo(m,Tt()),null;var C=jw(m,p);if(m.tag!==0&&C===2){var O=Xr(m);O!==0&&(p=O,C=cS(m,O))}if(C===1)throw C=wx,Dh(m,0),cf(m,p),Qo(m,Tt()),C;if(C===6)throw Error(r(345));return m.finishedWork=m.current.alternate,m.finishedLanes=p,Oh(m,Jo,Md),Qo(m,Tt()),null}function dS(m,p){var C=On;On|=1;try{return m(p)}finally{On=C,On===0&&(Kg=Tt()+500,z0&&Su())}}function Fh(m){of!==null&&of.tag===0&&(On&6)===0&&Yg();var p=On;On|=1;var C=ec.transition,O=cn;try{if(ec.transition=null,cn=1,m)return m()}finally{cn=O,ec.transition=C,On=p,(On&6)===0&&Su()}}function fS(){Sl=qg.current,ls(qg)}function Dh(m,p){m.finishedWork=null,m.finishedLanes=0;var C=m.timeoutHandle;if(C!==-1&&(m.timeoutHandle=-1,sx(C)),Fa!==null)for(C=Fa.return;C!==null;){var O=C;switch(Ma(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&$0();break;case 3:bs(),ls(ci),ls(qa),di();break;case 5:zc(O);break;case 4:bs();break;case 13:ls(cs);break;case 19:ls(cs);break;case 10:Fg(O.type._context);break;case 22:case 23:fS()}C=C.return}if(gi=m,Fa=m=uf(m.current,null),Li=Sl=p,Ya=0,wx=null,aS=kw=Mh=0,Jo=bx=null,Yl!==null){for(p=0;p<Yl.length;p++)if(C=Yl[p],O=C.interleaved,O!==null){C.interleaved=null;var K=O.next,te=C.pending;if(te!==null){var me=te.next;te.next=K,O.next=me}C.pending=O}Yl=null}return m}function w9(m,p){do{var C=Fa;try{if(Mg(),Y0.current=ef,_l){for(var O=Yn.memoizedState;O!==null;){var K=O.queue;K!==null&&(K.pending=null),O=O.next}_l=!1}if(Oi=0,ea=Rs=Yn=null,Nu=!1,Xo=0,sS.current=null,C===null||C.return===null){Ya=1,wx=p,Fa=null;break}e:{var te=m,me=C.return,Oe=C,Ge=p;if(p=Li,Oe.flags|=32768,Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var _t=Ge,Jt=Oe,tr=Jt.tag;if((Jt.mode&1)===0&&(tr===0||tr===11||tr===15)){var Yt=Jt.alternate;Yt?(Jt.updateQueue=Yt.updateQueue,Jt.memoizedState=Yt.memoizedState,Jt.lanes=Yt.lanes):(Jt.updateQueue=null,Jt.memoizedState=null)}var Nr=D(me);if(Nr!==null){Nr.flags&=-257,U(Nr,me,Oe,te,p),Nr.mode&1&&S(te,_t,p),p=Nr,Ge=_t;var Ir=p.updateQueue;if(Ir===null){var Lr=new Set;Lr.add(Ge),p.updateQueue=Lr}else Ir.add(Ge);break e}else{if((p&1)===0){S(te,_t,p),hS();break e}Ge=Error(r(426))}}else if(Gn&&Oe.mode&1){var ba=D(me);if(ba!==null){(ba.flags&65536)===0&&(ba.flags|=256),U(ba,me,Oe,te,p),Th(Pd(Ge,Oe));break e}}te=Ge=Pd(Ge,Oe),Ya!==4&&(Ya=2),bx===null?bx=[te]:bx.push(te),te=me;do{switch(te.tag){case 3:te.flags|=65536,p&=-p,te.lanes|=p;var ct=ww(te,Ge,p);Ah(te,ct);break e;case 1:Oe=Ge;var Qe=te.type,ht=te.stateNode;if((te.flags&128)===0&&(typeof Qe.getDerivedStateFromError=="function"||ht!==null&&typeof ht.componentDidCatch=="function"&&(af===null||!af.has(ht)))){te.flags|=65536,p&=-p,te.lanes|=p;var cr=w(te,Oe,p);Ah(te,cr);break e}}te=te.return}while(te!==null)}S9(C)}catch(Br){p=Br,Fa===C&&C!==null&&(Fa=C=C.return);continue}break}while(!0)}function b9(){var m=Sw.current;return Sw.current=ef,m===null?ef:m}function hS(){(Ya===0||Ya===3||Ya===2)&&(Ya=4),gi===null||(Mh&268435455)===0&&(kw&268435455)===0||cf(gi,Li)}function jw(m,p){var C=On;On|=2;var O=b9();(gi!==m||Li!==p)&&(Md=null,Dh(m,p));do try{sJ();break}catch(K){w9(m,K)}while(!0);if(Mg(),On=C,Sw.current=O,Fa!==null)throw Error(r(261));return gi=null,Li=0,Ya}function sJ(){for(;Fa!==null;)_9(Fa)}function aJ(){for(;Fa!==null&&!Ze();)_9(Fa)}function _9(m){var p=C9(m.alternate,m,Sl);m.memoizedProps=m.pendingProps,p===null?S9(m):Fa=p,sS.current=null}function S9(m){var p=m;do{var C=p.alternate;if(m=p.return,(p.flags&32768)===0){if(C=JX(C,p,Sl),C!==null){Fa=C;return}}else{if(C=QX(C,p),C!==null){C.flags&=32767,Fa=C;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Ya=6,Fa=null;return}}if(p=p.sibling,p!==null){Fa=p;return}Fa=p=m}while(p!==null);Ya===0&&(Ya=5)}function Oh(m,p,C){var O=cn,K=ec.transition;try{ec.transition=null,cn=1,iJ(m,p,C,O)}finally{ec.transition=K,cn=O}return null}function iJ(m,p,C,O){do Yg();while(of!==null);if((On&6)!==0)throw Error(r(327));C=m.finishedWork;var K=m.finishedLanes;if(C===null)return null;if(m.finishedWork=null,m.finishedLanes=0,C===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0;var te=C.lanes|C.childLanes;if(Hs(m,te),m===gi&&(Fa=gi=null,Li=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||Cw||(Cw=!0,E9(fr,function(){return Yg(),null})),te=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||te){te=ec.transition,ec.transition=null;var me=cn;cn=1;var Oe=On;On|=4,sS.current=null,eJ(m,C),h9(C,m),gh(rx),ag=!!tx,rx=tx=null,m.current=C,tJ(C),mt(),On=Oe,cn=me,ec.transition=te}else m.current=C;if(Cw&&(Cw=!1,of=m,Ew=K),te=m.pendingLanes,te===0&&(af=null),Yr(C.stateNode),Qo(m,Tt()),p!==null)for(O=m.onRecoverableError,C=0;C<p.length;C++)K=p[C],O(K.value,{componentStack:K.stack,digest:K.digest});if(Tw)throw Tw=!1,m=oS,oS=null,m;return(Ew&1)!==0&&m.tag!==0&&Yg(),te=m.pendingLanes,(te&1)!==0?m===lS?_x++:(_x=0,lS=m):_x=0,Su(),null}function Yg(){if(of!==null){var m=gl(Ew),p=ec.transition,C=cn;try{if(ec.transition=null,cn=16>m?16:m,of===null)var O=!1;else{if(m=of,of=null,Ew=0,(On&6)!==0)throw Error(r(331));var K=On;for(On|=4,Dr=m.current;Dr!==null;){var te=Dr,me=te.child;if((Dr.flags&16)!==0){var Oe=te.deletions;if(Oe!==null){for(var Ge=0;Ge<Oe.length;Ge++){var _t=Oe[Ge];for(Dr=_t;Dr!==null;){var Jt=Dr;switch(Jt.tag){case 0:case 11:case 15:vx(8,Jt,te)}var tr=Jt.child;if(tr!==null)tr.return=Jt,Dr=tr;else for(;Dr!==null;){Jt=Dr;var Yt=Jt.sibling,Nr=Jt.return;if(l9(Jt),Jt===_t){Dr=null;break}if(Yt!==null){Yt.return=Nr,Dr=Yt;break}Dr=Nr}}}var Ir=te.alternate;if(Ir!==null){var Lr=Ir.child;if(Lr!==null){Ir.child=null;do{var ba=Lr.sibling;Lr.sibling=null,Lr=ba}while(Lr!==null)}}Dr=te}}if((te.subtreeFlags&2064)!==0&&me!==null)me.return=te,Dr=me;else e:for(;Dr!==null;){if(te=Dr,(te.flags&2048)!==0)switch(te.tag){case 0:case 11:case 15:vx(9,te,te.return)}var ct=te.sibling;if(ct!==null){ct.return=te.return,Dr=ct;break e}Dr=te.return}}var Qe=m.current;for(Dr=Qe;Dr!==null;){me=Dr;var ht=me.child;if((me.subtreeFlags&2064)!==0&&ht!==null)ht.return=me,Dr=ht;else e:for(me=Qe;Dr!==null;){if(Oe=Dr,(Oe.flags&2048)!==0)try{switch(Oe.tag){case 0:case 11:case 15:_w(9,Oe)}}catch(Br){ra(Oe,Oe.return,Br)}if(Oe===me){Dr=null;break e}var cr=Oe.sibling;if(cr!==null){cr.return=Oe.return,Dr=cr;break e}Dr=Oe.return}}if(On=K,Su(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(on,m)}catch{}O=!0}return O}finally{cn=C,ec.transition=p}}return!1}function k9(m,p,C){p=Pd(C,p),p=ww(m,p,1),m=Ql(m,p,1),p=Mo(),m!==null&&(is(m,1,p),Qo(m,p))}function ra(m,p,C){if(m.tag===3)k9(m,m,C);else for(;p!==null;){if(p.tag===3){k9(p,m,C);break}else if(p.tag===1){var O=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(af===null||!af.has(O))){m=Pd(C,m),m=w(p,m,1),p=Ql(p,m,1),m=Mo(),p!==null&&(is(p,1,m),Qo(p,m));break}}p=p.return}}function oJ(m,p,C){var O=m.pingCache;O!==null&&O.delete(p),p=Mo(),m.pingedLanes|=m.suspendedLanes&C,gi===m&&(Li&C)===C&&(Ya===4||Ya===3&&(Li&130023424)===Li&&500>Tt()-iS?Dh(m,0):aS|=C),Qo(m,p)}function T9(m,p){p===0&&((m.mode&1)===0?p=1:(p=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var C=Mo();m=jo(m,p),m!==null&&(is(m,p,C),Qo(m,C))}function lJ(m){var p=m.memoizedState,C=0;p!==null&&(C=p.retryLane),T9(m,C)}function cJ(m,p){var C=0;switch(m.tag){case 13:var O=m.stateNode,K=m.memoizedState;K!==null&&(C=K.retryLane);break;case 19:O=m.stateNode;break;default:throw Error(r(314))}O!==null&&O.delete(p),T9(m,C)}var C9;C9=function(m,p,C){if(m!==null)if(m.memoizedProps!==p.pendingProps||ci.current)oe=!0;else{if((m.lanes&C)===0&&(p.flags&128)===0)return oe=!1,Q3(m,p,C);oe=(m.flags&131072)!==0}else oe=!1,Gn&&(p.flags&1048576)!==0&&cw(p,Tu,p.index);switch(p.lanes=0,p.tag){case 2:var O=p.type;An(m,p),m=p.pendingProps;var K=_d(p,qa.current);$c(p,C),K=X0(null,p,O,m,K,C);var te=J0();return p.flags|=1,typeof K=="object"&&K!==null&&typeof K.render=="function"&&K.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ui(O)?(te=!0,Sd(p)):te=!1,p.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,Nh(p),K.updater=rf,p.stateNode=K,K._reactInternals=p,Hg(p,O,m,C),p=Vn(null,p,O,!0,te,C)):(p.tag=0,Gn&&te&&U0(p),Te(null,p,K,C),p=p.child),p;case 16:O=p.elementType;e:{switch(An(m,p),m=p.pendingProps,K=O._init,O=K(O._payload),p.type=O,K=p.tag=dJ(O),m=Ka(O,m),K){case 0:p=Sr(null,p,O,m,C);break e;case 1:p=us(null,p,O,m,C);break e;case 11:p=et(null,p,O,m,C);break e;case 14:p=St(null,p,O,Ka(O.type,m),C);break e}throw Error(r(306,O,""))}return p;case 0:return O=p.type,K=p.pendingProps,K=p.elementType===O?K:Ka(O,K),Sr(m,p,O,K,C);case 1:return O=p.type,K=p.pendingProps,K=p.elementType===O?K:Ka(O,K),us(m,p,O,K,C);case 3:e:{if(Ri(p),m===null)throw Error(r(387));O=p.pendingProps,te=p.memoizedState,K=te.element,Og(m,p),V0(p,O,null,C);var me=p.memoizedState;if(O=me.element,te.isDehydrated)if(te={element:O,isDehydrated:!1,cache:me.cache,pendingSuspenseBoundaries:me.pendingSuspenseBoundaries,transitions:me.transitions},p.updateQueue.baseState=te,p.memoizedState=te,p.flags&256){K=Pd(Error(r(423)),p),p=Zl(m,p,O,C,K);break e}else if(O!==K){K=Pd(Error(r(424)),p),p=Zl(m,p,O,C,K);break e}else for(_r=Gl(p.stateNode.containerInfo.firstChild),Eo=p,Gn=!0,No=null,C=Yo(p,null,O,C),p.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Ed(),O===K){p=mi(m,p,C);break e}Te(m,p,O,C)}p=p.child}return p;case 5:return q0(p),m===null&&W0(p),O=p.type,K=p.pendingProps,te=m!==null?m.memoizedProps:null,me=K.children,nx(O,K)?me=null:te!==null&&nx(O,te)&&(p.flags|=32),un(m,p),Te(m,p,me,C),p.child;case 6:return m===null&&W0(p),null;case 13:return Ot(m,p,C);case 4:return Eu(p,p.stateNode.containerInfo),O=p.pendingProps,m===null?p.child=Nd(p,null,O,C):Te(m,p,O,C),p.child;case 11:return O=p.type,K=p.pendingProps,K=p.elementType===O?K:Ka(O,K),et(m,p,O,K,C);case 7:return Te(m,p,p.pendingProps,C),p.child;case 8:return Te(m,p,p.pendingProps.children,C),p.child;case 12:return Te(m,p,p.pendingProps.children,C),p.child;case 10:e:{if(O=p.type._context,K=p.pendingProps,te=p.memoizedProps,me=K.value,Jn(Ch,O._currentValue),O._currentValue=me,te!==null)if(to(te.value,me)){if(te.children===K.children&&!ci.current){p=mi(m,p,C);break e}}else for(te=p.child,te!==null&&(te.return=p);te!==null;){var Oe=te.dependencies;if(Oe!==null){me=te.child;for(var Ge=Oe.firstContext;Ge!==null;){if(Ge.context===O){if(te.tag===1){Ge=Jl(-1,C&-C),Ge.tag=2;var _t=te.updateQueue;if(_t!==null){_t=_t.shared;var Jt=_t.pending;Jt===null?Ge.next=Ge:(Ge.next=Jt.next,Jt.next=Ge),_t.pending=Ge}}te.lanes|=C,Ge=te.alternate,Ge!==null&&(Ge.lanes|=C),Dg(te.return,C,p),Oe.lanes|=C;break}Ge=Ge.next}}else if(te.tag===10)me=te.type===p.type?null:te.child;else if(te.tag===18){if(me=te.return,me===null)throw Error(r(341));me.lanes|=C,Oe=me.alternate,Oe!==null&&(Oe.lanes|=C),Dg(me,C,p),me=te.sibling}else me=te.child;if(me!==null)me.return=te;else for(me=te;me!==null;){if(me===p){me=null;break}if(te=me.sibling,te!==null){te.return=me.return,me=te;break}me=me.return}te=me}Te(m,p,K.children,C),p=p.child}return p;case 9:return K=p.type,O=p.pendingProps.children,$c(p,C),K=Di(K),O=O(K),p.flags|=1,Te(m,p,O,C),p.child;case 14:return O=p.type,K=Ka(O,p.pendingProps),K=Ka(O.type,K),St(m,p,O,K,C);case 15:return ar(m,p,p.type,p.pendingProps,C);case 17:return O=p.type,K=p.pendingProps,K=p.elementType===O?K:Ka(O,K),An(m,p),p.tag=1,ui(O)?(m=!0,Sd(p)):m=!1,$c(p,C),vw(p,O,K),Hg(p,O,K,C),Vn(null,p,O,!0,m,C);case 19:return wa(m,p,C);case 22:return Mr(m,p,C)}throw Error(r(156,p.tag))};function E9(m,p){return Ae(m,p)}function uJ(m,p,C,O){this.tag=m,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tc(m,p,C,O){return new uJ(m,p,C,O)}function mS(m){return m=m.prototype,!(!m||!m.isReactComponent)}function dJ(m){if(typeof m=="function")return mS(m)?1:0;if(m!=null){if(m=m.$$typeof,m===V)return 11;if(m===ee)return 14}return 2}function uf(m,p){var C=m.alternate;return C===null?(C=tc(m.tag,p,m.key,m.mode),C.elementType=m.elementType,C.type=m.type,C.stateNode=m.stateNode,C.alternate=m,m.alternate=C):(C.pendingProps=p,C.type=m.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=m.flags&14680064,C.childLanes=m.childLanes,C.lanes=m.lanes,C.child=m.child,C.memoizedProps=m.memoizedProps,C.memoizedState=m.memoizedState,C.updateQueue=m.updateQueue,p=m.dependencies,C.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},C.sibling=m.sibling,C.index=m.index,C.ref=m.ref,C}function Pw(m,p,C,O,K,te){var me=2;if(O=m,typeof m=="function")mS(m)&&(me=1);else if(typeof m=="string")me=5;else e:switch(m){case M:return Rh(C.children,K,te,p);case j:me=8,K|=8;break;case A:return m=tc(12,C,p,K|2),m.elementType=A,m.lanes=te,m;case J:return m=tc(13,C,p,K),m.elementType=J,m.lanes=te,m;case ne:return m=tc(19,C,p,K),m.elementType=ne,m.lanes=te,m;case B:return Mw(C,K,te,p);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case F:me=10;break e;case L:me=9;break e;case V:me=11;break e;case ee:me=14;break e;case ie:me=16,O=null;break e}throw Error(r(130,m==null?m:typeof m,""))}return p=tc(me,C,p,K),p.elementType=m,p.type=O,p.lanes=te,p}function Rh(m,p,C,O){return m=tc(7,m,O,p),m.lanes=C,m}function Mw(m,p,C,O){return m=tc(22,m,O,p),m.elementType=B,m.lanes=C,m.stateNode={isHidden:!1},m}function gS(m,p,C){return m=tc(6,m,null,p),m.lanes=C,m}function pS(m,p,C){return p=tc(4,m.children!==null?m.children:[],m.key,p),p.lanes=C,p.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},p}function fJ(m,p,C,O,K){this.tag=p,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nn(0),this.expirationTimes=Nn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.identifierPrefix=O,this.onRecoverableError=K,this.mutableSourceEagerHydrationData=null}function xS(m,p,C,O,K,te,me,Oe,Ge){return m=new fJ(m,p,C,Oe,Ge),p===1?(p=1,te===!0&&(p|=8)):p=0,te=tc(3,null,null,p),m.current=te,te.stateNode=m,te.memoizedState={element:O,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(te),m}function hJ(m,p,C){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:O==null?null:""+O,children:m,containerInfo:p,implementation:C}}function N9(m){if(!m)return ql;m=m._reactInternals;e:{if(Ee(m)!==m||m.tag!==1)throw Error(r(170));var p=m;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ui(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(m.tag===1){var C=m.type;if(ui(C))return Eg(m,C,p)}return p}function A9(m,p,C,O,K,te,me,Oe,Ge){return m=xS(C,O,!0,m,K,te,me,Oe,Ge),m.context=N9(null),C=m.current,O=Mo(),K=lf(C),te=Jl(O,K),te.callback=p??null,Ql(C,te,K),m.current.lanes=K,is(m,K,O),Qo(m,O),m}function Fw(m,p,C,O){var K=p.current,te=Mo(),me=lf(K);return C=N9(C),p.context===null?p.context=C:p.pendingContext=C,p=Jl(te,me),p.payload={element:m},O=O===void 0?null:O,O!==null&&(p.callback=O),m=Ql(K,p,me),m!==null&&(Vc(m,K,me,te),Rg(m,K,me)),me}function Dw(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function j9(m,p){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var C=m.retryLane;m.retryLane=C!==0&&C<p?C:p}}function yS(m,p){j9(m,p),(m=m.alternate)&&j9(m,p)}function mJ(){return null}var P9=typeof reportError=="function"?reportError:function(m){console.error(m)};function vS(m){this._internalRoot=m}Ow.prototype.render=vS.prototype.render=function(m){var p=this._internalRoot;if(p===null)throw Error(r(409));Fw(m,p,null,null)},Ow.prototype.unmount=vS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var p=m.containerInfo;Fh(function(){Fw(null,m,null,null)}),p[Vl]=null}};function Ow(m){this._internalRoot=m}Ow.prototype.unstable_scheduleHydration=function(m){if(m){var p=Ve();m={blockedOn:null,target:m,priority:p};for(var C=0;C<sr.length&&p!==0&&p<sr[C].priority;C++);sr.splice(C,0,m),C===0&&bn(m)}};function wS(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Rw(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function M9(){}function gJ(m,p,C,O,K){if(K){if(typeof O=="function"){var te=O;O=function(){var _t=Dw(me);te.call(_t)}}var me=A9(p,O,m,0,null,!1,!1,"",M9);return m._reactRootContainer=me,m[Vl]=me.current,xd(m.nodeType===8?m.parentNode:m),Fh(),me}for(;K=m.lastChild;)m.removeChild(K);if(typeof O=="function"){var Oe=O;O=function(){var _t=Dw(Ge);Oe.call(_t)}}var Ge=xS(m,0,!1,null,null,!1,!1,"",M9);return m._reactRootContainer=Ge,m[Vl]=Ge.current,xd(m.nodeType===8?m.parentNode:m),Fh(function(){Fw(p,Ge,C,O)}),Ge}function Iw(m,p,C,O,K){var te=C._reactRootContainer;if(te){var me=te;if(typeof K=="function"){var Oe=K;K=function(){var Ge=Dw(me);Oe.call(Ge)}}Fw(p,me,m,K)}else me=gJ(C,p,m,K,O);return Dw(me)}Le=function(m){switch(m.tag){case 3:var p=m.stateNode;if(p.current.memoizedState.isDehydrated){var C=Kn(p.pendingLanes);C!==0&&(li(p,C|1),Qo(p,Tt()),(On&6)===0&&(Kg=Tt()+500,Su()))}break;case 13:Fh(function(){var O=jo(m,1);if(O!==null){var K=Mo();Vc(O,m,1,K)}}),yS(m,1)}},Dt=function(m){if(m.tag===13){var p=jo(m,134217728);if(p!==null){var C=Mo();Vc(p,m,134217728,C)}yS(m,134217728)}},De=function(m){if(m.tag===13){var p=lf(m),C=jo(m,p);if(C!==null){var O=Mo();Vc(C,m,p,O)}yS(m,p)}},Ve=function(){return cn},$t=function(m,p){var C=cn;try{return cn=m,p()}finally{cn=C}},ve=function(m,p,C){switch(p){case"input":if($e(m,C),p=C.name,C.type==="radio"&&p!=null){for(C=m;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<C.length;p++){var O=C[p];if(O!==m&&O.form===m.form){var K=Pa(O);if(!K)throw Error(r(90));le(O),$e(O,K)}}}break;case"textarea":wr(m,C);break;case"select":p=C.value,p!=null&&Rt(m,!!C.multiple,p,!1)}},hr=dS,Ye=Fh;var pJ={usingClientEntryPoint:!1,Events:[_h,xa,Pa,At,Kt,dS]},Sx={findFiberByHostInstance:bu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xJ={bundleType:Sx.bundleType,version:Sx.version,rendererPackageName:Sx.rendererPackageName,rendererConfig:Sx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=ue(m),m===null?null:m.stateNode},findFiberByHostInstance:Sx.findFiberByHostInstance||mJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lw.isDisabled&&Lw.supportsFiber)try{on=Lw.inject(xJ),ln=Lw}catch{}}return Zo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pJ,Zo.createPortal=function(m,p){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wS(p))throw Error(r(200));return hJ(m,p,null,C)},Zo.createRoot=function(m,p){if(!wS(m))throw Error(r(299));var C=!1,O="",K=P9;return p!=null&&(p.unstable_strictMode===!0&&(C=!0),p.identifierPrefix!==void 0&&(O=p.identifierPrefix),p.onRecoverableError!==void 0&&(K=p.onRecoverableError)),p=xS(m,1,!1,null,null,C,!1,O,K),m[Vl]=p.current,xd(m.nodeType===8?m.parentNode:m),new vS(p)},Zo.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var p=m._reactInternals;if(p===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=ue(p),m=m===null?null:m.stateNode,m},Zo.flushSync=function(m){return Fh(m)},Zo.hydrate=function(m,p,C){if(!Rw(p))throw Error(r(200));return Iw(null,m,p,!0,C)},Zo.hydrateRoot=function(m,p,C){if(!wS(m))throw Error(r(405));var O=C!=null&&C.hydratedSources||null,K=!1,te="",me=P9;if(C!=null&&(C.unstable_strictMode===!0&&(K=!0),C.identifierPrefix!==void 0&&(te=C.identifierPrefix),C.onRecoverableError!==void 0&&(me=C.onRecoverableError)),p=A9(p,null,m,1,C??null,K,!1,te,me),m[Vl]=p.current,xd(m),O)for(m=0;m<O.length;m++)C=O[m],K=C._getVersion,K=K(C._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[C,K]:p.mutableSourceEagerHydrationData.push(C,K);return new Ow(p)},Zo.render=function(m,p,C){if(!Rw(p))throw Error(r(200));return Iw(null,m,p,!1,C)},Zo.unmountComponentAtNode=function(m){if(!Rw(m))throw Error(r(40));return m._reactRootContainer?(Fh(function(){Iw(null,null,m,!1,function(){m._reactRootContainer=null,m[Vl]=null})}),!0):!1},Zo.unstable_batchedUpdates=dS,Zo.unstable_renderSubtreeIntoContainer=function(m,p,C,O){if(!Rw(C))throw Error(r(200));if(m==null||m._reactInternals===void 0)throw Error(r(38));return Iw(m,p,C,!1,O)},Zo.version="18.3.1-next-f1338f8080-20240426",Zo}var $9;function YL(){if($9)return SS.exports;$9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),SS.exports=kJ(),SS.exports}var z9;function TJ(){if(z9)return Bw;z9=1;var e=YL();return Bw.createRoot=e.createRoot,Bw.hydrateRoot=e.hydrateRoot,Bw}var CJ=TJ();const EJ=Nc(CJ);var kk=YL();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(this,arguments)}var _f;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_f||(_f={}));const U9="popstate";function NJ(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return Tk("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:JL(s)}return jJ(t,r,null,e)}function $a(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function XL(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function AJ(){return Math.random().toString(36).substr(2,8)}function W9(e,t){return{usr:e.state,key:e.key,idx:t}}function Tk(e,t,r,n){return r===void 0&&(r=null),av({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?r1(t):t,{state:r,key:t&&t.key||n||AJ()})}function JL(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function r1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function jJ(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=_f.Pop,l=null,u=d();u==null&&(u=0,i.replaceState(av({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=_f.Pop;let v=d(),T=v==null?null:v-u;u=v,l&&l({action:o,location:y.location,delta:T})}function h(v,T){o=_f.Push;let k=Tk(y.location,v,T);u=d()+1;let b=W9(k,u),E=y.createHref(k);try{i.pushState(b,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(E)}a&&l&&l({action:o,location:y.location,delta:1})}function g(v,T){o=_f.Replace;let k=Tk(y.location,v,T);u=d();let b=W9(k,u),E=y.createHref(k);i.replaceState(b,"",E),a&&l&&l({action:o,location:y.location,delta:0})}function x(v){let T=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof v=="string"?v:JL(v);return k=k.replace(/ $/,"%20"),$a(T,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,T)}let y={get action(){return o},get location(){return e(s,i)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(U9,f),l=v,()=>{s.removeEventListener(U9,f),l=null}},createHref(v){return t(s,v)},createURL:x,encodeLocation(v){let T=x(v);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:h,replace:g,go(v){return i.go(v)}};return y}var H9;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(H9||(H9={}));function PJ(e,t,r){return r===void 0&&(r="/"),MJ(e,t,r)}function MJ(e,t,r,n){let s=typeof t=="string"?r1(t):t,a=eB(s.pathname||"/",r);if(a==null)return null;let i=QL(e);FJ(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=GJ(a);o=UJ(i[l],u)}return o}function QL(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&($a(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=sm([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&($a(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),QL(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:$J(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let l of ZL(a.path))s(a,i,l)}),t}function ZL(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=ZL(n.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function FJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:zJ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const DJ=/^:[\w-]+$/,OJ=3,RJ=2,IJ=1,LJ=10,BJ=-2,G9=e=>e==="*";function $J(e,t){let r=e.split("/"),n=r.length;return r.some(G9)&&(n+=BJ),t&&(n+=RJ),r.filter(s=>!G9(s)).reduce((s,a)=>s+(DJ.test(a)?OJ:a===""?IJ:LJ),n)}function zJ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function UJ(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=WJ({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:sm([a,f.pathname]),pathnameBase:YJ(sm([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=sm([a,f.pathnameBase]))}return i}function WJ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=HJ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let y=o[f]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[f];return g&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function HJ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),XL(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function GJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return XL(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function eB(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function VJ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?r1(e):e;return{pathname:r?r.startsWith("/")?r:qJ(r,t):t,search:XJ(n),hash:JJ(s)}}function qJ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function CS(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KJ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function tB(e,t){let r=KJ(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rB(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=r1(e):(s=av({},e),$a(!s.pathname||!s.pathname.includes("?"),CS("?","pathname","search",s)),$a(!s.pathname||!s.pathname.includes("#"),CS("#","pathname","hash",s)),$a(!s.search||!s.search.includes("#"),CS("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?t[f]:"/"}let l=VJ(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const sm=e=>e.join("/").replace(/\/\/+/g,"/"),YJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XJ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,JJ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nB=["post","put","patch","delete"];new Set(nB);const ZJ=["get",...nB];new Set(ZJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(this,arguments)}const UT=_.createContext(null),eQ=_.createContext(null),Jv=_.createContext(null),E_=_.createContext(null),qf=_.createContext({outlet:null,matches:[],isDataRoute:!1}),sB=_.createContext(null);function Qv(){return _.useContext(E_)!=null}function Zv(){return Qv()||$a(!1),_.useContext(E_).location}function aB(e){_.useContext(Jv).static||_.useLayoutEffect(e)}function fl(){let{isDataRoute:e}=_.useContext(qf);return e?hQ():tQ()}function tQ(){Qv()||$a(!1);let e=_.useContext(UT),{basename:t,future:r,navigator:n}=_.useContext(Jv),{matches:s}=_.useContext(qf),{pathname:a}=Zv(),i=JSON.stringify(tB(s,r.v7_relativeSplatPath)),o=_.useRef(!1);return aB(()=>{o.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=rB(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:sm([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,a,e])}function N_(){let{matches:e}=_.useContext(qf),t=e[e.length-1];return t?t.params:{}}function rQ(e,t){return nQ(e,t)}function nQ(e,t,r,n){Qv()||$a(!1);let{navigator:s}=_.useContext(Jv),{matches:a}=_.useContext(qf),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=Zv(),d;if(t){var f;let v=typeof t=="string"?r1(t):t;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||$a(!1),d=v}else d=u;let h=d.pathname||"/",g=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=PJ(e,{pathname:g}),y=lQ(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:sm([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:sm([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&y?_.createElement(E_.Provider,{value:{location:iv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:_f.Pop}},y):y}function sQ(){let e=fQ(),t=QJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:s},r):null,null)}const aQ=_.createElement(sQ,null);class iQ extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(qf.Provider,{value:this.props.routeContext},_.createElement(sB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oQ(e){let{routeContext:t,match:r,children:n}=e,s=_.useContext(UT);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(qf.Provider,{value:t},n)}function lQ(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||$a(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:g}=r,x=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let g,x=!1,y=null,v=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||aQ,l&&(u<0&&h===0?(mQ("route-fallback"),x=!0,v=null):u===h&&(x=!0,v=f.route.hydrateFallbackElement||null)));let T=t.concat(i.slice(0,h+1)),k=()=>{let b;return g?b=y:x?b=v:f.route.Component?b=_.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,_.createElement(oQ,{match:f,routeContext:{outlet:d,matches:T,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?_.createElement(iQ,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:k(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):k()},null)}var iB=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(iB||{}),oB=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(oB||{});function cQ(e){let t=_.useContext(UT);return t||$a(!1),t}function uQ(e){let t=_.useContext(eQ);return t||$a(!1),t}function dQ(e){let t=_.useContext(qf);return t||$a(!1),t}function lB(e){let t=dQ(),r=t.matches[t.matches.length-1];return r.route.id||$a(!1),r.route.id}function fQ(){var e;let t=_.useContext(sB),r=uQ(),n=lB();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function hQ(){let{router:e}=cQ(iB.UseNavigateStable),t=lB(oB.UseNavigateStable),r=_.useRef(!1);return aB(()=>{r.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,iv({fromRouteId:t},a)))},[e,t])}const V9={};function mQ(e,t,r){V9[e]||(V9[e]=!0)}function gQ(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Rp(e){let{to:t,replace:r,state:n,relative:s}=e;Qv()||$a(!1);let{future:a,static:i}=_.useContext(Jv),{matches:o}=_.useContext(qf),{pathname:l}=Zv(),u=fl(),d=rB(t,tB(o,a.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return _.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ua(e){$a(!1)}function pQ(e){let{basename:t="/",children:r=null,location:n,navigationType:s=_f.Pop,navigator:a,static:i=!1,future:o}=e;Qv()&&$a(!1);let l=t.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:l,navigator:a,static:i,future:iv({v7_relativeSplatPath:!1},o)}),[l,o,a,i]);typeof n=="string"&&(n=r1(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:x="default"}=n,y=_.useMemo(()=>{let v=eB(d,l);return v==null?null:{location:{pathname:v,search:f,hash:h,state:g,key:x},navigationType:s}},[l,d,f,h,g,x,s]);return y==null?null:_.createElement(Jv.Provider,{value:u},_.createElement(E_.Provider,{children:r,value:y}))}function WT(e){let{children:t,location:r}=e;return rQ(Ck(t),r)}new Promise(()=>{});function Ck(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,s)=>{if(!_.isValidElement(n))return;let a=[...t,s];if(n.type===_.Fragment){r.push.apply(r,Ck(n.props.children,a));return}n.type!==ua&&$a(!1),!n.props.index||!n.props.children||$a(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Ck(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xQ="6";try{window.__reactRouterVersion=xQ}catch{}const yQ="startTransition",q9=KL[yQ];function vQ(e){let{basename:t,children:r,future:n,window:s}=e,a=_.useRef();a.current==null&&(a.current=NJ({window:s,v5Compat:!0}));let i=a.current,[o,l]=_.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=_.useCallback(f=>{u&&q9?q9(()=>l(f)):l(f)},[l,u]);return _.useLayoutEffect(()=>i.listen(d),[i,d]),_.useEffect(()=>gQ(n),[n]),_.createElement(pQ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var K9;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(K9||(K9={}));var Y9;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Y9||(Y9={}));const Cs={student_subjects:1800*1e3,student_active_tests:180*1e3,student_results_table:300*1e3,teacher_subjects:900*1e3,teacher_classes:900*1e3,teacher_tests:600*1e3,teacher_results_table:600*1e3,admin_users:1200*1e3,admin_teachers:1200*1e3,admin_subjects:1800*1e3,admin_academic_years:3600*1e3,admin_tests:900*1e3,admin_results_table:null,admin_teacher_id:3600*1e3,all_tests:1200*1e3,subjects_dropdown:1800*1e3,grades_classes:3600*1e3,test_progress:120*1e3,anti_cheating:120*1e3,word_matching_test:600*1e3,speaking_test_data:3600*1e3},HT=(e,t={})=>{const{includeExpired:r=!1}=t;try{const n=localStorage.getItem(e);if(!n)return console.log(" Cache: No data found for key:",e),null;const s=JSON.parse(n),{data:a,timestamp:i,ttl:o}=s,l=Date.now()-i,d=typeof o=="number"&&Number.isFinite(o)?l>o:!1;return d&&!r?(console.log(" Cache: Data expired for key:",e,"age:",l,"ttl:",o),localStorage.removeItem(e),null):(console.log(" Cache: Entry found for key:",e,"age:",l,"ttl:",o,"expired:",d),{data:a,timestamp:i,ttl:o,age:l,isExpired:d})}catch(n){return console.log(" Cache: Corrupted data for key:",e,n),localStorage.removeItem(e),null}},Ta=e=>{const t=HT(e);return t?t.data:null},Bs=(e,t,r)=>{try{console.log(" Cache: Setting data for key:",e,"ttl:",r),localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:typeof r=="number"&&Number.isFinite(r)?r:r===null?null:void 0})),console.log(" Cache: Data cached successfully for key:",e)}catch{console.log(" Cache: Storage full, cleaning old data for key:",e),cB();try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:typeof r=="number"&&Number.isFinite(r)?r:r===null?null:void 0})),console.log(" Cache: Data cached after cleanup for key:",e)}catch{console.warn("Storage full, cannot cache data")}}},cB=()=>{const e=Date.now(),t=Object.keys(localStorage);t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i,ttl:o}=JSON.parse(a);e-i>o&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const r=e-10080*60*1e3;t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i}=JSON.parse(a);i<r&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const n=Object.keys(localStorage);if(n.length>0){const s=n.map(i=>{try{const o=localStorage.getItem(i);if(o){const{timestamp:l}=JSON.parse(o);return{key:i,timestamp:l}}}catch{return{key:i,timestamp:0}}return{key:i,timestamp:0}}),a=Math.ceil(s.length*.25);s.sort((i,o)=>i.timestamp-o.timestamp).slice(0,a).forEach(({key:i})=>localStorage.removeItem(i))}},GT=e=>{Object.keys(localStorage).forEach(r=>{r.includes(e)&&localStorage.removeItem(r)})},n1=(e,t,r)=>{const n=`test_progress_${e}_${t}_${r}`,s=`anti_cheating_${e}_${t}_${r}`;if(localStorage.removeItem(n),localStorage.removeItem(s),t==="speaking_test_data"){const a=`speaking_test_data_${e}_${r}`;localStorage.removeItem(a),console.log(`Cleared speaking test data cache for ${r}`)}console.log(`Cleared test data for ${t}_${r}`)},dp=Object.freeze(Object.defineProperty({__proto__:null,CACHE_TTL:Cs,cleanupOldData:cB,clearTestData:n1,clearUserData:GT,getCachedData:Ta,getCachedEntry:HT,setCachedData:Bs},Symbol.toStringTag,{value:"Module"}));let qc=null,Tx=null;function Lb(){if(Tx!==null)return Tx;try{const e="_test";localStorage.setItem(e,"test");const t=localStorage.getItem(e);localStorage.removeItem(e),Tx=t==="test"}catch(e){console.warn("localStorage unavailable, falling back to sessionStorage",e),Tx=!1}return Tx}function ov(){return Lb()?localStorage:sessionStorage}async function VT(e){try{const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}catch(t){return console.warn("Hash computation failed",t),btoa(e).replace(/[^a-zA-Z0-9]/g,"").substring(0,64)}}async function wQ(e,t){try{const r=ov();return r.setItem(e,t),r.getItem(e)===t}catch(r){return console.warn("Storage write failed",r),!1}}async function bQ(e,t){try{const r=ov(),n=await VT(t);return r.setItem(`${e}_hash`,n),await wQ(e,t)}catch(r){return console.warn("Failed to store with hash",r),!1}}async function _Q(e){try{const t=ov(),r=t.getItem(e),n=t.getItem(`${e}_hash`);return!r||!n?!1:await VT(r)===n}catch(t){return console.warn("Hash verification failed",t),!1}}async function SQ(e,t=3,r=200){for(let n=0;n<t;n++){if(await e())return!0;await new Promise(a=>setTimeout(a,r))}return!1}const oa={async set(e){const t=Lb(),r=ov();if(!t){console.warn(" localStorage unavailable - using sessionStorage (less persistent)");try{r.setItem("auth_token",e);const a=r.getItem("auth_token")===e;return a&&(qc=e),a}catch(s){return console.error("sessionStorage fallback failed",s),!1}}const n=await SQ(()=>bQ("auth_token",e));return n&&(qc=e),n},async get(){if(qc)return qc;const e=ov();if(!Lb())try{const t=e.getItem("auth_token");return qc=t,t}catch(t){return console.error("sessionStorage fallback read failed",t),null}try{const t=e.getItem("auth_token");if(!t)return qc=null,null;if(e.getItem("auth_token_hash")){if(!await _Q("auth_token"))return qc=null,null}else{console.log("Migrating legacy token to secure storage format...");try{const n=await VT(t);if(e.setItem("auth_token_hash",n),e.getItem("auth_token_hash")!==n)return console.warn("Failed to store hash during migration"),t}catch(n){console.warn("Failed to migrate token hash:",n)}}return qc=t,t}catch(t){return console.warn("Failed to get token",t),qc=null,null}},async clear(){try{Lb()&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_token_hash"))}catch{}try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token_hash")}catch{}qc=null},clearCache(){qc=null}},t4=Object.freeze(Object.defineProperty({__proto__:null,SecureToken:oa},Symbol.toStringTag,{value:"Module"})),uB=_.createContext(),dB=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState(null),[a,i]=_.useState(null),[o,l]=_.useState(!1),[u,d]=_.useState(!0),[f,h]=_.useState(null);_.useEffect(()=>{console.log("[AUTH] Initializing application session..."),v()},[]),_.useEffect(()=>{if(o&&a){console.log("[AUTH] Setting up proactive token refresh...");let W=!1;const R=setInterval(async()=>{if(o&&a&&!W){W=!0;try{const z=a||await(window.tokenManager?.getToken()||oa.get());if(z&&g(z))console.log("[AUTH] Token expired, attempting refresh..."),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in");else if(z)try{const Q=JSON.parse(atob(z.split(".")[1])).exp*1e3,re=Date.now(),q=Q-re;q<300*1e3&&q>0&&(console.log(`[AUTH] Token expires in ${Math.round(q/1e3)} seconds, refreshing...`),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in"))}catch(G){console.error("[AUTH] Error parsing token for expiration check:",G)}}catch(z){console.error("[AUTH] Error in proactive refresh:",z)}finally{W=!1}}},300*1e3);return()=>{console.log("[AUTH] Clearing proactive token refresh interval"),clearInterval(R)}}},[o,a]);const g=W=>{if(!W)return!0;try{if(typeof W!="string"||!W.includes("."))return console.warn("[AUTH] Invalid token format - not a JWT"),!0;const R=W.split(".");if(R.length!==3)return console.warn("[AUTH] Invalid token format - not 3 parts"),!0;const z=JSON.parse(atob(R[1])),G=Date.now()/1e3;return z.exp<=G}catch(R){if(console.error("[AUTH] Error decoding token:",R),console.warn("[AUTH] Token appears to be corrupted - clearing authentication"),oa.clear().catch(()=>{}),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userData"),window.tokenManager)try{window.tokenManager.clearAuth()}catch(z){console.warn("[AUTH] Error clearing token manager:",z)}return!0}},x=async()=>{const W=localStorage.getItem("refresh_token");if(!W)return console.log("[AUTH] No refresh token found"),!1;try{const R=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:W})});if(R.ok){const z=await R.json();console.log("[AUTH] Token refresh successful"),await oa.set(z.accessToken),localStorage.setItem("refresh_token",z.refreshToken),localStorage.setItem("accessToken",z.accessToken);try{window.tokenManager&&(await window.tokenManager.setToken(z.accessToken),z.refreshToken&&window.tokenManager.setRefreshToken(z.refreshToken))}catch{}return i(z.accessToken),!0}else return console.error("[AUTH] Token refresh failed:",R.status),!1}catch(R){return console.error("[AUTH] Token refresh error:",R),!1}},y=async(W,R={})=>{const z=a||await(window.tokenManager?.getToken()||oa.get());if(!z)throw new Error("No authentication token found");const G={"Content-Type":"application/json",Authorization:`Bearer ${z}`,...R.headers},Q=await fetch(W,{...R,headers:G});if(Q.status===401)if(console.log("[AUTH] 401 error, attempting token refresh..."),await x()){const q=await(window.tokenManager?.getToken()||oa.get());return G.Authorization=`Bearer ${q}`,fetch(W,{...R,headers:G})}else throw console.log("[AUTH] Token refresh failed, returning 401 response"),new Error("Authentication failed - please login again");return Q},v=async()=>{try{console.log("[AUTH] Starting session initialization..."),d(!0);const W=await(window.tokenManager?.getToken()||oa.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),R=localStorage.getItem("user_data")||localStorage.getItem("userData"),z=R?JSON.parse(R).role:null;if(console.log("[AUTH] Found stored data:",{hasToken:!!W,hasUser:!!R,role:z}),W&&z&&R)try{const G=JSON.parse(R);if(g(W))if(console.log("[AUTH] Token expired, attempting refresh..."),await x()){console.log("[AUTH] Token refreshed successfully");const re=await(window.tokenManager?.getToken()||oa.get());i(re)}else console.log("[AUTH] Token refresh failed, but continuing with existing token..."),i(W);else i(W);s(z),r(G);try{if(window.tokenManager&&W){await window.tokenManager.setToken(W);const Q=localStorage.getItem("refresh_token");Q&&window.tokenManager.setRefreshToken(Q)}}catch{}l(!0),await b(G,z)}catch(G){console.error("[AUTH] Error parsing stored user data:",G),console.log("[AUTH] Invalid user data, but not forcing logout - continuing with empty state"),l(!1)}}catch(W){console.error("[AUTH] Session initialization error:",W),console.log("[AUTH] Initialization error, but not forcing logout - continuing with empty state"),l(!1)}finally{console.log("[AUTH] Session initialization complete"),d(!1)}},T=async W=>{try{if(d(!0),h(null),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),h("Please wait for the logout process to complete.");return}console.log("Attempting login with:",W.username);let R,z;W.username==="admin"?(R={ok:!0,json:()=>({success:!0,token:"test-token"})},z="admin"):(R=await authService.teacherLogin(W),z="teacher");const G=await R.json();await k(R,z,G)}catch(R){j(R)}finally{d(!1)}},k=async(W,R,z)=>{try{if(W.ok&&z.success&&z.token){i(z.token),s(R),r(z),l(!0);const G=z.accessToken||z.token;await oa.set(G),localStorage.setItem("refresh_token",z.refreshToken),localStorage.setItem("user_data",JSON.stringify(z)),localStorage.setItem("accessToken",G);try{window.tokenManager&&(await window.tokenManager.setToken(G),z.refreshToken&&window.tokenManager.setRefreshToken(z.refreshToken))}catch{}try{const Q=Date.now(),re=10080*60*1e3,q=[];for(let se=0;se<localStorage.length;se++){const ce=localStorage.key(se);if(!(!ce||!(ce.startsWith("test_progress_")||ce.startsWith("test_timer_")||ce.startsWith("test_shuffle_order_")||ce.startsWith("student_results_table_")||ce.startsWith("anti_cheating_"))))try{const ke=localStorage.getItem(ce);if(!ke){q.push(ce);continue}let le=null;if(ke.startsWith("{")||ke.startsWith("[")){const ye=JSON.parse(ke),je=ye.timestamp||ye.lastSaved||ye.lastTickAt||ye.createdAt||ye.updatedAt||ye.startedAt||ye.started_at;je&&(le=new Date(je).getTime())}if(!le){const ye=`${ce}__ts`,je=localStorage.getItem(ye);je&&(le=parseInt(je)||null)}if(!le)continue;Q-le>re&&q.push(ce)}catch{}}q.forEach(se=>{try{localStorage.removeItem(se)}catch{}})}catch(Q){console.warn("LocalStorage cleanup skipped:",Q)}return await b(z,R),!0}else{const G=z.message||W.statusText||"Login failed";return j(new Error(G)),!1}}catch(G){return j(G),!1}},b=async(W,R)=>{try{switch(R){case"admin":console.log("Admin login successful, role:",W.role),console.log("Admin logged in:",W);break;case"teacher":console.log("Teacher login successful, role:",W.role),console.log("Teacher data:",W.teacher),await N(W),await M();break;case"student":console.log("Student login successful"),E(W);break;default:console.warn("Unknown user role:",R)}}catch(z){console.error("Post-login actions error:",z)}},E=W=>{r(W),console.log("Student info populated:",W)},N=async W=>{r(W),console.log("Teacher info populated:",W)},P=async()=>{try{console.log("Initializing teacher cabinet...")}catch(W){console.error("Error initializing teacher cabinet:",W)}},M=async()=>{try{console.log("Checking teacher subjects...")}catch(W){console.error("Error checking teacher subjects:",W)}},j=W=>{h(W.message||"Login failed"),A()},A=()=>{h(null),d(!1)},F=_.useCallback(()=>{L()},[]),L=async()=>{r(null),s(null),i(null),l(!1),h(null);const W=t?.student_id||t?.teacher_id||t?.admin_id||t?.id;W&&GT(W),await oa.clear(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("user_data"),localStorage.removeItem("user_role"),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("testProgress"),localStorage.removeItem("formData"),window.tokenManager&&await window.tokenManager.clearAuth(),setTimeout(()=>{V()},100)},V=()=>{console.log("Interface reset after session clear - redirecting to login"),window.location.replace("/login")},J=()=>t?.id||null,ne=()=>n==="admin"?t:null,ee=()=>n==="admin",ie=()=>ee()?t?.admin_id:null,B=()=>n==="teacher"?t?.username:null,Y=()=>{console.log("Auth functions available:",{handleUnifiedLogin:typeof T,logout:typeof F,getCurrentTeacherId:typeof J,isAdmin:typeof ee,getCurrentAdmin:typeof ne,getCurrentAdminId:typeof ie,getCurrentTeacherUsername:typeof B})};_.useEffect(()=>(window.logout=F,window.getCurrentTeacherId=J,window.getCurrentAdmin=ne,window.isAdmin=ee,window.getCurrentAdminId=ie,window.getCurrentTeacherUsername=B,window.checkFunctionAvailability=Y,()=>{delete window.logout,delete window.getCurrentTeacherId,delete window.getCurrentAdmin,delete window.isAdmin,delete window.getCurrentAdminId,delete window.getCurrentTeacherUsername,delete window.checkFunctionAvailability}),[F]);const I=_.useCallback(W=>{console.log("Setting user data from external auth:",W),r(W),s(W.role),i(W.token),l(!0),d(!1),h(null),oa.set(W.token).catch(R=>{console.error("[AUTH] Failed to store token securely:",R)}),localStorage.setItem("user_data",JSON.stringify(W)),localStorage.setItem("accessToken",W.token),window.tokenManager&&window.tokenManager.setToken(W.token).catch(()=>{})},[]),H={user:t,role:n,token:a,isAuthenticated:o,isLoading:u,error:f,login:T,setUserData:I,logout:F,resetLoginForm:A,forceCompleteLogout:L,initializeApplicationSession:v,makeAuthenticatedRequest:y,populateStudentInfo:E,populateTeacherInfo:N,initializeTeacherCabinet:P,checkTeacherSubjects:M,getCurrentTeacherId:J,getCurrentAdmin:ne,isAdmin:ee,getCurrentAdminId:ie,getCurrentTeacherUsername:B,handleLoginResponse:k,handlePostLoginActions:b,handleLoginFailure:j,resetInterfaceAfterSessionClear:V,checkFunctionAvailability:Y};return c.jsx(uB.Provider,{value:H,children:e})},Ms=()=>{const e=_.useContext(uB);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class kQ{constructor(){this.baseURL="https://mathayomwatsing.netlify.app/.netlify/functions.",this.timeout=1e4,this.retryCount=3,this.retryDelay=1e3}async getHeaders(){const t=await(window.tokenManager?.getToken()||oa.get())||localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async sendRequest(t,r){try{return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(n){throw console.error(" Network error:",n),n}}async request(t,r={}){const n=`${this.baseURL}${t}`,a={method:"GET",headers:await this.getHeaders(),timeout:this.timeout,...r};let i;for(let o=0;o<this.retryCount;o++)try{const l=new AbortController,u=setTimeout(()=>l.abort(),this.timeout),d=await fetch(n,{...a,signal:l.signal});if(clearTimeout(u),!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(l){if(i=l,l.name==="AbortError")throw new Error("Request timeout");o<this.retryCount-1&&(console.warn(`Request failed, retrying in ${this.retryDelay}ms... (attempt ${o+1}/${this.retryCount})`),await new Promise(u=>setTimeout(u,this.retryDelay*Math.pow(2,o))))}throw i}async get(t,r={}){return this.request(t,{...r,method:"GET"})}async post(t,r,n={}){return this.request(t,{...n,method:"POST",body:JSON.stringify(r)})}async put(t,r,n={}){return this.request(t,{...n,method:"PUT",body:JSON.stringify(r)})}async delete(t,r={}){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,n={}){return this.request(t,{...n,method:"PATCH",body:JSON.stringify(r)})}async uploadFile(t,r,n={}){const s=new FormData;s.append("file",r);const a=`${this.baseURL}${t}`,i=await(window.tokenManager?.getToken()||oa.get())||localStorage.getItem("token"),o={method:"POST",headers:{...i&&{Authorization:`Bearer ${i}`}},body:s,...n};try{const l=await fetch(a,o);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){throw l}}async downloadFile(t,r,n={}){const s=`${this.baseURL}${t}`,i={method:"GET",headers:await this.getHeaders(),...n};try{const o=await fetch(s,i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.blob(),u=window.URL.createObjectURL(l),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}catch(o){throw o}}ensureDebugOutput(){let t=document.getElementById("debug-output");return t||(t=document.createElement("div"),t.id="debug-output",t.className="fixed top-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 overflow-auto",t.innerHTML='<div class="text-sm font-mono text-gray-800">Debug Output</div>',document.body.appendChild(t)),t}async testDbConnection(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/test-db-connection")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Database Connection Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,message:"Database connection successful",data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Database Connection Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,message:"Database connection failed",error:t.message}}}async testStudentLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"51706",password:"1"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Student Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Student Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testTeacherLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"Aleksandr_Petrov",password:"465"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Teacher Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Teacher Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testAdminLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Admin Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Admin Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetTeacherSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-teacher-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Teacher Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Teacher Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetClassResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-class-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Class Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Class Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentTestResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-test-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Test Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Test Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testEndpoints(){const t=["/debug/test-student-login","/debug/test-teacher-login","/debug/test-admin-login","/debug/test-get-subjects","/debug/test-get-teacher-subjects","/debug/test-get-class-results","/debug/test-get-student-subjects","/debug/test-get-student-test-results"],r={};for(const n of t)try{const s=await this.get(n);r[n]={success:!0,data:s}}catch(s){r[n]={success:!1,error:s.message}}return r}async debugFunction(t){const r=this.ensureDebugOutput();try{let n;switch(t){case"testDbConnection":n=await this.testDbConnection();break;case"testStudentLogin":n=await this.testStudentLogin();break;case"testTeacherLogin":n=await this.testTeacherLogin();break;case"testAdminLogin":n=await this.testAdminLogin();break;case"testGetSubjects":n=await this.testGetSubjects();break;case"testGetTeacherSubjects":n=await this.testGetTeacherSubjects();break;case"testGetClassResults":n=await this.testGetClassResults();break;case"testGetStudentSubjects":n=await this.testGetStudentSubjects();break;case"testGetStudentTestResults":n=await this.testGetStudentTestResults();break;default:throw new Error(`Unknown debug function: ${t}`)}return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Debug Function: ${t}</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),n}catch(n){throw r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Debug Function Error: ${t}</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${n.message}</pre>
        `),n}}showDebugFunctions(){const t=this.ensureDebugOutput(),r=`
      <div class="text-sm font-mono text-gray-800 mb-4">Debug Functions</div>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="apiClient.testDbConnection()" class="px-3 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors">
          Test DB Connection
        </button>
        <button onclick="apiClient.testStudentLogin()" class="px-3 py-2 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors">
          Test Student Login
        </button>
        <button onclick="apiClient.testTeacherLogin()" class="px-3 py-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors">
          Test Teacher Login
        </button>
        <button onclick="apiClient.testAdminLogin()" class="px-3 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors">
          Test Admin Login
        </button>
        <button onclick="apiClient.testGetSubjects()" class="px-3 py-2 bg-purple-500 text-white text-xs rounded hover:bg-purple-600 transition-colors">
          Test Get Subjects
        </button>
        <button onclick="apiClient.testGetTeacherSubjects()" class="px-3 py-2 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600 transition-colors">
          Test Get Teacher Subjects
        </button>
        <button onclick="apiClient.testGetClassResults()" class="px-3 py-2 bg-pink-500 text-white text-xs rounded hover:bg-pink-600 transition-colors">
          Test Get Class Results
        </button>
        <button onclick="apiClient.testGetStudentSubjects()" class="px-3 py-2 bg-teal-500 text-white text-xs rounded hover:bg-teal-600 transition-colors">
          Test Get Student Subjects
        </button>
        <button onclick="apiClient.testGetStudentTestResults()" class="px-3 py-2 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors">
          Test Get Student Test Results
        </button>
        <button onclick="apiClient.testEndpoints()" class="px-3 py-2 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors">
          Test All Endpoints
        </button>
      </div>
    `;t.innerHTML=r}}const sa=new kQ,qT=_.createContext({});function KT(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const YT=typeof window<"u",fB=YT?_.useLayoutEffect:_.useEffect,A_=_.createContext(null);function XT(e,t){e.indexOf(t)===-1&&e.push(t)}function JT(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const a0=(e,t,r)=>r>t?t:r<e?e:r;let QT=()=>{};const i0={},hB=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function mB(e){return typeof e=="object"&&e!==null}const gB=e=>/^0[^.\s]+$/u.test(e);function ZT(e){let t;return()=>(t===void 0&&(t=e()),t)}const yc=e=>e,TQ=(e,t)=>r=>t(e(r)),e2=(...e)=>e.reduce(TQ),lv=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class e7{constructor(){this.subscriptions=[]}add(t){return XT(this.subscriptions,t),()=>JT(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vu=e=>e*1e3,qu=e=>e/1e3;function pB(e,t){return t?e*(1e3/t):0}const xB=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,CQ=1e-7,EQ=12;function NQ(e,t,r,n,s){let a,i,o=0;do i=t+(r-t)/2,a=xB(i,n,s)-e,a>0?r=i:t=i;while(Math.abs(a)>CQ&&++o<EQ);return i}function t2(e,t,r,n){if(e===t&&r===n)return yc;const s=a=>NQ(a,0,1,e,r);return a=>a===0||a===1?a:xB(s(a),t,n)}const yB=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,vB=e=>t=>1-e(1-t),wB=t2(.33,1.53,.69,.99),t7=vB(wB),bB=yB(t7),_B=e=>(e*=2)<1?.5*t7(e):.5*(2-Math.pow(2,-10*(e-1))),r7=e=>1-Math.sin(Math.acos(e)),SB=vB(r7),kB=yB(r7),AQ=t2(.42,0,1,1),jQ=t2(0,0,.58,1),TB=t2(.42,0,.58,1),PQ=e=>Array.isArray(e)&&typeof e[0]!="number",CB=e=>Array.isArray(e)&&typeof e[0]=="number",MQ={linear:yc,easeIn:AQ,easeInOut:TB,easeOut:jQ,circIn:r7,circInOut:kB,circOut:SB,backIn:t7,backInOut:bB,backOut:wB,anticipate:_B},FQ=e=>typeof e=="string",X9=e=>{if(CB(e)){QT(e.length===4);const[t,r,n,s]=e;return t2(t,r,n,s)}else if(FQ(e))return MQ[e];return e},$w=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function DQ(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,h=!1)=>{const x=h&&s?r:n;return f&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const OQ=40;function EB(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=$w.reduce((b,E)=>(b[E]=DQ(a),b),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:g,postRender:x}=i,y=()=>{const b=i0.useManualTiming?s.timestamp:performance.now();r=!1,i0.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(b-s.timestamp,OQ),1)),s.timestamp=b,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),f.process(s),h.process(s),g.process(s),x.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(y))},v=()=>{r=!0,n=!0,s.isProcessing||e(y)};return{schedule:$w.reduce((b,E)=>{const N=i[E];return b[E]=(P,M=!1,j=!1)=>(r||v(),N.schedule(P,M,j)),b},{}),cancel:b=>{for(let E=0;E<$w.length;E++)i[$w[E]].cancel(b)},state:s,steps:i}}const{schedule:$s,cancel:Of,state:zi,steps:ES}=EB(typeof requestAnimationFrame<"u"?requestAnimationFrame:yc,!0);let Bb;function RQ(){Bb=void 0}const il={now:()=>(Bb===void 0&&il.set(zi.isProcessing||i0.useManualTiming?zi.timestamp:performance.now()),Bb),set:e=>{Bb=e,queueMicrotask(RQ)}},NB=e=>t=>typeof t=="string"&&t.startsWith(e),n7=NB("--"),IQ=NB("var(--"),s7=e=>IQ(e)?LQ.test(e.split("/*")[0].trim()):!1,LQ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,s1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},cv={...s1,transform:e=>a0(0,1,e)},zw={...s1,default:1},Ly=e=>Math.round(e*1e5)/1e5,a7=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function BQ(e){return e==null}const $Q=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,i7=(e,t)=>r=>!!(typeof r=="string"&&$Q.test(r)&&r.startsWith(e)||t&&!BQ(r)&&Object.prototype.hasOwnProperty.call(r,t)),AB=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match(a7);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},zQ=e=>a0(0,255,e),NS={...s1,transform:e=>Math.round(zQ(e))},Xh={test:i7("rgb","red"),parse:AB("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+NS.transform(e)+", "+NS.transform(t)+", "+NS.transform(r)+", "+Ly(cv.transform(n))+")"};function UQ(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Ek={test:i7("#"),parse:UQ,transform:Xh.transform},r2=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),xf=r2("deg"),Ku=r2("%"),tn=r2("px"),WQ=r2("vh"),HQ=r2("vw"),J9={...Ku,parse:e=>Ku.parse(e)/100,transform:e=>Ku.transform(e*100)},fp={test:i7("hsl","hue"),parse:AB("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ku.transform(Ly(t))+", "+Ku.transform(Ly(r))+", "+Ly(cv.transform(n))+")"},Ia={test:e=>Xh.test(e)||Ek.test(e)||fp.test(e),parse:e=>Xh.test(e)?Xh.parse(e):fp.test(e)?fp.parse(e):Ek.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Xh.transform(e):fp.transform(e),getAnimatableNone:e=>{const t=Ia.parse(e);return t.alpha=0,Ia.transform(t)}},GQ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function VQ(e){return isNaN(e)&&typeof e=="string"&&(e.match(a7)?.length||0)+(e.match(GQ)?.length||0)>0}const jB="number",PB="color",qQ="var",KQ="var(",Q9="${}",YQ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uv(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(YQ,l=>(Ia.test(l)?(n.color.push(a),s.push(PB),r.push(Ia.parse(l))):l.startsWith(KQ)?(n.var.push(a),s.push(qQ),r.push(l)):(n.number.push(a),s.push(jB),r.push(parseFloat(l))),++a,Q9)).split(Q9);return{values:r,split:o,indexes:n,types:s}}function MB(e){return uv(e).values}function FB(e){const{split:t,types:r}=uv(e),n=t.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=t[i],s[i]!==void 0){const o=r[i];o===jB?a+=Ly(s[i]):o===PB?a+=Ia.transform(s[i]):a+=s[i]}return a}}const XQ=e=>typeof e=="number"?0:Ia.test(e)?Ia.getAnimatableNone(e):e;function JQ(e){const t=MB(e);return FB(e)(t.map(XQ))}const Rf={test:VQ,parse:MB,createTransformer:FB,getAnimatableNone:JQ};function AS(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function QQ({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,a=0,i=0;if(!t)s=a=i=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;s=AS(l,o,e+1/3),a=AS(l,o,e),i=AS(l,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function r4(e,t){return r=>r>0?t:e}const Ys=(e,t,r)=>e+(t-e)*r,jS=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},ZQ=[Ek,Xh,fp],eZ=e=>ZQ.find(t=>t.test(e));function Z9(e){const t=eZ(e);if(!t)return!1;let r=t.parse(e);return t===fp&&(r=QQ(r)),r}const eA=(e,t)=>{const r=Z9(e),n=Z9(t);if(!r||!n)return r4(e,t);const s={...r};return a=>(s.red=jS(r.red,n.red,a),s.green=jS(r.green,n.green,a),s.blue=jS(r.blue,n.blue,a),s.alpha=Ys(r.alpha,n.alpha,a),Xh.transform(s))},Nk=new Set(["none","hidden"]);function tZ(e,t){return Nk.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function rZ(e,t){return r=>Ys(e,t,r)}function o7(e){return typeof e=="number"?rZ:typeof e=="string"?s7(e)?r4:Ia.test(e)?eA:aZ:Array.isArray(e)?DB:typeof e=="object"?Ia.test(e)?eA:nZ:r4}function DB(e,t){const r=[...e],n=r.length,s=e.map((a,i)=>o7(a)(a,t[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function nZ(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=o7(e[s])(e[s],t[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function sZ(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}const aZ=(e,t)=>{const r=Rf.createTransformer(t),n=uv(e),s=uv(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Nk.has(e)&&!s.values.length||Nk.has(t)&&!n.values.length?tZ(e,t):e2(DB(sZ(n,s),s.values),r):r4(e,t)};function OB(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ys(e,t,r):o7(e)(e,t)}const iZ=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>$s.update(t,r),stop:()=>Of(t),now:()=>zi.isProcessing?zi.timestamp:il.now()}},RB=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},n4=2e4;function l7(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<n4;)t+=r,n=e.next(t);return t>=n4?1/0:t}function oZ(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(l7(n),n4);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:qu(s)}}const lZ=5;function IB(e,t,r){const n=Math.max(t-lZ,0);return pB(r-e(n),t-n)}const la={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},PS=.001;function cZ({duration:e=la.duration,bounce:t=la.bounce,velocity:r=la.velocity,mass:n=la.mass}){let s,a,i=1-t;i=a0(la.minDamping,la.maxDamping,i),e=a0(la.minDuration,la.maxDuration,qu(e)),i<1?(s=u=>{const d=u*i,f=d*e,h=d-r,g=Ak(u,i),x=Math.exp(-f);return PS-h/g*x},a=u=>{const f=u*i*e,h=f*r+r,g=Math.pow(i,2)*Math.pow(u,2)*e,x=Math.exp(-f),y=Ak(Math.pow(u,2),i);return(-s(u)+PS>0?-1:1)*((h-g)*x)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-PS+d*f},a=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const o=5/e,l=dZ(s,a,o);if(e=Vu(e),isNaN(l))return{stiffness:la.stiffness,damping:la.damping,duration:e};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const uZ=12;function dZ(e,t,r){let n=r;for(let s=1;s<uZ;s++)n=n-e(n)/t(n);return n}function Ak(e,t){return e*Math.sqrt(1-t*t)}const fZ=["duration","bounce"],hZ=["stiffness","damping","mass"];function tA(e,t){return t.some(r=>e[r]!==void 0)}function mZ(e){let t={velocity:la.velocity,stiffness:la.stiffness,damping:la.damping,mass:la.mass,isResolvedFromDuration:!1,...e};if(!tA(e,hZ)&&tA(e,fZ))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*a0(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:la.mass,stiffness:s,damping:a}}else{const r=cZ(e);t={...t,...r,mass:la.mass},t.isResolvedFromDuration=!0}return t}function s4(e=la.visualDuration,t=la.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:g}=mZ({...r,velocity:-qu(r.velocity||0)}),x=h||0,y=u/(2*Math.sqrt(l*d)),v=i-a,T=qu(Math.sqrt(l/d)),k=Math.abs(v)<5;n||(n=k?la.restSpeed.granular:la.restSpeed.default),s||(s=k?la.restDelta.granular:la.restDelta.default);let b;if(y<1){const N=Ak(T,y);b=P=>{const M=Math.exp(-y*T*P);return i-M*((x+y*T*v)/N*Math.sin(N*P)+v*Math.cos(N*P))}}else if(y===1)b=N=>i-Math.exp(-T*N)*(v+(x+T*v)*N);else{const N=T*Math.sqrt(y*y-1);b=P=>{const M=Math.exp(-y*T*P),j=Math.min(N*P,300);return i-M*((x+y*T*v)*Math.sinh(j)+N*v*Math.cosh(j))/N}}const E={calculatedDuration:g&&f||null,next:N=>{const P=b(N);if(g)o.done=N>=f;else{let M=N===0?x:0;y<1&&(M=N===0?Vu(x):IB(b,N,P));const j=Math.abs(M)<=n,A=Math.abs(i-P)<=s;o.done=j&&A}return o.value=o.done?i:P,o},toString:()=>{const N=Math.min(l7(E),n4),P=RB(M=>E.next(N*M).value,N,30);return N+"ms "+P},toTransition:()=>{}};return E}s4.applyToOptions=e=>{const t=oZ(e,100,s4);return e.ease=t.ease,e.duration=Vu(t.duration),e.type="keyframes",e};function jk({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},g=j=>o!==void 0&&j<o||l!==void 0&&j>l,x=j=>o===void 0?l:l===void 0||Math.abs(o-j)<Math.abs(l-j)?o:l;let y=r*t;const v=f+y,T=i===void 0?v:i(v);T!==v&&(y=T-f);const k=j=>-y*Math.exp(-j/n),b=j=>T+k(j),E=j=>{const A=k(j),F=b(j);h.done=Math.abs(A)<=u,h.value=h.done?T:F};let N,P;const M=j=>{g(h.value)&&(N=j,P=s4({keyframes:[h.value,x(h.value)],velocity:IB(b,j,h.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return M(0),{calculatedDuration:null,next:j=>{let A=!1;return!P&&N===void 0&&(A=!0,E(j),M(j)),N!==void 0&&j>=N?P.next(j-N):(!A&&E(j),h)}}}function gZ(e,t,r){const n=[],s=r||i0.mix||OB,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const l=Array.isArray(t)?t[i]||yc:t;o=e2(l,o)}n.push(o)}return n}function pZ(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(QT(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=gZ(t,n,s),l=o.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=lv(e[f],e[f+1],d);return o[f](h)};return r?d=>u(a0(e[0],e[a-1],d)):u}function xZ(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=lv(0,t,n);e.push(Ys(r,1,s))}}function yZ(e){const t=[0];return xZ(t,e.length-1),t}function vZ(e,t){return e.map(r=>r*t)}function wZ(e,t){return e.map(()=>t||TB).splice(0,e.length-1)}function By({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=PQ(n)?n.map(X9):X9(n),a={done:!1,value:t[0]},i=vZ(r&&r.length===t.length?r:yZ(t),e),o=pZ(i,t,{ease:Array.isArray(s)?s:wZ(t,s)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const bZ=e=>e!==null;function c7(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter(bZ),o=s<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const _Z={decay:jk,inertia:jk,tween:By,keyframes:By,spring:s4};function LB(e){typeof e.type=="string"&&(e.type=_Z[e.type])}class u7{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const SZ=e=>e/100;class d7 extends u7{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==il.now()&&this.tick(il.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;LB(t);const{type:r=By,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const l=r||By;l!==By&&typeof o[0]!="number"&&(this.mixKeyframes=e2(SZ,OB(o[0],o[1])),o=[0,100]);const u=l({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=l7(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:g,type:x,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?T<0:T>s;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,E=n;if(f){const j=Math.min(this.currentTime,s)/o;let A=Math.floor(j),F=j%1;!F&&j>=1&&(F=1),F===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(h==="reverse"?(F=1-F,g&&(F-=g/o)):h==="mirror"&&(E=i)),b=a0(0,1,F)*o}const N=k?{done:!1,value:d[0]}:E.next(b);a&&(N.value=a(N.value));let{done:P}=N;!k&&l!==null&&(P=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return M&&x!==jk&&(N.value=c7(d,this.options,v,this.speed)),y&&y(N.value),M&&this.finish(),N}then(t,r){return this.finished.then(t,r)}get duration(){return qu(this.calculatedDuration)}get time(){return qu(this.currentTime)}set time(t){t=Vu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(il.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=qu(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=iZ,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(il.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function kZ(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Jh=e=>e*180/Math.PI,Pk=e=>{const t=Jh(Math.atan2(e[1],e[0]));return Mk(t)},TZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Pk,rotateZ:Pk,skewX:e=>Jh(Math.atan(e[1])),skewY:e=>Jh(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Mk=e=>(e=e%360,e<0&&(e+=360),e),rA=Pk,nA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),sA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),CZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:nA,scaleY:sA,scale:e=>(nA(e)+sA(e))/2,rotateX:e=>Mk(Jh(Math.atan2(e[6],e[5]))),rotateY:e=>Mk(Jh(Math.atan2(-e[2],e[0]))),rotateZ:rA,rotate:rA,skewX:e=>Jh(Math.atan(e[4])),skewY:e=>Jh(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Fk(e){return e.includes("scale")?1:0}function Dk(e,t){if(!e||e==="none")return Fk(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=CZ,s=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=TZ,s=o}if(!s)return Fk(t);const a=n[t],i=s[1].split(",").map(NZ);return typeof a=="function"?a(i):i[a]}const EZ=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Dk(r,t)};function NZ(e){return parseFloat(e.trim())}const a1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],i1=new Set(a1),aA=e=>e===s1||e===tn,AZ=new Set(["x","y","z"]),jZ=a1.filter(e=>!AZ.has(e));function PZ(e){const t=[];return jZ.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const am={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Dk(t,"x"),y:(e,{transform:t})=>Dk(t,"y")};am.translateX=am.x;am.translateY=am.y;const im=new Set;let Ok=!1,Rk=!1,Ik=!1;function BB(){if(Rk){const e=Array.from(im).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=PZ(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Rk=!1,Ok=!1,im.forEach(e=>e.complete(Ik)),im.clear()}function $B(){im.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Rk=!0)})}function MZ(){Ik=!0,$B(),BB(),Ik=!1}class f7{constructor(t,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(im.add(this),Ok||(Ok=!0,$s.read($B),$s.resolveKeyframes(BB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}kZ(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),im.delete(this)}cancel(){this.state==="scheduled"&&(im.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const FZ=e=>e.startsWith("--");function DZ(e,t,r){FZ(t)?e.style.setProperty(t,r):e.style[t]=r}const OZ=ZT(()=>window.ScrollTimeline!==void 0),RZ={};function IZ(e,t){const r=ZT(e);return()=>RZ[t]??r()}const zB=IZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ny=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,iA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ny([0,.65,.55,1]),circOut:Ny([.55,0,1,.45]),backIn:Ny([.31,.01,.66,-.59]),backOut:Ny([.33,1.53,.69,.99])};function UB(e,t){if(e)return typeof e=="function"?zB()?RB(e,t):"ease-out":CB(e)?Ny(e):Array.isArray(e)?e.map(r=>UB(r,t)||iA.easeOut):iA[e]}function LZ(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[t]:r};l&&(d.offset=l);const f=UB(o,s);Array.isArray(f)&&(d.easing=f);const h={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function WB(e){return typeof e=="function"&&"applyToOptions"in e}function BZ({type:e,...t}){return WB(e)&&zB()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class $Z extends u7{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,QT(typeof t.type!="string");const u=BZ(t);this.animation=LZ(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=c7(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):DZ(r,n,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return qu(Number(t))}get time(){return qu(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Vu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&OZ()?(this.animation.timeline=t,yc):r(this)}}const HB={anticipate:_B,backInOut:bB,circInOut:kB};function zZ(e){return e in HB}function UZ(e){typeof e.ease=="string"&&zZ(e.ease)&&(e.ease=HB[e.ease])}const oA=10;class WZ extends $Z{constructor(t){UZ(t),LB(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new d7({...i,autoplay:!1}),l=Vu(this.finishedTime??this.time);r.setWithVelocity(o.sample(l-oA).value,o.sample(l).value,oA),o.stop()}}const lA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Rf.test(e)||e==="0")&&!e.startsWith("url("));function HZ(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function GZ(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=lA(s,t),o=lA(a,t);return!i||!o?!1:HZ(e)||(r==="spring"||WB(r))&&n}function Lk(e){e.duration=0,e.type}const VZ=new Set(["opacity","clipPath","filter","transform"]),qZ=ZT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function KZ(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return qZ()&&r&&VZ.has(r)&&(r!=="transform"||!u)&&!l&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const YZ=40;class XZ extends u7{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:l,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=il.now();const h={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:l,motionValue:u,element:d,...f},g=d?.KeyframeResolver||f7;this.keyframeResolver=new g(o,(x,y,v)=>this.onKeyframesResolved(x,y,h,!v),l,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:l,isHandoff:u,onUpdate:d}=n;this.resolvedAt=il.now(),GZ(t,a,i,o)||((i0.instantAnimations||!l)&&d?.(c7(t,n,r)),t[0]=t[t.length-1],Lk(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>YZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},g=!u&&KZ(h)?new WZ({...h,element:h.motionValue.owner.current}):new d7(h);g.finished.then(()=>this.notifyFinished()).catch(yc),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),MZ()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const JZ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function QZ(e){const t=JZ.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function GB(e,t,r=1){const[n,s]=QZ(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const i=a.trim();return hB(i)?parseFloat(i):i}return s7(s)?GB(s,t,r+1):s}function h7(e,t){return e?.[t]??e?.default??e}const VB=new Set(["width","height","top","left","right","bottom",...a1]),ZZ={test:e=>e==="auto",parse:e=>e},qB=e=>t=>t.test(e),KB=[s1,tn,Ku,xf,HQ,WQ,ZZ],cA=e=>KB.find(qB(e));function eee(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||gB(e):!0}const tee=new Set(["brightness","contrast","saturate","opacity"]);function ree(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(a7)||[];if(!n)return e;const s=r.replace(n,"");let a=tee.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const nee=/\b([a-z-]*)\(.*?\)/gu,Bk={...Rf,getAnimatableNone:e=>{const t=e.match(nee);return t?t.map(ree).join(" "):e}},uA={...s1,transform:Math.round},see={rotate:xf,rotateX:xf,rotateY:xf,rotateZ:xf,scale:zw,scaleX:zw,scaleY:zw,scaleZ:zw,skew:xf,skewX:xf,skewY:xf,distance:tn,translateX:tn,translateY:tn,translateZ:tn,x:tn,y:tn,z:tn,perspective:tn,transformPerspective:tn,opacity:cv,originX:J9,originY:J9,originZ:tn},m7={borderWidth:tn,borderTopWidth:tn,borderRightWidth:tn,borderBottomWidth:tn,borderLeftWidth:tn,borderRadius:tn,radius:tn,borderTopLeftRadius:tn,borderTopRightRadius:tn,borderBottomRightRadius:tn,borderBottomLeftRadius:tn,width:tn,maxWidth:tn,height:tn,maxHeight:tn,top:tn,right:tn,bottom:tn,left:tn,padding:tn,paddingTop:tn,paddingRight:tn,paddingBottom:tn,paddingLeft:tn,margin:tn,marginTop:tn,marginRight:tn,marginBottom:tn,marginLeft:tn,backgroundPositionX:tn,backgroundPositionY:tn,...see,zIndex:uA,fillOpacity:cv,strokeOpacity:cv,numOctaves:uA},aee={...m7,color:Ia,backgroundColor:Ia,outlineColor:Ia,fill:Ia,stroke:Ia,borderColor:Ia,borderTopColor:Ia,borderRightColor:Ia,borderBottomColor:Ia,borderLeftColor:Ia,filter:Bk,WebkitFilter:Bk},YB=e=>aee[e];function XB(e,t){let r=YB(e);return r!==Bk&&(r=Rf),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const iee=new Set(["auto","none","0"]);function oee(e,t,r){let n=0,s;for(;n<e.length&&!s;){const a=e[n];typeof a=="string"&&!iee.has(a)&&uv(a).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=XB(r,s)}class lee extends f7{constructor(t,r,n,s,a){super(t,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),s7(u))){const d=GB(u,r.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!VB.has(n)||t.length!==2)return;const[s,a]=t,i=cA(s),o=cA(a);if(i!==o)if(aA(i)&&aA(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else am[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||eee(t[s]))&&n.push(s);n.length&&oee(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=am[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=am[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{t.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function cee(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=r?.[e]??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const JB=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function QB(e){return mB(e)&&"offsetHeight"in e}const dA=30,uee=e=>!isNaN(parseFloat(e));class dee{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=il.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=il.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=uee(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new e7);const n=this.events[t].add(r);return t==="change"?()=>{n(),$s.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=il.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>dA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,dA);return pB(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ip(e,t){return new dee(e,t)}const{schedule:g7}=EB(queueMicrotask,!1),Xc={x:!1,y:!1};function ZB(){return Xc.x||Xc.y}function fee(e){return e==="x"||e==="y"?Xc[e]?null:(Xc[e]=!0,()=>{Xc[e]=!1}):Xc.x||Xc.y?null:(Xc.x=Xc.y=!0,()=>{Xc.x=Xc.y=!1})}function e$(e,t){const r=cee(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function fA(e){return!(e.pointerType==="touch"||ZB())}function hee(e,t,r={}){const[n,s,a]=e$(e,r),i=o=>{if(!fA(o))return;const{target:l}=o,u=t(l,o);if(typeof u!="function"||!l)return;const d=f=>{fA(f)&&(u(f),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const t$=(e,t)=>t?e===t?!0:t$(e,t.parentElement):!1,p7=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,mee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gee(e){return mee.has(e.tagName)||e.tabIndex!==-1}const $b=new WeakSet;function hA(e){return t=>{t.key==="Enter"&&e(t)}}function MS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const pee=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=hA(()=>{if($b.has(r))return;MS(r,"down");const s=hA(()=>{MS(r,"up")}),a=()=>MS(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function mA(e){return p7(e)&&!ZB()}function xee(e,t,r={}){const[n,s,a]=e$(e,r),i=o=>{const l=o.currentTarget;if(!mA(o))return;$b.add(l);const u=t(l,o),d=(g,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),$b.has(l)&&$b.delete(l),mA(g)&&typeof u=="function"&&u(g,{success:x})},f=g=>{d(g,l===window||l===document||r.useGlobalTarget||t$(l,g.target))},h=g=>{d(g,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),QB(o)&&(o.addEventListener("focus",u=>pee(u,s)),!gee(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function r$(e){return mB(e)&&"ownerSVGElement"in e}function yee(e){return r$(e)&&e.tagName==="svg"}const mo=e=>!!(e&&e.getVelocity),vee=[...KB,Ia,Rf],wee=e=>vee.find(qB(e)),x7=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class bee extends _.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=QB(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _ee({children:e,isPresent:t,anchorX:r,root:n}){const s=_.useId(),a=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=_.useContext(x7);return _.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:f,right:h}=i.current;if(t||!a.current||!l||!u)return;const g=r==="left"?`left: ${f}`:`right: ${h}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const y=n??document.head;return y.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(x)&&y.removeChild(x)}},[t]),c.jsx(bee,{isPresent:t,childRef:a,sizeRef:i,children:_.cloneElement(e,{ref:a})})}const See=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:l})=>{const u=KT(kee),d=_.useId();let f=!0,h=_.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:g=>{u.set(g,!0);for(const x of u.values())if(!x)return;n&&n()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,n]);return a&&f&&(h={...h}),_.useMemo(()=>{u.forEach((g,x)=>u.set(x,!1))},[r]),_.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(e=c.jsx(_ee,{isPresent:r,anchorX:o,root:l,children:e})),c.jsx(A_.Provider,{value:h,children:e})};function kee(){return new Map}function n$(e=!0){const t=_.useContext(A_);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=_.useId();_.useEffect(()=>{if(e)return s(a)},[e]);const i=_.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}const Uw=e=>e.key||"";function gA(e){const t=[];return _.Children.forEach(e,r=>{_.isValidElement(r)&&t.push(r)}),t}const al=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:l})=>{const[u,d]=n$(i),f=_.useMemo(()=>gA(e),[e]),h=i&&!u?[]:f.map(Uw),g=_.useRef(!0),x=_.useRef(f),y=KT(()=>new Map),[v,T]=_.useState(f),[k,b]=_.useState(f);fB(()=>{g.current=!1,x.current=f;for(let P=0;P<k.length;P++){const M=Uw(k[P]);h.includes(M)?y.delete(M):y.get(M)!==!0&&y.set(M,!1)}},[k,h.length,h.join("-")]);const E=[];if(f!==v){let P=[...f];for(let M=0;M<k.length;M++){const j=k[M],A=Uw(j);h.includes(A)||(P.splice(M,0,j),E.push(j))}return a==="wait"&&E.length&&(P=E),b(gA(P)),T(f),null}const{forceRender:N}=_.useContext(qT);return c.jsx(c.Fragment,{children:k.map(P=>{const M=Uw(P),j=i&&!u?!1:f===k||h.includes(M),A=()=>{if(y.has(M))y.set(M,!0);else return;let F=!0;y.forEach(L=>{L||(F=!1)}),F&&(N?.(),b(x.current),i&&d?.(),n&&n())};return c.jsx(See,{isPresent:j,initial:!g.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:l,onExitComplete:j?void 0:A,anchorX:o,children:P},M)})})},s$=_.createContext({strict:!1}),pA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lp={};for(const e in pA)Lp[e]={isEnabled:t=>pA[e].some(r=>!!t[r])};function Tee(e){for(const t in e)Lp[t]={...Lp[t],...e[t]}}const Cee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function a4(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Cee.has(e)}let a$=e=>!a4(e);function Eee(e){typeof e=="function"&&(a$=t=>t.startsWith("on")?!a4(t):e(t))}try{Eee(require("@emotion/is-prop-valid").default)}catch{}function Nee(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(a$(s)||r===!0&&a4(s)||!t&&!a4(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const j_=_.createContext({});function P_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function dv(e){return typeof e=="string"||Array.isArray(e)}const y7=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],v7=["initial",...y7];function M_(e){return P_(e.animate)||v7.some(t=>dv(e[t]))}function i$(e){return!!(M_(e)||e.variants)}function Aee(e,t){if(M_(e)){const{initial:r,animate:n}=e;return{initial:r===!1||dv(r)?r:void 0,animate:dv(n)?n:void 0}}return e.inherit!==!1?t:{}}function jee(e){const{initial:t,animate:r}=Aee(e,_.useContext(j_));return _.useMemo(()=>({initial:t,animate:r}),[xA(t),xA(r)])}function xA(e){return Array.isArray(e)?e.join(" "):e}const fv={};function Pee(e){for(const t in e)fv[t]=e[t],n7(t)&&(fv[t].isCSSVariable=!0)}function o$(e,{layout:t,layoutId:r}){return i1.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!fv[e]||e==="opacity")}const Mee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fee=a1.length;function Dee(e,t,r){let n="",s=!0;for(let a=0;a<Fee;a++){const i=a1[a],o=e[i];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(i.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const u=JB(o,m7[i]);if(!l){s=!1;const d=Mee[i]||i;n+=`${d}(${u}) `}r&&(t[i]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function w7(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const u=t[l];if(i1.has(l)){i=!0;continue}else if(n7(l)){s[l]=u;continue}else{const d=JB(u,m7[l]);l.startsWith("origin")?(o=!0,a[l]=d):n[l]=d}}if(t.transform||(i||r?n.transform=Dee(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${l} ${u} ${d}`}}const b7=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function l$(e,t,r){for(const n in t)!mo(t[n])&&!o$(n,r)&&(e[n]=t[n])}function Oee({transformTemplate:e},t){return _.useMemo(()=>{const r=b7();return w7(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Ree(e,t){const r=e.style||{},n={};return l$(n,r,e),Object.assign(n,Oee(e,t)),n}function Iee(e,t){const r={},n=Ree(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Lee={offset:"stroke-dashoffset",array:"stroke-dasharray"},Bee={offset:"strokeDashoffset",array:"strokeDasharray"};function $ee(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?Lee:Bee;e[a.offset]=tn.transform(-n);const i=tn.transform(t),o=tn.transform(r);e[a.array]=`${i} ${o}`}function c$(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,u,d){if(w7(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&$ee(f,s,a,i,!1)}const u$=()=>({...b7(),attrs:{}}),d$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function zee(e,t,r,n){const s=_.useMemo(()=>{const a=u$();return c$(a,t,d$(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};l$(a,e.style,e),s.style={...a,...s.style}}return s}const Uee=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _7(e){return typeof e!="string"||e.includes("-")?!1:!!(Uee.indexOf(e)>-1||/[A-Z]/u.test(e))}function Wee(e,t,r,{latestValues:n},s,a=!1){const o=(_7(e)?zee:Iee)(t,n,s,e),l=Nee(t,typeof e=="string",a),u=e!==_.Fragment?{...l,...o,ref:r}:{},{children:d}=t,f=_.useMemo(()=>mo(d)?d.get():d,[d]);return _.createElement(e,{...u,children:f})}function yA(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function S7(e,t,r,n){if(typeof t=="function"){const[s,a]=yA(n);t=t(r!==void 0?r:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=yA(n);t=t(r!==void 0?r:e.custom,s,a)}return t}function zb(e){return mo(e)?e.get():e}function Hee({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:Gee(r,n,s,e),renderState:t()}}function Gee(e,t,r,n){const s={},a=n(e,{});for(const h in a)s[h]=zb(a[h]);let{initial:i,animate:o}=e;const l=M_(e),u=i$(e);t&&u&&!l&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!P_(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const x=S7(e,h[g]);if(x){const{transitionEnd:y,transition:v,...T}=x;for(const k in T){let b=T[k];if(Array.isArray(b)){const E=d?b.length-1:0;b=b[E]}b!==null&&(s[k]=b)}for(const k in y)s[k]=y[k]}}}return s}const f$=e=>(t,r)=>{const n=_.useContext(j_),s=_.useContext(A_),a=()=>Hee(e,t,n,s);return r?a():KT(a)};function k7(e,t,r){const{style:n}=e,s={};for(const a in n)(mo(n[a])||t.style&&mo(t.style[a])||o$(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const Vee=f$({scrapeMotionValuesFromProps:k7,createRenderState:b7});function h$(e,t,r){const n=k7(e,t,r);for(const s in e)if(mo(e[s])||mo(t[s])){const a=a1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=e[s]}return n}const qee=f$({scrapeMotionValuesFromProps:h$,createRenderState:u$}),Kee=Symbol.for("motionComponentSymbol");function hp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Yee(e,t,r){return _.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):hp(r)&&(r.current=n))},[t])}const T7=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Xee="framerAppearId",m$="data-"+T7(Xee),g$=_.createContext({});function Jee(e,t,r,n,s){const{visualElement:a}=_.useContext(j_),i=_.useContext(s$),o=_.useContext(A_),l=_.useContext(x7).reducedMotion,u=_.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,f=_.useContext(g$);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&Qee(u.current,r,s,f);const h=_.useRef(!1);_.useInsertionEffect(()=>{d&&h.current&&d.update(r,o)});const g=r[m$],x=_.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return fB(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),_.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),x.current=!1),d.enteringChildren=void 0)}),d}function Qee(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:p$(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&hp(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:u})}function p$(e){if(e)return e.options.allowProjection!==!1?e.projection:p$(e.parent)}function FS(e,{forwardMotionProps:t=!1}={},r,n){r&&Tee(r);const s=_7(e)?qee:Vee;function a(o,l){let u;const d={..._.useContext(x7),...o,layoutId:Zee(o)},{isStatic:f}=d,h=jee(o),g=s(o,f);if(!f&&YT){ete();const x=tte(d);u=x.MeasureLayout,h.visualElement=Jee(e,g,d,n,x.ProjectionNode)}return c.jsxs(j_.Provider,{value:h,children:[u&&h.visualElement?c.jsx(u,{visualElement:h.visualElement,...d}):null,Wee(e,o,Yee(g,h.visualElement,l),g,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=_.forwardRef(a);return i[Kee]=e,i}function Zee({layoutId:e}){const t=_.useContext(qT).id;return t&&e!==void 0?t+"-"+e:e}function ete(e,t){_.useContext(s$).strict}function tte(e){const{drag:t,layout:r}=Lp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function rte(e,t){if(typeof Proxy>"u")return FS;const r=new Map,n=(a,i)=>FS(a,i,e,t),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,FS(i,void 0,e,t)),r.get(i))})}function x$({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function nte({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ste(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function DS(e){return e===void 0||e===1}function $k({scale:e,scaleX:t,scaleY:r}){return!DS(e)||!DS(t)||!DS(r)}function Hh(e){return $k(e)||y$(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function y$(e){return vA(e.x)||vA(e.y)}function vA(e){return e&&e!=="0%"}function i4(e,t,r){const n=e-r,s=t*n;return r+s}function wA(e,t,r,n,s){return s!==void 0&&(e=i4(e,s,n)),i4(e,r,n)+t}function zk(e,t=0,r=1,n,s){e.min=wA(e.min,t,r,n,s),e.max=wA(e.max,t,r,n,s)}function v$(e,{x:t,y:r}){zk(e.x,t.translate,t.scale,t.originPoint),zk(e.y,r.translate,r.scale,r.originPoint)}const bA=.999999999999,_A=1.0000000000001;function ate(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&gp(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,v$(e,i)),n&&Hh(a.latestValues)&&gp(e,a.latestValues))}t.x<_A&&t.x>bA&&(t.x=1),t.y<_A&&t.y>bA&&(t.y=1)}function mp(e,t){e.min=e.min+t,e.max=e.max+t}function SA(e,t,r,n,s=.5){const a=Ys(e.min,e.max,s);zk(e,t,r,a,n)}function gp(e,t){SA(e.x,t.x,t.scaleX,t.scale,t.originX),SA(e.y,t.y,t.scaleY,t.scale,t.originY)}function w$(e,t){return x$(ste(e.getBoundingClientRect(),t))}function ite(e,t,r){const n=w$(e,r),{scroll:s}=t;return s&&(mp(n.x,s.offset.x),mp(n.y,s.offset.y)),n}const kA=()=>({translate:0,scale:1,origin:0,originPoint:0}),pp=()=>({x:kA(),y:kA()}),TA=()=>({min:0,max:0}),ka=()=>({x:TA(),y:TA()}),Uk={current:null},b$={current:!1};function ote(){if(b$.current=!0,!!YT)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Uk.current=e.matches;e.addEventListener("change",t),t()}else Uk.current=!1}const lte=new WeakMap;function cte(e,t,r){for(const n in t){const s=t[n],a=r[n];if(mo(s))e.addValue(n,s);else if(mo(a))e.addValue(n,Ip(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(n);e.addValue(n,Ip(i!==void 0?i:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const CA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ute{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=f7,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=il.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,$s.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=M_(r),this.isVariantNode=i$(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const g=f[h];l[h]!==void 0&&mo(g)&&g.set(l[h])}}mount(t){this.current=t,lte.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),b$.current||ote(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Uk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Of(this.notifyUpdate),Of(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=i1.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&$s.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Lp){const r=Lp[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ka()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<CA.length;n++){const s=CA[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=cte(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Ip(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(hB(n)||gB(n))?n=parseFloat(n):!wee(n)&&Rf.test(r)&&(n=XB(t,r)),this.setBaseTarget(t,mo(n)?n.get():n)),mo(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=S7(this.props,r,this.presenceContext?.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!mo(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new e7),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){g7.render(this.render)}}class _$ extends ute{constructor(){super(...arguments),this.KeyframeResolver=lee}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mo(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function S$(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function dte(e){return window.getComputedStyle(e)}class fte extends _${constructor(){super(...arguments),this.type="html",this.renderInstance=S$}readValueFromInstance(t,r){if(i1.has(r))return this.projection?.isProjecting?Fk(r):EZ(t,r);{const n=dte(t),s=(n7(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return w$(t,r)}build(t,r,n){w7(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return k7(t,r,n)}}const k$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hte(e,t,r,n){S$(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(k$.has(s)?s:T7(s),t.attrs[s])}class mte extends _${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ka}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(i1.has(r)){const n=YB(r);return n&&n.default||0}return r=k$.has(r)?r:T7(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return h$(t,r,n)}build(t,r,n){c$(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){hte(t,r,n,s)}mount(t){this.isSVGTag=d$(t.tagName),super.mount(t)}}const gte=(e,t)=>_7(e)?new mte(t):new fte(t,{allowProjection:e!==_.Fragment});function _p(e,t,r){const n=e.getProps();return S7(n,t,r!==void 0?r:n.custom,e)}const Wk=e=>Array.isArray(e);function pte(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Ip(r))}function xte(e){return Wk(e)?e[e.length-1]||0:e}function yte(e,t){const r=_p(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=xte(a[i]);pte(e,i,o)}}function vte(e){return!!(mo(e)&&e.add)}function Hk(e,t){const r=e.getValue("willChange");if(vte(r))return r.add(t);if(!r&&i0.WillChange){const n=new i0.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function T$(e){return e.props[m$]}const wte=e=>e!==null;function bte(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(wte),a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const _te={type:"spring",stiffness:500,damping:25,restSpeed:10},Ste=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),kte={type:"keyframes",duration:.8},Tte={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cte=(e,{keyframes:t})=>t.length>2?kte:i1.has(e)?e.startsWith("scale")?Ste(t[1]):_te:Tte;function Ete({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const C7=(e,t,r,n={},s,a)=>i=>{const o=h7(n,e)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Vu(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};Ete(o)||Object.assign(d,Cte(e,d)),d.duration&&(d.duration=Vu(d.duration)),d.repeatDelay&&(d.repeatDelay=Vu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Lk(d),d.delay===0&&(f=!0)),(i0.instantAnimations||i0.skipAnimations)&&(f=!0,Lk(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const h=bte(d.keyframes,o);if(h!==void 0){$s.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new d7(d):new XZ(d)};function Nte({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function C$(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),h=o[d];if(h===void 0||u&&Nte(u,d))continue;const g={delay:r,...h7(a||{},d)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===x&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const T=T$(e);if(T){const k=window.MotionHandoffAnimation(T,d,$s);k!==null&&(g.startTime=k,y=!0)}}Hk(e,d),f.start(C7(d,f,h,e.shouldReduceMotion&&VB.has(d)?{type:!1}:g,e,y));const v=f.animation;v&&l.push(v)}return i&&Promise.all(l).then(()=>{$s.update(()=>{i&&yte(e,i)})}),l}function E$(e,t,r,n=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function Gk(e,t,r={}){const n=_p(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(C$(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return Ate(e,t,l,u,d,f,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,u]=o==="beforeChildren"?[a,i]:[i,a];return l().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function Ate(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Gk(l,t,{...i,delay:r+(typeof n=="function"?0:n)+E$(e.variantChildren,l,n,s,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}function jte(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>Gk(e,a,r));n=Promise.all(s)}else if(typeof t=="string")n=Gk(e,t,r);else{const s=typeof t=="function"?_p(e,t,r.custom):t;n=Promise.all(C$(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function N$(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Pte=v7.length;function A$(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?A$(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Pte;r++){const n=v7[r],s=e.props[n];(dv(s)||s===!1)&&(t[n]=s)}return t}const Mte=[...y7].reverse(),Fte=y7.length;function Dte(e){return t=>Promise.all(t.map(({animation:r,options:n})=>jte(e,r,n)))}function Ote(e){let t=Dte(e),r=EA(),n=!0;const s=l=>(u,d)=>{const f=_p(e,d,l==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:g,...x}=f;u={...u,...x,...g}}return u};function a(l){t=l(e)}function i(l){const{props:u}=e,d=A$(e.parent)||{},f=[],h=new Set;let g={},x=1/0;for(let v=0;v<Fte;v++){const T=Mte[v],k=r[T],b=u[T]!==void 0?u[T]:d[T],E=dv(b),N=T===l?k.isActive:null;N===!1&&(x=v);let P=b===d[T]&&b!==u[T]&&E;if(P&&n&&e.manuallyAnimateOnMount&&(P=!1),k.protectedKeys={...g},!k.isActive&&N===null||!b&&!k.prevProp||P_(b)||typeof b=="boolean")continue;const M=Rte(k.prevProp,b);let j=M||T===l&&k.isActive&&!P&&E||v>x&&E,A=!1;const F=Array.isArray(b)?b:[b];let L=F.reduce(s(T),{});N===!1&&(L={});const{prevResolvedValues:V={}}=k,J={...V,...L},ne=B=>{j=!0,h.has(B)&&(A=!0,h.delete(B)),k.needsAnimating[B]=!0;const Y=e.getValue(B);Y&&(Y.liveStyle=!1)};for(const B in J){const Y=L[B],I=V[B];if(g.hasOwnProperty(B))continue;let H=!1;Wk(Y)&&Wk(I)?H=!N$(Y,I):H=Y!==I,H?Y!=null?ne(B):h.add(B):Y!==void 0&&h.has(B)?ne(B):k.protectedKeys[B]=!0}k.prevProp=b,k.prevResolvedValues=L,k.isActive&&(g={...g,...L}),n&&e.blockInitialAnimation&&(j=!1);const ee=P&&M;j&&(!ee||A)&&f.push(...F.map(B=>{const Y={type:T};if(typeof B=="string"&&n&&!ee&&e.manuallyAnimateOnMount&&e.parent){const{parent:I}=e,H=_p(I,B);if(I.enteringChildren&&H){const{delayChildren:W}=H.transition||{};Y.delay=E$(I.enteringChildren,e,W)}}return{animation:B,options:Y}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const T=_p(e,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(v.transition=T.transition)}h.forEach(T=>{const k=e.getBaseTarget(T),b=e.getValue(T);b&&(b.liveStyle=!0),v[T]=k??null}),f.push({animation:v})}let y=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(f):Promise.resolve()}function o(l,u){if(r[l].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(l,u)),r[l].isActive=u;const d=i(l);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=EA(),n=!0}}}function Rte(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!N$(t,e):!1}function Ih(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function EA(){return{animate:Ih(!0),whileInView:Ih(),whileHover:Ih(),whileTap:Ih(),whileDrag:Ih(),whileFocus:Ih(),exit:Ih()}}class Kf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Ite extends Kf{constructor(t){super(t),t.animationState||(t.animationState=Ote(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();P_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Lte=0;class Bte extends Kf{constructor(){super(...arguments),this.id=Lte++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const $te={animation:{Feature:Ite},exit:{Feature:Bte}};function hv(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function n2(e){return{point:{x:e.pageX,y:e.pageY}}}const zte=e=>t=>p7(t)&&e(t,n2(t));function $y(e,t,r,n){return hv(e,t,zte(r),n)}const j$=1e-4,Ute=1-j$,Wte=1+j$,P$=.01,Hte=0-P$,Gte=0+P$;function Io(e){return e.max-e.min}function Vte(e,t,r){return Math.abs(e-t)<=r}function NA(e,t,r,n=.5){e.origin=n,e.originPoint=Ys(t.min,t.max,e.origin),e.scale=Io(r)/Io(t),e.translate=Ys(r.min,r.max,e.origin)-e.originPoint,(e.scale>=Ute&&e.scale<=Wte||isNaN(e.scale))&&(e.scale=1),(e.translate>=Hte&&e.translate<=Gte||isNaN(e.translate))&&(e.translate=0)}function zy(e,t,r,n){NA(e.x,t.x,r.x,n?n.originX:void 0),NA(e.y,t.y,r.y,n?n.originY:void 0)}function AA(e,t,r){e.min=r.min+t.min,e.max=e.min+Io(t)}function qte(e,t,r){AA(e.x,t.x,r.x),AA(e.y,t.y,r.y)}function jA(e,t,r){e.min=t.min-r.min,e.max=e.min+Io(t)}function Uy(e,t,r){jA(e.x,t.x,r.x),jA(e.y,t.y,r.y)}function cc(e){return[e("x"),e("y")]}const M$=({current:e})=>e?e.ownerDocument.defaultView:null,PA=(e,t)=>Math.abs(e-t);function Kte(e,t){const r=PA(e.x,t.x),n=PA(e.y,t.y);return Math.sqrt(r**2+n**2)}class F${constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=RS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=Kte(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:y}=h,{timestamp:v}=zi;this.history.push({...y,timestamp:v});const{onStart:T,onMove:k}=this.handlers;g||(T&&T(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=OS(g,this.transformPagePoint),$s.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:x,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=RS(h.type==="pointercancel"?this.lastMoveEventInfo:OS(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,T),y&&y(h,T)},!p7(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=n2(t),l=OS(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=zi;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,RS(l,this.history)),this.removeListeners=e2($y(this.contextWindow,"pointermove",this.handlePointerMove),$y(this.contextWindow,"pointerup",this.handlePointerUp),$y(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Of(this.updatePoint)}}function OS(e,t){return t?{point:t(e.point)}:e}function MA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function RS({point:e},t){return{point:e,delta:MA(e,D$(t)),offset:MA(e,Yte(t)),velocity:Xte(t,.1)}}function Yte(e){return e[0]}function D$(e){return e[e.length-1]}function Xte(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=D$(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Vu(t)));)r--;if(!n)return{x:0,y:0};const a=qu(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Jte(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ys(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ys(r,e,n.max):Math.min(e,r)),e}function FA(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Qte(e,{top:t,left:r,bottom:n,right:s}){return{x:FA(e.x,r,s),y:FA(e.y,t,n)}}function DA(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function Zte(e,t){return{x:DA(e.x,t.x),y:DA(e.y,t.y)}}function ere(e,t){let r=.5;const n=Io(e),s=Io(t);return s>n?r=lv(t.min,t.max-n,e.min):n>s&&(r=lv(e.min,e.max-s,t.min)),a0(0,1,r)}function tre(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Vk=.35;function rre(e=Vk){return e===!1?e=0:e===!0&&(e=Vk),{x:OA(e,"left","right"),y:OA(e,"top","bottom")}}function OA(e,t,r){return{min:RA(e,t),max:RA(e,r)}}function RA(e,t){return typeof e=="number"?e:e[t]||0}const nre=new WeakMap;class sre{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ka(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(n2(f).point)},i=(f,h)=>{const{drag:g,dragPropagation:x,onDragStart:y}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fee(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cc(T=>{let k=this.getAxisMotionValue(T).get()||0;if(Ku.test(k)){const{projection:b}=this.visualElement;if(b&&b.layout){const E=b.layout.layoutBox[T];E&&(k=Io(E)*(parseFloat(k)/100))}}this.originPoint[T]=k}),y&&$s.postRender(()=>y(f,h)),Hk(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:y,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:T}=h;if(x&&this.currentDirection===null){this.currentDirection=are(T),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,T),this.updateAxis("y",h.point,T),this.visualElement.render(),v&&v(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>cc(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new F$(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:M$(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&$s.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Ww(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=Jte(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&hp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=Qte(n.layoutBox,t):this.constraints=!1,this.elastic=rre(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&cc(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=tre(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!hp(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=ite(n,s.root,this.visualElement.getTransformPagePoint());let i=Zte(s.layout.layoutBox,a);if(r){const o=r(nte(i));this.hasMutatedConstraints=!!o,o&&(i=x$(o))}return i}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=cc(d=>{if(!Ww(d,r,this.currentDirection))return;let f=l&&l[d]||{};i&&(f={min:0,max:0});const h=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Hk(this.visualElement,t),n.start(C7(t,n,0,r,this.visualElement,!1))}stopAnimation(){cc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cc(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){cc(r=>{const{drag:n}=this.getProps();if(!Ww(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(t[r]-Ys(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!hp(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};cc(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const l=o.get();s[i]=ere({min:l,max:l},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cc(i=>{if(!Ww(i,t,null))return;const o=this.getAxisMotionValue(i),{min:l,max:u}=this.constraints[i];o.set(Ys(l,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;nre.set(this.visualElement,this);const t=this.visualElement.current,r=$y(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();hp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),$s.read(n);const i=hv(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(cc(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=Vk,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function Ww(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function are(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class ire extends Kf{constructor(t){super(t),this.removeGroupControls=yc,this.removeListeners=yc,this.controls=new sre(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yc}unmount(){this.removeGroupControls(),this.removeListeners()}}const IA=e=>(t,r)=>{e&&$s.postRender(()=>e(t,r))};class ore extends Kf{constructor(){super(...arguments),this.removePointerDownListener=yc}onPointerDown(t){this.session=new F$(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:M$(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:IA(t),onStart:IA(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&$s.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=$y(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ub={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function LA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Cx={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(tn.test(e))e=parseFloat(e);else return e;const r=LA(e,t.target.x),n=LA(e,t.target.y);return`${r}% ${n}%`}},lre={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Rf.parse(e);if(s.length>5)return n;const a=Rf.createTransformer(e),i=typeof s[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const u=Ys(o,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let IS=!1;class cre extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;Pee(ure),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),IS&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ub.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,IS=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||$s.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),g7.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;IS=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function O$(e){const[t,r]=n$(),n=_.useContext(qT);return c.jsx(cre,{...e,layoutGroup:n,switchLayoutGroup:_.useContext(g$),isPresent:t,safeToRemove:r})}const ure={borderRadius:{...Cx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cx,borderTopRightRadius:Cx,borderBottomLeftRadius:Cx,borderBottomRightRadius:Cx,boxShadow:lre};function dre(e,t,r){const n=mo(e)?e:Ip(e);return n.start(C7("",n,t,r)),n.animation}const fre=(e,t)=>e.depth-t.depth;class hre{constructor(){this.children=[],this.isDirty=!1}add(t){XT(this.children,t),this.isDirty=!0}remove(t){JT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(fre),this.isDirty=!1,this.children.forEach(t)}}function mre(e,t){const r=il.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(Of(n),e(a-t))};return $s.setup(n,!0),()=>Of(n)}const R$=["TopLeft","TopRight","BottomLeft","BottomRight"],gre=R$.length,BA=e=>typeof e=="string"?parseFloat(e):e,$A=e=>typeof e=="number"||tn.test(e);function pre(e,t,r,n,s,a){s?(e.opacity=Ys(0,r.opacity??1,xre(n)),e.opacityExit=Ys(t.opacity??1,0,yre(n))):a&&(e.opacity=Ys(t.opacity??1,r.opacity??1,n));for(let i=0;i<gre;i++){const o=`border${R$[i]}Radius`;let l=zA(t,o),u=zA(r,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||$A(l)===$A(u)?(e[o]=Math.max(Ys(BA(l),BA(u),n),0),(Ku.test(u)||Ku.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||r.rotate)&&(e.rotate=Ys(t.rotate||0,r.rotate||0,n))}function zA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const xre=I$(0,.5,SB),yre=I$(.5,.95,yc);function I$(e,t,r){return n=>n<e?0:n>t?1:r(lv(e,t,n))}function UA(e,t){e.min=t.min,e.max=t.max}function rc(e,t){UA(e.x,t.x),UA(e.y,t.y)}function WA(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function HA(e,t,r,n,s){return e-=t,e=i4(e,1/r,n),s!==void 0&&(e=i4(e,1/s,n)),e}function vre(e,t=0,r=1,n=.5,s,a=e,i=e){if(Ku.test(t)&&(t=parseFloat(t),t=Ys(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=Ys(a.min,a.max,n);e===a&&(o-=t),e.min=HA(e.min,t,r,o,s),e.max=HA(e.max,t,r,o,s)}function GA(e,t,[r,n,s],a,i){vre(e,t[r],t[n],t[s],t.scale,a,i)}const wre=["x","scaleX","originX"],bre=["y","scaleY","originY"];function VA(e,t,r,n){GA(e.x,t,wre,r?r.x:void 0,n?n.x:void 0),GA(e.y,t,bre,r?r.y:void 0,n?n.y:void 0)}function qA(e){return e.translate===0&&e.scale===1}function L$(e){return qA(e.x)&&qA(e.y)}function KA(e,t){return e.min===t.min&&e.max===t.max}function _re(e,t){return KA(e.x,t.x)&&KA(e.y,t.y)}function YA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function B$(e,t){return YA(e.x,t.x)&&YA(e.y,t.y)}function XA(e){return Io(e.x)/Io(e.y)}function JA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Sre{constructor(){this.members=[]}add(t){XT(this.members,t),t.scheduleRender()}remove(t){if(JT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kre(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:g,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),g&&(n+=`skewX(${g}deg) `),x&&(n+=`skewY(${x}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const LS=["","X","Y","Z"],Tre=1e3;let Cre=0;function BS(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function $$(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=T$(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",$s,!(s||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&$$(n)}function z$({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=Cre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Are),this.nodes.forEach(Fre),this.nodes.forEach(Dre),this.nodes.forEach(jre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new hre)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new e7),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const l=this.eventHandlers.get(i);l&&l.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=r$(i)&&!yee(i),this.instance=i;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;$s.read(()=>{f=window.innerWidth}),e(i,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,d&&d(),d=mre(h,250),Ub.hasAnimatedSinceResize&&(Ub.hasAnimatedSinceResize=!1,this.nodes.forEach(ej)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Bre,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),T=!this.targetLayout||!B$(this.targetLayout,g),k=!f&&h;if(this.options.layoutRoot||this.resumeFrom||k||f&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...h7(x,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,k)}else f||ej(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Of(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ore),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ZA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Mre),this.nodes.forEach(Ere),this.nodes.forEach(Nre)):this.nodes.forEach(ZA),this.clearAllSnapshots();const o=il.now();zi.delta=a0(0,1e3/60,o-zi.timestamp),zi.timestamp=o,zi.isProcessing=!0,ES.update.process(zi),ES.preRender.process(zi),ES.render.process(zi),zi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,g7.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pre),this.sharedNodes.forEach(Rre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$s.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$s.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Io(this.snapshot.measuredBox.x)&&!Io(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ka(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!L$(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||Hh(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return i&&(l=this.removeTransform(l)),$re(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return ka();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(zre))){const{scroll:u}=this.root;u&&(mp(o.x,u.offset.x),mp(o.y,u.offset.y))}return o}removeElementScroll(i){const o=ka();if(rc(o,i),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&rc(o,i),mp(o.x,d.offset.x),mp(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const l=ka();rc(l,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&gp(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Hh(d.latestValues)&&gp(l,d.latestValues)}return Hh(this.latestValues)&&gp(l,this.latestValues),l}removeTransform(i){const o=ka();rc(o,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Hh(u.latestValues))continue;$k(u.latestValues)&&u.updateSnapshot();const d=ka(),f=u.measurePageBox();rc(d,f),VA(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Hh(this.latestValues)&&VA(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=zi.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ka(),this.relativeTargetOrigin=ka(),Uy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),rc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ka(),this.targetWithTransforms=ka()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qte(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rc(this.target,this.layout.layoutBox),v$(this.target,this.targetDelta)):rc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ka(),this.relativeTargetOrigin=ka(),Uy(this.relativeTargetOrigin,this.target,h.target),rc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$k(this.parent.latestValues)||y$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===zi.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;rc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;ate(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=ka());const{target:g}=i;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WA(this.prevProjectionDelta.x,this.projectionDelta.x),WA(this.prevProjectionDelta.y,this.projectionDelta.y)),zy(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!JA(this.projectionDelta.x,this.prevProjectionDelta.x)||!JA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pp(),this.projectionDelta=pp(),this.projectionDeltaWithTransform=pp()}setAnimationOrigin(i,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=pp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=ka(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,y=g!==x,v=this.getStack(),T=!v||v.members.length<=1,k=!!(y&&!T&&this.options.crossfade===!0&&!this.path.some(Lre));this.animationProgress=0;let b;this.mixTargetDelta=E=>{const N=E/1e3;tj(f.x,i.x,N),tj(f.y,i.y,N),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Uy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ire(this.relativeTarget,this.relativeTargetOrigin,h,N),b&&_re(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ka()),rc(b,this.relativeTarget)),y&&(this.animationValues=d,pre(d,u,this.latestValues,N,k,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Of(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$s.update(()=>{Ub.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ip(0)),this.currentAnimation=dre(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Tre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=i;if(!(!o||!l||!u)){if(this!==i&&this.layout&&u&&U$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ka();const f=Io(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+f;const h=Io(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}rc(o,l),gp(o,d),zy(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Sre),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&BS("z",i,u,this.animationValues);for(let d=0;d<LS.length;d++)BS(`rotate${LS[d]}`,i,u,this.animationValues),BS(`skew${LS[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=zb(o?.pointerEvents)||"",i.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=zb(o?.pointerEvents)||""),this.hasProjected&&!Hh(this.latestValues)&&(i.transform=l?l({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=kre(this.projectionDeltaWithTransform,this.treeScale,d);l&&(f=l(d,f)),i.transform=f;const{x:h,y:g}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in fv){if(d[x]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:T}=fv[x],k=f==="none"?d[x]:y(d[x],u);if(v){const b=v.length;for(let E=0;E<b;E++)i[v[E]]=k}else T?this.options.visualElement.renderState.vars[x]=k:i[x]=k}this.options.layoutId&&(i.pointerEvents=u===this?zb(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(QA),this.root.sharedNodes.clear()}}}function Ere(e){e.updateLayout()}function Nre(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?cc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Io(f);f.min=r[d].min,f.max=f.min+h}):U$(s,t.layoutBox,r)&&cc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Io(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const i=pp();zy(i,r,t.layoutBox);const o=pp();a?zy(o,e.applyTransform(n,!0),t.measuredBox):zy(o,r,t.layoutBox);const l=!L$(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const g=ka();Uy(g,t.layoutBox,f.layoutBox);const x=ka();Uy(x,r,h.layoutBox),B$(g,x)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Are(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function jre(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Pre(e){e.clearSnapshot()}function QA(e){e.clearMeasurements()}function ZA(e){e.isLayoutDirty=!1}function Mre(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ej(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Fre(e){e.resolveTargetDelta()}function Dre(e){e.calcProjection()}function Ore(e){e.resetSkewAndRotation()}function Rre(e){e.removeLeadSnapshot()}function tj(e,t,r){e.translate=Ys(t.translate,0,r),e.scale=Ys(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function rj(e,t,r,n){e.min=Ys(t.min,r.min,n),e.max=Ys(t.max,r.max,n)}function Ire(e,t,r,n){rj(e.x,t.x,r.x,n),rj(e.y,t.y,r.y,n)}function Lre(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Bre={duration:.45,ease:[.4,0,.1,1]},nj=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),sj=nj("applewebkit/")&&!nj("chrome/")?Math.round:yc;function aj(e){e.min=sj(e.min),e.max=sj(e.max)}function $re(e){aj(e.x),aj(e.y)}function U$(e,t,r){return e==="position"||e==="preserve-aspect"&&!Vte(XA(t),XA(r),.2)}function zre(e){return e!==e.root&&e.scroll?.wasRoot}const Ure=z$({attachResizeListener:(e,t)=>hv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$S={current:void 0},W$=z$({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!$S.current){const e=new Ure({});e.mount(window),e.setOptions({layoutScroll:!0}),$S.current=e}return $S.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Wre={pan:{Feature:ore},drag:{Feature:ire,ProjectionNode:W$,MeasureLayout:O$}};function ij(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&$s.postRender(()=>a(t,n2(t)))}class Hre extends Kf{mount(){const{current:t}=this.node;t&&(this.unmount=hee(t,(r,n)=>(ij(this.node,n,"Start"),s=>ij(this.node,s,"End"))))}unmount(){}}class Gre extends Kf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=e2(hv(this.node.current,"focus",()=>this.onFocus()),hv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oj(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&$s.postRender(()=>a(t,n2(t)))}class Vre extends Kf{mount(){const{current:t}=this.node;t&&(this.unmount=xee(t,(r,n)=>(oj(this.node,n,"Start"),(s,{success:a})=>oj(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qk=new WeakMap,zS=new WeakMap,qre=e=>{const t=qk.get(e.target);t&&t(e)},Kre=e=>{e.forEach(qre)};function Yre({root:e,...t}){const r=e||document;zS.has(r)||zS.set(r,{});const n=zS.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(Kre,{root:e,...t})),n[s]}function Xre(e,t,r){const n=Yre(t);return qk.set(e,r),n.observe(e),()=>{qk.delete(e),n.unobserve(e)}}const Jre={some:0,all:1};class Qre extends Kf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=t,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Jre[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(l)};return Xre(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Zre(t,r))&&this.startObserver()}unmount(){}}function Zre({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const ene={inView:{Feature:Qre},tap:{Feature:Vre},focus:{Feature:Gre},hover:{Feature:Hre}},tne={layout:{ProjectionNode:W$,MeasureLayout:O$}},rne={...$te,...ene,...Wre,...tne},dt=rte(rne,gte),tt=({children:e,variant:t="primary",size:r="md",onClick:n,disabled:s=!1,className:a="",...i})=>{const o="font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer",l={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",outline:"bg-transparent text-blue-600 border-2 border-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-700 focus:ring-gray-500"},u={xs:"px-2 py-1 text-xs",sm:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm",md:"px-3 py-1.5 text-sm sm:px-4 sm:py-2 sm:text-base",lg:"px-4 py-2 text-base sm:px-6 sm:py-3 sm:text-lg",icon:"p-0 flex items-center justify-center"},d=s?"opacity-50 cursor-not-allowed":"";return c.jsx(dt.button,{className:`${o} ${l[t]} ${u[r]} ${d} ${a}`,onClick:n,disabled:s,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...i,children:e})},fn=({size:e="md",color:t="blue",className:r=""})=>{const n={sm:"w-4 h-4",small:"w-4 h-4",md:"w-6 h-6",medium:"w-6 h-6",lg:"w-8 h-8",large:"w-8 h-8",xl:"w-12 h-12"},s={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",gray:"border-gray-600"};return c.jsx(dt.div,{className:`
        inline-block border-2 border-gray-300 border-t-current rounded-full animate-spin
        ${n[e]} ${s[t]} ${r}
      `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},ou=({type:e="info",message:t="",duration:r=3e3,closable:n=!0,onClose:s,className:a="",...i})=>{const[o,l]=_.useState(!0),[u,d]=_.useState(!1),f=_.useRef(null),h=_.useRef(null);_.useEffect(()=>{if(r>0)return h.current=setTimeout(()=>{g()},r),()=>{h.current&&clearTimeout(h.current)}},[r]);const g=_.useCallback(()=>{u||(d(!0),h.current&&clearTimeout(h.current),setTimeout(()=>{l(!1),s&&s()},300))},[u,s]),x=_.useCallback(T=>{T.key==="Escape"&&g()},[g]);if(!o)return null;const y=["notification",`notification-${e}`,o?"notification-visible":"",u?"notification-exiting":"",a].filter(Boolean).join(" "),v=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return c.jsx("div",{ref:f,className:y,role:"alert","aria-live":"polite",onKeyDown:x,tabIndex:-1,...i,children:c.jsxs("div",{className:"notification-content",children:[c.jsx("div",{className:"notification-icon","aria-hidden":"true",children:v()}),c.jsx("div",{className:"notification-body",children:c.jsx("div",{className:"notification-message",children:t})}),n&&c.jsx("button",{className:"notification-close",onClick:g,type:"button","aria-label":"Close notification",children:""})]})})},si=()=>{const[e,t]=_.useState([]),r=_.useCallback((a,i="info",o={})=>{const l=Date.now()+Math.random(),u={id:l,message:a,type:i,...o};return t(d=>[...d,u]),o.duration!==0&&setTimeout(()=>{n(l)},o.duration||3e3),l},[]),n=_.useCallback(a=>{t(i=>i.filter(o=>o.id!==a))},[]),s=_.useCallback(()=>{t([])},[]);return{notifications:e,showNotification:r,removeNotification:n,clearAllNotifications:s}},zl=()=>{const[e,t]=_.useState(!1),[r,n]=_.useState(null),[s,a]=_.useState(null),i=_.useRef(null);_.useRef(new Map);const o=_.useRef(0),l=3,u=1e3,d=_.useCallback(()=>{i.current&&(i.current.abort(),i.current=null)},[]);_.useEffect(()=>d,[d]);const f=_.useCallback(async(R,z={})=>{try{t(!0),n(null),i.current=new AbortController;const G=z.method||"POST",Q={method:G,headers:{"Content-Type":"application/json",...z.headers},signal:i.current.signal,...z};G!=="GET"&&G!=="HEAD"&&(Q.body=JSON.stringify(z.data||{})),console.log(`[API] Making request to: ${R}`,Q);const re=await fetch(R,Q);if(!re.ok)throw new Error(`HTTP error! status: ${re.status}`);const q=await re.json();if(console.log("[API] Response received:",q),q.success)return a(q),o.current=0,q;throw new Error(q.error||q.message||"Request failed")}catch(G){if(G.name==="AbortError")return console.log("[API] Request was aborted"),null;if(console.error("[API] Request failed:",G),n(G.message||"Request failed"),o.current<l){o.current++;const Q=u*Math.pow(2,o.current-1);return console.log(`[API] Retrying in ${Q}ms (attempt ${o.current}/${l})`),await new Promise(re=>setTimeout(re,Q)),f(R,z)}throw G}finally{t(!1),i.current=null}},[]),h=_.useCallback(async(R,z={})=>{try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())throw new Error("No valid authentication token found");return await window.tokenManager.makeAuthenticatedRequest(R,z)}catch(G){throw console.error("[API] Authenticated request failed:",G),G}},[]),g=_.useCallback(async(R,z)=>{try{const G=`/.netlify/functions/get-test-questions?test_type=${R}&test_id=${z}`;console.log(`[API] Getting test info for ${R}_${z}`);const re=await(await h(G)).json();if(re.success)return console.log("[API] Test info retrieved successfully:",re.test_info),re.test_info;throw new Error(re.error||"Failed to get test info")}catch(G){throw console.error("[API] Failed to get test info:",G),G}},[h]),x=_.useCallback(async(R,z)=>{try{const G=`/.netlify/functions/get-test-questions?test_type=${R}&test_id=${z}`;console.log(`[API] Getting test questions for ${R}_${z}`);const re=await(await h(G)).json();if(re.success)return console.log("[API] Test questions retrieved successfully:",re.questions),re.questions;throw new Error(re.error||"Failed to get test questions")}catch(G){throw console.error("[API] Failed to get test questions:",G),G}},[h]),y=_.useCallback(async()=>{try{const R="/.netlify/functions/get-student-active-tests";console.log("[API] Loading student active tests");const G=await(await h(R)).json();if(G.success)return console.log("[API] Student active tests loaded successfully:",G.tests),G.tests;throw new Error(G.error||"Failed to load student active tests")}catch(R){throw console.error("[API] Failed to load student active tests:",R),R}},[h]),v=_.useCallback(async(R,z,G)=>{try{let Q;switch(R){case"true_false":Q="/.netlify/functions/submit-true-false-test";break;case"multiple_choice":Q="/.netlify/functions/submit-multiple-choice-test";break;case"input":Q="/.netlify/functions/submit-input-test";break;case"matching_type":Q="/.netlify/functions/submit-matching-type-test";break;case"speaking":Q="/.netlify/functions/submit-speaking-test";break;default:throw new Error(`Unknown test type: ${R}`)}console.log(`[API] Submitting ${R} test:`,G);const q=await(await h(Q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).json();if(q.success)return console.log("[API] Test submitted successfully:",q),q;throw new Error(q.error||"Failed to submit test")}catch(Q){throw console.error("[API] Failed to submit test:",Q),Q}},[h]),T=_.useCallback(async R=>{try{const z="/.netlify/functions/save-multiple-choice-test";console.log("[API] Saving multiple choice test:",R);const Q=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(Q.success)return console.log("[API] Multiple choice test saved successfully:",Q),Q;throw new Error(Q.error||"Failed to save multiple choice test")}catch(z){throw console.error("[API] Failed to save multiple choice test:",z),z}},[h]),k=_.useCallback(async R=>{try{const z="/.netlify/functions/save-true-false-test";console.log("[API] Saving true/false test:",R);const Q=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(Q.success)return console.log("[API] True/false test saved successfully:",Q),Q;throw new Error(Q.error||"Failed to save true/false test")}catch(z){throw console.error("[API] Failed to save true/false test:",z),z}},[h]),b=_.useCallback(async R=>{try{const z="/.netlify/functions/save-input-test";console.log("[API] Saving input test:",R);const Q=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(Q.success)return console.log("[API] Input test saved successfully:",Q),Q;throw new Error(Q.error||"Failed to save input test")}catch(z){throw console.error("[API] Failed to save input test:",z),z}},[h]),E=_.useCallback(async R=>{try{const z="/.netlify/functions/assign-test";console.log("[API] Assigning test to classes:",R);const Q=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(Q.success)return console.log("[API] Test assigned successfully:",Q),Q;throw new Error(Q.error||"Failed to assign test")}catch(z){throw console.error("[API] Failed to assign test:",z),z}},[h]),N=_.useCallback(async()=>{try{const R="/.netlify/functions/get-teacher-active-tests";console.log("[API] Loading teacher active tests");const G=await(await h(R)).json();if(G.success)return console.log("[API] Teacher active tests loaded successfully:",G.tests),G.tests;throw new Error(G.error||"Failed to load teacher active tests")}catch(R){throw console.error("[API] Failed to load teacher active tests:",R),R}},[h]),P=_.useCallback(async()=>{try{const R="/.netlify/functions/get-all-users";console.log("[API] Getting all users");const G=await(await h(R)).json();if(G.success)return console.log("[API] All users loaded successfully:",G.users),G.users;throw new Error(G.error||"Failed to get all users")}catch(R){throw console.error("[API] Failed to get all users:",R),R}},[h]),M=_.useCallback(async()=>{try{const R="/.netlify/functions/get-all-teachers";console.log("[API] Getting all teachers");const G=await(await h(R)).json();if(G.success)return console.log("[API] All teachers loaded successfully:",G.teachers),G.teachers;throw new Error(G.error||"Failed to get all teachers")}catch(R){throw console.error("[API] Failed to get all teachers:",R),R}},[h]),j=_.useCallback(async()=>{try{const R="/.netlify/functions/get-all-subjects";console.log("[API] Getting all subjects");const G=await(await h(R)).json();if(G.success)return console.log("[API] All subjects loaded successfully:",G.subjects),G.subjects;throw new Error(G.error||"Failed to get all subjects")}catch(R){throw console.error("[API] Failed to get all subjects:",R),R}},[h]),A=_.useCallback(()=>{n(null)},[]),F=_.useCallback(()=>{a(null)},[]),L=_.useCallback(()=>{t(!1),n(null),a(null),o.current=0,d()},[d]),V=_.useCallback(async(R,z={})=>{const Q=await(await h(R,{...z,method:"GET"})).json();if(Q.success)return Q;throw new Error(Q.error||"Request failed")},[h]),J=_.useCallback(async(R,z,G={})=>{const re=await(await h(R,{...G,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(re.success)return re;throw new Error(re.error||"Request failed")},[h]),ne=_.useCallback(async(R,z,G={})=>{const re=await(await h(R,{...G,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(re.success)return re;throw new Error(re.error||"Request failed")},[h]),ee=_.useCallback(async(R,z={})=>{const Q=await(await h(R,{...z,method:"DELETE"})).json();if(Q.success)return Q;throw new Error(Q.error||"Request failed")},[h]),ie=_.useCallback(async R=>{try{const z="/.netlify/functions/submit-speaking-test";console.log("[API] Submitting speaking test:",R);const Q=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(Q.success)return console.log("[API] Speaking test submitted successfully:",Q),Q;throw new Error(Q.error||"Failed to submit speaking test")}catch(z){throw console.error("[API] Failed to submit speaking test:",z),z}},[h]),B=_.useCallback(async R=>{try{const z=`/.netlify/functions/get-speaking-test-new?action=test&test_id=${R}`;console.log("[API] Getting speaking test:",R);const Q=await(await h(z,{method:"GET"})).json();if(Q.success)return console.log("[API] Speaking test loaded successfully:",Q),Q;throw new Error(Q.error||"Failed to load speaking test")}catch(z){throw console.error("[API] Failed to load speaking test:",z),z}},[h]),Y=_.useCallback(async R=>{try{const z=`/.netlify/functions/get-speaking-test-new?action=questions&test_id=${R}`;console.log("[API] Getting speaking test questions:",R);const Q=await(await h(z,{method:"GET"})).json();if(Q.success)return console.log("[API] Speaking test questions loaded successfully:",Q),Q;throw new Error(Q.error||"Failed to load speaking test questions")}catch(z){throw console.error("[API] Failed to load speaking test questions:",z),z}},[h]),I=_.useCallback(async R=>{try{const z="/.netlify/functions/upload-speaking-audio";console.log("[API] Uploading speaking audio");const Q=await(await h(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).json();if(Q.success)return console.log("[API] Audio uploaded successfully:",Q),Q;throw new Error(Q.error||"Failed to upload audio")}catch(z){throw console.error("[API] Failed to upload audio:",z),z}},[h]),H=_.useCallback(async R=>{try{const z=`/.netlify/functions/get-speaking-test-new?action=audio&file_path=${encodeURIComponent(R)}`;console.log("[API] Getting speaking audio:",R);const Q=await(await h(z,{method:"GET"})).json();if(Q.success)return console.log("[API] Audio URL retrieved successfully:",Q),Q;throw new Error(Q.error||"Failed to get audio")}catch(z){throw console.error("[API] Failed to get audio:",z),z}},[h]),W=_.useCallback(async(R,z)=>{try{const G=`/.netlify/functions/check-test-completion?test_id=${R}&test_type=${z}`;console.log("[API] Checking test completion:",R,z);const re=await(await h(G,{method:"GET"})).json();if(re.success)return console.log("[API] Test completion status:",re),re;throw new Error(re.error||"Failed to check test completion")}catch(G){throw console.error("[API] Failed to check test completion:",G),G}},[h]);return{loading:e,error:r,data:s,sendRequest:f,makeAuthenticatedRequest:h,get:V,post:J,put:ne,delete:ee,getTestInfo:g,getTestQuestions:x,loadStudentActiveTests:y,submitTest:v,submitSpeakingTest:ie,getSpeakingTest:B,getSpeakingTestQuestions:Y,uploadSpeakingAudio:I,getSpeakingAudio:H,checkTestCompletion:W,saveMultipleChoiceTest:T,saveTrueFalseTest:k,saveInputTest:b,assignTestToClasses:E,loadTeacherActiveTests:N,getAllUsers:P,getAllTeachers:M,getAllSubjects:j,clearError:A,clearData:F,reset:L,cleanup:d}},nne="modulepreload",sne=function(e){return"/"+e},lj={},Qa=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var i=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=u(r.map(d=>{if(d=sne(d),d in lj)return;lj[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":nne,f||(g.as="script"),g.crossOrigin="",g.href=d,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((x,y)=>{g.addEventListener("load",x),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var Wb={exports:{}},Ex={},US={},WS={},cj;function kn(){return cj||(cj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof e4<"u"?e4:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:r(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(WS)),WS}var HS={},uj;function ma(){return uj||(uj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=kn();class r{constructor(E=[1,0,0,1,0,0]){this.dirty=!1,this.m=E&&E.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(E){E.m[0]=this.m[0],E.m[1]=this.m[1],E.m[2]=this.m[2],E.m[3]=this.m[3],E.m[4]=this.m[4],E.m[5]=this.m[5]}point(E){const N=this.m;return{x:N[0]*E.x+N[2]*E.y+N[4],y:N[1]*E.x+N[3]*E.y+N[5]}}translate(E,N){return this.m[4]+=this.m[0]*E+this.m[2]*N,this.m[5]+=this.m[1]*E+this.m[3]*N,this}scale(E,N){return this.m[0]*=E,this.m[1]*=E,this.m[2]*=N,this.m[3]*=N,this}rotate(E){const N=Math.cos(E),P=Math.sin(E),M=this.m[0]*N+this.m[2]*P,j=this.m[1]*N+this.m[3]*P,A=this.m[0]*-P+this.m[2]*N,F=this.m[1]*-P+this.m[3]*N;return this.m[0]=M,this.m[1]=j,this.m[2]=A,this.m[3]=F,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(E,N){const P=this.m[0]+this.m[2]*N,M=this.m[1]+this.m[3]*N,j=this.m[2]+this.m[0]*E,A=this.m[3]+this.m[1]*E;return this.m[0]=P,this.m[1]=M,this.m[2]=j,this.m[3]=A,this}multiply(E){const N=this.m[0]*E.m[0]+this.m[2]*E.m[1],P=this.m[1]*E.m[0]+this.m[3]*E.m[1],M=this.m[0]*E.m[2]+this.m[2]*E.m[3],j=this.m[1]*E.m[2]+this.m[3]*E.m[3],A=this.m[0]*E.m[4]+this.m[2]*E.m[5]+this.m[4],F=this.m[1]*E.m[4]+this.m[3]*E.m[5]+this.m[5];return this.m[0]=N,this.m[1]=P,this.m[2]=M,this.m[3]=j,this.m[4]=A,this.m[5]=F,this}invert(){const E=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),N=this.m[3]*E,P=-this.m[1]*E,M=-this.m[2]*E,j=this.m[0]*E,A=E*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),F=E*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=N,this.m[1]=P,this.m[2]=M,this.m[3]=j,this.m[4]=A,this.m[5]=F,this}getMatrix(){return this.m}decompose(){const E=this.m[0],N=this.m[1],P=this.m[2],M=this.m[3],j=this.m[4],A=this.m[5],F=E*M-N*P,L={x:j,y:A,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(E!=0||N!=0){const V=Math.sqrt(E*E+N*N);L.rotation=N>0?Math.acos(E/V):-Math.acos(E/V),L.scaleX=V,L.scaleY=F/V,L.skewX=(E*P+N*M)/F,L.skewY=0}else if(P!=0||M!=0){const V=Math.sqrt(P*P+M*M);L.rotation=Math.PI/2-(M>0?Math.acos(-P/V):-Math.acos(P/V)),L.scaleX=F/V,L.scaleY=V,L.skewX=0,L.skewY=(E*P+N*M)/F}return L.rotation=e.Util._getRotation(L.rotation),L}}e.Transform=r;const n="[object Array]",s="[object Number]",a="[object String]",i="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",d="",f="0",h="Konva warning: ",g="Konva error: ",x="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let T=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(b){setTimeout(b,60)};e.Util={_isElement(b){return!!(b&&b.nodeType==1)},_isFunction(b){return!!(b&&b.constructor&&b.call&&b.apply)},_isPlainObject(b){return!!b&&b.constructor===Object},_isArray(b){return Object.prototype.toString.call(b)===n},_isNumber(b){return Object.prototype.toString.call(b)===s&&!isNaN(b)&&isFinite(b)},_isString(b){return Object.prototype.toString.call(b)===a},_isBoolean(b){return Object.prototype.toString.call(b)===i},isObject(b){return b instanceof Object},isValidSelector(b){if(typeof b!="string")return!1;const E=b[0];return E==="#"||E==="."||E===E.toUpperCase()},_sign(b){return b===0||b>0?1:-1},requestAnimFrame(b){T.push(b),T.length===1&&k(function(){const E=T;T=[],E.forEach(function(N){N()})})},createCanvasElement(){const b=document.createElement("canvas");try{b.style=b.style||{}}catch{}return b},createImageElement(){return document.createElement("img")},_isInDocument(b){for(;b=b.parentNode;)if(b==document)return!0;return!1},_urlToImage(b,E){const N=e.Util.createImageElement();N.onload=function(){E(N)},N.src=b},_rgbToHex(b,E,N){return((1<<24)+(b<<16)+(E<<8)+N).toString(16).slice(1)},_hexToRgb(b){b=b.replace(u,d);const E=parseInt(b,16);return{r:E>>16&255,g:E>>8&255,b:E&255}},getRandomColor(){let b=(Math.random()*16777215<<0).toString(16);for(;b.length<6;)b=f+b;return u+b},getRGB(b){let E;return b in y?(E=y[b],{r:E[0],g:E[1],b:E[2]}):b[0]===u?this._hexToRgb(b.substring(1)):b.substr(0,4)===x?(E=v.exec(b.replace(/ /g,"")),{r:parseInt(E[1],10),g:parseInt(E[2],10),b:parseInt(E[3],10)}):{r:0,g:0,b:0}},colorToRGBA(b){return b=b||"black",e.Util._namedColorToRBA(b)||e.Util._hex3ColorToRGBA(b)||e.Util._hex4ColorToRGBA(b)||e.Util._hex6ColorToRGBA(b)||e.Util._hex8ColorToRGBA(b)||e.Util._rgbColorToRGBA(b)||e.Util._rgbaColorToRGBA(b)||e.Util._hslColorToRGBA(b)},_namedColorToRBA(b){const E=y[b.toLowerCase()];return E?{r:E[0],g:E[1],b:E[2],a:1}:null},_rgbColorToRGBA(b){if(b.indexOf("rgb(")===0){b=b.match(/rgb\(([^)]+)\)/)[1];const E=b.split(/ *, */).map(Number);return{r:E[0],g:E[1],b:E[2],a:1}}},_rgbaColorToRGBA(b){if(b.indexOf("rgba(")===0){b=b.match(/rgba\(([^)]+)\)/)[1];const E=b.split(/ *, */).map((N,P)=>N.slice(-1)==="%"?P===3?parseInt(N)/100:parseInt(N)/100*255:Number(N));return{r:E[0],g:E[1],b:E[2],a:E[3]}}},_hex8ColorToRGBA(b){if(b[0]==="#"&&b.length===9)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:parseInt(b.slice(7,9),16)/255}},_hex6ColorToRGBA(b){if(b[0]==="#"&&b.length===7)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:1}},_hex4ColorToRGBA(b){if(b[0]==="#"&&b.length===5)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:parseInt(b[4]+b[4],16)/255}},_hex3ColorToRGBA(b){if(b[0]==="#"&&b.length===4)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:1}},_hslColorToRGBA(b){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(b)){const[E,...N]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b),P=Number(N[0])/360,M=Number(N[1])/100,j=Number(N[2])/100;let A,F,L;if(M===0)return L=j*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};j<.5?A=j*(1+M):A=j+M-j*M;const V=2*j-A,J=[0,0,0];for(let ne=0;ne<3;ne++)F=P+1/3*-(ne-1),F<0&&F++,F>1&&F--,6*F<1?L=V+(A-V)*6*F:2*F<1?L=A:3*F<2?L=V+(A-V)*(2/3-F)*6:L=V,J[ne]=L*255;return{r:Math.round(J[0]),g:Math.round(J[1]),b:Math.round(J[2]),a:1}}},haveIntersection(b,E){return!(E.x>b.x+b.width||E.x+E.width<b.x||E.y>b.y+b.height||E.y+E.height<b.y)},cloneObject(b){const E={};for(const N in b)this._isPlainObject(b[N])?E[N]=this.cloneObject(b[N]):this._isArray(b[N])?E[N]=this.cloneArray(b[N]):E[N]=b[N];return E},cloneArray(b){return b.slice(0)},degToRad(b){return b*o},radToDeg(b){return b*l},_degToRad(b){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(b)},_radToDeg(b){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(b)},_getRotation(b){return t.Konva.angleDeg?e.Util.radToDeg(b):b},_capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)},throw(b){throw new Error(g+b)},error(b){console.error(g+b)},warn(b){t.Konva.showWarnings&&console.warn(h+b)},each(b,E){for(const N in b)E(N,b[N])},_inRange(b,E,N){return E<=b&&b<N},_getProjectionToSegment(b,E,N,P,M,j){let A,F,L;const V=(b-N)*(b-N)+(E-P)*(E-P);if(V==0)A=b,F=E,L=(M-N)*(M-N)+(j-P)*(j-P);else{const J=((M-b)*(N-b)+(j-E)*(P-E))/V;J<0?(A=b,F=E,L=(b-M)*(b-M)+(E-j)*(E-j)):J>1?(A=N,F=P,L=(N-M)*(N-M)+(P-j)*(P-j)):(A=b+J*(N-b),F=E+J*(P-E),L=(A-M)*(A-M)+(F-j)*(F-j))}return[A,F,L]},_getProjectionToLine(b,E,N){const P=e.Util.cloneObject(b);let M=Number.MAX_VALUE;return E.forEach(function(j,A){if(!N&&A===E.length-1)return;const F=E[(A+1)%E.length],L=e.Util._getProjectionToSegment(j.x,j.y,F.x,F.y,b.x,b.y),V=L[0],J=L[1],ne=L[2];ne<M&&(P.x=V,P.y=J,M=ne)}),P},_prepareArrayForTween(b,E,N){const P=[],M=[];if(b.length>E.length){const A=E;E=b,b=A}for(let A=0;A<b.length;A+=2)P.push({x:b[A],y:b[A+1]});for(let A=0;A<E.length;A+=2)M.push({x:E[A],y:E[A+1]});const j=[];return M.forEach(function(A){const F=e.Util._getProjectionToLine(A,P,N);j.push(F.x),j.push(F.y)}),j},_prepareToStringify(b){let E;b.visitedByCircularReferenceRemoval=!0;for(const N in b)if(b.hasOwnProperty(N)&&b[N]&&typeof b[N]=="object"){if(E=Object.getOwnPropertyDescriptor(b,N),b[N].visitedByCircularReferenceRemoval||e.Util._isElement(b[N]))if(E.configurable)delete b[N];else return null;else if(e.Util._prepareToStringify(b[N])===null)if(E.configurable)delete b[N];else return null}return delete b.visitedByCircularReferenceRemoval,b},_assign(b,E){for(const N in E)b[N]=E[N];return b},_getFirstPointerId(b){return b.touches?b.changedTouches[0].identifier:b.pointerId||999},releaseCanvas(...b){t.Konva.releaseCanvasOnDestroy&&b.forEach(E=>{E.width=0,E.height=0})},drawRoundedRectPath(b,E,N,P){let M=0,j=0,A=0,F=0;typeof P=="number"?M=j=A=F=Math.min(P,E/2,N/2):(M=Math.min(P[0]||0,E/2,N/2),j=Math.min(P[1]||0,E/2,N/2),F=Math.min(P[2]||0,E/2,N/2),A=Math.min(P[3]||0,E/2,N/2)),b.moveTo(M,0),b.lineTo(E-j,0),b.arc(E-j,j,j,Math.PI*3/2,0,!1),b.lineTo(E,N-F),b.arc(E-F,N-F,F,0,Math.PI/2,!1),b.lineTo(A,N),b.arc(A,N-A,A,Math.PI/2,Math.PI,!1),b.lineTo(0,M),b.arc(M,M,M,Math.PI,Math.PI*3/2,!1)}}})(HS)),HS}var Nx={},Fd={},Dd={},dj;function H$(){if(dj)return Dd;dj=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.HitContext=Dd.SceneContext=Dd.Context=void 0;const e=ma(),t=kn();function r(T){const k=[],b=T.length,E=e.Util;for(let N=0;N<b;N++){let P=T[N];E._isNumber(P)?P=Math.round(P*1e3)/1e3:E._isString(P)||(P=P+""),k.push(P)}return k}const n=",",s="(",a=")",i="([",o="])",l=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],h=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let x=class{constructor(k){this.canvas=k,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(k){k.fillEnabled()&&this._fill(k)}_fill(k){}strokeShape(k){k.hasStroke()&&this._stroke(k)}_stroke(k){}fillStrokeShape(k){k.attrs.fillAfterStrokeEnabled?(this.strokeShape(k),this.fillShape(k)):(this.fillShape(k),this.strokeShape(k))}getTrace(k,b){let E=this.traceArr,N=E.length,P="",M,j,A,F;for(M=0;M<N;M++)j=E[M],A=j.method,A?(F=j.args,P+=A,k?P+=u:e.Util._isArray(F[0])?P+=i+F.join(n)+o:(b&&(F=F.map(L=>typeof L=="number"?Math.floor(L):L)),P+=s+F.join(n)+a)):(P+=j.property,k||(P+=d+j.val)),P+=l;return P}clearTrace(){this.traceArr=[]}_trace(k){let b=this.traceArr,E;b.push(k),E=b.length,E>=g&&b.shift()}reset(){const k=this.getCanvas().getPixelRatio();this.setTransform(1*k,0,0,1*k,0,0)}getCanvas(){return this.canvas}clear(k){const b=this.getCanvas();k?this.clearRect(k.x||0,k.y||0,k.width||0,k.height||0):this.clearRect(0,0,b.getWidth()/b.pixelRatio,b.getHeight()/b.pixelRatio)}_applyLineCap(k){const b=k.attrs.lineCap;b&&this.setAttr("lineCap",b)}_applyOpacity(k){const b=k.getAbsoluteOpacity();b!==1&&this.setAttr("globalAlpha",b)}_applyLineJoin(k){const b=k.attrs.lineJoin;b&&this.setAttr("lineJoin",b)}setAttr(k,b){this._context[k]=b}arc(k,b,E,N,P,M){this._context.arc(k,b,E,N,P,M)}arcTo(k,b,E,N,P){this._context.arcTo(k,b,E,N,P)}beginPath(){this._context.beginPath()}bezierCurveTo(k,b,E,N,P,M){this._context.bezierCurveTo(k,b,E,N,P,M)}clearRect(k,b,E,N){this._context.clearRect(k,b,E,N)}clip(...k){this._context.clip.apply(this._context,k)}closePath(){this._context.closePath()}createImageData(k,b){const E=arguments;if(E.length===2)return this._context.createImageData(k,b);if(E.length===1)return this._context.createImageData(k)}createLinearGradient(k,b,E,N){return this._context.createLinearGradient(k,b,E,N)}createPattern(k,b){return this._context.createPattern(k,b)}createRadialGradient(k,b,E,N,P,M){return this._context.createRadialGradient(k,b,E,N,P,M)}drawImage(k,b,E,N,P,M,j,A,F){const L=arguments,V=this._context;L.length===3?V.drawImage(k,b,E):L.length===5?V.drawImage(k,b,E,N,P):L.length===9&&V.drawImage(k,b,E,N,P,M,j,A,F)}ellipse(k,b,E,N,P,M,j,A){this._context.ellipse(k,b,E,N,P,M,j,A)}isPointInPath(k,b,E,N){return E?this._context.isPointInPath(E,k,b,N):this._context.isPointInPath(k,b,N)}fill(...k){this._context.fill.apply(this._context,k)}fillRect(k,b,E,N){this._context.fillRect(k,b,E,N)}strokeRect(k,b,E,N){this._context.strokeRect(k,b,E,N)}fillText(k,b,E,N){N?this._context.fillText(k,b,E,N):this._context.fillText(k,b,E)}measureText(k){return this._context.measureText(k)}getImageData(k,b,E,N){return this._context.getImageData(k,b,E,N)}lineTo(k,b){this._context.lineTo(k,b)}moveTo(k,b){this._context.moveTo(k,b)}rect(k,b,E,N){this._context.rect(k,b,E,N)}roundRect(k,b,E,N,P){this._context.roundRect(k,b,E,N,P)}putImageData(k,b,E){this._context.putImageData(k,b,E)}quadraticCurveTo(k,b,E,N){this._context.quadraticCurveTo(k,b,E,N)}restore(){this._context.restore()}rotate(k){this._context.rotate(k)}save(){this._context.save()}scale(k,b){this._context.scale(k,b)}setLineDash(k){this._context.setLineDash?this._context.setLineDash(k):"mozDash"in this._context?this._context.mozDash=k:"webkitLineDash"in this._context&&(this._context.webkitLineDash=k)}getLineDash(){return this._context.getLineDash()}setTransform(k,b,E,N,P,M){this._context.setTransform(k,b,E,N,P,M)}stroke(k){k?this._context.stroke(k):this._context.stroke()}strokeText(k,b,E,N){this._context.strokeText(k,b,E,N)}transform(k,b,E,N,P,M){this._context.transform(k,b,E,N,P,M)}translate(k,b){this._context.translate(k,b)}_enableTrace(){let k=this,b=f.length,E=this.setAttr,N,P;const M=function(j){let A=k[j],F;k[j]=function(){return P=r(Array.prototype.slice.call(arguments,0)),F=A.apply(k,arguments),k._trace({method:j,args:P}),F}};for(N=0;N<b;N++)M(f[N]);k.setAttr=function(){E.apply(k,arguments);const j=arguments[0];let A=arguments[1];(j==="shadowOffsetX"||j==="shadowOffsetY"||j==="shadowBlur")&&(A=A/this.canvas.getPixelRatio()),k._trace({property:j,val:A})}}_applyGlobalCompositeOperation(k){const b=k.attrs.globalCompositeOperation;!b||b==="source-over"||this.setAttr("globalCompositeOperation",b)}};Dd.Context=x,h.forEach(function(T){Object.defineProperty(x.prototype,T,{get(){return this._context[T]},set(k){this._context[T]=k}})});class y extends x{constructor(k,{willReadFrequently:b=!1}={}){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:b})}_fillColor(k){const b=k.fill();this.setAttr("fillStyle",b),k._fillFunc(this)}_fillPattern(k){this.setAttr("fillStyle",k._getFillPattern()),k._fillFunc(this)}_fillLinearGradient(k){const b=k._getLinearGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fillRadialGradient(k){const b=k._getRadialGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fill(k){const b=k.fill(),E=k.getFillPriority();if(b&&E==="color"){this._fillColor(k);return}const N=k.getFillPatternImage();if(N&&E==="pattern"){this._fillPattern(k);return}const P=k.getFillLinearGradientColorStops();if(P&&E==="linear-gradient"){this._fillLinearGradient(k);return}const M=k.getFillRadialGradientColorStops();if(M&&E==="radial-gradient"){this._fillRadialGradient(k);return}b?this._fillColor(k):N?this._fillPattern(k):P?this._fillLinearGradient(k):M&&this._fillRadialGradient(k)}_strokeLinearGradient(k){const b=k.getStrokeLinearGradientStartPoint(),E=k.getStrokeLinearGradientEndPoint(),N=k.getStrokeLinearGradientColorStops(),P=this.createLinearGradient(b.x,b.y,E.x,E.y);if(N){for(let M=0;M<N.length;M+=2)P.addColorStop(N[M],N[M+1]);this.setAttr("strokeStyle",P)}}_stroke(k){const b=k.dash(),E=k.getStrokeScaleEnabled();if(k.hasStroke()){if(!E){this.save();const P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(k),b&&k.dashEnabled()&&(this.setLineDash(b),this.setAttr("lineDashOffset",k.dashOffset())),this.setAttr("lineWidth",k.strokeWidth()),k.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),k.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(k):this.setAttr("strokeStyle",k.stroke()),k._strokeFunc(this),E||this.restore()}}_applyShadow(k){var b,E,N;const P=(b=k.getShadowRGBA())!==null&&b!==void 0?b:"black",M=(E=k.getShadowBlur())!==null&&E!==void 0?E:5,j=(N=k.getShadowOffset())!==null&&N!==void 0?N:{x:0,y:0},A=k.getAbsoluteScale(),F=this.canvas.getPixelRatio(),L=A.x*F,V=A.y*F;this.setAttr("shadowColor",P),this.setAttr("shadowBlur",M*Math.min(Math.abs(L),Math.abs(V))),this.setAttr("shadowOffsetX",j.x*L),this.setAttr("shadowOffsetY",j.y*V)}}Dd.SceneContext=y;class v extends x{constructor(k){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:!0})}_fill(k){this.save(),this.setAttr("fillStyle",k.colorKey),k._fillFuncHit(this),this.restore()}strokeShape(k){k.hasHitStroke()&&this._stroke(k)}_stroke(k){if(k.hasHitStroke()){const b=k.getStrokeScaleEnabled();if(!b){this.save();const P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(k);const E=k.hitStrokeWidth(),N=E==="auto"?k.strokeWidth():E;this.setAttr("lineWidth",N),this.setAttr("strokeStyle",k.colorKey),k._strokeFuncHit(this),b||this.restore()}}}return Dd.HitContext=v,Dd}var fj;function F_(){if(fj)return Fd;fj=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.HitCanvas=Fd.SceneCanvas=Fd.Canvas=void 0;const e=ma(),t=H$(),r=kn();let n;function s(){if(n)return n;const l=e.Util.createCanvasElement(),u=l.getContext("2d");return n=(function(){const d=r.Konva._global.devicePixelRatio||1,f=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return d/f})(),e.Util.releaseCanvas(l),n}let a=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const f=(u||{}).pixelRatio||r.Konva.pixelRatio||s();this.pixelRatio=f,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const d=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,d){this.setWidth(u||0),this.setHeight(d||0)}toDataURL(u,d){try{return this._canvas.toDataURL(u,d)}catch{try{return this._canvas.toDataURL()}catch(h){return e.Util.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Fd.Canvas=a;class i extends a{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new t.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Fd.SceneCanvas=i;class o extends a{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(u.width,u.height)}}return Fd.HitCanvas=o,Fd}var GS={},hj;function E7(){return hj||(hj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=kn(),r=ma();e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((a,i)=>{const{node:o}=a,l=o.getStage();l.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const u=l._changedPointerPositions.find(d=>d.id===a.pointerId);if(u){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-a.startPointerPos.x),Math.abs(u.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),s.push(o)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:i}=a,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const u=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(a=>{a.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(GS)),GS}var VS={},el={},mj;function Fn(){if(mj)return el;mj=1,Object.defineProperty(el,"__esModule",{value:!0}),el.RGBComponent=n,el.alphaComponent=s,el.getNumberValidator=a,el.getNumberOrArrayOfNumbersValidator=i,el.getNumberOrAutoValidator=o,el.getStringValidator=l,el.getStringOrGradientValidator=u,el.getFunctionValidator=d,el.getNumberArrayValidator=f,el.getBooleanValidator=h,el.getComponentValidator=g;const e=kn(),t=ma();function r(x){return t.Util._isString(x)?'"'+x+'"':Object.prototype.toString.call(x)==="[object Number]"||t.Util._isBoolean(x)?x:Object.prototype.toString.call(x)}function n(x){return x>255?255:x<0?0:Math.round(x)}function s(x){return x>1?1:x<1e-4?1e-4:x}function a(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),x}}function i(x){if(e.Konva.isUnminified)return function(y,v){let T=t.Util._isNumber(y),k=t.Util._isArray(y)&&y.length==x;return!T&&!k&&t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+x+")"),y}}function o(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||x==="auto"||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),x}}function l(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isString(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),x}}function u(){if(e.Konva.isUnminified)return function(x,y){const v=t.Util._isString(x),T=Object.prototype.toString.call(x)==="[object CanvasGradient]"||x&&x.addColorStop;return v||T||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),x}}function d(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isFunction(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),x}}function f(){if(e.Konva.isUnminified)return function(x,y){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&x instanceof v||(t.Util._isArray(x)?x.forEach(function(T){t.Util._isNumber(T)||t.Util.warn('"'+y+'" attribute has non numeric element '+T+". Make sure that all elements are numbers.")}):t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),x}}function h(){if(e.Konva.isUnminified)return function(x,y){return x===!0||x===!1||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),x}}function g(x){if(e.Konva.isUnminified)return function(y,v){return y==null||t.Util.isObject(y)||t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+x),y}}return el}var gj;function jn(){return gj||(gj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=ma(),r=Fn(),n="get",s="set";e.Factory={addGetterSetter(a,i,o,l,u){e.Factory.addGetter(a,i,o),e.Factory.addSetter(a,i,l,u),e.Factory.addOverloadedGetterSetter(a,i)},addGetter(a,i,o){const l=n+t.Util._capitalize(i);a.prototype[l]=a.prototype[l]||function(){const u=this.attrs[i];return u===void 0?o:u}},addSetter(a,i,o,l){const u=s+t.Util._capitalize(i);a.prototype[u]||e.Factory.overWriteSetter(a,i,o,l)},overWriteSetter(a,i,o,l){const u=s+t.Util._capitalize(i);a.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,i)),this._setAttr(i,d),l&&l.call(this),this}},addComponentsGetterSetter(a,i,o,l,u){const d=o.length,f=t.Util._capitalize,h=n+f(i),g=s+f(i);a.prototype[h]=function(){const y={};for(let v=0;v<d;v++){const T=o[v];y[T]=this.getAttr(i+f(T))}return y};const x=(0,r.getComponentValidator)(o);a.prototype[g]=function(y){const v=this.attrs[i];l&&(y=l.call(this,y,i)),x&&x.call(this,y,i);for(const T in y)y.hasOwnProperty(T)&&this._setAttr(i+f(T),y[T]);return y||o.forEach(T=>{this._setAttr(i+f(T),void 0)}),this._fireChangeEvent(i,v,y),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(a,i)},addOverloadedGetterSetter(a,i){const o=t.Util._capitalize(i),l=s+o,u=n+o;a.prototype[i]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(a,i,o,l){t.Util.error("Adding deprecated "+i);const u=n+t.Util._capitalize(i),d=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[u]=function(){t.Util.error(d);const f=this.attrs[i];return f===void 0?o:f},e.Factory.addSetter(a,i,l,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(a,i)},backCompat(a,i){t.Util.each(i,function(o,l){const u=a.prototype[l],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function h(){u.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}a.prototype[o]=h,a.prototype[d]=h,a.prototype[f]=h})},afterSetFilter(){this._filterUpToDate=!1}}})(VS)),VS}var pj;function Na(){if(pj)return Nx;pj=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.Node=void 0;const e=F_(),t=E7(),r=jn(),n=kn(),s=ma(),a=Fn(),i="absoluteOpacity",o="allEventListeners",l="absoluteTransform",u="absoluteScale",d="canvas",f="Change",h="children",g="konva",x="listening",y="mouseenter",v="mouseleave",T="pointerenter",k="pointerleave",b="touchenter",E="touchleave",N="set",P="Shape",M=" ",j="stage",A="transform",F="Stage",L="visible",V=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(M);let J=1,ne=class Kk{constructor(B){this._id=J++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(B),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(B){(B===A||B===l)&&this._cache.get(B)?this._cache.get(B).dirty=!0:B?this._cache.delete(B):this._cache.clear()}_getCache(B,Y){let I=this._cache.get(B);return(I===void 0||(B===A||B===l)&&I.dirty===!0)&&(I=Y.call(this),this._cache.set(B,I)),I}_calculate(B,Y,I){if(!this._attachedDepsListeners.get(B)){const H=Y.map(W=>W+"Change.konva").join(M);this.on(H,()=>{this._clearCache(B)}),this._attachedDepsListeners.set(B,!0)}return this._getCache(B,I)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(B){this._clearCache(B),B===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:B,filter:Y,hit:I,buffer:H}=this._cache.get(d);s.Util.releaseCanvas(B,Y,I,H),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(B){const Y=B||{};let I={};(Y.x===void 0||Y.y===void 0||Y.width===void 0||Y.height===void 0)&&(I=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let H=Math.ceil(Y.width||I.width),W=Math.ceil(Y.height||I.height),R=Y.pixelRatio,z=Y.x===void 0?Math.floor(I.x):Y.x,G=Y.y===void 0?Math.floor(I.y):Y.y,Q=Y.offset||0,re=Y.drawBorder||!1,q=Y.hitCanvasPixelRatio||1;if(!H||!W){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const se=Math.abs(Math.round(I.x)-z)>.5?1:0,ce=Math.abs(Math.round(I.y)-G)>.5?1:0;H+=Q*2+se,W+=Q*2+ce,z-=Q,G-=Q;const pe=new e.SceneCanvas({pixelRatio:R,width:H,height:W}),ke=new e.SceneCanvas({pixelRatio:R,width:0,height:0,willReadFrequently:!0}),le=new e.HitCanvas({pixelRatio:q,width:H,height:W}),ye=pe.getContext(),je=le.getContext(),Ne=new e.SceneCanvas({width:pe.width/pe.pixelRatio+Math.abs(z),height:pe.height/pe.pixelRatio+Math.abs(G),pixelRatio:pe.pixelRatio}),We=Ne.getContext();return le.isCache=!0,pe.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,Y.imageSmoothingEnabled===!1&&(pe.getContext()._context.imageSmoothingEnabled=!1,ke.getContext()._context.imageSmoothingEnabled=!1),ye.save(),je.save(),We.save(),ye.translate(-z,-G),je.translate(-z,-G),We.translate(-z,-G),Ne.x=z,Ne.y=G,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this.drawScene(pe,this,Ne),this.drawHit(le,this),this._isUnderCache=!1,ye.restore(),je.restore(),re&&(ye.save(),ye.beginPath(),ye.rect(0,0,H,W),ye.closePath(),ye.setAttr("strokeStyle","red"),ye.setAttr("lineWidth",5),ye.stroke(),ye.restore()),this._cache.set(d,{scene:pe,filter:ke,hit:le,buffer:Ne,x:z,y:G}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(B){throw new Error('abstract "getClientRect" method call')}_transformedRect(B,Y){const I=[{x:B.x,y:B.y},{x:B.x+B.width,y:B.y},{x:B.x+B.width,y:B.y+B.height},{x:B.x,y:B.y+B.height}];let H=1/0,W=1/0,R=-1/0,z=-1/0;const G=this.getAbsoluteTransform(Y);return I.forEach(function(Q){const re=G.point(Q);H===void 0&&(H=R=re.x,W=z=re.y),H=Math.min(H,re.x),W=Math.min(W,re.y),R=Math.max(R,re.x),z=Math.max(z,re.y)}),{x:H,y:W,width:R-H,height:z-W}}_drawCachedSceneCanvas(B){B.save(),B._applyOpacity(this),B._applyGlobalCompositeOperation(this);const Y=this._getCanvasCache();B.translate(Y.x,Y.y);const I=this._getCachedSceneCanvas(),H=I.pixelRatio;B.drawImage(I._canvas,0,0,I.width/H,I.height/H),B.restore()}_drawCachedHitCanvas(B){const Y=this._getCanvasCache(),I=Y.hit;B.save(),B.translate(Y.x,Y.y),B.drawImage(I._canvas,0,0,I.width/I.pixelRatio,I.height/I.pixelRatio),B.restore()}_getCachedSceneCanvas(){let B=this.filters(),Y=this._getCanvasCache(),I=Y.scene,H=Y.filter,W=H.getContext(),R,z,G,Q;if(B){if(!this._filterUpToDate){const re=I.pixelRatio;H.setSize(I.width/I.pixelRatio,I.height/I.pixelRatio);try{for(R=B.length,W.clear(),W.drawImage(I._canvas,0,0,I.getWidth()/re,I.getHeight()/re),z=W.getImageData(0,0,H.getWidth(),H.getHeight()),G=0;G<R;G++){if(Q=B[G],typeof Q!="function"){s.Util.error("Filter should be type of function, but got "+typeof Q+" instead. Please check correct filters");continue}Q.call(this,z),W.putImageData(z,0,0)}}catch(q){s.Util.error("Unable to apply filter. "+q.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return H}return I}on(B,Y){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const I=B.split(M);for(let H=0;H<I.length;H++){const R=I[H].split("."),z=R[0],G=R[1]||"";this.eventListeners[z]||(this.eventListeners[z]=[]),this.eventListeners[z].push({name:G,handler:Y})}return this}off(B,Y){let I=(B||"").split(M),H=I.length,W,R,z,G,Q,re;if(this._cache&&this._cache.delete(o),!B)for(R in this.eventListeners)this._off(R);for(W=0;W<H;W++)if(z=I[W],G=z.split("."),Q=G[0],re=G[1],Q)this.eventListeners[Q]&&this._off(Q,re,Y);else for(R in this.eventListeners)this._off(R,re,Y);return this}dispatchEvent(B){const Y={target:this,type:B.type,evt:B};return this.fire(B.type,Y),this}addEventListener(B,Y){return this.on(B,function(I){Y.call(this,I.evt)}),this}removeEventListener(B){return this.off(B),this}_delegate(B,Y,I){const H=this;this.on(B,function(W){const R=W.target.findAncestors(Y,!0,H);for(let z=0;z<R.length;z++)W=s.Util.cloneObject(W),W.currentTarget=R[z],I.call(R[z],W)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(x)}_remove(){this._clearCaches();const B=this.getParent();B&&B.children&&(B.children.splice(this.index,1),B._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(B){const Y="get"+s.Util._capitalize(B);return s.Util._isFunction(this[Y])?this[Y]():this.attrs[B]}getAncestors(){let B=this.getParent(),Y=[];for(;B;)Y.push(B),B=B.getParent();return Y}getAttrs(){return this.attrs||{}}setAttrs(B){return this._batchTransformChanges(()=>{let Y,I;if(!B)return this;for(Y in B)Y!==h&&(I=N+s.Util._capitalize(Y),s.Util._isFunction(this[I])?this[I](B[Y]):this._setAttr(Y,B[Y]))}),this}isListening(){return this._getCache(x,this._isListening)}_isListening(B){if(!this.listening())return!1;const I=this.getParent();return I&&I!==B&&this!==B?I._isListening(B):!0}isVisible(){return this._getCache(L,this._isVisible)}_isVisible(B){if(!this.visible())return!1;const I=this.getParent();return I&&I!==B&&this!==B?I._isVisible(B):!0}shouldDrawHit(B,Y=!1){if(B)return this._isVisible(B)&&this._isListening(B);const I=this.getLayer();let H=!1;t.DD._dragElements.forEach(R=>{R.dragStatus==="dragging"&&(R.node.nodeType==="Stage"||R.node.getLayer()===I)&&(H=!0)});const W=!Y&&!n.Konva.hitOnDragEnabled&&(H||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!W}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let B=this.getDepth(),Y=this,I=0,H,W,R,z;function G(re){for(H=[],W=re.length,R=0;R<W;R++)z=re[R],I++,z.nodeType!==P&&(H=H.concat(z.getChildren().slice())),z._id===Y._id&&(R=W);H.length>0&&H[0].getDepth()<=B&&G(H)}const Q=this.getStage();return Y.nodeType!==F&&Q&&G(Q.getChildren()),I}getDepth(){let B=0,Y=this.parent;for(;Y;)B++,Y=Y.parent;return B}_batchTransformChanges(B){this._batchingTransformChange=!0,B(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(A),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(B){return this._batchTransformChanges(()=>{this.x(B.x),this.y(B.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const B=this.getStage();if(!B)return null;const Y=B.getPointerPosition();if(!Y)return null;const I=this.getAbsoluteTransform().copy();return I.invert(),I.point(Y)}getAbsolutePosition(B){let Y=!1,I=this.parent;for(;I;){if(I.isCached()){Y=!0;break}I=I.parent}Y&&!B&&(B=!0);const H=this.getAbsoluteTransform(B).getMatrix(),W=new s.Transform,R=this.offset();return W.m=H.slice(),W.translate(R.x,R.y),W.getTranslation()}setAbsolutePosition(B){const{x:Y,y:I,...H}=this._clearTransform();this.attrs.x=Y,this.attrs.y=I,this._clearCache(A);const W=this._getAbsoluteTransform().copy();return W.invert(),W.translate(B.x,B.y),B={x:this.attrs.x+W.getTranslation().x,y:this.attrs.y+W.getTranslation().y},this._setTransform(H),this.setPosition({x:B.x,y:B.y}),this._clearCache(A),this._clearSelfAndDescendantCache(l),this}_setTransform(B){let Y;for(Y in B)this.attrs[Y]=B[Y]}_clearTransform(){const B={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,B}move(B){let Y=B.x,I=B.y,H=this.x(),W=this.y();return Y!==void 0&&(H+=Y),I!==void 0&&(W+=I),this.setPosition({x:H,y:W}),this}_eachAncestorReverse(B,Y){let I=[],H=this.getParent(),W,R;if(!(Y&&Y._id===this._id)){for(I.unshift(this);H&&(!Y||H._id!==Y._id);)I.unshift(H),H=H.parent;for(W=I.length,R=0;R<W;R++)B(I[R])}}rotate(B){return this.rotation(this.rotation()+B),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const B=this.index,Y=this.parent.getChildren().length;return B<Y-1?(this.parent.children.splice(B,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const B=this.index,Y=this.parent.getChildren().length;return B<Y-1?(this.parent.children.splice(B,1),this.parent.children.splice(B+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.splice(B-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(B){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(B<0||B>=this.parent.children.length)&&s.Util.warn("Unexpected value "+B+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const Y=this.index;return this.parent.children.splice(Y,1),this.parent.children.splice(B,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let B=this.opacity();const Y=this.getParent();return Y&&!Y._isUnderCache&&(B*=Y.getAbsoluteOpacity()),B}moveTo(B){return this.getParent()!==B&&(this._remove(),B.add(this)),this}toObject(){let B=this.getAttrs(),Y,I,H,W,R;const z={attrs:{},className:this.getClassName()};for(Y in B)I=B[Y],R=s.Util.isObject(I)&&!s.Util._isPlainObject(I)&&!s.Util._isArray(I),!R&&(H=typeof this[Y]=="function"&&this[Y],delete B[Y],W=H?H.call(this):null,B[Y]=I,W!==I&&(z.attrs[Y]=I));return s.Util._prepareToStringify(z)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(B,Y,I){const H=[];Y&&this._isMatch(B)&&H.push(this);let W=this.parent;for(;W;){if(W===I)return H;W._isMatch(B)&&H.push(W),W=W.parent}return H}isAncestorOf(B){return!1}findAncestor(B,Y,I){return this.findAncestors(B,Y,I)[0]}_isMatch(B){if(!B)return!1;if(typeof B=="function")return B(this);let Y=B.replace(/ /g,"").split(","),I=Y.length,H,W;for(H=0;H<I;H++)if(W=Y[H],s.Util.isValidSelector(W)||(s.Util.warn('Selector "'+W+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),W.charAt(0)==="#"){if(this.id()===W.slice(1))return!0}else if(W.charAt(0)==="."){if(this.hasName(W.slice(1)))return!0}else if(this.className===W||this.nodeType===W)return!0;return!1}getLayer(){const B=this.getParent();return B?B.getLayer():null}getStage(){return this._getCache(j,this._getStage)}_getStage(){const B=this.getParent();return B?B.getStage():null}fire(B,Y={},I){return Y.target=Y.target||this,I?this._fireAndBubble(B,Y):this._fire(B,Y),this}getAbsoluteTransform(B){return B?this._getAbsoluteTransform(B):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(B){let Y;if(B)return Y=new s.Transform,this._eachAncestorReverse(function(I){const H=I.transformsEnabled();H==="all"?Y.multiply(I.getTransform()):H==="position"&&Y.translate(I.x()-I.offsetX(),I.y()-I.offsetY())},B),Y;{Y=this._cache.get(l)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(Y):Y.reset();const I=this.transformsEnabled();if(I==="all")Y.multiply(this.getTransform());else if(I==="position"){const H=this.attrs.x||0,W=this.attrs.y||0,R=this.attrs.offsetX||0,z=this.attrs.offsetY||0;Y.translate(H-R,W-z)}return Y.dirty=!1,Y}}getAbsoluteScale(B){let Y=this;for(;Y;)Y._isUnderCache&&(B=Y),Y=Y.getParent();const H=this.getAbsoluteTransform(B).decompose();return{x:H.scaleX,y:H.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(A,this._getTransform)}_getTransform(){var B,Y;const I=this._cache.get(A)||new s.Transform;I.reset();const H=this.x(),W=this.y(),R=n.Konva.getAngle(this.rotation()),z=(B=this.attrs.scaleX)!==null&&B!==void 0?B:1,G=(Y=this.attrs.scaleY)!==null&&Y!==void 0?Y:1,Q=this.attrs.skewX||0,re=this.attrs.skewY||0,q=this.attrs.offsetX||0,se=this.attrs.offsetY||0;return(H!==0||W!==0)&&I.translate(H,W),R!==0&&I.rotate(R),(Q!==0||re!==0)&&I.skew(Q,re),(z!==1||G!==1)&&I.scale(z,G),(q!==0||se!==0)&&I.translate(-1*q,-1*se),I.dirty=!1,I}clone(B){let Y=s.Util.cloneObject(this.attrs),I,H,W,R,z;for(I in B)Y[I]=B[I];const G=new this.constructor(Y);for(I in this.eventListeners)for(H=this.eventListeners[I],W=H.length,R=0;R<W;R++)z=H[R],z.name.indexOf(g)<0&&(G.eventListeners[I]||(G.eventListeners[I]=[]),G.eventListeners[I].push(z));return G}_toKonvaCanvas(B){B=B||{};const Y=this.getClientRect(),I=this.getStage(),H=B.x!==void 0?B.x:Math.floor(Y.x),W=B.y!==void 0?B.y:Math.floor(Y.y),R=B.pixelRatio||1,z=new e.SceneCanvas({width:B.width||Math.ceil(Y.width)||(I?I.width():0),height:B.height||Math.ceil(Y.height)||(I?I.height():0),pixelRatio:R}),G=z.getContext(),Q=new e.SceneCanvas({width:z.width/z.pixelRatio+Math.abs(H),height:z.height/z.pixelRatio+Math.abs(W),pixelRatio:z.pixelRatio});return B.imageSmoothingEnabled===!1&&(G._context.imageSmoothingEnabled=!1),G.save(),(H||W)&&G.translate(-1*H,-1*W),this.drawScene(z,void 0,Q),G.restore(),z}toCanvas(B){return this._toKonvaCanvas(B)._canvas}toDataURL(B){B=B||{};const Y=B.mimeType||null,I=B.quality||null,H=this._toKonvaCanvas(B).toDataURL(Y,I);return B.callback&&B.callback(H),H}toImage(B){return new Promise((Y,I)=>{try{const H=B?.callback;H&&delete B.callback,s.Util._urlToImage(this.toDataURL(B),function(W){Y(W),H?.(W)})}catch(H){I(H)}})}toBlob(B){return new Promise((Y,I)=>{try{const H=B?.callback;H&&delete B.callback,this.toCanvas(B).toBlob(W=>{Y(W),H?.(W)},B?.mimeType,B?.quality)}catch(H){I(H)}})}setSize(B){return this.width(B.width),this.height(B.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(B,Y,I){let H=this.eventListeners[B],W,R,z;for(W=0;W<H.length;W++)if(R=H[W].name,z=H[W].handler,(R!=="konva"||Y==="konva")&&(!Y||R===Y)&&(!I||I===z)){if(H.splice(W,1),H.length===0){delete this.eventListeners[B];break}W--}}_fireChangeEvent(B,Y,I){this._fire(B+f,{oldVal:Y,newVal:I})}addName(B){if(!this.hasName(B)){const Y=this.name(),I=Y?Y+" "+B:B;this.name(I)}return this}hasName(B){if(!B)return!1;const Y=this.name();return Y?(Y||"").split(/\s/g).indexOf(B)!==-1:!1}removeName(B){const Y=(this.name()||"").split(/\s/g),I=Y.indexOf(B);return I!==-1&&(Y.splice(I,1),this.name(Y.join(" "))),this}setAttr(B,Y){const I=this[N+s.Util._capitalize(B)];return s.Util._isFunction(I)?I.call(this,Y):this._setAttr(B,Y),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const B=this.getLayer()||this.getStage();B?.batchDraw()}}_setAttr(B,Y){const I=this.attrs[B];I===Y&&!s.Util.isObject(Y)||(Y==null?delete this.attrs[B]:this.attrs[B]=Y,this._shouldFireChangeEvents&&this._fireChangeEvent(B,I,Y),this._requestDraw())}_setComponentAttr(B,Y,I){let H;I!==void 0&&(H=this.attrs[B],H||(this.attrs[B]=this.getAttr(B)),this.attrs[B][Y]=I,this._fireChangeEvent(B,H,I))}_fireAndBubble(B,Y,I){Y&&this.nodeType===P&&(Y.target=this);const H=[y,v,T,k,b,E];if(!(H.indexOf(B)!==-1&&(I&&(this===I||this.isAncestorOf&&this.isAncestorOf(I))||this.nodeType==="Stage"&&!I))){this._fire(B,Y);const R=H.indexOf(B)!==-1&&I&&I.isAncestorOf&&I.isAncestorOf(this)&&!I.isAncestorOf(this.parent);(Y&&!Y.cancelBubble||!Y)&&this.parent&&this.parent.isListening()&&!R&&(I&&I.parent?this._fireAndBubble.call(this.parent,B,Y,I):this._fireAndBubble.call(this.parent,B,Y))}}_getProtoListeners(B){var Y,I,H;const W=(Y=this._cache.get(o))!==null&&Y!==void 0?Y:{};let R=W?.[B];if(R===void 0){R=[];let z=Object.getPrototypeOf(this);for(;z;){const G=(H=(I=z.eventListeners)===null||I===void 0?void 0:I[B])!==null&&H!==void 0?H:[];R.push(...G),z=Object.getPrototypeOf(z)}W[B]=R,this._cache.set(o,W)}return R}_fire(B,Y){Y=Y||{},Y.currentTarget=this,Y.type=B;const I=this._getProtoListeners(B);if(I)for(let W=0;W<I.length;W++)I[W].handler.call(this,Y);const H=this.eventListeners[B];if(H)for(let W=0;W<H.length;W++)H[W].handler.call(this,Y)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(B){const Y=B?B.pointerId:void 0,I=this.getStage(),H=this.getAbsolutePosition();if(!I)return;const W=I._getPointerById(Y)||I._changedPointerPositions[0]||H;t.DD._dragElements.set(this._id,{node:this,startPointerPos:W,offset:{x:W.x-H.x,y:W.y-H.y},dragStatus:"ready",pointerId:Y})}startDrag(B,Y=!0){t.DD._dragElements.has(this._id)||this._createDragElement(B);const I=t.DD._dragElements.get(this._id);I.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:B&&B.evt},Y)}_setDragPosition(B,Y){const I=this.getStage()._getPointerById(Y.pointerId);if(!I)return;let H={x:I.x-Y.offset.x,y:I.y-Y.offset.y};const W=this.dragBoundFunc();if(W!==void 0){const R=W.call(this,H,B);R?H=R:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==H.x||this._lastPos.y!==H.y)&&(this.setAbsolutePosition(H),this._requestDraw()),this._lastPos=H}stopDrag(B){const Y=t.DD._dragElements.get(this._id);Y&&(Y.dragStatus="stopped"),t.DD._endDragBefore(B),t.DD._endDragAfter(B)}setDraggable(B){this._setAttr("draggable",B),this._dragChange()}isDragging(){const B=t.DD._dragElements.get(this._id);return B?B.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(B){if(!(!(B.evt.button!==void 0)||n.Konva.dragButtons.indexOf(B.evt.button)>=0)||this.isDragging())return;let H=!1;t.DD._dragElements.forEach(W=>{this.isAncestorOf(W.node)&&(H=!0)}),H||this._createDragElement(B)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const Y=t.DD._dragElements.get(this._id),I=Y&&Y.dragStatus==="dragging",H=Y&&Y.dragStatus==="ready";I?this.stopDrag():H&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(B={x:0,y:0}){const Y=this.getStage();if(!Y)return!1;const I={x:-B.x,y:-B.y,width:Y.width()+2*B.x,height:Y.height()+2*B.y};return s.Util.haveIntersection(I,this.getClientRect())}static create(B,Y){return s.Util._isString(B)&&(B=JSON.parse(B)),this._createNode(B,Y)}static _createNode(B,Y){let I=Kk.prototype.getClassName.call(B),H=B.children,W,R,z;Y&&(B.attrs.container=Y),n.Konva[I]||(s.Util.warn('Can not find a node with class name "'+I+'". Fallback to "Shape".'),I="Shape");const G=n.Konva[I];if(W=new G(B.attrs),H)for(R=H.length,z=0;z<R;z++)W.add(Kk._createNode(H[z]));return W}};Nx.Node=ne,ne.prototype.nodeType="Node",ne.prototype._attrsAffectingSize=[],ne.prototype.eventListeners={},ne.prototype.on.call(ne.prototype,V,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(A),this._clearSelfAndDescendantCache(l)}),ne.prototype.on.call(ne.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(L)}),ne.prototype.on.call(ne.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x)}),ne.prototype.on.call(ne.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const ee=r.Factory.addGetterSetter;return ee(ne,"zIndex"),ee(ne,"absolutePosition"),ee(ne,"position"),ee(ne,"x",0,(0,a.getNumberValidator)()),ee(ne,"y",0,(0,a.getNumberValidator)()),ee(ne,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),ee(ne,"opacity",1,(0,a.getNumberValidator)()),ee(ne,"name","",(0,a.getStringValidator)()),ee(ne,"id","",(0,a.getStringValidator)()),ee(ne,"rotation",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ne,"scale",["x","y"]),ee(ne,"scaleX",1,(0,a.getNumberValidator)()),ee(ne,"scaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ne,"skew",["x","y"]),ee(ne,"skewX",0,(0,a.getNumberValidator)()),ee(ne,"skewY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ne,"offset",["x","y"]),ee(ne,"offsetX",0,(0,a.getNumberValidator)()),ee(ne,"offsetY",0,(0,a.getNumberValidator)()),ee(ne,"dragDistance",void 0,(0,a.getNumberValidator)()),ee(ne,"width",0,(0,a.getNumberValidator)()),ee(ne,"height",0,(0,a.getNumberValidator)()),ee(ne,"listening",!0,(0,a.getBooleanValidator)()),ee(ne,"preventDefault",!0,(0,a.getBooleanValidator)()),ee(ne,"filters",void 0,function(ie){return this._filterUpToDate=!1,ie}),ee(ne,"visible",!0,(0,a.getBooleanValidator)()),ee(ne,"transformsEnabled","all",(0,a.getStringValidator)()),ee(ne,"size"),ee(ne,"dragBoundFunc"),ee(ne,"draggable",!1,(0,a.getBooleanValidator)()),r.Factory.backCompat(ne,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Nx}var Ax={},xj;function D_(){if(xj)return Ax;xj=1,Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.Container=void 0;const e=jn(),t=Na(),r=Fn();let n=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){const i=this.children||[];return a?i.filter(a):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const i=a[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const i=this._generalFind(a,!0);return i.length>0?i[0]:void 0}_generalFind(a,i){const o=[];return this._descendants(l=>{const u=l._isMatch(a);return u&&o.push(l),!!(u&&i)}),o}_descendants(a){let i=!1;const o=this.getChildren();for(const l of o){if(i=a(l),i)return!0;if(l.hasChildren()&&(i=l._descendants(a),i))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(i=>{a.children.push(i.toObject())}),a}isAncestorOf(a){let i=a.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(a){const i=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(a){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&i.push(o)}),i}_clearSelfAndDescendantCache(a){var i;super._clearSelfAndDescendantCache(a),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(a,i,o){const l=this.getLayer(),u=a||l&&l.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),h=f&&f.scene,g=u&&u.isCache;if(!this.isVisible()&&!g)return this;if(h){d.save();const x=this.getAbsoluteTransform(i).getMatrix();d.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,i,o);return this}drawHit(a,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),l=a||o&&o.hitCanvas,u=l&&l.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const h=this.getAbsoluteTransform(i).getMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",l,i);return this}_drawChildren(a,i,o,l){var u;const d=i&&i.getContext(),f=this.clipWidth(),h=this.clipHeight(),g=this.clipFunc(),x=typeof f=="number"&&typeof h=="number"||g,y=o===this;if(x){d.save();const T=this.getAbsoluteTransform(o);let k=T.getMatrix();d.transform(k[0],k[1],k[2],k[3],k[4],k[5]),d.beginPath();let b;if(g)b=g.call(this,d,this);else{const E=this.clipX(),N=this.clipY();d.rect(E||0,N||0,f,h)}d.clip.apply(d,b),k=T.copy().invert().getMatrix(),d.transform(k[0],k[1],k[2],k[3],k[4],k[5])}const v=!y&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(T){T[a](i,o,l)}),v&&d.restore(),x&&d.restore()}getClientRect(a={}){var i;const o=a.skipTransform,l=a.relativeTo;let u,d,f,h,g={x:1/0,y:1/0,width:0,height:0};const x=this;(i=this.children)===null||i===void 0||i.forEach(function(T){if(!T.visible())return;const k=T.getClientRect({relativeTo:x,skipShadow:a.skipShadow,skipStroke:a.skipStroke});k.width===0&&k.height===0||(u===void 0?(u=k.x,d=k.y,f=k.x+k.width,h=k.y+k.height):(u=Math.min(u,k.x),d=Math.min(d,k.y),f=Math.max(f,k.x+k.width),h=Math.max(h,k.y+k.height)))});const y=this.find("Shape");let v=!1;for(let T=0;T<y.length;T++)if(y[T]._isVisible(this)){v=!0;break}return v&&u!==void 0?g={x:u,y:d,width:f-u,height:h-d}:g={x:0,y:0,width:0,height:0},o?g:this._transformedRect(g,l)}};return Ax.Container=n,e.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipFunc"),Ax}var qS={},ff={},yj;function G$(){if(yj)return ff;yj=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.getCapturedShape=n,ff.createEvent=s,ff.hasPointerCapture=a,ff.setPointerCapture=i,ff.releaseCapture=o;const e=kn(),t=new Map,r=e.Konva._global.PointerEvent!==void 0;function n(l){return t.get(l)}function s(l){return{evt:l,pointerId:l.pointerId}}function a(l,u){return t.get(l)===u}function i(l,u){o(l),u.getStage()&&(t.set(l,u),r&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function o(l,u){const d=t.get(l);if(!d)return;const f=d.getStage();f&&f.content,t.delete(l),r&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return ff}var vj;function ane(){return vj||(vj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=ma(),r=jn(),n=D_(),s=kn(),a=F_(),i=E7(),o=kn(),l=G$(),u="Stage",d="string",f="px",h="mouseout",g="mouseleave",x="mouseover",y="mouseenter",v="mousemove",T="mousedown",k="mouseup",b="pointermove",E="pointerdown",N="pointerup",P="pointercancel",M="lostpointercapture",j="pointerout",A="pointerleave",F="pointerover",L="pointerenter",V="contextmenu",J="touchstart",ne="touchend",ee="touchmove",ie="touchcancel",B="wheel",Y=5,I=[[y,"_pointerenter"],[T,"_pointerdown"],[v,"_pointermove"],[k,"_pointerup"],[g,"_pointerleave"],[J,"_pointerdown"],[ee,"_pointermove"],[ne,"_pointerup"],[ie,"_pointercancel"],[x,"_pointerover"],[B,"_wheel"],[V,"_contextmenu"],[E,"_pointerdown"],[b,"_pointermove"],[N,"_pointerup"],[P,"_pointercancel"],[A,"_pointerleave"],[M,"_lostpointercapture"]],H={mouse:{[j]:h,[A]:g,[F]:x,[L]:y,[b]:v,[E]:T,[N]:k,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[j]:"touchout",[A]:"touchleave",[F]:"touchover",[L]:"touchenter",[b]:ee,[E]:J,[N]:ne,[P]:ie,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[j]:j,[A]:A,[F]:F,[L]:L,[b]:b,[E]:E,[N]:N,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},W=re=>re.indexOf("pointer")>=0?"pointer":re.indexOf("touch")>=0?"touch":"mouse",R=re=>{const q=W(re);if(q==="pointer")return s.Konva.pointerEventsEnabled&&H.pointer;if(q==="touch")return H.touch;if(q==="mouse")return H.mouse};function z(re={}){return(re.clipFunc||re.clipWidth||re.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),re}const G="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class Q extends n.Container{constructor(q){super(z(q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{z(this.attrs)}),this._checkVisibility()}_validateAdd(q){const se=q.getType()==="Layer",ce=q.getType()==="FastLayer";se||ce||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const q=this.visible()?"":"none";this.content.style.display=q}setContainer(q){if(typeof q===d){let se;if(q.charAt(0)==="."){const ce=q.slice(1);q=document.getElementsByClassName(ce)[0]}else q.charAt(0)!=="#"?se=q:se=q.slice(1),q=document.getElementById(se);if(!q)throw"Can not find container in document with id "+se}return this._setAttr("container",q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const q=this.children,se=q.length;for(let ce=0;ce<se;ce++)q[ce].clear();return this}clone(q){return q||(q={}),q.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,q)}destroy(){super.destroy();const q=this.content;q&&t.Util._isInDocument(q)&&this.container().removeChild(q);const se=e.stages.indexOf(this);return se>-1&&e.stages.splice(se,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const q=this._pointerPositions[0]||this._changedPointerPositions[0];return q?{x:q.x,y:q.y}:(t.Util.warn(G),null)}_getPointerById(q){return this._pointerPositions.find(se=>se.id===q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(q){q=q||{},q.x=q.x||0,q.y=q.y||0,q.width=q.width||this.width(),q.height=q.height||this.height();const se=new a.SceneCanvas({width:q.width,height:q.height,pixelRatio:q.pixelRatio||1}),ce=se.getContext()._context,pe=this.children;return(q.x||q.y)&&ce.translate(-1*q.x,-1*q.y),pe.forEach(function(ke){if(!ke.isVisible())return;const le=ke._toKonvaCanvas(q);ce.drawImage(le._canvas,q.x,q.y,le.getWidth()/le.getPixelRatio(),le.getHeight()/le.getPixelRatio())}),se}getIntersection(q){if(!q)return null;const se=this.children,ce=se.length,pe=ce-1;for(let ke=pe;ke>=0;ke--){const le=se[ke].getIntersection(q);if(le)return le}return null}_resizeDOM(){const q=this.width(),se=this.height();this.content&&(this.content.style.width=q+f,this.content.style.height=se+f),this.bufferCanvas.setSize(q,se),this.bufferHitCanvas.setSize(q,se),this.children.forEach(ce=>{ce.setSize({width:q,height:se}),ce.draw()})}add(q,...se){if(arguments.length>1){for(let pe=0;pe<arguments.length;pe++)this.add(arguments[pe]);return this}super.add(q);const ce=this.children.length;return ce>Y&&t.Util.warn("The stage has "+ce+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),q.setSize({width:this.width(),height:this.height()}),q.draw(),s.Konva.isBrowser&&this.content.appendChild(q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(q){return l.hasPointerCapture(q,this)}setPointerCapture(q){l.setPointerCapture(q,this)}releaseCapture(q){l.releaseCapture(q,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&I.forEach(([q,se])=>{this.content.addEventListener(q,ce=>{this[se](ce)},{passive:!1})})}_pointerenter(q){this.setPointersPositions(q);const se=R(q.type);se&&this._fire(se.pointerenter,{evt:q,target:this,currentTarget:this})}_pointerover(q){this.setPointersPositions(q);const se=R(q.type);se&&this._fire(se.pointerover,{evt:q,target:this,currentTarget:this})}_getTargetShape(q){let se=this[q+"targetShape"];return se&&!se.getStage()&&(se=null),se}_pointerleave(q){const se=R(q.type),ce=W(q.type);if(!se)return;this.setPointersPositions(q);const pe=this._getTargetShape(ce),ke=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;pe&&ke?(pe._fireAndBubble(se.pointerout,{evt:q}),pe._fireAndBubble(se.pointerleave,{evt:q}),this._fire(se.pointerleave,{evt:q,target:this,currentTarget:this}),this[ce+"targetShape"]=null):ke&&(this._fire(se.pointerleave,{evt:q,target:this,currentTarget:this}),this._fire(se.pointerout,{evt:q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(q){const se=R(q.type),ce=W(q.type);if(!se)return;this.setPointersPositions(q);let pe=!1;this._changedPointerPositions.forEach(ke=>{const le=this.getIntersection(ke);if(i.DD.justDragged=!1,s.Konva["_"+ce+"ListenClick"]=!0,!le||!le.isListening()){this[ce+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&le.setPointerCapture(ke.id),this[ce+"ClickStartShape"]=le,le._fireAndBubble(se.pointerdown,{evt:q,pointerId:ke.id}),pe=!0;const ye=q.type.indexOf("touch")>=0;le.preventDefault()&&q.cancelable&&ye&&q.preventDefault()}),pe||this._fire(se.pointerdown,{evt:q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(q){const se=R(q.type),ce=W(q.type);if(!se||(s.Konva.isDragging()&&i.DD.node.preventDefault()&&q.cancelable&&q.preventDefault(),this.setPointersPositions(q),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const ke={};let le=!1;const ye=this._getTargetShape(ce);this._changedPointerPositions.forEach(je=>{const Ne=l.getCapturedShape(je.id)||this.getIntersection(je),We=je.id,$e={evt:q,pointerId:We},Nt=ye!==Ne;if(Nt&&ye&&(ye._fireAndBubble(se.pointerout,{...$e},Ne),ye._fireAndBubble(se.pointerleave,{...$e},Ne)),Ne){if(ke[Ne._id])return;ke[Ne._id]=!0}Ne&&Ne.isListening()?(le=!0,Nt&&(Ne._fireAndBubble(se.pointerover,{...$e},ye),Ne._fireAndBubble(se.pointerenter,{...$e},ye),this[ce+"targetShape"]=Ne),Ne._fireAndBubble(se.pointermove,{...$e})):ye&&(this._fire(se.pointerover,{evt:q,target:this,currentTarget:this,pointerId:We}),this[ce+"targetShape"]=null)}),le||this._fire(se.pointermove,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(q){const se=R(q.type),ce=W(q.type);if(!se)return;this.setPointersPositions(q);const pe=this[ce+"ClickStartShape"],ke=this[ce+"ClickEndShape"],le={};let ye=!1;this._changedPointerPositions.forEach(je=>{const Ne=l.getCapturedShape(je.id)||this.getIntersection(je);if(Ne){if(Ne.releaseCapture(je.id),le[Ne._id])return;le[Ne._id]=!0}const We=je.id,$e={evt:q,pointerId:We};let Nt=!1;s.Konva["_"+ce+"InDblClickWindow"]?(Nt=!0,clearTimeout(this[ce+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+ce+"InDblClickWindow"]=!0,clearTimeout(this[ce+"DblTimeout"])),this[ce+"DblTimeout"]=setTimeout(function(){s.Konva["_"+ce+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Ne&&Ne.isListening()?(ye=!0,this[ce+"ClickEndShape"]=Ne,Ne._fireAndBubble(se.pointerup,{...$e}),s.Konva["_"+ce+"ListenClick"]&&pe&&pe===Ne&&(Ne._fireAndBubble(se.pointerclick,{...$e}),Nt&&ke&&ke===Ne&&Ne._fireAndBubble(se.pointerdblclick,{...$e}))):(this[ce+"ClickEndShape"]=null,s.Konva["_"+ce+"ListenClick"]&&this._fire(se.pointerclick,{evt:q,target:this,currentTarget:this,pointerId:We}),Nt&&this._fire(se.pointerdblclick,{evt:q,target:this,currentTarget:this,pointerId:We}))}),ye||this._fire(se.pointerup,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+ce+"ListenClick"]=!1,q.cancelable&&ce!=="touch"&&ce!=="pointer"&&q.preventDefault()}_contextmenu(q){this.setPointersPositions(q);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(V,{evt:q}):this._fire(V,{evt:q,target:this,currentTarget:this})}_wheel(q){this.setPointersPositions(q);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(B,{evt:q}):this._fire(B,{evt:q,target:this,currentTarget:this})}_pointercancel(q){this.setPointersPositions(q);const se=l.getCapturedShape(q.pointerId)||this.getIntersection(this.getPointerPosition());se&&se._fireAndBubble(N,l.createEvent(q)),l.releaseCapture(q.pointerId)}_lostpointercapture(q){l.releaseCapture(q.pointerId)}setPointersPositions(q){const se=this._getContentPosition();let ce=null,pe=null;q=q||window.event,q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(q.touches,ke=>{this._pointerPositions.push({id:ke.identifier,x:(ke.clientX-se.left)/se.scaleX,y:(ke.clientY-se.top)/se.scaleY})}),Array.prototype.forEach.call(q.changedTouches||q.touches,ke=>{this._changedPointerPositions.push({id:ke.identifier,x:(ke.clientX-se.left)/se.scaleX,y:(ke.clientY-se.top)/se.scaleY})})):(ce=(q.clientX-se.left)/se.scaleX,pe=(q.clientY-se.top)/se.scaleY,this.pointerPos={x:ce,y:pe},this._pointerPositions=[{x:ce,y:pe,id:t.Util._getFirstPointerId(q)}],this._changedPointerPositions=[{x:ce,y:pe,id:t.Util._getFirstPointerId(q)}])}_setPointerPosition(q){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const q=this.content.getBoundingClientRect();return{top:q.top,left:q.left,scaleX:q.width/this.content.clientWidth||1,scaleY:q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const q=this.container();if(!q)throw"Stage has no container. A container is required.";q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),q.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(q){q.batchDraw()}),this}}e.Stage=Q,Q.prototype.nodeType=u,(0,o._registerNode)(Q),r.Factory.addGetterSetter(Q,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(re=>{re.batchDraw()})})})(qS)),qS}var jx={},KS={},wj;function Ti(){return wj||(wj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=kn(),r=ma(),n=jn(),s=Na(),a=Fn(),i=kn(),o=G$(),l="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",h="radialGradient";let g;function x(){return g||(g=r.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function y(A){const F=this.attrs.fillRule;F?A.fill(F):A.fill()}function v(A){A.stroke()}function T(A){const F=this.attrs.fillRule;F?A.fill(F):A.fill()}function k(A){A.stroke()}function b(){this._clearCache(l)}function E(){this._clearCache(u)}function N(){this._clearCache(d)}function P(){this._clearCache(f)}function M(){this._clearCache(h)}class j extends s.Node{constructor(F){super(F);let L;for(;L=r.Util.getRandomColor(),!(L&&!(L in e.shapes)););this.colorKey=L,e.shapes[L]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=x().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const V=new r.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(t.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const J=V.getMatrix(),ne=typeof DOMMatrix>"u"?{a:J[0],b:J[1],c:J[2],d:J[3],e:J[4],f:J[5]}:new DOMMatrix(J);L.setTransform(ne)}return L}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const F=this.fillLinearGradientColorStops();if(F){const L=x(),V=this.fillLinearGradientStartPoint(),J=this.fillLinearGradientEndPoint(),ne=L.createLinearGradient(V.x,V.y,J.x,J.y);for(let ee=0;ee<F.length;ee+=2)ne.addColorStop(F[ee],F[ee+1]);return ne}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const F=this.fillRadialGradientColorStops();if(F){const L=x(),V=this.fillRadialGradientStartPoint(),J=this.fillRadialGradientEndPoint(),ne=L.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),J.x,J.y,this.fillRadialGradientEndRadius());for(let ee=0;ee<F.length;ee+=2)ne.addColorStop(F[ee],F[ee+1]);return ne}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const F=r.Util.colorToRGBA(this.shadowColor());if(F)return"rgba("+F.r+","+F.g+","+F.b+","+F.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const F=this.hitStrokeWidth();return F==="auto"?this.hasStroke():this.strokeEnabled()&&!!F}intersects(F){const L=this.getStage();if(!L)return!1;const V=L.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(F.x),Math.round(F.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(F){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const J=F||this.hasFill(),ne=this.hasStroke(),ee=this.getAbsoluteOpacity()!==1;if(J&&ne&&ee)return!0;const ie=this.hasShadow(),B=this.shadowForStrokeEnabled();return!!(J&&ne&&ie&&B)}setStrokeHitEnabled(F){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),F?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const F=this.size();return{x:this._centroid?-F.width/2:0,y:this._centroid?-F.height/2:0,width:F.width,height:F.height}}getClientRect(F={}){let L=!1,V=this.getParent();for(;V;){if(V.isCached()){L=!0;break}V=V.getParent()}const J=F.skipTransform,ne=F.relativeTo||L&&this.getStage()||void 0,ee=this.getSelfRect(),B=!F.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Y=ee.width+B,I=ee.height+B,H=!F.skipShadow&&this.hasShadow(),W=H?this.shadowOffsetX():0,R=H?this.shadowOffsetY():0,z=Y+Math.abs(W),G=I+Math.abs(R),Q=H&&this.shadowBlur()||0,re=z+Q*2,q=G+Q*2,se={width:re,height:q,x:-(B/2+Q)+Math.min(W,0)+ee.x,y:-(B/2+Q)+Math.min(R,0)+ee.y};return J?se:this._transformedRect(se,ne)}drawScene(F,L,V){const J=this.getLayer(),ne=F||J.getCanvas(),ee=ne.getContext(),ie=this._getCanvasCache(),B=this.getSceneFunc(),Y=this.hasShadow();let I;const H=L===this;if(!this.isVisible()&&!H)return this;if(ie){ee.save();const W=this.getAbsoluteTransform(L).getMatrix();return ee.transform(W[0],W[1],W[2],W[3],W[4],W[5]),this._drawCachedSceneCanvas(ee),ee.restore(),this}if(!B)return this;if(ee.save(),this._useBufferCanvas()){I=this.getStage();const W=V||I.bufferCanvas,R=W.getContext();R.clear(),R.save(),R._applyLineJoin(this);const z=this.getAbsoluteTransform(L).getMatrix();R.transform(z[0],z[1],z[2],z[3],z[4],z[5]),B.call(this,R,this),R.restore();const G=W.pixelRatio;Y&&ee._applyShadow(this),ee._applyOpacity(this),ee._applyGlobalCompositeOperation(this),ee.drawImage(W._canvas,W.x||0,W.y||0,W.width/G,W.height/G)}else{if(ee._applyLineJoin(this),!H){const W=this.getAbsoluteTransform(L).getMatrix();ee.transform(W[0],W[1],W[2],W[3],W[4],W[5]),ee._applyOpacity(this),ee._applyGlobalCompositeOperation(this)}Y&&ee._applyShadow(this),B.call(this,ee,this)}return ee.restore(),this}drawHit(F,L,V=!1){if(!this.shouldDrawHit(L,V))return this;const J=this.getLayer(),ne=F||J.hitCanvas,ee=ne&&ne.getContext(),ie=this.hitFunc()||this.sceneFunc(),B=this._getCanvasCache(),Y=B&&B.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Y){ee.save();const H=this.getAbsoluteTransform(L).getMatrix();return ee.transform(H[0],H[1],H[2],H[3],H[4],H[5]),this._drawCachedHitCanvas(ee),ee.restore(),this}if(!ie)return this;if(ee.save(),ee._applyLineJoin(this),!(this===L)){const H=this.getAbsoluteTransform(L).getMatrix();ee.transform(H[0],H[1],H[2],H[3],H[4],H[5])}return ie.call(this,ee,this),ee.restore(),this}drawHitFromCache(F=0){const L=this._getCanvasCache(),V=this._getCachedSceneCanvas(),J=L.hit,ne=J.getContext(),ee=J.getWidth(),ie=J.getHeight();ne.clear(),ne.drawImage(V._canvas,0,0,ee,ie);try{const B=ne.getImageData(0,0,ee,ie),Y=B.data,I=Y.length,H=r.Util._hexToRgb(this.colorKey);for(let W=0;W<I;W+=4)Y[W+3]>F?(Y[W]=H.r,Y[W+1]=H.g,Y[W+2]=H.b,Y[W+3]=255):Y[W+3]=0;ne.putImageData(B,0,0)}catch(B){r.Util.error("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}hasPointerCapture(F){return o.hasPointerCapture(F,this)}setPointerCapture(F){o.setPointerCapture(F,this)}releaseCapture(F){o.releaseCapture(F,this)}}e.Shape=j,j.prototype._fillFunc=y,j.prototype._strokeFunc=v,j.prototype._fillFuncHit=T,j.prototype._strokeFuncHit=k,j.prototype._centroid=!1,j.prototype.nodeType="Shape",(0,i._registerNode)(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",E),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",N),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",M),n.Factory.addGetterSetter(j,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(j,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(j,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"lineJoin"),n.Factory.addGetterSetter(j,"lineCap"),n.Factory.addGetterSetter(j,"sceneFunc"),n.Factory.addGetterSetter(j,"hitFunc"),n.Factory.addGetterSetter(j,"dash"),n.Factory.addGetterSetter(j,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(j,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(j,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternImage"),n.Factory.addGetterSetter(j,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(j,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(j,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(j,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(j,"fillEnabled",!0),n.Factory.addGetterSetter(j,"strokeEnabled",!0),n.Factory.addGetterSetter(j,"shadowEnabled",!0),n.Factory.addGetterSetter(j,"dashEnabled",!0),n.Factory.addGetterSetter(j,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(j,"fillPriority","color"),n.Factory.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(j,"fillPatternRotation",0),n.Factory.addGetterSetter(j,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(KS)),KS}var bj;function V$(){if(bj)return jx;bj=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.Layer=void 0;const e=ma(),t=D_(),r=Na(),n=jn(),s=F_(),a=Fn(),i=Ti(),o=kn(),l="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h=f.length;class g extends t.Container{constructor(y){super(y),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),y<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[y+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),y&&y.parentNode&&e.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:v}){return this.canvas.setSize(y,v),this.hitCanvas.setSize(y,v),this._setSmoothEnabled(),this}_validateAdd(y){const v=y.getType();v!=="Group"&&v!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let v=1,T=!1;for(;;){for(let k=0;k<h;k++){const b=f[k],E=this._getIntersection({x:y.x+b.x*v,y:y.y+b.y*v}),N=E.shape;if(N)return N;if(T=!!E.antialiased,!E.antialiased)break}if(T)v+=1;else return null}}_getIntersection(y){const v=this.hitCanvas.pixelRatio,T=this.hitCanvas.context.getImageData(Math.round(y.x*v),Math.round(y.y*v),1,1).data,k=T[3];if(k===255){const b=e.Util._rgbToHex(T[0],T[1],T[2]),E=i.shapes[l+b];return E?{shape:E}:{antialiased:!0}}else if(k>0)return{antialiased:!0};return{}}drawScene(y,v,T){const k=this.getLayer(),b=y||k&&k.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&b.getContext().clear(),t.Container.prototype.drawScene.call(this,b,v,T),this._fire(d,{node:this}),this}drawHit(y,v){const T=this.getLayer(),k=y||T&&T.hitCanvas;return T&&T.clearBeforeDraw()&&T.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,k,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return jx.Layer=g,g.prototype.nodeType="Layer",(0,o._registerNode)(g),n.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(g,"clearBeforeDraw",!0),n.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),jx}var Px={},_j;function ine(){if(_j)return Px;_j=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.FastLayer=void 0;const e=ma(),t=V$(),r=kn();class n extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}return Px.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n),Px}var Mx={},Sj;function N7(){if(Sj)return Mx;Sj=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.Group=void 0;const e=ma(),t=D_(),r=kn();class n extends t.Container{_validateAdd(a){const i=a.getType();i!=="Group"&&i!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return Mx.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n),Mx}var Fx={},kj;function A7(){if(kj)return Fx;kj=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.Animation=void 0;const e=kn(),t=ma(),r=(function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class sp{constructor(a,i){this.id=sp.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=a,this.setLayers(i)}setLayers(a){let i=[];return a&&(i=Array.isArray(a)?a:[a]),this.layers=i,this}getLayers(){return this.layers}addLayer(a){const i=this.layers,o=i.length;for(let l=0;l<o;l++)if(i[l]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const i=sp.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),sp._addAnimation(this),this}stop(){return sp._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const i=a.id,o=this.animations,l=o.length;for(let u=0;u<l;u++)if(o[u].id===i){this.animations.splice(u,1);break}}static _runFrames(){const a={},i=this.animations;for(let o=0;o<i.length;o++){const l=i[o],u=l.layers,d=l.func;l._updateFrameObject(r());const f=u.length;let h;if(d?h=d.call(l,l.frame)!==!1:h=!0,!!h)for(let g=0;g<f;g++){const x=u[g];x._id!==void 0&&(a[x._id]=x)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=sp;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Fx.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,Fx}var YS={},Tj;function one(){return Tj||(Tj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=ma(),r=A7(),n=Na(),s=kn(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=1,o=2,l=3,u=["fill","stroke","shadowColor"];let d=0;class f{constructor(x,y,v,T,k,b,E){this.prop=x,this.propFunc=y,this.begin=T,this._pos=T,this.duration=b,this._change=0,this.prevPos=0,this.yoyo=E,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=k-this.begin,this.pause()}fire(x){const y=this[x];y&&y()}setTime(x){x>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():x<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=x,this.update())}getTime(){return this._time}setPosition(x){this.prevPos=this._pos,this.propFunc(x),this._pos=x}getPosition(x){return x===void 0&&(x=this._time),this.func(x,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(x){this.pause(),this._time=x,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const x=this.getTimer()-this._startTime;this.state===o?this.setTime(x):this.state===l&&this.setTime(this.duration-x)}pause(){this.state=i,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(x){const y=this,v=x.node,T=v._id,k=x.easing||e.Easings.Linear,b=!!x.yoyo;let E,N;typeof x.duration>"u"?E=.3:x.duration===0?E=.001:E=x.duration,this.node=v,this._id=d++;const P=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);P||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){y.tween.onEnterFrame()},P),this.tween=new f(N,function(M){y._tweenFunc(M)},k,0,1,E*1e3,b),this._addListeners(),h.attrs[T]||(h.attrs[T]={}),h.attrs[T][this._id]||(h.attrs[T][this._id]={}),h.tweens[T]||(h.tweens[T]={});for(N in x)a[N]===void 0&&this._addAttr(N,x[N]);this.reset(),this.onFinish=x.onFinish,this.onReset=x.onReset,this.onUpdate=x.onUpdate}_addAttr(x,y){const v=this.node,T=v._id;let k,b,E,N,P;const M=h.tweens[T][x];M&&delete h.attrs[T][M][x];let j=v.getAttr(x);if(t.Util._isArray(y))if(k=[],b=Math.max(y.length,j.length),x==="points"&&y.length!==j.length&&(y.length>j.length?(N=j,j=t.Util._prepareArrayForTween(j,y,v.closed())):(E=y,y=t.Util._prepareArrayForTween(y,j,v.closed()))),x.indexOf("fill")===0)for(let A=0;A<b;A++)if(A%2===0)k.push(y[A]-j[A]);else{const F=t.Util.colorToRGBA(j[A]);P=t.Util.colorToRGBA(y[A]),j[A]=F,k.push({r:P.r-F.r,g:P.g-F.g,b:P.b-F.b,a:P.a-F.a})}else for(let A=0;A<b;A++)k.push(y[A]-j[A]);else u.indexOf(x)!==-1?(j=t.Util.colorToRGBA(j),P=t.Util.colorToRGBA(y),k={r:P.r-j.r,g:P.g-j.g,b:P.b-j.b,a:P.a-j.a}):k=y-j;h.attrs[T][this._id][x]={start:j,diff:k,end:y,trueEnd:E,trueStart:N},h.tweens[T][x]=this._id}_tweenFunc(x){const y=this.node,v=h.attrs[y._id][this._id];let T,k,b,E,N,P,M,j;for(T in v){if(k=v[T],b=k.start,E=k.diff,j=k.end,t.Util._isArray(b))if(N=[],M=Math.max(b.length,j.length),T.indexOf("fill")===0)for(P=0;P<M;P++)P%2===0?N.push((b[P]||0)+E[P]*x):N.push("rgba("+Math.round(b[P].r+E[P].r*x)+","+Math.round(b[P].g+E[P].g*x)+","+Math.round(b[P].b+E[P].b*x)+","+(b[P].a+E[P].a*x)+")");else for(P=0;P<M;P++)N.push((b[P]||0)+E[P]*x);else u.indexOf(T)!==-1?N="rgba("+Math.round(b.r+E.r*x)+","+Math.round(b.g+E.g*x)+","+Math.round(b.b+E.b*x)+","+(b.a+E.a*x)+")":N=b+E*x;y.setAttr(T,N)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const x=this.node,y=h.attrs[x._id][this._id];y.points&&y.points.trueEnd&&x.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const x=this.node,y=h.attrs[x._id][this._id];y.points&&y.points.trueStart&&x.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(x){return this.tween.seek(x*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const x=this.node._id,y=this._id,v=h.tweens[x];this.pause(),this.anim&&this.anim.stop();for(const T in v)delete h.tweens[x][T];delete h.attrs[x][y],h.tweens[x]&&(Object.keys(h.tweens[x]).length===0&&delete h.tweens[x],Object.keys(h.attrs[x]).length===0&&delete h.attrs[x])}}e.Tween=h,h.attrs={},h.tweens={},n.Node.prototype.to=function(g){const x=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),x&&x()},new h(g).play()},e.Easings={BackEaseIn(g,x,y,v){return y*(g/=v)*g*((1.70158+1)*g-1.70158)+x},BackEaseOut(g,x,y,v){return y*((g=g/v-1)*g*((1.70158+1)*g+1.70158)+1)+x},BackEaseInOut(g,x,y,v){let T=1.70158;return(g/=v/2)<1?y/2*(g*g*(((T*=1.525)+1)*g-T))+x:y/2*((g-=2)*g*(((T*=1.525)+1)*g+T)+2)+x},ElasticEaseIn(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v)===1?x+y:(k||(k=v*.3),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),-(T*Math.pow(2,10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k))+x)},ElasticEaseOut(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v)===1?x+y:(k||(k=v*.3),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),T*Math.pow(2,-10*g)*Math.sin((g*v-b)*(2*Math.PI)/k)+y+x)},ElasticEaseInOut(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v/2)===2?x+y:(k||(k=v*(.3*1.5)),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),g<1?-.5*(T*Math.pow(2,10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k))+x:T*Math.pow(2,-10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k)*.5+y+x)},BounceEaseOut(g,x,y,v){return(g/=v)<1/2.75?y*(7.5625*g*g)+x:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+x:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+x:y*(7.5625*(g-=2.625/2.75)*g+.984375)+x},BounceEaseIn(g,x,y,v){return y-e.Easings.BounceEaseOut(v-g,0,y,v)+x},BounceEaseInOut(g,x,y,v){return g<v/2?e.Easings.BounceEaseIn(g*2,0,y,v)*.5+x:e.Easings.BounceEaseOut(g*2-v,0,y,v)*.5+y*.5+x},EaseIn(g,x,y,v){return y*(g/=v)*g+x},EaseOut(g,x,y,v){return-y*(g/=v)*(g-2)+x},EaseInOut(g,x,y,v){return(g/=v/2)<1?y/2*g*g+x:-y/2*(--g*(g-2)-1)+x},StrongEaseIn(g,x,y,v){return y*(g/=v)*g*g*g*g+x},StrongEaseOut(g,x,y,v){return y*((g=g/v-1)*g*g*g*g+1)+x},StrongEaseInOut(g,x,y,v){return(g/=v/2)<1?y/2*g*g*g*g*g+x:y/2*((g-=2)*g*g*g*g+2)+x},Linear(g,x,y,v){return y*g/v+x}}})(YS)),YS}var Cj;function Yk(){return Cj||(Cj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=kn(),r=ma(),n=Na(),s=D_(),a=ane(),i=V$(),o=ine(),l=N7(),u=E7(),d=Ti(),f=A7(),h=one(),g=H$(),x=F_();e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:h.Tween,Easings:h.Easings,Context:g.Context,Canvas:x.Canvas}),e.default=e.Konva})(US)),US}var Dx={},Ej;function lne(){if(Ej)return Dx;Ej=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.Arc=void 0;const e=jn(),t=Ti(),r=kn(),n=Fn(),s=kn();class a extends t.Shape{_sceneFunc(o){const l=r.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,u),o.arc(0,0,this.innerRadius(),l,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),u=this.clockwise(),d=r.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),h=1,g=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),x=Math.sin(Math.min(d,Math.PI/2)),y=f*(f>0?o:l),v=h*l,T=g*(g>0?o:l),k=x*(x>0?l:o);return{x:y,y:u?-1*k:T,width:v-y,height:k-T}}}return Dx.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,n.getBooleanValidator)()),Dx}var Ox={},Rx={},Nj;function q$(){if(Nj)return Rx;Nj=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.Line=void 0;const e=jn(),t=kn(),r=Ti(),n=Fn();function s(o,l,u,d,f,h,g){const x=Math.sqrt(Math.pow(u-o,2)+Math.pow(d-l,2)),y=Math.sqrt(Math.pow(f-u,2)+Math.pow(h-d,2)),v=g*x/(x+y),T=g*y/(x+y),k=u-v*(f-o),b=d-v*(h-l),E=u+T*(f-o),N=d+T*(h-l);return[k,b,E,N]}function a(o,l){const u=o.length,d=[];for(let f=2;f<u-2;f+=2){const h=s(o[f-2],o[f-1],o[f],o[f+1],o[f+2],o[f+3],l);isNaN(h[0])||(d.push(h[0]),d.push(h[1]),d.push(o[f]),d.push(o[f+1]),d.push(h[2]),d.push(h[3]))}return d}class i extends r.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const u=this.points(),d=u.length,f=this.tension(),h=this.closed(),g=this.bezier();if(!d)return;let x=0;if(l.beginPath(),l.moveTo(u[0],u[1]),f!==0&&d>4){const y=this.getTensionPoints(),v=y.length;for(x=h?0:4,h||l.quadraticCurveTo(y[0],y[1],y[2],y[3]);x<v-2;)l.bezierCurveTo(y[x++],y[x++],y[x++],y[x++],y[x++],y[x++]);h||l.quadraticCurveTo(y[v-2],y[v-1],u[d-2],u[d-1])}else if(g)for(x=2;x<d;)l.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]);else for(x=2;x<d;x+=2)l.lineTo(u[x],u[x+1]);h?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),u=l.length,d=this.tension(),f=s(l[u-2],l[u-1],l[0],l[1],l[2],l[3],d),h=s(l[u-4],l[u-3],l[u-2],l[u-1],l[0],l[1],d),g=a(l,d);return[f[2],f[3]].concat(g).concat([h[0],h[1],l[u-2],l[u-1],h[2],h[3],f[0],f[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let u=l[0],d=l[0],f=l[1],h=l[1],g,x;for(let y=0;y<l.length/2;y++)g=l[y*2],x=l[y*2+1],u=Math.min(u,g),d=Math.max(d,g),f=Math.min(f,x),h=Math.max(h,x);return{x:u,y:f,width:d-u,height:h-f}}}return Rx.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,n.getNumberArrayValidator)()),Rx}var Ix={},XS={},Aj;function cne(){return Aj||(Aj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(i,o,l)=>{let u,d;const h=l/2;u=0;for(let g=0;g<20;g++)d=h*e.tValues[20][g]+h,u+=e.cValues[20][g]*n(i,o,d);return h*u};e.getCubicArcLength=t;const r=(i,o,l)=>{l===void 0&&(l=1);const u=i[0]-2*i[1]+i[2],d=o[0]-2*o[1]+o[2],f=2*i[1]-2*i[0],h=2*o[1]-2*o[0],g=4*(u*u+d*d),x=4*(u*f+d*h),y=f*f+h*h;if(g===0)return l*Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(o[2]-o[0],2));const v=x/(2*g),T=y/g,k=l+v,b=T-v*v,E=k*k+b>0?Math.sqrt(k*k+b):0,N=v*v+b>0?Math.sqrt(v*v+b):0,P=v+Math.sqrt(v*v+b)!==0?b*Math.log(Math.abs((k+E)/(v+N))):0;return Math.sqrt(g)/2*(k*E-v*N+P)};e.getQuadraticArcLength=r;function n(i,o,l){const u=s(1,l,i),d=s(1,l,o),f=u*u+d*d;return Math.sqrt(f)}const s=(i,o,l)=>{const u=l.length-1;let d,f;if(u===0)return 0;if(i===0){f=0;for(let h=0;h<=u;h++)f+=e.binomialCoefficients[u][h]*Math.pow(1-o,u-h)*Math.pow(o,h)*l[h];return f}else{d=new Array(u);for(let h=0;h<u;h++)d[h]=u*(l[h+1]-l[h]);return s(i-1,o,d)}},a=(i,o,l)=>{let u=1,d=i/o,f=(i-l(d))/o,h=0;for(;u>.001;){const g=l(d+f),x=Math.abs(i-g)/o;if(x<u)u=x,d+=f;else{const y=l(d-f),v=Math.abs(i-y)/o;v<u?(u=v,d-=f):f/=2}if(h++,h>500)break}return d};e.t2length=a})(XS)),XS}var jj;function j7(){if(jj)return Ix;jj=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.Path=void 0;const e=jn(),t=kn(),r=Ti(),n=cne();class s extends r.Shape{constructor(i){super(i),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(i){const o=this.dataArray;i.beginPath();let l=!1;for(let u=0;u<o.length;u++){const d=o[u].command,f=o[u].points;switch(d){case"L":i.lineTo(f[0],f[1]);break;case"M":i.moveTo(f[0],f[1]);break;case"C":i.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":i.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const h=f[0],g=f[1],x=f[2],y=f[3],v=f[4],T=f[5],k=f[6],b=f[7],E=x>y?x:y,N=x>y?1:x/y,P=x>y?y/x:1;i.translate(h,g),i.rotate(k),i.scale(N,P),i.arc(0,0,E,v,v+T,1-b),i.scale(1/N,1/P),i.rotate(-k),i.translate(-h,-g);break;case"z":l=!0,i.closePath();break}}!l&&!this.hasFill()?i.strokeShape(this):i.fillStrokeShape(this)}getSelfRect(){let i=[];this.dataArray.forEach(function(g){if(g.command==="A"){const x=g.points[4],y=g.points[5],v=g.points[4]+y;let T=Math.PI/180;if(Math.abs(x-v)<T&&(T=Math.abs(x-v)),y<0)for(let k=x-T;k>v;k-=T){const b=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],k,0);i.push(b.x,b.y)}else for(let k=x+T;k<v;k+=T){const b=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],k,0);i.push(b.x,b.y)}}else if(g.command==="C")for(let x=0;x<=1;x+=.01){const y=s.getPointOnCubicBezier(x,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);i.push(y.x,y.y)}else i=i.concat(g.points)});let o=i[0],l=i[0],u=i[1],d=i[1],f,h;for(let g=0;g<i.length/2;g++)f=i[g*2],h=i[g*2+1],isNaN(f)||(o=Math.min(o,f),l=Math.max(l,f)),isNaN(h)||(u=Math.min(u,h),d=Math.max(d,h));return{x:o,y:u,width:l-o,height:d-u}}getLength(){return this.pathLength}getPointAtLength(i){return s.getPointAtLengthOfDataArray(i,this.dataArray)}static getLineLength(i,o,l,u){return Math.sqrt((l-i)*(l-i)+(u-o)*(u-o))}static getPathLength(i){let o=0;for(let l=0;l<i.length;++l)o+=i[l].pathLength;return o}static getPointAtLengthOfDataArray(i,o){let l,u=0,d=o.length;if(!d)return null;for(;u<d&&i>o[u].pathLength;)i-=o[u].pathLength,++u;if(u===d)return l=o[u-1].points.slice(-2),{x:l[0],y:l[1]};if(i<.01)return o[u].command==="M"?(l=o[u].points.slice(0,2),{x:l[0],y:l[1]}):{x:o[u].start.x,y:o[u].start.y};const f=o[u],h=f.points;switch(f.command){case"L":return s.getPointOnLine(i,f.start.x,f.start.y,h[0],h[1]);case"C":return s.getPointOnCubicBezier((0,n.t2length)(i,s.getPathLength(o),E=>(0,n.getCubicArcLength)([f.start.x,h[0],h[2],h[4]],[f.start.y,h[1],h[3],h[5]],E)),f.start.x,f.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return s.getPointOnQuadraticBezier((0,n.t2length)(i,s.getPathLength(o),E=>(0,n.getQuadraticArcLength)([f.start.x,h[0],h[2]],[f.start.y,h[1],h[3]],E)),f.start.x,f.start.y,h[0],h[1],h[2],h[3]);case"A":const g=h[0],x=h[1],y=h[2],v=h[3],T=h[5],k=h[6];let b=h[4];return b+=T*i/f.pathLength,s.getPointOnEllipticalArc(g,x,y,v,b,k)}return null}static getPointOnLine(i,o,l,u,d,f,h){f=f??o,h=h??l;const g=this.getLineLength(o,l,u,d);if(g<1e-10)return{x:o,y:l};if(u===o)return{x:f,y:h+(d>l?i:-i)};const x=(d-l)/(u-o),y=Math.sqrt(i*i/(1+x*x))*(u<o?-1:1),v=x*y;if(Math.abs(h-l-x*(f-o))<1e-10)return{x:f+y,y:h+v};const T=((f-o)*(u-o)+(h-l)*(d-l))/(g*g),k=o+T*(u-o),b=l+T*(d-l),E=this.getLineLength(f,h,k,b),N=Math.sqrt(i*i-E*E),P=Math.sqrt(N*N/(1+x*x))*(u<o?-1:1),M=x*P;return{x:k+P,y:b+M}}static getPointOnCubicBezier(i,o,l,u,d,f,h,g,x){function y(N){return N*N*N}function v(N){return 3*N*N*(1-N)}function T(N){return 3*N*(1-N)*(1-N)}function k(N){return(1-N)*(1-N)*(1-N)}const b=g*y(i)+f*v(i)+u*T(i)+o*k(i),E=x*y(i)+h*v(i)+d*T(i)+l*k(i);return{x:b,y:E}}static getPointOnQuadraticBezier(i,o,l,u,d,f,h){function g(k){return k*k}function x(k){return 2*k*(1-k)}function y(k){return(1-k)*(1-k)}const v=f*g(i)+u*x(i)+o*y(i),T=h*g(i)+d*x(i)+l*y(i);return{x:v,y:T}}static getPointOnEllipticalArc(i,o,l,u,d,f){const h=Math.cos(f),g=Math.sin(f),x={x:l*Math.cos(d),y:u*Math.sin(d)};return{x:i+(x.x*h-x.y*g),y:o+(x.x*g+x.y*h)}}static parsePathData(i){if(!i)return[];let o=i;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let v=0;v<l.length;v++)o=o.replace(new RegExp(l[v],"g"),"|"+l[v]);const u=o.split("|"),d=[],f=[];let h=0,g=0;const x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let v=1;v<u.length;v++){let T=u[v],k=T.charAt(0);for(T=T.slice(1),f.length=0;y=x.exec(T);)f.push(y[0]);const b=[];for(let E=0,N=f.length;E<N;E++){if(f[E]==="00"){b.push(0,0);continue}const P=parseFloat(f[E]);isNaN(P)?b.push(0):b.push(P)}for(;b.length>0&&!isNaN(b[0]);){let E="",N=[];const P=h,M=g;let j,A,F,L,V,J,ne,ee,ie,B;switch(k){case"l":h+=b.shift(),g+=b.shift(),E="L",N.push(h,g);break;case"L":h=b.shift(),g=b.shift(),N.push(h,g);break;case"m":const Y=b.shift(),I=b.shift();if(h+=Y,g+=I,E="M",d.length>2&&d[d.length-1].command==="z"){for(let H=d.length-2;H>=0;H--)if(d[H].command==="M"){h=d[H].points[0]+Y,g=d[H].points[1]+I;break}}N.push(h,g),k="l";break;case"M":h=b.shift(),g=b.shift(),E="M",N.push(h,g),k="L";break;case"h":h+=b.shift(),E="L",N.push(h,g);break;case"H":h=b.shift(),E="L",N.push(h,g);break;case"v":g+=b.shift(),E="L",N.push(h,g);break;case"V":g=b.shift(),E="L",N.push(h,g);break;case"C":N.push(b.shift(),b.shift(),b.shift(),b.shift()),h=b.shift(),g=b.shift(),N.push(h,g);break;case"c":N.push(h+b.shift(),g+b.shift(),h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),E="C",N.push(h,g);break;case"S":A=h,F=g,j=d[d.length-1],j.command==="C"&&(A=h+(h-j.points[2]),F=g+(g-j.points[3])),N.push(A,F,b.shift(),b.shift()),h=b.shift(),g=b.shift(),E="C",N.push(h,g);break;case"s":A=h,F=g,j=d[d.length-1],j.command==="C"&&(A=h+(h-j.points[2]),F=g+(g-j.points[3])),N.push(A,F,h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),E="C",N.push(h,g);break;case"Q":N.push(b.shift(),b.shift()),h=b.shift(),g=b.shift(),N.push(h,g);break;case"q":N.push(h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),E="Q",N.push(h,g);break;case"T":A=h,F=g,j=d[d.length-1],j.command==="Q"&&(A=h+(h-j.points[0]),F=g+(g-j.points[1])),h=b.shift(),g=b.shift(),E="Q",N.push(A,F,h,g);break;case"t":A=h,F=g,j=d[d.length-1],j.command==="Q"&&(A=h+(h-j.points[0]),F=g+(g-j.points[1])),h+=b.shift(),g+=b.shift(),E="Q",N.push(A,F,h,g);break;case"A":L=b.shift(),V=b.shift(),J=b.shift(),ne=b.shift(),ee=b.shift(),ie=h,B=g,h=b.shift(),g=b.shift(),E="A",N=this.convertEndpointToCenterParameterization(ie,B,h,g,ne,ee,L,V,J);break;case"a":L=b.shift(),V=b.shift(),J=b.shift(),ne=b.shift(),ee=b.shift(),ie=h,B=g,h+=b.shift(),g+=b.shift(),E="A",N=this.convertEndpointToCenterParameterization(ie,B,h,g,ne,ee,L,V,J);break}d.push({command:E||k,points:N,start:{x:P,y:M},pathLength:this.calcLength(P,M,E||k,N)})}(k==="z"||k==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(i,o,l,u){let d,f,h,g;const x=s;switch(l){case"L":return x.getLineLength(i,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([i,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([i,u[0],u[2]],[o,u[1],u[3]],1);case"A":d=0;const y=u[4],v=u[5],T=u[4]+v;let k=Math.PI/180;if(Math.abs(y-T)<k&&(k=Math.abs(y-T)),f=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),v<0)for(g=y-k;g>T;g-=k)h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),f=h;else for(g=y+k;g<T;g+=k)h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),f=h;return h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],T,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),d}return 0}static convertEndpointToCenterParameterization(i,o,l,u,d,f,h,g,x){const y=x*(Math.PI/180),v=Math.cos(y)*(i-l)/2+Math.sin(y)*(o-u)/2,T=-1*Math.sin(y)*(i-l)/2+Math.cos(y)*(o-u)/2,k=v*v/(h*h)+T*T/(g*g);k>1&&(h*=Math.sqrt(k),g*=Math.sqrt(k));let b=Math.sqrt((h*h*(g*g)-h*h*(T*T)-g*g*(v*v))/(h*h*(T*T)+g*g*(v*v)));d===f&&(b*=-1),isNaN(b)&&(b=0);const E=b*h*T/g,N=b*-g*v/h,P=(i+l)/2+Math.cos(y)*E-Math.sin(y)*N,M=(o+u)/2+Math.sin(y)*E+Math.cos(y)*N,j=function(ee){return Math.sqrt(ee[0]*ee[0]+ee[1]*ee[1])},A=function(ee,ie){return(ee[0]*ie[0]+ee[1]*ie[1])/(j(ee)*j(ie))},F=function(ee,ie){return(ee[0]*ie[1]<ee[1]*ie[0]?-1:1)*Math.acos(A(ee,ie))},L=F([1,0],[(v-E)/h,(T-N)/g]),V=[(v-E)/h,(T-N)/g],J=[(-1*v-E)/h,(-1*T-N)/g];let ne=F(V,J);return A(V,J)<=-1&&(ne=Math.PI),A(V,J)>=1&&(ne=0),f===0&&ne>0&&(ne=ne-2*Math.PI),f===1&&ne<0&&(ne=ne+2*Math.PI),[P,M,h,g,L,ne,y,f]}}return Ix.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),Ix}var Pj;function une(){if(Pj)return Ox;Pj=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.Arrow=void 0;const e=jn(),t=q$(),r=Fn(),n=kn(),s=j7();class a extends t.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,u=this.points();let d=u;const f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());const h=this.pointerLength(),g=u.length;let x,y;if(f){const k=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[g-2],u[g-1]],b=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",k),E=s.Path.getPointOnQuadraticBezier(Math.min(1,1-h/b),k[0],k[1],k[2],k[3],k[4],k[5]);x=u[g-2]-E.x,y=u[g-1]-E.y}else x=u[g-2]-u[g-4],y=u[g-1]-u[g-3];const v=(Math.atan2(y,x)+l)%l,T=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[g-2],u[g-1]),o.rotate(v),o.moveTo(0,0),o.lineTo(-h,T/2),o.lineTo(-h,-T/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),f?(x=(d[0]+d[2])/2-u[0],y=(d[1]+d[3])/2-u[1]):(x=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-x)+l)%l),o.moveTo(0,0),o.lineTo(-h,T/2),o.lineTo(-h,-T/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}}return Ox.Arrow=a,a.prototype.className="Arrow",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),Ox}var Lx={},Mj;function dne(){if(Mj)return Lx;Mj=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.Circle=void 0;const e=jn(),t=Ti(),r=Fn(),n=kn();class s extends t.Shape{_sceneFunc(i){i.beginPath(),i.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius()!==i/2&&this.radius(i/2)}setHeight(i){this.radius()!==i/2&&this.radius(i/2)}}return Lx.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),Lx}var Bx={},Fj;function fne(){if(Fj)return Bx;Fj=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.Ellipse=void 0;const e=jn(),t=Ti(),r=Fn(),n=kn();class s extends t.Shape{_sceneFunc(i){const o=this.radiusX(),l=this.radiusY();i.beginPath(),i.save(),o!==l&&i.scale(1,l/o),i.arc(0,0,o,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(i){this.radiusX(i/2)}setHeight(i){this.radiusY(i/2)}}return Bx.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,r.getNumberValidator)()),Bx}var $x={},Dj;function hne(){if(Dj)return $x;Dj=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.Image=void 0;const e=ma(),t=jn(),r=Ti(),n=kn(),s=Fn();class a extends r.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let h;if(f){const g=this.attrs.cropWidth,x=this.attrs.cropHeight;g&&x?h=[f,this.cropX(),this.cropY(),g,x,0,0,l,u]:h=[f,0,0,l,u]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?e.Util.drawRoundedRectPath(o,l,u,d):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)),f&&(d&&o.clip(),o.drawImage.apply(o,h))}_hitFunc(o){const l=this.width(),u=this.height(),d=this.cornerRadius();o.beginPath(),d?e.Util.drawRoundedRectPath(o,l,u,d):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,u=null){const d=e.Util.createImageElement();d.onload=function(){const f=new a({image:d});l(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=o}}return $x.Image=a,a.prototype.className="Image",(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),$x}var Lh={},Oj;function mne(){if(Oj)return Lh;Oj=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.Tag=Lh.Label=void 0;const e=jn(),t=Ti(),r=N7(),n=Fn(),s=kn(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="Change.konva",o="none",l="up",u="right",d="down",f="left",h=a.length;class g extends r.Group{constructor(v){super(v),this.on("add.konva",function(T){this._addListeners(T.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let T=this,k;const b=function(){T._sync()};for(k=0;k<h;k++)v.on(a[k]+i,b)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),T=this.getTag(),k,b,E,N,P,M,j;if(v&&T){switch(k=v.width(),b=v.height(),E=T.pointerDirection(),N=T.pointerWidth(),j=T.pointerHeight(),P=0,M=0,E){case l:P=k/2,M=-1*j;break;case u:P=k+N,M=b/2;break;case d:P=k/2,M=b+j;break;case f:P=-1*N,M=b/2;break}T.setAttrs({x:-1*P,y:-1*M,width:k,height:b}),v.setAttrs({x:-1*P,y:-1*M})}}}Lh.Label=g,g.prototype.className="Label",(0,s._registerNode)(g);class x extends t.Shape{_sceneFunc(v){const T=this.width(),k=this.height(),b=this.pointerDirection(),E=this.pointerWidth(),N=this.pointerHeight(),P=this.cornerRadius();let M=0,j=0,A=0,F=0;typeof P=="number"?M=j=A=F=Math.min(P,T/2,k/2):(M=Math.min(P[0]||0,T/2,k/2),j=Math.min(P[1]||0,T/2,k/2),F=Math.min(P[2]||0,T/2,k/2),A=Math.min(P[3]||0,T/2,k/2)),v.beginPath(),v.moveTo(M,0),b===l&&(v.lineTo((T-E)/2,0),v.lineTo(T/2,-1*N),v.lineTo((T+E)/2,0)),v.lineTo(T-j,0),v.arc(T-j,j,j,Math.PI*3/2,0,!1),b===u&&(v.lineTo(T,(k-N)/2),v.lineTo(T+E,k/2),v.lineTo(T,(k+N)/2)),v.lineTo(T,k-F),v.arc(T-F,k-F,F,0,Math.PI/2,!1),b===d&&(v.lineTo((T+E)/2,k),v.lineTo(T/2,k+N),v.lineTo((T-E)/2,k)),v.lineTo(A,k),v.arc(A,k-A,A,Math.PI/2,Math.PI,!1),b===f&&(v.lineTo(0,(k+N)/2),v.lineTo(-1*E,k/2),v.lineTo(0,(k-N)/2)),v.lineTo(0,M),v.arc(M,M,M,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,T=0,k=this.pointerWidth(),b=this.pointerHeight(),E=this.pointerDirection(),N=this.width(),P=this.height();return E===l?(T-=b,P+=b):E===d?P+=b:E===f?(v-=k*1.5,N+=k):E===u&&(N+=k*1.5),{x:v,y:T,width:N,height:P}}}return Lh.Tag=x,x.prototype.className="Tag",(0,s._registerNode)(x),e.Factory.addGetterSetter(x,"pointerDirection",o),e.Factory.addGetterSetter(x,"pointerWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"pointerHeight",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Lh}var zx={},Rj;function K$(){if(Rj)return zx;Rj=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.Rect=void 0;const e=jn(),t=Ti(),r=kn(),n=ma(),s=Fn();class a extends t.Shape{_sceneFunc(o){const l=this.cornerRadius(),u=this.width(),d=this.height();o.beginPath(),l?n.Util.drawRoundedRectPath(o,u,d,l):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}}return zx.Rect=a,a.prototype.className="Rect",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),zx}var Ux={},Ij;function gne(){if(Ij)return Ux;Ij=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.RegularPolygon=void 0;const e=jn(),t=Ti(),r=Fn(),n=kn();class s extends t.Shape{_sceneFunc(i){const o=this._getPoints();i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)i.lineTo(o[l].x,o[l].y);i.closePath(),i.fillStrokeShape(this)}_getPoints(){const i=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let u=0;u<i;u++)l.push({x:o*Math.sin(u*2*Math.PI/i),y:-1*o*Math.cos(u*2*Math.PI/i)});return l}getSelfRect(){const i=this._getPoints();let o=i[0].x,l=i[0].y,u=i[0].x,d=i[0].y;return i.forEach(f=>{o=Math.min(o,f.x),l=Math.max(l,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:o,y:u,width:l-o,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius(i/2)}setHeight(i){this.radius(i/2)}}return Ux.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,r.getNumberValidator)()),Ux}var Wx={},Lj;function pne(){if(Lj)return Wx;Lj=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.Ring=void 0;const e=jn(),t=Ti(),r=Fn(),n=kn(),s=Math.PI*2;class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,s,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),s,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}return Wx.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),Wx}var Hx={},Bj;function xne(){if(Bj)return Hx;Bj=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.Sprite=void 0;const e=jn(),t=Ti(),r=A7(),n=Fn(),s=kn();class a extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new r.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[l],h=this.frameOffsets(),g=f[d+0],x=f[d+1],y=f[d+2],v=f[d+3],T=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,v),o.closePath(),o.fillStrokeShape(this)),T)if(h){const k=h[l],b=u*2;o.drawImage(T,g,x,y,v,k[b+0],k[b+1],y,v)}else o.drawImage(T,g,x,y,v,0,0,y,v)}_hitFunc(o){const l=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[l],h=this.frameOffsets(),g=f[d+2],x=f[d+3];if(o.beginPath(),h){const y=h[l],v=u*2;o.rect(y[v+0],y[v+1],g,x)}else o.rect(0,0,g,x);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),u=this.animations(),d=u[l],f=d.length/4;o<f-1?this.frameIndex(o+1):this.frameIndex(0)}}return Hx.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,n.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Hx}var Gx={},$j;function yne(){if($j)return Gx;$j=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.Star=void 0;const e=jn(),t=Ti(),r=Fn(),n=kn();class s extends t.Shape{_sceneFunc(i){const o=this.innerRadius(),l=this.outerRadius(),u=this.numPoints();i.beginPath(),i.moveTo(0,0-l);for(let d=1;d<u*2;d++){const f=d%2===0?l:o,h=f*Math.sin(d*Math.PI/u),g=-1*f*Math.cos(d*Math.PI/u);i.lineTo(h,g)}i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(i){this.outerRadius(i/2)}setHeight(i){this.outerRadius(i/2)}}return Gx.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),Gx}var Xg={},zj;function Y$(){if(zj)return Xg;zj=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.Text=void 0,Xg.stringToArray=i;const e=ma(),t=jn(),r=Ti(),n=kn(),s=Fn(),a=kn();function i(R){return[...R].reduce((z,G,Q,re)=>{if(new RegExp("\\p{Emoji}","u").test(G)){const q=re[Q+1];q&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(q)?(z.push(G+q),re[Q+1]=""):z.push(G)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(G+(re[Q+1]||""))?z.push(G+re[Q+1]):Q>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(G)?z[z.length-1]+=G:G&&z.push(G);return z},[])}const o="auto",l="center",u="inherit",d="justify",f="Change.konva",h="2d",g="-",x="left",y="text",v="Text",T="top",k="bottom",b="middle",E="normal",N="px ",P=" ",M="right",j="rtl",A="word",F="char",L="none",V="",J=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],ne=J.length;function ee(R){return R.split(",").map(z=>{z=z.trim();const G=z.indexOf(" ")>=0,Q=z.indexOf('"')>=0||z.indexOf("'")>=0;return G&&!Q&&(z=`"${z}"`),z}).join(", ")}let ie;function B(){return ie||(ie=e.Util.createCanvasElement().getContext(h),ie)}function Y(R){R.fillText(this._partialText,this._partialTextX,this._partialTextY)}function I(R){R.setAttr("miterLimit",2),R.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function H(R){return R=R||{},!R.fillLinearGradientColorStops&&!R.fillRadialGradientColorStops&&!R.fillPatternImage&&(R.fill=R.fill||"black"),R}class W extends r.Shape{constructor(z){super(H(z)),this._partialTextX=0,this._partialTextY=0;for(let G=0;G<ne;G++)this.on(J[G]+f,this._setTextData);this._setTextData()}_sceneFunc(z){const G=this.textArr,Q=G.length;if(!this.text())return;let re=this.padding(),q=this.fontSize(),se=this.lineHeight()*q,ce=this.verticalAlign(),pe=this.direction(),ke=0,le=this.align(),ye=this.getWidth(),je=this.letterSpacing(),Ne=this.fill(),We=this.textDecoration(),$e=We.indexOf("underline")!==-1,Nt=We.indexOf("line-through")!==-1,He;pe=pe===u?z.direction:pe;let Et=se/2,Rt=b;if(n.Konva._fixTextRendering){const Mt=this.measureSize("M");Rt="alphabetic",Et=(Mt.fontBoundingBoxAscent-Mt.fontBoundingBoxDescent)/2+se/2}for(pe===j&&z.setAttr("direction",pe),z.setAttr("font",this._getContextFont()),z.setAttr("textBaseline",Rt),z.setAttr("textAlign",x),ce===b?ke=(this.getHeight()-Q*se-re*2)/2:ce===k&&(ke=this.getHeight()-Q*se-re*2),z.translate(re,ke+re),He=0;He<Q;He++){let Mt=0,ur=0;const wr=G[He],dr=wr.text,wt=wr.width,Ke=wr.lastInParagraph;if(z.save(),le===M?Mt+=ye-wt-re*2:le===l&&(Mt+=(ye-wt-re*2)/2),$e){z.save(),z.beginPath();const it=n.Konva._fixTextRendering?Math.round(q/4):Math.round(q/2),vt=Mt,st=Et+ur+it;z.moveTo(vt,st);const qe=le===d&&!Ke?ye-re*2:wt;z.lineTo(vt+Math.round(qe),st),z.lineWidth=q/15;const ot=this._getLinearGradient();z.strokeStyle=ot||Ne,z.stroke(),z.restore()}if(Nt){z.save(),z.beginPath();const it=n.Konva._fixTextRendering?-Math.round(q/4):0;z.moveTo(Mt,Et+ur+it);const vt=le===d&&!Ke?ye-re*2:wt;z.lineTo(Mt+Math.round(vt),Et+ur+it),z.lineWidth=q/15;const st=this._getLinearGradient();z.strokeStyle=st||Ne,z.stroke(),z.restore()}if(pe!==j&&(je!==0||le===d)){const it=dr.split(" ").length-1,vt=i(dr);for(let st=0;st<vt.length;st++){const qe=vt[st];qe===" "&&!Ke&&le===d&&(Mt+=(ye-re*2-wt)/it),this._partialTextX=Mt,this._partialTextY=Et+ur,this._partialText=qe,z.fillStrokeShape(this),Mt+=this.measureSize(qe).width+je}}else je!==0&&z.setAttr("letterSpacing",`${je}px`),this._partialTextX=Mt,this._partialTextY=Et+ur,this._partialText=dr,z.fillStrokeShape(this);z.restore(),Q>1&&(Et+=se)}}_hitFunc(z){const G=this.getWidth(),Q=this.getHeight();z.beginPath(),z.rect(0,0,G,Q),z.closePath(),z.fillStrokeShape(this)}setText(z){const G=e.Util._isString(z)?z:z==null?"":z+"";return this._setAttr(y,G),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(z){var G,Q,re,q,se,ce,pe,ke,le,ye,je;let Ne=B(),We=this.fontSize(),$e;Ne.save(),Ne.font=this._getContextFont(),$e=Ne.measureText(z),Ne.restore();const Nt=We/100;return{actualBoundingBoxAscent:(G=$e.actualBoundingBoxAscent)!==null&&G!==void 0?G:71.58203125*Nt,actualBoundingBoxDescent:(Q=$e.actualBoundingBoxDescent)!==null&&Q!==void 0?Q:0,actualBoundingBoxLeft:(re=$e.actualBoundingBoxLeft)!==null&&re!==void 0?re:-7.421875*Nt,actualBoundingBoxRight:(q=$e.actualBoundingBoxRight)!==null&&q!==void 0?q:75.732421875*Nt,alphabeticBaseline:(se=$e.alphabeticBaseline)!==null&&se!==void 0?se:0,emHeightAscent:(ce=$e.emHeightAscent)!==null&&ce!==void 0?ce:100*Nt,emHeightDescent:(pe=$e.emHeightDescent)!==null&&pe!==void 0?pe:-20*Nt,fontBoundingBoxAscent:(ke=$e.fontBoundingBoxAscent)!==null&&ke!==void 0?ke:91*Nt,fontBoundingBoxDescent:(le=$e.fontBoundingBoxDescent)!==null&&le!==void 0?le:21*Nt,hangingBaseline:(ye=$e.hangingBaseline)!==null&&ye!==void 0?ye:72.80000305175781*Nt,ideographicBaseline:(je=$e.ideographicBaseline)!==null&&je!==void 0?je:-21*Nt,width:$e.width,height:We}}_getContextFont(){return this.fontStyle()+P+this.fontVariant()+P+(this.fontSize()+N)+ee(this.fontFamily())}_addTextLine(z){this.align()===d&&(z=z.trim());const Q=this._getTextWidth(z);return this.textArr.push({text:z,width:Q,lastInParagraph:!1})}_getTextWidth(z){const G=this.letterSpacing(),Q=z.length;return B().measureText(z).width+G*Q}_setTextData(){let z=this.text().split(`
`),G=+this.fontSize(),Q=0,re=this.lineHeight()*G,q=this.attrs.width,se=this.attrs.height,ce=q!==o&&q!==void 0,pe=se!==o&&se!==void 0,ke=this.padding(),le=q-ke*2,ye=se-ke*2,je=0,Ne=this.wrap(),We=Ne!==L,$e=Ne!==F&&We,Nt=this.ellipsis();this.textArr=[],B().font=this._getContextFont();const He=Nt?this._getTextWidth(V):0;for(let Et=0,Rt=z.length;Et<Rt;++Et){let Mt=z[Et],ur=this._getTextWidth(Mt);if(ce&&ur>le)for(;Mt.length>0;){let wr=0,dr=i(Mt).length,wt="",Ke=0;for(;wr<dr;){const it=wr+dr>>>1,vt=i(Mt),st=vt.slice(0,it+1).join(""),qe=this._getTextWidth(st);(Nt&&pe&&je+re>ye?qe+He:qe)<=le?(wr=it+1,wt=st,Ke=qe):dr=it}if(wt){if($e){const st=i(Mt),qe=i(wt),ot=st[qe.length],kt=ot===P||ot===g;let Ut;if(kt&&Ke<=le)Ut=qe.length;else{const Qt=qe.lastIndexOf(P),Gt=qe.lastIndexOf(g);Ut=Math.max(Qt,Gt)+1}Ut>0&&(wr=Ut,wt=st.slice(0,wr).join(""),Ke=this._getTextWidth(wt))}if(wt=wt.trimRight(),this._addTextLine(wt),Q=Math.max(Q,Ke),je+=re,this._shouldHandleEllipsis(je)){this._tryToAddEllipsisToLastLine();break}if(Mt=i(Mt).slice(wr).join("").trimLeft(),Mt.length>0&&(ur=this._getTextWidth(Mt),ur<=le)){this._addTextLine(Mt),je+=re,Q=Math.max(Q,ur);break}}else break}else this._addTextLine(Mt),je+=re,Q=Math.max(Q,ur),this._shouldHandleEllipsis(je)&&Et<Rt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),pe&&je+re>ye)break}this.textHeight=G,this.textWidth=Q}_shouldHandleEllipsis(z){const G=+this.fontSize(),Q=this.lineHeight()*G,re=this.attrs.height,q=re!==o&&re!==void 0,se=this.padding(),ce=re-se*2;return!(this.wrap()!==L)||q&&z+Q>ce}_tryToAddEllipsisToLastLine(){const z=this.attrs.width,G=z!==o&&z!==void 0,Q=this.padding(),re=z-Q*2,q=this.ellipsis(),se=this.textArr[this.textArr.length-1];!se||!q||(G&&(this._getTextWidth(se.text+V)<re||(se.text=se.text.slice(0,se.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(se.text+V))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const z=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,G=this.hasShadow();return z&&G?!0:super._useBufferCanvas()}}return Xg.Text=W,W.prototype._fillFunc=Y,W.prototype._strokeFunc=I,W.prototype.className=v,W.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(W),t.Factory.overWriteSetter(W,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(W,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(W,"direction",u),t.Factory.addGetterSetter(W,"fontFamily","Arial"),t.Factory.addGetterSetter(W,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"fontStyle",E),t.Factory.addGetterSetter(W,"fontVariant",E),t.Factory.addGetterSetter(W,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"align",x),t.Factory.addGetterSetter(W,"verticalAlign",T),t.Factory.addGetterSetter(W,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"wrap",A),t.Factory.addGetterSetter(W,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(W,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(W,"textDecoration",""),Xg}var Vx={},Uj;function vne(){if(Uj)return Vx;Uj=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.TextPath=void 0;const e=ma(),t=jn(),r=Ti(),n=j7(),s=Y$(),a=Fn(),i=kn(),o="",l="normal";function u(h){h.fillText(this.partialText,0,0)}function d(h){h.strokeText(this.partialText,0,0)}class f extends r.Shape{constructor(g){super(g),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const x=this.pathLength;return g-1>x?null:n.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const x=this.textDecoration(),y=this.fill(),v=this.fontSize(),T=this.glyphInfo;x==="underline"&&g.beginPath();for(let k=0;k<T.length;k++){g.save();const b=T[k].p0;g.translate(b.x,b.y),g.rotate(T[k].rotation),this.partialText=T[k].text,g.fillStrokeShape(this),x==="underline"&&(k===0&&g.moveTo(0,v/2+1),g.lineTo(v,v/2+1)),g.restore()}x==="underline"&&(g.strokeStyle=y,g.lineWidth=v/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const x=this.glyphInfo;if(x.length>=1){const y=x[0].p0;g.moveTo(y.x,y.y)}for(let y=0;y<x.length;y++){const v=x[y].p1;g.lineTo(v.x,v.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return s.Text.prototype.setText.call(this,g)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(g){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const v=y.measureText(g);return y.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:x}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=x,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),v=this.align(),T=this.kerningFunc(),k=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let b=0;v==="center"&&(b=Math.max(0,this.pathLength/2-k/2)),v==="right"&&(b=Math.max(0,this.pathLength-k));const E=(0,s.stringToArray)(this.text());let N=b;for(let P=0;P<E.length;P++){const M=this._getPointAtLength(N);if(!M)return;let j=this._getTextSize(E[P]).width+y;if(E[P]===" "&&v==="justify"){const ne=this.text().split(" ").length-1;j+=(this.pathLength-k)/ne}const A=this._getPointAtLength(N+j);if(!A)return;const F=n.Path.getLineLength(M.x,M.y,A.x,A.y);let L=0;if(T)try{L=T(E[P-1],E[P])*this.fontSize()}catch{L=0}M.x+=L,A.x+=L,this.textWidth+=L;const V=n.Path.getPointOnLine(L+F/2,M.x,M.y,A.x,A.y),J=Math.atan2(A.y-M.y,A.x-M.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:E[P],rotation:J,p0:M,p1:A}),N+=j}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(N){g.push(N.p0.x),g.push(N.p0.y),g.push(N.p1.x),g.push(N.p1.y)});let x=g[0]||0,y=g[0]||0,v=g[1]||0,T=g[1]||0,k,b;for(let N=0;N<g.length/2;N++)k=g[N*2],b=g[N*2+1],x=Math.min(x,k),y=Math.max(y,k),v=Math.min(v,b),T=Math.max(T,b);const E=this.fontSize();return{x:x-E/2,y:v-E/2,width:y-x+E,height:T-v+E}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return Vx.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",l),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",l),t.Factory.addGetterSetter(f,"text",o),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),Vx}var qx={},Wj;function wne(){if(Wj)return qx;Wj=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.Transformer=void 0;const e=ma(),t=jn(),r=Na(),n=Ti(),s=K$(),a=N7(),i=kn(),o=Fn(),l=kn(),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(j=>j+`.${u}`).join(" "),f="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},x="ontouchstart"in i.Konva._global;function y(j,A,F){if(j==="rotater")return F;A+=e.Util.degToRad(g[j]||0);const L=(e.Util.radToDeg(A)%360+360)%360;return e.Util._inRange(L,315+22.5,360)||e.Util._inRange(L,0,22.5)?"ns-resize":e.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function T(j){return{x:j.x+j.width/2*Math.cos(j.rotation)+j.height/2*Math.sin(-j.rotation),y:j.y+j.height/2*Math.cos(j.rotation)+j.width/2*Math.sin(j.rotation)}}function k(j,A,F){const L=F.x+(j.x-F.x)*Math.cos(A)-(j.y-F.y)*Math.sin(A),V=F.y+(j.x-F.x)*Math.sin(A)+(j.y-F.y)*Math.cos(A);return{...j,rotation:j.rotation+A,x:L,y:V}}function b(j,A){const F=T(j);return k(j,A,F)}function E(j,A,F){let L=A;for(let V=0;V<j.length;V++){const J=i.Konva.getAngle(j[V]),ne=Math.abs(J-A)%(Math.PI*2);Math.min(ne,Math.PI*2-ne)<F&&(L=J)}return L}let N=0;class P extends a.Group{constructor(A){super(A),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(A){return this.setNode(A),this}setNode(A){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([A])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(A=[]){this._nodes&&this._nodes.length&&this.detach();const F=A.filter(V=>V.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=A=F,A.length===1&&this.useSingleNodeRotation()?this.rotation(A[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(V=>{const J=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(V._attrsAffectingSize.length){const ne=V._attrsAffectingSize.map(ee=>ee+"Change."+this._getEventNamespace()).join(" ");V.on(ne,J)}V.on(h.map(ne=>ne+`.${this._getEventNamespace()}`).join(" "),J),V.on(`absoluteTransformChange.${this._getEventNamespace()}`,J),this._proxyDrag(V)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(A){let F;A.on(`dragstart.${this._getEventNamespace()}`,L=>{F=A.getAbsolutePosition(),!this.isDragging()&&A!==this.findOne(".back")&&this.startDrag(L,!1)}),A.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!F)return;const V=A.getAbsolutePosition(),J=V.x-F.x,ne=V.y-F.y;this.nodes().forEach(ee=>{if(ee===A||ee.isDragging())return;const ie=ee.getAbsolutePosition();ee.setAbsolutePosition({x:ie.x+J,y:ie.y+ne}),ee.startDrag(L)}),F=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(A=>{A.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(A,F=this.rotation(),L){const V=A.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),J=A.getAbsoluteScale(L),ne=A.getAbsolutePosition(L),ee=V.x*J.x-A.offsetX()*J.x,ie=V.y*J.y-A.offsetY()*J.y,B=(i.Konva.getAngle(A.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),Y={x:ne.x+ee*Math.cos(B)+ie*Math.sin(-B),y:ne.y+ie*Math.cos(B)+ee*Math.sin(B),width:V.width*J.x,height:V.height*J.y,rotation:B};return k(Y,-i.Konva.getAngle(F),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const F=[];this.nodes().map(B=>{const Y=B.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),I=[{x:Y.x,y:Y.y},{x:Y.x+Y.width,y:Y.y},{x:Y.x+Y.width,y:Y.y+Y.height},{x:Y.x,y:Y.y+Y.height}],H=B.getAbsoluteTransform();I.forEach(function(W){const R=H.point(W);F.push(R)})});const L=new e.Transform;L.rotate(-i.Konva.getAngle(this.rotation()));let V=1/0,J=1/0,ne=-1/0,ee=-1/0;F.forEach(function(B){const Y=L.point(B);V===void 0&&(V=ne=Y.x,J=ee=Y.y),V=Math.min(V,Y.x),J=Math.min(J,Y.y),ne=Math.max(ne,Y.x),ee=Math.max(ee,Y.y)}),L.invert();const ie=L.point({x:V,y:J});return{x:ie.x,y:ie.y,width:ne-V,height:ee-J,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(A=>{this._createAnchor(A)}),this._createAnchor("rotater")}_createAnchor(A){const F=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:A+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:x?10:"auto"}),L=this;F.on("mousedown touchstart",function(V){L._handleMouseDown(V)}),F.on("dragstart",V=>{F.stopDrag(),V.cancelBubble=!0}),F.on("dragend",V=>{V.cancelBubble=!0}),F.on("mouseenter",()=>{const V=i.Konva.getAngle(this.rotation()),J=this.rotateAnchorCursor(),ne=y(A,V,J);F.getStage().content&&(F.getStage().content.style.cursor=ne),this._cursorChange=!0}),F.on("mouseout",()=>{F.getStage().content&&(F.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(F)}_createBack(){const A=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(F,L){const V=L.getParent(),J=V.padding();F.beginPath(),F.rect(-J,-J,L.width()+J*2,L.height()+J*2),F.moveTo(L.width()/2,-J),V.rotateEnabled()&&V.rotateLineVisible()&&F.lineTo(L.width()/2,-V.rotateAnchorOffset()*e.Util._sign(L.height())-J),F.fillStrokeShape(L)},hitFunc:(F,L)=>{if(!this.shouldOverdrawWholeArea())return;const V=this.padding();F.beginPath(),F.rect(-V,-V,L.width()+V*2,L.height()+V*2),F.fillStrokeShape(L)}});this.add(A),this._proxyDrag(A),A.on("dragstart",F=>{F.cancelBubble=!0}),A.on("dragmove",F=>{F.cancelBubble=!0}),A.on("dragend",F=>{F.cancelBubble=!0}),this.on("dragmove",F=>{this.update()})}_handleMouseDown(A){if(this._transforming)return;this._movingAnchorName=A.target.name().split(" ")[0];const F=this._getNodeRect(),L=F.width,V=F.height,J=Math.sqrt(Math.pow(L,2)+Math.pow(V,2));this.sin=Math.abs(V/J),this.cos=Math.abs(L/J),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const ne=A.target.getAbsolutePosition(),ee=A.target.getStage().getPointerPosition();this._anchorDragOffset={x:ee.x-ne.x,y:ee.y-ne.y},N++,this._fire("transformstart",{evt:A.evt,target:this.getNode()}),this._nodes.forEach(ie=>{ie._fire("transformstart",{evt:A.evt,target:ie})})}_handleMouseMove(A){let F,L,V;const J=this.findOne("."+this._movingAnchorName),ne=J.getStage();ne.setPointersPositions(A);const ee=ne.getPointerPosition();let ie={x:ee.x-this._anchorDragOffset.x,y:ee.y-this._anchorDragOffset.y};const B=J.getAbsolutePosition();this.anchorDragBoundFunc()&&(ie=this.anchorDragBoundFunc()(B,ie,A)),J.setAbsolutePosition(ie);const Y=J.getAbsolutePosition();if(B.x===Y.x&&B.y===Y.y)return;if(this._movingAnchorName==="rotater"){const re=this._getNodeRect();F=J.x()-re.width/2,L=-J.y()+re.height/2;let q=Math.atan2(-L,F)+Math.PI/2;re.height<0&&(q-=Math.PI);const ce=i.Konva.getAngle(this.rotation())+q,pe=i.Konva.getAngle(this.rotationSnapTolerance()),le=E(this.rotationSnaps(),ce,pe)-re.rotation,ye=b(re,le);this._fitNodesInto(ye,A);return}const I=this.shiftBehavior();let H;I==="inverted"?H=this.keepRatio()&&!A.shiftKey:I==="none"?H=this.keepRatio():H=this.keepRatio()||A.shiftKey;let W=this.centeredScaling()||A.altKey;if(this._movingAnchorName==="top-left"){if(H){const re=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};V=Math.sqrt(Math.pow(re.x-J.x(),2)+Math.pow(re.y-J.y(),2));const q=this.findOne(".top-left").x()>re.x?-1:1,se=this.findOne(".top-left").y()>re.y?-1:1;F=V*this.cos*q,L=V*this.sin*se,this.findOne(".top-left").x(re.x-F),this.findOne(".top-left").y(re.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(J.y());else if(this._movingAnchorName==="top-right"){if(H){const re=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};V=Math.sqrt(Math.pow(J.x()-re.x,2)+Math.pow(re.y-J.y(),2));const q=this.findOne(".top-right").x()<re.x?-1:1,se=this.findOne(".top-right").y()>re.y?-1:1;F=V*this.cos*q,L=V*this.sin*se,this.findOne(".top-right").x(re.x+F),this.findOne(".top-right").y(re.y-L)}var R=J.position();this.findOne(".top-left").y(R.y),this.findOne(".bottom-right").x(R.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(J.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(J.x());else if(this._movingAnchorName==="bottom-left"){if(H){const re=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};V=Math.sqrt(Math.pow(re.x-J.x(),2)+Math.pow(J.y()-re.y,2));const q=re.x<J.x()?-1:1,se=J.y()<re.y?-1:1;F=V*this.cos*q,L=V*this.sin*se,J.x(re.x-F),J.y(re.y+L)}R=J.position(),this.findOne(".top-left").x(R.x),this.findOne(".bottom-right").y(R.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(J.y());else if(this._movingAnchorName==="bottom-right"){if(H){const re=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};V=Math.sqrt(Math.pow(J.x()-re.x,2)+Math.pow(J.y()-re.y,2));const q=this.findOne(".bottom-right").x()<re.x?-1:1,se=this.findOne(".bottom-right").y()<re.y?-1:1;F=V*this.cos*q,L=V*this.sin*se,this.findOne(".bottom-right").x(re.x+F),this.findOne(".bottom-right").y(re.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(W=this.centeredScaling()||A.altKey,W){const re=this.findOne(".top-left"),q=this.findOne(".bottom-right"),se=re.x(),ce=re.y(),pe=this.getWidth()-q.x(),ke=this.getHeight()-q.y();q.move({x:-se,y:-ce}),re.move({x:pe,y:ke})}const z=this.findOne(".top-left").getAbsolutePosition();F=z.x,L=z.y;const G=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Q=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:F,y:L,width:G,height:Q,rotation:i.Konva.getAngle(this.rotation())},A)}_handleMouseUp(A){this._removeEvents(A)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(A){var F;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();N--,this._fire("transformend",{evt:A,target:L}),(F=this.getLayer())===null||F===void 0||F.batchDraw(),L&&this._nodes.forEach(V=>{var J;V._fire("transformend",{evt:A,target:V}),(J=V.getLayer())===null||J===void 0||J.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(A,F){const L=this._getNodeRect(),V=1;if(e.Util._inRange(A.width,-this.padding()*2-V,V)){this.update();return}if(e.Util._inRange(A.height,-this.padding()*2-V,V)){this.update();return}const J=new e.Transform;if(J.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&A.width<0&&this._movingAnchorName.indexOf("left")>=0){const H=J.point({x:-this.padding()*2,y:0});A.x+=H.x,A.y+=H.y,A.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y}else if(this._movingAnchorName&&A.width<0&&this._movingAnchorName.indexOf("right")>=0){const H=J.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.width+=this.padding()*2}if(this._movingAnchorName&&A.height<0&&this._movingAnchorName.indexOf("top")>=0){const H=J.point({x:0,y:-this.padding()*2});A.x+=H.x,A.y+=H.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.height+=this.padding()*2}else if(this._movingAnchorName&&A.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const H=J.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.height+=this.padding()*2}if(this.boundBoxFunc()){const H=this.boundBoxFunc()(L,A);H?A=H:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const ne=1e7,ee=new e.Transform;ee.translate(L.x,L.y),ee.rotate(L.rotation),ee.scale(L.width/ne,L.height/ne);const ie=new e.Transform,B=A.width/ne,Y=A.height/ne;this.flipEnabled()===!1?(ie.translate(A.x,A.y),ie.rotate(A.rotation),ie.translate(A.width<0?A.width:0,A.height<0?A.height:0),ie.scale(Math.abs(B),Math.abs(Y))):(ie.translate(A.x,A.y),ie.rotate(A.rotation),ie.scale(B,Y));const I=ie.multiply(ee.invert());this._nodes.forEach(H=>{var W;const R=H.getParent().getAbsoluteTransform(),z=H.getTransform().copy();z.translate(H.offsetX(),H.offsetY());const G=new e.Transform;G.multiply(R.copy().invert()).multiply(I).multiply(R).multiply(z);const Q=G.decompose();H.setAttrs(Q),(W=H.getLayer())===null||W===void 0||W.batchDraw()}),this.rotation(e.Util._getRotation(A.rotation)),this._nodes.forEach(H=>{this._fire("transform",{evt:F,target:H}),H._fire("transform",{evt:F,target:H})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(A,F){this.findOne(A).setAttrs(F)}update(){var A;const F=this._getNodeRect();this.rotation(e.Util._getRotation(F.rotation));const L=F.width,V=F.height,J=this.enabledAnchors(),ne=this.resizeEnabled(),ee=this.padding(),ie=this.anchorSize(),B=this.find("._anchor");B.forEach(I=>{I.setAttrs({width:ie,height:ie,offsetX:ie/2,offsetY:ie/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:ie/2+ee,offsetY:ie/2+ee,visible:ne&&J.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:ie/2+ee,visible:ne&&J.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:ie/2-ee,offsetY:ie/2+ee,visible:ne&&J.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:V/2,offsetX:ie/2+ee,visible:ne&&J.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:V/2,offsetX:ie/2-ee,visible:ne&&J.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:V,offsetX:ie/2+ee,offsetY:ie/2-ee,visible:ne&&J.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:V,offsetY:ie/2-ee,visible:ne&&J.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:V,offsetX:ie/2-ee,offsetY:ie/2-ee,visible:ne&&J.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*e.Util._sign(V)-ee,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:V,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const Y=this.anchorStyleFunc();Y&&B.forEach(I=>{Y(I)}),(A=this.getLayer())===null||A===void 0||A.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const A=this.findOne("."+this._movingAnchorName);A&&A.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(A){return r.Node.prototype.clone.call(this,A)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}qx.Transformer=P,P.isTransforming=()=>N>0;function M(j){return j instanceof Array||e.Util.warn("enabledAnchors value should be an array"),j instanceof Array&&j.forEach(function(A){v.indexOf(A)===-1&&e.Util.warn("Unknown anchor name: "+A+". Available names are: "+v.join(", "))}),j||[]}return P.prototype.className="Transformer",(0,l._registerNode)(P),t.Factory.addGetterSetter(P,"enabledAnchors",v,M),t.Factory.addGetterSetter(P,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(P,"resizeEnabled",!0),t.Factory.addGetterSetter(P,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"rotateEnabled",!0),t.Factory.addGetterSetter(P,"rotateLineVisible",!0),t.Factory.addGetterSetter(P,"rotationSnaps",[]),t.Factory.addGetterSetter(P,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(P,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderEnabled",!0),t.Factory.addGetterSetter(P,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(P,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"anchorFill","white"),t.Factory.addGetterSetter(P,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(P,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderDash"),t.Factory.addGetterSetter(P,"keepRatio",!0),t.Factory.addGetterSetter(P,"shiftBehavior","default"),t.Factory.addGetterSetter(P,"centeredScaling",!1),t.Factory.addGetterSetter(P,"ignoreStroke",!1),t.Factory.addGetterSetter(P,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"nodes"),t.Factory.addGetterSetter(P,"node"),t.Factory.addGetterSetter(P,"boundBoxFunc"),t.Factory.addGetterSetter(P,"anchorDragBoundFunc"),t.Factory.addGetterSetter(P,"anchorStyleFunc"),t.Factory.addGetterSetter(P,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(P,"useSingleNodeRotation",!0),t.Factory.backCompat(P,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),qx}var Kx={},Hj;function bne(){if(Hj)return Kx;Hj=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.Wedge=void 0;const e=jn(),t=Ti(),r=kn(),n=Fn(),s=kn();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}return Kx.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kx}var Yx={},Gj;function _ne(){if(Gj)return Yx;Gj=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.Blur=void 0;const e=jn(),t=Na(),r=Fn();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(l,u){const d=l.data,f=l.width,h=l.height;let g,x,y,v,T,k,b,E,N,P,M,j,A,F,L,V,J,ne,ee,ie;const B=u+u+1,Y=f-1,I=h-1,H=u+1,W=H*(H+1)/2,R=new n,z=s[u],G=a[u];let Q=null,re=R,q=null,se=null;for(let ce=1;ce<B;ce++)re=re.next=new n,ce===H&&(Q=re);re.next=R,y=x=0;for(let ce=0;ce<h;ce++){j=A=F=L=v=T=k=b=0,E=H*(V=d[x]),N=H*(J=d[x+1]),P=H*(ne=d[x+2]),M=H*(ee=d[x+3]),v+=W*V,T+=W*J,k+=W*ne,b+=W*ee,re=R;for(let pe=0;pe<H;pe++)re.r=V,re.g=J,re.b=ne,re.a=ee,re=re.next;for(let pe=1;pe<H;pe++)g=x+((Y<pe?Y:pe)<<2),v+=(re.r=V=d[g])*(ie=H-pe),T+=(re.g=J=d[g+1])*ie,k+=(re.b=ne=d[g+2])*ie,b+=(re.a=ee=d[g+3])*ie,j+=V,A+=J,F+=ne,L+=ee,re=re.next;q=R,se=Q;for(let pe=0;pe<f;pe++)d[x+3]=ee=b*z>>G,ee!==0?(ee=255/ee,d[x]=(v*z>>G)*ee,d[x+1]=(T*z>>G)*ee,d[x+2]=(k*z>>G)*ee):d[x]=d[x+1]=d[x+2]=0,v-=E,T-=N,k-=P,b-=M,E-=q.r,N-=q.g,P-=q.b,M-=q.a,g=y+((g=pe+u+1)<Y?g:Y)<<2,j+=q.r=d[g],A+=q.g=d[g+1],F+=q.b=d[g+2],L+=q.a=d[g+3],v+=j,T+=A,k+=F,b+=L,q=q.next,E+=V=se.r,N+=J=se.g,P+=ne=se.b,M+=ee=se.a,j-=V,A-=J,F-=ne,L-=ee,se=se.next,x+=4;y+=f}for(let ce=0;ce<f;ce++){A=F=L=j=T=k=b=v=0,x=ce<<2,E=H*(V=d[x]),N=H*(J=d[x+1]),P=H*(ne=d[x+2]),M=H*(ee=d[x+3]),v+=W*V,T+=W*J,k+=W*ne,b+=W*ee,re=R;for(let ke=0;ke<H;ke++)re.r=V,re.g=J,re.b=ne,re.a=ee,re=re.next;let pe=f;for(let ke=1;ke<=u;ke++)x=pe+ce<<2,v+=(re.r=V=d[x])*(ie=H-ke),T+=(re.g=J=d[x+1])*ie,k+=(re.b=ne=d[x+2])*ie,b+=(re.a=ee=d[x+3])*ie,j+=V,A+=J,F+=ne,L+=ee,re=re.next,ke<I&&(pe+=f);x=ce,q=R,se=Q;for(let ke=0;ke<h;ke++)g=x<<2,d[g+3]=ee=b*z>>G,ee>0?(ee=255/ee,d[g]=(v*z>>G)*ee,d[g+1]=(T*z>>G)*ee,d[g+2]=(k*z>>G)*ee):d[g]=d[g+1]=d[g+2]=0,v-=E,T-=N,k-=P,b-=M,E-=q.r,N-=q.g,P-=q.b,M-=q.a,g=ce+((g=ke+H)<I?g:I)*f<<2,v+=j+=q.r=d[g],T+=A+=q.g=d[g+1],k+=F+=q.b=d[g+2],b+=L+=q.a=d[g+3],q=q.next,E+=V=se.r,N+=J=se.g,P+=ne=se.b,M+=ee=se.a,j-=V,A-=J,F-=ne,L-=ee,se=se.next,x+=f}}const o=function(u){const d=Math.round(this.blurRadius());d>0&&i(u,d)};return Yx.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Yx}var Xx={},Vj;function Sne(){if(Vj)return Xx;Vj=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.Brighten=void 0;const e=jn(),t=Na(),r=Fn(),n=function(s){const a=this.brightness()*255,i=s.data,o=i.length;for(let l=0;l<o;l+=4)i[l]+=a,i[l+1]+=a,i[l+2]+=a};return Xx.Brighten=n,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Xx}var Jx={},qj;function kne(){if(qj)return Jx;qj=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.Contrast=void 0;const e=jn(),t=Na(),r=Fn(),n=function(s){const a=Math.pow((this.contrast()+100)/100,2),i=s.data,o=i.length;let l=150,u=150,d=150;for(let f=0;f<o;f+=4)l=i[f],u=i[f+1],d=i[f+2],l/=255,l-=.5,l*=a,l+=.5,l*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,i[f]=l,i[f+1]=u,i[f+2]=d};return Jx.Contrast=n,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Jx}var Qx={},Kj;function Tne(){if(Kj)return Qx;Kj=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.Emboss=void 0;const e=jn(),t=Na(),r=ma(),n=Fn(),s=function(a){const i=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),u=this.embossBlend(),d=a.data,f=a.width,h=a.height,g=f*4;let x=0,y=0,v=h;switch(l){case"top-left":x=-1,y=-1;break;case"top":x=-1,y=0;break;case"top-right":x=-1,y=1;break;case"right":x=0,y=1;break;case"bottom-right":x=1,y=1;break;case"bottom":x=1,y=0;break;case"bottom-left":x=1,y=-1;break;case"left":x=0,y=-1;break;default:r.Util.error("Unknown emboss direction: "+l)}do{const T=(v-1)*g;let k=x;v+k<1&&(k=0),v+k>h&&(k=0);const b=(v-1+k)*f*4;let E=f;do{const N=T+(E-1)*4;let P=y;E+P<1&&(P=0),E+P>f&&(P=0);const M=b+(E-1+P)*4,j=d[N]-d[M],A=d[N+1]-d[M+1],F=d[N+2]-d[M+2];let L=j;const V=L>0?L:-L,J=A>0?A:-A,ne=F>0?F:-F;if(J>V&&(L=A),ne>V&&(L=F),L*=i,u){const ee=d[N]+L,ie=d[N+1]+L,B=d[N+2]+L;d[N]=ee>255?255:ee<0?0:ee,d[N+1]=ie>255?255:ie<0?0:ie,d[N+2]=B>255?255:B<0?0:B}else{let ee=o-L;ee<0?ee=0:ee>255&&(ee=255),d[N]=d[N+1]=d[N+2]=ee}}while(--E)}while(--v)};return Qx.Emboss=s,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),Qx}var Zx={},Yj;function Cne(){if(Yj)return Zx;Yj=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.Enhance=void 0;const e=jn(),t=Na(),r=Fn();function n(a,i,o,l,u){const d=o-i,f=u-l;if(d===0)return l+f/2;if(f===0)return l;let h=(a-i)/d;return h=f*h+l,h}const s=function(a){const i=a.data,o=i.length;let l=i[0],u=l,d,f=i[1],h=f,g,x=i[2],y=x,v;const T=this.enhance();if(T===0)return;for(let j=0;j<o;j+=4)d=i[j+0],d<l?l=d:d>u&&(u=d),g=i[j+1],g<f?f=g:g>h&&(h=g),v=i[j+2],v<x?x=v:v>y&&(y=v);u===l&&(u=255,l=0),h===f&&(h=255,f=0),y===x&&(y=255,x=0);let k,b,E,N,P,M;if(T>0)k=u+T*(255-u),b=l-T*(l-0),E=h+T*(255-h),N=f-T*(f-0),P=y+T*(255-y),M=x-T*(x-0);else{const j=(u+l)*.5;k=u+T*(u-j),b=l+T*(l-j);const A=(h+f)*.5;E=h+T*(h-A),N=f+T*(f-A);const F=(y+x)*.5;P=y+T*(y-F),M=x+T*(x-F)}for(let j=0;j<o;j+=4)i[j+0]=n(i[j+0],l,u,b,k),i[j+1]=n(i[j+1],f,h,N,E),i[j+2]=n(i[j+2],x,y,M,P)};return Zx.Enhance=s,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Zx}var ey={},Xj;function Ene(){if(Xj)return ey;Xj=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.Grayscale=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=.34*r[s]+.5*r[s+1]+.16*r[s+2];r[s]=a,r[s+1]=a,r[s+2]=a}};return ey.Grayscale=e,ey}var ty={},Jj;function Nne(){if(Jj)return ty;Jj=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.HSL=void 0;const e=jn(),t=Na(),r=Fn();e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter);const n=function(s){const a=s.data,i=a.length,o=1,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=o*l*Math.cos(u*Math.PI/180),h=o*l*Math.sin(u*Math.PI/180),g=.299*o+.701*f+.167*h,x=.587*o-.587*f+.33*h,y=.114*o-.114*f-.497*h,v=.299*o-.299*f-.328*h,T=.587*o+.413*f+.035*h,k=.114*o-.114*f+.293*h,b=.299*o-.3*f+1.25*h,E=.587*o-.586*f-1.05*h,N=.114*o+.886*f-.2*h;let P,M,j,A;for(let F=0;F<i;F+=4)P=a[F+0],M=a[F+1],j=a[F+2],A=a[F+3],a[F+0]=g*P+x*M+y*j+d,a[F+1]=v*P+T*M+k*j+d,a[F+2]=b*P+E*M+N*j+d,a[F+3]=A};return ty.HSL=n,ty}var ry={},Qj;function Ane(){if(Qj)return ry;Qj=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.HSV=void 0;const e=jn(),t=Na(),r=Fn(),n=function(s){const a=s.data,i=a.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=o*l*Math.cos(u*Math.PI/180),f=o*l*Math.sin(u*Math.PI/180),h=.299*o+.701*d+.167*f,g=.587*o-.587*d+.33*f,x=.114*o-.114*d-.497*f,y=.299*o-.299*d-.328*f,v=.587*o+.413*d+.035*f,T=.114*o-.114*d+.293*f,k=.299*o-.3*d+1.25*f,b=.587*o-.586*d-1.05*f,E=.114*o+.886*d-.2*f;for(let N=0;N<i;N+=4){const P=a[N+0],M=a[N+1],j=a[N+2],A=a[N+3];a[N+0]=h*P+g*M+x*j,a[N+1]=y*P+v*M+T*j,a[N+2]=k*P+b*M+E*j,a[N+3]=A}};return ry.HSV=n,e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ry}var ny={},Zj;function jne(){if(Zj)return ny;Zj=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.Invert=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]};return ny.Invert=e,ny}var sy={},eP;function Pne(){if(eP)return sy;eP=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.Kaleidoscope=void 0;const e=jn(),t=Na(),r=ma(),n=Fn(),s=function(o,l,u){const d=o.data,f=l.data,h=o.width,g=o.height,x=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(x*x+y*y),T=h-x,k=g-y;const b=Math.sqrt(T*T+k*k);v=b>v?b:v;const E=g,N=h,P=360/N*Math.PI/180;for(let M=0;M<N;M+=1){const j=Math.sin(M*P),A=Math.cos(M*P);for(let F=0;F<E;F+=1){T=Math.floor(x+v*F/E*A),k=Math.floor(y+v*F/E*j);let L=(k*h+T)*4;const V=d[L+0],J=d[L+1],ne=d[L+2],ee=d[L+3];L=(M+F*h)*4,f[L+0]=V,f[L+1]=J,f[L+2]=ne,f[L+3]=ee}}},a=function(o,l,u){const d=o.data,f=l.data,h=o.width,g=o.height,x=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(x*x+y*y),T=h-x,k=g-y;const b=Math.sqrt(T*T+k*k);v=b>v?b:v;const E=g,N=h,P=0;let M,j;for(T=0;T<h;T+=1)for(k=0;k<g;k+=1){const A=T-x,F=k-y,L=Math.sqrt(A*A+F*F)*E/v;let V=(Math.atan2(F,A)*180/Math.PI+360+P)%360;V=V*N/360,M=Math.floor(V),j=Math.floor(L);let J=(j*h+M)*4;const ne=d[J+0],ee=d[J+1],ie=d[J+2],B=d[J+3];J=(k*h+T)*4,f[J+0]=ne,f[J+1]=ee,f[J+2]=ie,f[J+3]=B}},i=function(o){const l=o.width,u=o.height;let d,f,h,g,x,y,v,T,k,b,E=Math.round(this.kaleidoscopePower());const N=Math.round(this.kaleidoscopeAngle()),P=Math.floor(l*(N%360)/360);if(E<1)return;const M=r.Util.createCanvasElement();M.width=l,M.height=u;const j=M.getContext("2d").getImageData(0,0,l,u);r.Util.releaseCanvas(M),s(o,j,{polarCenterX:l/2,polarCenterY:u/2});let A=l/Math.pow(2,E);for(;A<=8;)A=A*2,E-=1;A=Math.ceil(A);let F=A,L=0,V=F,J=1;for(P+A>l&&(L=F,V=0,J=-1),f=0;f<u;f+=1)for(d=L;d!==V;d+=J)h=Math.round(d+P)%l,k=(l*f+h)*4,x=j.data[k+0],y=j.data[k+1],v=j.data[k+2],T=j.data[k+3],b=(l*f+d)*4,j.data[b+0]=x,j.data[b+1]=y,j.data[b+2]=v,j.data[b+3]=T;for(f=0;f<u;f+=1)for(F=Math.floor(A),g=0;g<E;g+=1){for(d=0;d<F+1;d+=1)k=(l*f+d)*4,x=j.data[k+0],y=j.data[k+1],v=j.data[k+2],T=j.data[k+3],b=(l*f+F*2-d-1)*4,j.data[b+0]=x,j.data[b+1]=y,j.data[b+2]=v,j.data[b+3]=T;F*=2}a(j,o,{})};return sy.Kaleidoscope=i,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),sy}var ay={},tP;function Mne(){if(tP)return ay;tP=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.Mask=void 0;const e=jn(),t=Na(),r=Fn();function n(h,g,x){let y=(x*h.width+g)*4;const v=[];return v.push(h.data[y++],h.data[y++],h.data[y++],h.data[y++]),v}function s(h,g){return Math.sqrt(Math.pow(h[0]-g[0],2)+Math.pow(h[1]-g[1],2)+Math.pow(h[2]-g[2],2))}function a(h){const g=[0,0,0];for(let x=0;x<h.length;x++)g[0]+=h[x][0],g[1]+=h[x][1],g[2]+=h[x][2];return g[0]/=h.length,g[1]/=h.length,g[2]/=h.length,g}function i(h,g){const x=n(h,0,0),y=n(h,h.width-1,0),v=n(h,0,h.height-1),T=n(h,h.width-1,h.height-1),k=g||10;if(s(x,y)<k&&s(y,T)<k&&s(T,v)<k&&s(v,x)<k){const b=a([y,x,T,v]),E=[];for(let N=0;N<h.width*h.height;N++){const P=s(b,[h.data[N*4],h.data[N*4+1],h.data[N*4+2]]);E[N]=P<k?0:255}return E}}function o(h,g){for(let x=0;x<h.width*h.height;x++)h.data[4*x+3]=g[x]}function l(h,g,x){const y=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let E=0;E<g;E++){const N=b*g+E;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,F=E+j-T;if(A>=0&&A<x&&F>=0&&F<g){const L=A*g+F,V=y[M*v+j];P+=h[L]*V}}k[N]=P===2040?255:0}return k}function u(h,g,x){const y=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let E=0;E<g;E++){const N=b*g+E;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,F=E+j-T;if(A>=0&&A<x&&F>=0&&F<g){const L=A*g+F,V=y[M*v+j];P+=h[L]*V}}k[N]=P>=1020?255:0}return k}function d(h,g,x){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let E=0;E<g;E++){const N=b*g+E;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,F=E+j-T;if(A>=0&&A<x&&F>=0&&F<g){const L=A*g+F,V=y[M*v+j];P+=h[L]*V}}k[N]=P}return k}const f=function(h){const g=this.threshold();let x=i(h,g);return x&&(x=l(x,h.width,h.height),x=u(x,h.width,h.height),x=d(x,h.width,h.height),o(h,x)),h};return ay.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ay}var iy={},rP;function Fne(){if(rP)return iy;rP=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.Noise=void 0;const e=jn(),t=Na(),r=Fn(),n=function(s){const a=this.noise()*255,i=s.data,o=i.length,l=a/2;for(let u=0;u<o;u+=4)i[u+0]+=l-2*l*Math.random(),i[u+1]+=l-2*l*Math.random(),i[u+2]+=l-2*l*Math.random()};return iy.Noise=n,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),iy}var oy={},nP;function Dne(){if(nP)return oy;nP=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.Pixelate=void 0;const e=jn(),t=ma(),r=Na(),n=Fn(),s=function(a){let i=Math.ceil(this.pixelSize()),o=a.width,l=a.height,u=Math.ceil(o/i),d=Math.ceil(l/i),f=a.data;if(i<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let h=0;h<u;h+=1)for(let g=0;g<d;g+=1){let x=0,y=0,v=0,T=0;const k=h*i,b=k+i,E=g*i,N=E+i;let P=0;for(let M=k;M<b;M+=1)if(!(M>=o))for(let j=E;j<N;j+=1){if(j>=l)continue;const A=(o*j+M)*4;x+=f[A+0],y+=f[A+1],v+=f[A+2],T+=f[A+3],P+=1}x=x/P,y=y/P,v=v/P,T=T/P;for(let M=k;M<b;M+=1)if(!(M>=o))for(let j=E;j<N;j+=1){if(j>=l)continue;const A=(o*j+M)*4;f[A+0]=x,f[A+1]=y,f[A+2]=v,f[A+3]=T}}};return oy.Pixelate=s,e.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),oy}var ly={},sP;function One(){if(sP)return ly;sP=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.Posterize=void 0;const e=jn(),t=Na(),r=Fn(),n=function(s){const a=Math.round(this.levels()*254)+1,i=s.data,o=i.length,l=255/a;for(let u=0;u<o;u+=1)i[u]=Math.floor(i[u]/l)*l};return ly.Posterize=n,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ly}var cy={},aP;function Rne(){if(aP)return cy;aP=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.RGB=void 0;const e=jn(),t=Na(),r=Fn(),n=function(s){const a=s.data,i=a.length,o=this.red(),l=this.green(),u=this.blue();for(let d=0;d<i;d+=4){const f=(.34*a[d]+.5*a[d+1]+.16*a[d+2])/255;a[d]=f*o,a[d+1]=f*l,a[d+2]=f*u,a[d+3]=a[d+3]}};return cy.RGB=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),cy}var uy={},iP;function Ine(){if(iP)return uy;iP=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.RGBA=void 0;const e=jn(),t=Na(),r=Fn(),n=function(s){const a=s.data,i=a.length,o=this.red(),l=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<i;f+=4){const h=1-d;a[f]=o*d+a[f]*h,a[f+1]=l*d+a[f+1]*h,a[f+2]=u*d+a[f+2]*h}};return uy.RGBA=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),uy}var dy={},oP;function Lne(){if(oP)return dy;oP=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.Sepia=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=r[s+0],i=r[s+1],o=r[s+2];r[s+0]=Math.min(255,a*.393+i*.769+o*.189),r[s+1]=Math.min(255,a*.349+i*.686+o*.168),r[s+2]=Math.min(255,a*.272+i*.534+o*.131)}};return dy.Sepia=e,dy}var fy={},lP;function Bne(){if(lP)return fy;lP=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.Solarize=void 0;const e=function(t){const r=t.data,n=t.width,s=t.height,a=n*4;let i=s;do{const o=(i-1)*a;let l=n;do{const u=o+(l-1)*4;let d=r[u],f=r[u+1],h=r[u+2];d>127&&(d=255-d),f>127&&(f=255-f),h>127&&(h=255-h),r[u]=d,r[u+1]=f,r[u+2]=h}while(--l)}while(--i)};return fy.Solarize=e,fy}var hy={},cP;function $ne(){if(cP)return hy;cP=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.Threshold=void 0;const e=jn(),t=Na(),r=Fn(),n=function(s){const a=this.threshold()*255,i=s.data,o=i.length;for(let l=0;l<o;l+=1)i[l]=i[l]<a?0:255};return hy.Threshold=n,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),hy}var uP;function zne(){if(uP)return Ex;uP=1,Object.defineProperty(Ex,"__esModule",{value:!0}),Ex.Konva=void 0;const e=Yk(),t=lne(),r=une(),n=dne(),s=fne(),a=hne(),i=mne(),o=q$(),l=j7(),u=K$(),d=gne(),f=pne(),h=xne(),g=yne(),x=Y$(),y=vne(),v=wne(),T=bne(),k=_ne(),b=Sne(),E=kne(),N=Tne(),P=Cne(),M=Ene(),j=Nne(),A=Ane(),F=jne(),L=Pne(),V=Mne(),J=Fne(),ne=Dne(),ee=One(),ie=Rne(),B=Ine(),Y=Lne(),I=Bne(),H=$ne();return Ex.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:l.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:h.Sprite,Star:g.Star,Text:x.Text,TextPath:y.TextPath,Transformer:v.Transformer,Wedge:T.Wedge,Filters:{Blur:k.Blur,Brighten:b.Brighten,Contrast:E.Contrast,Emboss:N.Emboss,Enhance:P.Enhance,Grayscale:M.Grayscale,HSL:j.HSL,HSV:A.HSV,Invert:F.Invert,Kaleidoscope:L.Kaleidoscope,Mask:V.Mask,Noise:J.Noise,Pixelate:ne.Pixelate,Posterize:ee.Posterize,RGB:ie.RGB,RGBA:B.RGBA,Sepia:Y.Sepia,Solarize:I.Solarize,Threshold:H.Threshold}}),Ex}var Une=Wb.exports,dP;function Wne(){if(dP)return Wb.exports;dP=1,Object.defineProperty(Une,"__esModule",{value:!0});const e=zne();return Wb.exports=e.Konva,Wb.exports}var X$=Wne();const Hne=Nc(X$),Gne=qL({__proto__:null,default:Hne},[X$]);var Hw={exports:{}},fP;function Vne(){return fP||(fP=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=Yk();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=Yk();e.exports=n.Konva})(Hw,Hw.exports)),Hw.exports}var qne=Vne();const mv=Nc(qne);var JS={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QS,hP;function Kne(){return hP||(hP=1,QS=function(t){var r={},n=Wm(),s=zT(),a=Object.assign;function i(w){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+w,D=1;D<arguments.length;D++)S+="&args[]="+encodeURIComponent(arguments[D]);return"Minified React error #"+w+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),N=Symbol.iterator;function P(w){return w===null||typeof w!="object"?null:(w=N&&w[N]||w["@@iterator"],typeof w=="function"?w:null)}function M(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case d:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case T:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case x:return(w.displayName||"Context")+".Consumer";case g:return(w._context.displayName||"Context")+".Provider";case y:var S=w.render;return w=w.displayName,w||(w=S.displayName||S.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case k:return S=w.displayName||null,S!==null?S:M(w.type)||"Memo";case b:S=w._payload,w=w._init;try{return M(w(S))}catch{}}return null}function j(w){var S=w.type;switch(w.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=S.render,w=w.displayName||w.name||"",S.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(S);case 8:return S===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function A(w){var S=w,D=w;if(w.alternate)for(;S.return;)S=S.return;else{w=S;do S=w,(S.flags&4098)!==0&&(D=S.return),w=S.return;while(w)}return S.tag===3?D:null}function F(w){if(A(w)!==w)throw Error(i(188))}function L(w){var S=w.alternate;if(!S){if(S=A(w),S===null)throw Error(i(188));return S!==w?null:w}for(var D=w,U=S;;){var X=D.return;if(X===null)break;var oe=X.alternate;if(oe===null){if(U=X.return,U!==null){D=U;continue}break}if(X.child===oe.child){for(oe=X.child;oe;){if(oe===D)return F(X),w;if(oe===U)return F(X),S;oe=oe.sibling}throw Error(i(188))}if(D.return!==U.return)D=X,U=oe;else{for(var Te=!1,et=X.child;et;){if(et===D){Te=!0,D=X,U=oe;break}if(et===U){Te=!0,U=X,D=oe;break}et=et.sibling}if(!Te){for(et=oe.child;et;){if(et===D){Te=!0,D=oe,U=X;break}if(et===U){Te=!0,U=oe,D=X;break}et=et.sibling}if(!Te)throw Error(i(189))}}if(D.alternate!==U)throw Error(i(190))}if(D.tag!==3)throw Error(i(188));return D.stateNode.current===D?w:S}function V(w){return w=L(w),w!==null?J(w):null}function J(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var S=J(w);if(S!==null)return S;w=w.sibling}return null}function ne(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var S=ne(w);if(S!==null)return S}w=w.sibling}return null}var ee=Array.isArray,ie=t.getPublicInstance,B=t.getRootHostContext,Y=t.getChildHostContext,I=t.prepareForCommit,H=t.resetAfterCommit,W=t.createInstance,R=t.appendInitialChild,z=t.finalizeInitialChildren,G=t.prepareUpdate,Q=t.shouldSetTextContent,re=t.createTextInstance,q=t.scheduleTimeout,se=t.cancelTimeout,ce=t.noTimeout,pe=t.isPrimaryRenderer,ke=t.supportsMutation,le=t.supportsPersistence,ye=t.supportsHydration,je=t.getInstanceFromNode,Ne=t.preparePortalMount,We=t.getCurrentEventPriority,$e=t.detachDeletedInstance,Nt=t.supportsMicrotasks,He=t.scheduleMicrotask,Et=t.supportsTestSelectors,Rt=t.findFiberRoot,Mt=t.getBoundingRect,ur=t.getTextContent,wr=t.isHiddenSubtree,dr=t.matchAccessibilityRole,wt=t.setFocusIfFocusable,Ke=t.setupIntersectionObserver,it=t.appendChild,vt=t.appendChildToContainer,st=t.commitTextUpdate,qe=t.commitMount,ot=t.commitUpdate,kt=t.insertBefore,Ut=t.insertInContainerBefore,Qt=t.removeChild,Gt=t.removeChildFromContainer,Zt=t.resetTextContent,ir=t.hideInstance,kr=t.hideTextInstance,ve=t.unhideInstance,Pe=t.unhideTextInstance,Me=t.clearContainer,ze=t.cloneInstance,At=t.createContainerChildSet,Kt=t.appendChildToContainerChildSet,hr=t.finalizeContainerChildren,Ye=t.replaceContainerChildren,ft=t.cloneHiddenInstance,lt=t.cloneHiddenTextInstance,Wt=t.canHydrateInstance,Fe=t.canHydrateTextInstance,xt=t.canHydrateSuspenseInstance,yt=t.isSuspenseInstancePending,zt=t.isSuspenseInstanceFallback,or=t.getSuspenseInstanceFallbackErrorDetails,de=t.registerSuspenseInstanceRetry,_e=t.getNextHydratableSibling,ge=t.getFirstHydratableChild,be=t.getFirstHydratableChildWithinContainer,Ce=t.getFirstHydratableChildWithinSuspenseInstance,Ee=t.hydrateInstance,rt=t.hydrateTextInstance,bt=t.hydrateSuspenseInstance,at=t.getNextHydratableInstanceAfterSuspenseInstance,ue=t.commitHydratedContainer,he=t.commitHydratedSuspenseInstance,Ae=t.clearSuspenseBoundary,Ie=t.clearSuspenseBoundaryFromContainer,Ze=t.shouldDeleteUnhydratedTailInstances,mt=t.didNotMatchHydratedContainerTextInstance,Tt=t.didNotMatchHydratedTextInstance,lr;function Ft(w){if(lr===void 0)try{throw Error()}catch(D){var S=D.stack.trim().match(/\n( *(at )?)/);lr=S&&S[1]||""}return`
`+lr+w}var Ct=!1;function fr(w,S){if(!w||Ct)return"";Ct=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(ar){var U=ar}Reflect.construct(w,[],S)}else{try{S.call()}catch(ar){U=ar}w.call(S.prototype)}else{try{throw Error()}catch(ar){U=ar}w()}}catch(ar){if(ar&&U&&typeof ar.stack=="string"){for(var X=ar.stack.split(`
`),oe=U.stack.split(`
`),Te=X.length-1,et=oe.length-1;1<=Te&&0<=et&&X[Te]!==oe[et];)et--;for(;1<=Te&&0<=et;Te--,et--)if(X[Te]!==oe[et]){if(Te!==1||et!==1)do if(Te--,et--,0>et||X[Te]!==oe[et]){var St=`
`+X[Te].replace(" at new "," at ");return w.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",w.displayName)),St}while(1<=Te&&0<=et);break}}}finally{Ct=!1,Error.prepareStackTrace=D}return(w=w?w.displayName||w.name:"")?Ft(w):""}var Er=Object.prototype.hasOwnProperty,Fr=[],on=-1;function ln(w){return{current:w}}function Yr(w){0>on||(w.current=Fr[on],Fr[on]=null,on--)}function Pr(w,S){on++,Fr[on]=w.current,w.current=S}var as={},Kr=ln(as),Tn=ln(!1),Ds=as;function oi(w,S){var D=w.type.contextTypes;if(!D)return as;var U=w.stateNode;if(U&&U.__reactInternalMemoizedUnmaskedChildContext===S)return U.__reactInternalMemoizedMaskedChildContext;var X={},oe;for(oe in D)X[oe]=S[oe];return U&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=S,w.__reactInternalMemoizedMaskedChildContext=X),X}function Kn(w){return w=w.childContextTypes,w!=null}function Se(){Yr(Tn),Yr(Kr)}function Pt(w,S,D){if(Kr.current!==as)throw Error(i(168));Pr(Kr,S),Pr(Tn,D)}function Rr(w,S,D){var U=w.stateNode;if(S=S.childContextTypes,typeof U.getChildContext!="function")return D;U=U.getChildContext();for(var X in U)if(!(X in S))throw Error(i(108,j(w)||"Unknown",X));return a({},D,U)}function Xr(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||as,Ds=Kr.current,Pr(Kr,w),Pr(Tn,Tn.current),!0}function Hn(w,S,D){var U=w.stateNode;if(!U)throw Error(i(169));D?(w=Rr(w,S,Ds),U.__reactInternalMemoizedMergedChildContext=w,Yr(Tn),Yr(Kr),Pr(Kr,w)):Yr(Tn),Pr(Tn,D)}var Nn=Math.clz32?Math.clz32:li,is=Math.log,Hs=Math.LN2;function li(w){return w>>>=0,w===0?32:31-(is(w)/Hs|0)|0}var cn=64,gl=4194304;function Le(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function Dt(w,S){var D=w.pendingLanes;if(D===0)return 0;var U=0,X=w.suspendedLanes,oe=w.pingedLanes,Te=D&268435455;if(Te!==0){var et=Te&~X;et!==0?U=Le(et):(oe&=Te,oe!==0&&(U=Le(oe)))}else Te=D&~X,Te!==0?U=Le(Te):oe!==0&&(U=Le(oe));if(U===0)return 0;if(S!==0&&S!==U&&(S&X)===0&&(X=U&-U,oe=S&-S,X>=oe||X===16&&(oe&4194240)!==0))return S;if((U&4)!==0&&(U|=D&16),S=w.entangledLanes,S!==0)for(w=w.entanglements,S&=U;0<S;)D=31-Nn(S),X=1<<D,U|=w[D],S&=~X;return U}function De(w,S){switch(w){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(w,S){for(var D=w.suspendedLanes,U=w.pingedLanes,X=w.expirationTimes,oe=w.pendingLanes;0<oe;){var Te=31-Nn(oe),et=1<<Te,St=X[Te];St===-1?((et&D)===0||(et&U)!==0)&&(X[Te]=De(et,S)):St<=S&&(w.expiredLanes|=et),oe&=~et}}function $t(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function gt(){var w=cn;return cn<<=1,(cn&4194240)===0&&(cn=64),w}function br(w){for(var S=[],D=0;31>D;D++)S.push(w);return S}function jt(w,S,D){w.pendingLanes|=S,S!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,S=31-Nn(S),w[S]=D}function Ur(w,S){var D=w.pendingLanes&~S;w.pendingLanes=S,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=S,w.mutableReadLanes&=S,w.entangledLanes&=S,S=w.entanglements;var U=w.eventTimes;for(w=w.expirationTimes;0<D;){var X=31-Nn(D),oe=1<<X;S[X]=0,U[X]=-1,w[X]=-1,D&=~oe}}function Pn(w,S){var D=w.entangledLanes|=S;for(w=w.entanglements;D;){var U=31-Nn(D),X=1<<U;X&S|w[U]&S&&(w[U]|=S),D&=~X}}var Ue=0;function pr(w){return w&=-w,1<w?4<w?(w&268435455)!==0?16:536870912:4:1}var sr=s.unstable_scheduleCallback,fs=s.unstable_cancelCallback,gn=s.unstable_shouldYield,nn=s.unstable_requestPaint,pn=s.unstable_now,bn=s.unstable_ImmediatePriority,Hl=s.unstable_UserBlockingPriority,Ni=s.unstable_NormalPriority,lh=s.unstable_IdlePriority,fu=null,Zi=null;function A0(w){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(fu,w,void 0,(w.current.flags&128)===128)}catch{}}function ag(w,S){return w===S&&(w!==0||1/w===1/S)||w!==w&&S!==S}var pl=typeof Object.is=="function"?Object.is:ag,Fc=null,j0=!1,P0=!1;function ig(w){Fc===null?Fc=[w]:Fc.push(w)}function W2(w){j0=!0,ig(w)}function Ha(){if(!P0&&Fc!==null){P0=!0;var w=0,S=Ue;try{var D=Fc;for(Ue=1;w<D.length;w++){var U=D[w];do U=U(!0);while(U!==null)}Fc=null,j0=!1}catch(X){throw Fc!==null&&(Fc=Fc.slice(w+1)),sr(bn,Ha),X}finally{Ue=S,P0=!1}}return null}var hu=[],Dc=0,ch=null,od=0,Ai=[],bo=0,ga=null,eo=1,xl="";function yl(w,S){hu[Dc++]=od,hu[Dc++]=ch,ch=w,od=S}function H2(w,S,D){Ai[bo++]=eo,Ai[bo++]=xl,Ai[bo++]=ga,ga=w;var U=eo;w=xl;var X=32-Nn(U)-1;U&=~(1<<X),D+=1;var oe=32-Nn(S)+X;if(30<oe){var Te=X-X%5;oe=(U&(1<<Te)-1).toString(32),U>>=Te,X-=Te,eo=1<<32-Nn(S)+X|D<<X|U,xl=oe+w}else eo=1<<oe|D<<X|U,xl=w}function uh(w){w.return!==null&&(yl(w,1),H2(w,1,0))}function dh(w){for(;w===ch;)ch=hu[--Dc],hu[Dc]=null,od=hu[--Dc],hu[Dc]=null;for(;w===ga;)ga=Ai[--bo],Ai[bo]=null,xl=Ai[--bo],Ai[bo]=null,eo=Ai[--bo],Ai[bo]=null}var Ga=null,ji=null,hs=!1,fh=!1,vl=null;function G2(w,S){var D=Po(5,null,null,0);D.elementType="DELETED",D.stateNode=S,D.return=w,S=w.deletions,S===null?(w.deletions=[D],w.flags|=16):S.push(D)}function og(w,S){switch(w.tag){case 5:return S=Wt(S,w.type,w.pendingProps),S!==null?(w.stateNode=S,Ga=w,ji=ge(S),!0):!1;case 6:return S=Fe(S,w.pendingProps),S!==null?(w.stateNode=S,Ga=w,ji=null,!0):!1;case 13:if(S=xt(S),S!==null){var D=ga!==null?{id:eo,overflow:xl}:null;return w.memoizedState={dehydrated:S,treeContext:D,retryLane:1073741824},D=Po(18,null,null,0),D.stateNode=S,D.return=w,w.child=D,Ga=w,ji=null,!0}return!1;default:return!1}}function O1(w){return(w.mode&1)!==0&&(w.flags&128)===0}function R1(w){if(hs){var S=ji;if(S){var D=S;if(!og(w,S)){if(O1(w))throw Error(i(418));S=_e(D);var U=Ga;S&&og(w,S)?G2(U,D):(w.flags=w.flags&-4097|2,hs=!1,Ga=w)}}else{if(O1(w))throw Error(i(418));w.flags=w.flags&-4097|2,hs=!1,Ga=w}}}function V2(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;Ga=w}function lg(w){if(!ye||w!==Ga)return!1;if(!hs)return V2(w),hs=!0,!1;if(w.tag!==3&&(w.tag!==5||Ze(w.type)&&!Q(w.type,w.memoizedProps))){var S=ji;if(S){if(O1(w))throw q2(),Error(i(418));for(;S;)G2(w,S),S=_e(S)}}if(V2(w),w.tag===13){if(!ye)throw Error(i(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));ji=at(w)}else ji=Ga?_e(w.stateNode):null;return!0}function q2(){for(var w=ji;w;)w=_e(w)}function ld(){ye&&(ji=Ga=null,fh=hs=!1)}function I1(w){vl===null?vl=[w]:vl.push(w)}var V3=o.ReactCurrentBatchConfig;function cg(w,S){if(pl(w,S))return!0;if(typeof w!="object"||w===null||typeof S!="object"||S===null)return!1;var D=Object.keys(w),U=Object.keys(S);if(D.length!==U.length)return!1;for(U=0;U<D.length;U++){var X=D[U];if(!Er.call(S,X)||!pl(w[X],S[X]))return!1}return!0}function q3(w){switch(w.tag){case 5:return Ft(w.type);case 16:return Ft("Lazy");case 13:return Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 2:case 15:return w=fr(w.type,!1),w;case 11:return w=fr(w.type.render,!1),w;case 1:return w=fr(w.type,!0),w;default:return""}}function cd(w,S,D){if(w=D.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(D._owner){if(D=D._owner,D){if(D.tag!==1)throw Error(i(309));var U=D.stateNode}if(!U)throw Error(i(147,w));var X=U,oe=""+w;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===oe?S.ref:(S=function(Te){var et=X.refs;Te===null?delete et[oe]:et[oe]=Te},S._stringRef=oe,S)}if(typeof w!="string")throw Error(i(284));if(!D._owner)throw Error(i(290,w))}return w}function ug(w,S){throw w=Object.prototype.toString.call(S),Error(i(31,w==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":w))}function K2(w){var S=w._init;return S(w._payload)}function Y2(w){function S(pt,nt){if(w){var Ot=pt.deletions;Ot===null?(pt.deletions=[nt],pt.flags|=16):Ot.push(nt)}}function D(pt,nt){if(!w)return null;for(;nt!==null;)S(pt,nt),nt=nt.sibling;return null}function U(pt,nt){for(pt=new Map;nt!==null;)nt.key!==null?pt.set(nt.key,nt):pt.set(nt.index,nt),nt=nt.sibling;return pt}function X(pt,nt){return pt=Pu(pt,nt),pt.index=0,pt.sibling=null,pt}function oe(pt,nt,Ot){return pt.index=Ot,w?(Ot=pt.alternate,Ot!==null?(Ot=Ot.index,Ot<nt?(pt.flags|=2,nt):Ot):(pt.flags|=2,nt)):(pt.flags|=1048576,nt)}function Te(pt){return w&&pt.alternate===null&&(pt.flags|=2),pt}function et(pt,nt,Ot,Tr){return nt===null||nt.tag!==6?(nt=rf(Ot,pt.mode,Tr),nt.return=pt,nt):(nt=X(nt,Ot),nt.return=pt,nt)}function St(pt,nt,Ot,Tr){var $r=Ot.type;return $r===d?Mr(pt,nt,Ot.props.children,Tr,Ot.key):nt!==null&&(nt.elementType===$r||typeof $r=="object"&&$r!==null&&$r.$$typeof===b&&K2($r)===nt.type)?(Tr=X(nt,Ot.props),Tr.ref=cd(pt,nt,Ot),Tr.return=pt,Tr):(Tr=Ug(Ot.type,Ot.key,Ot.props,null,pt.mode,Tr),Tr.ref=cd(pt,nt,Ot),Tr.return=pt,Tr)}function ar(pt,nt,Ot,Tr){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==Ot.containerInfo||nt.stateNode.implementation!==Ot.implementation?(nt=Wg(Ot,pt.mode,Tr),nt.return=pt,nt):(nt=X(nt,Ot.children||[]),nt.return=pt,nt)}function Mr(pt,nt,Ot,Tr,$r){return nt===null||nt.tag!==7?(nt=Ka(Ot,pt.mode,Tr,$r),nt.return=pt,nt):(nt=X(nt,Ot),nt.return=pt,nt)}function un(pt,nt,Ot){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=rf(""+nt,pt.mode,Ot),nt.return=pt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case l:return Ot=Ug(nt.type,nt.key,nt.props,null,pt.mode,Ot),Ot.ref=cd(pt,null,nt),Ot.return=pt,Ot;case u:return nt=Wg(nt,pt.mode,Ot),nt.return=pt,nt;case b:var Tr=nt._init;return un(pt,Tr(nt._payload),Ot)}if(ee(nt)||P(nt))return nt=Ka(nt,pt.mode,Ot,null),nt.return=pt,nt;ug(pt,nt)}return null}function Sr(pt,nt,Ot,Tr){var $r=nt!==null?nt.key:null;if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number")return $r!==null?null:et(pt,nt,""+Ot,Tr);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case l:return Ot.key===$r?St(pt,nt,Ot,Tr):null;case u:return Ot.key===$r?ar(pt,nt,Ot,Tr):null;case b:return $r=Ot._init,Sr(pt,nt,$r(Ot._payload),Tr)}if(ee(Ot)||P(Ot))return $r!==null?null:Mr(pt,nt,Ot,Tr,null);ug(pt,Ot)}return null}function us(pt,nt,Ot,Tr,$r){if(typeof Tr=="string"&&Tr!==""||typeof Tr=="number")return pt=pt.get(Ot)||null,et(nt,pt,""+Tr,$r);if(typeof Tr=="object"&&Tr!==null){switch(Tr.$$typeof){case l:return pt=pt.get(Tr.key===null?Ot:Tr.key)||null,St(nt,pt,Tr,$r);case u:return pt=pt.get(Tr.key===null?Ot:Tr.key)||null,ar(nt,pt,Tr,$r);case b:var xn=Tr._init;return us(pt,nt,Ot,xn(Tr._payload),$r)}if(ee(Tr)||P(Tr))return pt=pt.get(Ot)||null,Mr(nt,pt,Tr,$r,null);ug(nt,Tr)}return null}function Vn(pt,nt,Ot,Tr){for(var $r=null,xn=null,dn=nt,Mn=nt=0,wa=null;dn!==null&&Mn<Ot.length;Mn++){dn.index>Mn?(wa=dn,dn=null):wa=dn.sibling;var An=Sr(pt,dn,Ot[Mn],Tr);if(An===null){dn===null&&(dn=wa);break}w&&dn&&An.alternate===null&&S(pt,dn),nt=oe(An,nt,Mn),xn===null?$r=An:xn.sibling=An,xn=An,dn=wa}if(Mn===Ot.length)return D(pt,dn),hs&&yl(pt,Mn),$r;if(dn===null){for(;Mn<Ot.length;Mn++)dn=un(pt,Ot[Mn],Tr),dn!==null&&(nt=oe(dn,nt,Mn),xn===null?$r=dn:xn.sibling=dn,xn=dn);return hs&&yl(pt,Mn),$r}for(dn=U(pt,dn);Mn<Ot.length;Mn++)wa=us(dn,pt,Mn,Ot[Mn],Tr),wa!==null&&(w&&wa.alternate!==null&&dn.delete(wa.key===null?Mn:wa.key),nt=oe(wa,nt,Mn),xn===null?$r=wa:xn.sibling=wa,xn=wa);return w&&dn.forEach(function(mi){return S(pt,mi)}),hs&&yl(pt,Mn),$r}function Ri(pt,nt,Ot,Tr){var $r=P(Ot);if(typeof $r!="function")throw Error(i(150));if(Ot=$r.call(Ot),Ot==null)throw Error(i(151));for(var xn=$r=null,dn=nt,Mn=nt=0,wa=null,An=Ot.next();dn!==null&&!An.done;Mn++,An=Ot.next()){dn.index>Mn?(wa=dn,dn=null):wa=dn.sibling;var mi=Sr(pt,dn,An.value,Tr);if(mi===null){dn===null&&(dn=wa);break}w&&dn&&mi.alternate===null&&S(pt,dn),nt=oe(mi,nt,Mn),xn===null?$r=mi:xn.sibling=mi,xn=mi,dn=wa}if(An.done)return D(pt,dn),hs&&yl(pt,Mn),$r;if(dn===null){for(;!An.done;Mn++,An=Ot.next())An=un(pt,An.value,Tr),An!==null&&(nt=oe(An,nt,Mn),xn===null?$r=An:xn.sibling=An,xn=An);return hs&&yl(pt,Mn),$r}for(dn=U(pt,dn);!An.done;Mn++,An=Ot.next())An=us(dn,pt,Mn,An.value,Tr),An!==null&&(w&&An.alternate!==null&&dn.delete(An.key===null?Mn:An.key),nt=oe(An,nt,Mn),xn===null?$r=An:xn.sibling=An,xn=An);return w&&dn.forEach(function(Q3){return S(pt,Q3)}),hs&&yl(pt,Mn),$r}function Zl(pt,nt,Ot,Tr){if(typeof Ot=="object"&&Ot!==null&&Ot.type===d&&Ot.key===null&&(Ot=Ot.props.children),typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case l:e:{for(var $r=Ot.key,xn=nt;xn!==null;){if(xn.key===$r){if($r=Ot.type,$r===d){if(xn.tag===7){D(pt,xn.sibling),nt=X(xn,Ot.props.children),nt.return=pt,pt=nt;break e}}else if(xn.elementType===$r||typeof $r=="object"&&$r!==null&&$r.$$typeof===b&&K2($r)===xn.type){D(pt,xn.sibling),nt=X(xn,Ot.props),nt.ref=cd(pt,xn,Ot),nt.return=pt,pt=nt;break e}D(pt,xn);break}else S(pt,xn);xn=xn.sibling}Ot.type===d?(nt=Ka(Ot.props.children,pt.mode,Tr,Ot.key),nt.return=pt,pt=nt):(Tr=Ug(Ot.type,Ot.key,Ot.props,null,pt.mode,Tr),Tr.ref=cd(pt,nt,Ot),Tr.return=pt,pt=Tr)}return Te(pt);case u:e:{for(xn=Ot.key;nt!==null;){if(nt.key===xn)if(nt.tag===4&&nt.stateNode.containerInfo===Ot.containerInfo&&nt.stateNode.implementation===Ot.implementation){D(pt,nt.sibling),nt=X(nt,Ot.children||[]),nt.return=pt,pt=nt;break e}else{D(pt,nt);break}else S(pt,nt);nt=nt.sibling}nt=Wg(Ot,pt.mode,Tr),nt.return=pt,pt=nt}return Te(pt);case b:return xn=Ot._init,Zl(pt,nt,xn(Ot._payload),Tr)}if(ee(Ot))return Vn(pt,nt,Ot,Tr);if(P(Ot))return Ri(pt,nt,Ot,Tr);ug(pt,Ot)}return typeof Ot=="string"&&Ot!==""||typeof Ot=="number"?(Ot=""+Ot,nt!==null&&nt.tag===6?(D(pt,nt.sibling),nt=X(nt,Ot),nt.return=pt,pt=nt):(D(pt,nt),nt=rf(Ot,pt.mode,Tr),nt.return=pt,pt=nt),Te(pt)):D(pt,nt)}return Zl}var ud=Y2(!0),X2=Y2(!1),dg=ln(null),fg=null,M0=null,L1=null;function B1(){L1=M0=fg=null}function J2(w,S,D){pe?(Pr(dg,S._currentValue),S._currentValue=D):(Pr(dg,S._currentValue2),S._currentValue2=D)}function hh(w){var S=dg.current;Yr(dg),pe?w._currentValue=S:w._currentValue2=S}function dd(w,S,D){for(;w!==null;){var U=w.alternate;if((w.childLanes&S)!==S?(w.childLanes|=S,U!==null&&(U.childLanes|=S)):U!==null&&(U.childLanes&S)!==S&&(U.childLanes|=S),w===D)break;w=w.return}}function F0(w,S){fg=w,L1=M0=null,w=w.dependencies,w!==null&&w.firstContext!==null&&((w.lanes&S)!==0&&(xa=!0),w.firstContext=null)}function _o(w){var S=pe?w._currentValue:w._currentValue2;if(L1!==w)if(w={context:w,memoizedValue:S,next:null},M0===null){if(fg===null)throw Error(i(308));M0=w,fg.dependencies={lanes:0,firstContext:w}}else M0=M0.next=w;return S}var mu=null;function hg(w){mu===null?mu=[w]:mu.push(w)}function $1(w,S,D,U){var X=S.interleaved;return X===null?(D.next=D,hg(S)):(D.next=X.next,X.next=D),S.interleaved=D,wl(w,U)}function wl(w,S){w.lanes|=S;var D=w.alternate;for(D!==null&&(D.lanes|=S),D=w,w=w.return;w!==null;)w.childLanes|=S,D=w.alternate,D!==null&&(D.childLanes|=S),D=w,w=w.return;return D.tag===3?D.stateNode:null}var So=!1;function z1(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q2(w,S){w=w.updateQueue,S.updateQueue===w&&(S.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function Oc(w,S){return{eventTime:w,lane:S,tag:0,payload:null,callback:null,next:null}}function Rc(w,S,D){var U=w.updateQueue;if(U===null)return null;if(U=U.shared,(hn&2)!==0){var X=U.pending;return X===null?S.next=S:(S.next=X.next,X.next=S),U.pending=S,wl(w,D)}return X=U.interleaved,X===null?(S.next=S,hg(U)):(S.next=X.next,X.next=S),U.interleaved=S,wl(w,D)}function mh(w,S,D){if(S=S.updateQueue,S!==null&&(S=S.shared,(D&4194240)!==0)){var U=S.lanes;U&=w.pendingLanes,D|=U,S.lanes=D,Pn(w,D)}}function D0(w,S){var D=w.updateQueue,U=w.alternate;if(U!==null&&(U=U.updateQueue,D===U)){var X=null,oe=null;if(D=D.firstBaseUpdate,D!==null){do{var Te={eventTime:D.eventTime,lane:D.lane,tag:D.tag,payload:D.payload,callback:D.callback,next:null};oe===null?X=oe=Te:oe=oe.next=Te,D=D.next}while(D!==null);oe===null?X=oe=S:oe=oe.next=S}else X=oe=S;D={baseState:U.baseState,firstBaseUpdate:X,lastBaseUpdate:oe,shared:U.shared,effects:U.effects},w.updateQueue=D;return}w=D.lastBaseUpdate,w===null?D.firstBaseUpdate=S:w.next=S,D.lastBaseUpdate=S}function gu(w,S,D,U){var X=w.updateQueue;So=!1;var oe=X.firstBaseUpdate,Te=X.lastBaseUpdate,et=X.shared.pending;if(et!==null){X.shared.pending=null;var St=et,ar=St.next;St.next=null,Te===null?oe=ar:Te.next=ar,Te=St;var Mr=w.alternate;Mr!==null&&(Mr=Mr.updateQueue,et=Mr.lastBaseUpdate,et!==Te&&(et===null?Mr.firstBaseUpdate=ar:et.next=ar,Mr.lastBaseUpdate=St))}if(oe!==null){var un=X.baseState;Te=0,Mr=ar=St=null,et=oe;do{var Sr=et.lane,us=et.eventTime;if((U&Sr)===Sr){Mr!==null&&(Mr=Mr.next={eventTime:us,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});e:{var Vn=w,Ri=et;switch(Sr=S,us=D,Ri.tag){case 1:if(Vn=Ri.payload,typeof Vn=="function"){un=Vn.call(us,un,Sr);break e}un=Vn;break e;case 3:Vn.flags=Vn.flags&-65537|128;case 0:if(Vn=Ri.payload,Sr=typeof Vn=="function"?Vn.call(us,un,Sr):Vn,Sr==null)break e;un=a({},un,Sr);break e;case 2:So=!0}}et.callback!==null&&et.lane!==0&&(w.flags|=64,Sr=X.effects,Sr===null?X.effects=[et]:Sr.push(et))}else us={eventTime:us,lane:Sr,tag:et.tag,payload:et.payload,callback:et.callback,next:null},Mr===null?(ar=Mr=us,St=un):Mr=Mr.next=us,Te|=Sr;if(et=et.next,et===null){if(et=X.shared.pending,et===null)break;Sr=et,et=Sr.next,Sr.next=null,X.lastBaseUpdate=Sr,X.shared.pending=null}}while(!0);if(Mr===null&&(St=un),X.baseState=St,X.firstBaseUpdate=ar,X.lastBaseUpdate=Mr,S=X.shared.interleaved,S!==null){X=S;do Te|=X.lane,X=X.next;while(X!==S)}else oe===null&&(X.shared.lanes=0);zc|=Te,w.lanes=Te,w.memoizedState=un}}function Z2(w,S,D){if(w=S.effects,S.effects=null,w!==null)for(S=0;S<w.length;S++){var U=w[S],X=U.callback;if(X!==null){if(U.callback=null,U=D,typeof X!="function")throw Error(i(191,X));X.call(U)}}}var pu={},Vo=ln(pu),O0=ln(pu),xu=ln(pu);function qo(w){if(w===pu)throw Error(i(174));return w}function mg(w,S){Pr(xu,S),Pr(O0,w),Pr(Vo,pu),w=B(S),Yr(Vo),Pr(Vo,w)}function fd(){Yr(Vo),Yr(O0),Yr(xu)}function U1(w){var S=qo(xu.current),D=qo(Vo.current);S=Y(D,w.type,S),D!==S&&(Pr(O0,w),Pr(Vo,S))}function W1(w){O0.current===w&&(Yr(Vo),Yr(O0))}var Ss=ln(0);function gg(w){for(var S=w;S!==null;){if(S.tag===13){var D=S.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||yt(D)||zt(D)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if((S.flags&128)!==0)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var H1=[];function G1(){for(var w=0;w<H1.length;w++){var S=H1[w];pe?S._workInProgressVersionPrimary=null:S._workInProgressVersionSecondary=null}H1.length=0}var to=o.ReactCurrentDispatcher,hd=o.ReactCurrentBatchConfig,yu=0,ys=null,Zs=null,pa=null,R0=!1,gh=!1,ph=0,I0=0;function ja(){throw Error(i(321))}function md(w,S){if(S===null)return!1;for(var D=0;D<S.length&&D<w.length;D++)if(!pl(w[D],S[D]))return!1;return!0}function xh(w,S,D,U,X,oe){if(yu=oe,ys=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,to.current=w===null||w.memoizedState===null?tx:rx,w=D(U,X),gh){oe=0;do{if(gh=!1,ph=0,25<=oe)throw Error(i(301));oe+=1,pa=Zs=null,S.updateQueue=null,to.current=nx,w=D(U,X)}while(gh)}if(to.current=vd,S=Zs!==null&&Zs.next!==null,yu=0,pa=Zs=ys=null,R0=!1,S)throw Error(i(300));return w}function pg(){var w=ph!==0;return ph=0,w}function ko(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pa===null?ys.memoizedState=pa=w:pa=pa.next=w,pa}function Va(){if(Zs===null){var w=ys.alternate;w=w!==null?w.memoizedState:null}else w=Zs.next;var S=pa===null?ys.memoizedState:pa.next;if(S!==null)pa=S,Zs=w;else{if(w===null)throw Error(i(310));Zs=w,w={memoizedState:Zs.memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},pa===null?ys.memoizedState=pa=w:pa=pa.next=w}return pa}function gd(w,S){return typeof S=="function"?S(w):S}function xg(w){var S=Va(),D=S.queue;if(D===null)throw Error(i(311));D.lastRenderedReducer=w;var U=Zs,X=U.baseQueue,oe=D.pending;if(oe!==null){if(X!==null){var Te=X.next;X.next=oe.next,oe.next=Te}U.baseQueue=X=oe,D.pending=null}if(X!==null){oe=X.next,U=U.baseState;var et=Te=null,St=null,ar=oe;do{var Mr=ar.lane;if((yu&Mr)===Mr)St!==null&&(St=St.next={lane:0,action:ar.action,hasEagerState:ar.hasEagerState,eagerState:ar.eagerState,next:null}),U=ar.hasEagerState?ar.eagerState:w(U,ar.action);else{var un={lane:Mr,action:ar.action,hasEagerState:ar.hasEagerState,eagerState:ar.eagerState,next:null};St===null?(et=St=un,Te=U):St=St.next=un,ys.lanes|=Mr,zc|=Mr}ar=ar.next}while(ar!==null&&ar!==oe);St===null?Te=U:St.next=et,pl(U,S.memoizedState)||(xa=!0),S.memoizedState=U,S.baseState=Te,S.baseQueue=St,D.lastRenderedState=U}if(w=D.interleaved,w!==null){X=w;do oe=X.lane,ys.lanes|=oe,zc|=oe,X=X.next;while(X!==w)}else X===null&&(D.lanes=0);return[S.memoizedState,D.dispatch]}function L0(w){var S=Va(),D=S.queue;if(D===null)throw Error(i(311));D.lastRenderedReducer=w;var U=D.dispatch,X=D.pending,oe=S.memoizedState;if(X!==null){D.pending=null;var Te=X=X.next;do oe=w(oe,Te.action),Te=Te.next;while(Te!==X);pl(oe,S.memoizedState)||(xa=!0),S.memoizedState=oe,S.baseQueue===null&&(S.baseState=oe),D.lastRenderedState=oe}return[oe,U]}function V1(){}function q1(w,S){var D=ys,U=Va(),X=S(),oe=!pl(U.memoizedState,X);if(oe&&(U.memoizedState=X,xa=!0),U=U.queue,wg(X1.bind(null,D,U,w),[w]),U.getSnapshot!==S||oe||pa!==null&&pa.memoizedState.tag&1){if(D.flags|=2048,pd(9,Y1.bind(null,D,U,X,S),void 0,null),Qn===null)throw Error(i(349));(yu&30)!==0||K1(D,S,X)}return X}function K1(w,S,D){w.flags|=16384,w={getSnapshot:S,value:D},S=ys.updateQueue,S===null?(S={lastEffect:null,stores:null},ys.updateQueue=S,S.stores=[w]):(D=S.stores,D===null?S.stores=[w]:D.push(w))}function Y1(w,S,D,U){S.value=D,S.getSnapshot=U,J1(S)&&Ic(w)}function X1(w,S,D){return D(function(){J1(S)&&Ic(w)})}function J1(w){var S=w.getSnapshot;w=w.value;try{var D=S();return!pl(w,D)}catch{return!0}}function Ic(w){var S=wl(w,1);S!==null&&fi(S,w,1,-1)}function yg(w){var S=ko();return typeof w=="function"&&(w=w()),S.memoizedState=S.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:w},S.queue=w,w=w.dispatch=K3.bind(null,ys,w),[S.memoizedState,w]}function pd(w,S,D,U){return w={tag:w,create:S,destroy:D,deps:U,next:null},S=ys.updateQueue,S===null?(S={lastEffect:null,stores:null},ys.updateQueue=S,S.lastEffect=w.next=w):(D=S.lastEffect,D===null?S.lastEffect=w.next=w:(U=D.next,D.next=w,w.next=U,S.lastEffect=w)),w}function ew(){return Va().memoizedState}function vg(w,S,D,U){var X=ko();ys.flags|=w,X.memoizedState=pd(1|S,D,void 0,U===void 0?null:U)}function vu(w,S,D,U){var X=Va();U=U===void 0?null:U;var oe=void 0;if(Zs!==null){var Te=Zs.memoizedState;if(oe=Te.destroy,U!==null&&md(U,Te.deps)){X.memoizedState=pd(S,D,oe,U);return}}ys.flags|=w,X.memoizedState=pd(1|S,D,oe,U)}function tw(w,S){return vg(8390656,8,w,S)}function wg(w,S){return vu(2048,8,w,S)}function Q1(w,S){return vu(4,2,w,S)}function os(w,S){return vu(4,4,w,S)}function bg(w,S){if(typeof S=="function")return w=w(),S(w),function(){S(null)};if(S!=null)return w=w(),S.current=w,function(){S.current=null}}function yh(w,S,D){return D=D!=null?D.concat([w]):null,vu(4,4,bg.bind(null,S,w),D)}function xd(){}function Z1(w,S){var D=Va();S=S===void 0?null:S;var U=D.memoizedState;return U!==null&&S!==null&&md(S,U[1])?U[0]:(D.memoizedState=[w,S],w)}function _g(w,S){var D=Va();S=S===void 0?null:S;var U=D.memoizedState;return U!==null&&S!==null&&md(S,U[1])?U[0]:(w=w(),D.memoizedState=[w,S],w)}function B0(w,S,D){return(yu&21)===0?(w.baseState&&(w.baseState=!1,xa=!0),w.memoizedState=D):(pl(D,S)||(D=gt(),ys.lanes|=D,zc|=D,w.baseState=!0),S)}function Sg(w,S){var D=Ue;Ue=D!==0&&4>D?D:4,w(!0);var U=hd.transition;hd.transition={};try{w(!1),S()}finally{Ue=D,hd.transition=U}}function yd(){return Va().memoizedState}function rw(w,S,D){var U=va(w);if(D={lane:U,action:D,hasEagerState:!1,eagerState:null,next:null},nw(w))ex(S,D);else if(D=$1(w,S,D,U),D!==null){var X=ms();fi(D,w,U,X),vh(D,S,U)}}function K3(w,S,D){var U=va(w),X={lane:U,action:D,hasEagerState:!1,eagerState:null,next:null};if(nw(w))ex(S,X);else{var oe=w.alternate;if(w.lanes===0&&(oe===null||oe.lanes===0)&&(oe=S.lastRenderedReducer,oe!==null))try{var Te=S.lastRenderedState,et=oe(Te,D);if(X.hasEagerState=!0,X.eagerState=et,pl(et,Te)){var St=S.interleaved;St===null?(X.next=X,hg(S)):(X.next=St.next,St.next=X),S.interleaved=X;return}}catch{}finally{}D=$1(w,S,X,U),D!==null&&(X=ms(),fi(D,w,U,X),vh(D,S,U))}}function nw(w){var S=w.alternate;return w===ys||S!==null&&S===ys}function ex(w,S){gh=R0=!0;var D=w.pending;D===null?S.next=S:(S.next=D.next,D.next=S),w.pending=S}function vh(w,S,D){if((D&4194240)!==0){var U=S.lanes;U&=w.pendingLanes,D|=U,S.lanes=D,Pn(w,D)}}var vd={readContext:_o,useCallback:ja,useContext:ja,useEffect:ja,useImperativeHandle:ja,useInsertionEffect:ja,useLayoutEffect:ja,useMemo:ja,useReducer:ja,useRef:ja,useState:ja,useDebugValue:ja,useDeferredValue:ja,useTransition:ja,useMutableSource:ja,useSyncExternalStore:ja,useId:ja,unstable_isNewReconciler:!1},tx={readContext:_o,useCallback:function(w,S){return ko().memoizedState=[w,S===void 0?null:S],w},useContext:_o,useEffect:tw,useImperativeHandle:function(w,S,D){return D=D!=null?D.concat([w]):null,vg(4194308,4,bg.bind(null,S,w),D)},useLayoutEffect:function(w,S){return vg(4194308,4,w,S)},useInsertionEffect:function(w,S){return vg(4,2,w,S)},useMemo:function(w,S){var D=ko();return S=S===void 0?null:S,w=w(),D.memoizedState=[w,S],w},useReducer:function(w,S,D){var U=ko();return S=D!==void 0?D(S):S,U.memoizedState=U.baseState=S,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:S},U.queue=w,w=w.dispatch=rw.bind(null,ys,w),[U.memoizedState,w]},useRef:function(w){var S=ko();return w={current:w},S.memoizedState=w},useState:yg,useDebugValue:xd,useDeferredValue:function(w){return ko().memoizedState=w},useTransition:function(){var w=yg(!1),S=w[0];return w=Sg.bind(null,w[1]),ko().memoizedState=w,[S,w]},useMutableSource:function(){},useSyncExternalStore:function(w,S,D){var U=ys,X=ko();if(hs){if(D===void 0)throw Error(i(407));D=D()}else{if(D=S(),Qn===null)throw Error(i(349));(yu&30)!==0||K1(U,S,D)}X.memoizedState=D;var oe={value:D,getSnapshot:S};return X.queue=oe,tw(X1.bind(null,U,oe,w),[w]),U.flags|=2048,pd(9,Y1.bind(null,U,oe,D,S),void 0,null),D},useId:function(){var w=ko(),S=Qn.identifierPrefix;if(hs){var D=xl,U=eo;D=(U&~(1<<32-Nn(U)-1)).toString(32)+D,S=":"+S+"R"+D,D=ph++,0<D&&(S+="H"+D.toString(32)),S+=":"}else D=I0++,S=":"+S+"r"+D.toString(32)+":";return w.memoizedState=S},unstable_isNewReconciler:!1},rx={readContext:_o,useCallback:Z1,useContext:_o,useEffect:wg,useImperativeHandle:yh,useInsertionEffect:Q1,useLayoutEffect:os,useMemo:_g,useReducer:xg,useRef:ew,useState:function(){return xg(gd)},useDebugValue:xd,useDeferredValue:function(w){var S=Va();return B0(S,Zs.memoizedState,w)},useTransition:function(){var w=xg(gd)[0],S=Va().memoizedState;return[w,S]},useMutableSource:V1,useSyncExternalStore:q1,useId:yd,unstable_isNewReconciler:!1},nx={readContext:_o,useCallback:Z1,useContext:_o,useEffect:wg,useImperativeHandle:yh,useInsertionEffect:Q1,useLayoutEffect:os,useMemo:_g,useReducer:L0,useRef:ew,useState:function(){return L0(gd)},useDebugValue:xd,useDeferredValue:function(w){var S=Va();return Zs===null?S.memoizedState=w:B0(S,Zs.memoizedState,w)},useTransition:function(){var w=L0(gd)[0],S=Va().memoizedState;return[w,S]},useMutableSource:V1,useSyncExternalStore:q1,useId:yd,unstable_isNewReconciler:!1};function To(w,S){if(w&&w.defaultProps){S=a({},S),w=w.defaultProps;for(var D in w)S[D]===void 0&&(S[D]=w[D]);return S}return S}function sx(w,S,D,U){S=w.memoizedState,D=D(U,S),D=D==null?S:a({},S,D),w.memoizedState=D,w.lanes===0&&(w.updateQueue.baseState=D)}var wh={isMounted:function(w){return(w=w._reactInternals)?A(w)===w:!1},enqueueSetState:function(w,S,D){w=w._reactInternals;var U=ms(),X=va(w),oe=Oc(U,X);oe.payload=S,D!=null&&(oe.callback=D),S=Rc(w,oe,X),S!==null&&(fi(S,w,X,U),mh(S,w,X))},enqueueReplaceState:function(w,S,D){w=w._reactInternals;var U=ms(),X=va(w),oe=Oc(U,X);oe.tag=1,oe.payload=S,D!=null&&(oe.callback=D),S=Rc(w,oe,X),S!==null&&(fi(S,w,X,U),mh(S,w,X))},enqueueForceUpdate:function(w,S){w=w._reactInternals;var D=ms(),U=va(w),X=Oc(D,U);X.tag=2,S!=null&&(X.callback=S),S=Rc(w,X,U),S!==null&&(fi(S,w,U,D),mh(S,w,U))}};function sw(w,S,D,U,X,oe,Te){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(U,oe,Te):S.prototype&&S.prototype.isPureReactComponent?!cg(D,U)||!cg(X,oe):!0}function aw(w,S,D){var U=!1,X=as,oe=S.contextType;return typeof oe=="object"&&oe!==null?oe=_o(oe):(X=Kn(S)?Ds:Kr.current,U=S.contextTypes,oe=(U=U!=null)?oi(w,X):as),S=new S(D,oe),w.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=wh,w.stateNode=S,S._reactInternals=w,U&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=X,w.__reactInternalMemoizedMaskedChildContext=oe),S}function kg(w,S,D,U){w=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(D,U),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(D,U),S.state!==w&&wh.enqueueReplaceState(S,S.state,null)}function Gl(w,S,D,U){var X=w.stateNode;X.props=D,X.state=w.memoizedState,X.refs={},z1(w);var oe=S.contextType;typeof oe=="object"&&oe!==null?X.context=_o(oe):(oe=Kn(S)?Ds:Kr.current,X.context=oi(w,oe)),X.state=w.memoizedState,oe=S.getDerivedStateFromProps,typeof oe=="function"&&(sx(w,S,oe,D),X.state=w.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(S=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),S!==X.state&&wh.enqueueReplaceState(X,X.state,null),gu(w,D,X,U),X.state=w.memoizedState),typeof X.componentDidMount=="function"&&(w.flags|=4194308)}function wd(w,S){try{var D="",U=S;do D+=q3(U),U=U.return;while(U);var X=D}catch(oe){X=`
Error generating stack: `+oe.message+`
`+oe.stack}return{value:w,source:S,stack:X,digest:null}}function wu(w,S,D){return{value:w,source:null,stack:D??null,digest:S??null}}function Ko(w,S){try{console.error(S.value)}catch(D){setTimeout(function(){throw D})}}var bh=typeof WeakMap=="function"?WeakMap:Map;function Vl(w,S,D){D=Oc(-1,D),D.tag=3,D.payload={element:null};var U=S.value;return D.callback=function(){Rs||(Rs=!0,ea=U),Ko(w,S)},D}function Tg(w,S,D){D=Oc(-1,D),D.tag=3;var U=w.type.getDerivedStateFromError;if(typeof U=="function"){var X=S.value;D.payload=function(){return U(X)},D.callback=function(){Ko(w,S)}}var oe=w.stateNode;return oe!==null&&typeof oe.componentDidCatch=="function"&&(D.callback=function(){Ko(w,S),typeof U!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var Te=S.stack;this.componentDidCatch(S.value,{componentStack:Te!==null?Te:""})}),D}function iw(w,S,D){var U=w.pingCache;if(U===null){U=w.pingCache=new bh;var X=new Set;U.set(S,X)}else X=U.get(S),X===void 0&&(X=new Set,U.set(S,X));X.has(D)||(X.add(D),w=mw.bind(null,w,S,D),S.then(w,w))}function ow(w){do{var S;if((S=w.tag===13)&&(S=w.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return w;w=w.return}while(w!==null);return null}function bu(w,S,D,U,X){return(w.mode&1)===0?(w===S?w.flags|=65536:(w.flags|=128,D.flags|=131072,D.flags&=-52805,D.tag===1&&(D.alternate===null?D.tag=17:(S=Oc(-1,1),S.tag=2,Rc(D,S,1))),D.lanes|=1),w):(w.flags|=65536,w.lanes=X,w)}var _h=o.ReactCurrentOwner,xa=!1;function Pa(w,S,D,U){S.child=w===null?X2(S,null,D,U):ud(S,w.child,D,U)}function Cg(w,S,D,U,X){D=D.render;var oe=S.ref;return F0(S,X),U=xh(w,S,D,U,oe,X),D=pg(),w!==null&&!xa?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~X,Bc(w,S,X)):(hs&&D&&uh(S),S.flags|=1,Pa(w,S,U,X),S.child)}function bd(w,S,D,U,X){if(w===null){var oe=D.type;return typeof oe=="function"&&!ef(oe)&&oe.defaultProps===void 0&&D.compare===null&&D.defaultProps===void 0?(S.tag=15,S.type=oe,Lc(w,S,oe,U,X)):(w=Ug(D.type,null,U,S,S.mode,X),w.ref=S.ref,w.return=S,S.child=w)}if(oe=w.child,(w.lanes&X)===0){var Te=oe.memoizedProps;if(D=D.compare,D=D!==null?D:cg,D(Te,U)&&w.ref===S.ref)return Bc(w,S,X)}return S.flags|=1,w=Pu(oe,U),w.ref=S.ref,w.return=S,S.child=w}function Lc(w,S,D,U,X){if(w!==null){var oe=w.memoizedProps;if(cg(oe,U)&&w.ref===S.ref)if(xa=!1,S.pendingProps=U=oe,(w.lanes&X)!==0)(w.flags&131072)!==0&&(xa=!0);else return S.lanes=w.lanes,Bc(w,S,X)}return ql(w,S,D,U,X)}function ls(w,S,D){var U=S.pendingProps,X=U.children,oe=w!==null?w.memoizedState:null;if(U.mode==="hidden")if((S.mode&1)===0)S.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(Eu,ya),ya|=D;else{if((D&1073741824)===0)return w=oe!==null?oe.baseLanes|D:D,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:w,cachePool:null,transitions:null},S.updateQueue=null,Pr(Eu,ya),ya|=w,null;S.memoizedState={baseLanes:0,cachePool:null,transitions:null},U=oe!==null?oe.baseLanes:D,Pr(Eu,ya),ya|=U}else oe!==null?(U=oe.baseLanes|D,S.memoizedState=null):U=D,Pr(Eu,ya),ya|=U;return Pa(w,S,X,D),S.child}function Jn(w,S){var D=S.ref;(w===null&&D!==null||w!==null&&w.ref!==D)&&(S.flags|=512,S.flags|=2097152)}function ql(w,S,D,U,X){var oe=Kn(D)?Ds:Kr.current;return oe=oi(S,oe),F0(S,X),D=xh(w,S,D,U,oe,X),U=pg(),w!==null&&!xa?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~X,Bc(w,S,X)):(hs&&U&&uh(S),S.flags|=1,Pa(w,S,D,X),S.child)}function qa(w,S,D,U,X){if(Kn(D)){var oe=!0;Xr(S)}else oe=!1;if(F0(S,X),S.stateNode===null)Sh(w,S),aw(S,D,U),Gl(S,D,U,X),U=!0;else if(w===null){var Te=S.stateNode,et=S.memoizedProps;Te.props=et;var St=Te.context,ar=D.contextType;typeof ar=="object"&&ar!==null?ar=_o(ar):(ar=Kn(D)?Ds:Kr.current,ar=oi(S,ar));var Mr=D.getDerivedStateFromProps,un=typeof Mr=="function"||typeof Te.getSnapshotBeforeUpdate=="function";un||typeof Te.UNSAFE_componentWillReceiveProps!="function"&&typeof Te.componentWillReceiveProps!="function"||(et!==U||St!==ar)&&kg(S,Te,U,ar),So=!1;var Sr=S.memoizedState;Te.state=Sr,gu(S,U,Te,X),St=S.memoizedState,et!==U||Sr!==St||Tn.current||So?(typeof Mr=="function"&&(sx(S,D,Mr,U),St=S.memoizedState),(et=So||sw(S,D,et,U,Sr,St,ar))?(un||typeof Te.UNSAFE_componentWillMount!="function"&&typeof Te.componentWillMount!="function"||(typeof Te.componentWillMount=="function"&&Te.componentWillMount(),typeof Te.UNSAFE_componentWillMount=="function"&&Te.UNSAFE_componentWillMount()),typeof Te.componentDidMount=="function"&&(S.flags|=4194308)):(typeof Te.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=U,S.memoizedState=St),Te.props=U,Te.state=St,Te.context=ar,U=et):(typeof Te.componentDidMount=="function"&&(S.flags|=4194308),U=!1)}else{Te=S.stateNode,Q2(w,S),et=S.memoizedProps,ar=S.type===S.elementType?et:To(S.type,et),Te.props=ar,un=S.pendingProps,Sr=Te.context,St=D.contextType,typeof St=="object"&&St!==null?St=_o(St):(St=Kn(D)?Ds:Kr.current,St=oi(S,St));var us=D.getDerivedStateFromProps;(Mr=typeof us=="function"||typeof Te.getSnapshotBeforeUpdate=="function")||typeof Te.UNSAFE_componentWillReceiveProps!="function"&&typeof Te.componentWillReceiveProps!="function"||(et!==un||Sr!==St)&&kg(S,Te,U,St),So=!1,Sr=S.memoizedState,Te.state=Sr,gu(S,U,Te,X);var Vn=S.memoizedState;et!==un||Sr!==Vn||Tn.current||So?(typeof us=="function"&&(sx(S,D,us,U),Vn=S.memoizedState),(ar=So||sw(S,D,ar,U,Sr,Vn,St)||!1)?(Mr||typeof Te.UNSAFE_componentWillUpdate!="function"&&typeof Te.componentWillUpdate!="function"||(typeof Te.componentWillUpdate=="function"&&Te.componentWillUpdate(U,Vn,St),typeof Te.UNSAFE_componentWillUpdate=="function"&&Te.UNSAFE_componentWillUpdate(U,Vn,St)),typeof Te.componentDidUpdate=="function"&&(S.flags|=4),typeof Te.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof Te.componentDidUpdate!="function"||et===w.memoizedProps&&Sr===w.memoizedState||(S.flags|=4),typeof Te.getSnapshotBeforeUpdate!="function"||et===w.memoizedProps&&Sr===w.memoizedState||(S.flags|=1024),S.memoizedProps=U,S.memoizedState=Vn),Te.props=U,Te.state=Vn,Te.context=St,U=ar):(typeof Te.componentDidUpdate!="function"||et===w.memoizedProps&&Sr===w.memoizedState||(S.flags|=4),typeof Te.getSnapshotBeforeUpdate!="function"||et===w.memoizedProps&&Sr===w.memoizedState||(S.flags|=1024),U=!1)}return ci(w,S,D,U,oe,X)}function ci(w,S,D,U,X,oe){Jn(w,S);var Te=(S.flags&128)!==0;if(!U&&!Te)return X&&Hn(S,D,!1),Bc(w,S,oe);U=S.stateNode,_h.current=S;var et=Te&&typeof D.getDerivedStateFromError!="function"?null:U.render();return S.flags|=1,w!==null&&Te?(S.child=ud(S,w.child,null,oe),S.child=ud(S,null,et,oe)):Pa(w,S,et,oe),S.memoizedState=U.state,X&&Hn(S,D,!0),S.child}function _u(w){var S=w.stateNode;S.pendingContext?Pt(w,S.pendingContext,S.pendingContext!==S.context):S.context&&Pt(w,S.context,!1),mg(w,S.containerInfo)}function _d(w,S,D,U,X){return ld(),I1(X),S.flags|=256,Pa(w,S,D,U),S.child}var ui={dehydrated:null,treeContext:null,retryLane:0};function $0(w){return{baseLanes:w,cachePool:null,transitions:null}}function ax(w,S,D){var U=S.pendingProps,X=Ss.current,oe=!1,Te=(S.flags&128)!==0,et;if((et=Te)||(et=w!==null&&w.memoizedState===null?!1:(X&2)!==0),et?(oe=!0,S.flags&=-129):(w===null||w.memoizedState!==null)&&(X|=1),Pr(Ss,X&1),w===null)return R1(S),w=S.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?((S.mode&1)===0?S.lanes=1:zt(w)?S.lanes=8:S.lanes=1073741824,null):(Te=U.children,w=U.fallback,oe?(U=S.mode,oe=S.child,Te={mode:"hidden",children:Te},(U&1)===0&&oe!==null?(oe.childLanes=0,oe.pendingProps=Te):oe=tf(Te,U,0,null),w=Ka(w,U,D,null),oe.return=S,w.return=S,oe.sibling=w,S.child=oe,S.child.memoizedState=$0(D),S.memoizedState=ui,w):Eg(S,Te));if(X=w.memoizedState,X!==null&&(et=X.dehydrated,et!==null))return lw(w,S,Te,U,et,X,D);if(oe){oe=U.fallback,Te=S.mode,X=w.child,et=X.sibling;var St={mode:"hidden",children:U.children};return(Te&1)===0&&S.child!==X?(U=S.child,U.childLanes=0,U.pendingProps=St,S.deletions=null):(U=Pu(X,St),U.subtreeFlags=X.subtreeFlags&14680064),et!==null?oe=Pu(et,oe):(oe=Ka(oe,Te,D,null),oe.flags|=2),oe.return=S,U.return=S,U.sibling=oe,S.child=U,U=oe,oe=S.child,Te=w.child.memoizedState,Te=Te===null?$0(D):{baseLanes:Te.baseLanes|D,cachePool:null,transitions:Te.transitions},oe.memoizedState=Te,oe.childLanes=w.childLanes&~D,S.memoizedState=ui,U}return oe=w.child,w=oe.sibling,U=Pu(oe,{mode:"visible",children:U.children}),(S.mode&1)===0&&(U.lanes=D),U.return=S,U.sibling=null,w!==null&&(D=S.deletions,D===null?(S.deletions=[w],S.flags|=16):D.push(w)),S.child=U,S.memoizedState=null,U}function Eg(w,S){return S=tf({mode:"visible",children:S},w.mode,0,null),S.return=w,w.child=S}function Sd(w,S,D,U){return U!==null&&I1(U),ud(S,w.child,null,D),w=Eg(S,S.pendingProps.children),w.flags|=2,S.memoizedState=null,w}function lw(w,S,D,U,X,oe,Te){if(D)return S.flags&256?(S.flags&=-257,U=wu(Error(i(422))),Sd(w,S,Te,U)):S.memoizedState!==null?(S.child=w.child,S.flags|=128,null):(oe=U.fallback,X=S.mode,U=tf({mode:"visible",children:U.children},X,0,null),oe=Ka(oe,X,Te,null),oe.flags|=2,U.return=S,oe.return=S,U.sibling=oe,S.child=U,(S.mode&1)!==0&&ud(S,w.child,null,Te),S.child.memoizedState=$0(Te),S.memoizedState=ui,oe);if((S.mode&1)===0)return Sd(w,S,Te,null);if(zt(X))return U=or(X).digest,oe=Error(i(419)),U=wu(oe,U,void 0),Sd(w,S,Te,U);if(D=(Te&w.childLanes)!==0,xa||D){if(U=Qn,U!==null){switch(Te&-Te){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}X=(X&(U.suspendedLanes|Te))!==0?0:X,X!==0&&X!==oe.retryLane&&(oe.retryLane=X,wl(w,X),fi(U,w,X,-1))}return Z0(),U=wu(Error(i(421))),Sd(w,S,Te,U)}return yt(X)?(S.flags|=128,S.child=w.child,S=pw.bind(null,w),de(X,S),null):(w=oe.treeContext,ye&&(ji=Ce(X),Ga=S,hs=!0,vl=null,fh=!1,w!==null&&(Ai[bo++]=eo,Ai[bo++]=xl,Ai[bo++]=ga,eo=w.id,xl=w.overflow,ga=S)),S=Eg(S,U.children),S.flags|=4096,S)}function Kl(w,S,D){w.lanes|=S;var U=w.alternate;U!==null&&(U.lanes|=S),dd(w.return,S,D)}function z0(w,S,D,U,X){var oe=w.memoizedState;oe===null?w.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:U,tail:D,tailMode:X}:(oe.isBackwards=S,oe.rendering=null,oe.renderingStartTime=0,oe.last=U,oe.tail=D,oe.tailMode=X)}function Ng(w,S,D){var U=S.pendingProps,X=U.revealOrder,oe=U.tail;if(Pa(w,S,U.children,D),U=Ss.current,(U&2)!==0)U=U&1|2,S.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=S.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&Kl(w,D,S);else if(w.tag===19)Kl(w,D,S);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===S)break e;for(;w.sibling===null;){if(w.return===null||w.return===S)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}U&=1}if(Pr(Ss,U),(S.mode&1)===0)S.memoizedState=null;else switch(X){case"forwards":for(D=S.child,X=null;D!==null;)w=D.alternate,w!==null&&gg(w)===null&&(X=D),D=D.sibling;D=X,D===null?(X=S.child,S.child=null):(X=D.sibling,D.sibling=null),z0(S,!1,X,D,oe);break;case"backwards":for(D=null,X=S.child,S.child=null;X!==null;){if(w=X.alternate,w!==null&&gg(w)===null){S.child=X;break}w=X.sibling,X.sibling=D,D=X,X=w}z0(S,!0,D,null,oe);break;case"together":z0(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function Sh(w,S){(S.mode&1)===0&&w!==null&&(w.alternate=null,S.alternate=null,S.flags|=2)}function Bc(w,S,D){if(w!==null&&(S.dependencies=w.dependencies),zc|=S.lanes,(D&S.childLanes)===0)return null;if(w!==null&&S.child!==w.child)throw Error(i(153));if(S.child!==null){for(w=S.child,D=Pu(w,w.pendingProps),S.child=D,D.return=S;w.sibling!==null;)w=w.sibling,D=D.sibling=Pu(w,w.pendingProps),D.return=S;D.sibling=null}return S.child}function Su(w,S,D){switch(S.tag){case 3:_u(S),ld();break;case 5:U1(S);break;case 1:Kn(S.type)&&Xr(S);break;case 4:mg(S,S.stateNode.containerInfo);break;case 10:J2(S,S.type._context,S.memoizedProps.value);break;case 13:var U=S.memoizedState;if(U!==null)return U.dehydrated!==null?(Pr(Ss,Ss.current&1),S.flags|=128,null):(D&S.child.childLanes)!==0?ax(w,S,D):(Pr(Ss,Ss.current&1),w=Bc(w,S,D),w!==null?w.sibling:null);Pr(Ss,Ss.current&1);break;case 19:if(U=(D&S.childLanes)!==0,(w.flags&128)!==0){if(U)return Ng(w,S,D);S.flags|=128}var X=S.memoizedState;if(X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),Pr(Ss,Ss.current),U)break;return null;case 22:case 23:return S.lanes=0,ls(w,S,D)}return Bc(w,S,D)}function Pi(w){w.flags|=4}function kd(w,S){if(w!==null&&w.child===S.child)return!0;if((S.flags&16)!==0)return!1;for(w=S.child;w!==null;){if((w.flags&12854)!==0||(w.subtreeFlags&12854)!==0)return!1;w=w.sibling}return!0}var ku,Tu,Mi,Fi;if(ke)ku=function(w,S){for(var D=S.child;D!==null;){if(D.tag===5||D.tag===6)R(w,D.stateNode);else if(D.tag!==4&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===S)break;for(;D.sibling===null;){if(D.return===null||D.return===S)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},Tu=function(){},Mi=function(w,S,D,U,X){if(w=w.memoizedProps,w!==U){var oe=S.stateNode,Te=qo(Vo.current);D=G(oe,D,w,U,X,Te),(S.updateQueue=D)&&Pi(S)}},Fi=function(w,S,D,U){D!==U&&Pi(S)};else if(le){ku=function(w,S,D,U){for(var X=S.child;X!==null;){if(X.tag===5){var oe=X.stateNode;D&&U&&(oe=ft(oe,X.type,X.memoizedProps,X)),R(w,oe)}else if(X.tag===6)oe=X.stateNode,D&&U&&(oe=lt(oe,X.memoizedProps,X)),R(w,oe);else if(X.tag!==4){if(X.tag===22&&X.memoizedState!==null)oe=X.child,oe!==null&&(oe.return=X),ku(w,X,!0,!0);else if(X.child!==null){X.child.return=X,X=X.child;continue}}if(X===S)break;for(;X.sibling===null;){if(X.return===null||X.return===S)return;X=X.return}X.sibling.return=X.return,X=X.sibling}};var Cu=function(w,S,D,U){for(var X=S.child;X!==null;){if(X.tag===5){var oe=X.stateNode;D&&U&&(oe=ft(oe,X.type,X.memoizedProps,X)),Kt(w,oe)}else if(X.tag===6)oe=X.stateNode,D&&U&&(oe=lt(oe,X.memoizedProps,X)),Kt(w,oe);else if(X.tag!==4){if(X.tag===22&&X.memoizedState!==null)oe=X.child,oe!==null&&(oe.return=X),Cu(w,X,!0,!0);else if(X.child!==null){X.child.return=X,X=X.child;continue}}if(X===S)break;for(;X.sibling===null;){if(X.return===null||X.return===S)return;X=X.return}X.sibling.return=X.return,X=X.sibling}};Tu=function(w,S){var D=S.stateNode;if(!kd(w,S)){w=D.containerInfo;var U=At(w);Cu(U,S,!1,!1),D.pendingChildren=U,Pi(S),hr(w,U)}},Mi=function(w,S,D,U,X){var oe=w.stateNode,Te=w.memoizedProps;if((w=kd(w,S))&&Te===U)S.stateNode=oe;else{var et=S.stateNode,St=qo(Vo.current),ar=null;Te!==U&&(ar=G(et,D,Te,U,X,St)),w&&ar===null?S.stateNode=oe:(oe=ze(oe,ar,D,Te,U,S,w,et),z(oe,D,U,X,St)&&Pi(S),S.stateNode=oe,w?Pi(S):ku(oe,S,!1,!1))}},Fi=function(w,S,D,U){D!==U?(w=qo(xu.current),D=qo(Vo.current),S.stateNode=re(U,w,D,S),Pi(S)):S.stateNode=w.stateNode}}else Tu=function(){},Mi=function(){},Fi=function(){};function Co(w,S){if(!hs)switch(w.tailMode){case"hidden":S=w.tail;for(var D=null;S!==null;)S.alternate!==null&&(D=S),S=S.sibling;D===null?w.tail=null:D.sibling=null;break;case"collapsed":D=w.tail;for(var U=null;D!==null;)D.alternate!==null&&(U=D),D=D.sibling;U===null?S||w.tail===null?w.tail=null:w.tail.sibling=null:U.sibling=null}}function vs(w){var S=w.alternate!==null&&w.alternate.child===w.child,D=0,U=0;if(S)for(var X=w.child;X!==null;)D|=X.lanes|X.childLanes,U|=X.subtreeFlags&14680064,U|=X.flags&14680064,X.return=w,X=X.sibling;else for(X=w.child;X!==null;)D|=X.lanes|X.childLanes,U|=X.subtreeFlags,U|=X.flags,X.return=w,X=X.sibling;return w.subtreeFlags|=U,w.childLanes=D,S}function Td(w,S,D){var U=S.pendingProps;switch(dh(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(S),null;case 1:return Kn(S.type)&&Se(),vs(S),null;case 3:return D=S.stateNode,fd(),Yr(Tn),Yr(Kr),G1(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(w===null||w.child===null)&&(lg(S)?Pi(S):w===null||w.memoizedState.isDehydrated&&(S.flags&256)===0||(S.flags|=1024,vl!==null&&($g(vl),vl=null))),Tu(w,S),vs(S),null;case 5:W1(S),D=qo(xu.current);var X=S.type;if(w!==null&&S.stateNode!=null)Mi(w,S,X,U,D),w.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!U){if(S.stateNode===null)throw Error(i(166));return vs(S),null}if(w=qo(Vo.current),lg(S)){if(!ye)throw Error(i(175));w=Ee(S.stateNode,S.type,S.memoizedProps,D,w,S,!fh),S.updateQueue=w,w!==null&&Pi(S)}else{var oe=W(X,U,D,w,S);ku(oe,S,!1,!1),S.stateNode=oe,z(oe,X,U,D,w)&&Pi(S)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return vs(S),null;case 6:if(w&&S.stateNode!=null)Fi(w,S,w.memoizedProps,U);else{if(typeof U!="string"&&S.stateNode===null)throw Error(i(166));if(w=qo(xu.current),D=qo(Vo.current),lg(S)){if(!ye)throw Error(i(176));if(w=S.stateNode,D=S.memoizedProps,(U=rt(w,D,S,!fh))&&(X=Ga,X!==null))switch(X.tag){case 3:mt(X.stateNode.containerInfo,w,D,(X.mode&1)!==0);break;case 5:Tt(X.type,X.memoizedProps,X.stateNode,w,D,(X.mode&1)!==0)}U&&Pi(S)}else S.stateNode=re(U,w,D,S)}return vs(S),null;case 13:if(Yr(Ss),U=S.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(hs&&ji!==null&&(S.mode&1)!==0&&(S.flags&128)===0)q2(),ld(),S.flags|=98560,X=!1;else if(X=lg(S),U!==null&&U.dehydrated!==null){if(w===null){if(!X)throw Error(i(318));if(!ye)throw Error(i(344));if(X=S.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(i(317));bt(X,S)}else ld(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;vs(S),X=!1}else vl!==null&&($g(vl),vl=null),X=!0;if(!X)return S.flags&65536?S:null}return(S.flags&128)!==0?(S.lanes=D,S):(D=U!==null,D!==(w!==null&&w.memoizedState!==null)&&D&&(S.child.flags|=8192,(S.mode&1)!==0&&(w===null||(Ss.current&1)!==0?bs===0&&(bs=3):Z0())),S.updateQueue!==null&&(S.flags|=4),vs(S),null);case 4:return fd(),Tu(w,S),w===null&&Ne(S.stateNode.containerInfo),vs(S),null;case 10:return hh(S.type._context),vs(S),null;case 17:return Kn(S.type)&&Se(),vs(S),null;case 19:if(Yr(Ss),X=S.memoizedState,X===null)return vs(S),null;if(U=(S.flags&128)!==0,oe=X.rendering,oe===null)if(U)Co(X,!1);else{if(bs!==0||w!==null&&(w.flags&128)!==0)for(w=S.child;w!==null;){if(oe=gg(w),oe!==null){for(S.flags|=128,Co(X,!1),w=oe.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),S.subtreeFlags=0,w=D,D=S.child;D!==null;)U=D,X=w,U.flags&=14680066,oe=U.alternate,oe===null?(U.childLanes=0,U.lanes=X,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=oe.childLanes,U.lanes=oe.lanes,U.child=oe.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=oe.memoizedProps,U.memoizedState=oe.memoizedState,U.updateQueue=oe.updateQueue,U.type=oe.type,X=oe.dependencies,U.dependencies=X===null?null:{lanes:X.lanes,firstContext:X.firstContext}),D=D.sibling;return Pr(Ss,Ss.current&1|2),S.child}w=w.sibling}X.tail!==null&&pn()>jh&&(S.flags|=128,U=!0,Co(X,!1),S.lanes=4194304)}else{if(!U)if(w=gg(oe),w!==null){if(S.flags|=128,U=!0,w=w.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),Co(X,!0),X.tail===null&&X.tailMode==="hidden"&&!oe.alternate&&!hs)return vs(S),null}else 2*pn()-X.renderingStartTime>jh&&D!==1073741824&&(S.flags|=128,U=!0,Co(X,!1),S.lanes=4194304);X.isBackwards?(oe.sibling=S.child,S.child=oe):(w=X.last,w!==null?w.sibling=oe:S.child=oe,X.last=oe)}return X.tail!==null?(S=X.tail,X.rendering=S,X.tail=S.sibling,X.renderingStartTime=pn(),S.sibling=null,w=Ss.current,Pr(Ss,U?w&1|2:w&1),S):(vs(S),null);case 22:case 23:return zg(),D=S.memoizedState!==null,w!==null&&w.memoizedState!==null!==D&&(S.flags|=8192),D&&(S.mode&1)!==0?(ya&1073741824)!==0&&(vs(S),ke&&S.subtreeFlags&6&&(S.flags|=8192)):vs(S),null;case 24:return null;case 25:return null}throw Error(i(156,S.tag))}function cw(w,S){switch(dh(S),S.tag){case 1:return Kn(S.type)&&Se(),w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 3:return fd(),Yr(Tn),Yr(Kr),G1(),w=S.flags,(w&65536)!==0&&(w&128)===0?(S.flags=w&-65537|128,S):null;case 5:return W1(S),null;case 13:if(Yr(Ss),w=S.memoizedState,w!==null&&w.dehydrated!==null){if(S.alternate===null)throw Error(i(340));ld()}return w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 19:return Yr(Ss),null;case 4:return fd(),null;case 10:return hh(S.type._context),null;case 22:case 23:return zg(),null;case 24:return null;default:return null}}var U0=!1,Ma=!1,Eo=typeof WeakSet=="function"?WeakSet:Set,_r=null;function Gn(w,S){var D=w.ref;if(D!==null)if(typeof D=="function")try{D(null)}catch(U){gs(w,S,U)}else D.current=null}function No(w,S,D){try{D()}catch(U){gs(w,S,U)}}var ix=!1;function uw(w,S){for(I(w.containerInfo),_r=S;_r!==null;)if(w=_r,S=w.child,(w.subtreeFlags&1028)!==0&&S!==null)S.return=w,_r=S;else for(;_r!==null;){w=_r;try{var D=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var U=D.memoizedProps,X=D.memoizedState,oe=w.stateNode,Te=oe.getSnapshotBeforeUpdate(w.elementType===w.type?U:To(w.type,U),X);oe.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:ke&&Me(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(et){gs(w,w.return,et)}if(S=w.sibling,S!==null){S.return=w.return,_r=S;break}_r=w.return}return D=ix,ix=!1,D}function Cd(w,S,D){var U=S.updateQueue;if(U=U!==null?U.lastEffect:null,U!==null){var X=U=U.next;do{if((X.tag&w)===w){var oe=X.destroy;X.destroy=void 0,oe!==void 0&&No(S,D,oe)}X=X.next}while(X!==U)}}function W0(w,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var D=S=S.next;do{if((D.tag&w)===w){var U=D.create;D.destroy=U()}D=D.next}while(D!==S)}}function Ag(w){var S=w.ref;if(S!==null){var D=w.stateNode;switch(w.tag){case 5:w=ie(D);break;default:w=D}typeof S=="function"?S(w):S.current=w}}function kh(w){var S=w.alternate;S!==null&&(w.alternate=null,kh(S)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(S=w.stateNode,S!==null&&$e(S)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function ox(w){return w.tag===5||w.tag===3||w.tag===4}function Ed(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||ox(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function Th(w,S,D){var U=w.tag;if(U===5||U===6)w=w.stateNode,S?Ut(D,w,S):vt(D,w);else if(U!==4&&(w=w.child,w!==null))for(Th(w,S,D),w=w.sibling;w!==null;)Th(w,S,D),w=w.sibling}function lx(w,S,D){var U=w.tag;if(U===5||U===6)w=w.stateNode,S?kt(D,w,S):it(D,w);else if(U!==4&&(w=w.child,w!==null))for(lx(w,S,D),w=w.sibling;w!==null;)lx(w,S,D),w=w.sibling}var Gs=null,ro=!1;function bl(w,S,D){for(D=D.child;D!==null;)jg(w,S,D),D=D.sibling}function jg(w,S,D){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(fu,D)}catch{}switch(D.tag){case 5:Ma||Gn(D,S);case 6:if(ke){var U=Gs,X=ro;Gs=null,bl(w,S,D),Gs=U,ro=X,Gs!==null&&(ro?Gt(Gs,D.stateNode):Qt(Gs,D.stateNode))}else bl(w,S,D);break;case 18:ke&&Gs!==null&&(ro?Ie(Gs,D.stateNode):Ae(Gs,D.stateNode));break;case 4:ke?(U=Gs,X=ro,Gs=D.stateNode.containerInfo,ro=!0,bl(w,S,D),Gs=U,ro=X):(le&&(U=D.stateNode.containerInfo,X=At(U),Ye(U,X)),bl(w,S,D));break;case 0:case 11:case 14:case 15:if(!Ma&&(U=D.updateQueue,U!==null&&(U=U.lastEffect,U!==null))){X=U=U.next;do{var oe=X,Te=oe.destroy;oe=oe.tag,Te!==void 0&&((oe&2)!==0||(oe&4)!==0)&&No(D,S,Te),X=X.next}while(X!==U)}bl(w,S,D);break;case 1:if(!Ma&&(Gn(D,S),U=D.stateNode,typeof U.componentWillUnmount=="function"))try{U.props=D.memoizedProps,U.state=D.memoizedState,U.componentWillUnmount()}catch(et){gs(D,S,et)}bl(w,S,D);break;case 21:bl(w,S,D);break;case 22:D.mode&1?(Ma=(U=Ma)||D.memoizedState!==null,bl(w,S,D),Ma=U):bl(w,S,D);break;default:bl(w,S,D)}}function Nd(w){var S=w.updateQueue;if(S!==null){w.updateQueue=null;var D=w.stateNode;D===null&&(D=w.stateNode=new Eo),S.forEach(function(U){var X=Y3.bind(null,w,U);D.has(U)||(D.add(U),U.then(X,X))})}}function Yo(w,S){var D=S.deletions;if(D!==null)for(var U=0;U<D.length;U++){var X=D[U];try{var oe=w,Te=S;if(ke){var et=Te;e:for(;et!==null;){switch(et.tag){case 5:Gs=et.stateNode,ro=!1;break e;case 3:Gs=et.stateNode.containerInfo,ro=!0;break e;case 4:Gs=et.stateNode.containerInfo,ro=!0;break e}et=et.return}if(Gs===null)throw Error(i(160));jg(oe,Te,X),Gs=null,ro=!1}else jg(oe,Te,X);var St=X.alternate;St!==null&&(St.return=null),X.return=null}catch(ar){gs(X,S,ar)}}if(S.subtreeFlags&12854)for(S=S.child;S!==null;)Ch(S,w),S=S.sibling}function Ch(w,S){var D=w.alternate,U=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:if(Yo(S,w),Ao(w),U&4){try{Cd(3,w,w.return),W0(3,w)}catch(Sr){gs(w,w.return,Sr)}try{Cd(5,w,w.return)}catch(Sr){gs(w,w.return,Sr)}}break;case 1:Yo(S,w),Ao(w),U&512&&D!==null&&Gn(D,D.return);break;case 5:if(Yo(S,w),Ao(w),U&512&&D!==null&&Gn(D,D.return),ke){if(w.flags&32){var X=w.stateNode;try{Zt(X)}catch(Sr){gs(w,w.return,Sr)}}if(U&4&&(X=w.stateNode,X!=null)){var oe=w.memoizedProps;if(D=D!==null?D.memoizedProps:oe,U=w.type,S=w.updateQueue,w.updateQueue=null,S!==null)try{ot(X,S,U,D,oe,w)}catch(Sr){gs(w,w.return,Sr)}}}break;case 6:if(Yo(S,w),Ao(w),U&4&&ke){if(w.stateNode===null)throw Error(i(162));X=w.stateNode,oe=w.memoizedProps,D=D!==null?D.memoizedProps:oe;try{st(X,D,oe)}catch(Sr){gs(w,w.return,Sr)}}break;case 3:if(Yo(S,w),Ao(w),U&4){if(ke&&ye&&D!==null&&D.memoizedState.isDehydrated)try{ue(S.containerInfo)}catch(Sr){gs(w,w.return,Sr)}if(le){X=S.containerInfo,oe=S.pendingChildren;try{Ye(X,oe)}catch(Sr){gs(w,w.return,Sr)}}}break;case 4:if(Yo(S,w),Ao(w),U&4&&le){oe=w.stateNode,X=oe.containerInfo,oe=oe.pendingChildren;try{Ye(X,oe)}catch(Sr){gs(w,w.return,Sr)}}break;case 13:Yo(S,w),Ao(w),X=w.child,X.flags&8192&&(oe=X.memoizedState!==null,X.stateNode.isHidden=oe,!oe||X.alternate!==null&&X.alternate.memoizedState!==null||(Y0=pn())),U&4&&Nd(w);break;case 22:var Te=D!==null&&D.memoizedState!==null;if(w.mode&1?(Ma=(D=Ma)||Te,Yo(S,w),Ma=D):Yo(S,w),Ao(w),U&8192){if(D=w.memoizedState!==null,(w.stateNode.isHidden=D)&&!Te&&(w.mode&1)!==0)for(_r=w,U=w.child;U!==null;){for(S=_r=U;_r!==null;){Te=_r;var et=Te.child;switch(Te.tag){case 0:case 11:case 14:case 15:Cd(4,Te,Te.return);break;case 1:Gn(Te,Te.return);var St=Te.stateNode;if(typeof St.componentWillUnmount=="function"){var ar=Te,Mr=Te.return;try{var un=ar;St.props=un.memoizedProps,St.state=un.memoizedState,St.componentWillUnmount()}catch(Sr){gs(ar,Mr,Sr)}}break;case 5:Gn(Te,Te.return);break;case 22:if(Te.memoizedState!==null){Fg(S);continue}}et!==null?(et.return=Te,_r=et):Fg(S)}U=U.sibling}if(ke){e:if(U=null,ke)for(S=w;;){if(S.tag===5){if(U===null){U=S;try{X=S.stateNode,D?ir(X):ve(S.stateNode,S.memoizedProps)}catch(Sr){gs(w,w.return,Sr)}}}else if(S.tag===6){if(U===null)try{oe=S.stateNode,D?kr(oe):Pe(oe,S.memoizedProps)}catch(Sr){gs(w,w.return,Sr)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===w)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break e;for(;S.sibling===null;){if(S.return===null||S.return===w)break e;U===S&&(U=null),S=S.return}U===S&&(U=null),S.sibling.return=S.return,S=S.sibling}}}break;case 19:Yo(S,w),Ao(w),U&4&&Nd(w);break;case 21:break;default:Yo(S,w),Ao(w)}}function Ao(w){var S=w.flags;if(S&2){try{if(ke){e:{for(var D=w.return;D!==null;){if(ox(D)){var U=D;break e}D=D.return}throw Error(i(160))}switch(U.tag){case 5:var X=U.stateNode;U.flags&32&&(Zt(X),U.flags&=-33);var oe=Ed(w);lx(w,oe,X);break;case 3:case 4:var Te=U.stateNode.containerInfo,et=Ed(w);Th(w,et,Te);break;default:throw Error(i(161))}}}catch(St){gs(w,w.return,St)}w.flags&=-3}S&4096&&(w.flags&=-4097)}function H0(w,S,D){_r=w,Pg(w)}function Pg(w,S,D){for(var U=(w.mode&1)!==0;_r!==null;){var X=_r,oe=X.child;if(X.tag===22&&U){var Te=X.memoizedState!==null||U0;if(!Te){var et=X.alternate,St=et!==null&&et.memoizedState!==null||Ma;et=U0;var ar=Ma;if(U0=Te,(Ma=St)&&!ar)for(_r=X;_r!==null;)Te=_r,St=Te.child,Te.tag===22&&Te.memoizedState!==null?Dg(X):St!==null?(St.return=Te,_r=St):Dg(X);for(;oe!==null;)_r=oe,Pg(oe),oe=oe.sibling;_r=X,U0=et,Ma=ar}Mg(w)}else(X.subtreeFlags&8772)!==0&&oe!==null?(oe.return=X,_r=oe):Mg(w)}}function Mg(w){for(;_r!==null;){var S=_r;if((S.flags&8772)!==0){var D=S.alternate;try{if((S.flags&8772)!==0)switch(S.tag){case 0:case 11:case 15:Ma||W0(5,S);break;case 1:var U=S.stateNode;if(S.flags&4&&!Ma)if(D===null)U.componentDidMount();else{var X=S.elementType===S.type?D.memoizedProps:To(S.type,D.memoizedProps);U.componentDidUpdate(X,D.memoizedState,U.__reactInternalSnapshotBeforeUpdate)}var oe=S.updateQueue;oe!==null&&Z2(S,oe,U);break;case 3:var Te=S.updateQueue;if(Te!==null){if(D=null,S.child!==null)switch(S.child.tag){case 5:D=ie(S.child.stateNode);break;case 1:D=S.child.stateNode}Z2(S,Te,D)}break;case 5:var et=S.stateNode;D===null&&S.flags&4&&qe(et,S.type,S.memoizedProps,S);break;case 6:break;case 4:break;case 12:break;case 13:if(ye&&S.memoizedState===null){var St=S.alternate;if(St!==null){var ar=St.memoizedState;if(ar!==null){var Mr=ar.dehydrated;Mr!==null&&he(Mr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Ma||S.flags&512&&Ag(S)}catch(un){gs(S,S.return,un)}}if(S===w){_r=null;break}if(D=S.sibling,D!==null){D.return=S.return,_r=D;break}_r=S.return}}function Fg(w){for(;_r!==null;){var S=_r;if(S===w){_r=null;break}var D=S.sibling;if(D!==null){D.return=S.return,_r=D;break}_r=S.return}}function Dg(w){for(;_r!==null;){var S=_r;try{switch(S.tag){case 0:case 11:case 15:var D=S.return;try{W0(4,S)}catch(St){gs(S,D,St)}break;case 1:var U=S.stateNode;if(typeof U.componentDidMount=="function"){var X=S.return;try{U.componentDidMount()}catch(St){gs(S,X,St)}}var oe=S.return;try{Ag(S)}catch(St){gs(S,oe,St)}break;case 5:var Te=S.return;try{Ag(S)}catch(St){gs(S,Te,St)}}}catch(St){gs(S,S.return,St)}if(S===w){_r=null;break}var et=S.sibling;if(et!==null){et.return=S.return,_r=et;break}_r=S.return}}var $c=0,Di=1,Yl=2,G0=3,Eh=4;if(typeof Symbol=="function"&&Symbol.for){var jo=Symbol.for;$c=jo("selector.component"),Di=jo("selector.has_pseudo_class"),Yl=jo("selector.role"),G0=jo("selector.test_id"),Eh=jo("selector.text")}function Xl(w){var S=je(w);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(i(364));return S}if(w=Rt(w),w===null)throw Error(i(362));return w.stateNode.current}function Nh(w,S){switch(S.$$typeof){case $c:if(w.type===S.value)return!0;break;case Di:e:{S=S.value,w=[w,0];for(var D=0;D<w.length;){var U=w[D++],X=w[D++],oe=S[X];if(U.tag!==5||!wr(U)){for(;oe!=null&&Nh(U,oe);)X++,oe=S[X];if(X===S.length){S=!0;break e}else for(U=U.child;U!==null;)w.push(U,X),U=U.sibling}}S=!1}return S;case Yl:if(w.tag===5&&dr(w.stateNode,S.value))return!0;break;case Eh:if((w.tag===5||w.tag===6)&&(w=ur(w),w!==null&&0<=w.indexOf(S.value)))return!0;break;case G0:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Og(w){switch(w.$$typeof){case $c:return"<"+(M(w.value)||"Unknown")+">";case Di:return":has("+(Og(w)||"")+")";case Yl:return'[role="'+w.value+'"]';case Eh:return'"'+w.value+'"';case G0:return'[data-testname="'+w.value+'"]';default:throw Error(i(365))}}function Jl(w,S){var D=[];w=[w,0];for(var U=0;U<w.length;){var X=w[U++],oe=w[U++],Te=S[oe];if(X.tag!==5||!wr(X)){for(;Te!=null&&Nh(X,Te);)oe++,Te=S[oe];if(oe===S.length)D.push(X);else for(X=X.child;X!==null;)w.push(X,oe),X=X.sibling}}return D}function Ql(w,S){if(!Et)throw Error(i(363));w=Xl(w),w=Jl(w,S),S=[],w=Array.from(w);for(var D=0;D<w.length;){var U=w[D++];if(U.tag===5)wr(U)||S.push(U.stateNode);else for(U=U.child;U!==null;)w.push(U),U=U.sibling}return S}var Rg=Math.ceil,Ah=o.ReactCurrentDispatcher,V0=o.ReactCurrentOwner,Os=o.ReactCurrentBatchConfig,hn=0,Qn=null,ws=null,Vs=0,ya=0,Eu=ln(0),bs=0,q0=null,zc=0,cs=0,K0=0,Ad=null,di=null,Y0=0,jh=1/0,Oi=null;function Yn(){jh=pn()+500}var Rs=!1,ea=null,_l=null,Nu=!1,Xo=null,Ig=0,ta=0,Ph=null,X0=-1,J0=0;function ms(){return(hn&6)!==0?pn():X0!==-1?X0:X0=pn()}function va(w){return(w.mode&1)===0?1:(hn&2)!==0&&Vs!==0?Vs&-Vs:V3.transition!==null?(J0===0&&(J0=gt()),J0):(w=Ue,w!==0?w:We())}function fi(w,S,D,U){if(50<ta)throw ta=0,Ph=null,Error(i(185));jt(w,D,U),((hn&2)===0||w!==Qn)&&(w===Qn&&((hn&2)===0&&(cs|=D),bs===4&&Uc(w,Vs)),hi(w,U),D===1&&hn===0&&(S.mode&1)===0&&(Yn(),j0&&Ha()))}function hi(w,S){var D=w.callbackNode;Ve(w,S);var U=Dt(w,w===Qn?Vs:0);if(U===0)D!==null&&fs(D),w.callbackNode=null,w.callbackPriority=0;else if(S=U&-U,w.callbackPriority!==S){if(D!=null&&fs(D),S===1)w.tag===0?W2(cx.bind(null,w)):ig(cx.bind(null,w)),Nt?He(function(){(hn&6)===0&&Ha()}):sr(bn,Ha),D=null;else{switch(pr(U)){case 1:D=bn;break;case 4:D=Hl;break;case 16:D=Ni;break;case 536870912:D=lh;break;default:D=Ni}D=px(D,Lg.bind(null,w))}w.callbackPriority=S,w.callbackNode=D}}function Lg(w,S){if(X0=-1,J0=0,(hn&6)!==0)throw Error(i(327));var D=w.callbackNode;if(Wc()&&w.callbackNode!==D)return null;var U=Dt(w,w===Qn?Vs:0);if(U===0)return null;if((U&30)!==0||(U&w.expiredLanes)!==0||S)S=jd(w,U);else{S=U;var X=hn;hn|=2;var oe=dx();(Qn!==w||Vs!==S)&&(Oi=null,Yn(),Au(w,S));do try{fx();break}catch(et){Q0(w,et)}while(!0);B1(),Ah.current=oe,hn=X,ws!==null?S=0:(Qn=null,Vs=0,S=bs)}if(S!==0){if(S===2&&(X=$t(w),X!==0&&(U=X,S=Bg(w,X))),S===1)throw D=q0,Au(w,0),Uc(w,U),hi(w,pn()),D;if(S===6)Uc(w,U);else{if(X=w.current.alternate,(U&30)===0&&!dw(X)&&(S=jd(w,U),S===2&&(oe=$t(w),oe!==0&&(U=oe,S=Bg(w,oe))),S===1))throw D=q0,Au(w,0),Uc(w,U),hi(w,pn()),D;switch(w.finishedWork=X,w.finishedLanes=U,S){case 0:case 1:throw Error(i(345));case 2:ju(w,di,Oi);break;case 3:if(Uc(w,U),(U&130023424)===U&&(S=Y0+500-pn(),10<S)){if(Dt(w,0)!==0)break;if(X=w.suspendedLanes,(X&U)!==U){ms(),w.pingedLanes|=w.suspendedLanes&X;break}w.timeoutHandle=q(ju.bind(null,w,di,Oi),S);break}ju(w,di,Oi);break;case 4:if(Uc(w,U),(U&4194240)===U)break;for(S=w.eventTimes,X=-1;0<U;){var Te=31-Nn(U);oe=1<<Te,Te=S[Te],Te>X&&(X=Te),U&=~oe}if(U=X,U=pn()-U,U=(120>U?120:480>U?480:1080>U?1080:1920>U?1920:3e3>U?3e3:4320>U?4320:1960*Rg(U/1960))-U,10<U){w.timeoutHandle=q(ju.bind(null,w,di,Oi),U);break}ju(w,di,Oi);break;case 5:ju(w,di,Oi);break;default:throw Error(i(329))}}}return hi(w,pn()),w.callbackNode===D?Lg.bind(null,w):null}function Bg(w,S){var D=Ad;return w.current.memoizedState.isDehydrated&&(Au(w,S).flags|=256),w=jd(w,S),w!==2&&(S=di,di=D,S!==null&&$g(S)),w}function $g(w){di===null?di=w:di.push.apply(di,w)}function dw(w){for(var S=w;;){if(S.flags&16384){var D=S.updateQueue;if(D!==null&&(D=D.stores,D!==null))for(var U=0;U<D.length;U++){var X=D[U],oe=X.getSnapshot;X=X.value;try{if(!pl(oe(),X))return!1}catch{return!1}}}if(D=S.child,S.subtreeFlags&16384&&D!==null)D.return=S,S=D;else{if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function Uc(w,S){for(S&=~K0,S&=~cs,w.suspendedLanes|=S,w.pingedLanes&=~S,w=w.expirationTimes;0<S;){var D=31-Nn(S),U=1<<D;w[D]=-1,S&=~U}}function cx(w){if((hn&6)!==0)throw Error(i(327));Wc();var S=Dt(w,0);if((S&1)===0)return hi(w,pn()),null;var D=jd(w,S);if(w.tag!==0&&D===2){var U=$t(w);U!==0&&(S=U,D=Bg(w,U))}if(D===1)throw D=q0,Au(w,0),Uc(w,S),hi(w,pn()),D;if(D===6)throw Error(i(345));return w.finishedWork=w.current.alternate,w.finishedLanes=S,ju(w,di,Oi),hi(w,pn()),null}function ux(w){Xo!==null&&Xo.tag===0&&(hn&6)===0&&Wc();var S=hn;hn|=1;var D=Os.transition,U=Ue;try{if(Os.transition=null,Ue=1,w)return w()}finally{Ue=U,Os.transition=D,hn=S,(hn&6)===0&&Ha()}}function zg(){ya=Eu.current,Yr(Eu)}function Au(w,S){w.finishedWork=null,w.finishedLanes=0;var D=w.timeoutHandle;if(D!==ce&&(w.timeoutHandle=ce,se(D)),ws!==null)for(D=ws.return;D!==null;){var U=D;switch(dh(U),U.tag){case 1:U=U.type.childContextTypes,U!=null&&Se();break;case 3:fd(),Yr(Tn),Yr(Kr),G1();break;case 5:W1(U);break;case 4:fd();break;case 13:Yr(Ss);break;case 19:Yr(Ss);break;case 10:hh(U.type._context);break;case 22:case 23:zg()}D=D.return}if(Qn=w,ws=w=Pu(w.current,null),Vs=ya=S,bs=0,q0=null,K0=cs=zc=0,di=Ad=null,mu!==null){for(S=0;S<mu.length;S++)if(D=mu[S],U=D.interleaved,U!==null){D.interleaved=null;var X=U.next,oe=D.pending;if(oe!==null){var Te=oe.next;oe.next=X,U.next=Te}D.pending=U}mu=null}return w}function Q0(w,S){do{var D=ws;try{if(B1(),to.current=vd,R0){for(var U=ys.memoizedState;U!==null;){var X=U.queue;X!==null&&(X.pending=null),U=U.next}R0=!1}if(yu=0,pa=Zs=ys=null,gh=!1,ph=0,V0.current=null,D===null||D.return===null){bs=1,q0=S,ws=null;break}e:{var oe=w,Te=D.return,et=D,St=S;if(S=Vs,et.flags|=32768,St!==null&&typeof St=="object"&&typeof St.then=="function"){var ar=St,Mr=et,un=Mr.tag;if((Mr.mode&1)===0&&(un===0||un===11||un===15)){var Sr=Mr.alternate;Sr?(Mr.updateQueue=Sr.updateQueue,Mr.memoizedState=Sr.memoizedState,Mr.lanes=Sr.lanes):(Mr.updateQueue=null,Mr.memoizedState=null)}var us=ow(Te);if(us!==null){us.flags&=-257,bu(us,Te,et,oe,S),us.mode&1&&iw(oe,ar,S),S=us,St=ar;var Vn=S.updateQueue;if(Vn===null){var Ri=new Set;Ri.add(St),S.updateQueue=Ri}else Vn.add(St);break e}else{if((S&1)===0){iw(oe,ar,S),Z0();break e}St=Error(i(426))}}else if(hs&&et.mode&1){var Zl=ow(Te);if(Zl!==null){(Zl.flags&65536)===0&&(Zl.flags|=256),bu(Zl,Te,et,oe,S),I1(wd(St,et));break e}}oe=St=wd(St,et),bs!==4&&(bs=2),Ad===null?Ad=[oe]:Ad.push(oe),oe=Te;do{switch(oe.tag){case 3:oe.flags|=65536,S&=-S,oe.lanes|=S;var pt=Vl(oe,St,S);D0(oe,pt);break e;case 1:et=St;var nt=oe.type,Ot=oe.stateNode;if((oe.flags&128)===0&&(typeof nt.getDerivedStateFromError=="function"||Ot!==null&&typeof Ot.componentDidCatch=="function"&&(_l===null||!_l.has(Ot)))){oe.flags|=65536,S&=-S,oe.lanes|=S;var Tr=Tg(oe,et,S);D0(oe,Tr);break e}}oe=oe.return}while(oe!==null)}mx(D)}catch($r){S=$r,ws===D&&D!==null&&(ws=D=D.return);continue}break}while(!0)}function dx(){var w=Ah.current;return Ah.current=vd,w===null?vd:w}function Z0(){(bs===0||bs===3||bs===2)&&(bs=4),Qn===null||(zc&268435455)===0&&(cs&268435455)===0||Uc(Qn,Vs)}function jd(w,S){var D=hn;hn|=2;var U=dx();(Qn!==w||Vs!==S)&&(Oi=null,Au(w,S));do try{fw();break}catch(X){Q0(w,X)}while(!0);if(B1(),hn=D,Ah.current=U,ws!==null)throw Error(i(261));return Qn=null,Vs=0,bs}function fw(){for(;ws!==null;)hx(ws)}function fx(){for(;ws!==null&&!gn();)hx(ws)}function hx(w){var S=xw(w.alternate,w,ya);w.memoizedProps=w.pendingProps,S===null?mx(w):ws=S,V0.current=null}function mx(w){var S=w;do{var D=S.alternate;if(w=S.return,(S.flags&32768)===0){if(D=Td(D,S,ya),D!==null){ws=D;return}}else{if(D=cw(D,S),D!==null){D.flags&=32767,ws=D;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{bs=6,ws=null;return}}if(S=S.sibling,S!==null){ws=S;return}ws=S=w}while(S!==null);bs===0&&(bs=5)}function ju(w,S,D){var U=Ue,X=Os.transition;try{Os.transition=null,Ue=1,hw(w,S,D,U)}finally{Os.transition=X,Ue=U}return null}function hw(w,S,D,U){do Wc();while(Xo!==null);if((hn&6)!==0)throw Error(i(327));D=w.finishedWork;var X=w.finishedLanes;if(D===null)return null;if(w.finishedWork=null,w.finishedLanes=0,D===w.current)throw Error(i(177));w.callbackNode=null,w.callbackPriority=0;var oe=D.lanes|D.childLanes;if(Ur(w,oe),w===Qn&&(ws=Qn=null,Vs=0),(D.subtreeFlags&2064)===0&&(D.flags&2064)===0||Nu||(Nu=!0,px(Ni,function(){return Wc(),null})),oe=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||oe){oe=Os.transition,Os.transition=null;var Te=Ue;Ue=1;var et=hn;hn|=4,V0.current=null,uw(w,D),Ch(D,w),H(w.containerInfo),w.current=D,H0(D),nn(),hn=et,Ue=Te,Os.transition=oe}else w.current=D;if(Nu&&(Nu=!1,Xo=w,Ig=X),oe=w.pendingLanes,oe===0&&(_l=null),A0(D.stateNode),hi(w,pn()),S!==null)for(U=w.onRecoverableError,D=0;D<S.length;D++)X=S[D],U(X.value,{componentStack:X.stack,digest:X.digest});if(Rs)throw Rs=!1,w=ea,ea=null,w;return(Ig&1)!==0&&w.tag!==0&&Wc(),oe=w.pendingLanes,(oe&1)!==0?w===Ph?ta++:(ta=0,Ph=w):ta=0,Ha(),null}function Wc(){if(Xo!==null){var w=pr(Ig),S=Os.transition,D=Ue;try{if(Os.transition=null,Ue=16>w?16:w,Xo===null)var U=!1;else{if(w=Xo,Xo=null,Ig=0,(hn&6)!==0)throw Error(i(331));var X=hn;for(hn|=4,_r=w.current;_r!==null;){var oe=_r,Te=oe.child;if((_r.flags&16)!==0){var et=oe.deletions;if(et!==null){for(var St=0;St<et.length;St++){var ar=et[St];for(_r=ar;_r!==null;){var Mr=_r;switch(Mr.tag){case 0:case 11:case 15:Cd(8,Mr,oe)}var un=Mr.child;if(un!==null)un.return=Mr,_r=un;else for(;_r!==null;){Mr=_r;var Sr=Mr.sibling,us=Mr.return;if(kh(Mr),Mr===ar){_r=null;break}if(Sr!==null){Sr.return=us,_r=Sr;break}_r=us}}}var Vn=oe.alternate;if(Vn!==null){var Ri=Vn.child;if(Ri!==null){Vn.child=null;do{var Zl=Ri.sibling;Ri.sibling=null,Ri=Zl}while(Ri!==null)}}_r=oe}}if((oe.subtreeFlags&2064)!==0&&Te!==null)Te.return=oe,_r=Te;else e:for(;_r!==null;){if(oe=_r,(oe.flags&2048)!==0)switch(oe.tag){case 0:case 11:case 15:Cd(9,oe,oe.return)}var pt=oe.sibling;if(pt!==null){pt.return=oe.return,_r=pt;break e}_r=oe.return}}var nt=w.current;for(_r=nt;_r!==null;){Te=_r;var Ot=Te.child;if((Te.subtreeFlags&2064)!==0&&Ot!==null)Ot.return=Te,_r=Ot;else e:for(Te=nt;_r!==null;){if(et=_r,(et.flags&2048)!==0)try{switch(et.tag){case 0:case 11:case 15:W0(9,et)}}catch($r){gs(et,et.return,$r)}if(et===Te){_r=null;break e}var Tr=et.sibling;if(Tr!==null){Tr.return=et.return,_r=Tr;break e}_r=et.return}}if(hn=X,Ha(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(fu,w)}catch{}U=!0}return U}finally{Ue=D,Os.transition=S}}return!1}function gx(w,S,D){S=wd(D,S),S=Vl(w,S,1),w=Rc(w,S,1),S=ms(),w!==null&&(jt(w,1,S),hi(w,S))}function gs(w,S,D){if(w.tag===3)gx(w,w,D);else for(;S!==null;){if(S.tag===3){gx(S,w,D);break}else if(S.tag===1){var U=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(_l===null||!_l.has(U))){w=wd(D,w),w=Tg(S,w,1),S=Rc(S,w,1),w=ms(),S!==null&&(jt(S,1,w),hi(S,w));break}}S=S.return}}function mw(w,S,D){var U=w.pingCache;U!==null&&U.delete(S),S=ms(),w.pingedLanes|=w.suspendedLanes&D,Qn===w&&(Vs&D)===D&&(bs===4||bs===3&&(Vs&130023424)===Vs&&500>pn()-Y0?Au(w,0):K0|=D),hi(w,S)}function gw(w,S){S===0&&((w.mode&1)===0?S=1:(S=gl,gl<<=1,(gl&130023424)===0&&(gl=4194304)));var D=ms();w=wl(w,S),w!==null&&(jt(w,S,D),hi(w,D))}function pw(w){var S=w.memoizedState,D=0;S!==null&&(D=S.retryLane),gw(w,D)}function Y3(w,S){var D=0;switch(w.tag){case 13:var U=w.stateNode,X=w.memoizedState;X!==null&&(D=X.retryLane);break;case 19:U=w.stateNode;break;default:throw Error(i(314))}U!==null&&U.delete(S),gw(w,D)}var xw;xw=function(w,S,D){if(w!==null)if(w.memoizedProps!==S.pendingProps||Tn.current)xa=!0;else{if((w.lanes&D)===0&&(S.flags&128)===0)return xa=!1,Su(w,S,D);xa=(w.flags&131072)!==0}else xa=!1,hs&&(S.flags&1048576)!==0&&H2(S,od,S.index);switch(S.lanes=0,S.tag){case 2:var U=S.type;Sh(w,S),w=S.pendingProps;var X=oi(S,Kr.current);F0(S,D),X=xh(null,S,U,w,X,D);var oe=pg();return S.flags|=1,typeof X=="object"&&X!==null&&typeof X.render=="function"&&X.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,Kn(U)?(oe=!0,Xr(S)):oe=!1,S.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,z1(S),X.updater=wh,S.stateNode=X,X._reactInternals=S,Gl(S,U,w,D),S=ci(null,S,U,!0,oe,D)):(S.tag=0,hs&&oe&&uh(S),Pa(null,S,X,D),S=S.child),S;case 16:U=S.elementType;e:{switch(Sh(w,S),w=S.pendingProps,X=U._init,U=X(U._payload),S.type=U,X=S.tag=X3(U),w=To(U,w),X){case 0:S=ql(null,S,U,w,D);break e;case 1:S=qa(null,S,U,w,D);break e;case 11:S=Cg(null,S,U,w,D);break e;case 14:S=bd(null,S,U,To(U.type,w),D);break e}throw Error(i(306,U,""))}return S;case 0:return U=S.type,X=S.pendingProps,X=S.elementType===U?X:To(U,X),ql(w,S,U,X,D);case 1:return U=S.type,X=S.pendingProps,X=S.elementType===U?X:To(U,X),qa(w,S,U,X,D);case 3:e:{if(_u(S),w===null)throw Error(i(387));U=S.pendingProps,oe=S.memoizedState,X=oe.element,Q2(w,S),gu(S,U,null,D);var Te=S.memoizedState;if(U=Te.element,ye&&oe.isDehydrated)if(oe={element:U,isDehydrated:!1,cache:Te.cache,pendingSuspenseBoundaries:Te.pendingSuspenseBoundaries,transitions:Te.transitions},S.updateQueue.baseState=oe,S.memoizedState=oe,S.flags&256){X=wd(Error(i(423)),S),S=_d(w,S,U,D,X);break e}else if(U!==X){X=wd(Error(i(424)),S),S=_d(w,S,U,D,X);break e}else for(ye&&(ji=be(S.stateNode.containerInfo),Ga=S,hs=!0,vl=null,fh=!1),D=X2(S,null,U,D),S.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(ld(),U===X){S=Bc(w,S,D);break e}Pa(w,S,U,D)}S=S.child}return S;case 5:return U1(S),w===null&&R1(S),U=S.type,X=S.pendingProps,oe=w!==null?w.memoizedProps:null,Te=X.children,Q(U,X)?Te=null:oe!==null&&Q(U,oe)&&(S.flags|=32),Jn(w,S),Pa(w,S,Te,D),S.child;case 6:return w===null&&R1(S),null;case 13:return ax(w,S,D);case 4:return mg(S,S.stateNode.containerInfo),U=S.pendingProps,w===null?S.child=ud(S,null,U,D):Pa(w,S,U,D),S.child;case 11:return U=S.type,X=S.pendingProps,X=S.elementType===U?X:To(U,X),Cg(w,S,U,X,D);case 7:return Pa(w,S,S.pendingProps,D),S.child;case 8:return Pa(w,S,S.pendingProps.children,D),S.child;case 12:return Pa(w,S,S.pendingProps.children,D),S.child;case 10:e:{if(U=S.type._context,X=S.pendingProps,oe=S.memoizedProps,Te=X.value,J2(S,U,Te),oe!==null)if(pl(oe.value,Te)){if(oe.children===X.children&&!Tn.current){S=Bc(w,S,D);break e}}else for(oe=S.child,oe!==null&&(oe.return=S);oe!==null;){var et=oe.dependencies;if(et!==null){Te=oe.child;for(var St=et.firstContext;St!==null;){if(St.context===U){if(oe.tag===1){St=Oc(-1,D&-D),St.tag=2;var ar=oe.updateQueue;if(ar!==null){ar=ar.shared;var Mr=ar.pending;Mr===null?St.next=St:(St.next=Mr.next,Mr.next=St),ar.pending=St}}oe.lanes|=D,St=oe.alternate,St!==null&&(St.lanes|=D),dd(oe.return,D,S),et.lanes|=D;break}St=St.next}}else if(oe.tag===10)Te=oe.type===S.type?null:oe.child;else if(oe.tag===18){if(Te=oe.return,Te===null)throw Error(i(341));Te.lanes|=D,et=Te.alternate,et!==null&&(et.lanes|=D),dd(Te,D,S),Te=oe.sibling}else Te=oe.child;if(Te!==null)Te.return=oe;else for(Te=oe;Te!==null;){if(Te===S){Te=null;break}if(oe=Te.sibling,oe!==null){oe.return=Te.return,Te=oe;break}Te=Te.return}oe=Te}Pa(w,S,X.children,D),S=S.child}return S;case 9:return X=S.type,U=S.pendingProps.children,F0(S,D),X=_o(X),U=U(X),S.flags|=1,Pa(w,S,U,D),S.child;case 14:return U=S.type,X=To(U,S.pendingProps),X=To(U.type,X),bd(w,S,U,X,D);case 15:return Lc(w,S,S.type,S.pendingProps,D);case 17:return U=S.type,X=S.pendingProps,X=S.elementType===U?X:To(U,X),Sh(w,S),S.tag=1,Kn(U)?(w=!0,Xr(S)):w=!1,F0(S,D),aw(S,U,X),Gl(S,U,X,D),ci(null,S,U,!0,w,D);case 19:return Ng(w,S,D);case 22:return ls(w,S,D)}throw Error(i(156,S.tag))};function px(w,S){return sr(w,S)}function yw(w,S,D,U){this.tag=w,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(w,S,D,U){return new yw(w,S,D,U)}function ef(w){return w=w.prototype,!(!w||!w.isReactComponent)}function X3(w){if(typeof w=="function")return ef(w)?1:0;if(w!=null){if(w=w.$$typeof,w===y)return 11;if(w===k)return 14}return 2}function Pu(w,S){var D=w.alternate;return D===null?(D=Po(w.tag,S,w.key,w.mode),D.elementType=w.elementType,D.type=w.type,D.stateNode=w.stateNode,D.alternate=w,w.alternate=D):(D.pendingProps=S,D.type=w.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=w.flags&14680064,D.childLanes=w.childLanes,D.lanes=w.lanes,D.child=w.child,D.memoizedProps=w.memoizedProps,D.memoizedState=w.memoizedState,D.updateQueue=w.updateQueue,S=w.dependencies,D.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},D.sibling=w.sibling,D.index=w.index,D.ref=w.ref,D}function Ug(w,S,D,U,X,oe){var Te=2;if(U=w,typeof w=="function")ef(w)&&(Te=1);else if(typeof w=="string")Te=5;else e:switch(w){case d:return Ka(D.children,X,oe,S);case f:Te=8,X|=8;break;case h:return w=Po(12,D,S,X|2),w.elementType=h,w.lanes=oe,w;case v:return w=Po(13,D,S,X),w.elementType=v,w.lanes=oe,w;case T:return w=Po(19,D,S,X),w.elementType=T,w.lanes=oe,w;case E:return tf(D,X,oe,S);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case g:Te=10;break e;case x:Te=9;break e;case y:Te=11;break e;case k:Te=14;break e;case b:Te=16,U=null;break e}throw Error(i(130,w==null?w:typeof w,""))}return S=Po(Te,D,S,X),S.elementType=w,S.type=U,S.lanes=oe,S}function Ka(w,S,D,U){return w=Po(7,w,U,S),w.lanes=D,w}function tf(w,S,D,U){return w=Po(22,w,U,S),w.elementType=E,w.lanes=D,w.stateNode={isHidden:!1},w}function rf(w,S,D){return w=Po(6,w,null,S),w.lanes=D,w}function Wg(w,S,D){return S=Po(4,w.children!==null?w.children:[],w.key,S),S.lanes=D,S.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},S}function vw(w,S,D,U,X){this.tag=S,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=br(0),this.expirationTimes=br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=br(0),this.identifierPrefix=U,this.onRecoverableError=X,ye&&(this.mutableSourceEagerHydrationData=null)}function xx(w,S,D,U,X,oe,Te,et,St){return w=new vw(w,S,D,et,St),S===1?(S=1,oe===!0&&(S|=8)):S=0,oe=Po(3,null,null,S),w.current=oe,oe.stateNode=w,oe.memoizedState={element:U,isDehydrated:D,cache:null,transitions:null,pendingSuspenseBoundaries:null},z1(oe),w}function Hg(w){if(!w)return as;w=w._reactInternals;e:{if(A(w)!==w||w.tag!==1)throw Error(i(170));var S=w;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(Kn(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(i(171))}if(w.tag===1){var D=w.type;if(Kn(D))return Rr(w,D,S)}return S}function Pd(w){var S=w._reactInternals;if(S===void 0)throw typeof w.render=="function"?Error(i(188)):(w=Object.keys(w).join(","),Error(i(268,w)));return w=V(S),w===null?null:w.stateNode}function Gg(w,S){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var D=w.retryLane;w.retryLane=D!==0&&D<S?D:S}}function nf(w,S){Gg(w,S),(w=w.alternate)&&Gg(w,S)}function J3(w){return w=V(w),w===null?null:w.stateNode}function ww(){return null}return r.attemptContinuousHydration=function(w){if(w.tag===13){var S=wl(w,134217728);if(S!==null){var D=ms();fi(S,w,134217728,D)}nf(w,134217728)}},r.attemptDiscreteHydration=function(w){if(w.tag===13){var S=wl(w,1);if(S!==null){var D=ms();fi(S,w,1,D)}nf(w,1)}},r.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var S=va(w),D=wl(w,S);if(D!==null){var U=ms();fi(D,w,S,U)}nf(w,S)}},r.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var S=w.stateNode;if(S.current.memoizedState.isDehydrated){var D=Le(S.pendingLanes);D!==0&&(Pn(S,D|1),hi(S,pn()),(hn&6)===0&&(Yn(),Ha()))}break;case 13:ux(function(){var U=wl(w,1);if(U!==null){var X=ms();fi(U,w,1,X)}}),nf(w,1)}},r.batchedUpdates=function(w,S){var D=hn;hn|=1;try{return w(S)}finally{hn=D,hn===0&&(Yn(),j0&&Ha())}},r.createComponentSelector=function(w){return{$$typeof:$c,value:w}},r.createContainer=function(w,S,D,U,X,oe,Te){return xx(w,S,!1,null,D,U,X,oe,Te)},r.createHasPseudoClassSelector=function(w){return{$$typeof:Di,value:w}},r.createHydrationContainer=function(w,S,D,U,X,oe,Te,et,St){return w=xx(D,U,!0,w,X,oe,Te,et,St),w.context=Hg(null),D=w.current,U=ms(),X=va(D),oe=Oc(U,X),oe.callback=S??null,Rc(D,oe,X),w.current.lanes=X,jt(w,X,U),hi(w,U),w},r.createPortal=function(w,S,D){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:U==null?null:""+U,children:w,containerInfo:S,implementation:D}},r.createRoleSelector=function(w){return{$$typeof:Yl,value:w}},r.createTestNameSelector=function(w){return{$$typeof:G0,value:w}},r.createTextSelector=function(w){return{$$typeof:Eh,value:w}},r.deferredUpdates=function(w){var S=Ue,D=Os.transition;try{return Os.transition=null,Ue=16,w()}finally{Ue=S,Os.transition=D}},r.discreteUpdates=function(w,S,D,U,X){var oe=Ue,Te=Os.transition;try{return Os.transition=null,Ue=1,w(S,D,U,X)}finally{Ue=oe,Os.transition=Te,hn===0&&Yn()}},r.findAllNodes=Ql,r.findBoundingRects=function(w,S){if(!Et)throw Error(i(363));S=Ql(w,S),w=[];for(var D=0;D<S.length;D++)w.push(Mt(S[D]));for(S=w.length-1;0<S;S--){D=w[S];for(var U=D.x,X=U+D.width,oe=D.y,Te=oe+D.height,et=S-1;0<=et;et--)if(S!==et){var St=w[et],ar=St.x,Mr=ar+St.width,un=St.y,Sr=un+St.height;if(U>=ar&&oe>=un&&X<=Mr&&Te<=Sr){w.splice(S,1);break}else if(U!==ar||D.width!==St.width||Sr<oe||un>Te){if(!(oe!==un||D.height!==St.height||Mr<U||ar>X)){ar>U&&(St.width+=ar-U,St.x=U),Mr<X&&(St.width=X-ar),w.splice(S,1);break}}else{un>oe&&(St.height+=un-oe,St.y=oe),Sr<Te&&(St.height=Te-un),w.splice(S,1);break}}}return w},r.findHostInstance=Pd,r.findHostInstanceWithNoPortals=function(w){return w=L(w),w=w!==null?ne(w):null,w===null?null:w.stateNode},r.findHostInstanceWithWarning=function(w){return Pd(w)},r.flushControlled=function(w){var S=hn;hn|=1;var D=Os.transition,U=Ue;try{Os.transition=null,Ue=1,w()}finally{Ue=U,Os.transition=D,hn=S,hn===0&&(Yn(),Ha())}},r.flushPassiveEffects=Wc,r.flushSync=ux,r.focusWithin=function(w,S){if(!Et)throw Error(i(363));for(w=Xl(w),S=Jl(w,S),S=Array.from(S),w=0;w<S.length;){var D=S[w++];if(!wr(D)){if(D.tag===5&&wt(D.stateNode))return!0;for(D=D.child;D!==null;)S.push(D),D=D.sibling}}return!1},r.getCurrentUpdatePriority=function(){return Ue},r.getFindAllNodesFailureDescription=function(w,S){if(!Et)throw Error(i(363));var D=0,U=[];w=[Xl(w),0];for(var X=0;X<w.length;){var oe=w[X++],Te=w[X++],et=S[Te];if((oe.tag!==5||!wr(oe))&&(Nh(oe,et)&&(U.push(Og(et)),Te++,Te>D&&(D=Te)),Te<S.length))for(oe=oe.child;oe!==null;)w.push(oe,Te),oe=oe.sibling}if(D<S.length){for(w=[];D<S.length;D++)w.push(Og(S[D]));return`findAllNodes was able to match part of the selector:
  `+(U.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},r.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return ie(w.child.stateNode);default:return w.child.stateNode}},r.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:J3,findFiberByHostInstance:w.findFiberByHostInstance||ww,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)w=!0;else{try{fu=S.inject(w),Zi=S}catch{}w=!!S.checkDCE}}return w},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(w,S,D,U){if(!Et)throw Error(i(363));w=Ql(w,S);var X=Ke(w,D,U).disconnect;return{disconnect:function(){X()}}},r.registerMutableSourceForHydration=function(w,S){var D=S._getVersion;D=D(S._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[S,D]:w.mutableSourceEagerHydrationData.push(S,D)},r.runWithPriority=function(w,S){var D=Ue;try{return Ue=w,S()}finally{Ue=D}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(w,S,D,U){var X=S.current,oe=ms(),Te=va(X);return D=Hg(D),S.context===null?S.context=D:S.pendingContext=D,S=Oc(oe,Te),S.payload={element:w},U=U===void 0?null:U,U!==null&&(S.callback=U),w=Rc(X,S,Te),w!==null&&(fi(w,X,Te,oe),mh(w,X,Te)),Te},r}),QS}var mP;function Yne(){return mP||(mP=1,JS.exports=Kne()),JS.exports}var Xne=Yne();const Jne=Nc(Xne);var ZS={exports:{}},hf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP;function Qne(){return gP||(gP=1,hf.ConcurrentRoot=1,hf.ContinuousEventPriority=4,hf.DefaultEventPriority=16,hf.DiscreteEventPriority=1,hf.IdleEventPriority=536870912,hf.LegacyRoot=0),hf}var pP;function Zne(){return pP||(pP=1,ZS.exports=Qne()),ZS.exports}var J$=Zne(),ese=kn();const xP={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let yP=!1,vP=!1;const P7=".react-konva-event";let Q$=!1;function tse(e){Q$=e}const rse=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,nse=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,sse={};function O_(e,t,r=sse){if(!yP&&"zIndex"in t&&(console.warn(nse),yP=!0),!vP&&t.draggable){var n=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;n&&!s&&(console.warn(rse),vP=!0)}for(var a in r)if(!xP[a]){var i=a.slice(0,2)==="on",o=r[a]!==t[a];if(i&&o){var l=a.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e.off(l,r[a])}var u=!t.hasOwnProperty(a);u&&e.setAttr(a,void 0)}var d=Q$||t._useStrictMode,f={},h=!1;const g={};for(var a in t)if(!xP[a]){var i=a.slice(0,2)==="on",x=r[a]!==t[a];if(i&&x){var l=a.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t[a]&&(g[l]=t[a])}!i&&(t[a]!==r[a]||d&&t[a]!==e.getAttr(a))&&(h=!0,f[a]=t[a])}h&&(e.setAttrs(f),Yf(e));for(var l in g)e.on(l+P7,g[l])}function Yf(e){if(!ese.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var e5=zT();const Z$={},ase={};mv.Node.prototype._applyProps=O_;function ise(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),Yf(e)}function ose(e,t,r){let n=mv[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=mv.Group);const s={},a={};for(var i in t){var o=i.slice(0,2)==="on";o?a[i]=t[i]:s[i]=t[i]}const l=new n(s);return O_(l,a),l}function lse(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function cse(e,t,r){return!1}function use(e){return e}function dse(){return null}function fse(){return null}function hse(e,t,r,n){return ase}function mse(){}function gse(e){}function pse(e,t){return!1}function xse(){return Z$}function yse(){return Z$}const vse=setTimeout,wse=clearTimeout,bse=-1;function _se(e,t){return!1}const Sse=!1,kse=!0,Tse=!0;function Cse(e,t){t.parent===e?t.moveToTop():e.add(t),Yf(e)}function Ese(e,t){t.parent===e?t.moveToTop():e.add(t),Yf(e)}function ez(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),Yf(e)}function Nse(e,t,r){ez(e,t,r)}function Ase(e,t){t.destroy(),t.off(P7),Yf(e)}function jse(e,t){t.destroy(),t.off(P7),Yf(e)}function Pse(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function Mse(e,t,r){}function Fse(e,t,r,n,s){O_(e,s,n)}function Dse(e){e.hide(),Yf(e)}function Ose(e){}function Rse(e,t){(t.visible==null||t.visible)&&e.show()}function Ise(e,t){}function Lse(e){}function Bse(){}const $se=()=>J$.DefaultEventPriority,zse=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Cse,appendChildToContainer:Ese,appendInitialChild:ise,cancelTimeout:wse,clearContainer:Lse,commitMount:Mse,commitTextUpdate:Pse,commitUpdate:Fse,createInstance:ose,createTextInstance:lse,detachDeletedInstance:Bse,finalizeInitialChildren:cse,getChildHostContext:yse,getCurrentEventPriority:$se,getPublicInstance:use,getRootHostContext:xse,hideInstance:Dse,hideTextInstance:Ose,idlePriority:e5.unstable_IdlePriority,insertBefore:ez,insertInContainerBefore:Nse,isPrimaryRenderer:Sse,noTimeout:bse,now:e5.unstable_now,prepareForCommit:dse,preparePortalMount:fse,prepareUpdate:hse,removeChild:Ase,removeChildFromContainer:jse,resetAfterCommit:mse,resetTextContent:gse,run:e5.unstable_runWithPriority,scheduleTimeout:vse,shouldDeprioritizeSubtree:pse,shouldSetTextContent:_se,supportsMutation:Tse,unhideInstance:Rse,unhideTextInstance:Ise,warnsIfNotActing:kse},Symbol.toStringTag,{value:"Module"}));var Use=Object.defineProperty,Wse=Object.defineProperties,Hse=Object.getOwnPropertyDescriptors,wP=Object.getOwnPropertySymbols,Gse=Object.prototype.hasOwnProperty,Vse=Object.prototype.propertyIsEnumerable,bP=(e,t,r)=>t in e?Use(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_P=(e,t)=>{for(var r in t||(t={}))Gse.call(t,r)&&bP(e,r,t[r]);if(wP)for(var r of wP(t))Vse.call(t,r)&&bP(e,r,t[r]);return e},qse=(e,t)=>Wse(e,Hse(t)),SP,kP;typeof window<"u"&&((SP=window.document)!=null&&SP.createElement||((kP=window.navigator)==null?void 0:kP.product)==="ReactNative")?_.useLayoutEffect:_.useEffect;function tz(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=e.child;for(;n;){const s=tz(n,t,r);if(s)return s;n=n.sibling}}function rz(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const TP=console.error;console.error=function(){const e=[...arguments].join("");if(e?.startsWith("Warning:")&&e.includes("useContext")){console.error=TP;return}return TP.apply(this,arguments)};const M7=rz(_.createContext(null));class nz extends _.Component{render(){return _.createElement(M7.Provider,{value:this._reactInternals},this.props.children)}}function Kse(){const e=_.useContext(M7);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=_.useId();return _.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const s=tz(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(s)return s}},[e,t])}function Yse(){const e=Kse(),[t]=_.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const s=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;s&&s!==M7&&!t.has(s)&&t.set(s,_.useContext(rz(s)))}r=r.return}return t}function sz(){const e=Yse();return _.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>_.createElement(t,null,_.createElement(r.Provider,qse(_P({},n),{value:e.get(r)}))),t=>_.createElement(nz,_P({},t))),[e])}function Xse(e){const t=Ls.useRef({});return Ls.useLayoutEffect(()=>{t.current=e}),Ls.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Jse=e=>{const t=Ls.useRef(null),r=Ls.useRef(null),n=Ls.useRef(null),s=Xse(e),a=sz(),i=o=>{const{forwardedRef:l}=e;l&&(typeof l=="function"?l(o):l.current=o)};return Ls.useLayoutEffect(()=>(r.current=new mv.Stage({width:e.width,height:e.height,container:t.current}),i(r.current),n.current=xp.createContainer(r.current,J$.LegacyRoot,!1,null),xp.updateContainer(Ls.createElement(a,{},e.children),n.current),()=>{mv.isBrowser&&(i(null),xp.updateContainer(null,n.current,null),r.current.destroy())}),[]),Ls.useLayoutEffect(()=>{i(r.current),O_(r.current,e,s),xp.updateContainer(Ls.createElement(a,{},e.children),n.current,null)}),Ls.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},ym="Layer",Qse="FastLayer",tu="Group",Zse="Label",_i="Rect",Af="Circle",eae="Ellipse",tae="Wedge",Ui="Line",rae="Sprite",az="Image",$u="Text",nae="TextPath",sae="Star",aae="Ring",iae="Arc",oae="Tag",lae="Path",cae="RegularPolygon",Xk="Arrow",uae="Shape",iz="Transformer",dae="18.2.13",xp=Jne(zse);xp.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Ls.version,rendererPackageName:"react-konva"});const vm=Ls.forwardRef((e,t)=>Ls.createElement(nz,{},Ls.createElement(Jse,{...e,forwardedRef:t}))),fae=tse,hae=Object.freeze(Object.defineProperty({__proto__:null,Arc:iae,Arrow:Xk,Circle:Af,Ellipse:eae,FastLayer:Qse,Group:tu,Image:az,KonvaRenderer:xp,Label:Zse,Layer:ym,Line:Ui,Path:lae,Rect:_i,RegularPolygon:cae,Ring:aae,Shape:uae,Sprite:rae,Stage:vm,Star:sae,Tag:oae,Text:$u,TextPath:nae,Transformer:iz,Wedge:tae,useContextBridge:sz,useStrictMode:fae,version:dae},Symbol.toStringTag,{value:"Module"})),Ht=({children:e,hover:t=!0,className:r="",paddingClass:n="p-6",...s})=>{const a=`
    bg-white rounded-xl shadow-md border border-gray-200 ${n}
    ${t?"hover:shadow-lg hover:-translate-y-1 transition-all duration-200":""}
    ${r}
  `;return c.jsx(dt.div,{className:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},...s,children:e})},mae=({children:e,className:t=""})=>c.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${t}`,children:e}),gae=({children:e,className:t=""})=>c.jsx("h3",{className:`text-xl font-semibold text-gray-800 ${t}`,children:e}),pae=({children:e,className:t=""})=>c.jsx("div",{className:`py-4 ${t}`,children:e}),xae=({children:e,className:t=""})=>c.jsx("div",{className:`border-t border-gray-200 pt-4 mt-4 ${t}`,children:e});Ht.Header=mae;Ht.Title=gae;Ht.Body=pae;Ht.Footer=xae;const Ba=({isOpen:e=!1,onClose:t,title:r="",children:n,size:s="medium",showCloseButton:a=!0,closeOnBackdropClick:i=!0,className:o="",...l})=>{const u=f=>{i&&f.target===f.currentTarget&&t()};Ls.useEffect(()=>{const f=x=>{x.key==="Escape"&&t()},h=window;h.__modalOpenCount||(h.__modalOpenCount=0);let g;return e&&(document.addEventListener("keydown",f),g=document.body.style.overflow,h.__modalOpenCount===0&&(document.body.style.overflow="hidden"),h.__modalOpenCount+=1),()=>{document.removeEventListener("keydown",f),h.__modalOpenCount&&h.__modalOpenCount>0&&(h.__modalOpenCount-=1),h.__modalOpenCount===0&&(g!==void 0?document.body.style.overflow=g||"":document.body.style.overflow="")}},[e,t]);const d={small:"max-w-md",medium:"max-w-lg",large:"max-w-4xl"};return e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:u,role:"dialog","aria-modal":"true","aria-label":r,...l,children:c.jsxs("div",{className:`
          bg-white rounded-xl shadow-md border border-gray-200 p-8
          hover:shadow-lg hover:-translate-y-1 transition-all duration-200
          w-full ${d[s]} mx-auto
          ${o}
        `,onClick:f=>f.stopPropagation(),children:[(r||a)&&c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r&&c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:r}),a&&c.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 rounded-full p-2 text-2xl font-bold leading-none","aria-label":"Close modal",children:""})]}),c.jsx("div",{className:"space-y-6",children:n})]})}):null},yae=e=>{const[t,r]=_.useState({width:800,height:600}),n=_.useRef(null),s=_.useCallback(()=>{if(e.current){e.current.getBoundingClientRect();const a=Math.min(1200,window.innerWidth*.8),i=Math.min(800,window.innerHeight*.6),o=4/3;let l=a,u=l/o;u>i&&(u=i,l=u*o),r({width:l,height:u})}},[e]);return _.useEffect(()=>(s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),{canvasSize:t,stageRef:n,updateCanvasSize:s}},vae=e=>{const[t,r]=_.useState({width:800,height:600}),[n,s]=_.useState({}),a=_.useCallback(()=>{if(e.current){const o=e.current.getBoundingClientRect();r({width:o.width,height:Math.max(400,o.height)})}},[e]),i=_.useCallback(o=>o<480?{stageHeight:300,blockMinSize:50,fontSize:12,padding:10,touchTargetSize:44,arrowThickness:4}:o<768?{stageHeight:400,blockMinSize:60,fontSize:14,padding:15,touchTargetSize:44,arrowThickness:4}:o<1024?{stageHeight:500,blockMinSize:70,fontSize:16,padding:20,touchTargetSize:40,arrowThickness:3}:{stageHeight:600,blockMinSize:80,fontSize:18,padding:25,touchTargetSize:32,arrowThickness:2},[]);return _.useEffect(()=>{const o=i(t.width);s(o)},[t.width,i]),_.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[a]),{containerSize:t,responsiveSettings:n,updateSize:a}},CP={convertToOriginal:(e,t,r)=>r?{x:Number(((e-r.x)/r.scale).toFixed(4)),y:Number(((t-r.y)/r.scale).toFixed(4))}:{x:e,y:t},convertToCanvas:(e,t,r)=>r?{x:Number((r.x+e*r.scale).toFixed(4)),y:Number((r.y+t*r.scale).toFixed(4))}:{x:e,y:t},isPointInImage:(e,t)=>t?e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height:!1,calculateImageScale:(e,t)=>{if(!e||!t)return 1;const r=40,n=t.width-r,s=t.height-r;return Math.min(n/e.width,s/e.height)},calculateImageInfo:(e,t)=>{if(!e||!t)return null;const r=40,n=t.width-r,s=t.height-r,a=Math.min(n/e.width,s/e.height),i=e.width*a,o=e.height*a,l=(t.width-i)/2,u=(t.height-o)/2;return{x:l,y:u,width:i,height:o,scale:a,originalWidth:e.width,originalHeight:e.height}}},wae=e=>{const t=_.useCallback((n,s)=>CP.convertToOriginal(n,s,e),[e]),r=_.useCallback((n,s)=>CP.convertToCanvas(n,s,e),[e]);return{convertToOriginal:t,convertToCanvas:r}},my={create:(e,t,r,n,s)=>({id:s,x:e-r/2,y:t-n/2,width:Math.max(r,30),height:Math.max(n,10),fill:"rgba(0, 123, 255, 0.15)",stroke:"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),validate:e=>e.width>0&&e.height>0,findAtPosition:(e,t,r)=>e.find(n=>t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height),generateId:()=>`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},ap={create:(e,t,r,n,s,a,i)=>({id:i,startX:e,startY:t,endX:r,endY:n,startBlock:s,endBlock:a,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,pointerLength:10,pointerWidth:10}),snapToNearestBlock:(e,t,r,n=60)=>{let s=null,a=1/0;for(const i of r){const o=i.x+i.width/2,l=i.y+i.height/2,u=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-l,2));u<=n&&u<a&&(a=u,s=i)}return s?{x:s.x+s.width/2,y:s.y+s.height/2,blockId:s.id,block:s,distance:a}:null},validate:(e,t,r,n,s)=>ap.snapToNearestBlock(e,t,s)!==null,generateId:()=>`arrow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},t5={create:(e,t,r)=>({id:r,blockId:e,word:t}),update:(e,t,r)=>e.map(n=>n.blockId===t?{...n,word:r}:n),delete:(e,t)=>e.filter(r=>r.blockId!==t),generateId:e=>`word_${e}`,validate:e=>e&&e.trim().length>0},bae=async e=>{const t=[];if(e.size>512e3){const n=(e.size/1024).toFixed(1);t.push(`Image is too large (${n}KB). Maximum allowed size is 500KB. Please compress or resize your image.`)}return new Promise(n=>{const s=new Image;s.onload=()=>{(s.width>4e3||s.height>4e3)&&t.push(`Image is too large (${s.width}x${s.height} pixels). Maximum allowed dimensions are 4000x4000 pixels. Please resize your image.`),n({valid:t.length===0,errors:t,dimensions:{width:s.width,height:s.height}})},s.onerror=()=>{t.push("Invalid image file"),n({valid:!1,errors:t})},s.src=URL.createObjectURL(e)})},_ae=(e,t=500)=>new Promise(r=>{const n=document.createElement("canvas"),s=n.getContext("2d"),a=new Image;a.onload=()=>{let{width:i,height:o}=a;const l=2e3;if(i>l||o>l){const f=Math.min(l/i,l/o);i*=f,o*=f}n.width=i,n.height=o,s.drawImage(a,0,0,i,o);let u=.8;const d=()=>{n.toBlob(f=>{f.size<=t*1024||u<=.1?r(f):(u-=.1,d())},"image/jpeg",u)};d()},a.onerror=()=>{r(e)},a.src=URL.createObjectURL(e)}),Sae=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=s=>t(s.target.result),n.onerror=s=>r(s),n.readAsDataURL(e)}),kae=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return{blockMinSize:e?60:40,arrowThickness:e?4:2,touchTargetSize:e?44:32,doubleTapDelay:e?300:200,isMobile:e}},Tae={testData:{blocks:[],words:[],arrows:[],imageUrl:null},canvas:{size:{width:800,height:600},image:null,imageInfo:null,selectedTool:"edit"},creation:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null},ui:{selectedBlock:null,showWordPanel:!1,isLoading:!1,error:null,showImageSizeModal:!1,imageSizeError:null}},Cae=(e,t)=>{switch(t.type){case"SET_CANVAS_SIZE":return{...e,canvas:{...e.canvas,size:t.payload}};case"SET_IMAGE":return{...e,canvas:{...e.canvas,image:t.payload}};case"SET_IMAGE_INFO":return{...e,canvas:{...e.canvas,imageInfo:t.payload}};case"SET_SELECTED_TOOL":return{...e,canvas:{...e.canvas,selectedTool:t.payload}};case"ADD_BLOCK":return{...e,testData:{...e.testData,blocks:[...e.testData.blocks,t.payload]}};case"ADD_WORD":return{...e,testData:{...e.testData,words:[...e.testData.words,t.payload]}};case"ADD_ARROW":return{...e,testData:{...e.testData,arrows:[...e.testData.arrows,t.payload]}};case"UPDATE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)}};case"DELETE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.filter(r=>r.id!==t.payload),words:e.testData.words.filter(r=>r.blockId!==t.payload),arrows:e.testData.arrows.filter(r=>r.startBlock!==t.payload&&r.endBlock!==t.payload)}};case"UPDATE_WORDS":return{...e,testData:{...e.testData,words:t.payload}};case"SET_CREATION_STATE":return{...e,creation:{...e.creation,...t.payload}};case"SET_UI_STATE":return{...e,ui:{...e.ui,...t.payload}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:t.payload}};case"SET_ERROR":return{...e,ui:{...e.ui,error:t.payload}};case"SHOW_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!0,imageSizeError:t.payload}};case"HIDE_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!1,imageSizeError:null}};case"RESET_TESTDATA":return{...e,testData:{blocks:[],words:[],arrows:[],imageUrl:e.testData.imageUrl}};default:return e}},Eae=({testName:e="",showQuestionCount:t=!0,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const[o,l]=_.useReducer(Cae,Tae),{showNotification:u}=si(),{makeAuthenticatedRequest:d}=zl(),{user:f}=Ms(),h=_.useRef(null),g=_.useRef(null),x=_.useRef(null),y=_.useRef({}),v=_.useRef({}),{canvasSize:T,stageRef:k}=yae(h),{containerSize:b,responsiveSettings:E}=vae(h),[N,P]=_.useState(null),M=E?.stageHeight??600,j=_.useMemo(()=>M+150,[M]),A=E?.padding??20;_.useEffect(()=>{if(!o.canvas.image||!h.current)return;const G=h.current?.clientWidth||800,Q=h.current?.clientHeight||600,re=G/o.canvas.image.width,q=Q/o.canvas.image.height,se=Math.min(re,q,1),ce=o.canvas.image.width*se,pe=o.canvas.image.height*se,ke=(G-ce)/2,le=(Q-pe)/2;P({x:ke,y:le,width:ce,height:pe,scaleX:se,scaleY:se,scale:se,image:o.canvas.image})},[o.canvas.image,h.current?.clientWidth,h.current?.clientHeight]);const{convertToOriginal:F}=wae(N);_.useEffect(()=>{l({type:"SET_CANVAS_SIZE",payload:T})},[T]),_.useEffect(()=>{N&&l({type:"SET_IMAGE_INFO",payload:N})},[N]),_.useEffect(()=>{const G=x.current;if(!G)return;const Q=o.ui.selectedBlock?.id?y.current[o.ui.selectedBlock.id]:null;Q?(G.nodes([Q]),G.getLayer()?.batchDraw()):(G.nodes([]),G.getLayer()?.batchDraw())},[o.ui.selectedBlock]);const L=_.useCallback(()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:null}}),l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null}}),l({type:"RESET_TESTDATA"}),l({type:"SET_ERROR",payload:null})},[]),V=_.useCallback(async G=>{const Q=G.target.files[0];if(!Q){u("Please select a file","error");return}try{l({type:"SET_LOADING",payload:!0});const re=await bae(Q);if(!re.valid){l({type:"SHOW_IMAGE_SIZE_MODAL",payload:{errors:re.errors,fileSize:(Q.size/1024).toFixed(1),dimensions:re.dimensions}});return}let q=Q;if(Q.size>500*1024){u("Image is large, compressing to meet size requirements...","info");try{q=await _ae(Q,500);const pe=(Q.size/1024).toFixed(1),ke=(q.size/1024).toFixed(1);u(`Image compressed from ${pe}KB to ${ke}KB`,"success")}catch{u("Failed to compress image. Please try a smaller image.","error");return}}const se=await Sae(q),ce=new Image;ce.crossOrigin="anonymous",ce.onload=()=>{l({type:"SET_IMAGE",payload:ce}),l({type:"SET_UI_STATE",payload:{imageUrl:se}}),u("Image uploaded successfully!","success")},ce.onerror=()=>{u("Failed to load image","error")},ce.src=se}catch(re){console.error("Image upload error:",re),u("Error processing image","error")}finally{l({type:"SET_LOADING",payload:!1})}},[u]),J=_.useCallback(G=>{const Q=k.current;if(!Q)return;const re=Q.getPointerPosition();if(re){if(o.canvas.selectedTool==="create"){const q=my.findAtPosition(o.testData.blocks,re.x,re.y);if(q){l({type:"SET_UI_STATE",payload:{selectedBlock:q}});return}l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!0,blockCreationStart:{x:re.x,y:re.y}}})}else if(o.canvas.selectedTool==="edit"){const q=my.findAtPosition(o.testData.blocks,re.x,re.y);l(q?{type:"SET_UI_STATE",payload:{selectedBlock:q}}:{type:"SET_UI_STATE",payload:{selectedBlock:null}})}else if(o.canvas.selectedTool==="arrow"){const q=G.target===Q,se=my.findAtPosition(o.testData.blocks,re.x,re.y);(q||!se)&&l({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!0,arrowStart:{x:re.x,y:re.y}}})}}},[o.canvas.selectedTool,N,o.testData.blocks]),ne=_.useCallback(G=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const Q=k.current;if(!Q)return;const re=Q.getPointerPosition();if(!re)return;const q=Math.abs(re.x-o.creation.blockCreationStart.x),se=Math.abs(re.y-o.creation.blockCreationStart.y),ce=10,pe=Math.max(q,ce),ke=Math.max(se,ce);l({type:"SET_CREATION_STATE",payload:{previewBlock:{x:Math.min(re.x,o.creation.blockCreationStart.x),y:Math.min(re.y,o.creation.blockCreationStart.y),width:pe,height:ke,fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,dash:[5,5],opacity:.7}}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const Q=k.current;if(!Q)return;const re=Q.getPointerPosition();if(!re)return;l({type:"SET_CREATION_STATE",payload:{previewArrow:{startX:o.creation.arrowStart.x,startY:o.creation.arrowStart.y,endX:re.x,endY:re.y,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,dash:[5,5],opacity:.7}}})}},[o.creation]),ee=_.useCallback(G=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const Q=k.current;if(!Q)return;const re=Q.getPointerPosition();if(!re)return;const q=Math.abs(re.x-o.creation.blockCreationStart.x),se=Math.abs(re.y-o.creation.blockCreationStart.y),ce=10,pe=Math.max(q,ce),ke=Math.max(se,ce),le=Math.min(re.x,o.creation.blockCreationStart.x)+pe/2,ye=Math.min(re.y,o.creation.blockCreationStart.y)+ke/2,je=my.generateId(),Ne=my.create(le,ye,pe,ke,je),We=t5.create(je,`Word ${o.testData.blocks.length+1}`,t5.generateId(je));l({type:"ADD_BLOCK",payload:Ne}),l({type:"ADD_WORD",payload:We}),l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,blockCreationStart:null,previewBlock:null}}),o.testData.blocks.length===0&&l({type:"SET_UI_STATE",payload:{showWordPanel:!0}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const Q=k.current;if(!Q)return;const re=Q.getPointerPosition();if(!re)return;if(ap.validate(o.creation.arrowStart.x,o.creation.arrowStart.y,re.x,re.y,o.testData.blocks)){const q=ap.snapToNearestBlock(o.creation.arrowStart.x,o.creation.arrowStart.y,o.testData.blocks),se=ap.snapToNearestBlock(re.x,re.y,o.testData.blocks),ce=q?q.x:o.creation.arrowStart.x,pe=q?q.y:o.creation.arrowStart.y,ke=se?se.x:re.x,le=se?se.y:re.y,ye=ap.generateId(),je=kae(),Ne=ap.create(ce,pe,ke,le,q?q.blockId:null,se?se.blockId:null,ye,{strokeWidth:je.arrowThickness,isMobile:je.isMobile});l({type:"ADD_ARROW",payload:Ne}),u("Arrow created successfully!","success")}else u("Arrow must start near a block!","error");l({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!1,arrowStart:null,previewArrow:null}})}},[o.creation,o.testData.blocks,u]),ie=_.useCallback(G=>{G.evt.preventDefault(),J(G)},[J]),B=_.useCallback(G=>{G.evt.preventDefault(),ne(G)},[ne]),Y=_.useCallback(G=>{G.evt.preventDefault(),ee(G)},[ee]),I=_.useCallback(async()=>{console.log(" [MatchingTestCreator] handleSaveTest clicked");const G=H();if(Object.keys(G).length>0){console.warn(" [MatchingTestCreator] Validation errors:",G),u("Please fix validation errors before saving","error");return}try{console.log(" [MatchingTestCreator] Preparing data to save...",{blocks:o.testData.blocks.length,words:o.testData.words.length,arrows:o.testData.arrows.length,imageUrl:o.ui.imageUrl?"present":"missing"}),l({type:"SET_LOADING",payload:!0});let Q=o.ui.imageUrl;if(o.ui.imageUrl&&o.ui.imageUrl.startsWith("data:")){const q=await d("/.netlify/functions/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:o.ui.imageUrl,folder:"matching_tests"})}),se=await q.json();if(q.ok&&se.success&&se.url)Q=se.url;else throw new Error(se.message||"Upload failed")}const re=o.testData.blocks.map((q,se)=>{let ce;if(N){const le=F(q.x,q.y),ye=F(q.x+q.width,q.y+q.height);ce={x:le.x,y:le.y,width:Number((ye.x-le.x).toFixed(4)),height:Number((ye.y-le.y).toFixed(4))}}else ce={x:Number(q.x.toFixed(4)),y:Number(q.y.toFixed(4)),width:Number(q.width.toFixed(4)),height:Number(q.height.toFixed(4))};const pe=o.testData.words.find(le=>le.blockId===q.id),ke=o.testData.arrows.find(le=>le.startBlock===q.id);return{question_id:se+1,word:pe?.word||`Word ${se+1}`,block_coordinates:ce,has_arrow:!!ke,arrow:ke&&N?(()=>{const le=F(ke.startX,ke.startY),ye=F(ke.endX,ke.endY),je=le.x/N.originalWidth*100,Ne=le.y/N.originalHeight*100,We=ye.x/N.originalWidth*100,$e=ye.y/N.originalHeight*100;return{start_x:Number(le.x.toFixed(4)),start_y:Number(le.y.toFixed(4)),end_x:Number(ye.x.toFixed(4)),end_y:Number(ye.y.toFixed(4)),rel_start_x:Number(je.toFixed(4)),rel_start_y:Number(Ne.toFixed(4)),rel_end_x:Number(We.toFixed(4)),rel_end_y:Number($e.toFixed(4)),image_width:N.originalWidth,image_height:N.originalHeight,style:ke.style||{color:"#dc3545",thickness:3}}})():null}});r&&(console.log(" [MatchingTestCreator] Calling onTestSaved with processed data"),r({success:!0,message:"Test data prepared for assignment",blocks:o.testData.blocks,words:o.testData.words,arrows:o.testData.arrows,imageUrl:Q,processedQuestions:re}))}catch(Q){console.error("Save error:",Q),u(`Error saving test: ${Q.message}`,"error")}finally{l({type:"SET_LOADING",payload:!1})}},[o.testData,o.ui.imageUrl,N,F,d,r,u,e,f]),H=_.useCallback(()=>{const G={};return e.trim()||(G.testName="Test name is required"),o.testData.blocks.length===0&&(G.blocks="At least one block is required"),G},[e,o.testData.blocks.length]),W=()=>c.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border-b",children:[c.jsx(tt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"create"}),variant:o.canvas.selectedTool==="create"?"primary":"secondary",size:"sm",children:" Create Blocks"}),c.jsx(tt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"edit"}),variant:o.canvas.selectedTool==="edit"?"primary":"secondary",size:"sm",children:" Edit Blocks"}),c.jsx(tt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"arrow"}),variant:o.canvas.selectedTool==="arrow"?"primary":"secondary",size:"sm",children:" Draw Arrows"}),c.jsx(tt,{onClick:L,variant:"secondary",size:"sm",children:" Reset"}),c.jsx(tt,{onClick:()=>g.current?.click(),variant:"secondary",size:"sm",children:" Upload Image"}),c.jsx("div",{className:"text-xs text-gray-500 text-center col-span-full",children:"Max size: 500KB  Max dimensions: 4000x4000px"})]}),R=()=>c.jsx(vm,{width:b.width,height:j,ref:k,onMouseDown:J,onMouseMove:ne,onMouseUp:ee,onTouchStart:ie,onTouchMove:B,onTouchEnd:Y,className:o.canvas.selectedTool==="arrow"||o.canvas.selectedTool==="create"?"cursor-crosshair":"cursor-default",children:c.jsxs(ym,{children:[o.canvas.image&&N&&c.jsx(az,{image:o.canvas.image,x:N.x,y:N.y,width:N.width,height:N.height}),o.testData.blocks.map(G=>c.jsxs(tu,{ref:Q=>{Q&&(v.current[G.id]=Q)},draggable:o.canvas.selectedTool==="edit",x:G.x,y:G.y,onMouseEnter:Q=>{const re=Q.target.getStage()?.container();re&&(re.style.cursor=o.ui.selectedBlock?.id===G.id?"nwse-resize":"move")},onMouseLeave:Q=>{const re=Q.target.getStage()?.container();re&&(re.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onDragStart:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:G}})},onDragEnd:Q=>{const{x:re,y:q}=Q.target.position();l({type:"UPDATE_BLOCK",payload:{id:G.id,updates:{x:re,y:q}}})},onClick:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:G}})},onTap:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:G}})},children:[c.jsx(_i,{ref:Q=>{Q&&(y.current[G.id]=Q)},width:G.width,height:G.height,fill:G.fill,stroke:G.stroke,strokeWidth:G.strokeWidth,cornerRadius:G.cornerRadius,shadowColor:G.shadowColor,shadowBlur:G.shadowBlur,shadowOffset:G.shadowOffset,shadowOpacity:G.shadowOpacity,draggable:o.canvas.selectedTool==="edit",onDragEnd:Q=>{const{x:re,y:q}=Q.target.getParent().position();l({type:"UPDATE_BLOCK",payload:{id:G.id,updates:{x:re,y:q}}})},onMouseEnter:Q=>{const re=Q.target.getStage()?.container();re&&(re.style.cursor=o.ui.selectedBlock?.id===G.id?"nwse-resize":"move")},onMouseLeave:Q=>{const re=Q.target.getStage()?.container();re&&(re.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onTransformEnd:Q=>{const re=y.current[G.id];if(!re)return;const q=Math.max(10,re.width()*re.scaleX()),se=Math.max(10,re.height()*re.scaleY());re.scaleX(1),re.scaleY(1),l({type:"UPDATE_BLOCK",payload:{id:G.id,updates:{width:q,height:se}}})}}),c.jsx($u,{x:2,y:2,text:`${o.testData.blocks.indexOf(G)+1}`,fontSize:Math.min(E.fontSize,Math.max(8,G.width/4)),fontFamily:"Arial",fill:"#333",fontStyle:"bold",listening:!1})]},G.id)),c.jsx(iz,{ref:x,rotateEnabled:!1,flipEnabled:!1,boundBoxFunc:(G,Q)=>({...Q,width:Math.max(Q.width,10),height:Math.max(Q.height,10)})}),o.testData.arrows.map(G=>c.jsx(Xk,{points:[G.startX,G.startY,G.endX,G.endY],stroke:G.stroke,fill:G.fill,strokeWidth:G.strokeWidth||E.arrowThickness,pointerLength:G.pointerLength,pointerWidth:G.pointerWidth},G.id)),o.creation.previewBlock&&c.jsx(_i,{x:o.creation.previewBlock.x,y:o.creation.previewBlock.y,width:o.creation.previewBlock.width,height:o.creation.previewBlock.height,fill:o.creation.previewBlock.fill,stroke:o.creation.previewBlock.stroke,strokeWidth:o.creation.previewBlock.strokeWidth,dash:o.creation.previewBlock.dash,opacity:o.creation.previewBlock.opacity}),o.creation.previewArrow&&c.jsx(Xk,{points:[o.creation.previewArrow.startX,o.creation.previewArrow.startY,o.creation.previewArrow.endX,o.creation.previewArrow.endY],stroke:o.creation.previewArrow.stroke,fill:o.creation.previewArrow.fill,strokeWidth:o.creation.previewArrow.strokeWidth,dash:o.creation.previewArrow.dash,opacity:o.creation.previewArrow.opacity})]})}),z=_.useMemo(()=>o.testData.blocks.length===0?null:c.jsxs("div",{className:"word-panel bg-gray-50 border-t border-gray-200 p-4 w-full flex-shrink-0",style:{height:"clamp(420px, 55vh, 640px)",overflowY:"auto"},children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Words (Auto-created with blocks)"}),c.jsx("div",{className:"space-y-2",children:o.testData.words.map(G=>{const Q=o.testData.blocks.find(re=>re.id===G.blockId);return c.jsxs("div",{className:"p-2 bg-white rounded border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:["Block ",o.testData.blocks.indexOf(Q)+1]}),c.jsx("button",{onClick:()=>l({type:"DELETE_BLOCK",payload:Q.id}),className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),c.jsx("input",{type:"text",value:G.word,onChange:re=>{const q=t5.update(o.testData.words,G.blockId,re.target.value);l({type:"UPDATE_WORDS",payload:q})},className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter word text"})]},G.blockId)})})]}),[o.testData.words,o.testData.blocks]);return c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-screen bg-gray-100",children:[c.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("div",{children:c.jsx("div",{className:"mt-2 text-sm text-gray-600",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Questions:"})," ",o.testData.blocks.length," (auto-generated from blocks)"]})]})})})})}),W(),c.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto gap-4",children:[c.jsx("div",{ref:h,className:"bg-white border overflow-hidden flex-none",style:{height:`${j}px`,minHeight:`${j}px`,maxHeight:`${j+60}px`,padding:`${A}px`},children:R()}),z]}),c.jsx("div",{className:"bg-white border-t p-4",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(tt,{onClick:I,disabled:a||o.ui.isLoading,variant:"primary",size:"lg",children:a||o.ui.isLoading?c.jsx(fn,{size:"sm"}):"Save Test"})})}),c.jsx("input",{ref:g,type:"file",accept:"image/*,application/pdf",onChange:V,className:"hidden"}),c.jsx(Ba,{isOpen:o.ui.showImageSizeModal,onClose:()=>l({type:"HIDE_IMAGE_SIZE_MODAL"}),title:" Image Too Large",size:"medium",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("span",{className:"text-red-600 text-2xl mr-2",children:""}),c.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Image Size Issues"})]}),c.jsx("div",{className:"text-red-700",children:o.ui.imageSizeError?.errors.map((G,Q)=>c.jsxs("div",{className:"mb-2",children:[" ",G]},Q))})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Current Image Details:"}),c.jsxs("div",{className:"text-blue-700 space-y-1",children:[c.jsxs("div",{children:[" File size: ",o.ui.imageSizeError?.fileSize,"KB"]}),o.ui.imageSizeError?.dimensions&&c.jsxs("div",{children:[" Dimensions: ",o.ui.imageSizeError.dimensions.width,"  ",o.ui.imageSizeError.dimensions.height," pixels"]})]})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Requirements:"}),c.jsxs("div",{className:"text-green-700 space-y-1",children:[c.jsx("div",{children:" Maximum file size: 500KB"}),c.jsx("div",{children:" Maximum dimensions: 4000  4000 pixels"}),c.jsx("div",{children:" Supported formats: All image formats (JPEG, PNG, WebP, etc.)"})]})]}),c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:" How to Fix:"}),c.jsxs("div",{className:"text-yellow-700 space-y-1",children:[c.jsx("div",{children:" Use an image editor to resize your image"}),c.jsx("div",{children:" Compress the image using online tools"}),c.jsx("div",{children:" Try a different image with smaller dimensions"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(tt,{onClick:()=>l({type:"HIDE_IMAGE_SIZE_MODAL"}),variant:"secondary",children:"Close"}),c.jsx(tt,{onClick:()=>{l({type:"HIDE_IMAGE_SIZE_MODAL"}),g.current?.click()},variant:"primary",children:"Try Another Image"})]})]})})]})},o1=_.createContext(null);function Nae(e,t){return{getTheme:function(){return t??null}}}function td(){const e=_.useContext(o1);return e==null&&(function(t,...r){const n=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of r)s.append("v",a);throw n.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),e}function er(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const du=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Aae=du&&"documentMode"in document?document.documentMode:null,Lu=du&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),wm=du&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),o4=!(!du||!("InputEvent"in window)||Aae)&&"getTargetRanges"in new window.InputEvent("input"),gv=du&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Bp=du&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,jae=du&&/Android/.test(navigator.userAgent),oz=du&&/^(?=.*Chrome).*/i.test(navigator.userAgent),EP=du&&jae&&oz,l4=du&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!oz;function lz(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const Pae=1,Mae=3,Fae=9,Dae=11,bm=0,cz=1,$p=2,Oae=0,Rae=1,Iae=2,c4=4,u4=8,F7=128,Lae=1792|(112|(3|c4|u4)|F7),D7=1,O7=2,R7=3,I7=4,L7=5,B7=6,R_=gv||Bp||l4?"":"",o0=`

`,Bae=wm?"":R_,_m={bold:1,capitalize:1024,code:16,highlight:F7,italic:2,lowercase:256,strikethrough:c4,subscript:32,superscript:64,underline:u4,uppercase:512},$ae={directionless:1,unmergeable:2},NP={center:O7,end:B7,justify:I7,left:D7,right:R7,start:L7},zae={[O7]:"center",[B7]:"end",[I7]:"justify",[D7]:"left",[R7]:"right",[L7]:"start"},Uae={normal:0,segmented:2,token:1},Wae={[Oae]:"normal",[Iae]:"segmented",[Rae]:"token"},AP="$config";function uz(e,t,r,n,s,a){let i=e.getFirstChild();for(;i!==null;){const o=i.__key;i.__parent===t&&(It(i)&&uz(i,o,r,n,s,a),r.has(o)||a.delete(o),s.push(o)),i=i.getNextSibling()}}const Hae=100;let Jk=!1,$7=0;function Gae(e){$7=e.timeStamp}function r5(e,t,r){const n=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||n&&e.previousSibling===s)||n&&V_(e,r)!==void 0}function Vae(e,t,r){const n=lu(wc(r));let s=null,a=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,a=n.focusOffset);const i=e.nodeValue;i!==null&&iC(t,i,s,a,!1)}function qae(e,t,r){if(qt(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return x0(t)&&r.isAttached()}function Kae(e,t,r,n){for(let s=e;s&&!Kie(s);s=u2(s)){const a=V_(s,t);if(a!==void 0){const i=La(a,r);if(i)return zn(i)||!Ns(s)?void 0:[s,i]}else if(s===n)return[n,iU(r)]}}function dz(e,t,r){Jk=!0;const n=performance.now()-$7>Hae;try{El(e,(()=>{const s=xr()||(function(h){return h.getEditorState().read((()=>{const g=xr();return g!==null?g.clone():null}))})(e),a=new Map,i=e.getRootElement(),o=e._editorState,l=e._blockCursorElement;let u=!1,d="";for(let h=0;h<t.length;h++){const g=t[h],x=g.type,y=g.target,v=Kae(y,e,o,i);if(!v)continue;const[T,k]=v;if(x==="characterData")n&&yr(k)&&x0(y)&&qae(s,y,k)&&Vae(y,k,e);else if(x==="childList"){u=!0;const b=g.addedNodes;for(let P=0;P<b.length;P++){const M=b[P],j=sU(M),A=M.parentNode;if(A!=null&&M!==l&&j===null&&!r5(M,A,e)){if(wm){const F=(Ns(M)?M.innerText:null)||M.nodeValue;F&&(d+=F)}A.removeChild(M)}}const E=g.removedNodes,N=E.length;if(N>0){let P=0;for(let M=0;M<N;M++){const j=E[M];(r5(j,y,e)||l===j)&&(y.appendChild(j),P++)}N!==P&&a.set(T,k)}}}if(a.size>0)for(const[h,g]of a)g.reconcileObservedMutation(h,e);const f=r.takeRecords();if(f.length>0){for(let h=0;h<f.length;h++){const g=f[h],x=g.addedNodes,y=g.target;for(let v=0;v<x.length;v++){const T=x[v],k=T.parentNode;k==null||T.nodeName!=="BR"||r5(T,y,e)||k.removeChild(T)}}r.takeRecords()}s!==null&&(u&&Xi(s),wm&&uU(e)&&s.insertRawText(d))}))}finally{Jk=!1}}function fz(e){const t=e._observer;t!==null&&dz(e,t.takeRecords(),t)}function hz(e){(function(t){$7===0&&wc(t).addEventListener("textInput",Gae,!0)})(e),e._observer=new MutationObserver(((t,r)=>{dz(e,t,r)}))}function Yae(e){const t=new Map,r=new Set;for(let n=typeof e=="function"?e:e.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:s}=dC(n);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&r.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:r,sharedConfigMap:t}}let Xae=class mz{constructor(t,r,n=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=r,this.unknownState=n,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,o=a!==void 0?a:(function(l,u,d){let f=d.size;if(u)for(const h in u){const g=l.get(h);g&&d.has(g)||f++}return f})(i,n,s);this.size=o}getValue(t){const r=this.knownState.get(t);if(r!==void 0)return r;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(n=t.parse(s)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},r={};for(const[n,s]of this.knownState)n.isEqual(s,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(s);for(const n of this.sharedNodeState.flatKeys)n in t&&(r[n]=t[n],delete t[n]);return jP(t)&&(r.$=t),r}getWritable(t){if(this.node===t)return this;const{sharedNodeState:r,unknownState:n}=this,s=new Map(this.knownState);return new mz(t,r,(function(a,i,o){let l;if(o)for(const[u,d]of Object.entries(o)){const f=a.get(u);f?i.has(f)||i.set(f,f.parse(d)):(l=l||{},l[u]=d)}return l})(r.sharedConfigMap,s,n),s,this.size)}updateFromKnown(t,r){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&n in a||(a&&(delete a[n],this.unknownState=jP(a)),this.size++),s.set(t,r)}updateFromUnknown(t,r){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(r)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=r)}updateFromJSON(t){const{knownState:r}=this;for(const n of r.keys())r.set(n,n.defaultValue);if(this.size=r.size,this.unknownState=void 0,t)for(const[n,s]of Object.entries(t))this.updateFromUnknown(n,s)}};function Jae(e){const t=e.getWritable(),r=t.__state?t.__state.getWritable(t):new Xae(t,gz(t));return t.__state=r,r}function gz(e){return e.__state?e.__state.sharedNodeState:tU(d2(),e.getType()).sharedNodeState}function jP(e){if(e)for(const t in e)return e}function PP(e,t,r){for(const[n,s]of t.knownState){if(e.has(n.key))continue;e.add(n.key);const a=r?r.getValue(n):n.defaultValue;if(a!==s&&!n.isEqual(a,s))return!0}return!1}function MP(e,t,r){const{unknownState:n}=t,s=r?r.unknownState:void 0;if(n){for(const[a,i]of Object.entries(n))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function FP(e,t){const r=e.__state;return r&&r.node===e?r.getWritable(t):r}function DP(e,t){const r=e.__mode,n=e.__format,s=e.__style,a=t.__mode,i=t.__format,o=t.__style,l=e.__state,u=t.__state;return(r===null||r===a)&&(n===null||n===i)&&(s===null||s===o)&&(e.__state===null||l===u||(function(d,f){if(d===f)return!0;if(d&&f&&d.size!==f.size)return!1;const h=new Set;return!(d&&PP(h,d,f)||f&&PP(h,f,d)||d&&MP(h,d,f)||f&&MP(h,f,d))})(l,u))}function OP(e,t){const r=e.mergeWithSibling(t),n=Qs()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function RP(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&yr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(DP(t,n)){n=OP(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&yr(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(DP(n,r)){n=OP(n,r);break}break}r.remove()}}else n.remove()}function d4(e){return IP(e.anchor),IP(e.focus),e}function IP(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),yr(n)){e.set(n.__key,s?n.getTextContentSize():0,"text",!0);break}if(!It(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element",!0)}}let Sm,po,pv,I_,Qk,Zk,km,su,e8,xv,Ja="",Ru=null,Iu="",$d="",ip=!1,f4=!1;function h4(e,t){const r=km.get(e);if(t!==null){const n=s8(e);n.parentNode===t&&t.removeChild(n)}if(su.has(e)||po._keyToDOMMap.delete(e),It(r)){const n=g4(r,km);t8(n,0,n.length-1,null)}r!==void 0&&oC(xv,pv,I_,r,"destroyed")}function t8(e,t,r,n){let s=t;for(;s<=r;++s){const a=e[s];a!==void 0&&h4(a,n)}}function Bh(e,t){e.setProperty("text-align",t)}const Qae="40px";function pz(e,t){const r=Sm.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||Qae;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function xz(e,t){const r=e.style;t===0?Bh(r,""):t===D7?Bh(r,"left"):t===O7?Bh(r,"center"):t===R7?Bh(r,"right"):t===I7?Bh(r,"justify"):t===L7?Bh(r,"start"):t===B7&&Bh(r,"end")}function r8(e,t){const r=(function(n){const s=n.__dir;if(s!==null)return s;if(ti(n))return null;const a=n.getParentOrThrow();return ti(a)&&a.__dir===null?"auto":null})(t);r!==null?e.dir=r:e.removeAttribute("dir")}function m4(e,t){const r=su.get(e);r===void 0&&er(60);const n=r.createDOM(Sm,po);if((function(s,a,i){const o=i._keyToDOMMap;(function(l,u,d){const f=`__lexicalKey_${u._key}`;l[f]=d})(a,i,s),o.set(s,a)})(e,n,po),yr(r)?n.setAttribute("data-lexical-text","true"):zn(r)&&n.setAttribute("data-lexical-decorator","true"),It(r)){const s=r.__indent,a=r.__size;if(r8(n,r),s!==0&&pz(n,s),a!==0){const o=a-1;n8(g4(r,su),r,0,o,r.getDOMSlot(n))}const i=r.__format;i!==0&&xz(n,i),r.isInline()||yz(null,r,n),q_(r)&&(Ja+=o0,$d+=o0)}else{const s=r.getTextContent();if(zn(r)){const a=r.decorate(po,Sm);a!==null&&vz(e,a),n.contentEditable="false"}Ja+=s,$d+=s}return t!==null&&t.insertChild(n),oC(xv,pv,I_,r,"created"),n}function n8(e,t,r,n,s){const a=Ja;Ja="";let i=r;for(;i<=n;++i){m4(e[i],s);const o=su.get(e[i]);o!==null&&yr(o)&&(Ru===null&&(Ru=o.getFormat()),Iu===""&&(Iu=o.getStyle()))}q_(t)&&(Ja+=o0),s.element.__lexicalTextContent=Ja,Ja=a+Ja}function LP(e,t){if(e){const r=e.__last;if(r){const n=t.get(r);if(n)return Jd(n)?"line-break":zn(n)&&n.isInline()?"decorator":null}return"empty"}return null}function yz(e,t,r){const n=LP(e,km),s=LP(t,su);n!==s&&t.getDOMSlot(r).setManagedLineBreak(s)}function Zae(e,t,r){var n;Ru=null,Iu="",(function(s,a,i){const o=Ja,l=s.__size,u=a.__size;Ja="";const d=i.element;if(l===1&&u===1){const f=s.__first,h=a.__first;if(f===h)Ay(f,d);else{const x=s8(f),y=m4(h,null);try{d.replaceChild(y,x)}catch(v){if(typeof v=="object"&&v!=null){const T=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${h}}, old child: {tag: ${x.tagName}, key: ${f}}.`;throw new Error(T)}throw v}h4(f,null)}const g=su.get(h);yr(g)&&(Ru===null&&(Ru=g.getFormat()),Iu===""&&(Iu=g.getStyle()))}else{const f=g4(s,km),h=g4(a,su);if(f.length!==l&&er(227),h.length!==u&&er(228),l===0)u!==0&&n8(h,a,0,u-1,i);else if(u===0){if(l!==0){const g=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;t8(f,0,l-1,g?null:d),g&&(d.textContent="")}}else(function(g,x,y,v,T,k){const b=v-1,E=T-1;let N,P,M=k.getFirstChild(),j=0,A=0;for(;j<=b&&A<=E;){const V=x[j],J=y[A];if(V===J)M=n5(Ay(J,k.element)),j++,A++;else{N===void 0&&(N=new Set(x)),P===void 0&&(P=new Set(y));const ee=P.has(V),ie=N.has(J);if(ee)if(ie){const B=Tm(po,J);B===M?M=n5(Ay(J,k.element)):(k.withBefore(M).insertChild(B),Ay(J,k.element)),j++,A++}else m4(J,k.withBefore(M)),A++;else M=n5(s8(V)),h4(V,k.element),j++}const ne=su.get(J);ne!==null&&yr(ne)&&(Ru===null&&(Ru=ne.getFormat()),Iu===""&&(Iu=ne.getStyle()))}const F=j>b,L=A>E;if(F&&!L){const V=y[E+1],J=V===void 0?null:po.getElementByKey(V);n8(y,g,A,E,k.withBefore(J))}else L&&!F&&t8(x,j,b,k.element)})(a,f,h,l,u,i)}q_(a)&&(Ja+=o0),d.__lexicalTextContent=Ja,Ja=o+Ja})(e,t,t.getDOMSlot(r)),n=t,Ru==null||Ru===n.__textFormat||f4||n.setTextFormat(Ru),(function(s){Iu===""||Iu===s.__textStyle||f4||s.setTextStyle(Iu)})(t)}function g4(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&er(101),r.push(n),n=s.__next}return r}function Ay(e,t){const r=km.get(e);let n=su.get(e);r!==void 0&&n!==void 0||er(61);const s=ip||Zk.has(e)||Qk.has(e),a=Tm(po,e);if(r===n&&!s){if(It(r)){const i=a.__lexicalTextContent;i!==void 0&&(Ja+=i,$d+=i)}else{const i=r.getTextContent();$d+=i,Ja+=i}return a}if(r!==n&&s&&oC(xv,pv,I_,n,"updated"),n.updateDOM(r,a,Sm)){const i=m4(e,null);return t===null&&er(62),t.replaceChild(i,a),h4(e,null),i}if(It(r)&&It(n)){const i=n.__indent;(ip||i!==r.__indent)&&pz(a,i);const o=n.__format;if((ip||o!==r.__format)&&xz(a,o),s&&(Zae(r,n,a),ti(n)||n.isInline()||yz(r,n,a)),q_(n)&&(Ja+=o0,$d+=o0),(ip||n.__dir!==r.__dir)&&(r8(a,n),ti(n)&&!ip))for(const l of n.getChildren())It(l)&&r8(Tm(po,l.getKey()),l)}else{const i=n.getTextContent();if(zn(n)){const o=n.decorate(po,Sm);o!==null&&vz(e,o)}Ja+=i,$d+=i}if(!f4&&ti(n)&&n.__cachedText!==$d){const i=n.getWritable();i.__cachedText=$d,n=i}return a}function vz(e,t){let r=po._pendingDecorators;const n=po._decorators;if(r===null){if(n[e]===t)return;r=aU(po)}r[e]=t}function n5(e){let t=e.nextSibling;return t!==null&&t===po._blockCursorElement&&(t=t.nextSibling),t}function eie(e,t,r,n,s,a){Ja="",$d="",ip=n===$p,po=r,Sm=r._config,pv=r._nodes,I_=po._listeners.mutation,Qk=s,Zk=a,km=e._nodeMap,su=t._nodeMap,f4=t._readOnly,e8=new Map(r._keyToDOMMap);const i=new Map;return xv=i,Ay("root",null),po=void 0,pv=void 0,Qk=void 0,Zk=void 0,km=void 0,su=void 0,Sm=void 0,e8=void 0,xv=void 0,i}function s8(e){const t=e8.get(e);return t===void 0&&er(75,e),t}function Qr(e){return{type:e}}const wz=Qr("SELECTION_CHANGE_COMMAND"),tie=Qr("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),z7=Qr("CLICK_COMMAND"),om=Qr("DELETE_CHARACTER_COMMAND"),Sp=Qr("INSERT_LINE_BREAK_COMMAND"),yv=Qr("INSERT_PARAGRAPH_COMMAND"),kp=Qr("CONTROLLED_TEXT_INSERTION_COMMAND"),U7=Qr("PASTE_COMMAND"),a8=Qr("REMOVE_TEXT_COMMAND"),vv=Qr("DELETE_WORD_COMMAND"),wv=Qr("DELETE_LINE_COMMAND"),go=Qr("FORMAT_TEXT_COMMAND"),W7=Qr("UNDO_COMMAND"),H7=Qr("REDO_COMMAND"),rie=Qr("KEYDOWN_COMMAND"),bz=Qr("KEY_ARROW_RIGHT_COMMAND"),nie=Qr("MOVE_TO_END"),_z=Qr("KEY_ARROW_LEFT_COMMAND"),sie=Qr("MOVE_TO_START"),Sz=Qr("KEY_ARROW_UP_COMMAND"),kz=Qr("KEY_ARROW_DOWN_COMMAND"),p4=Qr("KEY_ENTER_COMMAND"),Tz=Qr("KEY_SPACE_COMMAND"),Cz=Qr("KEY_BACKSPACE_COMMAND"),Ez=Qr("KEY_ESCAPE_COMMAND"),Nz=Qr("KEY_DELETE_COMMAND"),Az=Qr("KEY_TAB_COMMAND"),aie=Qr("INSERT_TAB_COMMAND"),iie=Qr("INDENT_CONTENT_COMMAND"),BP=Qr("OUTDENT_CONTENT_COMMAND"),jz=Qr("DROP_COMMAND"),Pz=Qr("FORMAT_ELEMENT_COMMAND"),Mz=Qr("DRAGSTART_COMMAND"),Fz=Qr("DRAGOVER_COMMAND"),oie=Qr("DRAGEND_COMMAND"),L_=Qr("COPY_COMMAND"),G7=Qr("CUT_COMMAND"),i8=Qr("SELECT_ALL_COMMAND"),lie=Qr("CLEAR_EDITOR_COMMAND"),cie=Qr("CLEAR_HISTORY_COMMAND"),Gw=Qr("CAN_REDO_COMMAND"),Vw=Qr("CAN_UNDO_COMMAND"),uie=Qr("FOCUS_COMMAND"),die=Qr("BLUR_COMMAND"),fie=Qr("KEY_MODIFIER_COMMAND"),Od=Object.freeze({}),o8=30,l8=[["keydown",function(e,t){if(Wy=e.timeStamp,Dz=e.key,!t.isComposing()&&!Ar(t,rie,e)&&e.key!=null){if(s5&&hM(e))return El(t,(()=>{qw(t,a5)})),s5=!1,void(a5="");if((function(r){return Zn(r,"ArrowRight",{shiftKey:"any"})})(e))Ar(t,bz,e);else if((function(r){return Zn(r,"ArrowRight",Ld)})(e))Ar(t,nie,e);else if((function(r){return Zn(r,"ArrowLeft",{shiftKey:"any"})})(e))Ar(t,_z,e);else if((function(r){return Zn(r,"ArrowLeft",Ld)})(e))Ar(t,sie,e);else if((function(r){return Zn(r,"ArrowUp",{altKey:"any",shiftKey:"any"})})(e))Ar(t,Sz,e);else if((function(r){return Zn(r,"ArrowDown",{altKey:"any",shiftKey:"any"})})(e))Ar(t,kz,e);else if((function(r){return Zn(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(e))Hy=!0,Ar(t,p4,e);else if((function(r){return r.key===" "})(e))Ar(t,Tz,e);else if((function(r){return Lu&&Zn(r,"o",{ctrlKey:!0})})(e))e.preventDefault(),Hy=!0,Ar(t,Sp,!0);else if((function(r){return Zn(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(e))Hy=!1,Ar(t,p4,e);else if((function(r){return Zn(r,"Backspace",{shiftKey:"any"})||Lu&&Zn(r,"h",{ctrlKey:!0})})(e))hM(e)?Ar(t,Cz,e):(e.preventDefault(),Ar(t,om,!0));else if((function(r){return r.key==="Escape"})(e))Ar(t,Ez,e);else if((function(r){return Zn(r,"Delete",{})||Lu&&Zn(r,"d",{ctrlKey:!0})})(e))(function(r){return r.key==="Delete"})(e)?Ar(t,Nz,e):(e.preventDefault(),Ar(t,om,!1));else if((function(r){return Zn(r,"Backspace",fM)})(e))e.preventDefault(),Ar(t,vv,!0);else if((function(r){return Zn(r,"Delete",fM)})(e))e.preventDefault(),Ar(t,vv,!1);else if((function(r){return Lu&&Zn(r,"Backspace",{metaKey:!0})})(e))e.preventDefault(),Ar(t,wv,!0);else if((function(r){return Lu&&(Zn(r,"Delete",{metaKey:!0})||Zn(r,"k",{ctrlKey:!0}))})(e))e.preventDefault(),Ar(t,wv,!1);else if((function(r){return Zn(r,"b",Ld)})(e))e.preventDefault(),Ar(t,go,"bold");else if((function(r){return Zn(r,"u",Ld)})(e))e.preventDefault(),Ar(t,go,"underline");else if((function(r){return Zn(r,"i",Ld)})(e))e.preventDefault(),Ar(t,go,"italic");else if((function(r){return Zn(r,"Tab",{shiftKey:"any"})})(e))Ar(t,Az,e);else if((function(r){return Zn(r,"z",Ld)})(e))e.preventDefault(),Ar(t,W7,void 0);else if((function(r){return Lu?Zn(r,"z",{metaKey:!0,shiftKey:!0}):Zn(r,"y",{ctrlKey:!0})||Zn(r,"z",{ctrlKey:!0,shiftKey:!0})})(e))e.preventDefault(),Ar(t,H7,void 0);else{const r=t._editorState._selection;r===null||qt(r)?mM(e)&&(e.preventDefault(),Ar(t,i8,e)):(function(n){return Zn(n,"c",Ld)})(e)?(e.preventDefault(),Ar(t,L_,e)):(function(n){return Zn(n,"x",Ld)})(e)?(e.preventDefault(),Ar(t,G7,e)):mM(e)&&(e.preventDefault(),Ar(t,i8,e))}(function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey})(e)&&Ar(t,fie,e)}}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;d1(r)&&n!=="touch"&&n!=="pen"&&e.button===0&&El(t,(()=>{cM(r)||(u8=!0)}))}],["compositionstart",function(e,t){El(t,(()=>{const r=xr();if(qt(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();Vi(n.key),(e.timeStamp<Wy+o8||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||yr(s)&&s.getStyle()!==r.style)&&Ar(t,kp,Bae)}}))}],["compositionend",function(e,t){wm?gy=!0:Bp||!gv&&!l4?El(t,(()=>{qw(t,e.data)})):(s5=!0,a5=e.data)}],["input",function(e,t){e.stopPropagation(),El(t,(()=>{if(Ns(e.target)&&cM(e.target))return;const r=xr(),n=e.data,s=Bz(e);if(n!=null&&qt(r)&&Iz(r,s,n,e.timeStamp,!1)){gy&&(qw(t,n),gy=!1);const a=r.anchor.getNode(),i=lu(wc(t));if(i===null)return;const o=r.isBackward(),l=o?r.anchor.offset:r.focus.offset,u=o?r.focus.offset:r.anchor.offset;o4&&!r.isCollapsed()&&yr(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,l)+n+a.getTextContent().slice(l+u)===cU(i.anchorNode)||Ar(t,kp,n);const d=n.length;wm&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=d),gv||Bp||l4||!t.isComposing()||(Wy=0,Vi(null))}else aC(!1,t,n!==null?n:void 0),gy&&(qw(t,n||void 0),gy=!1);(function(){Gi();const a=Qs();fz(a)})()}),{event:e}),op=null}],["click",function(e,t){El(t,(()=>{const r=xr(),n=lu(wc(t)),s=u1();if(n){if(qt(r)){const a=r.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&r.isCollapsed()&&!ti(i)&&Us().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s))n.removeAllRanges(),r.dirty=!0;else if(e.detail===3&&!r.isCollapsed()&&i!==r.focus.getNode()){const o=(function(l,u){let d=l;for(;d!==Us()&&d!=null;){if(u(d))return d;d=d.getParent()}return null})(i,(l=>It(l)&&!l.isInline()));It(o)&&o.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=n.anchorNode;(Ns(a)||x0(a))&&Xi(K7(s,n,t,e))}}Ar(t,z7,e)}))}],["cut",Od],["copy",Od],["dragstart",Od],["dragover",Od],["dragend",Od],["paste",Od],["focus",Od],["blur",Od],["drop",Od]];o4&&l8.push(["beforeinput",(e,t)=>(function(r,n){const s=r.inputType,a=Bz(r);s==="deleteCompositionText"||wm&&uU(n)||s!=="insertCompositionText"&&El(n,(()=>{const i=xr();if(s==="deleteContentBackward"){if(i===null){const g=u1();if(!qt(g))return;Xi(g.clone())}if(qt(i)){const g=i.anchor.key===i.focus.key;if(o=r.timeStamp,Dz==="MediaLast"&&o<Wy+o8&&n.isComposing()&&g){if(Vi(null),Wy=0,setTimeout((()=>{El(n,(()=>{Vi(null)}))}),o8),qt(i)){const x=i.anchor.getNode();x.markDirty(),yr(x)||er(142),Lz(i,x)}}else{Vi(null),r.preventDefault();const x=i.anchor.getNode(),y=x.getTextContent(),v=x.canInsertTextAfter(),T=i.anchor.offset===0&&i.focus.offset===y.length;let k=EP&&g&&!T&&v;if(k&&i.isCollapsed()&&(k=!zn(g8(i.anchor,!0))),!k){Ar(n,om,!0);const b=xr();EP&&qt(b)&&b.isCollapsed()&&(Kh=b,setTimeout((()=>Kh=null)))}}return}}var o;if(!qt(i))return;const l=r.data;op!==null&&aC(!1,n,op),i.dirty&&op===null||!i.isCollapsed()||ti(i.anchor.getNode())||a===null||i.applyDOMRange(a),op=null;const u=i.anchor,d=i.focus,f=u.getNode(),h=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Ar(n,kp,r);break;case"insertFromComposition":Vi(null),Ar(n,kp,r);break;case"insertLineBreak":Vi(null),Ar(n,Sp,!1);break;case"insertParagraph":Vi(null),Hy&&!Bp?(Hy=!1,Ar(n,Sp,!1)):Ar(n,yv,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Ar(n,U7,r);break;case"deleteByComposition":(function(g,x){return g!==x||It(g)||It(x)||!lm(g)||!lm(x)})(f,h)&&Ar(n,a8,r);break;case"deleteByDrag":case"deleteByCut":Ar(n,a8,r);break;case"deleteContent":Ar(n,om,!1);break;case"deleteWordBackward":Ar(n,vv,!0);break;case"deleteWordForward":Ar(n,vv,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Ar(n,wv,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Ar(n,wv,!1);break;case"formatStrikeThrough":Ar(n,go,"strikethrough");break;case"formatBold":Ar(n,go,"bold");break;case"formatItalic":Ar(n,go,"italic");break;case"formatUnderline":Ar(n,go,"underline");break;case"historyUndo":Ar(n,W7,void 0);break;case"historyRedo":Ar(n,H7,void 0)}else{if(l===`
`)r.preventDefault(),Ar(n,Sp,!1);else if(l===o0)r.preventDefault(),Ar(n,yv,void 0);else if(l==null&&r.dataTransfer){const g=r.dataTransfer.getData("text/plain");r.preventDefault(),i.insertRawText(g)}else l!=null&&Iz(i,a,l,r.timeStamp,!0)?(r.preventDefault(),Ar(n,kp,l)):op=l;Oz=r.timeStamp}}))})(e,t)]);let Wy=0,Dz=null,Oz=0,op=null;const x4=new WeakMap;let c8=!1,u8=!1,Hy=!1,gy=!1,s5=!1,a5="",Kh=null,Rz=[0,"",0,"root",0];function Iz(e,t,r,n,s){const a=e.anchor,i=e.focus,o=a.getNode(),l=Qs(),u=lu(wc(l)),d=u!==null?u.anchorNode:null,f=a.key,h=l.getElementByKey(f),g=r.length;return f!==i.key||!yr(o)||(!s&&(!o4||Oz<n+50)||o.isDirty()&&g<2||oU(r))&&a.offset!==i.offset&&!o.isComposing()||Bd(o)||o.isDirty()&&g>1||(s||!o4)&&h!==null&&!o.isComposing()&&d!==zp(h)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||(function(x,y){if(y.isSegmented())return!0;if(!x.isCollapsed())return!1;const v=x.anchor.offset,T=y.getParentOrThrow(),k=lm(y);return v===0?!y.canInsertTextBefore()||!T.canInsertTextBefore()&&!y.isComposing()||k||(function(b){const E=b.getPreviousSibling();return(yr(E)||It(E)&&E.isInline())&&!E.canInsertTextAfter()})(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!T.canInsertTextAfter()&&!y.isComposing()||k)})(e,o)}function $P(e,t){return x0(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function zP(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:i}=e;c8&&(c8=!1,$P(n,s)&&$P(a,i)&&!Kh)||El(t,(()=>{if(!r)return void Xi(null);if(!c2(t,n,a))return;let o=xr();if(Kh&&qt(o)&&o.isCollapsed()){const l=o.anchor,u=Kh.anchor;(l.key===u.key&&l.offset===u.offset+1||l.offset===1&&u.getNode().is(l.getNode().getPreviousSibling()))&&(o=Kh.clone(),Xi(o))}if(Kh=null,qt(o)){const l=o.anchor,u=l.getNode();if(o.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(o.dirty=!0);const d=wc(t).event,f=d?d.timeStamp:performance.now(),[h,g,x,y,v]=Rz,T=Us(),k=t.isComposing()===!1&&T.getTextContent()==="";if(f<v+200&&l.offset===x&&l.key===y)Hb(o,h,g);else if(l.type==="text")yr(u)||er(141),Lz(o,u);else if(l.type==="element"&&!k){It(u)||er(259);const b=l.getNode();b.isEmpty()?(function(E,N){const P=N.getTextFormat(),M=N.getTextStyle();Hb(E,P,M)})(o,b):Hb(o,0,"")}}else{const d=l.key,f=o.focus.key,h=o.getNodes(),g=h.length,x=o.isBackward(),y=x?i:s,v=x?s:i,T=x?f:d,k=x?d:f;let b=Lae,E=!1;for(let N=0;N<g;N++){const P=h[N],M=P.getTextContentSize();if(yr(P)&&M!==0&&!(N===0&&P.__key===T&&y===M||N===g-1&&P.__key===k&&v===0)&&(E=!0,b&=P.getFormat(),b===0))break}o.format=E?b:0}}Ar(t,wz,void 0)}))}function Hb(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function Lz(e,t){Hb(e,t.getFormat(),t.getStyle())}function Bz(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function qw(e,t){const r=e._compositionKey;if(Vi(null),r!==null&&t!=null){if(t===""){const n=La(r),s=zp(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&yr(n)&&iC(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=xr();if(qt(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Ar(e,p4,null)}}}aC(!0,e,t)}function $z(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Tp=new Map;function zz(e){const t=Gie(e.target);if(t===null)return;const r=rU(t.anchorNode);if(r===null)return;u8&&(u8=!1,El(r,(()=>{const l=u1(),u=t.anchorNode;(Ns(u)||x0(u))&&Xi(K7(l,t,r,e))})));const n=sC(r),s=n[n.length-1],a=s._key,i=Tp.get(a),o=i||s;o!==r&&zP(t,o,!1),zP(t,r,!0),r!==s?Tp.set(a,r):i&&Tp.delete(a)}function UP(e){e._lexicalHandled=!0}function WP(e){return e._lexicalHandled===!0}function hie(e){const t=e.ownerDocument,r=x4.get(t);if(r===void 0)return;const n=r-1;n>=0||er(164),x4.set(t,n),n===0&&t.removeEventListener("selectionchange",zz);const s=G_(e);nC(s)?((function(i){if(i._parentEditor!==null){const o=sC(i),l=o[o.length-1]._key;Tp.get(l)===i&&Tp.delete(l)}else Tp.delete(i._key)})(s),e.__lexicalEditor=null):s&&er(198);const a=$z(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function d8(e,t,r){Gi();const n=e.__key,s=e.getParent();if(s===null)return;const a=(function(o){const l=xr();if(!qt(l)||!It(o))return l;const{anchor:u,focus:d}=l,f=u.getNode(),h=d.getNode();return p8(f,o)&&u.set(o.__key,0,"element"),p8(h,o)&&d.set(o.__key,0,"element"),l})(e);let i=!1;if(qt(a)&&t){const o=a.anchor,l=a.focus;o.key===n&&(v4(o,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),l.key===n&&(v4(l,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else io(a)&&t&&e.isSelected()&&e.selectPrevious();if(qt(a)&&t&&!i){const o=e.getIndexWithinParent();cm(e),y4(a,s,o,-1)}else cm(e);r||$o(s)||s.canBeEmpty()||!s.isEmpty()||d8(s,t),t&&a&&ti(s)&&s.isEmpty()&&s.selectEnd()}class l1{static getType(){const{ownNodeType:t}=dC(this);return t===void 0&&er(64,this.name),t}static clone(t){er(65,this.name)}$config(){return{}}config(t,r){const n=r.extends||Object.getPrototypeOf(this.constructor);return Object.assign(r,{extends:n,type:t}),{[t]:r}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Iie(this,t)}getType(){return this.__type}isInline(){er(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=La(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||xr();if(r==null)return!1;const n=r.getNodes().some((s=>s.__key===this.__key));if(yr(this))return n;if(qt(r)&&r.anchor.type==="element"&&r.focus.type==="element"){if(r.isCollapsed())return!1;const s=this.getParent();if(zn(this)&&this.isInline()&&s){const a=r.isBackward()?r.focus:r.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:La(t)}getParentOrThrow(){const t=this.getParent();return t===null&&er(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if($o(r))return It(t)||t===this&&zn(t)||er(194),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&er(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:La(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:La(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=It(this)?this:this.getParent(),n=It(t)?t:t.getParent(),s=r&&n?Vb(r,n):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const r=Vb(this,t);return r!==null&&(r.type==="descendant"||(r.type==="branch"?mU(r)===-1:(r.type!=="same"&&r.type!=="ancestor"&&er(279),!1)))}isParentOf(t){const r=Vb(this,t);return r!==null&&r.type==="ancestor"}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),n.push(a)),a===t)break;const o=It(a)?r?a.getFirstChild():a.getLastChild():null;if(o!==null){a=o;continue}const l=r?a.getNextSibling():a.getPreviousSibling();if(l!==null){a=l;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||n.push(u),u===t)break;let d=null,f=u;do{if(f===null&&er(68),d=r?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;d!==null||s.has(f.__key)||n.push(f)}while(d===null);a=d}return r||n.reverse(),n}isDirty(){const t=Qs()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=La(this.__key);return t===null&&er(113),t}getWritable(){Gi();const t=Jf(),r=Qs(),n=t._nodeMap,s=this.__key,a=this.getLatest(),i=r._cloneNotNeeded,o=xr();if(o!==null&&o.setCachedNodes(null),i.has(s))return _4(a),a;const l=cC(a);return i.add(s),_4(l),n.set(s,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){er(70)}updateDOM(t,r,n){er(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){er(18,this.name)}updateFromJSON(t){return(function(r,n){const s=r.getWritable(),a=n.$;let i=a;for(const o of gz(s).flatKeys)o in n&&(i!==void 0&&i!==a||(i={...a}),i[o]=n[o]);return(s.__state||i)&&Jae(r).updateFromJSON(i),s})(this,t)}static transform(){return null}remove(t){d8(this,!0,t)}replace(t,r){Gi();let n=xr();n!==null&&(n=n.clone()),d5(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,o=t.getWritable(),l=this.getParentOrThrow().getWritable(),u=l.__size;cm(o);const d=s.getPreviousSibling(),f=s.getNextSibling(),h=s.__prev,g=s.__next,x=s.__parent;if(d8(s,!1,!0),d===null?l.__first=i:d.getWritable().__next=i,o.__prev=h,f===null?l.__last=i:f.getWritable().__prev=i,o.__next=g,o.__parent=x,l.__size=u,r&&(It(this)&&It(o)||er(139),this.getChildren().forEach((y=>{o.append(y)}))),qt(n)){Xi(n);const y=n.anchor,v=n.focus;y.key===a&&qP(y,o),v.key===a&&qP(v,o)}return Sf()===a&&Vi(i),o}insertAfter(t,r=!0){Gi(),d5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=xr();let o=!1,l=!1;if(a!==null){const g=t.getIndexWithinParent();if(cm(s),qt(i)){const x=a.__key,y=i.anchor,v=i.focus;o=y.type==="element"&&y.key===x&&y.offset===g+1,l=v.type==="element"&&v.key===x&&v.offset===g+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),f=s.__key,h=n.__next;if(u===null?d.__last=f:u.getWritable().__prev=f,d.__size++,n.__next=f,s.__next=h,s.__prev=n.__key,s.__parent=n.__parent,r&&qt(i)){const g=this.getIndexWithinParent();y4(i,d,g+1);const x=d.__key;o&&i.anchor.set(x,g+2,"element"),l&&i.focus.set(x,g+2,"element")}return t}insertBefore(t,r=!0){Gi(),d5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.__key;cm(s);const i=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),l=n.__prev,u=this.getIndexWithinParent();i===null?o.__first=a:i.getWritable().__next=a,o.__size++,n.__prev=a,s.__prev=l,s.__next=n.__key,s.__parent=n.__parent;const d=xr();return r&&qt(d)&&y4(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return Es()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){Gi();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(It(n))return n.select();if(!yr(n)){const a=n.getIndexWithinParent()+1;return s.select(a,a)}return n.select(t,r)}selectNext(t,r){Gi();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(It(n))return n.select(0,0);if(!yr(n)){const a=n.getIndexWithinParent();return s.select(a,a)}return n.select(t,r)}markDirty(){this.getWritable()}reconcileObservedMutation(t,r){this.markDirty()}}class s2 extends l1{static getType(){return"linebreak"}static clone(t){return new s2(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(r){const n=r.parentElement;if(n!==null&&S4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&Kw(s)){const a=n.lastChild;if(a===r||a.previousSibling===r&&Kw(a))return!0}}return!1})(t)||(function(r){const n=r.parentElement;if(n!==null&&S4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&Kw(s))return!1;const a=n.lastChild;if(a===r||a.previousSibling===r&&Kw(a))return!0}return!1})(t)?null:{conversion:mie,priority:0}}}static importJSON(t){return Ju().updateFromJSON(t)}}function mie(e){return{node:Ju()}}function Ju(){return Wo(new s2)}function Jd(e){return e instanceof s2}function Kw(e){return x0(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function i5(e,t){return 16&t?"code":t&F7?"mark":32&t?"sub":64&t?"sup":null}function o5(e,t){return 1&t?"strong":2&t?"em":"span"}function Uz(e,t,r,n,s){const a=n.classList;let i=Cp(s,"base");i!==void 0&&a.add(...i),i=Cp(s,"underlineStrikethrough");let o=!1;const l=t&u4&&t&c4;i!==void 0&&(r&u4&&r&c4?(o=!0,l||a.add(...i)):l&&a.remove(...i));for(const u in _m){const d=_m[u];if(i=Cp(s,u),i!==void 0)if(r&d){if(o&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!l||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function Wz(e,t,r){const n=t.firstChild,s=r.isComposing(),a=e+(s?R_:"");if(n==null)t.textContent=a;else{const i=n.nodeValue;if(i!==a)if(s||wm){const[o,l,u]=(function(d,f){const h=d.length,g=f.length;let x=0,y=0;for(;x<h&&x<g&&d[x]===f[x];)x++;for(;y+x<h&&y+x<g&&d[h-y-1]===f[g-y-1];)y++;return[x,h-x-y,f.slice(x,g-y)]})(i,a);l!==0&&n.deleteData(o,l),n.insertData(o,u)}else n.nodeValue=a}}function HP(e,t,r,n,s,a){Wz(s,e,t);const i=a.theme.text;i!==void 0&&Uz(0,0,n,e,i)}function Yw(e,t){const r=document.createElement(t);return r.appendChild(e),r}class Xf extends l1{static getType(){return"text"}static clone(t){return new Xf(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return Wae[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Sf()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=_m[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return b4(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const n=this.__format,s=i5(0,n),a=o5(0,n),i=s===null?a:s,o=document.createElement(i);let l=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),s!==null&&(l=document.createElement(a),o.appendChild(l)),HP(l,this,0,n,this.__text,t);const u=this.__style;return u!==""&&(o.style.cssText=u),o}updateDOM(t,r,n){const s=this.__text,a=t.__format,i=this.__format,o=i5(0,a),l=i5(0,i),u=o5(0,a),d=o5(0,i);if((o===null?u:o)!==(l===null?d:l))return!0;if(o===l&&u!==d){const y=r.firstChild;y==null&&er(48);const v=document.createElement(d);return HP(v,this,0,i,s,n),r.replaceChild(v,y),!1}let f=r;l!==null&&o!==null&&(f=r.firstChild,f==null&&er(49)),Wz(s,f,this);const h=n.theme.text;h!==void 0&&a!==i&&Uz(0,a,i,f,h);const g=t.__style,x=this.__style;return g!==x&&(r.style.cssText=x),!1}static importDOM(){return{"#text":()=>({conversion:yie,priority:0}),b:()=>({conversion:pie,priority:0}),code:()=>({conversion:Rd,priority:0}),em:()=>({conversion:Rd,priority:0}),i:()=>({conversion:Rd,priority:0}),mark:()=>({conversion:Rd,priority:0}),s:()=>({conversion:Rd,priority:0}),span:()=>({conversion:gie,priority:0}),strong:()=>({conversion:Rd,priority:0}),sub:()=>({conversion:Rd,priority:0}),sup:()=>({conversion:Rd,priority:0}),u:()=>({conversion:Rd,priority:0})}}static importJSON(t){return ca().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return Ns(r)||er(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=Yw(r,"b")),this.hasFormat("italic")&&(r=Yw(r,"i")),this.hasFormat("strikethrough")&&(r=Yw(r,"s")),this.hasFormat("underline")&&(r=Yw(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?_m[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?$ae[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=b4(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=Uae[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){Gi();let n=t,s=r;const a=xr(),i=this.getTextContent(),o=this.__key;if(typeof i=="string"){const l=i.length;n===void 0&&(n=l),s===void 0&&(s=l)}else n=0,s=0;if(!qt(a))return Vz(o,n,o,s,"text","text");{const l=Sf();l!==a.anchor.key&&l!==a.focus.key||Vi(o),a.setTextNodeRange(this,n,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const a=this.getWritable(),i=a.__text,o=n.length;let l=t;l<0&&(l=o+l,l<0&&(l=0));const u=xr();if(s&&qt(u)){const f=t+o;u.setTextNodeRange(a,f,a,f)}const d=i.slice(0,l)+n+i.slice(l+r);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Gi();const r=this.getLatest(),n=r.getTextContent();if(n==="")return[];const s=r.__key,a=Sf(),i=n.length;t.sort(((j,A)=>j-A)),t.push(i);const o=[],l=t.length;for(let j=0,A=0;j<i&&A<=l;A++){const F=t[A];F>j&&(o.push(n.slice(j,F)),j=F)}const u=o.length;if(u===1)return[r];const d=o[0],f=r.getParent();let h;const g=r.getFormat(),x=r.getStyle(),y=r.__detail;let v=!1,T=null,k=null;const b=xr();if(qt(b)){const[j,A]=b.isBackward()?[b.focus,b.anchor]:[b.anchor,b.focus];j.type==="text"&&j.key===s&&(T=j),A.type==="text"&&A.key===s&&(k=A)}r.isSegmented()?(h=ca(d),h.__format=g,h.__style=x,h.__detail=y,h.__state=FP(r,h),v=!0):h=r.setTextContent(d);const E=[h];for(let j=1;j<u;j++){const A=ca(o[j]);A.__format=g,A.__style=x,A.__detail=y,A.__state=FP(r,A);const F=A.__key;a===s&&Vi(F),E.push(A)}const N=T?T.offset:null,P=k?k.offset:null;let M=0;for(const j of E){if(!T&&!k)break;const A=M+j.getTextContentSize();if(T!==null&&N!==null&&N<=A&&N>=M&&(T.set(j.getKey(),N-M,"text"),N<A&&(T=null)),k!==null&&P!==null&&P<=A&&P>=M){k.set(j.getKey(),P-M,"text");break}M=A}if(f!==null){(function(F){const L=F.getPreviousSibling(),V=F.getNextSibling();L!==null&&_4(L),V!==null&&_4(V)})(this);const j=f.getWritable(),A=this.getIndexWithinParent();v?(j.splice(A,0,E),this.remove()):j.splice(A,1,E),qt(b)&&y4(b,f,A,u-1)}return E}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||er(50);const n=this.__key,s=t.__key,a=this.__text,i=a.length;Sf()===s&&Vi(n);const o=xr();if(qt(o)){const f=o.anchor,h=o.focus;f!==null&&f.key===s&&eM(f,r,n,t,i),h!==null&&h.key===s&&eM(h,r,n,t,i)}const l=t.__text,u=r?l+a:a+l;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function gie(e){return{forChild:V7(e.style),node:null}}function pie(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:V7(t.style,r?void 0:"bold"),node:null}}const GP=new WeakMap;function xie(e){if(!Ns(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function yie(e){const t=e;e.parentElement===null&&er(129);let r=t.textContent||"";if((function(n){let s,a=n.parentNode;const i=[n];for(;a!==null&&(s=GP.get(a))===void 0&&!xie(a);)i.push(a),a=a.parentNode;const o=s===void 0?a:s;for(let l=0;l<i.length;l++)GP.set(i[l],o);return o})(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],a=n.length;for(let i=0;i<a;i++){const o=n[i];o===`
`||o===`\r
`?s.push(Ju()):o==="	"?s.push(c1()):o!==""&&s.push(ca(o))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=VP(n,!1))!==null;){const a=n.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=VP(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:ca(r)}}function VP(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const a=r.parentElement;if(a===null)return null;r=a}if(r=n,Ns(r)){const a=r.style.display;if(a===""&&!v8(r)||a!==""&&!a.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(x0(r))return r;if(r.nodeName==="BR")return null}}const vie={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Rd(e){const t=vie[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:V7(e.style,t),node:null}}function ca(e=""){return Wo(new Xf(e))}function yr(e){return e instanceof Xf}function V7(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",a=n.includes("line-through"),i=e.fontStyle==="italic",o=n.includes("underline"),l=e.verticalAlign;return u=>(yr(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),o&&!u.hasFormat("underline")&&u.toggleFormat("underline"),l!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),l!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class a2 extends Xf{static getType(){return"tab"}static clone(t){return new a2(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const r=super.createDOM(t),n=Cp(t.theme,"tab");return n!==void 0&&r.classList.add(...n),r}static importJSON(t){return c1().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&er(126),super.setTextContent("	")}spliceText(t,r,n,s){return n===""&&r===0||n==="	"&&r===1||er(286),this}setDetail(t){return t!==2&&er(127),this}setMode(t){return t!=="normal"&&er(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function c1(){return Wo(new a2)}function B_(e){return e instanceof a2}class wie{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:hU(mc(l0(this,"next")),mc(l0(t,"next")))<0}getNode(){const t=La(this.key);return t===null&&er(20),t}set(t,r,n,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===r&&this.type===n||(this.key=t,this.offset=r,this.type=n,i2()||(Sf()===i&&Vi(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function Qu(e,t,r){return new wie(e,t,r)}function l5(e,t){let r=t.__key,n=e.offset,s="element";if(yr(t)){s="text";const a=t.getTextContentSize();n>a&&(n=a)}else if(!It(t)){const a=t.getNextSibling();if(yr(a))r=a.__key,n=0,s="text";else{const i=t.getParent();i&&(r=i.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function qP(e,t){if(It(t)){const r=t.getLastDescendant();It(r)||yr(r)?l5(e,r):l5(e,t)}else l5(e,t)}class $_{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!io(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every((s=>n.has(s)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new $_(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let a;if(yr(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<n;i++)r[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const a=La(s);a!==null&&n.push(a)}return i2()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}deleteNodes(){const t=this.getNodes();if((xr()||u1())===this&&t[0]){const r=Yi(t[0],"next");soe(Lf(r,r))}for(const r of t)r.remove()}}function qt(e){return e instanceof Hm}class Hm{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!qt(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=(function(n){const s=[],[a,i]=n.getTextSlices();a&&s.push(a.caret.origin);const o=new Set,l=new Set;for(const u of n)if(Yu(u)){const{origin:d}=u;s.length===0?o.add(d):(l.add(d),s.push(d))}else{const{origin:d}=u;It(d)&&l.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),Nm(n.focus)&&It(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=bc(n.focus.origin,"previous");Yu(u)&&o.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=mC(u))o.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!It(u)||l.has(u)||u.isEmpty()||o.has(u))break;s.pop()}if(s.length===0&&n.isCollapsed()){const u=mc(n.anchor),d=mc(n.anchor.getFlipped()),f=g=>jf(g)?g.origin:g.getNodeAtCaret(),h=f(u)||f(d)||(n.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(h)}return s})(pU(wM(this),"next"));return i2()||(this._cachedNodes=r),r}setTextNodeRange(t,r,n,s){this.anchor.set(t.__key,r,"text"),this.focus.set(n.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[o,l]=f8(this);let u="",d=!0;for(let f=0;f<t.length;f++){const h=t[f];if(It(h)&&!h.isInline())d||(u+=`
`),d=!h.isEmpty();else if(d=!1,yr(h)){let g=h.getTextContent();h===r?h===n?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(g=o<l?g.slice(o,l):g.slice(l,o)):g=i?g.slice(o):g.slice(l):h===n&&(g=i?g.slice(0,l):g.slice(0,o)),u+=g}else!zn(h)&&!Jd(h)||h===n&&this.isCollapsed()||(u+=h.getTextContent())}return u}applyDOMRange(t){const r=Qs(),n=r.getEditorState()._selection,s=Gz(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),d4(this)}clone(){const t=this.anchor,r=this.focus;return new Hm(Qu(t.key,t.offset,t.type),Qu(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=b4(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=_m[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let a=0;a<s;a++){const i=r[a];i===`
`||i===`\r
`?n.push(Ju()):i==="	"?n.push(c1()):n.push(ca(i))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,a=this.style;let i=r,o=n;!this.isCollapsed()&&n.isBefore(r)&&(i=n,o=r),i.type==="element"&&(function(v,T,k,b){const E=v.getNode(),N=E.getChildAtIndex(v.offset),P=ca();if(P.setFormat(k),P.setStyle(b),Z7(N))N.splice(0,0,[P]);else{const M=ti(E)?Es().append(P):P;N===null?E.append(M):N.insertBefore(M)}v.is(T)&&T.set(P.__key,0,"text"),v.set(P.__key,0,"text")})(i,o,s,a),o.type==="element"&&jm(o,mc(l0(o,"next")));const l=i.offset;let u=o.offset;const d=this.getNodes(),f=d.length;let h=d[0];yr(h)||er(26);const g=h.getTextContent().length,x=h.getParentOrThrow();let y=d[f-1];if(f===1&&o.type==="element"&&(u=g,o.set(i.key,u,"text")),this.isCollapsed()&&l===g&&(Bd(h)||!h.canInsertTextAfter()||!x.canInsertTextAfter()&&h.getNextSibling()===null)){let v=h.getNextSibling();if(yr(v)&&v.canInsertTextBefore()&&!Bd(v)||(v=ca(),v.setFormat(s),v.setStyle(a),x.canInsertTextAfter()?h.insertAfter(v):x.insertAfter(v)),v.select(0,0),h=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(Bd(h)||!h.canInsertTextBefore()||!x.canInsertTextBefore()&&h.getPreviousSibling()===null)){let v=h.getPreviousSibling();if(yr(v)&&!Bd(v)||(v=ca(),v.setFormat(s),x.canInsertTextBefore()?h.insertBefore(v):x.insertBefore(v)),v.select(),h=v,t!=="")return void this.insertText(t)}else if(h.isSegmented()&&l!==g){const v=ca(h.getTextContent());v.setFormat(s),h.replace(v),h=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!x.canInsertTextBefore()||!x.canInsertTextAfter()||It(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),Hz(this.anchor,this.focus,null),void this.insertText(t)}if(f===1){if(lm(h)){const b=ca(t);return b.select(),void h.replace(b)}const v=h.getFormat(),T=h.getStyle();if(l!==u||v===s&&T===a){if(B_(h)){const b=ca(t);return b.setFormat(s),b.setStyle(a),b.select(),void h.replace(b)}}else{if(h.getTextContent()!==""){const b=ca(t);if(b.setFormat(s),b.setStyle(a),b.select(),l===0)h.insertBefore(b,!1);else{const[E]=h.splitText(l);E.insertAfter(b,!1)}return void(b.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}h.setFormat(s),h.setStyle(a)}const k=u-l;h=h.spliceText(l,k,t,!0),h.getTextContent()===""?h.remove():this.anchor.type==="text"&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=T))}else{const v=new Set([...h.getParentKeys(),...y.getParentKeys()]),T=It(h)?h:h.getParentOrThrow();let k=It(y)?y:y.getParentOrThrow(),b=y;if(!T.is(k)&&k.isInline())do b=k,k=k.getParentOrThrow();while(k.isInline());if(o.type==="text"&&(u!==0||y.getTextContent()==="")||o.type==="element"&&y.getIndexWithinParent()<u)if(yr(y)&&!lm(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const j=ca(y.getTextContent());y.replace(j),y=j}ti(o.getNode())||o.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const j=y.getParentOrThrow();j.canBeEmpty()||j.getChildrenSize()!==1?y.remove():j.remove()}else v.add(y.__key);const E=k.getChildren(),N=new Set(d),P=T.is(k),M=T.isInline()&&h.getNextSibling()===null?T:h;for(let j=E.length-1;j>=0;j--){const A=E[j];if(A.is(h)||It(A)&&A.isParentOf(h))break;A.isAttached()&&(!N.has(A)||A.is(b)?P||M.insertAfter(A,!1):A.remove())}if(!P){let j=k,A=null;for(;j!==null;){const F=j.getChildren(),L=F.length;(L===0||F[L-1].is(A))&&(v.delete(j.__key),A=j),j=j.getParent()}}if(lm(h))if(l===g)h.select();else{const j=ca(t);j.select(),h.replace(j)}else h=h.spliceText(l,g-l,t,!0),h.getTextContent()===""?h.remove():h.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let j=1;j<f;j++){const A=d[j],F=A.__key;v.has(F)||A.remove()}}}removeText(){const t=xr()===this;qb(this,aoe(wM(this))),t&&xr()!==this&&Xi(this)}formatText(t,r=null){if(this.isCollapsed())return this.toggleFormat(t),void Vi(null);const n=this.getNodes(),s=[];for(const E of n)yr(E)&&s.push(E);const a=E=>{n.forEach((N=>{if(It(N)){const P=N.getFormatFlags(t,E);N.setTextFormat(P)}}))},i=s.length;if(i===0)return this.toggleFormat(t),Vi(null),void a(r);const o=this.anchor,l=this.focus,u=this.isBackward(),d=u?l:o,f=u?o:l;let h=0,g=s[0],x=d.type==="element"?0:d.offset;if(d.type==="text"&&x===g.getTextContentSize()&&(h=1,g=s[1],x=0),g==null)return;const y=g.getFormatFlags(t,r);a(y);const v=i-1;let T=s[v];const k=f.type==="text"?f.offset:T.getTextContentSize();if(g.is(T)){if(x===k)return;if(Bd(g)||x===0&&k===g.getTextContentSize())g.setFormat(y);else{const E=g.splitText(x,k),N=x===0?E[0]:E[1];N.setFormat(y),d.type==="text"&&d.set(N.__key,0,"text"),f.type==="text"&&f.set(N.__key,k-x,"text")}return void(this.format=y)}x===0||Bd(g)||([,g]=g.splitText(x),x=0),g.setFormat(y);const b=T.getFormatFlags(t,y);k>0&&(k===T.getTextContentSize()||Bd(T)||([T]=T.splitText(k)),T.setFormat(b));for(let E=h+1;E<v;E++){const N=s[E],P=N.getFormatFlags(t,b);N.setFormat(P)}d.type==="text"&&d.set(g.__key,x,"text"),f.type==="text"&&f.set(T.__key,k,"text"),this.format=y|b}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const x=xr();return qt(x)||er(134),x.insertNodes(t)}const r=(this.isBackward()?this.focus:this.anchor).getNode(),n=h5(r,hc),s=t[t.length-1];if(It(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const x=c5(this);n.splice(x,0,t),s.selectEnd()}return}if(!t.some((x=>(It(x)||zn(x))&&!x.isInline()))){It(n)||er(211,r.constructor.name,r.getType());const x=c5(this);return n.splice(x,0,t),void s.selectEnd()}const a=(function(x){const y=Es();let v=null;for(let T=0;T<x.length;T++){const k=x[T],b=Jd(k);if(b||zn(k)&&k.isInline()||It(k)&&k.isInline()||yr(k)||k.isParentRequired()){if(v===null&&(v=k.createParentElementNode(),y.append(v),b))continue;v!==null&&v.append(k)}else y.append(k),v=null}return y})(t),i=a.getLastDescendant(),o=a.getChildren(),l=!It(n)||!n.isEmpty()?this.insertParagraph():null,u=o[o.length-1];let d=o[0];var f;It(f=d)&&hc(f)&&!f.isEmpty()&&It(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(It(n)||er(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(n===null&&er(212,r.constructor.name,r.getType()),(function(x,y,v){const T=y.getParentOrThrow().getLastChild();let k=y;const b=[y];for(;k!==T;)k.getNextSibling()||er(140),k=k.getNextSibling(),b.push(k);let E=x;for(const N of b)E=E.insertAfter(N)})(n,d));const h=h5(i,hc);l&&It(h)&&(l.canMergeWhenEmpty()||hc(u))&&(h.append(...l.getChildren()),l.remove()),It(n)&&n.isEmpty()&&n.remove(),i.selectEnd();const g=It(n)?n.getLastChild():null;Jd(g)&&h!==n&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=Es();return Us().splice(this.anchor.offset,0,[i]),i.select(),i}const t=c5(this),r=h5(this.anchor.getNode(),hc);It(r)||er(213);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],a=r.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const r=Ju();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,a=this.focus;let i=t[0],o=t[n];const[l,u]=f8(this);if(r===0)return[];if(r===1){if(yr(i)&&!this.isCollapsed()){const f=l>u?u:l,h=l>u?l:u,g=i.splitText(f,h),x=f===0?g[0]:g[1];return x!=null?[x]:[]}return[i]}const d=s.isBefore(a);if(yr(i)){const f=d?l:u;f===i.getTextContentSize()?t.shift():f!==0&&([,i]=i.splitText(f),t[0]=i)}if(yr(o)){const f=o.getTextContent().length,h=d?u:l;h===0?t.pop():h!==f&&([o]=o.splitText(h),t[n]=o)}return t}modify(t,r,n){if(tM(this,t,r,n))return;const s=t==="move",a=Qs(),i=lu(wc(a));if(!i)return;const o=a._blockCursorElement,l=a._rootElement,u=this.focus.getNode();if(l===null||o===null||!It(u)||u.isInline()||u.canBeEmpty()||x8(o,a,l),this.dirty){let d=Tm(a,this.anchor.key),f=Tm(a,this.focus.key);this.anchor.type==="text"&&(d=zp(d)),this.focus.type==="text"&&(f=zp(f)),d&&f&&qz(i,d,this.anchor.offset,f,this.focus.offset)}if((function(d,f,h,g){d.modify(f,h,g)})(i,t,r?"backward":"forward",n),i.rangeCount>0){const d=i.getRangeAt(0),f=this.anchor.getNode(),h=ti(f)?f:Wie(f);if(this.applyDOMRange(d),this.dirty=!0,!s){const g=this.getNodes(),x=[];let y=!1;for(let v=0;v<g.length;v++){const T=g[v];p8(T,h)?x.push(T):y=!0}if(y&&x.length>0)if(r){const v=x[0];It(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=x[x.length-1];It(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||(function(v){const T=v.focus,k=v.anchor,b=k.key,E=k.offset,N=k.type;k.set(T.key,T.offset,T.type,!0),T.set(b,E,N,!0)})(this)}}n==="lineboundary"&&tM(this,t,r,n,"decorators")}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&It(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),a=r.getNextSibling()||(s===null?null:s.getNextSibling());if(It(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const a=pC(l0(n,t?"previous":"next"));if(a.getTextSlices().every((o=>o===null||o.distance===0))){let o={type:"initial"};for(const l of a.iterNodeCarets("shadowRoot"))if(Yu(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(o.type==="merge-block")break;if(It(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=mc(l);qb(this,Lf(u,u)),a.anchor.origin.remove()}return}o.type!=="merge-next-block"&&o.type!=="merge-block"||(o={block:o.block,caret:l,type:"merge-block"})}}else{if(o.type==="merge-block")break;if(Nm(l)){if(It(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(a.anchor.origin))break}else o={block:l.origin,type:"merge-next-block"};continue}if(zn(l.origin)){if(!l.origin.isIsolated())if(o.type==="merge-next-block"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&It(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=q7();u.add(l.origin.getKey()),Xi(u)}else l.origin.remove();return}break}}if(o.type==="merge-block"){const{caret:l,block:u}=o;return qb(this,Lf(!l.origin.isEmpty()&&u.isEmpty()?yC(Yi(u,l.direction)):a.anchor,l)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&YP(this,n.getNode()))return}else{const o=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){const l=i.offset,u=o.getTextContentSize();if(o.is(s)||t&&l!==u||!t&&l!==0)return void XP(o,t,l)}else if(s!==null&&s.isSegmented()){const l=n.offset,u=s.getTextContentSize();if(s.is(o)||t&&l!==0||!t&&l!==u)return void XP(s,t,l)}(function(l,u){const d=l.anchor,f=l.focus,h=d.getNode(),g=f.getNode();if(h===g&&d.type==="text"&&f.type==="text"){const x=d.offset,y=f.offset,v=x<y,T=v?x:y,k=v?y:x,b=k-1;T!==b&&(function(E){return!(oU(E)||bie(E))})(h.getTextContent().slice(T,k))&&(u?f.set(f.key,b,f.type):d.set(d.key,b,d.type))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&ti(n.getParent())&&n.getPreviousSibling()===null&&YP(this,n)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function io(e){return e instanceof $_}function KP(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function f8(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[KP(r),KP(n)]}function YP(e,t){for(let r=t;r;r=r.getParent()){if(It(r)){if(r.collapseAtStart(e))return!0;if($o(r))break}if(r.getPreviousSibling())break}return!1}const bie=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function XP(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,o=0;for(let u=0;u<a;u++){const d=u===a-1;if(o=i,i+=s[u].length,t&&i===r||i>r||d){s.splice(u,1),d&&(o=void 0);break}}const l=s.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(o,o))}function JP(e,t,r,n){let s,a=t;if(Ns(e)){let i=!1;const o=e.childNodes,l=o.length,u=n._blockCursorElement;a===l&&(i=!0,a=l-1);let d=o[a],f=!1;if(d===u)d=o[a+1],f=!0;else if(u!==null){const h=u.parentNode;e===h&&t>Array.prototype.indexOf.call(h.children,u)&&a--}if(s=yp(d),yr(s))a=Pf(s,i?"next":"previous");else{let h=yp(e);if(h===null)return null;if(It(h)){const g=n.getElementByKey(h.getKey());g===null&&er(214),[h,a]=h.getDOMSlot(g).resolveChildIndex(h,g,e,t),It(h)||er(215),i&&a>=h.getChildrenSize()&&(a=Math.max(0,h.getChildrenSize()-1));let y=h.getChildAtIndex(a);if(It(y)&&(function(v,T,k){const b=v.getParent();return k===null||b===null||!b.canBeEmpty()||b!==k.getNode()})(y,0,r)){const v=i?y.getLastDescendant():y.getFirstDescendant();v===null?h=y:(y=v,h=It(y)?y:y.getParentOrThrow()),a=0}yr(y)?(s=y,h=null,a=Pf(y,i?"next":"previous")):y!==h&&i&&!f&&(It(h)||er(216),a=Math.min(h.getChildrenSize(),a+1))}else{const g=h.getIndexWithinParent();a=t===0&&zn(h)&&yp(e)===h?g:g+1,h=h.getParentOrThrow()}if(It(h))return Qu(h.__key,a,"element")}}else s=yp(e);return yr(s)?Qu(s.__key,Pf(s,a,"clamp"),"text"):null}function QP(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((r||!t)&&a===null&&It(i)&&i.isInline()){const o=i.getPreviousSibling();yr(o)&&e.set(o.__key,o.getTextContent().length,"text")}}else It(a)&&!r&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):yr(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(n===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&It(a)&&a.isInline())e.set(a.__key,0,"element");else if((r||t)&&a===null&&It(i)&&i.isInline()&&!i.canInsertTextAfter()){const o=i.getNextSibling();yr(o)&&e.set(o.__key,0,"text")}}}function Hz(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);QP(e,n,s),QP(t,!n,s),s&&t.set(e.key,e.offset,e.type);const a=Qs();if(a.isComposing()&&a._compositionKey!==e.key&&qt(r)){const i=r.anchor,o=r.focus;e.set(i.key,i.offset,i.type,!0),t.set(o.key,o.offset,o.type,!0)}}}function Gz(e,t,r,n,s,a){if(e===null||r===null||!c2(s,e,r))return null;const i=JP(e,t,qt(a)?a.anchor:null,s);if(i===null)return null;const o=JP(r,n,qt(a)?a.focus:null,s);if(o===null)return null;if(i.type==="element"&&o.type==="element"){const l=yp(e),u=yp(r);if(zn(l)&&zn(u))return null}return Hz(i,o,a),[i,o]}function h8(e){return It(e)&&!e.isInline()}function Vz(e,t,r,n,s,a){const i=Jf(),o=new Hm(Qu(e,t,s),Qu(r,n,a),0,"");return o.dirty=!0,i._selection=o,o}function z_(){const e=Qu("root",0,"element"),t=Qu("root",0,"element");return new Hm(e,t,0,"")}function q7(){return new $_(new Set)}function K7(e,t,r,n){const s=r._window;if(s===null)return null;const a=n||s.event,i=a?a.type:void 0,o=i==="selectionchange",l=!Jk&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,f,h;if(qt(e)&&!l)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,f=t.anchorOffset,h=t.focusOffset,o&&qt(e)&&!c2(r,u,d))return e.clone();const g=Gz(u,f,d,h,r,e);if(g===null)return null;const[x,y]=g;return new Hm(x,y,qt(e)?e.format:0,qt(e)?e.style:"")}function xr(){return Jf()._selection}function u1(){return Qs()._editorState._selection}function y4(e,t,r,n=1){const s=e.anchor,a=e.focus,i=s.getNode(),o=a.getNode();if(!t.is(i)&&!t.is(o))return;const l=t.__key;if(e.isCollapsed()){const u=s.offset;if(r<=u&&n>0||r<u&&n<0){const d=Math.max(0,u+n);s.set(l,d,"element"),a.set(l,d,"element"),ZP(e)}}else{const u=e.isBackward(),d=u?a:s,f=d.getNode(),h=u?s:a,g=h.getNode();if(t.is(f)){const x=d.offset;(r<=x&&n>0||r<x&&n<0)&&d.set(l,Math.max(0,x+n),"element")}if(t.is(g)){const x=h.offset;(r<=x&&n>0||r<x&&n<0)&&h.set(l,Math.max(0,x+n),"element")}}ZP(e)}function ZP(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,a=t.getNode(),i=n.getNode();if(e.isCollapsed()){if(!It(a))return;const o=a.getChildrenSize(),l=r>=o,u=l?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(yr(u)){let d=0;l&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),n.set(u.__key,d,"text")}}else{if(It(a)){const o=a.getChildrenSize(),l=r>=o,u=l?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(yr(u)){let d=0;l&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(It(i)){const o=i.getChildrenSize(),l=s>=o,u=l?i.getChildAtIndex(o-1):i.getChildAtIndex(s);if(yr(u)){let d=0;l&&(d=u.getTextContentSize()),n.set(u.__key,d,"text")}}}}function v4(e,t,r,n,s){let a=null,i=0,o=null;n!==null?(a=n.__key,yr(n)?(i=n.getTextContentSize(),o="text"):It(n)&&(i=n.getChildrenSize(),o="element")):s!==null&&(a=s.__key,yr(s)?o="text":It(s)&&(o="element")),a!==null&&o!==null?e.set(a,i,o):(i=t.getIndexWithinParent(),i===-1&&(i=r.getChildrenSize()),e.set(r.__key,i,"element"))}function eM(e,t,r,n,s){e.type==="text"?e.set(r,e.offset+(t?0:s),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function qz(e,t,r,n,s){try{e.setBaseAndExtent(t,r,n,s)}catch{}}function _ie(e,t,r,n,s,a,i){const o=n.anchorNode,l=n.focusNode,u=n.anchorOffset,d=n.focusOffset,f=document.activeElement;if(s.has(Zz)&&f!==a||f!==null&&rC(f))return;if(!qt(t))return void(e!==null&&c2(r,o,l)&&n.removeAllRanges());const h=t.anchor,g=t.focus,x=h.key,y=g.key,v=Tm(r,x),T=Tm(r,y),k=h.offset,b=g.offset,E=t.format,N=t.style,P=t.isCollapsed();let M=v,j=T,A=!1;if(h.type==="text"){M=zp(v);const ee=h.getNode();A=ee.getFormat()!==E||ee.getStyle()!==N}else qt(e)&&e.anchor.type==="text"&&(A=!0);var F,L,V,J,ne;if(g.type==="text"&&(j=zp(T)),M!==null&&j!==null&&(P&&(e===null||A||qt(e)&&(e.format!==E||e.style!==N))&&(F=E,L=N,V=k,J=x,ne=performance.now(),Rz=[F,L,V,J,ne]),u!==k||d!==b||o!==M||l!==j||n.type==="Range"&&P||(f!==null&&a.contains(f)||a.focus({preventScroll:!0}),h.type==="element"))){if(qz(n,M,k,j,b),!s.has(Aie)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const ee=qt(t)&&t.anchor.type==="element"?M.childNodes[k]||null:n.rangeCount>0?n.getRangeAt(0):null;if(ee!==null){let ie;if(ee instanceof Text){const B=document.createRange();B.selectNode(ee),ie=B.getBoundingClientRect()}else ie=ee.getBoundingClientRect();(function(B,Y,I){const H=dU(I),W=lC(H);if(H===null||W===null)return;let{top:R,bottom:z}=Y,G=0,Q=0,re=I;for(;re!==null;){const q=re===H.body;if(q)G=0,Q=wc(B).innerHeight;else{const ce=re.getBoundingClientRect();G=ce.top,Q=ce.bottom}let se=0;if(R<G?se=-(G-R):z>Q&&(se=z-Q),se!==0)if(q)W.scrollBy(0,se);else{const ce=re.scrollTop;re.scrollTop+=se;const pe=re.scrollTop-ce;R-=pe,z-=pe}if(q)break;re=u2(re)}})(r,ie,a)}}c8=!0}}function Sie(e){let t=xr()||u1();t===null&&(t=Us().selectEnd()),t.insertNodes(e)}function c5(e){let t=e;e.isCollapsed()||t.removeText();const r=xr();qt(r)&&(t=r),qt(t)||er(161);const n=t.anchor;let s=n.getNode(),a=n.offset;for(;!hc(s);){const i=s;if([s,a]=kie(s,a),i.is(s))break}return a}function kie(e,t){const r=e.getParent();if(!r){const s=Es();return Us().append(s),s.select(),[Us(),0]}if(yr(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const a=t===0?0:1;return[r,s[0].getIndexWithinParent()+a]}if(!It(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new Hm(Qu(e.__key,t,"element"),Qu(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}function tM(e,t,r,n,s="decorators-and-blocks"){if(t==="move"&&n==="character"&&!e.isCollapsed()){const[d,f]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return f.set(d.key,d.offset,d.type),!0}const a=l0(e.focus,r?"previous":"next"),i=n==="lineboundary",o=t==="move";let l=a,u=s==="decorators-and-blocks";if(!gU(l)){for(const d of l){u=!1;const{origin:f}=d;if(!zn(f)||f.isIsolated()||(l=d,!i||!f.isInline()))break}if(u)for(const d of pC(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(Yu(d))d.origin.isInline()||(l=d);else{if(It(d.origin))continue;zn(d.origin)&&!d.origin.isInline()&&(l=d)}break}}if(l===a)return!1;if(o&&!i&&zn(l.origin)&&l.origin.isKeyboardSelectable()){const d=q7();return d.add(l.origin.getKey()),Xi(d),!0}return l=mc(l),o&&jm(e.anchor,l),jm(e.focus,l),u||!i}let vi=null,wi=null,ll=!1,u5=!1,Gb=0;const rM={characterData:!0,childList:!0,subtree:!0};function i2(){return ll||vi!==null&&vi._readOnly}function Gi(){ll&&er(13)}function Kz(){Gb>99&&er(14)}function Jf(){return vi===null&&er(195,Yz()),vi}function Qs(){return wi===null&&er(196,Yz()),wi}function Yz(){let e=0;const t=new Set,r=H_.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=G_(s);if(nC(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===r&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function Tie(){return wi}function nM(e,t,r){const n=t.__type,s=tU(e,n);let a=r.get(n);a===void 0&&(a=Array.from(s.transforms),r.set(n,a));const i=a.length;for(let o=0;o<i&&(a[o](t),t.isAttached());o++);}function sM(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function Xz(e,t){if(!t)return;const r=e._updateTags;let n=t;Array.isArray(t)||(n=[t]);for(const s of n)r.add(s)}function Cie(e){return Y7(e,Qs()._nodes)}function Y7(e,t){const r=e.type,n=t.get(r);n===void 0&&er(17,r);const s=n.klass;e.type!==s.getType()&&er(18,s.name);const a=s.importJSON(e),i=e.children;if(It(a)&&Array.isArray(i))for(let o=0;o<i.length;o++){const l=Y7(i[o],t);a.append(l)}return a}function aM(e,t,r){const n=vi,s=ll,a=wi;vi=t,ll=!0,wi=e;try{return r()}finally{vi=n,ll=s,wi=a}}function Ud(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const a=e._editorState,i=a._selection,o=r._selection,l=e._dirtyType!==bm,u=vi,d=ll,f=wi,h=e._updating,g=e._observer;let x=null;if(e._pendingEditorState=null,e._editorState=r,!s&&l&&g!==null){wi=e,vi=r,ll=!1,e._updating=!0;try{const P=e._dirtyType,M=e._dirtyElements,j=e._dirtyLeaves;g.disconnect(),x=eie(a,r,e,P,M,j)}catch(P){if(P instanceof Error&&e._onError(P),u5)throw P;return eU(e,null,n,r),hz(e),e._dirtyType=$p,u5=!0,Ud(e,a),void(u5=!1)}finally{g.observe(n,rM),e._updating=h,vi=u,ll=d,wi=f}}r._readOnly||(r._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,T=e._normalizedNodes,k=e._updateTags,b=e._deferred;l&&(e._dirtyType=bm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),(function(P,M){const j=P._decorators;let A=P._pendingDecorators||j;const F=M._nodeMap;let L;for(L in A)F.has(L)||(A===j&&(A=aU(P)),delete A[L])})(e,r);const E=s?null:lu(wc(e));if(e._editable&&E!==null&&(l||o===null||o.dirty)&&n!==null&&!k.has(jie)){wi=e,vi=r;try{if(g!==null&&g.disconnect(),l||o===null||o.dirty){const P=e._blockCursorElement;P!==null&&x8(P,e,n),_ie(i,o,e,E,k,n)}(function(P,M,j){let A=P._blockCursorElement;if(qt(j)&&j.isCollapsed()&&j.anchor.type==="element"&&M.contains(document.activeElement)){const F=j.anchor,L=F.getNode(),V=F.offset;let J=!1,ne=null;if(V===L.getChildrenSize())f5(L.getChildAtIndex(V-1))&&(J=!0);else{const ee=L.getChildAtIndex(V);if(ee!==null&&f5(ee)){const ie=ee.getPreviousSibling();(ie===null||f5(ie))&&(J=!0,ne=P.getElementByKey(ee.__key))}}if(J){const ee=P.getElementByKey(L.__key);return A===null&&(P._blockCursorElement=A=(function(ie){const B=ie.theme,Y=document.createElement("div");Y.contentEditable="false",Y.setAttribute("data-lexical-cursor","true");let I=B.blockCursor;if(I!==void 0){if(typeof I=="string"){const H=lz(I);I=B.blockCursor=H}I!==void 0&&Y.classList.add(...I)}return Y})(P._config)),M.style.caretColor="transparent",void(ne===null?ee.appendChild(A):ee.insertBefore(A,ne))}}A!==null&&x8(A,P,M)})(e,n,o)}finally{g!==null&&g.observe(n,rM),wi=f,vi=u}}x!==null&&(function(P,M,j,A,F){const L=Array.from(P._listeners.mutation),V=L.length;for(let J=0;J<V;J++){const[ne,ee]=L[J];for(const ie of ee){const B=M.get(ie);B!==void 0&&ne(B,{dirtyLeaves:A,prevEditorState:F,updateTags:j})}}})(e,x,k,y,a),qt(o)||o===null||i!==null&&i.is(o)||e.dispatchCommand(wz,void 0);const N=e._pendingDecorators;N!==null&&(e._decorators=N,e._pendingDecorators=null,Gy("decorator",e,!0,N)),(function(P,M,j){const A=uM(M),F=uM(j);A!==F&&Gy("textcontent",P,!0,F)})(e,t||a,r),Gy("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:r,mutatedNodes:x,normalizedNodes:T,prevEditorState:t||a,tags:k}),(function(P,M){if(P._deferred=[],M.length!==0){const j=P._updating;P._updating=!0;try{for(let A=0;A<M.length;A++)M[A]()}finally{P._updating=j}}})(e,b),(function(P){const M=P._updates;if(M.length!==0){const j=M.shift();if(j){const[A,F]=j;U_(P,A,F)}}})(e)}function Gy(e,t,r,...n){const s=t._updating;t._updating=r;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,n)}finally{t._updating=s}}function iM(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[a,i]=s,o=e._pendingEditorState;let l;i!==void 0&&(l=i.onUpdate,i.skipTransforms&&(n=!0),i.discrete&&(o===null&&er(191),o._flushSync=!0),l&&e._deferred.push(l),Xz(e,i.tag)),o==null?U_(e,a,i):a()}}return n}function U_(e,t,r){const n=e._updateTags;let s,a=!1,i=!1;r!==void 0&&(s=r.onUpdate,Xz(e,r.tag),a=r.skipTransforms||!1,i=r.discrete||!1),s&&e._deferred.push(s);const o=e._editorState;let l=e._pendingEditorState,u=!1;(l===null||l._readOnly)&&(l=e._pendingEditorState=Jz(l||o),u=!0),l._flushSync=i;const d=vi,f=ll,h=wi,g=e._updating;vi=l,ll=!1,e._updating=!0,wi=e;const x=e._headless||e.getRootElement()===null;eC(null);try{u&&(x?o._selection!==null&&(l._selection=o._selection.clone()):l._selection=(function(k,b){const E=k.getEditorState()._selection,N=lu(wc(k));return qt(E)||E==null?K7(E,N,k,b):E.clone()})(e,r&&r.event||null));const v=e._compositionKey;t(),a=iM(e,a),(function(k,b){const E=b.getEditorState()._selection,N=k._selection;if(qt(N)){const P=N.anchor,M=N.focus;let j;if(P.type==="text"&&(j=P.getNode(),j.selectionTransform(E,N)),M.type==="text"){const A=M.getNode();j!==A&&A.selectionTransform(E,N)}}})(l,e),e._dirtyType!==bm&&(a?(function(k,b){const E=b._dirtyLeaves,N=k._nodeMap;for(const P of E){const M=N.get(P);yr(M)&&M.isAttached()&&M.isSimpleText()&&!M.isUnmergeable()&&RP(M)}})(l,e):(function(k,b){const E=b._dirtyLeaves,N=b._dirtyElements,P=k._nodeMap,M=Sf(),j=new Map;let A=E,F=A.size,L=N,V=L.size;for(;F>0||V>0;){if(F>0){b._dirtyLeaves=new Set;for(const J of A){const ne=P.get(J);yr(ne)&&ne.isAttached()&&ne.isSimpleText()&&!ne.isUnmergeable()&&RP(ne),ne!==void 0&&sM(ne,M)&&nM(b,ne,j),E.add(J)}if(A=b._dirtyLeaves,F=A.size,F>0){Gb++;continue}}b._dirtyLeaves=new Set,b._dirtyElements=new Map,L.delete("root")&&L.set("root",!0);for(const J of L){const ne=J[0],ee=J[1];if(N.set(ne,ee),!ee)continue;const ie=P.get(ne);ie!==void 0&&sM(ie,M)&&nM(b,ie,j)}A=b._dirtyLeaves,F=A.size,L=b._dirtyElements,V=L.size,Gb++}b._dirtyLeaves=E,b._dirtyElements=N})(l,e),iM(e),(function(k,b,E,N){const P=k._nodeMap,M=b._nodeMap,j=[];for(const[A]of N){const F=M.get(A);F!==void 0&&(F.isAttached()||(It(F)&&uz(F,A,P,M,j,N),P.has(A)||N.delete(A),j.push(A)))}for(const A of j)M.delete(A);for(const A of E){const F=M.get(A);F===void 0||F.isAttached()||(P.has(A)||E.delete(A),M.delete(A))}})(o,l,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(l._flushSync=!0);const T=l._selection;if(qt(T)){const k=l._nodeMap,b=T.anchor.key,E=T.focus.key;k.get(b)!==void 0&&k.get(E)!==void 0||er(19)}else io(T)&&T._nodes.size===0&&(l._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=o,e._dirtyType=$p,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Ud(e)}finally{vi=d,ll=f,wi=h,e._updating=g,Gb=0}e._dirtyType!==bm||e._deferred.length>0||(function(v,T){const k=T.getEditorState()._selection,b=v._selection;if(b!==null){if(b.dirty||!b.is(k))return!0}else if(k!==null)return!0;return!1})(l,e)?l._flushSync?(l._flushSync=!1,Ud(e)):u&&Oie((()=>{Ud(e)})):(l._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function El(e,t,r){wi===e&&r===void 0?t():U_(e,t,r)}class Vy{constructor(t,r,n){this.element=t,this.before=r||null,this.after=n||null}withBefore(t){return new Vy(this.element,t,this.after)}withAfter(t){return new Vy(this.element,this.before,t)}withElement(t){return this.element===t?this:new Vy(t,this.before,this.after)}insertChild(t){const r=this.before||this.getManagedLineBreak();return r!==null&&r.parentElement!==this.element&&er(222),this.element.insertBefore(t,r),this}removeChild(t){return t.parentElement!==this.element&&er(223),this.element.removeChild(t),this}replaceChild(t,r){return r.parentElement!==this.element&&er(224),this.element.replaceChild(t,r),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const r=t==="decorator"&&(Bp||gv);this.insertManagedLineBreak(r)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const r=this.element,n=t.nodeName==="IMG"?t.nextSibling:null;n&&r.removeChild(n),r.removeChild(t),r.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const r=this.getManagedLineBreak();if(r){if(t===(r.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,s=this.before,a=document.createElement("br");if(n.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",n.insertBefore(i,a),n.__lexicalLineBreak=i}else n.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let r=this.after;r!==null;r=r.previousSibling)t++;return t}resolveChildIndex(t,r,n,s){if(n===this.element){const l=this.getFirstChildOffset();return[t,Math.min(l+t.getChildrenSize(),Math.max(l,s))]}const a=oM(r,n);a.push(s);const i=oM(r,this.element);let o=t.getIndexWithinParent();for(let l=0;l<i.length;l++){const u=a[l],d=i[l];if(u===void 0||u<d)break;if(u>d){o+=1;break}}return[t.getParentOrThrow(),o]}}function oM(e,t){const r=[];let n=t;for(;n!==e&&n!==null;n=n.parentNode){let s=0;for(let a=n.previousSibling;a!==null;a=a.previousSibling)s++;r.push(s)}return n!==e&&er(225),r.reverse()}class yo extends l1{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return zae[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=Qs()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(yr(r)&&t.push(r),It(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;It(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;It(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const a=r[n-1];return It(a)&&a.getLastDescendant()||a||null}const s=r[t];return It(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:La(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&er(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:La(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&er(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContent(),It(a)&&s!==n-1&&!a.isInline()&&(t+=o0)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContentSize(),It(a)&&s!==n-1&&!a.isInline()&&(t+=o0.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=NP[t];return!!(this.getFormat()&r)}return!1}hasTextFormat(t){const r=_m[t];return!!(this.getTextFormat()&r)}getFormatFlags(t,r){return b4(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){Gi();const n=xr();let s=t,a=r;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const l=this.getFirstChild();if(yr(l)||It(l))return l.select(0,0)}else if(!(t!==void 0&&t!==i||r!==void 0&&r!==i)){const l=this.getLastChild();if(yr(l)||It(l))return l.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const o=this.__key;return qt(n)?(n.anchor.set(o,s,"element"),n.focus.set(o,a,"element"),n.dirty=!0,n):Vz(o,s,o,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((r=>r.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?NP[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,a=this.getChildrenSize(),i=this.getWritable();t+r<=a||er(226,String(t),String(r),String(a));const o=i.__key,l=[],u=[],d=this.getChildAtIndex(t+r);let f=null,h=a-r+s;if(t!==0)if(t===a)f=this.getLastChild();else{const x=this.getChildAtIndex(t);x!==null&&(f=x.getPreviousSibling())}if(r>0){let x=f===null?this.getFirstChild():f.getNextSibling();for(let y=0;y<r;y++){x===null&&er(100);const v=x.getNextSibling(),T=x.__key;cm(x.getWritable()),u.push(T),x=v}}let g=f;for(let x=0;x<s;x++){const y=n[x];g!==null&&y.is(g)&&(f=g=g.getPreviousSibling());const v=y.getWritable();v.__parent===o&&h--,cm(v);const T=y.__key;if(g===null)i.__first=T,v.__prev=null;else{const k=g.getWritable();k.__next=T,v.__prev=k.__key}y.__key===o&&er(76),v.__parent=o,l.push(T),g=y}if(t+r===a)g!==null&&(g.getWritable().__next=null,i.__last=g.__key);else if(d!==null){const x=d.getWritable();if(g!==null){const y=g.getWritable();x.__prev=g.__key,y.__next=d.__key}else x.__prev=null}if(i.__size=h,u.length){const x=xr();if(qt(x)){const y=new Set(u),v=new Set(l),{anchor:T,focus:k}=x;lM(T,y,v)&&v4(T,T.getNode(),this,f,d),lM(k,y,v)&&v4(k,k.getNode(),this,f,d),h!==0||this.canBeEmpty()||$o(this)||this.remove()}}return i}getDOMSlot(t){return new Vy(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ns(r)){const n=this.getIndent();n>0&&(r.style.paddingInlineStart=40*n+"px");const s=this.getDirection();s&&(r.dir=s)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),n=this.getTextStyle();return r!==0&&(t.textFormat=r),n!==""&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const n=this.getDOMSlot(t);let s=n.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=r.getElementByKey(a.getKey());i!==null&&(s==null?(n.insertChild(i),s=i):s!==i&&n.replaceChild(i,s),s=s.nextSibling)}}}function It(e){return e instanceof yo}function lM(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}let X7=class extends l1{decorate(t,r){er(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function zn(e){return e instanceof X7}class o2 extends yo{static getType(){return"root"}static clone(){return new o2}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){er(51)}getTextContent(){const t=this.__cachedText;return!i2()&&Qs()._dirtyType!==bm||t===null?super.getTextContent():t}remove(){er(52)}replace(t){er(53)}insertBefore(t){er(54)}insertAfter(t){er(55)}updateDOM(t,r){return!1}splice(t,r,n){for(const s of n)It(s)||zn(s)||er(282);return super.splice(t,r,n)}static importJSON(t){return Us().updateFromJSON(t)}collapseAtStart(){return!0}}function ti(e){return e instanceof o2}function Jz(e){return new W_(new Map(e._nodeMap))}function J7(){return new W_(new Map([["root",new o2]]))}function Qz(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&er(130,r.name),It(e)){const n=t.children;Array.isArray(n)||er(59,r.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=Qz(s[a]);n.push(i)}}return t}class W_{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,r){return aM(r&&r.editor||null,this,t)}clone(t){const r=new W_(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return aM(null,this,(()=>({root:Qz(Us())})))}}const w4="historic",Eie="history-push",qy="history-merge",Nie="paste",Zz="collaboration",Aie="skip-scroll-into-view",jie="skip-dom-selection";class Q7 extends yo{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class l2 extends yo{static getType(){return"paragraph"}static clone(t){return new l2(t.__key)}createDOM(t){const r=document.createElement("p"),n=Cp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:Pie,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ns(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n)}return{element:r}}static importJSON(t){return Es().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,r){const n=Es();n.setTextFormat(t.format),n.setTextStyle(t.style);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||yr(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Pie(e){const t=Es();return e.style&&(t.setFormat(e.style.textAlign),uC(e,t)),{node:t}}function Es(){return Wo(new l2)}function Z7(e){return e instanceof l2}const Dn=0,lp=1,Mie=4;function eU(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=J7(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=bm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function Fie(e){const t=e||{},r=Tie(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,a=t.disableEvents||!1,i=J7(),o=t.namespace||(s!==null?s._config.namespace:lU()),l=t.editorState,u=[o2,Xf,s2,a2,l2,Q7,...t.nodes||[]],{onError:d,html:f}=t,h=t.editable===void 0||t.editable;let g;if(e===void 0&&r!==null)g=r._nodes;else{g=new Map;for(let y=0;y<u.length;y++){let v=u[y],T=null,k=null;if(typeof v!="function"){const M=v;v=M.replace,T=M.with,k=M.withKlass||null}const{ownNodeConfig:b}=dC(v),E=v.getType(),N=v.transform(),P=new Set;b&&b.$transform&&P.add(b.$transform),N!==null&&P.add(N),g.set(E,{exportDOM:f&&f.export?f.export.get(v):void 0,klass:v,replace:T,replaceWithKlass:k,sharedNodeState:Yae(u[y]),transforms:P})}}const x=new H_(i,s,g,{disableEvents:a,namespace:o,theme:n},d||console.error,(function(y,v){const T=new Map,k=new Set,b=E=>{Object.keys(E).forEach((N=>{let P=T.get(N);P===void 0&&(P=[],T.set(N,P)),P.push(E[N])}))};return y.forEach((E=>{const N=E.klass.importDOM;if(N==null||k.has(N))return;k.add(N);const P=N.call(E.klass);P!==null&&b(P)})),v&&b(v),T})(g,f?f.import:void 0),h,e);return l!==void 0&&(x._pendingEditorState=l,x._dirtyType=$p),x}class H_{constructor(t,r,n,s,a,i,o,l){this._createEditorArgs=l,this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=bm,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=lU(),this._onError=a,this._htmlConversions=i,this._editable=o,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&er(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&er(36,String(t));const i=a[n];return i.add(r),()=>{i.delete(r),a.every((o=>o.size===0))&&s.delete(t)}}registerMutationListener(t,r,n){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(r);i===void 0&&(i=new Set,a.set(r,i)),i.add(s);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(r,s),()=>{i.delete(s),i.size===0&&a.delete(r)}}getRegisteredNode(t){const r=this._nodes.get(t.getType());return r===void 0&&er(37,t.name),r}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,r){const n=this._editorState,s=xM(n).get(r.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,r){const n=this.getRegisteredNode(t);return n.transforms.add(r),n}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],a=n.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,r);s.push(i)}return(function(i,o){const l=xM(i.getEditorState()),u=[];for(const d of o){const f=l.get(d);f&&u.push(f)}u.length!==0&&i.update((()=>{for(const d of u)for(const f of d.keys()){const h=La(f);h&&h.markDirty()}}),i._pendingEditorState===null?{tag:qy}:void 0)})(this,s.map((i=>i.klass.getType()))),()=>{s.forEach((i=>i.transforms.delete(r)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Ar(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=Cp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,eU(this,r,t,s),r!==null&&(this._config.disableEvents||hie(r),n!=null&&r.classList.remove(...n)),t!==null){const a=lC(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=$p,hz(this),this._updateTags.add(qy),Ud(this),this._config.disableEvents||(function(o,l){const u=o.ownerDocument,d=x4.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",zz),x4.set(u,(d||0)+1),o.__lexicalEditor=l;const f=$z(o);for(let h=0;h<l8.length;h++){const[g,x]=l8[h],y=typeof x=="function"?v=>{WP(v)||(UP(v),(l.isEditable()||g==="click")&&x(v,l))}:v=>{if(WP(v))return;UP(v);const T=l.isEditable();switch(g){case"cut":return T&&Ar(l,G7,v);case"copy":return Ar(l,L_,v);case"paste":return T&&Ar(l,U7,v);case"dragstart":return T&&Ar(l,Mz,v);case"dragover":return T&&Ar(l,Fz,v);case"dragend":return T&&Ar(l,oie,v);case"focus":return T&&Ar(l,uie,v);case"blur":return T&&Ar(l,die,v);case"drop":return T&&Ar(l,jz,v)}};o.addEventListener(g,y),f.push((()=>{o.removeEventListener(g,y)}))}})(t,this),n!=null&&t.classList.add(...n)}else this._window=null,this._updateTags.add(qy),Ud(this);Gy("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&er(38);let n=t;n._readOnly&&(n=Jz(t),n._selection=t._selection?t._selection.clone():null),fz(this);const s=this._pendingEditorState,a=this._updateTags,i=r!==void 0?r.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),Ud(this)),this._pendingEditorState=n,this._dirtyType=$p,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||Ud(this)}parseEditorState(t,r){return(function(n,s,a){const i=J7(),o=vi,l=ll,u=wi,d=s._dirtyElements,f=s._dirtyLeaves,h=s._cloneNotNeeded,g=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,vi=i,ll=!1,wi=s,eC(null);try{const x=s._nodes;Y7(n.root,x),a&&a(),i._readOnly=!0}catch(x){x instanceof Error&&s._onError(x)}finally{s._dirtyElements=d,s._dirtyLeaves=f,s._cloneNotNeeded=h,s._dirtyType=g,vi=o,ll=l,wi=u}return i})(typeof t=="string"?JSON.parse(t):t,this,r)}read(t){return Ud(this),this.getEditorState().read(t,{editor:this})}update(t,r){(function(n,s,a){n._updating?n._updates.push([s,a]):U_(n,s,a)})(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),El(this,(()=>{const s=xr(),a=Us();s!==null?s.dirty||Xi(s.clone()):a.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),$ie("focus"),zie((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=lu(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Gy("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}H_.version="0.35.0+prod.esm";let m8=null;function eC(e){m8=e}let Die=1;function tU(e,t){const r=tC(e,t);return r===void 0&&er(30,t),r}function tC(e,t){return e._nodes.get(t)}const Oie=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function cM(e){return zn(If(e))}function rC(e){const t=document.activeElement;if(!Ns(t))return!1;const r=t.nodeName;return zn(If(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&G_(t)==null)}function c2(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!rC(t)&&rU(t)===e}catch{return!1}}function nC(e){return e instanceof H_}function rU(e){let t=e;for(;t!=null;){const r=G_(t);if(nC(r))return r;t=u2(t)}return null}function G_(e){return e?e.__lexicalEditor:null}function lm(e){return B_(e)||e.isToken()}function Bd(e){return lm(e)||e.isSegmented()}function x0(e){return d1(e)&&e.nodeType===Mae}function Rie(e){return d1(e)&&e.nodeType===Fae}function zp(e){let t=e;for(;t!=null;){if(x0(t))return t;t=t.firstChild}return null}function b4(e,t,r){const n=_m[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function nU(e){return yr(e)||Jd(e)||zn(e)}function Iie(e,t){const r=(function(){const i=m8;return m8=null,i})();if((t=t||r&&r.__key)!=null)return void(e.__key=t);Gi(),Kz();const n=Qs(),s=Jf(),a=""+Die++;s._nodeMap.set(a,e),It(e)?n._dirtyElements.set(a,!0):n._dirtyLeaves.add(a),n._cloneNotNeeded.add(a),n._dirtyType=cz,e.__key=a}function cm(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,o=s!==null?s.__key:null,l=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(n.__first=i),a===null&&(n.__last=o),l!==null&&(l.__next=i),u!==null&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function _4(e){Kz();const t=e.getLatest(),r=t.__parent,n=Jf(),s=Qs(),a=n._nodeMap,i=s._dirtyElements;r!==null&&(function(l,u,d){let f=l;for(;f!==null;){if(d.has(f))return;const h=u.get(f);if(h===void 0)break;d.set(f,!1),f=h.__parent}})(r,a,i);const o=t.__key;s._dirtyType=cz,It(e)?i.set(o,!0):s._dirtyLeaves.add(o)}function Vi(e){Gi();const t=Qs(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=La(r);n!==null&&n.getWritable()}if(e!==null){const n=La(e);n!==null&&n.getWritable()}}}function Sf(){return i2()?null:Qs()._compositionKey}function La(e,t){const r=(t||Jf())._nodeMap.get(e);return r===void 0?null:r}function sU(e,t){const r=V_(e,Qs());return r!==void 0?La(r,t):null}function V_(e,t){return e[`__lexicalKey_${t._key}`]}function If(e,t){let r=e;for(;r!=null;){const n=sU(r,t);if(n!==null)return n;r=u2(r)}return null}function aU(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function uM(e){return e.read((()=>Us().getTextContent()))}function Us(){return iU(Jf())}function iU(e){return e._nodeMap.get("root")}function Xi(e){Gi();const t=Jf();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function yp(e){const t=Qs(),r=(function(n,s){let a=n;for(;a!=null;){const i=V_(a,s);if(i!==void 0)return i;a=u2(a)}return null})(e,t);return r===null?e===t.getRootElement()?La("root"):null:La(r)}function oU(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function sC(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function lU(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function cU(e){return x0(e)?e.nodeValue:null}function aC(e,t,r){const n=lu(wc(t));if(n===null)return;const s=n.anchorNode;let{anchorOffset:a,focusOffset:i}=n;if(s!==null){let o=cU(s);const l=If(s);if(o!==null&&yr(l)){if(o===R_&&r){const u=r.length;o=r,a=u,i=u}o!==null&&iC(l,o,a,i,e)}}}function iC(e,t,r,n,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let o=t;(i||s)&&t[t.length-1]===R_&&(o=t.slice(0,-1));const l=a.getTextContent();if(s||o!==l){if(o===""){if(Vi(null),gv||Bp||l4)a.remove();else{const y=Qs();setTimeout((()=>{y.update((()=>{a.isAttached()&&a.remove()}))}),20)}return}const u=a.getParent(),d=u1(),f=a.getTextContentSize(),h=Sf(),g=a.getKey();if(a.isToken()||h!==null&&g===h&&!i||qt(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===f&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const x=xr();if(!qt(x)||r===null||n===null)return void dM(a,o,x);if(x.setTextNodeRange(a,r,a,n),a.isSegmented()){const y=ca(a.getTextContent());a.replace(y),a=y}dM(a,o,x)}}}function dM(e,t,r){if(e.setTextContent(t),qt(r)){const n=e.getKey();for(const s of["anchor","focus"]){const a=r[s];a.type==="text"&&a.key===n&&(a.offset=Pf(e,a.offset,"clamp"))}}}function Xw(e,t,r){const n=t[r]||!1;return n==="any"||n===e[r]}function Lie(e,t){return Xw(e,t,"altKey")&&Xw(e,t,"ctrlKey")&&Xw(e,t,"shiftKey")&&Xw(e,t,"metaKey")}function Zn(e,t,r){return Lie(e,r)&&e.key.toLowerCase()===t.toLowerCase()}const Ld={ctrlKey:!Lu,metaKey:Lu},fM={altKey:Lu,ctrlKey:!Lu};function hM(e){return e.key==="Backspace"}function mM(e){return Zn(e,"a",Ld)}function Bie(e){const t=Us();if(qt(e)){const r=e.anchor,n=e.focus,s=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();return r.set(s.getKey(),0,"element"),n.set(s.getKey(),s.getChildrenSize(),"element"),d4(e),e}{const r=t.select(0,t.getChildrenSize());return Xi(d4(r)),r}}function Cp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const a=lz(s);return r[t]=a,a}return s}function oC(e,t,r,n,s){if(r.size===0)return;const a=n.__type,i=n.__key,o=t.get(a);o===void 0&&er(33,a);const l=o.klass;let u=e.get(l);u===void 0&&(u=new Map,e.set(l,u));const d=u.get(i),f=d==="destroyed"&&s==="created";(d===void 0||f)&&u.set(i,f?"updated":s)}function gM(e,t,r){const n=e.getParent();let s=r,a=e;return n!==null&&(t&&r===0?(s=a.getIndexWithinParent(),a=n):t||r!==a.getChildrenSize()||(s=a.getIndexWithinParent()+1,a=n)),a.getChildAtIndex(t?s-1:s)}function g8(e,t){const r=e.offset;if(e.type==="element")return gM(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?gM(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function uU(e){const t=wc(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Ar(e,t,r){return(function(n,s,a){const i=sC(n);for(let o=4;o>=0;o--)for(let l=0;l<i.length;l++){const u=i[l],d=u._commands.get(s);if(d!==void 0){const f=d[o];if(f!==void 0){const h=Array.from(f),g=h.length;let x=!1;if(El(u,(()=>{for(let y=0;y<g;y++)if(h[y](a,n))return void(x=!0)})),x)return x}}}return!1})(e,t,r)}function q_(e){return!ti(e)&&!e.isLastChild()&&!e.isInline()}function Tm(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&er(75,t),r}function u2(e){const t=e.assignedSlot||e.parentElement;return y8(t)?t.host:t}function dU(e){return Rie(e)?e:Ns(e)?e.ownerDocument:null}function $ie(e){Gi(),Qs()._updateTags.add(e)}function zie(e){Gi(),Qs()._deferred.push(e)}function p8(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function lC(e){const t=dU(e);return t?t.defaultView:null}function wc(e){const t=e._window;return t===null&&er(78),t}function Uie(e){return It(e)&&e.isInline()||zn(e)&&e.isInline()}function Wie(e){let t=e.getParentOrThrow();for(;t!==null;){if($o(t))return t;t=t.getParentOrThrow()}return t}function $o(e){return ti(e)||It(e)&&e.isShadowRoot()}function Wo(e){const t=Qs(),r=e.getType(),n=tC(t,r);n===void 0&&er(200,e.constructor.name,r);const{replace:s,replaceWithKlass:a}=n;if(s!==null){const i=s(e),o=i.constructor;return a!==null?i instanceof a||er(201,a.name,a.getType(),o.name,o.getType(),e.constructor.name,r):i instanceof e.constructor&&o!==e.constructor||er(202,o.name,o.getType(),e.constructor.name,r),i.__key===e.__key&&er(203,e.constructor.name,r,o.name,o.getType()),i}return e}function d5(e,t){!ti(e.getParent())||It(t)||zn(t)||er(99)}function Hie(e){const t=La(e);return t===null&&er(63,e),t}function f5(e){return(zn(e)||It(e)&&!e.canBeEmpty())&&!e.isInline()}function x8(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function lu(e){return du?(e||window).getSelection():null}function Gie(e){const t=lC(e);return t?t.getSelection():null}function fU(e){return Ns(e)&&e.tagName==="A"}function Ns(e){return d1(e)&&e.nodeType===Pae}function d1(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function y8(e){return d1(e)&&e.nodeType===Dae}function v8(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function S4(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function hc(e){if(zn(e)&&!e.isInline())return!0;if(!It(e)||$o(e))return!1;const t=e.getFirstChild(),r=t===null||Jd(t)||yr(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function h5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function d2(){return Qs()}const pM=new WeakMap,Vie=new Map;function xM(e){if(!e._readOnly&&e.isEmpty())return Vie;e._readOnly||er(192);let t=pM.get(e);return t||(t=(function(r){const n=new Map;for(const[s,a]of r._nodeMap){const i=a.__type;let o=n.get(i);o||(o=new Map,n.set(i,o)),o.set(s,a)}return n})(e),pM.set(e,t)),t}function cC(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function uC(e,t){const r=parseInt(e.style.paddingInlineStart,10)||0,n=Math.round(r/40);t.setIndent(n)}function qie(e){e.__lexicalUnmanaged=!0}function Kie(e){return e.__lexicalUnmanaged===!0}function py(e,t){return(function(r,n){return Object.prototype.hasOwnProperty.call(r,n)})(e,t)&&e[t]!==l1[t]}function dC(e){const t=AP in e.prototype?e.prototype[AP]():void 0,r=(function(i){return i===X7||i===yo||i===l1})(e),n=!r&&py(e,"getType")?e.getType():void 0;let s,a=n;if(t)if(n)s=t[n];else for(const[i,o]of Object.entries(t))a=i,s=o;if(!r&&a&&(py(e,"getType")||(e.getType=()=>a),py(e,"clone")||(e.clone=i=>(eC(i),new e)),py(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!py(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function Yie(e){const t=d2();return Gi(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const Xie={next:"previous",previous:"next"};class fC{constructor(t){this.origin=t}[Symbol.iterator](){return xC({hasNext:Nm,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return Yi(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Yi(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,r){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(n===null?this.insert(t):n.replace(t,r)),this}splice(t,r,n="next"){const s=n===this.direction?r:Array.from(r).reverse();let a=this;const i=this.getParentAtCaret(),o=new Map;for(let l=a.getAdjacentCaret();l!==null&&o.size<t;l=l.getAdjacentCaret()){const u=l.origin.getWritable();o.set(u.getKey(),u)}for(const l of s){if(o.size>0){const u=a.getNodeAtCaret();if(u){if(o.delete(u.getKey()),o.delete(l.getKey()),!(u.is(l)||a.origin.is(l))){const d=l.getParent();d&&d.is(i)&&l.remove(),u.replace(l)}}else u===null&&er(263,Array.from(o).join(" "))}else a.insert(l);a=Yi(l,this.direction)}for(const l of o.values())l.remove();return this}}class bv extends fC{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:bc(t,this.direction)}getParentCaret(t="root"){return Yi(hC(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=f1(this.direction);return Yi(this.getNodeAtCaret(),t)||bc(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof bv&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const Jie={root:ti,shadowRoot:$o};function f1(e){return Xie[e]}function hC(e,t="root"){return Jie[t](e)?null:e}class Cm extends fC{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Yi(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return It(this.origin)?bc(this.origin,this.direction):null}getParentCaret(t="root"){return Yi(hC(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=f1(this.direction);return Yi(this.getNodeAtCaret(),t)||bc(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof Cm&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof Cm||t instanceof Em)&&this.direction===t.direction&&this.origin.is(t.origin)}}class Em extends fC{type="text";constructor(t,r){super(t),this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Am(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Yi(hC(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Am(this.origin,f1(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Em&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof Cm||t instanceof Em)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Yi(this.origin,this.direction)}}function jf(e){return e instanceof Em}function Nm(e){return e instanceof Cm}function Yu(e){return e instanceof bv}const Qie={next:class extends Em{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Em{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Zie={next:class extends Cm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Cm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},eoe={next:class extends bv{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends bv{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Yi(e,t){return e?new Zie[t](e):null}function Am(e,t,r){return e?new Qie[t](e,Pf(e,r)):null}function Pf(e,t,r="error"){const n=e.getTextContentSize();let s=t==="next"?n:t==="previous"?0:t;return(s<0||s>n)&&(r!=="clamp"&&(function(a,...i){const o=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;l.append("code",a);for(const u of i)l.append("v",u);o.search=l.toString(),console.warn(`Minified Lexical warning #${a}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(t),String(n),e.getKey()),s=s<0?0:n),s}function yM(e,t){return new roe(e,t)}function bc(e,t){return It(e)?new eoe[t](e):null}function toe(e){return e&&e.getChildCaret()||e}function mC(e){return e&&toe(e.getAdjacentCaret())}class gC{type="node-caret-range";constructor(t,r,n){this.anchor=t,this.focus=r,this.direction=n}getLatest(){const t=this.anchor.getLatest(),r=this.focus.getLatest();return t===this.anchor&&r===this.focus?this:new gC(t,r,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return jf(a)?(function(i,o){const{direction:l,origin:u}=i,d=Pf(u,o==="focus"?f1(l):l);return yM(i,d-i.offset)})(a,s):null},r=t("anchor"),n=t("focus");if(r&&n){const{caret:s}=r,{caret:a}=n;if(s.isSameNodeCaret(a))return[yM(s,a.offset-s.offset),null]}return[r,n]}iterNodeCarets(t="root"){const r=jf(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),s=jf(n),a=i=>i.isSameNodeCaret(n)?null:mC(i)||i.getParentCaret(t);return xC({hasNext:i=>i!==null&&!(s&&n.isSameNodeCaret(i)),initial:r.isSameNodeCaret(n)?null:a(r),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class roe{type="slice";constructor(t,r){this.caret=t,this.distance=r}getSliceIndices(){const{distance:t,caret:{offset:r}}=this,n=r+t;return n<r?[n,r]:[r,n]}getTextContent(){const[t,r]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,r)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:r}}=this,[n,s]=this.getSliceIndices(),a=t.getTextContent();return Am(t.setTextContent(a.slice(0,n)+a.slice(s)),r,n)}}function pC(e){return Lf(e,Yi(Us(),e.direction))}function noe(e){return Lf(e,e)}function Lf(e,t){return e.direction!==t.direction&&er(265),new gC(e,t,e.direction)}function xC(e){const{initial:t,hasNext:r,step:n,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!r(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=n(a),i}}}function hU(e,t){const r=Vb(e.origin,t.origin);switch(r===null&&er(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{const n=e.type==="text",s=t.type==="text";return n&&s?(function(a,i){return Math.sign(a-i)})(e.offset,t.offset):e.type===t.type?0:n?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return mU(r)}}function mU(e){const{a:t,b:r}=e,n=t.__key,s=r.__key;let a=t,i=r;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===n)return 1}return a===null?1:-1}function Jw(e,t){return t.is(e)}function vM(e){return It(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function Vb(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const r=new Map;for(let[n,s]=vM(e);n;s=n,n=n.getParent())r.set(n,s);for(let[n,s]=vM(t);n;s=n,n=n.getParent()){const a=r.get(n);if(a!==void 0)return a===null?(Jw(e,n)||er(276),{commonAncestor:n,type:"ancestor"}):s===null?(Jw(t,n)||er(277),{commonAncestor:n,type:"descendant"}):((It(a)||Jw(e,a))&&(It(s)||Jw(t,s))&&n.is(a.getParent())&&n.is(s.getParent())||er(278),{a,b:s,commonAncestor:n,type:"branch"})}return null}function l0(e,t){const{type:r,key:n,offset:s}=e,a=Hie(e.key);return r==="text"?(yr(a)||er(266,a.getType(),n),Am(a,t,s)):(It(a)||er(267,a.getType(),n),ioe(a,e.offset,t))}function jm(e,t){const{origin:r,direction:n}=t,s=n==="next";jf(t)?e.set(r.getKey(),t.offset,"text"):Nm(t)?yr(r)?e.set(r.getKey(),Pf(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(s?1:0),"element"):(Yu(t)&&It(r)||er(268),e.set(r.getKey(),s?0:r.getChildrenSize(),"element"))}function soe(e){const t=xr(),r=qt(t)?t:z_();return qb(r,e),Xi(r),r}function qb(e,t){jm(e.anchor,t.anchor),jm(e.focus,t.focus)}function wM(e){const{anchor:t,focus:r}=e,n=l0(t,"next"),s=l0(r,"next"),a=hU(n,s)<=0?"next":"previous";return Lf(Up(n,a),Up(s,a))}function yC(e){const{direction:t,origin:r}=e,n=Yi(r,f1(t)).getNodeAtCaret();return n?Yi(n,t):bc(r.getParentOrThrow(),t)}function bM(e,t="root"){const r=[e];for(let n=Yu(e)?e.getParentCaret(t):e.getSiblingCaret();n!==null;n=n.getParentCaret(t))r.push(yC(n));return r}function m5(e){return!!e&&e.origin.isAttached()}function aoe(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const r="root",n="next";let s=t;const a=pU(e,n),i=bM(a.anchor,r),o=bM(a.focus.getFlipped(),r),l=new Set,u=[];for(const x of a.iterNodeCarets(r))if(Yu(x))l.add(x.origin.getKey());else if(Nm(x)){const{origin:y}=x;It(y)&&!l.has(y.getKey())||u.push(y)}for(const x of u)x.remove();for(const x of a.getTextSlices()){if(!x)continue;const{origin:y}=x.caret,v=y.getTextContentSize(),T=yC(Yi(y,n)),k=y.getMode();if(Math.abs(x.distance)===v&&s==="removeEmptySlices"||k==="token"&&x.distance!==0)T.remove();else if(x.distance!==0){s="removeEmptySlices";let b=x.removeTextSlice();const E=x.caret.origin;if(k==="segmented"){const N=b.origin,P=ca(N.getTextContent()).setStyle(N.getStyle()).setFormat(N.getFormat());T.replaceOrInsert(P),b=Am(P,n,b.offset)}E.is(i[0].origin)&&(i[0]=b),E.is(o[0].origin)&&(o[0]=b.getFlipped())}}let d,f;for(const x of i)if(m5(x)){d=mc(x);break}for(const x of o)if(m5(x)){f=mc(x);break}const h=(function(x,y,v){if(!x||!y)return null;const T=x.getParentAtCaret(),k=y.getParentAtCaret();if(!T||!k)return null;const b=T.getParents().reverse();b.push(T);const E=k.getParents().reverse();E.push(k);const N=Math.min(b.length,E.length);let P;for(P=0;P<N&&b[P]===E[P];P++);const M=(F,L)=>{let V;for(let J=P;J<F.length;J++){const ne=F[J];if($o(ne))return;!V&&L(ne)&&(V=ne)}return V},j=M(b,hc),A=j&&M(E,(F=>v.has(F.getKey())&&hc(F)));return j&&A?[j,A]:null})(d,f,l);if(h){const[x,y]=h;bc(x,"previous").splice(0,y.getChildren()),y.remove()}const g=[d,f,...i,...o].find(m5);if(g)return noe(Up(mc(g),e.direction));er(269,JSON.stringify(i.map((x=>x.origin.__key))))}function mc(e){const t=(function(s){let a=s;for(;Yu(a);){const i=mC(a);if(!Yu(i))break;a=i}return a})(e.getLatest()),{direction:r}=t;if(yr(t.origin))return jf(t)?t:Am(t.origin,r,r);const n=t.getAdjacentCaret();return Nm(n)&&yr(n.origin)?Am(n.origin,r,f1(r)):t}function gU(e){return jf(e)&&e.offset!==Pf(e.origin,e.direction)}function Up(e,t){return e.direction===t?e:e.getFlipped()}function pU(e,t){return e.direction===t?e:Lf(Up(e.focus,t),Up(e.anchor,t))}function ioe(e,t,r){let n=bc(e,"next");for(let s=0;s<t;s++){const a=n.getAdjacentCaret();if(a===null)break;n=a}return Up(n,r)}const xU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,ooe=xU?_.useLayoutEffect:_.useEffect,Qw={tag:qy};function yU({initialConfig:e,children:t}){const r=_.useMemo((()=>{const{theme:n,namespace:s,nodes:a,onError:i,editorState:o,html:l}=e,u=Nae(null,n),d=Fie({editable:e.editable,html:l,namespace:s,nodes:a,onError:f=>i(f,d),theme:n});return(function(f,h){if(h!==null){if(h===void 0)f.update((()=>{const g=Us();if(g.isEmpty()){const x=Es();g.append(x);const y=xU?document.activeElement:null;(xr()!==null||y!==null&&y===f.getRootElement())&&x.select()}}),Qw);else if(h!==null)switch(typeof h){case"string":{const g=f.parseEditorState(h);f.setEditorState(g,Qw);break}case"object":f.setEditorState(h,Qw);break;case"function":f.update((()=>{Us().isEmpty()&&h(f)}),Qw)}}})(d,o),[d,u]}),[]);return ooe((()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)}),[]),c.jsx(o1.Provider,{value:r,children:t})}const loe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function coe(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function uoe(){return(function(e){const[t]=td(),r=_.useMemo((()=>e(t)),[t,e]),[n,s]=_.useState((()=>r.initialValueFn())),a=_.useRef(n);return loe((()=>{const{initialValueFn:i,subscribe:o}=r,l=i();return a.current!==l&&(a.current=l,s(l)),o((u=>{a.current=u,s(u)}))}),[r,e]),n})(coe)}function doe(){return Us().getTextContent()}function foe(e,t=!0){if(e)return!1;let r=doe();return t&&(r=r.trim()),r===""}function hoe(e){if(!foe(e,!1))return!1;const t=Us().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(zn(s))return!1;if(It(s)){if(!Z7(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let o=0;o<i;o++){const l=a[n];if(!yr(l))return!1}}}return!0}function vU(e){return()=>hoe(e)}const w8=new Map;function wU(e){const t={};if(!e)return t;const r=e.split(";");for(const n of r)if(n!==""){const[s,a]=n.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function _M(e){let t=w8.get(e);return t===void 0&&(t=wU(e),w8.set(e,t)),t}function bU(e){const t=d2().getElementByKey(e.getKey());if(t===null)return null;const r=t.ownerDocument.defaultView;return r===null?null:r.getComputedStyle(t)}function _U(e){return bU(ti(e)?e:e.getParentOrThrow())}function SM(e){const t=_U(e);return t!==null&&t.direction==="rtl"}function SU(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!Bd(t)&&r!==null){const[n,s]=r,a=e.isBackward(),i=n.getNode(),o=s.getNode(),l=t.is(i),u=t.is(o);if(l||u){const[d,f]=f8(e),h=i.is(o),g=t.is(a?o:i),x=t.is(a?i:o);let y,v=0;h?(v=d>f?f:d,y=d>f?d:f):g?(v=a?f:d,y=void 0):x&&(v=0,y=a?d:f),t.__text=t.__text.slice(v,y)}}return t}function moe(e){const t=e.getStyle(),r=wU(t);w8.set(t,r)}function goe(e,t){const r=e.getFormatType(),n=e.getIndent();r!==t.getFormatType()&&t.setFormat(r),n!==t.getIndent()&&t.setIndent(n)}function Ep(e,t,r=goe){if(e===null)return;const n=e.getStartEndPoints(),s=new Map;let a=null;if(n){const[i,o]=n;a=z_(),a.anchor.set(i.key,i.offset,i.type),a.focus.set(o.key,o.offset,o.type);const l=g5(i.getNode(),hc),u=g5(o.getNode(),hc);It(l)&&s.set(l.getKey(),l),It(u)&&s.set(u.getKey(),u)}for(const i of e.getNodes())if(It(i)&&hc(i))s.set(i.getKey(),i);else if(n===null){const o=g5(i,hc);It(o)&&s.set(o.getKey(),o)}for(const[i,o]of s){const l=t();r(o,l),o.replace(l,!0),a&&(i===a.anchor.key&&a.anchor.set(l.getKey(),a.anchor.offset,a.anchor.type),i===a.focus.key&&a.focus.set(l.getKey(),a.focus.offset,a.focus.type))}a&&e.is(xr())&&Xi(a)}function kU(e){const t=TU(e);return t!==null&&t.writingMode==="vertical-rl"}function TU(e){const t=e.anchor.getNode();return It(t)?bU(t):_U(t)}function kM(e,t){let r=kU(e)?!t:t;CU(e)&&(r=!r);const n=l0(e.focus,r?"previous":"next");if(gU(n))return!1;for(const s of pC(n)){if(Yu(s))return!s.origin.isInline();if(!It(s.origin)){if(zn(s.origin))return!0;break}}return!1}function poe(e,t,r,n){e.modify(t?"extend":"move",r,n)}function CU(e){const t=TU(e);return t!==null&&t.direction==="rtl"}function TM(e,t,r){const n=CU(e);let s;s=kU(e)||n?!r:r,poe(e,t,s,"character")}function g5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function xoe(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const EU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,yoe=EU&&"documentMode"in document?document.documentMode:null;!(!EU||!("InputEvent"in window)||yoe)&&"getTargetRanges"in new window.InputEvent("input");function NU(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}function Gm(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function Za(e,...t){const r=NU(...t);r.length>0&&e.classList.add(...r)}function Mf(e,...t){const r=NU(...t);r.length>0&&e.classList.remove(...r)}function voe(e){return e?e.getAdjacentCaret():null}function woe(e,t){let r=e;for(;r!=null;){if(r instanceof t)return r;r=r.getParent()}return null}function boe(e){const t=K_(e,(r=>It(r)&&!r.isInline()));return It(t)||xoe(4,e.__key),t}const K_=(e,t)=>{let r=e;for(;r!==Us()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function Qh(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function AU(e,t){const r=[],n=Array.from(e).reverse();for(let s=n.pop();s!==void 0;s=n.pop())if(t(s))r.push(s);else if(It(s))for(const a of _oe(s))n.push(a);return r}function _oe(e){return Soe(bc(e,"previous"))}function Soe(e){return xC({hasNext:Nm,initial:e.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function koe(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=n.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const o=i.payload;if(o&&o.functionId==="makeChanges"){const l=o.args;if(l){const[u,d,f,h,g,x]=l;e.update((()=>{const y=xr();if(qt(y)){const v=y.anchor;let T=v.getNode(),k=0,b=0;if(yr(T)&&u>=0&&d>=0&&(k=u,b=u+d,y.setTextNodeRange(T,k,T,b)),k===b&&f===""||(y.insertRawText(f),T=v.getNode()),yr(T)){k=h,b=h+g;const E=T.getTextContentSize();k=k>E?E:k,b=b>E?E:b,y.setTextNodeRange(T,k,T,b)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function Toe(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(!PU.has(i.nodeName)){const o=MU(i,e,s,!1);o!==null&&(n=n.concat(o))}}return(function(a){for(const i of a)i.getNextSibling()instanceof Q7&&i.insertAfter(Ju());for(const i of a){const o=i.getChildren();for(const l of o)i.insertBefore(l);i.remove()}})(s),n}function Coe(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=Us().getChildren();for(let s=0;s<n.length;s++)jU(e,n[s],r,t);return r.innerHTML}function jU(e,t,r,n=null){let s=n===null||t.isSelected(n);const a=It(t)&&t.excludeFromCopy("html");let i=t;if(n!==null){let g=cC(t);g=yr(g)&&n!==null?SU(n,g):g,i=g}const o=It(i)?i.getChildren():[],l=tC(e,i.getType());let u;u=l&&l.exportDOM!==void 0?l.exportDOM(e,i):i.exportDOM(e);const{element:d,after:f}=u;if(!d)return!1;const h=document.createDocumentFragment();for(let g=0;g<o.length;g++){const x=o[g],y=jU(e,x,h,n);!s&&It(t)&&y&&t.extractWithChild(x,n,"html")&&(s=!0)}if(s&&!a){if((Ns(d)||y8(d))&&d.append(h),r.append(d),f){const g=f.call(i,d);g&&(y8(d)?d.replaceChildren(g):d.replaceWith(g))}}else r.append(h);return s}const PU=new Set(["STYLE","SCRIPT"]);function MU(e,t,r,n,s=new Map,a){let i=[];if(PU.has(e.nodeName))return i;let o=null;const l=(function(x,y){const{nodeName:v}=x,T=y._htmlConversions.get(v.toLowerCase());let k=null;if(T!==void 0)for(const b of T){const E=b(x);E!==null&&(k===null||(k.priority||0)<=(E.priority||0))&&(k=E)}return k!==null?k.conversion:null})(e,t),u=l?l(e):null;let d=null;if(u!==null){d=u.after;const x=u.node;if(o=Array.isArray(x)?x[x.length-1]:x,o!==null){for(const[,y]of s)if(o=y(o,a),!o)break;o&&i.push(...Array.isArray(x)?x:[o])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const f=e.childNodes;let h=[];const g=(o==null||!$o(o))&&(o!=null&&h8(o)||n);for(let x=0;x<f.length;x++)h.push(...MU(f[x],t,r,g,new Map(s),o));return d!=null&&(h=d(h)),S4(e)&&(h=Eoe(e,h,g?()=>{const x=new Q7;return r.push(x),x}:Es)),o==null?h.length>0?i=i.concat(h):S4(e)&&(function(x){return x.nextSibling==null||x.previousSibling==null?!1:v8(x.nextSibling)&&v8(x.previousSibling)})(e)&&(i=i.concat(Ju())):It(o)&&o.append(...h),i}function Eoe(e,t,r){const n=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const o=t[i];if(h8(o))n&&!o.getFormat()&&o.setFormat(n),s.push(o);else if(a.push(o),i===t.length-1||i<t.length-1&&h8(t[i+1])){const l=r();l.setFormat(n),l.append(...a),s.push(l),a=[]}}return s}function k4(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Noe(e,t=xr()){return t==null&&k4(166),qt(t)&&t.isCollapsed()||t.getNodes().length===0?"":Coe(e,t)}function Aoe(e,t=xr()){return t==null&&k4(166),qt(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(joe(e,t))}function CM(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return EM(r,Poe(o.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const o=new DOMParser().parseFromString((function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(l):l})(s),"text/html");return EM(r,Toe(r,o),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(qt(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let l=0;l<o.length;l++){const u=xr();if(qt(u)){const d=o[l];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([c1()]):u.insertText(d)}}}else t.insertRawText(i)}function EM(e,t,r){e.dispatchCommand(tie,{nodes:t,selection:r})||(r.insertNodes(t),(function(n){if(qt(n)&&n.isCollapsed()){const s=n.anchor;let a=null;const i=l0(s,"previous");if(i)if(jf(i))a=i.origin;else{const o=Lf(i,bc(Us(),"next").getFlipped());for(const l of o){if(yr(l.origin)){a=l.origin;break}if(It(l.origin)&&!l.origin.isInline())break}}if(a&&yr(a)){const o=a.getFormat(),l=a.getStyle();n.format===o&&n.style===l||(n.format=o,n.style=l,n.dirty=!0)}}})(r))}function FU(e,t,r,n=[]){let s=t===null||r.isSelected(t);const a=It(r)&&r.excludeFromCopy("html");let i=r;if(t!==null){let u=cC(r);u=yr(u)&&t!==null?SU(t,u):u,i=u}const o=It(i)?i.getChildren():[],l=(function(u){const d=u.exportJSON(),f=u.constructor;if(d.type!==f.getType()&&k4(58,f.name),It(u)){const h=d.children;Array.isArray(h)||k4(59,f.name)}return d})(i);if(yr(i)){const u=i.__text;u.length>0?l.text=u:s=!1}for(let u=0;u<o.length;u++){const d=o[u],f=FU(e,t,d,l.children);!s&&It(r)&&f&&r.extractWithChild(d,t,"clone")&&(s=!0)}if(s&&!a)n.push(l);else if(Array.isArray(l.children))for(let u=0;u<l.children.length;u++){const d=l.children[u];n.push(d)}return s}function joe(e,t){const r=[],n=Us().getChildren();for(let s=0;s<n.length;s++)FU(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function Poe(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=Cie(n);yr(s)&&moe(s),t.push(s)}return t}let Jg=null;async function NM(e,t,r){if(Jg!==null)return!1;if(t!==null)return new Promise(((u,d)=>{e.update((()=>{u(AM(e,t,r))}))}));const n=e.getRootElement(),s=e._window||window,a=window.document,i=lu(s);if(n===null||i===null)return!1;const o=a.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(a.createTextNode("#")),n.append(o);const l=new Range;return l.setStart(o,0),l.setEnd(o,1),i.removeAllRanges(),i.addRange(l),new Promise(((u,d)=>{const f=e.registerCommand(L_,(h=>(Qh(h,ClipboardEvent)&&(f(),Jg!==null&&(window.clearTimeout(Jg),Jg=null),u(AM(e,h,r))),!0)),Mie);Jg=window.setTimeout((()=>{f(),Jg=null,u(!1)}),50),a.execCommand("copy"),o.remove()}))}function AM(e,t,r){if(r===void 0){const s=lu(e._window);if(!s)return!1;const a=s.anchorNode,i=s.focusNode;if(a!==null&&i!==null&&!c2(e,a,i))return!1;const o=xr();if(o===null)return!1;r=Foe(o)}t.preventDefault();const n=t.clipboardData;return n!==null&&(Doe(n,r),!0)}const Moe=[["text/html",Noe],["application/x-lexical-editor",Aoe]];function Foe(e=xr()){const t={"text/plain":e?e.getTextContent():""};if(e){const r=d2();for(const[n,s]of Moe){const a=s(r,e);a!==null&&(t[n]=a)}}return t}function Doe(e,t){for(const r in t){const n=t[r];n!==void 0&&e.setData(r,n)}}function jM(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const h1=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ooe=h1&&"documentMode"in document?document.documentMode:null,Roe=!(!h1||!("InputEvent"in window)||Ooe)&&"getTargetRanges"in new window.InputEvent("input"),Ioe=h1&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),PM=h1&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Loe=h1&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Boe=h1&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Loe,MM=Qr("DRAG_DROP_PASTE_FILE");let f2=class DU extends yo{static getType(){return"quote"}static clone(t){return new DU(t.__key)}createDOM(t){const r=document.createElement("blockquote");return Za(r,t.theme.quote),r}updateDOM(t,r){return!1}static importDOM(){return{blockquote:t=>({conversion:$oe,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ns(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return h2().updateFromJSON(t)}insertNewAfter(t,r){const n=Es(),s=this.getDirection();return n.setDirection(s),this.insertAfter(n,r),n}collapseAtStart(){const t=Es();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function h2(){return Wo(new f2)}function FM(e){return e instanceof f2}let m2=class OU extends yo{static getType(){return"heading"}static clone(t){return new OU(t.__tag,t.__key)}constructor(t,r){super(r),this.__tag=t}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,n=document.createElement(r),s=t.theme.heading;if(s!==void 0){const a=s[r];Za(n,a)}return n}updateDOM(t,r,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:Qg,priority:0}),h2:t=>({conversion:Qg,priority:0}),h3:t=>({conversion:Qg,priority:0}),h4:t=>({conversion:Qg,priority:0}),h5:t=>({conversion:Qg,priority:0}),h6:t=>({conversion:Qg,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&DM(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>DM(t)?{conversion:r=>({node:kf("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ns(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return kf(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const n=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&n===s.getTextContentSize()||!t?Es():kf(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,r),n===0&&!this.isEmpty()&&t){const o=Es();o.select(),this.replace(o,!0)}return a}collapseAtStart(){const t=this.isEmpty()?Es():kf(this.getTag());return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}extractWithChild(){return!0}};function DM(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function Qg(e){const t=e.nodeName.toLowerCase();let r=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(r=kf(t),e.style!==null&&(uC(e,r),r.setFormat(e.style.textAlign))),{node:r}}function $oe(e){const t=h2();return e.style!==null&&(t.setFormat(e.style.textAlign),uC(e,t)),{node:t}}function kf(e="h1"){return Wo(new m2(e))}function zoe(e){return e instanceof m2}function Zw(e){let t=null;if(Qh(e,DragEvent)?t=e.dataTransfer:Qh(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function OM(e){const t=xr();if(!qt(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const a=n[s],i=a.getKey();if(r.has(i))continue;const o=K_(a,(u=>It(u)&&!u.isInline()));if(o===null)continue;const l=o.getKey();o.canIndent()&&!r.has(l)&&(r.add(l),e(o))}return r.size>0}function RM(e){const t=If(e);return zn(t)}function p5(e){for(const t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function Uoe(e){return Gm(e.registerCommand(z7,(t=>{const r=xr();return!!io(r)&&(r.clear(),!0)}),Dn),e.registerCommand(om,(t=>{const r=xr();return qt(r)?(r.deleteCharacter(t),!0):!!io(r)&&(r.deleteNodes(),!0)}),Dn),e.registerCommand(vv,(t=>{const r=xr();return!!qt(r)&&(r.deleteWord(t),!0)}),Dn),e.registerCommand(wv,(t=>{const r=xr();return!!qt(r)&&(r.deleteLine(t),!0)}),Dn),e.registerCommand(kp,(t=>{const r=xr();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)CM(n,r,e);else if(qt(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0}),Dn),e.registerCommand(a8,(()=>{const t=xr();return!!qt(t)&&(t.removeText(),!0)}),Dn),e.registerCommand(go,(t=>{const r=xr();return!!qt(r)&&(r.formatText(t),!0)}),Dn),e.registerCommand(Pz,(t=>{const r=xr();if(!qt(r)&&!io(r))return!1;const n=r.getNodes();for(const s of n){const a=K_(s,(i=>It(i)&&!i.isInline()));a!==null&&a.setFormat(t)}return!0}),Dn),e.registerCommand(Sp,(t=>{const r=xr();return!!qt(r)&&(r.insertLineBreak(t),!0)}),Dn),e.registerCommand(yv,(()=>{const t=xr();return!!qt(t)&&(t.insertParagraph(),!0)}),Dn),e.registerCommand(aie,(()=>(Sie([c1()]),!0)),Dn),e.registerCommand(iie,(()=>OM((t=>{const r=t.getIndent();t.setIndent(r+1)}))),Dn),e.registerCommand(BP,(()=>OM((t=>{const r=t.getIndent();r>0&&t.setIndent(Math.max(0,r-1))}))),Dn),e.registerCommand(Sz,(t=>{const r=xr();if(io(r)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(qt(r)){const n=g8(r.focus,!0);if(!t.shiftKey&&zn(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),Dn),e.registerCommand(kz,(t=>{const r=xr();if(io(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(qt(r)){if((function(s){const a=s.focus;return a.key==="root"&&a.offset===Us().getChildrenSize()})(r))return t.preventDefault(),!0;const n=g8(r.focus,!1);if(!t.shiftKey&&zn(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),Dn),e.registerCommand(_z,(t=>{const r=xr();if(io(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),SM(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!qt(r))return!1;if(kM(r,!0)){const n=t.shiftKey;return t.preventDefault(),TM(r,n,!0),!0}return!1}),Dn),e.registerCommand(bz,(t=>{const r=xr();if(io(r)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),SM(s[0])?s[0].selectPrevious():s[0].selectNext(0,0),!0}if(!qt(r))return!1;const n=t.shiftKey;return!!kM(r,!1)&&(t.preventDefault(),TM(r,n,!1),!0)}),Dn),e.registerCommand(Cz,(t=>{if(RM(t.target))return!1;const r=xr();if(qt(r)){if((function(n){if(!n.isCollapsed())return!1;const{anchor:s}=n;if(s.offset!==0)return!1;const a=s.getNode();if(ti(a))return!1;const i=boe(a);return i.getIndent()>0&&(i.is(a)||a.is(i.getFirstDescendant()))})(r))return t.preventDefault(),e.dispatchCommand(BP,void 0);if(PM&&navigator.language==="ko-KR")return!1}else if(!io(r))return!1;return t.preventDefault(),e.dispatchCommand(om,!0)}),Dn),e.registerCommand(Nz,(t=>{if(RM(t.target))return!1;const r=xr();return!(!qt(r)&&!io(r))&&(t.preventDefault(),e.dispatchCommand(om,!1))}),Dn),e.registerCommand(p4,(t=>{const r=xr();if(!qt(r))return!1;if(p5(r),t!==null){if((PM||Ioe||Boe)&&Roe)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(Sp,!1)}return e.dispatchCommand(yv,void 0)}),Dn),e.registerCommand(Ez,(()=>{const t=xr();return!!qt(t)&&(e.blur(),!0)}),Dn),e.registerCommand(jz,(t=>{const[,r]=Zw(t);if(r.length>0){const s=jM(t.clientX,t.clientY);if(s!==null){const{offset:a,node:i}=s,o=If(i);if(o!==null){const l=z_();if(yr(o))l.anchor.set(o.getKey(),a,"text"),l.focus.set(o.getKey(),a,"text");else{const d=o.getParentOrThrow().getKey(),f=o.getIndexWithinParent()+1;l.anchor.set(d,f,"element"),l.focus.set(d,f,"element")}const u=d4(l);Xi(u)}e.dispatchCommand(MM,r)}return t.preventDefault(),!0}const n=xr();return!!qt(n)}),Dn),e.registerCommand(Mz,(t=>{const[r]=Zw(t),n=xr();return!(r&&!qt(n))}),Dn),e.registerCommand(Fz,(t=>{const[r]=Zw(t),n=xr();if(r&&!qt(n))return!1;const s=jM(t.clientX,t.clientY);if(s!==null){const a=If(s.node);zn(a)&&t.preventDefault()}return!0}),Dn),e.registerCommand(i8,(()=>(Bie(),!0)),Dn),e.registerCommand(L_,(t=>(NM(e,Qh(t,ClipboardEvent)?t:null),!0)),Dn),e.registerCommand(G7,(t=>((async function(r,n){await NM(n,Qh(r,ClipboardEvent)?r:null),n.update((()=>{const s=xr();qt(s)?s.removeText():io(s)&&s.getNodes().forEach((a=>a.remove()))}))})(t,e),!0)),Dn),e.registerCommand(U7,(t=>{const[,r,n]=Zw(t);return r.length>0&&!n?(e.dispatchCommand(MM,r),!0):d1(t.target)&&rC(t.target)?!1:xr()!==null&&((function(s,a){s.preventDefault(),a.update((()=>{const i=xr(),o=Qh(s,InputEvent)||Qh(s,KeyboardEvent)?null:s.clipboardData;o!=null&&i!==null&&CM(o,i,a)}),{tag:Nie})})(t,e),!0)}),Dn),e.registerCommand(Tz,(t=>{const r=xr();return qt(r)&&p5(r),!1}),Dn),e.registerCommand(Az,(t=>{const r=xr();return qt(r)&&p5(r),!1}),Dn))}const b8=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function IM(e){return e.getEditorState().read(vU(e.isComposing()))}function RU({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){const[n]=td(),s=(function(a,i){const[o,l]=_.useState((()=>a.getDecorators()));return b8((()=>a.registerDecoratorListener((u=>{kk.flushSync((()=>{l(u)}))}))),[a]),_.useEffect((()=>{l(a.getDecorators())}),[a]),_.useMemo((()=>{const u=[],d=Object.keys(o);for(let f=0;f<d.length;f++){const h=d[f],g=c.jsx(i,{onError:y=>a._onError(y),children:c.jsx(_.Suspense,{fallback:null,children:o[h]})}),x=a.getElementByKey(h);x!==null&&u.push(kk.createPortal(g,x,h))}return u}),[i,o,a])})(n,r);return(function(a){b8((()=>Gm(Uoe(a),koe(a))),[a])})(n),c.jsxs(c.Fragment,{children:[e,c.jsx(Woe,{content:t}),s]})}function Woe({content:e}){const[t]=td(),r=(function(s){const[a,i]=_.useState((()=>IM(s)));return b8((()=>{function o(){const l=IM(s);i(l)}return o(),Gm(s.registerUpdateListener((()=>{o()})),s.registerEditableListener((()=>{o()})))}),[s]),a})(t),n=uoe();return r?typeof e=="function"?e(n):e:null}const IU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function Hoe({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:o,ariaLabel:l,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:f,ariaRequired:h,autoCapitalize:g,className:x,id:y,role:v="textbox",spellCheck:T=!0,style:k,tabIndex:b,"data-testid":E,...N},P){const[M,j]=_.useState(e.isEditable()),A=_.useCallback((L=>{L&&L.ownerDocument&&L.ownerDocument.defaultView?e.setRootElement(L):e.setRootElement(null)}),[e]),F=_.useMemo((()=>(function(...L){return V=>{L.forEach((J=>{typeof J=="function"?J(V):J!=null&&(J.current=V)}))}})(P,A)),[A,P]);return IU((()=>(j(e.isEditable()),e.registerEditableListener((L=>{j(L)})))),[e]),c.jsx("div",{"aria-activedescendant":M?t:void 0,"aria-autocomplete":M?r:"none","aria-controls":M?n:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":M&&v==="combobox"?!!i:void 0,...o!=null?{"aria-invalid":o}:{},"aria-label":l,"aria-labelledby":u,"aria-multiline":d,"aria-owns":M?f:void 0,"aria-readonly":!M||void 0,"aria-required":h,autoCapitalize:g,className:x,contentEditable:M,"data-testid":E,id:y,ref:F,role:v,spellCheck:T,style:k,tabIndex:b,...N})}const Goe=_.forwardRef(Hoe);function LM(e){return e.getEditorState().read(vU(e.isComposing()))}const LU=_.forwardRef(Voe);function Voe(e,t){const{placeholder:r,...n}=e,[s]=td();return c.jsxs(c.Fragment,{children:[c.jsx(Goe,{editor:s,...n,ref:t}),r!=null&&c.jsx(qoe,{editor:s,content:r})]})}function qoe({content:e,editor:t}){const r=(function(i){const[o,l]=_.useState((()=>LM(i)));return IU((()=>{function u(){const d=LM(i);l(d)}return u(),Gm(i.registerUpdateListener((()=>{u()})),i.registerEditableListener((()=>{u()})))}),[i]),o})(t),[n,s]=_.useState(t.isEditable());if(_.useLayoutEffect((()=>(s(t.isEditable()),t.registerEditableListener((i=>{s(i)})))),[t]),!r)return null;let a=null;return typeof e=="function"?a=e(n):e!==null&&(a=e),a===null?null:c.jsx("div",{"aria-hidden":!0,children:a})}const eb=0,_8=1,S8=2,Jc=0,Koe=1,BM=2,Yoe=3,Xoe=4;function Joe(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return Jc;const a=t._selection,i=e._selection;if(s)return Koe;if(!(qt(a)&&qt(i)&&i.isCollapsed()&&a.isCollapsed()))return Jc;const o=(function(T,k,b){const E=T._nodeMap,N=[];for(const P of k){const M=E.get(P);M!==void 0&&N.push(M)}for(const[P,M]of b){if(!M)continue;const j=E.get(P);j===void 0||ti(j)||N.push(j)}return N})(t,r,n);if(o.length===0)return Jc;if(o.length>1){const T=t._nodeMap,k=T.get(a.anchor.key),b=T.get(i.anchor.key);return k&&b&&!e._nodeMap.has(k.__key)&&yr(k)&&k.__text.length===1&&a.anchor.offset===1?BM:Jc}const l=o[0],u=e._nodeMap.get(l.__key);if(!yr(u)||!yr(l)||u.__mode!==l.__mode)return Jc;const d=u.__text,f=l.__text;if(d===f)return Jc;const h=a.anchor,g=i.anchor;if(h.key!==g.key||h.type!=="text")return Jc;const x=h.offset,y=g.offset,v=f.length-d.length;return v===1&&y===x-1?BM:v===-1&&y===x+1?Yoe:v===-1&&y===x?Xoe:Jc}function Qoe(e,t){let r=Date.now(),n=Jc;return(s,a,i,o,l,u)=>{const d=Date.now();if(u.has(w4))return n=Jc,r=d,S8;const f=Joe(s,a,o,l,e.isComposing()),h=(()=>{const g=i===null||i.editor===e,x=u.has(Eie);if(!x&&g&&u.has(qy))return eb;if(s===null)return _8;const y=a._selection;return o.size>0||l.size>0?x===!1&&f!==Jc&&f===n&&d<r+t&&g||o.size===1&&(function(v,T,k){const b=T._nodeMap.get(v),E=k._nodeMap.get(v),N=T._selection,P=k._selection;return!(qt(N)&&qt(P)&&N.anchor.type==="element"&&N.focus.type==="element"&&P.anchor.type==="text"&&P.focus.type==="text"||!yr(b)||!yr(E)||b.__parent!==E.__parent)&&JSON.stringify(T.read((()=>b.exportJSON())))===JSON.stringify(k.read((()=>E.exportJSON())))})(Array.from(o)[0],s,a)?eb:_8:y!==null?eb:S8})();return r=d,n=f,h}}function $M(e){e.undoStack=[],e.redoStack=[],e.current=null}function Zoe(e,t,r){const n=Qoe(e,r);return Gm(e.registerCommand(W7,(()=>((function(a,i){const o=i.redoStack,l=i.undoStack;if(l.length!==0){const u=i.current,d=l.pop();u!==null&&(o.push(u),a.dispatchCommand(Gw,!0)),l.length===0&&a.dispatchCommand(Vw,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:w4})}})(e,t),!0)),Dn),e.registerCommand(H7,(()=>((function(a,i){const o=i.redoStack,l=i.undoStack;if(o.length!==0){const u=i.current;u!==null&&(l.push(u),a.dispatchCommand(Vw,!0));const d=o.pop();o.length===0&&a.dispatchCommand(Gw,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:w4})}})(e,t),!0)),Dn),e.registerCommand(lie,(()=>($M(t),!1)),Dn),e.registerCommand(cie,(()=>($M(t),e.dispatchCommand(Gw,!1),e.dispatchCommand(Vw,!1),!0)),Dn),e.registerUpdateListener((({editorState:a,prevEditorState:i,dirtyLeaves:o,dirtyElements:l,tags:u})=>{const d=t.current,f=t.redoStack,h=t.undoStack,g=d===null?null:d.editorState;if(d!==null&&a===g)return;const x=n(i,a,d,o,l,u);if(x===_8)f.length!==0&&(t.redoStack=[],e.dispatchCommand(Gw,!1)),d!==null&&(h.push({...d}),e.dispatchCommand(Vw,!0));else if(x===S8)return;t.current={editor:e,editorState:a}})))}function ele(){return{current:null,redoStack:[],undoStack:[]}}function BU({delay:e,externalHistoryState:t}){const[r]=td();return(function(n,s,a=1e3){const i=_.useMemo((()=>s||ele()),[s]);_.useEffect((()=>Zoe(n,i,a)),[a,n,i])})(r,t,e),null}function $U({defaultSelection:e}){const[t]=td();return _.useEffect((()=>{t.focus((()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})}),{defaultSelection:e})}),[e,t]),null}function k8(e,t){return k8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},k8(e,t)}var zM={error:null},tle=(function(e){var t,r;function n(){for(var a,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(a=e.call.apply(e,[this].concat(o))||this).state=zM,a.resetErrorBoundary=function(){for(var u,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];a.props.onReset==null||(u=a.props).onReset.apply(u,f),a.reset()},a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,k8(t,r),n.getDerivedStateFromError=function(a){return{error:a}};var s=n.prototype;return s.reset=function(){this.setState(zM)},s.componentDidCatch=function(a,i){var o,l;(o=(l=this.props).onError)==null||o.call(l,a,i)},s.componentDidUpdate=function(a,i){var o,l,u,d,f=this.state.error,h=this.props.resetKeys;f!==null&&i.error!==null&&((u=a.resetKeys)===void 0&&(u=[]),(d=h)===void 0&&(d=[]),u.length!==d.length||u.some((function(g,x){return!Object.is(g,d[x])})))&&((o=(l=this.props).onResetKeysChange)==null||o.call(l,a.resetKeys,h),this.reset())},s.render=function(){var a=this.state.error,i=this.props,o=i.fallbackRender,l=i.FallbackComponent,u=i.fallback;if(a!==null){var d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(_.isValidElement(u))return u;if(typeof o=="function")return o(d);if(l)return _.createElement(l,d);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n})(_.Component);function zU({children:e,onError:t}){return c.jsx(tle,{fallback:c.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}const vC=/^(\d+(?:\.\d+)?)px$/,Np={BOTH:3,NO_STATUS:0,ROW:1};class m1 extends yo{static getType(){return"tablecell"}static clone(t){return new m1(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:UM,priority:0}),th:t=>({conversion:UM,priority:0})}}static importJSON(t){return UU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=Np.NO_STATUS,r=1,n,s){super(s),this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),T8(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),Za(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(Ns(r.element)){const n=r.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...T8(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=Np.BOTH){const n=this.getWritable();return n.__headerState=t&r|n.__headerState&~r,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Np.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function T8(e){return e==="middle"||e==="bottom"}function UM(e){const t=e,r=e.nodeName.toLowerCase();let n;vC.test(t.style.width)&&(n=parseFloat(t.style.width));const s=UU(r==="th"?Np.ROW:Np.NO_STATUS,t.colSpan,n);s.__rowSpan=t.rowSpan;const a=t.style.backgroundColor;a!==""&&(s.__backgroundColor=a);const i=t.style.verticalAlign;T8(i)&&(s.__verticalAlign=i);const o=t.style,l=(o&&o.textDecoration||"").split(" "),u=o.fontWeight==="700"||o.fontWeight==="bold",d=l.includes("line-through"),f=o.fontStyle==="italic",h=l.includes("underline");return{after:g=>{const x=[];let y=null;const v=()=>{if(y){const T=y.getFirstChild();Jd(T)&&y.getChildrenSize()===1&&T.remove()}};for(const T of g)Uie(T)||yr(T)||Jd(T)?(yr(T)&&(u&&T.toggleFormat("bold"),d&&T.toggleFormat("strikethrough"),f&&T.toggleFormat("italic"),h&&T.toggleFormat("underline")),y?y.append(T):(y=Es().append(T),x.push(y))):(x.push(T),v(),y=null);return v(),x.length===0&&x.push(Es()),x},node:s}}function UU(e=Np.NO_STATUS,t=1,r){return Wo(new m1(e,t,r))}function _v(e){return e instanceof m1}function C8(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class g1 extends yo{static getType(){return"tablerow"}static clone(t){return new g1(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:rle,priority:0})}}static importJSON(t){return WU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,r){super(r),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),Za(r,t.theme.tableRow),r}extractWithChild(t,r,n){return n==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function rle(e){const t=e;let r;return vC.test(t.style.height)&&(r=parseFloat(t.style.height)),{after:n=>AU(n,_v),node:WU(r)}}function WU(e){return Wo(new g1(e))}function HU(e){return e instanceof g1}const GU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,nle=GU&&"documentMode"in document?document.documentMode:null;GU&&"InputEvent"in window&&!nle&&new window.InputEvent("input");function sle(e,t,r){const n=[];let s=null,a=null;function i(l){let u=n[l];return u===void 0&&(n[l]=u=[]),u}const o=e.getChildren();for(let l=0;l<o.length;l++){const u=o[l];HU(u)||C8(209);const d=i(l);for(let f=u.getFirstChild(),h=0;f!=null;f=f.getNextSibling()){for(_v(f)||C8(147);d[h]!==void 0;)h++;const g={cell:f,startColumn:h,startRow:l},{__rowSpan:x,__colSpan:y}=f;for(let v=0;v<x&&!(l+v>=o.length);v++){const T=i(l+v);for(let k=0;k<y;k++)T[h+k]=g}}}return[n,s,a]}function xy(e){return Ns(e)&&e.nodeName==="TABLE"}function ale(e,t){for(let r=t,n=null;r!==null;r=r.getParent()){if(e.is(r))return n;_v(r)&&(n=r)}return null}function ile(e,t,r){return ale(e,If(t,r))}function WM(e,t,r){if(!t.theme.tableAlignment)return;const n=[],s=[];for(const a of["center","right"]){const i=t.theme.tableAlignment[a];i&&(a===r?s:n).push(i)}Mf(e,...n),Za(e,...s)}const ole=new WeakSet;function HM(e=d2()){return ole.has(e)}class g2 extends yo{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new g2(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:lle,priority:1})}}static importJSON(t){return VU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,n){return n==="html"}getDOMSlot(t){const r=xy(t)?t:t.querySelector("table");return xy(r)||C8(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const s=document.createElement("colgroup");if(n.appendChild(s),qie(s),Za(n,t.theme.table),this.updateTableElement(null,n,t),HM(r)){const a=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?Za(a,i):a.style.cssText="overflow-x: auto;",a.appendChild(n),this.updateTableWrapper(null,a,n,t),a}return n}updateTableWrapper(t,r,n,s){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&(function(a,i,o,l){l>0?(Za(a,o.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(Mf(a,o.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))})(r,n,s,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&(function(a,i,o,l){l>0?(Za(a,o.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(Mf(a,o.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))})(r,n,s,this.__frozenRowCount)}updateTableElement(t,r,n){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&(function(s,a,i){i?(Za(s,a.theme.tableRowStriping),s.setAttribute("data-lexical-row-striping","true")):(Mf(s,a.theme.tableRowStriping),s.removeAttribute("data-lexical-row-striping"))})(r,n,this.__rowStriping),(function(s,a,i,o){const l=s.querySelector("colgroup");if(!l)return;const u=[];for(let d=0;d<i;d++){const f=document.createElement("col"),h=o&&o[d];h&&(f.style.width=`${h}px`),u.push(f)}l.replaceChildren(...u)})(r,0,this.getColumnCount(),this.getColWidths()),WM(r,n,this.getFormatType())}updateDOM(t,r,n){const s=this.getDOMSlot(r).element;return r===s===HM()||(Ns(a=r)&&a.nodeName==="DIV"&&this.updateTableWrapper(t,r,s,n),this.updateTableElement(t,s,n),!1);var a}exportDOM(t){const r=super.exportDOM(t),{element:n}=r;return{after:s=>{if(r.after&&(s=r.after(s)),!xy(s)&&Ns(s)&&(s=s.querySelector("table")),!xy(s))return null;WM(s,t._config,this.getFormatType());const[a]=sle(this),i=new Map;for(const d of a)for(const f of d){const h=f.cell.getKey();i.has(h)||i.set(h,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const o=new Set;for(const d of s.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=d.getAttribute("data-temporary-table-cell-lexical-key");if(f){const h=i.get(f);if(d.removeAttribute("data-temporary-table-cell-lexical-key"),h){i.delete(f);for(let g=0;g<h.colSpan;g++)o.add(g+h.startColumn)}}}const l=s.querySelector(":scope > colgroup");if(l){const d=Array.from(s.querySelectorAll(":scope > colgroup > col")).filter(((f,h)=>o.has(h)));l.replaceChildren(...d)}const u=s.querySelectorAll(":scope > tr");if(u.length>0){const d=document.createElement("tbody");for(const f of u)d.appendChild(f);s.append(d)}return s},element:!xy(n)&&Ns(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:n,domRows:s}=r;for(let a=0;a<n;a++){const i=s[a];if(i!=null)for(let o=0;o<i.length;o++){const l=i[o];if(l==null)continue;const{elem:u}=l,d=ile(this,u);if(d!==null&&t.is(d))return{x:o,y:a}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,n){const{domRows:s}=n,a=s[r];if(a==null)return null;const i=a[t<a.length?t:a.length-1];return i??null}getDOMCellFromCordsOrThrow(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(!s)throw new Error("Cell not found at cords.");return s}getCellNodeFromCords(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(s==null)return null;const a=If(s.elem);return _v(a)?a:null}getCellNodeFromCordsOrThrow(t,r,n){const s=this.getCellNodeFromCords(t,r,n);if(!s)throw new Error("Node at cords not TableCellNode.");return s}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach((n=>{_v(n)&&(r+=n.getColSpan())})),r}}function lle(e){const t=VU();e.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),e.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),e.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);const r=e.querySelector(":scope > colgroup");if(r){let n=[];for(const s of r.querySelectorAll(":scope > col")){let a=s.style.width||"";if(!vC.test(a)&&(a=s.getAttribute("width")||"",!/^\d+$/.test(a))){n=void 0;break}n.push(parseFloat(a))}n&&t.setColWidths(n)}return{after:n=>AU(n,HU),node:t}}function VU(){return Wo(new g2)}function Tf(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function E8(e){let t=1,r=e.getParent();for(;r!=null;){if(qn(r)){const n=r.getParent();if(mn(n)){t++,r=n.getParent();continue}Tf(40)}return t}return t}function N8(e){let t=e.getParent();mn(t)||Tf(40);let r=t;for(;r!==null;)r=r.getParent(),mn(r)&&(t=r);return t}function qU(e){let t=[];const r=e.getChildren().filter(qn);for(let n=0;n<r.length;n++){const s=r[n],a=s.getFirstChild();mn(a)?t=t.concat(qU(a)):t.push(s)}return t}function zu(e){return qn(e)&&mn(e.getFirstChild())}function GM(e){return Ll().append(e)}function KU(e,t){return qn(e)&&(t.length===0||t.length===1&&e.is(t[0])&&e.getChildrenSize()===0)}function VM(e){const t=xr();if(t!==null){let r=t.getNodes();if(qt(t)){const s=t.getStartEndPoints();s===null&&Tf(143);const[a]=s,i=a.getNode(),o=i.getParent();if($o(i)){const l=i.getFirstChild();if(l)r=l.selectStart().getNodes();else{const u=Es();i.append(u),r=u.select().getNodes()}}else if(KU(i,r)){const l=cl(e);if($o(o)){i.replace(l);const u=Ll();It(i)&&(u.setFormat(i.getFormatType()),u.setIndent(i.getIndent())),l.append(u)}else if(qn(i)){const u=i.getParentOrThrow();Pm(l,u.getChildren()),u.replace(l)}return}}const n=new Set;for(let s=0;s<r.length;s++){const a=r[s];if(It(a)&&a.isEmpty()&&!qn(a)&&!n.has(a.getKey())){qM(a,e);continue}let i=nU(a)?a.getParent():qn(a)&&a.isEmpty()?a:null;for(;i!=null;){const o=i.getKey();if(mn(i)){if(!n.has(o)){const l=cl(e);Pm(l,i.getChildren()),i.replace(l),n.add(o)}break}{const l=i.getParent();if($o(l)&&!n.has(o)){n.add(o),qM(i,e);break}i=l}}}}}function Pm(e,t){e.splice(e.getChildrenSize(),0,t)}function qM(e,t){if(mn(e))return e;const r=e.getPreviousSibling(),n=e.getNextSibling(),s=Ll();let a;if(Pm(s,e.getChildren()),mn(r)&&t===r.getListType())r.append(s),mn(n)&&t===n.getListType()&&(Pm(r,n.getChildren()),n.remove()),a=r;else if(mn(n)&&t===n.getListType())n.getFirstChildOrThrow().insertBefore(s),a=n;else{const i=cl(t);i.append(s),e.replace(i),a=i}return s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),e.remove(),a}function wC(e,t){const r=e.getLastChild(),n=t.getFirstChild();r&&n&&zu(r)&&zu(n)&&(wC(r.getFirstChild(),n.getFirstChild()),n.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function cle(){const e=xr();if(qt(e)){const t=new Set,r=e.getNodes(),n=e.anchor.getNode();if(KU(n,r))t.add(N8(n));else for(let s=0;s<r.length;s++){const a=r[s];if(nU(a)){const i=woe(a,y0);i!=null&&t.add(N8(i))}}for(const s of t){let a=s;const i=qU(s);for(const o of i){const l=Es().setTextStyle(e.style).setTextFormat(e.format);Pm(l,o.getChildren()),a.insertAfter(l),a=l,o.__key===e.anchor.key&&jm(e.anchor,mc(bc(l,"next"))),o.__key===e.focus.key&&jm(e.focus,mc(bc(l,"next"))),o.remove()}s.remove()}}}function YU(e){const t=e.getListType()!=="check";let r=e.getStart();for(const n of e.getChildren())qn(n)&&(n.getValue()!==r&&n.setValue(r),t&&n.getLatest().__checked!=null&&n.setChecked(void 0),mn(n.getFirstChild())||r++)}function ule(e){const t=new Set;if(zu(e)||t.has(e.getKey()))return;const r=e.getParent(),n=e.getNextSibling(),s=e.getPreviousSibling();if(zu(n)&&zu(s)){const a=s.getFirstChild();if(mn(a)){a.append(e);const i=n.getFirstChild();mn(i)&&(Pm(a,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if(zu(n)){const a=n.getFirstChild();if(mn(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(zu(s)){const a=s.getFirstChild();mn(a)&&a.append(e)}else if(mn(r)){const a=Ll().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=cl(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):n?n.insertBefore(a):r.append(a)}}function dle(e){if(zu(e))return;const t=e.getParent(),r=t?t.getParent():void 0;if(mn(r?r.getParent():void 0)&&qn(r)&&mn(t)){const n=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{const a=t.getListType(),i=Ll(),o=cl(a);i.append(o),e.getPreviousSiblings().forEach((d=>o.append(d)));const l=Ll(),u=cl(a);l.append(u),Pm(u,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(l),r.replace(e)}}}function fle(){const e=xr();if(!qt(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!qn(t)||t.getChildrenSize()!==0)return!1;const r=N8(t),n=t.getParent();mn(n)||Tf(40);const s=n.getParent();let a;if($o(s))a=Es(),r.insertAfter(a);else{if(!qn(s))return!1;a=Ll(),s.insertAfter(a)}a.setTextStyle(e.style).setTextFormat(e.format).select();const i=t.getNextSiblings();if(i.length>0){const o=cl(n.getListType());if(qn(a)){const l=Ll();l.append(o),a.insertAfter(l)}else a.insertAfter(o);o.append(...i)}return(function(o){let l=o;for(;l.getNextSibling()==null&&l.getPreviousSibling()==null;){const u=l.getParent();if(u==null||!qn(u)&&!mn(u))break;l=u}l.remove()})(t),!0}function T4(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}let y0=class extends yo{$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const r=t.getParent();mn(r)&&r.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:yo,importDOM:{li:()=>({conversion:hle,priority:0})}})}constructor(t=1,r=void 0,n){super(n),this.__value=t===void 0?1:t,this.__checked=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const r=document.createElement("li");return this.updateListItemDOM(null,r,t),r}updateListItemDOM(t,r,n){const s=this.getParent();mn(s)&&s.getListType()==="check"&&(function(o,l,u,d){mn(l.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),u&&l.__checked===u.__checked||o.setAttribute("aria-checked",l.getChecked()?"true":"false"))})(r,this,t),r.value=this.__value,(function(o,l,u){const d=[],f=[],h=l.list,g=h?h.listitem:void 0;let x;if(h&&h.nested&&(x=h.nested.listitem),g!==void 0&&d.push(...T4(g)),h){const y=u.getParent(),v=mn(y)&&y.getListType()==="check",T=u.getChecked();v&&!T||f.push(h.listitemUnchecked),v&&T||f.push(h.listitemChecked),v&&d.push(T?h.listitemChecked:h.listitemUnchecked)}if(x!==void 0){const y=T4(x);u.getChildren().some((v=>mn(v)))?d.push(...y):f.push(...y)}f.length>0&&Mf(o,...f),d.length>0&&Za(o,...d)})(r,n.theme,this);const a=t?t.__style:"",i=this.__style;a!==i&&(i===""?r.removeAttribute("style"):r.style.cssText=i),(function(o,l,u){const d=_M(l.__textStyle);for(const f in d)o.style.setProperty(`--listitem-marker-${f}`,d[f]);if(u)for(const f in _M(u.__textStyle))f in d||o.style.removeProperty(`--listitem-marker-${f}`)})(r,this,t)}updateDOM(t,r,n){const s=r;return this.updateListItemDOM(t,s,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const r=this.createDOM(t._config),n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();return s&&(r.dir=s),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let r=0;r<t.length;r++){const n=t[r];if(It(n)&&this.canMergeWith(n)){const s=n.getChildren();this.append(...s),n.remove()}else super.append(n)}return this}replace(t,r){if(qn(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!mn(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const s=cl(n.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}n.insertAfter(t),t.insertAfter(s)}return r&&(It(t)||Tf(139),this.getChildren().forEach((s=>{t.append(s)}))),this.remove(),n.getChildrenSize()===0&&n.remove(),t}insertAfter(t,r=!0){const n=this.getParentOrThrow();if(mn(n)||Tf(39),qn(t))return super.insertAfter(t,r);const s=this.getNextSiblings();if(n.insertAfter(t,r),s.length!==0){const a=cl(n.getListType());s.forEach((i=>a.append(i))),t.insertAfter(a,r)}return t}remove(t){const r=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),r&&n&&zu(r)&&zu(n)&&(wC(r.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,r=!0){const n=Ll().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,r),n}collapseAtStart(t){const r=Es();this.getChildren().forEach((i=>r.append(i)));const n=this.getParentOrThrow(),s=n.getParentOrThrow(),a=qn(s);if(n.getChildrenSize()===1)if(a)n.remove(),s.select();else{n.insertBefore(r),n.remove();const i=t.anchor,o=t.focus,l=r.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(l,i.offset,"element"),o.type==="element"&&o.getNode().is(this)&&o.set(l,o.offset,"element")}else n.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const r=this.getWritable();return r.__value=t,r}getChecked(){const t=this.getLatest();let r;const n=this.getParent();return mn(n)&&(r=n.getListType()),r==="check"?!!t.__checked:void 0}setChecked(t){const r=this.getWritable();return r.__checked=t,r}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let r=t.getParentOrThrow(),n=0;for(;qn(r);)r=r.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){typeof t!="number"&&Tf(117),(t=Math.floor(t))>=0||Tf(199);let r=this.getIndent();for(;r!==t;)r<t?(ule(this),r++):(dle(this),r--);return this}canInsertAfter(t){return qn(t)}canReplaceWith(t){return qn(t)}canMergeWith(t){return qn(t)||Z7(t)}extractWithChild(t,r){if(!qt(r))return!1;const n=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(n)&&this.isParentOf(s)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return cl("bullet")}canMergeWhenEmpty(){return!0}};function hle(e){if(e.classList.contains("task-list-item")){for(const r of e.children)if(r.tagName==="INPUT")return mle(r)}const t=e.getAttribute("aria-checked");return{node:Ll(t==="true"||t!=="false"&&void 0)}}function mle(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:Ll(e.hasAttribute("checked"))}}function Ll(e){return Wo(new y0(void 0,e))}function qn(e){return e instanceof y0}let Qf=class extends yo{$config(){return this.config("list",{$transform:t=>{(function(r){const n=r.getNextSibling();mn(n)&&r.getListType()===n.getListType()&&wC(r,n)})(t),YU(t)},extends:yo,importDOM:{ol:()=>({conversion:YM,priority:0}),ul:()=>({conversion:YM,priority:0})}})}constructor(t="number",r=1,n){super(n);const s=ple[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const r=this.getWritable();return r.__listType=t,r.__tag=t==="number"?"ol":"ul",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const r=this.getWritable();return r.__start=t,r}createDOM(t,r){const n=this.__tag,s=document.createElement(n);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,KM(s,t.theme,this),s}updateDOM(t,r,n){return t.__tag!==this.__tag||(KM(r,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const r=this.createDOM(t._config,t);return Ns(r)&&(this.__start!==1&&r.setAttribute("start",String(this.__start)),this.__listType==="check"&&r.setAttribute("__lexicalListType","check")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,r,n){let s=n;for(let a=0;a<n.length;a++){const i=n[a];qn(i)||(s===n&&(s=[...n]),s[a]=Ll().append(!It(i)||mn(i)||i.isInline()?i:ca(i.getTextContent())))}return super.splice(t,r,s)}extractWithChild(t){return qn(t)}};function KM(e,t,r){const n=[],s=[],a=t.list;if(a!==void 0){const i=a[`${r.__tag}Depth`]||[],o=E8(r)-1,l=o%i.length,u=i[l],d=a[r.__tag];let f;const h=a.nested,g=a.checklist;if(h!==void 0&&h.list&&(f=h.list),d!==void 0&&n.push(d),g!==void 0&&r.__listType==="check"&&n.push(g),u!==void 0){n.push(...T4(u));for(let x=0;x<i.length;x++)x!==l&&s.push(r.__tag+x)}if(f!==void 0){const x=T4(f);o>1?n.push(...x):s.push(...x)}}s.length>0&&Mf(e,...s),n.length>0&&Za(e,...n)}function gle(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(qn(n)){t.push(n);const s=n.getChildren();s.length>1&&s.forEach((a=>{mn(a)&&t.push(GM(a))}))}else t.push(GM(n))}return t}function YM(e){const t=e.nodeName.toLowerCase();let r=null;return t==="ol"?r=cl("number",e.start):t==="ul"&&(r=(function(n){if(n.getAttribute("__lexicallisttype")==="check"||n.classList.contains("contains-task-list"))return!0;for(const s of n.childNodes)if(Ns(s)&&s.hasAttribute("aria-checked"))return!0;return!1})(e)?cl("check"):cl("bullet")),{after:gle,node:r}}const ple={ol:"number",ul:"bullet"};function cl(e="number",t=1){return Wo(new Qf(e,t))}function mn(e){return e instanceof Qf}const xle=Qr("UPDATE_LIST_START_COMMAND"),bC=Qr("INSERT_UNORDERED_LIST_COMMAND"),_C=Qr("INSERT_ORDERED_LIST_COMMAND"),SC=Qr("REMOVE_LIST_COMMAND");function yle(e){return Gm(e.registerCommand(_C,(()=>(VM("number"),!0)),lp),e.registerCommand(xle,(t=>{const{listNodeKey:r,newStart:n}=t,s=La(r);return!!mn(s)&&(s.getListType()==="number"&&(s.setStart(n),YU(s)),!0)}),lp),e.registerCommand(bC,(()=>(VM("bullet"),!0)),lp),e.registerCommand(SC,(()=>(cle(),!0)),lp),e.registerCommand(yv,(()=>fle()),lp),e.registerNodeTransform(y0,(t=>{const r=t.getFirstChild();if(r){if(yr(r)){const n=r.getStyle(),s=r.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==s&&t.setTextFormat(s)}}else{const n=xr();qt(n)&&(n.style!==t.getTextStyle()||n.format!==t.getTextFormat())&&n.isCollapsed()&&t.is(n.anchor.getNode())&&t.setTextStyle(n.style).setTextFormat(n.format)}})),e.registerNodeTransform(Xf,(t=>{const r=t.getParent();if(qn(r)&&t.is(r.getFirstChild())){const n=t.getStyle(),s=t.getFormat();n===r.getTextStyle()&&s===r.getTextFormat()||r.setTextStyle(n).setTextFormat(s)}})))}function vle(e){const t=r=>{const n=r.getParent();if(mn(r.getFirstChild())||!mn(n))return;const s=K_(r,(a=>qn(a)&&mn(a.getParent())&&qn(a.getPreviousSibling())));if(s===null&&r.getIndent()>0)r.setIndent(0);else if(qn(s)){const a=s.getPreviousSibling();if(qn(a)){const i=(function(l){let u=l,d=u.getFirstChild();for(;mn(d);){const f=d.getLastChild();if(!qn(f))break;u=f,d=u.getFirstChild()}return u})(a),o=i.getParent();if(mn(o)){const l=E8(o);l+1<E8(n)&&r.setIndent(l)}}}};return e.registerNodeTransform(Qf,(r=>{const n=[r];for(;n.length>0;){const s=n.shift();if(mn(s)){for(const a of s.getChildren())if(qn(a)){t(a);const i=a.getFirstChild();mn(i)&&n.push(i)}}}}))}var x5={exports:{}},XM;function wle(){return XM||(XM=1,(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function k(b){return b instanceof l?new l(b.type,k(b.content),b.alias):Array.isArray(b)?b.map(k):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(k){return Object.prototype.toString.call(k).slice(8,-1)},objId:function(k){return k.__id||Object.defineProperty(k,"__id",{value:++a}),k.__id},clone:function k(b,E){E=E||{};var N,P;switch(o.util.type(b)){case"Object":if(P=o.util.objId(b),E[P])return E[P];N={},E[P]=N;for(var M in b)b.hasOwnProperty(M)&&(N[M]=k(b[M],E));return N;case"Array":return P=o.util.objId(b),E[P]?E[P]:(N=[],E[P]=N,b.forEach(function(j,A){N[A]=k(j,E)}),N);default:return b}},getLanguage:function(k){for(;k;){var b=s.exec(k.className);if(b)return b[1].toLowerCase();k=k.parentElement}return"none"},setLanguage:function(k,b){k.className=k.className.replace(RegExp(s,"gi"),""),k.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(N){var k=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(N.stack)||[])[1];if(k){var b=document.getElementsByTagName("script");for(var E in b)if(b[E].src==k)return b[E]}return null}},isActive:function(k,b,E){for(var N="no-"+b;k;){var P=k.classList;if(P.contains(b))return!0;if(P.contains(N))return!1;k=k.parentElement}return!!E}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(k,b){var E=o.util.clone(o.languages[k]);for(var N in b)E[N]=b[N];return E},insertBefore:function(k,b,E,N){N=N||o.languages;var P=N[k],M={};for(var j in P)if(P.hasOwnProperty(j)){if(j==b)for(var A in E)E.hasOwnProperty(A)&&(M[A]=E[A]);E.hasOwnProperty(j)||(M[j]=P[j])}var F=N[k];return N[k]=M,o.languages.DFS(o.languages,function(L,V){V===F&&L!=k&&(this[L]=M)}),M},DFS:function k(b,E,N,P){P=P||{};var M=o.util.objId;for(var j in b)if(b.hasOwnProperty(j)){E.call(b,j,b[j],N||j);var A=b[j],F=o.util.type(A);F==="Object"&&!P[M(A)]?(P[M(A)]=!0,k(A,E,null,P)):F==="Array"&&!P[M(A)]&&(P[M(A)]=!0,k(A,E,j,P))}}},plugins:{},highlightAll:function(k,b){o.highlightAllUnder(document,k,b)},highlightAllUnder:function(k,b,E){var N={callback:E,container:k,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",N),N.elements=Array.prototype.slice.apply(N.container.querySelectorAll(N.selector)),o.hooks.run("before-all-elements-highlight",N);for(var P=0,M;M=N.elements[P++];)o.highlightElement(M,b===!0,N.callback)},highlightElement:function(k,b,E){var N=o.util.getLanguage(k),P=o.languages[N];o.util.setLanguage(k,N);var M=k.parentElement;M&&M.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(M,N);var j=k.textContent,A={element:k,language:N,grammar:P,code:j};function F(V){A.highlightedCode=V,o.hooks.run("before-insert",A),A.element.innerHTML=A.highlightedCode,o.hooks.run("after-highlight",A),o.hooks.run("complete",A),E&&E.call(A.element)}if(o.hooks.run("before-sanity-check",A),M=A.element.parentElement,M&&M.nodeName.toLowerCase()==="pre"&&!M.hasAttribute("tabindex")&&M.setAttribute("tabindex","0"),!A.code){o.hooks.run("complete",A),E&&E.call(A.element);return}if(o.hooks.run("before-highlight",A),!A.grammar){F(o.util.encode(A.code));return}if(b&&n.Worker){var L=new Worker(o.filename);L.onmessage=function(V){F(V.data)},L.postMessage(JSON.stringify({language:A.language,code:A.code,immediateClose:!0}))}else F(o.highlight(A.code,A.grammar,A.language))},highlight:function(k,b,E){var N={code:k,grammar:b,language:E};if(o.hooks.run("before-tokenize",N),!N.grammar)throw new Error('The language "'+N.language+'" has no grammar.');return N.tokens=o.tokenize(N.code,N.grammar),o.hooks.run("after-tokenize",N),l.stringify(o.util.encode(N.tokens),N.language)},tokenize:function(k,b){var E=b.rest;if(E){for(var N in E)b[N]=E[N];delete b.rest}var P=new f;return h(P,P.head,k),d(k,P,b,P.head,0),x(P)},hooks:{all:{},add:function(k,b){var E=o.hooks.all;E[k]=E[k]||[],E[k].push(b)},run:function(k,b){var E=o.hooks.all[k];if(!(!E||!E.length))for(var N=0,P;P=E[N++];)P(b)}},Token:l};n.Prism=o;function l(k,b,E,N){this.type=k,this.content=b,this.alias=E,this.length=(N||"").length|0}l.stringify=function k(b,E){if(typeof b=="string")return b;if(Array.isArray(b)){var N="";return b.forEach(function(F){N+=k(F,E)}),N}var P={type:b.type,content:k(b.content,E),tag:"span",classes:["token",b.type],attributes:{},language:E},M=b.alias;M&&(Array.isArray(M)?Array.prototype.push.apply(P.classes,M):P.classes.push(M)),o.hooks.run("wrap",P);var j="";for(var A in P.attributes)j+=" "+A+'="'+(P.attributes[A]||"").replace(/"/g,"&quot;")+'"';return"<"+P.tag+' class="'+P.classes.join(" ")+'"'+j+">"+P.content+"</"+P.tag+">"};function u(k,b,E,N){k.lastIndex=b;var P=k.exec(E);if(P&&N&&P[1]){var M=P[1].length;P.index+=M,P[0]=P[0].slice(M)}return P}function d(k,b,E,N,P,M){for(var j in E)if(!(!E.hasOwnProperty(j)||!E[j])){var A=E[j];A=Array.isArray(A)?A:[A];for(var F=0;F<A.length;++F){if(M&&M.cause==j+","+F)return;var L=A[F],V=L.inside,J=!!L.lookbehind,ne=!!L.greedy,ee=L.alias;if(ne&&!L.pattern.global){var ie=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,ie+"g")}for(var B=L.pattern||L,Y=N.next,I=P;Y!==b.tail&&!(M&&I>=M.reach);I+=Y.value.length,Y=Y.next){var H=Y.value;if(b.length>k.length)return;if(!(H instanceof l)){var W=1,R;if(ne){if(R=u(B,I,k,J),!R||R.index>=k.length)break;var re=R.index,z=R.index+R[0].length,G=I;for(G+=Y.value.length;re>=G;)Y=Y.next,G+=Y.value.length;if(G-=Y.value.length,I=G,Y.value instanceof l)continue;for(var Q=Y;Q!==b.tail&&(G<z||typeof Q.value=="string");Q=Q.next)W++,G+=Q.value.length;W--,H=k.slice(I,G),R.index-=I}else if(R=u(B,0,H,J),!R)continue;var re=R.index,q=R[0],se=H.slice(0,re),ce=H.slice(re+q.length),pe=I+H.length;M&&pe>M.reach&&(M.reach=pe);var ke=Y.prev;se&&(ke=h(b,ke,se),I+=se.length),g(b,ke,W);var le=new l(j,V?o.tokenize(q,V):q,ee,q);if(Y=h(b,ke,le),ce&&h(b,Y,ce),W>1){var ye={cause:j+","+F,reach:pe};d(k,b,E,Y.prev,I,ye),M&&ye.reach>M.reach&&(M.reach=ye.reach)}}}}}}function f(){var k={value:null,prev:null,next:null},b={value:null,prev:k,next:null};k.next=b,this.head=k,this.tail=b,this.length=0}function h(k,b,E){var N=b.next,P={value:E,prev:b,next:N};return b.next=P,N.prev=P,k.length++,P}function g(k,b,E){for(var N=b.next,P=0;P<E&&N!==k.tail;P++)N=N.next;b.next=N,N.prev=b,k.length-=P}function x(k){for(var b=[],E=k.head.next;E!==k.tail;)b.push(E.value),E=E.next;return b}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(k){var b=JSON.parse(k.data),E=b.language,N=b.code,P=b.immediateClose;n.postMessage(o.highlight(N,o.languages[E],E)),P&&n.close()},!1)),o;var y=o.util.currentScript();y&&(o.filename=y.src,y.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var T=document.readyState;T==="loading"||T==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o})(t);e.exports&&(e.exports=r),typeof e4<"u"&&(e4.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:r.languages[a]};var l={};l[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,s){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:r.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function h(y,v,T){var k=new XMLHttpRequest;k.open("GET",y,!0),k.onreadystatechange=function(){k.readyState==4&&(k.status<400&&k.responseText?v(k.responseText):k.status>=400?T(s(k.status,k.statusText)):T(a))},k.send(null)}function g(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var T=Number(v[1]),k=v[2],b=v[3];return k?b?[T,Number(b)]:[T,void 0]:[T,T]}}r.hooks.add("before-highlightall",function(y){y.selector+=", "+f}),r.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(f)){y.code="",v.setAttribute(o,l);var T=v.appendChild(document.createElement("CODE"));T.textContent=n;var k=v.getAttribute("data-src"),b=y.language;if(b==="none"){var E=(/\.(\w+)$/.exec(k)||[,"none"])[1];b=i[E]||E}r.util.setLanguage(T,b),r.util.setLanguage(v,b);var N=r.plugins.autoloader;N&&N.loadLanguages(b),h(k,function(P){v.setAttribute(o,u);var M=g(v.getAttribute("data-range"));if(M){var j=P.split(/\r\n?|\n/g),A=M[0],F=M[1]==null?j.length:M[1];A<0&&(A+=j.length),A=Math.max(0,Math.min(A-1,j.length)),F<0&&(F+=j.length),F=Math.max(0,Math.min(F,j.length)),P=j.slice(A,F).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(A+1))}T.textContent=P,r.highlightElement(T)},function(P){v.setAttribute(o,d),T.textContent=P})}}),r.plugins.fileHighlight={highlight:function(v){for(var T=(v||document).querySelectorAll(f),k=0,b;b=T[k++];)r.highlightElement(b)}};var x=!1;r.fileHighlight=function(){x||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),x=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(x5)),x5.exports}wle();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(f){d!==f&&(e.languages.markdown[d].inside.content.inside[f]=e.languages.markdown[f])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function f(h){if(!(!h||typeof h=="string"))for(var g=0,x=h.length;g<x;g++){var y=h[g];if(y.type!=="code"){f(y.content);continue}var v=y.content[1],T=y.content[3];if(v&&T&&v.type==="code-language"&&T.type==="code-block"&&typeof v.content=="string"){var k=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");k=(/[a-z][\w-]*/i.exec(k)||[""])[0].toLowerCase();var b="language-"+k;T.alias?typeof T.alias=="string"?T.alias=[T.alias,b]:T.alias.push(b):T.alias=[b]}}}f(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var f="",h=0,g=d.classes.length;h<g;h++){var x=d.classes[h],y=/language-(.+)/.exec(x);if(y){f=y[1];break}}var v=e.languages[f];if(v)d.content=e.highlight(u(d.content),v,f);else if(f&&f!=="none"&&e.plugins.autoloader){var T="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=T,e.plugins.autoloader.loadLanguages(f,function(){var k=document.getElementById(T);k&&(k.innerHTML=e.highlight(k.textContent,e.languages[f],f))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var f=d.replace(i,"");return f=f.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,g){if(g=g.toLowerCase(),g[0]==="#"){var x;return g[1]==="x"?x=parseInt(g.slice(2),16):x=Number(g.slice(1)),l(x)}else{var y=o[g];return y||h}}),f}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var JM={},QM;function ble(){return QM||(QM=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),JM}ble();var ZM={},eF;function _le(){return eF||(eF=1,(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(Prism)),ZM}_le();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var tF={},rF;function Sle(){return rF||(rF=1,(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(Prism)),tF}Sle();var nF={},sF;function kle(){return sF||(sF=1,(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),nF}kle();var aF={},iF;function Tle(){return iF||(iF=1,(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(Prism)),aF}Tle();function XU(e,t){for(const r of e.childNodes){if(Ns(r)&&r.tagName===t)return!0;XU(r,t)}return!1}const jy="data-language",yy="data-highlight-language",tb="data-theme";class Vm extends yo{static getType(){return"code"}static clone(t){return new Vm(t.__language,t.__key)}constructor(t,r){super(r),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const r=document.createElement("code");Za(r,t.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(jy,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(yy,n));const s=this.getTheme();s&&r.setAttribute(tb,s);const a=this.getStyle();return a&&r.setAttribute("style",a),r}updateDOM(t,r,n){const s=this.__language,a=t.__language;s?s!==a&&r.setAttribute(jy,s):a&&r.removeAttribute(jy);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&r.setAttribute(yy,s):r.removeAttribute(yy):i&&s&&r.setAttribute(yy,s);const o=this.__theme,l=t.__theme;o?o!==l&&r.setAttribute(tb,o):l&&r.removeAttribute(tb);const u=this.__style,d=t.__style;return u?u!==d&&r.setAttribute("style",u):d&&r.removeAttribute("style"),!1}exportDOM(t){const r=document.createElement("pre");Za(r,t._config.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(jy,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(yy,n));const s=this.getTheme();s&&r.setAttribute(tb,s);const a=this.getStyle();return a&&r.setAttribute("style",a),{element:r}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||XU(t,"BR"))?{conversion:oF,priority:1}:null,div:()=>({conversion:Cle,priority:1}),pre:()=>({conversion:oF,priority:0}),table:t=>y5(t)?{conversion:Ele,priority:3}:null,td:t=>{const r=t,n=r.closest("table");return r.classList.contains("js-file-line")||n&&y5(n)?{conversion:lF,priority:3}:null},tr:t=>{const r=t.closest("table");return r&&y5(r)?{conversion:lF,priority:3}:null}}}static importJSON(t){return qd().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,r=!0){const n=this.getChildren(),s=n.length;if(s>=2&&n[s-1].getTextContent()===`
`&&n[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){n[s-1].remove(),n[s-2].remove();const l=Es();return this.insertAfter(l,r),l}const{anchor:a,focus:i}=t,o=(a.isBefore(i)?a:i).getNode();if(yr(o)){let l=Ale(o);const u=[];for(;;)if(B_(l))u.push(c1()),l=l.getNextSibling();else{if(!ZU(l))break;{let v=0;const T=l.getTextContent(),k=l.getTextContentSize();for(;v<k&&T[v]===" ";)v++;if(v!==0&&u.push(QU(" ".repeat(v))),v!==k)break;l=l.getNextSibling()}}const d=o.splitText(a.offset)[0],f=a.offset===0?0:1,h=d.getIndexWithinParent()+f,g=o.getParentOrThrow(),x=[Ju(),...u];g.splice(h,0,x);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(kC(o)){const{offset:l}=t.anchor;o.splice(l,0,[Ju()]),o.select(l+1,l+1)}return null}canIndent(){return!1}collapseAtStart(){const t=Es();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}setLanguage(t){const r=this.getWritable();return r.__language=t||void 0,r}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const r=this.getWritable();return r.__isSyntaxHighlightSupported=t,r}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const r=this.getWritable();return r.__theme=t||void 0,r}getTheme(){return this.getLatest().__theme}}function qd(e,t){return Yie(Vm).setLanguage(e).setTheme(t)}function kC(e){return e instanceof Vm}function oF(e){return{node:qd(e.getAttribute(jy))}}function Cle(e){const t=e,r=cF(t);return r||(function(n){let s=n.parentElement;for(;s!==null;){if(cF(s))return!0;s=s.parentElement}return!1})(t)?{node:r?qd():null}:{node:null}}function Ele(){return{node:qd()}}function lF(){return{node:null}}function cF(e){return e.style.fontFamily.match("monospace")!==null}function y5(e){return e.classList.contains("js-file-line-container")}let Y_=class JU extends Xf{constructor(t="",r,n){super(t,n),this.__highlightType=r}static getType(){return"code-highlight"}static clone(t){return new JU(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const r=this.getWritable();return r.__highlightType=t||void 0,r}canHaveFormat(){return!1}createDOM(t){const r=super.createDOM(t),n=v5(t.theme,this.__highlightType);return Za(r,n),r}updateDOM(t,r,n){const s=super.updateDOM(t,r,n),a=v5(n.theme,t.__highlightType),i=v5(n.theme,this.__highlightType);return a!==i&&(a&&Mf(r,a),i&&Za(r,i)),s}static importJSON(t){return QU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return qd()}};function v5(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function QU(e="",t){return Wo(new Y_(e,t))}function ZU(e){return e instanceof Y_}function Nle(e,t){let r=e;for(let n=Yi(e,t);n&&(ZU(n.origin)||B_(n.origin));n=voe(n))r=n.origin;return r}function Ale(e){return Nle(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(r){var n=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+n+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);const jle=new Set(["http:","https:","mailto:","sms:","tel:"]);class Zf extends yo{static getType(){return"link"}static clone(t){return new Zf(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",r={},n){super(n);const{target:s=null,rel:a=null,title:i=null}=r;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const r=document.createElement("a");return this.updateLinkDOM(null,r,t),Za(r,t.theme.link),r}updateLinkDOM(t,r,n){if(fU(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?r[s]=i:r.removeAttribute(s))}}}updateDOM(t,r,n){return this.updateLinkDOM(t,r,n),!1}static importDOM(){return{a:t=>({conversion:Ple,priority:1})}}static importJSON(t){return C4().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=dF(t);try{const r=new URL(dF(t));if(!jle.has(r.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const r=this.getWritable();return r.__url=t,r}getTarget(){return this.getLatest().__target}setTarget(t){const r=this.getWritable();return r.__target=t,r}getRel(){return this.getLatest().__rel}setRel(t){const r=this.getWritable();return r.__rel=t,r}getTitle(){return this.getLatest().__title}setTitle(t){const r=this.getWritable();return r.__title=t,r}insertNewAfter(t,r=!0){const n=C4(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,r),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!qt(r))return!1;const s=r.anchor.getNode(),a=r.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function Ple(e){let t=null;if(fU(e)){const r=e.textContent;(r!==null&&r!==""||e.children.length>0)&&(t=C4(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function C4(e="",t){return Wo(new Zf(e,t))}function Mle(e){return e instanceof Zf}class p1 extends Zf{constructor(t="",r={},n){super(t,r,n),this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return"autolink"}static clone(t){return new p1(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const r=this.getWritable();return r.__isUnlinked=t,r}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,r,n){return super.updateDOM(t,r,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return uF().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,r=!0){const n=this.getParentOrThrow().insertNewAfter(t,r);if(It(n)){const s=uF(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(s),s}return null}}function uF(e="",t){return Wo(new p1(e,t))}function Fle(e){return e instanceof p1}const Dle=/^\+?[0-9\s()-]{5,}$/;function dF(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:Dle.test(e)?`tel:${e}`:`https://${e}`}function A8(e,t){const r={};for(const n of e){const s=t(n);s&&(r[s]?r[s].push(n):r[s]=[n])}return r}function Ole(e){const t=A8(e,(r=>r.type));return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const fF=/[!-/:-@[-`{-~\s]/;function Rle(e){return yr(e)&&!e.hasFormat("code")}function Ile(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function hF(e,t,r){const n=r.length;for(let s=t;s>=n;s--){const a=s-n;if(eW(e,a,r,0,n)&&e[a+n]!==" ")return a}return-1}function eW(e,t,r,n,s){for(let a=0;a<s;a++)if(e[t+a]!==r[n+a])return!1;return!0}function Lle(e,t=X_){const r=Ole(t),n=A8(r.textFormat,(({tag:i})=>i[i.length-1])),s=A8(r.textMatch,(({trigger:i})=>i));for(const i of t){const o=i.type;if(o==="element"||o==="text-match"||o==="multiline-element"){const l=i.dependencies;for(const u of l)e.hasNode(u)||Ile(173,u.getType())}}const a=(i,o,l)=>{(function(u,d,f,h){const g=u.getParent();if(!$o(g)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExp:y,replace:v}of h){const T=x.match(y);if(T&&T[0].length===(T[0].endsWith(" ")?f:f-1)){const k=d.getNextSiblings(),[b,E]=d.splitText(f);if(v(u,E?[E,...k]:k,T,!1)!==!1)return b.remove(),!0}}return!1})(i,o,l,r.element)||(function(u,d,f,h){const g=u.getParent();if(!$o(g)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:T}of h){if(T&&!("optional"in T)||T&&"optional"in T&&!T.optional)continue;const k=x.match(y);if(k&&k[0].length===(k[0].endsWith(" ")?f:f-1)){const b=d.getNextSiblings(),[E,N]=d.splitText(f);if(v(u,N?[N,...b]:b,k,null,null,!1)!==!1)return E.remove(),!0}}return!1})(i,o,l,r.multilineElement)||(function(u,d,f){let h=u.getTextContent();const g=f[h[d-1]];if(g==null)return!1;d<h.length&&(h=h.slice(0,d));for(const x of g){if(!x.replace||!x.regExp)continue;const y=h.match(x.regExp);if(y===null)continue;const v=y.index||0,T=v+y[0].length;let k;return v===0?[k]=u.splitText(T):[,k]=u.splitText(v,T),k.selectNext(0,0),x.replace(k,y),!0}return!1})(o,l,s)||(function(u,d,f){const h=u.getTextContent(),g=d-1,x=h[g],y=f[x];if(!y)return!1;for(const v of y){const{tag:T}=v,k=T.length,b=g-k+1;if(k>1&&!eW(h,b,T,0,k)||h[b-1]===" ")continue;const E=h[g+1];if(v.intraword===!1&&E&&!fF.test(E))continue;const N=u;let P=N,M=hF(h,b,T),j=P;for(;M<0&&(j=j.getPreviousSibling())&&!Jd(j);)if(yr(j)){if(j.hasFormat("code"))continue;const B=j.getTextContent();P=j,M=hF(B,B.length,T)}if(M<0||P===N&&M+k===b)continue;const A=P.getTextContent();if(M>0&&A[M-1]===x)continue;const F=A[M-1];if(v.intraword===!1&&F&&!fF.test(F))continue;const L=N.getTextContent(),V=L.slice(0,b)+L.slice(g+1);N.setTextContent(V);const J=P===N?V:A;P.setTextContent(J.slice(0,M)+J.slice(M+k));const ne=xr(),ee=z_();Xi(ee);const ie=g-k*(P===N?2:1)+1;ee.anchor.set(P.__key,M,"text"),ee.focus.set(N.__key,ie,"text");for(const B of v.format)ee.hasFormat(B)||ee.formatText(B);ee.anchor.set(ee.focus.key,ee.focus.offset,ee.focus.type);for(const B of v.format)ee.hasFormat(B)&&ee.toggleFormat(B);return qt(ne)&&(ee.format=ne.format),!0}})(o,l,n)};return e.registerUpdateListener((({tags:i,dirtyLeaves:o,editorState:l,prevEditorState:u})=>{if(i.has(Zz)||i.has(w4)||e.isComposing())return;const d=l.read(xr),f=u.read(xr);if(!qt(f)||!qt(d)||!d.isCollapsed()||d.is(f))return;const h=d.anchor.key,g=d.anchor.offset,x=l._nodeMap.get(h);!yr(x)||!o.has(h)||g!==1&&g>f.anchor.offset+1||e.update((()=>{if(!Rle(x))return;const y=x.getParent();y===null||kC(y)||a(y,x,d.anchor.offset)}))}))}const Ble=/^(\s*)(\d{1,})\.\s/,$le=/^(\s*)[-*+]\s/,zle=/^(#{1,6})\s/,Ule=/^>\s/,Wle=/^[ \t]*```([\w-]+)?/,Hle=/[ \t]*```$/,tW=e=>(t,r,n,s)=>{const a=e(n);a.append(...r),t.replace(a),s||a.select(0,0)},rW=e=>(t,r,n,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),o=Ll(e==="check"?n[3]==="x":void 0);if(mn(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(o):i.append(o),t.remove()}else if(mn(a)&&a.getListType()===e)a.append(o),t.remove();else{const u=cl(e,e==="number"?Number(n[2]):void 0);u.append(o),t.replace(u)}o.append(...r),s||o.select(0,0);const l=(function(u){const d=u.match(/\t/g),f=u.match(/ /g);let h=0;return d&&(h+=d.length),f&&(h+=Math.floor(f.length/4)),h})(n[1]);l&&o.setIndent(l)},TC=(e,t,r)=>{const n=[],s=e.getChildren();let a=0;for(const i of s)if(qn(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(mn(d)){n.push(TC(d,t,r+1));continue}}const o=" ".repeat(4*r),l=e.getListType(),u=l==="number"?`${e.getStart()+a}. `:l==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";n.push(o+u+t(i)),a++}return n.join(`
`)},Gle={dependencies:[m2],export:(e,t)=>{if(!zoe(e))return null;const r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:zle,replace:tW((e=>{const t="h"+e[1].length;return kf(t)})),type:"element"},Vle={dependencies:[f2],export:(e,t)=>{if(!FM(e))return null;const r=t(e).split(`
`),n=[];for(const s of r)n.push("> "+s);return n.join(`
`)},regExp:Ule,replace:(e,t,r,n)=>{if(n){const a=e.getPreviousSibling();if(FM(a))return a.splice(a.getChildrenSize(),0,[Ju(),...t]),void e.remove()}const s=h2();s.append(...t),e.replace(s),n||s.select(0,0)},type:"element"},qle={dependencies:[Vm],export:e=>{if(!kC(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:Hle},regExpStart:Wle,replace:(e,t,r,n,s,a)=>{let i,o;if(!t&&s){if(s.length===1)n?(i=qd(),o=r[1]+s[0]):(i=qd(r[1]),o=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=qd(r[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();o=s.join(`
`)}const l=ca(o);i.append(l),e.append(i)}else t&&tW((l=>qd(l?l[1]:void 0)))(e,t,r,a)},type:"multiline-element"},Kle={dependencies:[Qf,y0],export:(e,t)=>mn(e)?TC(e,t,0):null,regExp:$le,replace:rW("bullet"),type:"element"},Yle={dependencies:[Qf,y0],export:(e,t)=>mn(e)?TC(e,t,0):null,regExp:Ble,replace:rW("number"),type:"element"},Xle={format:["code"],tag:"`",type:"text-format"},Jle={format:["highlight"],tag:"==",type:"text-format"},Qle={format:["bold","italic"],tag:"***",type:"text-format"},Zle={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},ece={format:["bold"],tag:"**",type:"text-format"},tce={format:["bold"],intraword:!1,tag:"__",type:"text-format"},rce={format:["strikethrough"],tag:"~~",type:"text-format"},nce={format:["italic"],tag:"*",type:"text-format"},sce={format:["italic"],intraword:!1,tag:"_",type:"text-format"},ace={dependencies:[Zf],export:(e,t,r)=>{if(!Mle(e)||Fle(e))return null;const n=e.getTitle(),s=t(e);return n?`[${s}](${e.getURL()} "${n}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,r,n,s]=t,a=C4(n,{title:s}),i=r.split("[").length-1,o=r.split("]").length-1;let l=r,u="";if(i<o)return;if(i>o){const f=r.split("[");u="["+f[0],l=f.slice(1).join("[")}const d=ca(l);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(ca(u)),d},trigger:")",type:"text-match"},ice=[Gle,Vle,Kle,Yle],oce=[qle],lce=[Xle,Qle,Zle,ece,tce,Jle,nce,sce,rce],cce=[ace],X_=[...ice,...oce,...lce,...cce];function mF(e,t){return e.getEditorState().read((()=>{const r=La(t);return r!==null&&r.isSelected()}))}function uce(e){const[t]=td(),[r,n]=_.useState((()=>mF(t,e)));return _.useEffect((()=>{let s=!0;const a=t.registerUpdateListener((()=>{s&&n(mF(t,e))}));return()=>{s=!1,a()}}),[t,e]),[r,_.useCallback((s=>{t.update((()=>{let a=xr();io(a)||(a=q7(),Xi(a)),io(a)&&(s?a.add(e):a.delete(e))}))}),[t,e]),_.useCallback((()=>{t.update((()=>{const s=xr();io(s)&&s.clear()}))}),[t])]}function dce({nodeKey:e}){const[t]=td(),[r,n,s]=uce(e);return _.useEffect((()=>Gm(t.registerCommand(z7,(a=>{const i=t.getElementByKey(e);return a.target===i&&(a.shiftKey||s(),n(!r),!0)}),lp))),[s,t,r,e,n]),_.useEffect((()=>{const a=t.getElementByKey(e),i=t._config.theme.hrSelected??"selected";a!==null&&(r?Za(a,i):Mf(a,i))}),[t,r,e]),null}class p2 extends X7{static getType(){return"horizontalrule"}static clone(t){return new p2(t.__key)}static importJSON(t){return CC().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:fce,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const r=document.createElement("hr");return Za(r,t.theme.hr),r}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return c.jsx(dce,{nodeKey:this.__key})}}function fce(){return{node:CC()}}function CC(){return Wo(new p2)}function hce(e){return e instanceof p2}const mce=[{dependencies:[p2],export:e=>hce(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{const s=CC();n||e.getNextSibling()!=null?e.replace(s):e.insertBefore(s),s.selectNext()},type:"element"},...X_];function nW({transformers:e=mce}){const[t]=td();return _.useEffect((()=>Lle(t,e)),[t,e]),null}function sW({hasStrictIndent:e=!1}){const[t]=td();return _.useEffect((()=>{if(!t.hasNodes([Qf,y0]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),_.useEffect((()=>{if(e)return vle(t)}),[t,e]),(function(r){_.useEffect((()=>yle(r)),[r])})(t),null}const gce=({onChange:e})=>{const[t]=_.useContext(o1)||[];return _.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Us().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},pce=()=>{const[e]=_.useContext(o1)||[],t=_.useCallback(()=>{e&&e.dispatchCommand(go,"bold")},[e]),r=_.useCallback(()=>{e&&e.dispatchCommand(go,"italic")},[e]),n=_.useCallback(()=>{e&&e.dispatchCommand(go,"underline")},[e]),s=_.useCallback(()=>{e&&e.dispatchCommand(go,"strikethrough")},[e]),a=_.useCallback(g=>{e&&e.update(()=>{const x=xr();qt(x)&&Ep(x,()=>kf(g))})},[e]),i=_.useCallback(()=>{e&&e.update(()=>{const g=xr();qt(g)&&Ep(g,()=>Es())})},[e]);_.useCallback(()=>{e&&e.update(()=>{const g=xr();qt(g)&&Ep(g,()=>h2())})},[e]);const o=_.useCallback(()=>{e&&e.dispatchCommand(bC)},[e]),l=_.useCallback(()=>{e&&e.dispatchCommand(_C)},[e]),u=_.useCallback(()=>{e&&e.dispatchCommand(SC)},[e]),d=_.useCallback(g=>{e&&e.update(()=>{const x=xr();qt(x)&&x.getNodes().forEach(y=>{yr(y)&&y.setStyle(`color: ${g}`)})})},[e]),f=_.useCallback(g=>{e&&e.update(()=>{const x=xr();qt(x)&&x.getNodes().forEach(v=>{if(yr(v)){const T=v.getStyle(),k=T?T.replace(/font-size:\s*\d+px;?\s*/g,"").trim():"",b=k?`${k}; font-size: ${g}px;`:`font-size: ${g}px;`;v.setStyle(b)}})})},[e]),h=_.useCallback(g=>{e&&e.dispatchCommand(Pz,g)},[e]);return c.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),c.jsx("button",{type:"button",onClick:r,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),c.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),c.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:()=>a("h1"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),c.jsx("button",{type:"button",onClick:()=>a("h2"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),c.jsx("button",{type:"button",onClick:()=>a("h3"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),c.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:" List"}),c.jsx("button",{type:"button",onClick:l,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1. List"}),c.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:"No List"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Color:"}),c.jsx("button",{type:"button",onClick:()=>d("#000000"),className:"w-6 h-6 bg-black border border-gray-300 rounded hover:bg-gray-800",title:"Black"}),c.jsx("button",{type:"button",onClick:()=>d("#ff0000"),className:"w-6 h-6 bg-red-500 border border-gray-300 rounded hover:bg-red-600",title:"Red"}),c.jsx("button",{type:"button",onClick:()=>d("#0000ff"),className:"w-6 h-6 bg-blue-500 border border-gray-300 rounded hover:bg-blue-600",title:"Blue"}),c.jsx("button",{type:"button",onClick:()=>d("#008000"),className:"w-6 h-6 bg-green-500 border border-gray-300 rounded hover:bg-green-600",title:"Green"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Size:"}),c.jsx("button",{type:"button",onClick:()=>f(12),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Small",children:"12px"}),c.jsx("button",{type:"button",onClick:()=>f(16),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Normal",children:"16px"}),c.jsx("button",{type:"button",onClick:()=>f(20),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Large",children:"20px"}),c.jsx("button",{type:"button",onClick:()=>f(24),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Extra Large",children:"24px"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Align:"}),c.jsx("button",{type:"button",onClick:()=>h("left"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Left",children:""}),c.jsx("button",{type:"button",onClick:()=>h("center"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Center",children:""}),c.jsx("button",{type:"button",onClick:()=>h("right"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Right",children:""})]})]})},xce=({value:e,onChange:t,placeholder:r})=>{const n={namespace:"LexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[m2,Qf,y0,f2,Vm,Y_,g2,m1,g1,p1,Zf],onError:s=>{console.error("Lexical error:",s)},editorState:e?(()=>{try{const s=JSON.parse(e);return JSON.stringify(s)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:c.jsxs(yU,{initialConfig:n,children:[c.jsx(pce,{}),c.jsx(gce,{onChange:t}),c.jsxs("div",{className:"relative",children:[c.jsx(RU,{contentEditable:c.jsx(LU,{className:"p-4 min-h-32 focus:outline-none",placeholder:r}),placeholder:c.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:zU}),c.jsx(BU,{}),c.jsx($U,{}),c.jsx(sW,{}),c.jsx(nW,{transformers:X_})]})]})})},yce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Ms(),{post:o}=zl(),{showNotification:l}=si(),[u,d]=_.useState({test_name:e,num_questions:1,passing_score:100,questions:[{id:1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048}]}),[f,h]=_.useState({isLoading:!1,error:null,showPreview:!0});_.useEffect(()=>{d(T=>({...T,test_name:e||""}))},[e]);const g=()=>{if(u.num_questions>=3){h(b=>({...b,error:"Maximum 3 questions allowed for performance reasons"}));return}const k={id:Math.max(...u.questions.map(b=>b.id))+1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048};d(b=>({...b,num_questions:b.num_questions+1,questions:[...b.questions,k]}))},x=T=>{u.questions.length<=1||d(k=>({...k,num_questions:k.num_questions-1,questions:k.questions.filter(b=>b.id!==T)}))},y=(T,k)=>{d(b=>({...b,questions:b.questions.map(E=>E.id===T?{...E,question_json:k}:E)}))},v=async()=>{if(!u.test_name.trim()){h(T=>({...T,error:"Test name is required"}));return}if(u.questions.some(T=>!T.question_json.trim())){h(T=>({...T,error:"All questions must have content"}));return}h(T=>({...T,isLoading:!0,error:null}));try{const T={test_name:u.test_name,num_questions:u.num_questions,passing_score:u.passing_score,questions:u.questions.map((k,b)=>({question_id:b+1,question_json:k.question_json,canvas_width:k.canvas_width,canvas_height:k.canvas_height,max_canvas_width:k.max_canvas_width,max_canvas_height:k.max_canvas_height}))};t&&t(T)}catch(T){console.error("Error preparing drawing test:",T),h(k=>({...k,error:"Failed to prepare drawing test. Please try again."})),l("Failed to prepare drawing test","error")}finally{h(T=>({...T,isLoading:!1}))}};return c.jsxs("div",{className:"drawing-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Drawing Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a test where students draw based on your instructions"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Drawing Questions (",u.num_questions,"/3)"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 3 questions for optimal performance"})]}),c.jsxs(tt,{onClick:g,disabled:u.num_questions>=3,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Question"]})]}),c.jsx("div",{className:"space-y-4",children:u.questions.map((T,k)=>c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"text-md font-medium text-gray-800",children:["Text ",k+1]}),u.questions.length>1&&c.jsx(tt,{onClick:()=>x(T.id),variant:"secondary",size:"sm",className:"text-red-600 hover:text-red-700",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content *"}),c.jsx(xce,{value:T.question_json,onChange:b=>y(T.id,b),placeholder:""})]})]},T.id))})]}),f.error&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700",children:f.error}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(tt,{onClick:r,variant:"secondary",disabled:f.isLoading,children:"Cancel"}),c.jsx(tt,{onClick:v,variant:"primary",disabled:f.isLoading||!u.test_name.trim(),className:"flex items-center gap-2",children:f.isLoading?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",color:"white"}),"Saving..."]}):"Save Test"})]})]})},vce=({onChange:e})=>{const[t]=_.useContext(o1)||[];return _.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Us().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},wce=({onAddBlank:e,blankCount:t})=>{const[r]=_.useContext(o1)||[],n=_.useCallback(()=>{r&&r.dispatchCommand(go,"bold")},[r]),s=_.useCallback(()=>{r&&r.dispatchCommand(go,"italic")},[r]),a=_.useCallback(()=>{r&&r.dispatchCommand(go,"underline")},[r]),i=_.useCallback(()=>{r&&r.dispatchCommand(go,"strikethrough")},[r]),o=_.useCallback(x=>{r&&r.update(()=>{const y=xr();qt(y)&&Ep(y,()=>kf(x))})},[r]),l=_.useCallback(()=>{r&&r.update(()=>{const x=xr();qt(x)&&Ep(x,()=>Es())})},[r]),u=_.useCallback(()=>{r&&r.update(()=>{const x=xr();qt(x)&&Ep(x,()=>h2())})},[r]),d=_.useCallback(()=>{r&&r.dispatchCommand(bC)},[r]),f=_.useCallback(()=>{r&&r.dispatchCommand(_C)},[r]),h=_.useCallback(()=>{r&&r.dispatchCommand(SC)},[r]),g=_.useCallback(()=>{!r||!e||(r.update(()=>{const x=xr();if(qt(x)){const v=`${t+1}_________`,T=ca(v);T.setStyle("background-color: #f0f9ff; border: 1px dashed #3b82f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"),x.insertNodes([T])}}),e())},[r,e,t]);return c.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),c.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),c.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),c.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:()=>o("h1"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),c.jsx("button",{type:"button",onClick:()=>o("h2"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),c.jsx("button",{type:"button",onClick:()=>o("h3"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),c.jsx("button",{type:"button",onClick:l,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"}),c.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Quote",children:'"'})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:d,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:""}),c.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1."}),c.jsx("button",{type:"button",onClick:h,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:""})]}),e&&c.jsx("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:c.jsxs("button",{type:"button",onClick:g,className:"px-3 py-1 text-sm font-medium bg-blue-500 text-white border border-blue-600 rounded hover:bg-blue-600 transition-colors",title:"Add Blank",children:[c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"inline mr-1",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Blank"]})})]})},bce=({value:e,onChange:t,placeholder:r,onAddBlank:n,blankCount:s=0})=>{const a={namespace:"FillBlanksLexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[m2,Qf,y0,f2,Vm,Y_,g2,m1,g1,p1,Zf],onError:i=>{console.error("Lexical error:",i)},editorState:e?(()=>{try{const i=JSON.parse(e);return JSON.stringify(i)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:c.jsxs(yU,{initialConfig:a,children:[c.jsx(wce,{onAddBlank:n,blankCount:s}),c.jsx(vce,{onChange:t}),c.jsxs("div",{className:"relative",children:[c.jsx(RU,{contentEditable:c.jsx(LU,{className:"p-4 min-h-32 focus:outline-none"}),placeholder:c.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:zU}),c.jsx(BU,{}),c.jsx($U,{}),c.jsx(sW,{}),c.jsx(nW,{transformers:X_})]})]})})},_ce=({testName:e="",allowedTime:t=null,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const{user:o}=Ms(),{post:l}=zl(),{showNotification:u}=si(),[d,f]=_.useState({test_name:e,test_text:"",num_questions:1,num_blanks:0,passing_score:100,separate_type:!0,allowed_time:t,blanks:[]}),[h,g]=_.useState({isLoading:!1,error:null,showPreview:!0});_.useEffect(()=>{f(M=>({...M,test_name:e||"",allowed_time:t}))},[e,t]);const x=M=>{f(j=>({...j,test_text:M}))},y=()=>{const j={id:d.blanks.length+1,position:0,question:"",options:["","","",""],correct_answer:""};f(A=>({...A,blanks:[...A.blanks,j],num_blanks:A.num_blanks+1}))},v=M=>{f(j=>({...j,blanks:j.blanks.filter(A=>A.id!==M),num_blanks:j.num_blanks-1}))},T=M=>{f(j=>({...j,blanks:j.blanks.map(A=>A.id===M?{...A,options:[...A.options,""]}:A)}))},k=(M,j)=>{f(A=>({...A,blanks:A.blanks.map(F=>F.id===M?{...F,options:F.options.filter((L,V)=>V!==j),correct_answer:F.correct_answer===String.fromCharCode(65+j)?"":F.correct_answer}:F)}))},b=(M,j,A)=>{f(F=>({...F,blanks:F.blanks.map(L=>L.id===M?{...L,options:L.options.map((V,J)=>J===j?A:V)}:L)}))},E=(M,j)=>{console.log(" [DEBUG] updateBlankQuestion called:",{blankId:M,question:j}),f(A=>({...A,blanks:A.blanks.map(F=>F.id===M?{...F,question:j}:F)})),console.log(" [DEBUG] updateBlankQuestion completed")},N=(M,j)=>{f(A=>({...A,blanks:A.blanks.map(F=>F.id===M?{...F,correct_answer:j}:F)}))},P=async()=>{if(!d.test_name.trim()){g(M=>({...M,error:"Test name is required"}));return}if(!d.test_text.trim()){g(M=>({...M,error:"Test text is required"}));return}if(d.blanks.length===0){g(M=>({...M,error:"At least one blank is required"}));return}if(console.log(" [DEBUG] Validating blanks:",d.blanks),d.blanks.forEach((M,j)=>{console.log(` [DEBUG] Blank ${j+1}:`,{question:M.question,questionTrimmed:M.question?.trim(),correct_answer:M.correct_answer,options:M.options})}),d.separate_type===!1){if(d.blanks.some(M=>!M.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing correct answer"),g(M=>({...M,error:"All blanks must have correct answers"}));return}}else if(d.blanks.some(M=>!M.question.trim()||!M.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing question or correct answer"),g(M=>({...M,error:"All blanks must have question text and correct answer"}));return}console.log(" [DEBUG] Validation passed - all blanks have question and correct answer"),g(M=>({...M,isLoading:!0,error:null}));try{const M={test_name:d.test_name,test_text:d.test_text,num_questions:d.blanks.length,num_blanks:d.blanks.length,separate_type:d.separate_type,passing_score:d.passing_score,allowed_time:d.allowed_time,blanks:d.blanks.map((j,A)=>({question_id:A+1,question_json:j.question,question:j.question,options:j.options,correct_answer:j.correct_answer,blank_positions:{},blank_options:j.options||[],correct_answers:[j.correct_answer]}))};console.log(" [DEBUG] Calling onTestSaved with data:",M),r?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),r(M),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(M){console.error("Error preparing fill blanks test:",M),g(j=>({...j,error:"Failed to prepare fill blanks test. Please try again."})),u("Failed to prepare fill blanks test","error")}finally{g(M=>({...M,isLoading:!1}))}};return c.jsxs("div",{className:"fill-blanks-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Fill Blanks Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a test with text content and multiple choice blanks"}),h.error&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:h.error})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!0?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(M=>({...M,separate_type:!0})),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:d.separate_type===!0,onChange:()=>f(M=>({...M,separate_type:!0})),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Separate Mode"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Multiple choice questions below the text"})]}),c.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!1?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(M=>({...M,separate_type:!1})),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:d.separate_type===!1,onChange:()=>f(M=>({...M,separate_type:!1})),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Inline Mode"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Dropdown for option inside the text"})]})]}),c.jsx(bce,{value:d.test_text,onChange:x,placeholder:"Type your text here. Use the 'Add Blank' button in the toolbar to insert blanks.",onAddBlank:y,blankCount:d.blanks.length})]}),d.separate_type===!0&&c.jsx("div",{className:"space-y-4",children:d.blanks.map((M,j)=>c.jsxs(Ht,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-md font-medium",children:["Blank ",M.id," Configuration"]}),c.jsx(tt,{variant:"danger",size:"small",onClick:()=>v(M.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Text for Blank ",M.id," *"]}),c.jsx("input",{type:"text",placeholder:"Enter question text for this blank",value:M.question,onChange:A=>E(M.id,A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),M.options.map((A,F)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+F)}),c.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+F)}`,value:A||"",onChange:L=>b(M.id,F,L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),M.options.length>2&&c.jsx(tt,{variant:"danger",size:"small",onClick:()=>k(M.id,F),className:"px-2 py-1 text-sm",children:""})]},F)),M.options.length<6&&c.jsx(tt,{variant:"secondary",size:"small",onClick:()=>T(M.id),className:"w-full",children:"+ Add Option"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{value:M.correct_answer||"",onChange:A=>N(M.id,A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),M.options.filter(A=>A.trim().length>0).map((A,F)=>c.jsxs("option",{value:String.fromCharCode(65+F),children:[String.fromCharCode(65+F),") ",A]},F))]})]})]},M.id))}),d.separate_type===!1&&c.jsx("div",{className:"space-y-4",children:d.blanks.map((M,j)=>c.jsxs(Ht,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-md font-medium",children:["Blank ",M.id," Options"]}),c.jsx(tt,{variant:"danger",size:"small",onClick:()=>v(M.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),M.options.map((A,F)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+F)}),c.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+F)}`,value:A||"",onChange:L=>b(M.id,F,L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),M.options.length>2&&c.jsx(tt,{variant:"danger",size:"small",onClick:()=>k(M.id,F),className:"px-2 py-1 text-sm",children:""})]},F)),M.options.length<6&&c.jsx(tt,{variant:"secondary",size:"small",onClick:()=>T(M.id),className:"w-full",children:"+ Add Option"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{value:M.correct_answer||"",onChange:A=>N(M.id,A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),M.options.filter(A=>A.trim().length>0).map((A,F)=>c.jsxs("option",{value:String.fromCharCode(65+F),children:[String.fromCharCode(65+F),") ",A]},F))]})]})]},M.id))}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx(tt,{onClick:n,variant:"secondary",disabled:a,children:"Cancel"}),c.jsx(tt,{onClick:P,variant:"primary",disabled:a||d.blanks.length===0,children:a?c.jsx(fn,{size:"sm"}):"Save Test"})]})]})},Sce=[{value:"A1",label:"A1 (Beginner)",description:"Basic vocabulary, simple sentences"},{value:"A2",label:"A2 (Elementary)",description:"Everyday vocabulary, present/past tenses"},{value:"B1",label:"B1 (Intermediate)",description:"Varied vocabulary, complex sentences"},{value:"B2",label:"B2 (Upper-Intermediate)",description:"Advanced vocabulary, sophisticated structures"},{value:"C1",label:"C1 (Advanced)",description:"Nuanced vocabulary, complex discourse"},{value:"C2",label:"C2 (Proficiency)",description:"Native-like fluency and accuracy"}],kce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{showNotification:i}=si(),[o,l]=_.useState({min_words:50,questions:[{question_id:1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}),[u,d]=_.useState(!1),f=_.useCallback((T,k)=>{l(b=>({...b,[T]:k}))},[]),h=_.useCallback((T,k,b)=>{l(E=>({...E,questions:E.questions.map((N,P)=>P===T?{...N,[k]:b}:N)}))},[]),g=_.useCallback(()=>{l(T=>({...T,questions:[...T.questions,{question_id:T.questions.length+1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}))},[]),x=_.useCallback(T=>{o.questions.length>1&&l(k=>({...k,questions:k.questions.filter((b,E)=>E!==T)}))},[o.questions.length]),y=_.useCallback(()=>{const T={};return o.min_words<10&&(T.min_words="Minimum word count must be at least 10 words"),o.questions.forEach((k,b)=>{k.prompt.trim()||(T[`question_${b}_prompt`]="Question prompt is required")}),T},[o]),v=_.useCallback(async T=>{T.preventDefault();const k=y();if(Object.keys(k).length>0){i("Please fix the validation errors","error");return}d(!0);try{const b={test_name:e,time_limit:300,min_duration:30,max_duration:600,max_attempts:3,min_words:o.min_words,passing_score:50,allowed_time:null,questions:o.questions.map((E,N)=>({question_id:N+1,prompt:E.prompt,expected_duration:E.expected_duration,difficulty_level:E.difficulty_level}))};console.log(" [DEBUG] Calling onTestSaved with data:",b),t?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),t(b),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(b){console.error("Error preparing speaking test:",b),i("Failed to prepare speaking test","error")}finally{d(!1)}},[o,y,i,t,e]);return u||s?c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx(fn,{}),c.jsx("span",{className:"ml-2",children:"Creating speaking test..."})]}):c.jsxs("div",{className:"speaking-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Speaking Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a speaking test where students record audio responses with AI-powered feedback"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Scoring Settings"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count *"}),c.jsx("input",{type:"number",min:"10",max:"1000",value:o.min_words,onChange:T=>f("min_words",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.min_words&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.min_words})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),c.jsx(tt,{type:"button",variant:"outline",onClick:g,children:"Add Question"})]}),o.questions.length>1&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Multiple Questions Detected"}),c.jsx("div",{className:"mt-1 text-sm text-blue-700",children:c.jsxs("p",{children:["You have ",o.questions.length," questions in this test.",c.jsx("strong",{children:" Only one question will be randomly selected"})," and shown to each student. This ensures fair distribution across your question pool."]})})]})]})}),o.questions.map((T,k)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-medium",children:["Question ",k+1]}),o.questions.length>1&&c.jsx(tt,{type:"button",variant:"outline",size:"sm",onClick:()=>x(k),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Prompt *"}),c.jsx("textarea",{value:T.prompt,onChange:b=>h(k,"prompt",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter the question prompt for students"}),a[`question_${k}_prompt`]&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:a[`question_${k}_prompt`]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Duration (seconds)"}),c.jsx("input",{type:"number",min:"10",max:"600",value:T.expected_duration||"",onChange:b=>h(k,"expected_duration",b.target.value?parseInt(b.target.value):null),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEFR Level"}),c.jsx("select",{value:T.difficulty_level,onChange:b=>h(k,"difficulty_level",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:Sce.map(b=>c.jsxs("option",{value:b.value,children:[b.label," - ",b.description]},b.value))}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the appropriate CEFR level for this question. This will be used by AI to evaluate students appropriately."})]})]})]})]},k))]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[c.jsx(tt,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),c.jsx(tt,{type:"submit",variant:"primary",disabled:u||s,children:u||s?"Creating...":"Create Speaking Test"})]})]})]})},aW=(e,t)=>{const[r,n]=_.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error reading localStorage key "${e}":`,i),t}}),s=_.useCallback(i=>{try{const o=i instanceof Function?i(r):i;n(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]),a=_.useCallback(()=>{try{window.localStorage.removeItem(e),n(t)}catch(i){console.error(`Error removing localStorage key "${e}":`,i)}},[e,t]);return[r,s,a]},J_=()=>{const e=_.useCallback((l,u=null)=>{try{const d=window.localStorage.getItem(l);return d?JSON.parse(d):u}catch(d){return console.error(`Error reading localStorage key "${l}":`,d),u}},[]),t=_.useCallback((l,u)=>{try{window.localStorage.setItem(l,JSON.stringify(u))}catch(d){console.error(`Error setting localStorage key "${l}":`,d)}},[]),r=_.useCallback(l=>{try{window.localStorage.removeItem(l)}catch(u){console.error(`Error removing localStorage key "${l}":`,u)}},[]),n=_.useCallback(()=>{if(confirm("Are you sure you want to clear all local storage? This cannot be undone."))try{window.localStorage.clear(),window.showNotification?window.showNotification("All local storage cleared!","success"):console.log("All local storage cleared!")}catch(l){console.error("Error clearing localStorage:",l)}},[]),s=_.useCallback(()=>{try{const l={};for(let h=0;h<window.localStorage.length;h++){const g=window.localStorage.key(h);g&&(l[g]=window.localStorage.getItem(g))}const u=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="localStorage_backup.json",f.click(),URL.revokeObjectURL(d),window.showNotification?window.showNotification("Local storage exported!","success"):console.log("Local storage exported!")}catch(l){console.error("Error exporting localStorage data:",l)}},[]),a=_.useCallback(()=>{try{window.localStorage.clear()}catch(l){console.error("Error clearing localStorage:",l)}},[]),i=_.useCallback(()=>{try{const l={};for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d&&(l[d]=window.localStorage.getItem(d))}return l}catch(l){return console.error("Error exporting localStorage data:",l),{}}},[]),o=_.useCallback(l=>{try{Object.entries(l).forEach(([u,d])=>{window.localStorage.setItem(u,d)})}catch(u){console.error("Error importing localStorage data:",u)}},[]);return{getItem:e,setItem:t,removeItem:r,clearAll:a,clearAllLocalStorage:n,exportLocalStorage:s,exportData:i,importData:o}};class sl{constructor(t,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=n}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new sl(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class Rl{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new Rl(r,sl.range(this,t))}}class nr{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+t,s,a,i=r&&r.loc;if(i&&i.start<=i.end){var o=i.lexer.input;s=i.start,a=i.end,s===o.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";var l=o.slice(s,a).replace(/[^]/g,"$&"),u;s>15?u=""+o.slice(s-15,s):u=o.slice(0,s);var d;a+15<o.length?d=o.slice(a,a+15)+"":d=o.slice(a),n+=u+l+d}var f=new Error(n);return f.name="ParseError",f.__proto__=nr.prototype,f.position=s,s!=null&&a!=null&&(f.length=a-s),f.rawMessage=t,f}}nr.prototype.__proto__=Error.prototype;var Tce=function(t,r){return t===void 0?r:t},Cce=/([A-Z])/g,Ece=function(t){return t.replace(Cce,"-$1").toLowerCase()},Nce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Ace=/[&><"']/g;function jce(e){return String(e).replace(Ace,t=>Nce[t])}var iW=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},Pce=function(t){var r=iW(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Mce=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},Fce=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Un={deflt:Tce,escape:jce,hyphenate:Ece,getBaseElem:iW,isCharacterBox:Pce,protocolFromUrl:Fce},Kb={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function Dce(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class EC{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in Kb)if(Kb.hasOwnProperty(r)){var n=Kb[r];this[r]=t[r]!==void 0?n.processor?n.processor(t[r]):t[r]:Dce(n)}}reportNonstrict(t,r,n){var s=this.strict;if(typeof s=="function"&&(s=s(t,r,n)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new nr("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),n);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,n){var s=this.strict;if(typeof s=="function")try{s=s(t,r,n)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=Un.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var n=typeof this.trust=="function"?this.trust(t):this.trust;return!!n}}class mf{constructor(t,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=n}sup(){return Bu[Oce[this.id]]}sub(){return Bu[Rce[this.id]]}fracNum(){return Bu[Ice[this.id]]}fracDen(){return Bu[Lce[this.id]]}cramp(){return Bu[Bce[this.id]]}text(){return Bu[$ce[this.id]]}isTight(){return this.size>=2}}var NC=0,E4=1,Ap=2,Qd=3,Sv=4,gc=5,Wp=6,Lo=7,Bu=[new mf(NC,0,!1),new mf(E4,0,!0),new mf(Ap,1,!1),new mf(Qd,1,!0),new mf(Sv,2,!1),new mf(gc,2,!0),new mf(Wp,3,!1),new mf(Lo,3,!0)],Oce=[Sv,gc,Sv,gc,Wp,Lo,Wp,Lo],Rce=[gc,gc,gc,gc,Lo,Lo,Lo,Lo],Ice=[Ap,Qd,Sv,gc,Wp,Lo,Wp,Lo],Lce=[Qd,Qd,gc,gc,Lo,Lo,Lo,Lo],Bce=[E4,E4,Qd,Qd,gc,gc,Lo,Lo],$ce=[NC,E4,Ap,Qd,Ap,Qd,Ap,Qd],Vr={DISPLAY:Bu[NC],TEXT:Bu[Ap],SCRIPT:Bu[Sv],SCRIPTSCRIPT:Bu[Wp]},j8=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function zce(e){for(var t=0;t<j8.length;t++)for(var r=j8[t],n=0;n<r.blocks.length;n++){var s=r.blocks[n];if(e>=s[0]&&e<=s[1])return r.name}return null}var Yb=[];j8.forEach(e=>e.blocks.forEach(t=>Yb.push(...t)));function oW(e){for(var t=0;t<Yb.length;t+=2)if(e>=Yb[t]&&e<=Yb[t+1])return!0;return!1}var Zg=80,Uce=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Wce=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Hce=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Gce=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},Vce=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},qce=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},Kce=function(t,r,n){var s=n-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},Yce=function(t,r,n){r=1e3*r;var s="";switch(t){case"sqrtMain":s=Uce(r,Zg);break;case"sqrtSize1":s=Wce(r,Zg);break;case"sqrtSize2":s=Hce(r,Zg);break;case"sqrtSize3":s=Gce(r,Zg);break;case"sqrtSize4":s=Vce(r,Zg);break;case"sqrtTall":s=Kce(r,Zg,n)}return s},Xce=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},gF={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Jce=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class x2{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}}var Uu={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},rb={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},pF={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Qce(e,t){Uu[e]=t}function AC(e,t,r){if(!Uu[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),s=Uu[t][n];if(!s&&e[0]in pF&&(n=pF[e[0]].charCodeAt(0),s=Uu[t][n]),!s&&r==="text"&&oW(n)&&(s=Uu[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var w5={};function Zce(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!w5[t]){var r=w5[t]={cssEmPerMu:rb.quad[t]/18};for(var n in rb)rb.hasOwnProperty(n)&&(r[n]=rb[n][t])}return w5[t]}var eue=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],xF=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],yF=function(t,r){return r.size<2?t:eue[t-1][r.size-1]};class zd{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||zd.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=xF[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new zd(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:yF(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:xF[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=yF(zd.BASESIZE,t);return this.size===r&&this.textSize===zd.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==zd.BASESIZE?["sizing","reset-size"+this.size,"size"+zd.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Zce(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}zd.BASESIZE=6;var P8={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},tue={ex:!0,em:!0,mu:!0},lW=function(t){return typeof t!="string"&&(t=t.unit),t in P8||t in tue||t==="ex"},Ks=function(t,r){var n;if(t.unit in P8)n=P8[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var s;if(r.style.isTight()?s=r.havingStyle(r.style.text()):s=r,t.unit==="ex")n=s.fontMetrics().xHeight;else if(t.unit==="em")n=s.fontMetrics().quad;else throw new nr("Invalid unit: '"+t.unit+"'");s!==r&&(n*=s.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*n,r.maxSize)},vr=function(t){return+t.toFixed(4)+"em"},Bf=function(t){return t.filter(r=>r).join(" ")},cW=function(t,r,n){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var s=r.getColor();s&&(this.style.color=s)}},uW=function(t){var r=document.createElement(t);r.className=Bf(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&r.setAttribute(s,this.attributes[s]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},rue=/[\s"'>/=\x00-\x1f]/,dW=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+Un.escape(Bf(this.classes))+'"');var n="";for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Un.hyphenate(s)+":"+this.style[s]+";");n&&(r+=' style="'+Un.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(rue.test(a))throw new nr("Invalid attribute name '"+a+"'");r+=" "+a+'="'+Un.escape(this.attributes[a])+'"'}r+=">";for(var i=0;i<this.children.length;i++)r+=this.children[i].toMarkup();return r+="</"+t+">",r};class y2{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,cW.call(this,t,n,s),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return uW.call(this,"span")}toMarkup(){return dW.call(this,"span")}}class jC{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,cW.call(this,r,s),this.children=n||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return uW.call(this,"a")}toMarkup(){return dW.call(this,"a")}}class nue{constructor(t,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=n}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+Un.escape(this.src)+'"'+(' alt="'+Un.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Un.hyphenate(n)+":"+this.style[n]+";");return r&&(t+=' style="'+Un.escape(r)+'"'),t+="'/>",t}}var sue={:"",:"",:"",:""};class _c{constructor(t,r,n,s,a,i,o,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=n||0,this.italic=s||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=l||{},this.maxFontSize=0;var u=zce(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=sue[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=vr(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Bf(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=Un.escape(Bf(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Un.hyphenate(s)+":"+this.style[s]+";");n&&(t=!0,r+=' style="'+Un.escape(n)+'"');var a=Un.escape(this.text);return t?(r+=">",r+=a,r+="</span>",r):a}}class c0{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Un.escape(this.attributes[r])+'"');t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</svg>",t}}class $f{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",gF[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Un.escape(this.alternate)+'"/>':'<path d="'+Un.escape(gF[this.pathName])+'"/>'}}class M8{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Un.escape(this.attributes[r])+'"');return t+="/>",t}}function vF(e){if(e instanceof _c)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function aue(e){if(e instanceof y2)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var iue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},oue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},_s={math:{},text:{}};function Z(e,t,r,n,s,a){_s[e][s]={font:t,group:r,replace:n},a&&n&&(_s[e][n]=_s[e][s])}var ae="math",Xt="text",fe="main",Re="ams",Ws="accent-token",jr="bin",Ho="close",x1="inner",Gr="mathord",Ua="op-token",Ul="open",Q_="punct",Be="rel",v0="spacing",Xe="textord";Z(ae,fe,Be,"","\\equiv",!0);Z(ae,fe,Be,"","\\prec",!0);Z(ae,fe,Be,"","\\succ",!0);Z(ae,fe,Be,"","\\sim",!0);Z(ae,fe,Be,"","\\perp");Z(ae,fe,Be,"","\\preceq",!0);Z(ae,fe,Be,"","\\succeq",!0);Z(ae,fe,Be,"","\\simeq",!0);Z(ae,fe,Be,"","\\mid",!0);Z(ae,fe,Be,"","\\ll",!0);Z(ae,fe,Be,"","\\gg",!0);Z(ae,fe,Be,"","\\asymp",!0);Z(ae,fe,Be,"","\\parallel");Z(ae,fe,Be,"","\\bowtie",!0);Z(ae,fe,Be,"","\\smile",!0);Z(ae,fe,Be,"","\\sqsubseteq",!0);Z(ae,fe,Be,"","\\sqsupseteq",!0);Z(ae,fe,Be,"","\\doteq",!0);Z(ae,fe,Be,"","\\frown",!0);Z(ae,fe,Be,"","\\ni",!0);Z(ae,fe,Be,"","\\propto",!0);Z(ae,fe,Be,"","\\vdash",!0);Z(ae,fe,Be,"","\\dashv",!0);Z(ae,fe,Be,"","\\owns");Z(ae,fe,Q_,".","\\ldotp");Z(ae,fe,Q_,"","\\cdotp");Z(ae,fe,Xe,"#","\\#");Z(Xt,fe,Xe,"#","\\#");Z(ae,fe,Xe,"&","\\&");Z(Xt,fe,Xe,"&","\\&");Z(ae,fe,Xe,"","\\aleph",!0);Z(ae,fe,Xe,"","\\forall",!0);Z(ae,fe,Xe,"","\\hbar",!0);Z(ae,fe,Xe,"","\\exists",!0);Z(ae,fe,Xe,"","\\nabla",!0);Z(ae,fe,Xe,"","\\flat",!0);Z(ae,fe,Xe,"","\\ell",!0);Z(ae,fe,Xe,"","\\natural",!0);Z(ae,fe,Xe,"","\\clubsuit",!0);Z(ae,fe,Xe,"","\\wp",!0);Z(ae,fe,Xe,"","\\sharp",!0);Z(ae,fe,Xe,"","\\diamondsuit",!0);Z(ae,fe,Xe,"","\\Re",!0);Z(ae,fe,Xe,"","\\heartsuit",!0);Z(ae,fe,Xe,"","\\Im",!0);Z(ae,fe,Xe,"","\\spadesuit",!0);Z(ae,fe,Xe,"","\\S",!0);Z(Xt,fe,Xe,"","\\S");Z(ae,fe,Xe,"","\\P",!0);Z(Xt,fe,Xe,"","\\P");Z(ae,fe,Xe,"","\\dag");Z(Xt,fe,Xe,"","\\dag");Z(Xt,fe,Xe,"","\\textdagger");Z(ae,fe,Xe,"","\\ddag");Z(Xt,fe,Xe,"","\\ddag");Z(Xt,fe,Xe,"","\\textdaggerdbl");Z(ae,fe,Ho,"","\\rmoustache",!0);Z(ae,fe,Ul,"","\\lmoustache",!0);Z(ae,fe,Ho,"","\\rgroup",!0);Z(ae,fe,Ul,"","\\lgroup",!0);Z(ae,fe,jr,"","\\mp",!0);Z(ae,fe,jr,"","\\ominus",!0);Z(ae,fe,jr,"","\\uplus",!0);Z(ae,fe,jr,"","\\sqcap",!0);Z(ae,fe,jr,"","\\ast");Z(ae,fe,jr,"","\\sqcup",!0);Z(ae,fe,jr,"","\\bigcirc",!0);Z(ae,fe,jr,"","\\bullet",!0);Z(ae,fe,jr,"","\\ddagger");Z(ae,fe,jr,"","\\wr",!0);Z(ae,fe,jr,"","\\amalg");Z(ae,fe,jr,"&","\\And");Z(ae,fe,Be,"","\\longleftarrow",!0);Z(ae,fe,Be,"","\\Leftarrow",!0);Z(ae,fe,Be,"","\\Longleftarrow",!0);Z(ae,fe,Be,"","\\longrightarrow",!0);Z(ae,fe,Be,"","\\Rightarrow",!0);Z(ae,fe,Be,"","\\Longrightarrow",!0);Z(ae,fe,Be,"","\\leftrightarrow",!0);Z(ae,fe,Be,"","\\longleftrightarrow",!0);Z(ae,fe,Be,"","\\Leftrightarrow",!0);Z(ae,fe,Be,"","\\Longleftrightarrow",!0);Z(ae,fe,Be,"","\\mapsto",!0);Z(ae,fe,Be,"","\\longmapsto",!0);Z(ae,fe,Be,"","\\nearrow",!0);Z(ae,fe,Be,"","\\hookleftarrow",!0);Z(ae,fe,Be,"","\\hookrightarrow",!0);Z(ae,fe,Be,"","\\searrow",!0);Z(ae,fe,Be,"","\\leftharpoonup",!0);Z(ae,fe,Be,"","\\rightharpoonup",!0);Z(ae,fe,Be,"","\\swarrow",!0);Z(ae,fe,Be,"","\\leftharpoondown",!0);Z(ae,fe,Be,"","\\rightharpoondown",!0);Z(ae,fe,Be,"","\\nwarrow",!0);Z(ae,fe,Be,"","\\rightleftharpoons",!0);Z(ae,Re,Be,"","\\nless",!0);Z(ae,Re,Be,"","\\@nleqslant");Z(ae,Re,Be,"","\\@nleqq");Z(ae,Re,Be,"","\\lneq",!0);Z(ae,Re,Be,"","\\lneqq",!0);Z(ae,Re,Be,"","\\@lvertneqq");Z(ae,Re,Be,"","\\lnsim",!0);Z(ae,Re,Be,"","\\lnapprox",!0);Z(ae,Re,Be,"","\\nprec",!0);Z(ae,Re,Be,"","\\npreceq",!0);Z(ae,Re,Be,"","\\precnsim",!0);Z(ae,Re,Be,"","\\precnapprox",!0);Z(ae,Re,Be,"","\\nsim",!0);Z(ae,Re,Be,"","\\@nshortmid");Z(ae,Re,Be,"","\\nmid",!0);Z(ae,Re,Be,"","\\nvdash",!0);Z(ae,Re,Be,"","\\nvDash",!0);Z(ae,Re,Be,"","\\ntriangleleft");Z(ae,Re,Be,"","\\ntrianglelefteq",!0);Z(ae,Re,Be,"","\\subsetneq",!0);Z(ae,Re,Be,"","\\@varsubsetneq");Z(ae,Re,Be,"","\\subsetneqq",!0);Z(ae,Re,Be,"","\\@varsubsetneqq");Z(ae,Re,Be,"","\\ngtr",!0);Z(ae,Re,Be,"","\\@ngeqslant");Z(ae,Re,Be,"","\\@ngeqq");Z(ae,Re,Be,"","\\gneq",!0);Z(ae,Re,Be,"","\\gneqq",!0);Z(ae,Re,Be,"","\\@gvertneqq");Z(ae,Re,Be,"","\\gnsim",!0);Z(ae,Re,Be,"","\\gnapprox",!0);Z(ae,Re,Be,"","\\nsucc",!0);Z(ae,Re,Be,"","\\nsucceq",!0);Z(ae,Re,Be,"","\\succnsim",!0);Z(ae,Re,Be,"","\\succnapprox",!0);Z(ae,Re,Be,"","\\ncong",!0);Z(ae,Re,Be,"","\\@nshortparallel");Z(ae,Re,Be,"","\\nparallel",!0);Z(ae,Re,Be,"","\\nVDash",!0);Z(ae,Re,Be,"","\\ntriangleright");Z(ae,Re,Be,"","\\ntrianglerighteq",!0);Z(ae,Re,Be,"","\\@nsupseteqq");Z(ae,Re,Be,"","\\supsetneq",!0);Z(ae,Re,Be,"","\\@varsupsetneq");Z(ae,Re,Be,"","\\supsetneqq",!0);Z(ae,Re,Be,"","\\@varsupsetneqq");Z(ae,Re,Be,"","\\nVdash",!0);Z(ae,Re,Be,"","\\precneqq",!0);Z(ae,Re,Be,"","\\succneqq",!0);Z(ae,Re,Be,"","\\@nsubseteqq");Z(ae,Re,jr,"","\\unlhd");Z(ae,Re,jr,"","\\unrhd");Z(ae,Re,Be,"","\\nleftarrow",!0);Z(ae,Re,Be,"","\\nrightarrow",!0);Z(ae,Re,Be,"","\\nLeftarrow",!0);Z(ae,Re,Be,"","\\nRightarrow",!0);Z(ae,Re,Be,"","\\nleftrightarrow",!0);Z(ae,Re,Be,"","\\nLeftrightarrow",!0);Z(ae,Re,Be,"","\\vartriangle");Z(ae,Re,Xe,"","\\hslash");Z(ae,Re,Xe,"","\\triangledown");Z(ae,Re,Xe,"","\\lozenge");Z(ae,Re,Xe,"","\\circledS");Z(ae,Re,Xe,"","\\circledR");Z(Xt,Re,Xe,"","\\circledR");Z(ae,Re,Xe,"","\\measuredangle",!0);Z(ae,Re,Xe,"","\\nexists");Z(ae,Re,Xe,"","\\mho");Z(ae,Re,Xe,"","\\Finv",!0);Z(ae,Re,Xe,"","\\Game",!0);Z(ae,Re,Xe,"","\\backprime");Z(ae,Re,Xe,"","\\blacktriangle");Z(ae,Re,Xe,"","\\blacktriangledown");Z(ae,Re,Xe,"","\\blacksquare");Z(ae,Re,Xe,"","\\blacklozenge");Z(ae,Re,Xe,"","\\bigstar");Z(ae,Re,Xe,"","\\sphericalangle",!0);Z(ae,Re,Xe,"","\\complement",!0);Z(ae,Re,Xe,"","\\eth",!0);Z(Xt,fe,Xe,"","");Z(ae,Re,Xe,"","\\diagup");Z(ae,Re,Xe,"","\\diagdown");Z(ae,Re,Xe,"","\\square");Z(ae,Re,Xe,"","\\Box");Z(ae,Re,Xe,"","\\Diamond");Z(ae,Re,Xe,"","\\yen",!0);Z(Xt,Re,Xe,"","\\yen",!0);Z(ae,Re,Xe,"","\\checkmark",!0);Z(Xt,Re,Xe,"","\\checkmark");Z(ae,Re,Xe,"","\\beth",!0);Z(ae,Re,Xe,"","\\daleth",!0);Z(ae,Re,Xe,"","\\gimel",!0);Z(ae,Re,Xe,"","\\digamma",!0);Z(ae,Re,Xe,"","\\varkappa");Z(ae,Re,Ul,"","\\@ulcorner",!0);Z(ae,Re,Ho,"","\\@urcorner",!0);Z(ae,Re,Ul,"","\\@llcorner",!0);Z(ae,Re,Ho,"","\\@lrcorner",!0);Z(ae,Re,Be,"","\\leqq",!0);Z(ae,Re,Be,"","\\leqslant",!0);Z(ae,Re,Be,"","\\eqslantless",!0);Z(ae,Re,Be,"","\\lesssim",!0);Z(ae,Re,Be,"","\\lessapprox",!0);Z(ae,Re,Be,"","\\approxeq",!0);Z(ae,Re,jr,"","\\lessdot");Z(ae,Re,Be,"","\\lll",!0);Z(ae,Re,Be,"","\\lessgtr",!0);Z(ae,Re,Be,"","\\lesseqgtr",!0);Z(ae,Re,Be,"","\\lesseqqgtr",!0);Z(ae,Re,Be,"","\\doteqdot");Z(ae,Re,Be,"","\\risingdotseq",!0);Z(ae,Re,Be,"","\\fallingdotseq",!0);Z(ae,Re,Be,"","\\backsim",!0);Z(ae,Re,Be,"","\\backsimeq",!0);Z(ae,Re,Be,"","\\subseteqq",!0);Z(ae,Re,Be,"","\\Subset",!0);Z(ae,Re,Be,"","\\sqsubset",!0);Z(ae,Re,Be,"","\\preccurlyeq",!0);Z(ae,Re,Be,"","\\curlyeqprec",!0);Z(ae,Re,Be,"","\\precsim",!0);Z(ae,Re,Be,"","\\precapprox",!0);Z(ae,Re,Be,"","\\vartriangleleft");Z(ae,Re,Be,"","\\trianglelefteq");Z(ae,Re,Be,"","\\vDash",!0);Z(ae,Re,Be,"","\\Vvdash",!0);Z(ae,Re,Be,"","\\smallsmile");Z(ae,Re,Be,"","\\smallfrown");Z(ae,Re,Be,"","\\bumpeq",!0);Z(ae,Re,Be,"","\\Bumpeq",!0);Z(ae,Re,Be,"","\\geqq",!0);Z(ae,Re,Be,"","\\geqslant",!0);Z(ae,Re,Be,"","\\eqslantgtr",!0);Z(ae,Re,Be,"","\\gtrsim",!0);Z(ae,Re,Be,"","\\gtrapprox",!0);Z(ae,Re,jr,"","\\gtrdot");Z(ae,Re,Be,"","\\ggg",!0);Z(ae,Re,Be,"","\\gtrless",!0);Z(ae,Re,Be,"","\\gtreqless",!0);Z(ae,Re,Be,"","\\gtreqqless",!0);Z(ae,Re,Be,"","\\eqcirc",!0);Z(ae,Re,Be,"","\\circeq",!0);Z(ae,Re,Be,"","\\triangleq",!0);Z(ae,Re,Be,"","\\thicksim");Z(ae,Re,Be,"","\\thickapprox");Z(ae,Re,Be,"","\\supseteqq",!0);Z(ae,Re,Be,"","\\Supset",!0);Z(ae,Re,Be,"","\\sqsupset",!0);Z(ae,Re,Be,"","\\succcurlyeq",!0);Z(ae,Re,Be,"","\\curlyeqsucc",!0);Z(ae,Re,Be,"","\\succsim",!0);Z(ae,Re,Be,"","\\succapprox",!0);Z(ae,Re,Be,"","\\vartriangleright");Z(ae,Re,Be,"","\\trianglerighteq");Z(ae,Re,Be,"","\\Vdash",!0);Z(ae,Re,Be,"","\\shortmid");Z(ae,Re,Be,"","\\shortparallel");Z(ae,Re,Be,"","\\between",!0);Z(ae,Re,Be,"","\\pitchfork",!0);Z(ae,Re,Be,"","\\varpropto");Z(ae,Re,Be,"","\\blacktriangleleft");Z(ae,Re,Be,"","\\therefore",!0);Z(ae,Re,Be,"","\\backepsilon");Z(ae,Re,Be,"","\\blacktriangleright");Z(ae,Re,Be,"","\\because",!0);Z(ae,Re,Be,"","\\llless");Z(ae,Re,Be,"","\\gggtr");Z(ae,Re,jr,"","\\lhd");Z(ae,Re,jr,"","\\rhd");Z(ae,Re,Be,"","\\eqsim",!0);Z(ae,fe,Be,"","\\Join");Z(ae,Re,Be,"","\\Doteq",!0);Z(ae,Re,jr,"","\\dotplus",!0);Z(ae,Re,jr,"","\\smallsetminus");Z(ae,Re,jr,"","\\Cap",!0);Z(ae,Re,jr,"","\\Cup",!0);Z(ae,Re,jr,"","\\doublebarwedge",!0);Z(ae,Re,jr,"","\\boxminus",!0);Z(ae,Re,jr,"","\\boxplus",!0);Z(ae,Re,jr,"","\\divideontimes",!0);Z(ae,Re,jr,"","\\ltimes",!0);Z(ae,Re,jr,"","\\rtimes",!0);Z(ae,Re,jr,"","\\leftthreetimes",!0);Z(ae,Re,jr,"","\\rightthreetimes",!0);Z(ae,Re,jr,"","\\curlywedge",!0);Z(ae,Re,jr,"","\\curlyvee",!0);Z(ae,Re,jr,"","\\circleddash",!0);Z(ae,Re,jr,"","\\circledast",!0);Z(ae,Re,jr,"","\\centerdot");Z(ae,Re,jr,"","\\intercal",!0);Z(ae,Re,jr,"","\\doublecap");Z(ae,Re,jr,"","\\doublecup");Z(ae,Re,jr,"","\\boxtimes",!0);Z(ae,Re,Be,"","\\dashrightarrow",!0);Z(ae,Re,Be,"","\\dashleftarrow",!0);Z(ae,Re,Be,"","\\leftleftarrows",!0);Z(ae,Re,Be,"","\\leftrightarrows",!0);Z(ae,Re,Be,"","\\Lleftarrow",!0);Z(ae,Re,Be,"","\\twoheadleftarrow",!0);Z(ae,Re,Be,"","\\leftarrowtail",!0);Z(ae,Re,Be,"","\\looparrowleft",!0);Z(ae,Re,Be,"","\\leftrightharpoons",!0);Z(ae,Re,Be,"","\\curvearrowleft",!0);Z(ae,Re,Be,"","\\circlearrowleft",!0);Z(ae,Re,Be,"","\\Lsh",!0);Z(ae,Re,Be,"","\\upuparrows",!0);Z(ae,Re,Be,"","\\upharpoonleft",!0);Z(ae,Re,Be,"","\\downharpoonleft",!0);Z(ae,fe,Be,"","\\origof",!0);Z(ae,fe,Be,"","\\imageof",!0);Z(ae,Re,Be,"","\\multimap",!0);Z(ae,Re,Be,"","\\leftrightsquigarrow",!0);Z(ae,Re,Be,"","\\rightrightarrows",!0);Z(ae,Re,Be,"","\\rightleftarrows",!0);Z(ae,Re,Be,"","\\twoheadrightarrow",!0);Z(ae,Re,Be,"","\\rightarrowtail",!0);Z(ae,Re,Be,"","\\looparrowright",!0);Z(ae,Re,Be,"","\\curvearrowright",!0);Z(ae,Re,Be,"","\\circlearrowright",!0);Z(ae,Re,Be,"","\\Rsh",!0);Z(ae,Re,Be,"","\\downdownarrows",!0);Z(ae,Re,Be,"","\\upharpoonright",!0);Z(ae,Re,Be,"","\\downharpoonright",!0);Z(ae,Re,Be,"","\\rightsquigarrow",!0);Z(ae,Re,Be,"","\\leadsto");Z(ae,Re,Be,"","\\Rrightarrow",!0);Z(ae,Re,Be,"","\\restriction");Z(ae,fe,Xe,"","`");Z(ae,fe,Xe,"$","\\$");Z(Xt,fe,Xe,"$","\\$");Z(Xt,fe,Xe,"$","\\textdollar");Z(ae,fe,Xe,"%","\\%");Z(Xt,fe,Xe,"%","\\%");Z(ae,fe,Xe,"_","\\_");Z(Xt,fe,Xe,"_","\\_");Z(Xt,fe,Xe,"_","\\textunderscore");Z(ae,fe,Xe,"","\\angle",!0);Z(ae,fe,Xe,"","\\infty",!0);Z(ae,fe,Xe,"","\\prime");Z(ae,fe,Xe,"","\\triangle");Z(ae,fe,Xe,"","\\Gamma",!0);Z(ae,fe,Xe,"","\\Delta",!0);Z(ae,fe,Xe,"","\\Theta",!0);Z(ae,fe,Xe,"","\\Lambda",!0);Z(ae,fe,Xe,"","\\Xi",!0);Z(ae,fe,Xe,"","\\Pi",!0);Z(ae,fe,Xe,"","\\Sigma",!0);Z(ae,fe,Xe,"","\\Upsilon",!0);Z(ae,fe,Xe,"","\\Phi",!0);Z(ae,fe,Xe,"","\\Psi",!0);Z(ae,fe,Xe,"","\\Omega",!0);Z(ae,fe,Xe,"A","");Z(ae,fe,Xe,"B","");Z(ae,fe,Xe,"E","");Z(ae,fe,Xe,"Z","");Z(ae,fe,Xe,"H","");Z(ae,fe,Xe,"I","");Z(ae,fe,Xe,"K","");Z(ae,fe,Xe,"M","");Z(ae,fe,Xe,"N","");Z(ae,fe,Xe,"O","");Z(ae,fe,Xe,"P","");Z(ae,fe,Xe,"T","");Z(ae,fe,Xe,"X","");Z(ae,fe,Xe,"","\\neg",!0);Z(ae,fe,Xe,"","\\lnot");Z(ae,fe,Xe,"","\\top");Z(ae,fe,Xe,"","\\bot");Z(ae,fe,Xe,"","\\emptyset");Z(ae,Re,Xe,"","\\varnothing");Z(ae,fe,Gr,"","\\alpha",!0);Z(ae,fe,Gr,"","\\beta",!0);Z(ae,fe,Gr,"","\\gamma",!0);Z(ae,fe,Gr,"","\\delta",!0);Z(ae,fe,Gr,"","\\epsilon",!0);Z(ae,fe,Gr,"","\\zeta",!0);Z(ae,fe,Gr,"","\\eta",!0);Z(ae,fe,Gr,"","\\theta",!0);Z(ae,fe,Gr,"","\\iota",!0);Z(ae,fe,Gr,"","\\kappa",!0);Z(ae,fe,Gr,"","\\lambda",!0);Z(ae,fe,Gr,"","\\mu",!0);Z(ae,fe,Gr,"","\\nu",!0);Z(ae,fe,Gr,"","\\xi",!0);Z(ae,fe,Gr,"","\\omicron",!0);Z(ae,fe,Gr,"","\\pi",!0);Z(ae,fe,Gr,"","\\rho",!0);Z(ae,fe,Gr,"","\\sigma",!0);Z(ae,fe,Gr,"","\\tau",!0);Z(ae,fe,Gr,"","\\upsilon",!0);Z(ae,fe,Gr,"","\\phi",!0);Z(ae,fe,Gr,"","\\chi",!0);Z(ae,fe,Gr,"","\\psi",!0);Z(ae,fe,Gr,"","\\omega",!0);Z(ae,fe,Gr,"","\\varepsilon",!0);Z(ae,fe,Gr,"","\\vartheta",!0);Z(ae,fe,Gr,"","\\varpi",!0);Z(ae,fe,Gr,"","\\varrho",!0);Z(ae,fe,Gr,"","\\varsigma",!0);Z(ae,fe,Gr,"","\\varphi",!0);Z(ae,fe,jr,"","*",!0);Z(ae,fe,jr,"+","+");Z(ae,fe,jr,"","-",!0);Z(ae,fe,jr,"","\\cdot",!0);Z(ae,fe,jr,"","\\circ",!0);Z(ae,fe,jr,"","\\div",!0);Z(ae,fe,jr,"","\\pm",!0);Z(ae,fe,jr,"","\\times",!0);Z(ae,fe,jr,"","\\cap",!0);Z(ae,fe,jr,"","\\cup",!0);Z(ae,fe,jr,"","\\setminus",!0);Z(ae,fe,jr,"","\\land");Z(ae,fe,jr,"","\\lor");Z(ae,fe,jr,"","\\wedge",!0);Z(ae,fe,jr,"","\\vee",!0);Z(ae,fe,Xe,"","\\surd");Z(ae,fe,Ul,"","\\langle",!0);Z(ae,fe,Ul,"","\\lvert");Z(ae,fe,Ul,"","\\lVert");Z(ae,fe,Ho,"?","?");Z(ae,fe,Ho,"!","!");Z(ae,fe,Ho,"","\\rangle",!0);Z(ae,fe,Ho,"","\\rvert");Z(ae,fe,Ho,"","\\rVert");Z(ae,fe,Be,"=","=");Z(ae,fe,Be,":",":");Z(ae,fe,Be,"","\\approx",!0);Z(ae,fe,Be,"","\\cong",!0);Z(ae,fe,Be,"","\\ge");Z(ae,fe,Be,"","\\geq",!0);Z(ae,fe,Be,"","\\gets");Z(ae,fe,Be,">","\\gt",!0);Z(ae,fe,Be,"","\\in",!0);Z(ae,fe,Be,"","\\@not");Z(ae,fe,Be,"","\\subset",!0);Z(ae,fe,Be,"","\\supset",!0);Z(ae,fe,Be,"","\\subseteq",!0);Z(ae,fe,Be,"","\\supseteq",!0);Z(ae,Re,Be,"","\\nsubseteq",!0);Z(ae,Re,Be,"","\\nsupseteq",!0);Z(ae,fe,Be,"","\\models");Z(ae,fe,Be,"","\\leftarrow",!0);Z(ae,fe,Be,"","\\le");Z(ae,fe,Be,"","\\leq",!0);Z(ae,fe,Be,"<","\\lt",!0);Z(ae,fe,Be,"","\\rightarrow",!0);Z(ae,fe,Be,"","\\to");Z(ae,Re,Be,"","\\ngeq",!0);Z(ae,Re,Be,"","\\nleq",!0);Z(ae,fe,v0,"","\\ ");Z(ae,fe,v0,"","\\space");Z(ae,fe,v0,"","\\nobreakspace");Z(Xt,fe,v0,"","\\ ");Z(Xt,fe,v0,""," ");Z(Xt,fe,v0,"","\\space");Z(Xt,fe,v0,"","\\nobreakspace");Z(ae,fe,v0,null,"\\nobreak");Z(ae,fe,v0,null,"\\allowbreak");Z(ae,fe,Q_,",",",");Z(ae,fe,Q_,";",";");Z(ae,Re,jr,"","\\barwedge",!0);Z(ae,Re,jr,"","\\veebar",!0);Z(ae,fe,jr,"","\\odot",!0);Z(ae,fe,jr,"","\\oplus",!0);Z(ae,fe,jr,"","\\otimes",!0);Z(ae,fe,Xe,"","\\partial",!0);Z(ae,fe,jr,"","\\oslash",!0);Z(ae,Re,jr,"","\\circledcirc",!0);Z(ae,Re,jr,"","\\boxdot",!0);Z(ae,fe,jr,"","\\bigtriangleup");Z(ae,fe,jr,"","\\bigtriangledown");Z(ae,fe,jr,"","\\dagger");Z(ae,fe,jr,"","\\diamond");Z(ae,fe,jr,"","\\star");Z(ae,fe,jr,"","\\triangleleft");Z(ae,fe,jr,"","\\triangleright");Z(ae,fe,Ul,"{","\\{");Z(Xt,fe,Xe,"{","\\{");Z(Xt,fe,Xe,"{","\\textbraceleft");Z(ae,fe,Ho,"}","\\}");Z(Xt,fe,Xe,"}","\\}");Z(Xt,fe,Xe,"}","\\textbraceright");Z(ae,fe,Ul,"{","\\lbrace");Z(ae,fe,Ho,"}","\\rbrace");Z(ae,fe,Ul,"[","\\lbrack",!0);Z(Xt,fe,Xe,"[","\\lbrack",!0);Z(ae,fe,Ho,"]","\\rbrack",!0);Z(Xt,fe,Xe,"]","\\rbrack",!0);Z(ae,fe,Ul,"(","\\lparen",!0);Z(ae,fe,Ho,")","\\rparen",!0);Z(Xt,fe,Xe,"<","\\textless",!0);Z(Xt,fe,Xe,">","\\textgreater",!0);Z(ae,fe,Ul,"","\\lfloor",!0);Z(ae,fe,Ho,"","\\rfloor",!0);Z(ae,fe,Ul,"","\\lceil",!0);Z(ae,fe,Ho,"","\\rceil",!0);Z(ae,fe,Xe,"\\","\\backslash");Z(ae,fe,Xe,"","|");Z(ae,fe,Xe,"","\\vert");Z(Xt,fe,Xe,"|","\\textbar",!0);Z(ae,fe,Xe,"","\\|");Z(ae,fe,Xe,"","\\Vert");Z(Xt,fe,Xe,"","\\textbardbl");Z(Xt,fe,Xe,"~","\\textasciitilde");Z(Xt,fe,Xe,"\\","\\textbackslash");Z(Xt,fe,Xe,"^","\\textasciicircum");Z(ae,fe,Be,"","\\uparrow",!0);Z(ae,fe,Be,"","\\Uparrow",!0);Z(ae,fe,Be,"","\\downarrow",!0);Z(ae,fe,Be,"","\\Downarrow",!0);Z(ae,fe,Be,"","\\updownarrow",!0);Z(ae,fe,Be,"","\\Updownarrow",!0);Z(ae,fe,Ua,"","\\coprod");Z(ae,fe,Ua,"","\\bigvee");Z(ae,fe,Ua,"","\\bigwedge");Z(ae,fe,Ua,"","\\biguplus");Z(ae,fe,Ua,"","\\bigcap");Z(ae,fe,Ua,"","\\bigcup");Z(ae,fe,Ua,"","\\int");Z(ae,fe,Ua,"","\\intop");Z(ae,fe,Ua,"","\\iint");Z(ae,fe,Ua,"","\\iiint");Z(ae,fe,Ua,"","\\prod");Z(ae,fe,Ua,"","\\sum");Z(ae,fe,Ua,"","\\bigotimes");Z(ae,fe,Ua,"","\\bigoplus");Z(ae,fe,Ua,"","\\bigodot");Z(ae,fe,Ua,"","\\oint");Z(ae,fe,Ua,"","\\oiint");Z(ae,fe,Ua,"","\\oiiint");Z(ae,fe,Ua,"","\\bigsqcup");Z(ae,fe,Ua,"","\\smallint");Z(Xt,fe,x1,"","\\textellipsis");Z(ae,fe,x1,"","\\mathellipsis");Z(Xt,fe,x1,"","\\ldots",!0);Z(ae,fe,x1,"","\\ldots",!0);Z(ae,fe,x1,"","\\@cdots",!0);Z(ae,fe,x1,"","\\ddots",!0);Z(ae,fe,Xe,"","\\varvdots");Z(Xt,fe,Xe,"","\\varvdots");Z(ae,fe,Ws,"","\\acute");Z(ae,fe,Ws,"","\\grave");Z(ae,fe,Ws,"","\\ddot");Z(ae,fe,Ws,"~","\\tilde");Z(ae,fe,Ws,"","\\bar");Z(ae,fe,Ws,"","\\breve");Z(ae,fe,Ws,"","\\check");Z(ae,fe,Ws,"^","\\hat");Z(ae,fe,Ws,"","\\vec");Z(ae,fe,Ws,"","\\dot");Z(ae,fe,Ws,"","\\mathring");Z(ae,fe,Gr,"","\\@imath");Z(ae,fe,Gr,"","\\@jmath");Z(ae,fe,Xe,"","");Z(ae,fe,Xe,"","");Z(Xt,fe,Xe,"","\\i",!0);Z(Xt,fe,Xe,"","\\j",!0);Z(Xt,fe,Xe,"","\\ss",!0);Z(Xt,fe,Xe,"","\\ae",!0);Z(Xt,fe,Xe,"","\\oe",!0);Z(Xt,fe,Xe,"","\\o",!0);Z(Xt,fe,Xe,"","\\AE",!0);Z(Xt,fe,Xe,"","\\OE",!0);Z(Xt,fe,Xe,"","\\O",!0);Z(Xt,fe,Ws,"","\\'");Z(Xt,fe,Ws,"","\\`");Z(Xt,fe,Ws,"","\\^");Z(Xt,fe,Ws,"","\\~");Z(Xt,fe,Ws,"","\\=");Z(Xt,fe,Ws,"","\\u");Z(Xt,fe,Ws,"","\\.");Z(Xt,fe,Ws,"","\\c");Z(Xt,fe,Ws,"","\\r");Z(Xt,fe,Ws,"","\\v");Z(Xt,fe,Ws,"",'\\"');Z(Xt,fe,Ws,"","\\H");Z(Xt,fe,Ws,"","\\textcircled");var fW={"--":!0,"---":!0,"``":!0,"''":!0};Z(Xt,fe,Xe,"","--",!0);Z(Xt,fe,Xe,"","\\textendash");Z(Xt,fe,Xe,"","---",!0);Z(Xt,fe,Xe,"","\\textemdash");Z(Xt,fe,Xe,"","`",!0);Z(Xt,fe,Xe,"","\\textquoteleft");Z(Xt,fe,Xe,"","'",!0);Z(Xt,fe,Xe,"","\\textquoteright");Z(Xt,fe,Xe,"","``",!0);Z(Xt,fe,Xe,"","\\textquotedblleft");Z(Xt,fe,Xe,"","''",!0);Z(Xt,fe,Xe,"","\\textquotedblright");Z(ae,fe,Xe,"","\\degree",!0);Z(Xt,fe,Xe,"","\\degree");Z(Xt,fe,Xe,"","\\textdegree",!0);Z(ae,fe,Xe,"","\\pounds");Z(ae,fe,Xe,"","\\mathsterling",!0);Z(Xt,fe,Xe,"","\\pounds");Z(Xt,fe,Xe,"","\\textsterling",!0);Z(ae,Re,Xe,"","\\maltese");Z(Xt,Re,Xe,"","\\maltese");var wF='0123456789/@."';for(var b5=0;b5<wF.length;b5++){var bF=wF.charAt(b5);Z(ae,fe,Xe,bF,bF)}var _F='0123456789!@*()-=+";:?/.,';for(var _5=0;_5<_F.length;_5++){var SF=_F.charAt(_5);Z(Xt,fe,Xe,SF,SF)}var N4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var S5=0;S5<N4.length;S5++){var nb=N4.charAt(S5);Z(ae,fe,Gr,nb,nb),Z(Xt,fe,Xe,nb,nb)}Z(ae,Re,Xe,"C","");Z(Xt,Re,Xe,"C","");Z(ae,Re,Xe,"H","");Z(Xt,Re,Xe,"H","");Z(ae,Re,Xe,"N","");Z(Xt,Re,Xe,"N","");Z(ae,Re,Xe,"P","");Z(Xt,Re,Xe,"P","");Z(ae,Re,Xe,"Q","");Z(Xt,Re,Xe,"Q","");Z(ae,Re,Xe,"R","");Z(Xt,Re,Xe,"R","");Z(ae,Re,Xe,"Z","");Z(Xt,Re,Xe,"Z","");Z(ae,fe,Gr,"h","");Z(Xt,fe,Gr,"h","");var en="";for(var Fo=0;Fo<N4.length;Fo++){var na=N4.charAt(Fo);en=String.fromCharCode(55349,56320+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56372+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56424+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56580+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56684+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56736+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56788+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56840+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56944+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),Fo<26&&(en=String.fromCharCode(55349,56632+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en),en=String.fromCharCode(55349,56476+Fo),Z(ae,fe,Gr,na,en),Z(Xt,fe,Xe,na,en))}en="";Z(ae,fe,Gr,"k",en);Z(Xt,fe,Xe,"k",en);for(var $h=0;$h<10;$h++){var gf=$h.toString();en=String.fromCharCode(55349,57294+$h),Z(ae,fe,Gr,gf,en),Z(Xt,fe,Xe,gf,en),en=String.fromCharCode(55349,57314+$h),Z(ae,fe,Gr,gf,en),Z(Xt,fe,Xe,gf,en),en=String.fromCharCode(55349,57324+$h),Z(ae,fe,Gr,gf,en),Z(Xt,fe,Xe,gf,en),en=String.fromCharCode(55349,57334+$h),Z(ae,fe,Gr,gf,en),Z(Xt,fe,Xe,gf,en)}var F8="";for(var k5=0;k5<F8.length;k5++){var sb=F8.charAt(k5);Z(ae,fe,Gr,sb,sb),Z(Xt,fe,Xe,sb,sb)}var ab=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],kF=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],lue=function(t,r){var n=t.charCodeAt(0),s=t.charCodeAt(1),a=(n-55296)*1024+(s-56320)+65536,i=r==="math"?0:1;if(119808<=a&&a<120484){var o=Math.floor((a-119808)/26);return[ab[o][2],ab[o][i]]}else if(120782<=a&&a<=120831){var l=Math.floor((a-120782)/10);return[kF[l][2],kF[l][i]]}else{if(a===120485||a===120486)return[ab[0][2],ab[0][i]];if(120486<a&&a<120782)return["",""];throw new nr("Unsupported character: "+t)}},Z_=function(t,r,n){return _s[n][t]&&_s[n][t].replace&&(t=_s[n][t].replace),{value:t,metrics:AC(t,r,n)}},Qc=function(t,r,n,s,a){var i=Z_(t,r,n),o=i.metrics;t=i.value;var l;if(o){var u=o.italic;(n==="text"||s&&s.font==="mathit")&&(u=0),l=new _c(t,o.height,o.depth,u,o.skew,o.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+n+"'")),l=new _c(t,0,0,0,0,0,a);if(s){l.maxFontSize=s.sizeMultiplier,s.style.isTight()&&l.classes.push("mtight");var d=s.getColor();d&&(l.style.color=d)}return l},cue=function(t,r,n,s){return s===void 0&&(s=[]),n.font==="boldsymbol"&&Z_(t,"Main-Bold",r).metrics?Qc(t,"Main-Bold",r,n,s.concat(["mathbf"])):t==="\\"||_s[r][t].font==="main"?Qc(t,"Main-Regular",r,n,s):Qc(t,"AMS-Regular",r,n,s.concat(["amsrm"]))},uue=function(t,r,n,s,a){return a!=="textord"&&Z_(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},due=function(t,r,n){var s=t.mode,a=t.text,i=["mord"],o=s==="math"||s==="text"&&r.font,l=o?r.font:r.fontFamily,u="",d="";if(a.charCodeAt(0)===55349&&([u,d]=lue(a,s)),u.length>0)return Qc(a,u,s,r,i.concat(d));if(l){var f,h;if(l==="boldsymbol"){var g=uue(a,s,r,i,n);f=g.fontName,h=[g.fontClass]}else o?(f=gW[l].fontName,h=[l]):(f=ib(l,r.fontWeight,r.fontShape),h=[l,r.fontWeight,r.fontShape]);if(Z_(a,f,s).metrics)return Qc(a,f,s,r,i.concat(h));if(fW.hasOwnProperty(a)&&f.slice(0,10)==="Typewriter"){for(var x=[],y=0;y<a.length;y++)x.push(Qc(a[y],f,s,r,i.concat(h)));return mW(x)}}if(n==="mathord")return Qc(a,"Math-Italic",s,r,i.concat(["mathnormal"]));if(n==="textord"){var v=_s[s][a]&&_s[s][a].font;if(v==="ams"){var T=ib("amsrm",r.fontWeight,r.fontShape);return Qc(a,T,s,r,i.concat("amsrm",r.fontWeight,r.fontShape))}else if(v==="main"||!v){var k=ib("textrm",r.fontWeight,r.fontShape);return Qc(a,k,s,r,i.concat(r.fontWeight,r.fontShape))}else{var b=ib(v,r.fontWeight,r.fontShape);return Qc(a,b,s,r,i.concat(b,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},fue=(e,t)=>{if(Bf(e.classes)!==Bf(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},hue=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof _c&&n instanceof _c&&fue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e},PC=function(t){for(var r=0,n=0,s=0,a=0;a<t.children.length;a++){var i=t.children[a];i.height>r&&(r=i.height),i.depth>n&&(n=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}t.height=r,t.depth=n,t.maxFontSize=s},tl=function(t,r,n,s){var a=new y2(t,r,n,s);return PC(a),a},hW=(e,t,r,n)=>new y2(e,t,r,n),mue=function(t,r,n){var s=tl([t],[],r);return s.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),s.style.borderBottomWidth=vr(s.height),s.maxFontSize=1,s},gue=function(t,r,n,s){var a=new jC(t,r,n,s);return PC(a),a},mW=function(t){var r=new x2(t);return PC(r),r},pue=function(t,r){return t instanceof x2?tl([],[t],r):t},xue=function(t){if(t.positionType==="individualShift"){for(var r=t.children,n=[r[0]],s=-r[0].shift-r[0].elem.depth,a=s,i=1;i<r.length;i++){var o=-r[i].shift-a-r[i].elem.depth,l=o-(r[i-1].elem.height+r[i-1].elem.depth);a=a+o,n.push({type:"kern",size:l}),n.push(r[i])}return{children:n,depth:s}}var u;if(t.positionType==="top"){for(var d=t.positionData,f=0;f<t.children.length;f++){var h=t.children[f];d-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}u=d}else if(t.positionType==="bottom")u=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")u=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:u}},yue=function(t,r){for(var{children:n,depth:s}=xue(t),a=0,i=0;i<n.length;i++){var o=n[i];if(o.type==="elem"){var l=o.elem;a=Math.max(a,l.maxFontSize,l.height)}}a+=2;var u=tl(["pstrut"],[]);u.style.height=vr(a);for(var d=[],f=s,h=s,g=s,x=0;x<n.length;x++){var y=n[x];if(y.type==="kern")g+=y.size;else{var v=y.elem,T=y.wrapperClasses||[],k=y.wrapperStyle||{},b=tl(T,[u,v],void 0,k);b.style.top=vr(-a-g-v.depth),y.marginLeft&&(b.style.marginLeft=y.marginLeft),y.marginRight&&(b.style.marginRight=y.marginRight),d.push(b),g+=v.height+v.depth}f=Math.min(f,g),h=Math.max(h,g)}var E=tl(["vlist"],d);E.style.height=vr(h);var N;if(f<0){var P=tl([],[]),M=tl(["vlist"],[P]);M.style.height=vr(-f);var j=tl(["vlist-s"],[new _c("")]);N=[tl(["vlist-r"],[E,j]),tl(["vlist-r"],[M])]}else N=[tl(["vlist-r"],[E])];var A=tl(["vlist-t"],N);return N.length===2&&A.classes.push("vlist-t2"),A.height=h,A.depth=-f,A},vue=(e,t)=>{var r=tl(["mspace"],[],t),n=Ks(e,t);return r.style.marginRight=vr(n),r},ib=function(t,r,n){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",s+"-"+a},gW={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},pW={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},wue=function(t,r){var[n,s,a]=pW[t],i=new $f(n),o=new c0([i],{width:vr(s),height:vr(a),style:"width:"+vr(s),viewBox:"0 0 "+1e3*s+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),l=hW(["overlay"],[o],r);return l.height=a,l.style.height=vr(a),l.style.width=vr(s),l},ut={fontMap:gW,makeSymbol:Qc,mathsym:cue,makeSpan:tl,makeSvgSpan:hW,makeLineSpan:mue,makeAnchor:gue,makeFragment:mW,wrapFragment:pue,makeVList:yue,makeOrd:due,makeGlue:vue,staticSvg:wue,svgData:pW,tryCombineChars:hue},qs={number:3,unit:"mu"},zh={number:4,unit:"mu"},Id={number:5,unit:"mu"},bue={mord:{mop:qs,mbin:zh,mrel:Id,minner:qs},mop:{mord:qs,mop:qs,mrel:Id,minner:qs},mbin:{mord:zh,mop:zh,mopen:zh,minner:zh},mrel:{mord:Id,mop:Id,mopen:Id,minner:Id},mopen:{},mclose:{mop:qs,mbin:zh,mrel:Id,minner:qs},mpunct:{mord:qs,mop:qs,mrel:Id,mopen:qs,mclose:qs,mpunct:qs,minner:qs},minner:{mord:qs,mop:qs,mbin:zh,mrel:Id,mopen:qs,mpunct:qs,minner:qs}},_ue={mord:{mop:qs},mop:{mord:qs,mop:qs},mbin:{},mrel:{},mopen:{},mclose:{mop:qs},mpunct:{},minner:{mop:qs}},xW={},A4={},j4={};function Cr(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:s},l=0;l<r.length;++l)xW[r[l]]=o;t&&(a&&(A4[t]=a),i&&(j4[t]=i))}function qm(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;Cr({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var P4=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},Ca=function(t){return t.type==="ordgroup"?t.body:[t]},u0=ut.makeSpan,Sue=["leftmost","mbin","mopen","mrel","mop","mpunct"],kue=["rightmost","mrel","mclose","mpunct"],Tue={display:Vr.DISPLAY,text:Vr.TEXT,script:Vr.SCRIPT,scriptscript:Vr.SCRIPTSCRIPT},Cue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ri=function(t,r,n,s){s===void 0&&(s=[null,null]);for(var a=[],i=0;i<t.length;i++){var o=In(t[i],r);if(o instanceof x2){var l=o.children;a.push(...l)}else a.push(o)}if(ut.tryCombineChars(a),!n)return a;var u=r;if(t.length===1){var d=t[0];d.type==="sizing"?u=r.havingSize(d.size):d.type==="styling"&&(u=r.havingStyle(Tue[d.style]))}var f=u0([s[0]||"leftmost"],[],r),h=u0([s[1]||"rightmost"],[],r),g=n==="root";return TF(a,(x,y)=>{var v=y.classes[0],T=x.classes[0];v==="mbin"&&kue.includes(T)?y.classes[0]="mord":T==="mbin"&&Sue.includes(v)&&(x.classes[0]="mord")},{node:f},h,g),TF(a,(x,y)=>{var v=D8(y),T=D8(x),k=v&&T?x.hasClass("mtight")?_ue[v][T]:bue[v][T]:null;if(k)return ut.makeGlue(k,u)},{node:f},h,g),a},TF=function e(t,r,n,s,a){s&&t.push(s);for(var i=0;i<t.length;i++){var o=t[i],l=yW(o);if(l){e(l.children,r,n,null,a);continue}var u=!o.hasClass("mspace");if(u){var d=r(o,n.node);d&&(n.insertAfter?n.insertAfter(d):(t.unshift(d),i++))}u?n.node=o:a&&o.hasClass("newline")&&(n.node=u0(["leftmost"])),n.insertAfter=(f=>h=>{t.splice(f+1,0,h),i++})(i)}s&&t.pop()},yW=function(t){return t instanceof x2||t instanceof jC||t instanceof y2&&t.hasClass("enclosing")?t:null},Eue=function e(t,r){var n=yW(t);if(n){var s=n.children;if(s.length){if(r==="right")return e(s[s.length-1],"right");if(r==="left")return e(s[0],"left")}}return t},D8=function(t,r){return t?(r&&(t=Eue(t,r)),Cue[t.classes[0]]||null):null},kv=function(t,r){var n=["nulldelimiter"].concat(t.baseSizingClasses());return u0(r.concat(n))},In=function(t,r,n){if(!t)return u0();if(A4[t.type]){var s=A4[t.type](t,r);if(n&&r.size!==n.size){s=u0(r.sizingClasses(n),[s],r);var a=r.sizeMultiplier/n.sizeMultiplier;s.height*=a,s.depth*=a}return s}else throw new nr("Got group of unknown type: '"+t.type+"'")};function ob(e,t){var r=u0(["base"],e,t),n=u0(["strut"]);return n.style.height=vr(r.height+r.depth),r.depth&&(n.style.verticalAlign=vr(-r.depth)),r.children.unshift(n),r}function O8(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var n=ri(e,t,"root"),s;n.length===2&&n[1].hasClass("tag")&&(s=n.pop());for(var a=[],i=[],o=0;o<n.length;o++)if(i.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var l=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,i.push(n[o]),n[o].hasClass("nobreak")&&(l=!0);l||(a.push(ob(i,t)),i=[])}else n[o].hasClass("newline")&&(i.pop(),i.length>0&&(a.push(ob(i,t)),i=[]),a.push(n[o]));i.length>0&&a.push(ob(i,t));var u;r?(u=ob(ri(r,t,!0)),u.classes=["tag"],a.push(u)):s&&a.push(s);var d=u0(["katex-html"],a);if(d.setAttribute("aria-hidden","true"),u){var f=u.children[0];f.style.height=vr(d.height+d.depth),d.depth&&(f.style.verticalAlign=vr(-d.depth))}return d}function vW(e){return new x2(e)}class Ml{constructor(t,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=Bf(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Wu&&this.children[n+1]instanceof Wu){for(var s=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Wu;)s+=this.children[++n].toText();t.appendChild(new Wu(s).toNode())}else t.appendChild(this.children[n].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=Un.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+Un.escape(Bf(this.classes))+'"'),t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class Wu{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Un.escape(this.toText())}toText(){return this.text}}class Nue{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",vr(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+vr(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var rr={MathNode:Ml,TextNode:Wu,SpaceNode:Nue,newDocumentFragment:vW},Sc=function(t,r,n){return _s[r][t]&&_s[r][t].replace&&t.charCodeAt(0)!==55349&&!(fW.hasOwnProperty(t)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(t=_s[r][t].replace),new rr.TextNode(t)},MC=function(t){return t.length===1?t[0]:new rr.MathNode("mrow",t)},FC=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var s=t.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;_s[s][a]&&_s[s][a].replace&&(a=_s[s][a].replace);var i=ut.fontMap[n].fontName;return AC(a,i,s)?ut.fontMap[n].variant:null};function T5(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof Wu&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof Wu&&r.text===","}else return!1}var hl=function(t,r,n){if(t.length===1){var s=xs(t[0],r);return n&&s instanceof Ml&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var a=[],i,o=0;o<t.length;o++){var l=xs(t[o],r);if(l instanceof Ml&&i instanceof Ml){if(l.type==="mtext"&&i.type==="mtext"&&l.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...l.children);continue}else if(l.type==="mn"&&i.type==="mn"){i.children.push(...l.children);continue}else if(T5(l)&&i.type==="mn"){i.children.push(...l.children);continue}else if(l.type==="mn"&&T5(i))l.children=[...i.children,...l.children],a.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(i.type==="mn"||T5(i))){var u=l.children[0];u instanceof Ml&&u.type==="mn"&&(u.children=[...i.children,...u.children],a.pop())}else if(i.type==="mi"&&i.children.length===1){var d=i.children[0];if(d instanceof Wu&&d.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var f=l.children[0];f instanceof Wu&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),a.pop())}}}a.push(l),i=l}return a},zf=function(t,r,n){return MC(hl(t,r,n))},xs=function(t,r){if(!t)return new rr.MathNode("mrow");if(j4[t.type]){var n=j4[t.type](t,r);return n}else throw new nr("Got group of unknown type: '"+t.type+"'")};function CF(e,t,r,n,s){var a=hl(e,r),i;a.length===1&&a[0]instanceof Ml&&["mrow","mtable"].includes(a[0].type)?i=a[0]:i=new rr.MathNode("mrow",a);var o=new rr.MathNode("annotation",[new rr.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var l=new rr.MathNode("semantics",[i,o]),u=new rr.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&u.setAttribute("display","block");var d=s?"katex":"katex-mathml";return ut.makeSpan([d],[u])}var wW=function(t){return new zd({style:t.displayMode?Vr.DISPLAY:Vr.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},bW=function(t,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),t=ut.makeSpan(n,[t])}return t},Aue=function(t,r,n){var s=wW(n),a;if(n.output==="mathml")return CF(t,r,s,n.displayMode,!0);if(n.output==="html"){var i=O8(t,s);a=ut.makeSpan(["katex"],[i])}else{var o=CF(t,r,s,n.displayMode,!1),l=O8(t,s);a=ut.makeSpan(["katex"],[o,l])}return bW(a,n)},jue=function(t,r,n){var s=wW(n),a=O8(t,s),i=ut.makeSpan(["katex"],[a]);return bW(i,n)},Pue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Mue=function(t){var r=new rr.MathNode("mo",[new rr.TextNode(Pue[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Fue={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Due=function(t){return t.type==="ordgroup"?t.body.length:1},Oue=function(t,r){function n(){var o=4e5,l=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var u=t,d=Due(u.base),f,h,g;if(d>5)l==="widehat"||l==="widecheck"?(f=420,o=2364,g=.42,h=l+"4"):(f=312,o=2340,g=.34,h="tilde4");else{var x=[1,1,2,2,3,3][d];l==="widehat"||l==="widecheck"?(o=[0,1062,2364,2364,2364][x],f=[0,239,300,360,420][x],g=[0,.24,.3,.3,.36,.42][x],h=l+x):(o=[0,600,1033,2339,2340][x],f=[0,260,286,306,312][x],g=[0,.26,.286,.3,.306,.34][x],h="tilde"+x)}var y=new $f(h),v=new c0([y],{width:"100%",height:vr(g),viewBox:"0 0 "+o+" "+f,preserveAspectRatio:"none"});return{span:ut.makeSvgSpan([],[v],r),minWidth:0,height:g}}else{var T=[],k=Fue[l],[b,E,N]=k,P=N/1e3,M=b.length,j,A;if(M===1){var F=k[3];j=["hide-tail"],A=[F]}else if(M===2)j=["halfarrow-left","halfarrow-right"],A=["xMinYMin","xMaxYMin"];else if(M===3)j=["brace-left","brace-center","brace-right"],A=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+M+" children.");for(var L=0;L<M;L++){var V=new $f(b[L]),J=new c0([V],{width:"400em",height:vr(P),viewBox:"0 0 "+o+" "+N,preserveAspectRatio:A[L]+" slice"}),ne=ut.makeSvgSpan([j[L]],[J],r);if(M===1)return{span:ne,minWidth:E,height:P};ne.style.height=vr(P),T.push(ne)}return{span:ut.makeSpan(["stretchy"],T,r),minWidth:E,height:P}}}var{span:s,minWidth:a,height:i}=n();return s.height=i,s.style.height=vr(i),a>0&&(s.style.minWidth=vr(a)),s},Rue=function(t,r,n,s,a){var i,o=t.height+t.depth+n+s;if(/fbox|color|angl/.test(r)){if(i=ut.makeSpan(["stretchy",r],[],a),r==="fbox"){var l=a.color&&a.getColor();l&&(i.style.borderColor=l)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new M8({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new M8({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new c0(u,{width:"100%",height:vr(o)});i=ut.makeSvgSpan([],[d],a)}return i.height=o,i.style.height=vr(o),i},d0={encloseSpan:Rue,mathMLnode:Mue,svgSpan:Oue};function wn(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function DC(e){var t=e3(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function e3(e){return e&&(e.type==="atom"||oue.hasOwnProperty(e.type))?e:null}var OC=(e,t)=>{var r,n,s;e&&e.type==="supsub"?(n=wn(e.base,"accent"),r=n.base,e.base=r,s=aue(In(e,t)),e.base=n):(n=wn(e,"accent"),r=n.base);var a=In(r,t.havingCrampedStyle()),i=n.isShifty&&Un.isCharacterBox(r),o=0;if(i){var l=Un.getBaseElem(r),u=In(l,t.havingCrampedStyle());o=vF(u).skew}var d=n.label==="\\c",f=d?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),h;if(n.isStretchy)h=d0.svgSpan(n,t),h=ut.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+vr(2*o)+")",marginLeft:vr(2*o)}:void 0}]},t);else{var g,x;n.label==="\\vec"?(g=ut.staticSvg("vec",t),x=ut.svgData.vec[1]):(g=ut.makeOrd({mode:n.mode,text:n.label},t,"textord"),g=vF(g),g.italic=0,x=g.width,d&&(f+=g.depth)),h=ut.makeSpan(["accent-body"],[g]);var y=n.label==="\\textcircled";y&&(h.classes.push("accent-full"),f=a.height);var v=o;y||(v-=x/2),h.style.left=vr(v),n.label==="\\textcircled"&&(h.style.top=".2em"),h=ut.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-f},{type:"elem",elem:h}]},t)}var T=ut.makeSpan(["mord","accent"],[h],t);return s?(s.children[0]=T,s.height=Math.max(T.height,s.height),s.classes[0]="mord",s):T},_W=(e,t)=>{var r=e.isStretchy?d0.mathMLnode(e.label):new rr.MathNode("mo",[Sc(e.label,e.mode)]),n=new rr.MathNode("mover",[xs(e.base,t),r]);return n.setAttribute("accent","true"),n},Iue=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Cr({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=P4(t[0]),n=!Iue.test(e.funcName),s=!n||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:s,base:r}},htmlBuilder:OC,mathmlBuilder:_W});Cr({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return n==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:OC,mathmlBuilder:_W});Cr({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:s}},htmlBuilder:(e,t)=>{var r=In(e.base,t),n=d0.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,a=ut.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:r}]},t);return ut.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var r=d0.mathMLnode(e.label),n=new rr.MathNode("munder",[xs(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var lb=e=>{var t=new rr.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Cr({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:s}=e;return{type:"xArrow",mode:n.mode,label:s,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,n=t.havingStyle(r.sup()),s=ut.wrapFragment(In(e.body,n,t),t),a=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(a+"-arrow-pad");var i;e.below&&(n=t.havingStyle(r.sub()),i=ut.wrapFragment(In(e.below,n,t),t),i.classes.push(a+"-arrow-pad"));var o=d0.svgSpan(e,t),l=-t.fontMetrics().axisHeight+.5*o.height,u=-t.fontMetrics().axisHeight-.5*o.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(u-=s.depth);var d;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*o.height+.111;d=ut.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:l},{type:"elem",elem:i,shift:f}]},t)}else d=ut.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:l}]},t);return d.children[0].children[0].children[1].classes.push("svg-align"),ut.makeSpan(["mrel","x-arrow"],[d],t)},mathmlBuilder(e,t){var r=d0.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(e.body){var s=lb(xs(e.body,t));if(e.below){var a=lb(xs(e.below,t));n=new rr.MathNode("munderover",[r,a,s])}else n=new rr.MathNode("mover",[r,s])}else if(e.below){var i=lb(xs(e.below,t));n=new rr.MathNode("munder",[r,i])}else n=lb(),n=new rr.MathNode("mover",[r,n]);return n}});var Lue=ut.makeSpan;function SW(e,t){var r=ri(e.body,t,!0);return Lue([e.mclass],r,t)}function kW(e,t){var r,n=hl(e.body,t);return e.mclass==="minner"?r=new rr.MathNode("mpadded",n):e.mclass==="mord"?e.isCharacterBox?(r=n[0],r.type="mi"):r=new rr.MathNode("mi",n):(e.isCharacterBox?(r=n[0],r.type="mo"):r=new rr.MathNode("mo",n),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Cr({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Ca(s),isCharacterBox:Un.isCharacterBox(s)}},htmlBuilder:SW,mathmlBuilder:kW});var t3=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Cr({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:t3(t[0]),body:Ca(t[1]),isCharacterBox:Un.isCharacterBox(t[1])}}});Cr({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:n}=e,s=t[1],a=t[0],i;n!=="\\stackrel"?i=t3(s):i="mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Ca(s)},l={type:"supsub",mode:a.mode,base:o,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:i,body:[l],isCharacterBox:Un.isCharacterBox(l)}},htmlBuilder:SW,mathmlBuilder:kW});Cr({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:t3(t[0]),body:Ca(t[0])}},htmlBuilder(e,t){var r=ri(e.body,t,!0),n=ut.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=hl(e.body,t),n=new rr.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Bue={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},EF=()=>({type:"styling",body:[],mode:"math",style:"display"}),NF=e=>e.type==="textord"&&e.text==="@",$ue=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function zue(e,t,r){var n=Bue[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=r.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},i=r.callFunction("\\Big",[a],[]),o=r.callFunction("\\\\cdright",[t[1]],[]),l={type:"ordgroup",mode:"math",body:[s,i,o]};return r.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Uue(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new nr("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var n=[],s=[n],a=0;a<t.length;a++){for(var i=t[a],o=EF(),l=0;l<i.length;l++)if(!NF(i[l]))o.body.push(i[l]);else{n.push(o),l+=1;var u=DC(i[l]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var f=0;f<2;f++){for(var h=!0,g=l+1;g<i.length;g++){if($ue(i[g],u)){h=!1,l=g;break}if(NF(i[g]))throw new nr("Missing a "+u+" character to complete a CD arrow.",i[g]);d[f].body.push(i[g])}if(h)throw new nr("Missing a "+u+" character to complete a CD arrow.",i[l])}else throw new nr('Expected one of "<>AV=|." after @',i[l]);var x=zue(u,d,e),y={type:"styling",body:[x],mode:"math",style:"display"};n.push(y),o=EF()}a%2===0?n.push(o):n.shift(),n=[],s.push(n)}e.gullet.endGroup(),e.gullet.endGroup();var v=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:v,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}Cr({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=ut.wrapFragment(In(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=vr(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new rr.MathNode("mrow",[xs(e.label,t)]);return r=new rr.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new rr.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Cr({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=ut.wrapFragment(In(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new rr.MathNode("mrow",[xs(e.fragment,t)])}});Cr({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=wn(t[0],"ordgroup"),s=n.body,a="",i=0;i<s.length;i++){var o=wn(s[i],"textord");a+=o.text}var l=parseInt(a),u;if(isNaN(l))throw new nr("\\@char has non-numeric argument "+a);if(l<0||l>=1114111)throw new nr("\\@char with invalid code point "+a);return l<=65535?u=String.fromCharCode(l):(l-=65536,u=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var TW=(e,t)=>{var r=ri(e.body,t.withColor(e.color),!1);return ut.makeFragment(r)},CW=(e,t)=>{var r=hl(e.body,t.withColor(e.color)),n=new rr.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};Cr({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=wn(t[0],"color-token").color,s=t[1];return{type:"color",mode:r.mode,color:n,body:Ca(s)}},htmlBuilder:TW,mathmlBuilder:CW});Cr({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,s=wn(t[0],"color-token").color;r.gullet.macros.set("\\current@color",s);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:s,body:a}},htmlBuilder:TW,mathmlBuilder:CW});Cr({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,s=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:s&&wn(s,"size").value}},htmlBuilder(e,t){var r=ut.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=vr(Ks(e.size,t)))),r},mathmlBuilder(e,t){var r=new rr.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",vr(Ks(e.size,t)))),r}});var R8={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},EW=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new nr("Expected a control sequence",e);return t},Wue=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},NW=(e,t,r,n)=>{var s=e.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,n)};Cr({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(R8[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=R8[n.text]),wn(t.parseFunction(),"internal");throw new nr("Invalid token after macro prefix",n)}});Cr({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new nr("Expected a control sequence",n);for(var a=0,i,o=[[]];t.gullet.future().text!=="{";)if(n=t.gullet.popToken(),n.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),o[a].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new nr('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new nr('Argument number "'+n.text+'" out of order');a++,o.push([])}else{if(n.text==="EOF")throw new nr("Expected a macro definition");o[a].push(n.text)}var{tokens:l}=t.gullet.consumeArg();return i&&l.unshift(i),(r==="\\edef"||r==="\\xdef")&&(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(s,{tokens:l,numArgs:a,delimiters:o},r===R8[r]),{type:"internal",mode:t.mode}}});Cr({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=EW(t.gullet.popToken());t.gullet.consumeSpaces();var s=Wue(t);return NW(t,n,s,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});Cr({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=EW(t.gullet.popToken()),s=t.gullet.popToken(),a=t.gullet.popToken();return NW(t,n,a,r==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var Py=function(t,r,n){var s=_s.math[t]&&_s.math[t].replace,a=AC(s||t,r,n);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return a},RC=function(t,r,n,s){var a=n.havingBaseStyle(r),i=ut.makeSpan(s.concat(a.sizingClasses(n)),[t],n),o=a.sizeMultiplier/n.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},AW=function(t,r,n){var s=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/s.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=vr(a),t.height-=a,t.depth+=a},Hue=function(t,r,n,s,a,i){var o=ut.makeSymbol(t,"Main-Regular",a,s),l=RC(o,r,s,i);return n&&AW(l,s,r),l},Gue=function(t,r,n,s){return ut.makeSymbol(t,"Size"+r+"-Regular",n,s)},jW=function(t,r,n,s,a,i){var o=Gue(t,r,a,s),l=RC(ut.makeSpan(["delimsizing","size"+r],[o],s),Vr.TEXT,s,i);return n&&AW(l,s,Vr.TEXT),l},C5=function(t,r,n){var s;r==="Size1-Regular"?s="delim-size1":s="delim-size4";var a=ut.makeSpan(["delimsizinginner",s],[ut.makeSpan([],[ut.makeSymbol(t,r,n)])]);return{type:"elem",elem:a}},E5=function(t,r,n){var s=Uu["Size4-Regular"][t.charCodeAt(0)]?Uu["Size4-Regular"][t.charCodeAt(0)][4]:Uu["Size1-Regular"][t.charCodeAt(0)][4],a=new $f("inner",Xce(t,Math.round(1e3*r))),i=new c0([a],{width:vr(s),height:vr(r),style:"width:"+vr(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),o=ut.makeSvgSpan([],[i],n);return o.height=r,o.style.height=vr(r),o.style.width=vr(s),{type:"elem",elem:o}},I8=.008,cb={type:"kern",size:-1*I8},Vue=["|","\\lvert","\\rvert","\\vert"],que=["\\|","\\lVert","\\rVert","\\Vert"],PW=function(t,r,n,s,a,i){var o,l,u,d,f="",h=0;o=u=d=t,l=null;var g="Size1-Regular";t==="\\uparrow"?u=d="":t==="\\Uparrow"?u=d="":t==="\\downarrow"?o=u="":t==="\\Downarrow"?o=u="":t==="\\updownarrow"?(o="\\uparrow",u="",d="\\downarrow"):t==="\\Updownarrow"?(o="\\Uparrow",u="",d="\\Downarrow"):Vue.includes(t)?(u="",f="vert",h=333):que.includes(t)?(u="",f="doublevert",h=556):t==="["||t==="\\lbrack"?(o="",u="",d="",g="Size4-Regular",f="lbrack",h=667):t==="]"||t==="\\rbrack"?(o="",u="",d="",g="Size4-Regular",f="rbrack",h=667):t==="\\lfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="lfloor",h=667):t==="\\lceil"||t===""?(o="",u=d="",g="Size4-Regular",f="lceil",h=667):t==="\\rfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="rfloor",h=667):t==="\\rceil"||t===""?(o="",u=d="",g="Size4-Regular",f="rceil",h=667):t==="("||t==="\\lparen"?(o="",u="",d="",g="Size4-Regular",f="lparen",h=875):t===")"||t==="\\rparen"?(o="",u="",d="",g="Size4-Regular",f="rparen",h=875):t==="\\{"||t==="\\lbrace"?(o="",l="",d="",u="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(o="",l="",d="",u="",g="Size4-Regular"):t==="\\lgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\rgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(o="",d="",u="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(o="",d="",u="",g="Size4-Regular");var x=Py(o,g,a),y=x.height+x.depth,v=Py(u,g,a),T=v.height+v.depth,k=Py(d,g,a),b=k.height+k.depth,E=0,N=1;if(l!==null){var P=Py(l,g,a);E=P.height+P.depth,N=2}var M=y+b+E,j=Math.max(0,Math.ceil((r-M)/(N*T))),A=M+j*N*T,F=s.fontMetrics().axisHeight;n&&(F*=s.sizeMultiplier);var L=A/2-F,V=[];if(f.length>0){var J=A-y-b,ne=Math.round(A*1e3),ee=Jce(f,Math.round(J*1e3)),ie=new $f(f,ee),B=(h/1e3).toFixed(3)+"em",Y=(ne/1e3).toFixed(3)+"em",I=new c0([ie],{width:B,height:Y,viewBox:"0 0 "+h+" "+ne}),H=ut.makeSvgSpan([],[I],s);H.height=ne/1e3,H.style.width=B,H.style.height=Y,V.push({type:"elem",elem:H})}else{if(V.push(C5(d,g,a)),V.push(cb),l===null){var W=A-y-b+2*I8;V.push(E5(u,W,s))}else{var R=(A-y-b-E)/2+2*I8;V.push(E5(u,R,s)),V.push(cb),V.push(C5(l,g,a)),V.push(cb),V.push(E5(u,R,s))}V.push(cb),V.push(C5(o,g,a))}var z=s.havingBaseStyle(Vr.TEXT),G=ut.makeVList({positionType:"bottom",positionData:L,children:V},z);return RC(ut.makeSpan(["delimsizing","mult"],[G],z),Vr.TEXT,s,i)},N5=80,A5=.08,j5=function(t,r,n,s,a){var i=Yce(t,s,n),o=new $f(t,i),l=new c0([o],{width:"400em",height:vr(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return ut.makeSvgSpan(["hide-tail"],[l],a)},Kue=function(t,r){var n=r.havingBaseSizing(),s=OW("\\surd",t*n.sizeMultiplier,DW,n),a=n.sizeMultiplier,i=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),o,l=0,u=0,d=0,f;return s.type==="small"?(d=1e3+1e3*i+N5,t<1?a=1:t<1.4&&(a=.7),l=(1+i+A5)/a,u=(1+i)/a,o=j5("sqrtMain",l,d,i,r),o.style.minWidth="0.853em",f=.833/a):s.type==="large"?(d=(1e3+N5)*Ky[s.size],u=(Ky[s.size]+i)/a,l=(Ky[s.size]+i+A5)/a,o=j5("sqrtSize"+s.size,l,d,i,r),o.style.minWidth="1.02em",f=1/a):(l=t+i+A5,u=t+i,d=Math.floor(1e3*t+i)+N5,o=j5("sqrtTall",l,d,i,r),o.style.minWidth="0.742em",f=1.056),o.height=u,o.style.height=vr(l),{span:o,advanceWidth:f,ruleWidth:(r.fontMetrics().sqrtRuleThickness+i)*a}},MW=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Yue=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],FW=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Ky=[0,1.2,1.8,2.4,3],Xue=function(t,r,n,s,a){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),MW.includes(t)||FW.includes(t))return jW(t,r,!1,n,s,a);if(Yue.includes(t))return PW(t,Ky[r],!1,n,s,a);throw new nr("Illegal delimiter: '"+t+"'")},Jue=[{type:"small",style:Vr.SCRIPTSCRIPT},{type:"small",style:Vr.SCRIPT},{type:"small",style:Vr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Que=[{type:"small",style:Vr.SCRIPTSCRIPT},{type:"small",style:Vr.SCRIPT},{type:"small",style:Vr.TEXT},{type:"stack"}],DW=[{type:"small",style:Vr.SCRIPTSCRIPT},{type:"small",style:Vr.SCRIPT},{type:"small",style:Vr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Zue=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},OW=function(t,r,n,s){for(var a=Math.min(2,3-s.style.size),i=a;i<n.length&&n[i].type!=="stack";i++){var o=Py(t,Zue(n[i]),"math"),l=o.height+o.depth;if(n[i].type==="small"){var u=s.havingBaseStyle(n[i].style);l*=u.sizeMultiplier}if(l>r)return n[i]}return n[n.length-1]},RW=function(t,r,n,s,a,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var o;FW.includes(t)?o=Jue:MW.includes(t)?o=DW:o=Que;var l=OW(t,r,o,s);return l.type==="small"?Hue(t,l.style,n,s,a,i):l.type==="large"?jW(t,l.size,n,s,a,i):PW(t,r,n,s,a,i)},ede=function(t,r,n,s,a,i){var o=s.fontMetrics().axisHeight*s.sizeMultiplier,l=901,u=5/s.fontMetrics().ptPerEm,d=Math.max(r-o,n+o),f=Math.max(d/500*l,2*d-u);return RW(t,f,!0,s,a,i)},Zd={sqrtImage:Kue,sizedDelim:Xue,sizeToMaxHeight:Ky,customSizedDelim:RW,leftRightDelim:ede},AF={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},tde=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function r3(e,t){var r=e3(e);if(r&&tde.includes(r.text))return r;throw r?new nr("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new nr("Invalid delimiter type '"+e.type+"'",e)}Cr({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=r3(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:AF[e.funcName].size,mclass:AF[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?ut.makeSpan([e.mclass]):Zd.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(Sc(e.delim,e.mode));var r=new rr.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=vr(Zd.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function jF(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Cr({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new nr("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:r3(t[0],e).text,color:r}}});Cr({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=r3(t[0],e),n=e.parser;++n.leftrightDepth;var s=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=wn(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{jF(e);for(var r=ri(e.body,t,!0,["mopen","mclose"]),n=0,s=0,a=!1,i=0;i<r.length;i++)r[i].isMiddle?a=!0:(n=Math.max(r[i].height,n),s=Math.max(r[i].depth,s));n*=t.sizeMultiplier,s*=t.sizeMultiplier;var o;if(e.left==="."?o=kv(t,["mopen"]):o=Zd.leftRightDelim(e.left,n,s,t,e.mode,["mopen"]),r.unshift(o),a)for(var l=1;l<r.length;l++){var u=r[l],d=u.isMiddle;d&&(r[l]=Zd.leftRightDelim(d.delim,n,s,d.options,e.mode,[]))}var f;if(e.right===".")f=kv(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;f=Zd.leftRightDelim(e.right,n,s,h,e.mode,["mclose"])}return r.push(f),ut.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{jF(e);var r=hl(e.body,t);if(e.left!=="."){var n=new rr.MathNode("mo",[Sc(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(e.right!=="."){var s=new rr.MathNode("mo",[Sc(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),r.push(s)}return MC(r)}});Cr({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=r3(t[0],e);if(!e.parser.leftrightDepth)throw new nr("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=kv(t,[]);else{r=Zd.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?Sc("|","text"):Sc(e.delim,e.mode),n=new rr.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var IC=(e,t)=>{var r=ut.wrapFragment(In(e.body,t),t),n=e.label.slice(1),s=t.sizeMultiplier,a,i=0,o=Un.isCharacterBox(e.body);if(n==="sout")a=ut.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/s,i=-.5*t.fontMetrics().xHeight;else if(n==="phase"){var l=Ks({number:.6,unit:"pt"},t),u=Ks({number:.35,unit:"ex"},t),d=t.havingBaseSizing();s=s/d.sizeMultiplier;var f=r.height+r.depth+l+u;r.style.paddingLeft=vr(f/2+l);var h=Math.floor(1e3*f*s),g=qce(h),x=new c0([new $f("phase",g)],{width:"400em",height:vr(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});a=ut.makeSvgSpan(["hide-tail"],[x],t),a.style.height=vr(f),i=r.depth+l+u}else{/cancel/.test(n)?o||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var y=0,v=0,T=0;/box/.test(n)?(T=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=t.fontMetrics().fboxsep+(n==="colorbox"?0:T),v=y):n==="angl"?(T=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),y=4*T,v=Math.max(0,.25-r.depth)):(y=o?.2:0,v=y),a=d0.encloseSpan(r,n,y,v,t),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=vr(T)):n==="angl"&&T!==.049&&(a.style.borderTopWidth=vr(T),a.style.borderRightWidth=vr(T)),i=r.depth+v,e.backgroundColor&&(a.style.backgroundColor=e.backgroundColor,e.borderColor&&(a.style.borderColor=e.borderColor))}var k;if(e.backgroundColor)k=ut.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:i},{type:"elem",elem:r,shift:0}]},t);else{var b=/cancel|phase/.test(n)?["svg-align"]:[];k=ut.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:i,wrapperClasses:b}]},t)}return/cancel/.test(n)&&(k.height=r.height,k.depth=r.depth),/cancel/.test(n)&&!o?ut.makeSpan(["mord","cancel-lap"],[k],t):ut.makeSpan(["mord"],[k],t)},LC=(e,t)=>{var r=0,n=new rr.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[xs(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};Cr({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=wn(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:n.mode,label:s,backgroundColor:a,body:i}},htmlBuilder:IC,mathmlBuilder:LC});Cr({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=wn(t[0],"color-token").color,i=wn(t[1],"color-token").color,o=t[2];return{type:"enclose",mode:n.mode,label:s,backgroundColor:i,borderColor:a,body:o}},htmlBuilder:IC,mathmlBuilder:LC});Cr({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});Cr({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"enclose",mode:r.mode,label:n,body:s}},htmlBuilder:IC,mathmlBuilder:LC});Cr({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var IW={};function rd(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},l=0;l<r.length;++l)IW[r[l]]=o;a&&(A4[t]=a),i&&(j4[t]=i)}var LW={};function we(e,t){LW[e]=t}function PF(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var n3=e=>{var t=e.parser.settings;if(!t.displayMode)throw new nr("{"+e.envName+"} can be used only in display mode.")};function BC(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function eh(e,t,r){var{hskipBeforeAndAfter:n,addJot:s,cols:a,arraystretch:i,colSeparationType:o,autoTag:l,singleRow:u,emptySingleRow:d,maxNumCols:f,leqno:h}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new nr("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var x=[],y=[x],v=[],T=[],k=l!=null?[]:void 0;function b(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function E(){k&&(e.gullet.macros.get("\\df@tag")?(k.push(e.subparse([new Rl("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):k.push(!!l&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(b(),T.push(PF(e));;){var N=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),N={type:"ordgroup",mode:e.mode,body:N},r&&(N={type:"styling",mode:e.mode,style:r,body:[N]}),x.push(N);var P=e.fetch().text;if(P==="&"){if(f&&x.length===f){if(u||o)throw new nr("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(P==="\\end"){E(),x.length===1&&N.type==="styling"&&N.body[0].body.length===0&&(y.length>1||!d)&&y.pop(),T.length<y.length+1&&T.push([]);break}else if(P==="\\\\"){e.consume();var M=void 0;e.gullet.future().text!==" "&&(M=e.parseSizeGroup(!0)),v.push(M?M.value:null),E(),T.push(PF(e)),x=[],y.push(x),b()}else throw new nr("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:i,body:y,cols:a,rowGaps:v,hskipBeforeAndAfter:n,hLinesBeforeRow:T,colSeparationType:o,tags:k,leqno:h}}function $C(e){return e.slice(0,1)==="d"?"display":"text"}var nd=function(t,r){var n,s,a=t.body.length,i=t.hLinesBeforeRow,o=0,l=new Array(a),u=[],d=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),f=1/r.fontMetrics().ptPerEm,h=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=r.havingStyle(Vr.SCRIPT).sizeMultiplier;h=.2778*(g/r.sizeMultiplier)}var x=t.colSeparationType==="CD"?Ks({number:3,unit:"ex"},r):12*f,y=3*f,v=t.arraystretch*x,T=.7*v,k=.3*v,b=0;function E(Nt){for(var He=0;He<Nt.length;++He)He>0&&(b+=.25),u.push({pos:b,isDashed:Nt[He]})}for(E(i[0]),n=0;n<t.body.length;++n){var N=t.body[n],P=T,M=k;o<N.length&&(o=N.length);var j=new Array(N.length);for(s=0;s<N.length;++s){var A=In(N[s],r);M<A.depth&&(M=A.depth),P<A.height&&(P=A.height),j[s]=A}var F=t.rowGaps[n],L=0;F&&(L=Ks(F,r),L>0&&(L+=k,M<L&&(M=L),L=0)),t.addJot&&(M+=y),j.height=P,j.depth=M,b+=P,j.pos=b,b+=M+L,l[n]=j,E(i[n+1])}var V=b/2+r.fontMetrics().axisHeight,J=t.cols||[],ne=[],ee,ie,B=[];if(t.tags&&t.tags.some(Nt=>Nt))for(n=0;n<a;++n){var Y=l[n],I=Y.pos-V,H=t.tags[n],W=void 0;H===!0?W=ut.makeSpan(["eqn-num"],[],r):H===!1?W=ut.makeSpan([],[],r):W=ut.makeSpan([],ri(H,r,!0),r),W.depth=Y.depth,W.height=Y.height,B.push({type:"elem",elem:W,shift:I})}for(s=0,ie=0;s<o||ie<J.length;++s,++ie){for(var R=J[ie]||{},z=!0;R.type==="separator";){if(z||(ee=ut.makeSpan(["arraycolsep"],[]),ee.style.width=vr(r.fontMetrics().doubleRuleSep),ne.push(ee)),R.separator==="|"||R.separator===":"){var G=R.separator==="|"?"solid":"dashed",Q=ut.makeSpan(["vertical-separator"],[],r);Q.style.height=vr(b),Q.style.borderRightWidth=vr(d),Q.style.borderRightStyle=G,Q.style.margin="0 "+vr(-d/2);var re=b-V;re&&(Q.style.verticalAlign=vr(-re)),ne.push(Q)}else throw new nr("Invalid separator type: "+R.separator);ie++,R=J[ie]||{},z=!1}if(!(s>=o)){var q=void 0;(s>0||t.hskipBeforeAndAfter)&&(q=Un.deflt(R.pregap,h),q!==0&&(ee=ut.makeSpan(["arraycolsep"],[]),ee.style.width=vr(q),ne.push(ee)));var se=[];for(n=0;n<a;++n){var ce=l[n],pe=ce[s];if(pe){var ke=ce.pos-V;pe.depth=ce.depth,pe.height=ce.height,se.push({type:"elem",elem:pe,shift:ke})}}se=ut.makeVList({positionType:"individualShift",children:se},r),se=ut.makeSpan(["col-align-"+(R.align||"c")],[se]),ne.push(se),(s<o-1||t.hskipBeforeAndAfter)&&(q=Un.deflt(R.postgap,h),q!==0&&(ee=ut.makeSpan(["arraycolsep"],[]),ee.style.width=vr(q),ne.push(ee)))}}if(l=ut.makeSpan(["mtable"],ne),u.length>0){for(var le=ut.makeLineSpan("hline",r,d),ye=ut.makeLineSpan("hdashline",r,d),je=[{type:"elem",elem:l,shift:0}];u.length>0;){var Ne=u.pop(),We=Ne.pos-V;Ne.isDashed?je.push({type:"elem",elem:ye,shift:We}):je.push({type:"elem",elem:le,shift:We})}l=ut.makeVList({positionType:"individualShift",children:je},r)}if(B.length===0)return ut.makeSpan(["mord"],[l],r);var $e=ut.makeVList({positionType:"individualShift",children:B},r);return $e=ut.makeSpan(["tag"],[$e],r),ut.makeFragment([l,$e])},rde={c:"center ",l:"left ",r:"right "},sd=function(t,r){for(var n=[],s=new rr.MathNode("mtd",[],["mtr-glue"]),a=new rr.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var o=t.body[i],l=[],u=0;u<o.length;u++)l.push(new rr.MathNode("mtd",[xs(o[u],r)]));t.tags&&t.tags[i]&&(l.unshift(s),l.push(s),t.leqno?l.unshift(a):l.push(a)),n.push(new rr.MathNode("mtr",l))}var d=new rr.MathNode("mtable",n),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);d.setAttribute("rowspacing",vr(f));var h="",g="";if(t.cols&&t.cols.length>0){var x=t.cols,y="",v=!1,T=0,k=x.length;x[0].type==="separator"&&(h+="top ",T=1),x[x.length-1].type==="separator"&&(h+="bottom ",k-=1);for(var b=T;b<k;b++)x[b].type==="align"?(g+=rde[x[b].align],v&&(y+="none "),v=!0):x[b].type==="separator"&&v&&(y+=x[b].separator==="|"?"solid ":"dashed ",v=!1);d.setAttribute("columnalign",g.trim()),/[sd]/.test(y)&&d.setAttribute("columnlines",y.trim())}if(t.colSeparationType==="align"){for(var E=t.cols||[],N="",P=1;P<E.length;P++)N+=P%2?"0em ":"1em ";d.setAttribute("columnspacing",N.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var M="",j=t.hLinesBeforeRow;h+=j[0].length>0?"left ":"",h+=j[j.length-1].length>0?"right ":"";for(var A=1;A<j.length-1;A++)M+=j[A].length===0?"none ":j[A][0]?"dashed ":"solid ";return/[sd]/.test(M)&&d.setAttribute("rowlines",M.trim()),h!==""&&(d=new rr.MathNode("menclose",[d]),d.setAttribute("notation",h.trim())),t.arraystretch&&t.arraystretch<1&&(d=new rr.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},BW=function(t,r){t.envName.indexOf("ed")===-1&&n3(t);var n=[],s=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",i=eh(t.parser,{cols:n,addJot:!0,autoTag:a?void 0:BC(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),o,l=0,u={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var d="",f=0;f<r[0].body.length;f++){var h=wn(r[0].body[f],"textord");d+=h.text}o=Number(d),l=o*2}var g=!l;i.body.forEach(function(T){for(var k=1;k<T.length;k+=2){var b=wn(T[k],"styling"),E=wn(b.body[0],"ordgroup");E.body.unshift(u)}if(g)l<T.length&&(l=T.length);else{var N=T.length/2;if(o<N)throw new nr("Too many math in a row: "+("expected "+o+", but got "+N),T[0])}});for(var x=0;x<l;++x){var y="r",v=0;x%2===1?y="l":x>0&&g&&(v=1),n[x]={type:"align",align:y,pregap:v,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};rd({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=e3(t[0]),n=r?[t[0]]:wn(t[0],"ordgroup").body,s=n.map(function(i){var o=DC(i),l=o.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new nr("Unknown column alignment: "+l,i)}),a={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return eh(e.parser,a,$C(e.envName))},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),r=s.fetch().text,"lcr".indexOf(r)===-1)throw new nr("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),n.cols=[{type:"align",align:r}]}}var a=eh(e.parser,n,$C(e.envName)),i=Math.max(0,...a.body.map(o=>o.length));return a.cols=new Array(i).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=eh(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=e3(t[0]),n=r?[t[0]]:wn(t[0],"ordgroup").body,s=n.map(function(i){var o=DC(i),l=o.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new nr("Unknown column alignment: "+l,i)});if(s.length>1)throw new nr("{subarray} can contain only one column");var a={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=eh(e.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new nr("{subarray} can contain only one column");return a},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=eh(e.parser,t,$C(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:BW,htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&n3(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:BC(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return eh(e.parser,t,"display")},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:BW,htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){n3(e);var t={autoTag:BC(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return eh(e.parser,t,"display")},htmlBuilder:nd,mathmlBuilder:sd});rd({type:"array",names:["CD"],props:{numArgs:0},handler(e){return n3(e),Uue(e.parser)},htmlBuilder:nd,mathmlBuilder:sd});we("\\nonumber","\\gdef\\@eqnsw{0}");we("\\notag","\\nonumber");Cr({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new nr(e.funcName+" valid only within array environment")}});var MF=IW;Cr({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];if(s.type!=="ordgroup")throw new nr("Invalid environment name",s);for(var a="",i=0;i<s.body.length;++i)a+=wn(s.body[i],"textord").text;if(n==="\\begin"){if(!MF.hasOwnProperty(a))throw new nr("No such environment: "+a,s);var o=MF[a],{args:l,optArgs:u}=r.parseArguments("\\begin{"+a+"}",o),d={mode:r.mode,envName:a,parser:r},f=o.handler(d,l,u);r.expect("\\end",!1);var h=r.nextToken,g=wn(r.parseFunction(),"environment");if(g.name!==a)throw new nr("Mismatch: \\begin{"+a+"} matched by \\end{"+g.name+"}",h);return f}return{type:"environment",mode:r.mode,name:a,nameGroup:s}}});var $W=(e,t)=>{var r=e.font,n=t.withFont(r);return In(e.body,n)},zW=(e,t)=>{var r=e.font,n=t.withFont(r);return xs(e.body,n)},FF={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Cr({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=P4(t[0]),a=n;return a in FF&&(a=FF[a]),{type:"font",mode:r.mode,font:a.slice(1),body:s}},htmlBuilder:$W,mathmlBuilder:zW});Cr({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],s=Un.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:t3(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:s}}});Cr({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:s}=e,{mode:a}=r,i=r.parseExpression(!0,s),o="math"+n.slice(1);return{type:"font",mode:a,font:o,body:{type:"ordgroup",mode:r.mode,body:i}}},htmlBuilder:$W,mathmlBuilder:zW});var UW=(e,t)=>{var r=t;return e==="display"?r=r.id>=Vr.SCRIPT.id?r.text():Vr.DISPLAY:e==="text"&&r.size===Vr.DISPLAY.size?r=Vr.TEXT:e==="script"?r=Vr.SCRIPT:e==="scriptscript"&&(r=Vr.SCRIPTSCRIPT),r},zC=(e,t)=>{var r=UW(e.size,t.style),n=r.fracNum(),s=r.fracDen(),a;a=t.havingStyle(n);var i=In(e.numer,a,t);if(e.continued){var o=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;i.height=i.height<o?o:i.height,i.depth=i.depth<l?l:i.depth}a=t.havingStyle(s);var u=In(e.denom,a,t),d,f,h;e.hasBarLine?(e.barSize?(f=Ks(e.barSize,t),d=ut.makeLineSpan("frac-line",t,f)):d=ut.makeLineSpan("frac-line",t),f=d.height,h=d.height):(d=null,f=0,h=t.fontMetrics().defaultRuleThickness);var g,x,y;r.size===Vr.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?x=3*h:x=7*h,y=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,x=h):(g=t.fontMetrics().num3,x=3*h),y=t.fontMetrics().denom2);var v;if(d){var k=t.fontMetrics().axisHeight;g-i.depth-(k+.5*f)<x&&(g+=x-(g-i.depth-(k+.5*f))),k-.5*f-(u.height-y)<x&&(y+=x-(k-.5*f-(u.height-y)));var b=-(k-.5*f);v=ut.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:d,shift:b},{type:"elem",elem:i,shift:-g}]},t)}else{var T=g-i.depth-(u.height-y);T<x&&(g+=.5*(x-T),y+=.5*(x-T)),v=ut.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:i,shift:-g}]},t)}a=t.havingStyle(r),v.height*=a.sizeMultiplier/t.sizeMultiplier,v.depth*=a.sizeMultiplier/t.sizeMultiplier;var E;r.size===Vr.DISPLAY.size?E=t.fontMetrics().delim1:r.size===Vr.SCRIPTSCRIPT.size?E=t.havingStyle(Vr.SCRIPT).fontMetrics().delim2:E=t.fontMetrics().delim2;var N,P;return e.leftDelim==null?N=kv(t,["mopen"]):N=Zd.customSizedDelim(e.leftDelim,E,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?P=ut.makeSpan([]):e.rightDelim==null?P=kv(t,["mclose"]):P=Zd.customSizedDelim(e.rightDelim,E,!0,t.havingStyle(r),e.mode,["mclose"]),ut.makeSpan(["mord"].concat(a.sizingClasses(t)),[N,ut.makeSpan(["mfrac"],[v]),P],t)},UC=(e,t)=>{var r=new rr.MathNode("mfrac",[xs(e.numer,t),xs(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var n=Ks(e.barSize,t);r.setAttribute("linethickness",vr(n))}var s=UW(e.size,t.style);if(s.size!==t.style.size){r=new rr.MathNode("mstyle",[r]);var a=s.size===Vr.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var o=new rr.MathNode("mo",[new rr.TextNode(e.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),i.push(o)}if(i.push(r),e.rightDelim!=null){var l=new rr.MathNode("mo",[new rr.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),i.push(l)}return MC(i)}return r};Cr({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1],i,o=null,l=null,u="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",l=")";break;case"\\\\bracefrac":i=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":i=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:a,hasBarLine:i,leftDelim:o,rightDelim:l,size:u,barSize:null}},htmlBuilder:zC,mathmlBuilder:UC});Cr({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:s,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Cr({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:n}=e,s;switch(r){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:n}}});var DF=["display","text","script","scriptscript"],OF=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};Cr({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,n=t[4],s=t[5],a=P4(t[0]),i=a.type==="atom"&&a.family==="open"?OF(a.text):null,o=P4(t[1]),l=o.type==="atom"&&o.family==="close"?OF(o.text):null,u=wn(t[2],"size"),d,f=null;u.isBlank?d=!0:(f=u.value,d=f.number>0);var h="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var x=wn(g.body[0],"textord");h=DF[Number(x.text)]}}else g=wn(g,"textord"),h=DF[Number(g.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:d,barSize:f,leftDelim:i,rightDelim:l,size:h}},htmlBuilder:zC,mathmlBuilder:UC});Cr({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:s}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:wn(t[0],"size").value,token:s}}});Cr({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=Mce(wn(t[1],"infix").size),i=t[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:s,denom:i,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:zC,mathmlBuilder:UC});var WW=(e,t)=>{var r=t.style,n,s;e.type==="supsub"?(n=e.sup?In(e.sup,t.havingStyle(r.sup()),t):In(e.sub,t.havingStyle(r.sub()),t),s=wn(e.base,"horizBrace")):s=wn(e,"horizBrace");var a=In(s.base,t.havingBaseStyle(Vr.DISPLAY)),i=d0.svgSpan(s,t),o;if(s.isOver?(o=ut.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:i}]},t),o.children[0].children[0].children[1].classes.push("svg-align")):(o=ut.makeVList({positionType:"bottom",positionData:a.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:a}]},t),o.children[0].children[0].children[0].classes.push("svg-align")),n){var l=ut.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t);s.isOver?o=ut.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):o=ut.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return ut.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t)},nde=(e,t)=>{var r=d0.mathMLnode(e.label);return new rr.MathNode(e.isOver?"mover":"munder",[xs(e.base,t),r])};Cr({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:WW,mathmlBuilder:nde});Cr({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],s=wn(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:r.mode,href:s,body:Ca(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=ri(e.body,t,!1);return ut.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=zf(e.body,t);return r instanceof Ml||(r=new Ml("mrow",[r])),r.setAttribute("href",e.href),r}});Cr({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=wn(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var s=[],a=0;a<n.length;a++){var i=n[a];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var o={type:"text",mode:r.mode,font:"\\texttt",body:s};return{type:"href",mode:r.mode,href:n,body:Ca(o)}}});Cr({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:Ca(t[0])}},htmlBuilder(e,t){var r=ri(e.body,t,!1);return ut.makeFragment(r)},mathmlBuilder(e,t){return new rr.MathNode("mrow",hl(e.body,t))}});Cr({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,token:s}=e,a=wn(t[0],"raw").string,i=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,l={};switch(n){case"\\htmlClass":l.class=a,o={command:"\\htmlClass",class:a};break;case"\\htmlId":l.id=a,o={command:"\\htmlId",id:a};break;case"\\htmlStyle":l.style=a,o={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var u=a.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length!==2)throw new nr("Error parsing key-value for \\htmlData");l["data-"+f[0].trim()]=f[1].trim()}o={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(o)?{type:"html",mode:r.mode,attributes:l,body:Ca(i)}:r.formatUnsupportedCmd(n)},htmlBuilder:(e,t)=>{var r=ri(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var s=ut.makeSpan(n,r,t);for(var a in e.attributes)a!=="class"&&e.attributes.hasOwnProperty(a)&&s.setAttribute(a,e.attributes[a]);return s},mathmlBuilder:(e,t)=>zf(e.body,t)});Cr({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:Ca(t[0]),mathml:Ca(t[1])}},htmlBuilder:(e,t)=>{var r=ri(e.html,t,!1);return ut.makeFragment(r)},mathmlBuilder:(e,t)=>zf(e.mathml,t)});var P5=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new nr("Invalid size: '"+t+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!lW(n))throw new nr("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Cr({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,s={number:0,unit:"em"},a={number:.9,unit:"em"},i={number:0,unit:"em"},o="";if(r[0])for(var l=wn(r[0],"raw").string,u=l.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length===2){var h=f[1].trim();switch(f[0].trim()){case"alt":o=h;break;case"width":s=P5(h);break;case"height":a=P5(h);break;case"totalheight":i=P5(h);break;default:throw new nr("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=wn(t[0],"url").url;return o===""&&(o=g,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:n.mode,alt:o,width:s,height:a,totalheight:i,src:g}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=Ks(e.height,t),n=0;e.totalheight.number>0&&(n=Ks(e.totalheight,t)-r);var s=0;e.width.number>0&&(s=Ks(e.width,t));var a={height:vr(r+n)};s>0&&(a.width=vr(s)),n>0&&(a.verticalAlign=vr(-n));var i=new nue(e.src,e.alt,a);return i.height=r,i.depth=n,i},mathmlBuilder:(e,t)=>{var r=new rr.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=Ks(e.height,t),s=0;if(e.totalheight.number>0&&(s=Ks(e.totalheight,t)-n,r.setAttribute("valign",vr(-s))),r.setAttribute("height",vr(n+s)),e.width.number>0){var a=Ks(e.width,t);r.setAttribute("width",vr(a))}return r.setAttribute("src",e.src),r}});Cr({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=wn(t[0],"size");if(r.settings.strict){var a=n[1]==="m",i=s.value.unit==="mu";a?(i||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+s.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):i&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:s.value}},htmlBuilder(e,t){return ut.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=Ks(e.dimension,t);return new rr.SpaceNode(r)}});Cr({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:s}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=ut.makeSpan([],[In(e.body,t)]),r=ut.makeSpan(["inner"],[r],t)):r=ut.makeSpan(["inner"],[In(e.body,t)]);var n=ut.makeSpan(["fix"],[]),s=ut.makeSpan([e.alignment],[r,n],t),a=ut.makeSpan(["strut"]);return a.style.height=vr(s.height+s.depth),s.depth&&(a.style.verticalAlign=vr(-s.depth)),s.children.unshift(a),s=ut.makeSpan(["thinbox"],[s],t),ut.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var r=new rr.MathNode("mpadded",[xs(e.body,t)]);if(e.alignment!=="rlap"){var n=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});Cr({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,s=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",i=n.parseExpression(!1,a);return n.expect(a),n.switchMode(s),{type:"styling",mode:n.mode,style:"text",body:i}}});Cr({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new nr("Mismatched "+e.funcName)}});var RF=(e,t)=>{switch(t.style.size){case Vr.DISPLAY.size:return e.display;case Vr.TEXT.size:return e.text;case Vr.SCRIPT.size:return e.script;case Vr.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Cr({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:Ca(t[0]),text:Ca(t[1]),script:Ca(t[2]),scriptscript:Ca(t[3])}},htmlBuilder:(e,t)=>{var r=RF(e,t),n=ri(r,t,!1);return ut.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=RF(e,t);return zf(r,t)}});var HW=(e,t,r,n,s,a,i)=>{e=ut.makeSpan([],[e]);var o=r&&Un.isCharacterBox(r),l,u;if(t){var d=In(t,n.havingStyle(s.sup()),n);u={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var f=In(r,n.havingStyle(s.sub()),n);l={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-f.height)}}var h;if(u&&l){var g=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+i;h=ut.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:vr(-a)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:vr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var x=e.height-i;h=ut.makeVList({positionType:"top",positionData:x,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:vr(-a)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},n)}else if(u){var y=e.depth+i;h=ut.makeVList({positionType:"bottom",positionData:y,children:[{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:vr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return e;var v=[h];if(l&&a!==0&&!o){var T=ut.makeSpan(["mspace"],[],n);T.style.marginRight=vr(a),v.unshift(T)}return ut.makeSpan(["mop","op-limits"],v,n)},GW=["\\smallint"],y1=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=wn(e.base,"op"),s=!0):a=wn(e,"op");var i=t.style,o=!1;i.size===Vr.DISPLAY.size&&a.symbol&&!GW.includes(a.name)&&(o=!0);var l;if(a.symbol){var u=o?"Size2-Regular":"Size1-Regular",d="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(d=a.name.slice(1),a.name=d==="oiint"?"\\iint":"\\iiint"),l=ut.makeSymbol(a.name,u,"math",t,["mop","op-symbol",o?"large-op":"small-op"]),d.length>0){var f=l.italic,h=ut.staticSvg(d+"Size"+(o?"2":"1"),t);l=ut.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:h,shift:o?.08:0}]},t),a.name="\\"+d,l.classes.unshift("mop"),l.italic=f}}else if(a.body){var g=ri(a.body,t,!0);g.length===1&&g[0]instanceof _c?(l=g[0],l.classes[0]="mop"):l=ut.makeSpan(["mop"],g,t)}else{for(var x=[],y=1;y<a.name.length;y++)x.push(ut.mathsym(a.name[y],a.mode,t));l=ut.makeSpan(["mop"],x,t)}var v=0,T=0;return(l instanceof _c||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(v=(l.height-l.depth)/2-t.fontMetrics().axisHeight,T=l.italic),s?HW(l,r,n,t,i,T,v):(v&&(l.style.position="relative",l.style.top=vr(v)),l)},v2=(e,t)=>{var r;if(e.symbol)r=new Ml("mo",[Sc(e.name,e.mode)]),GW.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Ml("mo",hl(e.body,t));else{r=new Ml("mi",[new Wu(e.name.slice(1))]);var n=new Ml("mo",[Sc("","text")]);e.parentIsSupSub?r=new Ml("mrow",[r,n]):r=vW([r,n])}return r},sde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Cr({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=n;return s.length===1&&(s=sde[s]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:y1,mathmlBuilder:v2});Cr({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Ca(n)}},htmlBuilder:y1,mathmlBuilder:v2});var ade={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Cr({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:y1,mathmlBuilder:v2});Cr({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:y1,mathmlBuilder:v2});Cr({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return n.length===1&&(n=ade[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:y1,mathmlBuilder:v2});var VW=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=wn(e.base,"operatorname"),s=!0):a=wn(e,"operatorname");var i;if(a.body.length>0){for(var o=a.body.map(f=>{var h=f.text;return typeof h=="string"?{type:"textord",mode:f.mode,text:h}:f}),l=ri(o,t.withFont("mathrm"),!0),u=0;u<l.length;u++){var d=l[u];d instanceof _c&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=ut.makeSpan(["mop"],l,t)}else i=ut.makeSpan(["mop"],[],t);return s?HW(i,r,n,t,t.style,0,0):i},ide=(e,t)=>{for(var r=hl(e.body,t.withFont("mathrm")),n=!0,s=0;s<r.length;s++){var a=r[s];if(!(a instanceof rr.SpaceNode))if(a instanceof rr.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=a.children[0];a.children.length===1&&i instanceof rr.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=r.map(d=>d.toText()).join("");r=[new rr.TextNode(o)]}var l=new rr.MathNode("mi",r);l.setAttribute("mathvariant","normal");var u=new rr.MathNode("mo",[Sc("","text")]);return e.parentIsSupSub?new rr.MathNode("mrow",[l,u]):rr.newDocumentFragment([l,u])};Cr({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"operatorname",mode:r.mode,body:Ca(s),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:VW,mathmlBuilder:ide});we("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");qm({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?ut.makeFragment(ri(e.body,t,!1)):ut.makeSpan(["mord"],ri(e.body,t,!0),t)},mathmlBuilder(e,t){return zf(e.body,t,!0)}});Cr({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=In(e.body,t.havingCrampedStyle()),n=ut.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,a=ut.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n},{type:"kern",size:s}]},t);return ut.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var r=new rr.MathNode("mo",[new rr.TextNode("")]);r.setAttribute("stretchy","true");var n=new rr.MathNode("mover",[xs(e.body,t),r]);return n.setAttribute("accent","true"),n}});Cr({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:Ca(n)}},htmlBuilder:(e,t)=>{var r=ri(e.body,t.withPhantom(),!1);return ut.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=hl(e.body,t);return new rr.MathNode("mphantom",r)}});Cr({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=ut.makeSpan([],[In(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=ut.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),ut.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=hl(Ca(e.body),t),n=new rr.MathNode("mphantom",r),s=new rr.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});Cr({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=ut.makeSpan(["inner"],[In(e.body,t.withPhantom())]),n=ut.makeSpan(["fix"],[]);return ut.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=hl(Ca(e.body),t),n=new rr.MathNode("mphantom",r),s=new rr.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});Cr({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=wn(t[0],"size").value,s=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:s}},htmlBuilder(e,t){var r=In(e.body,t),n=Ks(e.dy,t);return ut.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new rr.MathNode("mpadded",[xs(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}});Cr({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Cr({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,s=r[0],a=wn(t[0],"size"),i=wn(t[1],"size");return{type:"rule",mode:n.mode,shift:s&&wn(s,"size").value,width:a.value,height:i.value}},htmlBuilder(e,t){var r=ut.makeSpan(["mord","rule"],[],t),n=Ks(e.width,t),s=Ks(e.height,t),a=e.shift?Ks(e.shift,t):0;return r.style.borderRightWidth=vr(n),r.style.borderTopWidth=vr(s),r.style.bottom=vr(a),r.width=n,r.height=s+a,r.depth=-a,r.maxFontSize=s*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=Ks(e.width,t),n=Ks(e.height,t),s=e.shift?Ks(e.shift,t):0,a=t.color&&t.getColor()||"black",i=new rr.MathNode("mspace");i.setAttribute("mathbackground",a),i.setAttribute("width",vr(r)),i.setAttribute("height",vr(n));var o=new rr.MathNode("mpadded",[i]);return s>=0?o.setAttribute("height",vr(s)):(o.setAttribute("height",vr(s)),o.setAttribute("depth",vr(-s))),o.setAttribute("voffset",vr(s)),o}});function qW(e,t,r){for(var n=ri(e,t,!1),s=t.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var i=n[a].classes.indexOf("sizing");i<0?Array.prototype.push.apply(n[a].classes,t.sizingClasses(r)):n[a].classes[i+1]==="reset-size"+t.size&&(n[a].classes[i+1]="reset-size"+r.size),n[a].height*=s,n[a].depth*=s}return ut.makeFragment(n)}var IF=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],ode=(e,t)=>{var r=t.havingSize(e.size);return qW(e.body,r,t)};Cr({type:"sizing",names:IF,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!1,r);return{type:"sizing",mode:s.mode,size:IF.indexOf(n)+1,body:a}},htmlBuilder:ode,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=hl(e.body,r),s=new rr.MathNode("mstyle",n);return s.setAttribute("mathsize",vr(r.sizeMultiplier)),s}});Cr({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,s=!1,a=!1,i=r[0]&&wn(r[0],"ordgroup");if(i)for(var o="",l=0;l<i.body.length;++l){var u=i.body[l];if(o=u.text,o==="t")s=!0;else if(o==="b")a=!0;else{s=!1,a=!1;break}}else s=!0,a=!0;var d=t[0];return{type:"smash",mode:n.mode,body:d,smashHeight:s,smashDepth:a}},htmlBuilder:(e,t)=>{var r=ut.makeSpan([],[In(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].depth=0;var a=ut.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return ut.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var r=new rr.MathNode("mpadded",[xs(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});Cr({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,s=r[0],a=t[0];return{type:"sqrt",mode:n.mode,body:a,index:s}},htmlBuilder(e,t){var r=In(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=ut.wrapFragment(r,t);var n=t.fontMetrics(),s=n.defaultRuleThickness,a=s;t.style.id<Vr.TEXT.id&&(a=t.fontMetrics().xHeight);var i=s+a/4,o=r.height+r.depth+i+s,{span:l,ruleWidth:u,advanceWidth:d}=Zd.sqrtImage(o,t),f=l.height-u;f>r.height+r.depth+i&&(i=(i+f-r.height-r.depth)/2);var h=l.height-r.height-i-u;r.style.paddingLeft=vr(d);var g=ut.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+h)},{type:"elem",elem:l},{type:"kern",size:u}]},t);if(e.index){var x=t.havingStyle(Vr.SCRIPTSCRIPT),y=In(e.index,x,t),v=.6*(g.height-g.depth),T=ut.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:y}]},t),k=ut.makeSpan(["root"],[T]);return ut.makeSpan(["mord","sqrt"],[k,g],t)}else return ut.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new rr.MathNode("mroot",[xs(r,t),xs(n,t)]):new rr.MathNode("msqrt",[xs(r,t)])}});var LF={display:Vr.DISPLAY,text:Vr.TEXT,script:Vr.SCRIPT,scriptscript:Vr.SCRIPTSCRIPT};Cr({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!0,r),i=n.slice(1,n.length-5);return{type:"styling",mode:s.mode,style:i,body:a}},htmlBuilder(e,t){var r=LF[e.style],n=t.havingStyle(r).withFont("");return qW(e.body,n,t)},mathmlBuilder(e,t){var r=LF[e.style],n=t.havingStyle(r),s=hl(e.body,n),a=new rr.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=i[e.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});var lde=function(t,r){var n=t.base;if(n)if(n.type==="op"){var s=n.limits&&(r.style.size===Vr.DISPLAY.size||n.alwaysHandleSupSub);return s?y1:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===Vr.DISPLAY.size||n.limits);return a?VW:null}else{if(n.type==="accent")return Un.isCharacterBox(n.base)?OC:null;if(n.type==="horizBrace"){var i=!t.sub;return i===n.isOver?WW:null}else return null}else return null};qm({type:"supsub",htmlBuilder(e,t){var r=lde(e,t);if(r)return r(e,t);var{base:n,sup:s,sub:a}=e,i=In(n,t),o,l,u=t.fontMetrics(),d=0,f=0,h=n&&Un.isCharacterBox(n);if(s){var g=t.havingStyle(t.style.sup());o=In(s,g,t),h||(d=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(a){var x=t.havingStyle(t.style.sub());l=In(a,x,t),h||(f=i.depth+x.fontMetrics().subDrop*x.sizeMultiplier/t.sizeMultiplier)}var y;t.style===Vr.DISPLAY?y=u.sup1:t.style.cramped?y=u.sup3:y=u.sup2;var v=t.sizeMultiplier,T=vr(.5/u.ptPerEm/v),k=null;if(l){var b=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof _c||b)&&(k=vr(-i.italic))}var E;if(o&&l){d=Math.max(d,y,o.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var N=u.defaultRuleThickness,P=4*N;if(d-o.depth-(l.height-f)<P){f=P-(d-o.depth)+l.height;var M=.8*u.xHeight-(d-o.depth);M>0&&(d+=M,f-=M)}var j=[{type:"elem",elem:l,shift:f,marginRight:T,marginLeft:k},{type:"elem",elem:o,shift:-d,marginRight:T}];E=ut.makeVList({positionType:"individualShift",children:j},t)}else if(l){f=Math.max(f,u.sub1,l.height-.8*u.xHeight);var A=[{type:"elem",elem:l,marginLeft:k,marginRight:T}];E=ut.makeVList({positionType:"shift",positionData:f,children:A},t)}else if(o)d=Math.max(d,y,o.depth+.25*u.xHeight),E=ut.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:T}]},t);else throw new Error("supsub must have either sup or sub.");var F=D8(i,"right")||"mord";return ut.makeSpan([F],[i,ut.makeSpan(["msupsub"],[E])],t)},mathmlBuilder(e,t){var r=!1,n,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(r=!0,n=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var a=[xs(e.base,t)];e.sub&&a.push(xs(e.sub,t)),e.sup&&a.push(xs(e.sup,t));var i;if(r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===Vr.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===Vr.DISPLAY||u.limits)?i="munderover":i="msubsup"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===Vr.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===Vr.DISPLAY)?i="munder":i="msub"}else{var o=e.base;o&&o.type==="op"&&o.limits&&(t.style===Vr.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||t.style===Vr.DISPLAY)?i="mover":i="msup"}return new rr.MathNode(i,a)}});qm({type:"atom",htmlBuilder(e,t){return ut.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new rr.MathNode("mo",[Sc(e.text,e.mode)]);if(e.family==="bin"){var n=FC(e,t);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var KW={mi:"italic",mn:"normal",mtext:"normal"};qm({type:"mathord",htmlBuilder(e,t){return ut.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new rr.MathNode("mi",[Sc(e.text,e.mode,t)]),n=FC(e,t)||"italic";return n!==KW[r.type]&&r.setAttribute("mathvariant",n),r}});qm({type:"textord",htmlBuilder(e,t){return ut.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=Sc(e.text,e.mode,t),n=FC(e,t)||"normal",s;return e.mode==="text"?s=new rr.MathNode("mtext",[r]):/[0-9]/.test(e.text)?s=new rr.MathNode("mn",[r]):e.text==="\\prime"?s=new rr.MathNode("mo",[r]):s=new rr.MathNode("mi",[r]),n!==KW[s.type]&&s.setAttribute("mathvariant",n),s}});var M5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},F5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};qm({type:"spacing",htmlBuilder(e,t){if(F5.hasOwnProperty(e.text)){var r=F5[e.text].className||"";if(e.mode==="text"){var n=ut.makeOrd(e,t,"textord");return n.classes.push(r),n}else return ut.makeSpan(["mspace",r],[ut.mathsym(e.text,e.mode,t)],t)}else{if(M5.hasOwnProperty(e.text))return ut.makeSpan(["mspace",M5[e.text]],[],t);throw new nr('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(F5.hasOwnProperty(e.text))r=new rr.MathNode("mtext",[new rr.TextNode("")]);else{if(M5.hasOwnProperty(e.text))return new rr.MathNode("mspace");throw new nr('Unknown type of space "'+e.text+'"')}return r}});var BF=()=>{var e=new rr.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};qm({type:"tag",mathmlBuilder(e,t){var r=new rr.MathNode("mtable",[new rr.MathNode("mtr",[BF(),new rr.MathNode("mtd",[zf(e.body,t)]),BF(),new rr.MathNode("mtd",[zf(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var $F={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},zF={"\\textbf":"textbf","\\textmd":"textmd"},cde={"\\textit":"textit","\\textup":"textup"},UF=(e,t)=>{var r=e.font;if(r){if($F[r])return t.withTextFontFamily($F[r]);if(zF[r])return t.withTextFontWeight(zF[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(cde[r])};Cr({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"text",mode:r.mode,body:Ca(s),font:n}},htmlBuilder(e,t){var r=UF(e,t),n=ri(e.body,r,!0);return ut.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=UF(e,t);return zf(e.body,r)}});Cr({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=In(e.body,t),n=ut.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,a=ut.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:s},{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r}]},t);return ut.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var r=new rr.MathNode("mo",[new rr.TextNode("")]);r.setAttribute("stretchy","true");var n=new rr.MathNode("munder",[xs(e.body,t),r]);return n.setAttribute("accentunder","true"),n}});Cr({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=In(e.body,t),n=t.fontMetrics().axisHeight,s=.5*(r.height-n-(r.depth+n));return ut.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new rr.MathNode("mpadded",[xs(e.body,t)],["vcenter"])}});Cr({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new nr("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=WF(e),n=[],s=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var i=r[a];i==="~"&&(i="\\textasciitilde"),n.push(ut.makeSymbol(i,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return ut.makeSpan(["mord","text"].concat(s.sizingClasses(t)),ut.tryCombineChars(n),s)},mathmlBuilder(e,t){var r=new rr.TextNode(WF(e)),n=new rr.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var WF=e=>e.body.replace(/ /g,e.star?"":""),Cf=xW,YW=`[ \r
	]`,ude="\\\\[a-zA-Z@]+",dde="\\\\[^\uD800-\uDFFF]",fde="("+ude+")"+YW+"*",hde=`\\\\(
|[ \r	]+
?)[ \r	]*`,L8="[-]",mde=new RegExp(L8+"+$"),gde="("+YW+"+)|"+(hde+"|")+"([!-\\[\\]---]"+(L8+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(L8+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+fde)+("|"+dde+")");class HF{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(gde,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new Rl("EOF",new sl(this,r,r));var n=this.tokenRegex.exec(t);if(n===null||n.index!==r)throw new nr("Unexpected character: '"+t[r]+"'",new Rl(t[r],new sl(this,r,r+1)));var s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Rl(s,new sl(this,r,this.tokenRegex.lastIndex))}}class pde{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new nr("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,n){if(n===void 0&&(n=!1),n){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var xde=LW;we("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});we("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});we("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});we("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});we("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});we("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");we("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var GF={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};we("\\char",function(e){var t=e.popToken(),r,n="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")n=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new nr("\\char` missing argument");n=t.text.charCodeAt(0)}else r=10;if(r){if(n=GF[t.text],n==null||n>=r)throw new nr("Invalid base-"+r+" digit "+t.text);for(var s;(s=GF[e.future().text])!=null&&s<r;)n*=r,n+=s,e.popToken()}return"\\@char{"+n+"}"});var WC=(e,t,r,n)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new nr("\\newcommand's first argument must be a macro name");var a=s[0].text,i=e.isDefined(a);if(i&&!t)throw new nr("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!i&&!r)throw new nr("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var l="",u=e.expandNextToken();u.text!=="]"&&u.text!=="EOF";)l+=u.text,u=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new nr("Invalid number of arguments: "+l);o=parseInt(l),s=e.consumeArg().tokens}return i&&n||e.macros.set(a,{tokens:s,numArgs:o}),""};we("\\newcommand",e=>WC(e,!1,!0,!1));we("\\renewcommand",e=>WC(e,!0,!1,!1));we("\\providecommand",e=>WC(e,!0,!0,!0));we("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});we("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});we("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Cf[r],_s.math[r],_s.text[r]),""});we("\\bgroup","{");we("\\egroup","}");we("~","\\nobreakspace");we("\\lq","`");we("\\rq","'");we("\\aa","\\r a");we("\\AA","\\r A");we("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");we("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");we("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");we("","\\mathscr{B}");we("","\\mathscr{E}");we("","\\mathscr{F}");we("","\\mathscr{H}");we("","\\mathscr{I}");we("","\\mathscr{L}");we("","\\mathscr{M}");we("","\\mathscr{R}");we("","\\mathfrak{C}");we("","\\mathfrak{H}");we("","\\mathfrak{Z}");we("\\Bbbk","\\Bbb{k}");we("","\\cdotp");we("\\llap","\\mathllap{\\textrm{#1}}");we("\\rlap","\\mathrlap{\\textrm{#1}}");we("\\clap","\\mathclap{\\textrm{#1}}");we("\\mathstrut","\\vphantom{(}");we("\\underbar","\\underline{\\text{#1}}");we("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');we("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");we("\\ne","\\neq");we("","\\neq");we("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");we("","\\notin");we("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");we("","\\perp");we("","\\mathclose{!\\mkern-0.8mu!}");we("","\\notni");we("","\\ulcorner");we("","\\urcorner");we("","\\llcorner");we("","\\lrcorner");we("","\\copyright");we("","\\textregistered");we("","\\textregistered");we("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');we("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');we("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');we("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');we("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");we("","\\vdots");we("\\varGamma","\\mathit{\\Gamma}");we("\\varDelta","\\mathit{\\Delta}");we("\\varTheta","\\mathit{\\Theta}");we("\\varLambda","\\mathit{\\Lambda}");we("\\varXi","\\mathit{\\Xi}");we("\\varPi","\\mathit{\\Pi}");we("\\varSigma","\\mathit{\\Sigma}");we("\\varUpsilon","\\mathit{\\Upsilon}");we("\\varPhi","\\mathit{\\Phi}");we("\\varPsi","\\mathit{\\Psi}");we("\\varOmega","\\mathit{\\Omega}");we("\\substack","\\begin{subarray}{c}#1\\end{subarray}");we("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");we("\\boxed","\\fbox{$\\displaystyle{#1}$}");we("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");we("\\implies","\\DOTSB\\;\\Longrightarrow\\;");we("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");we("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");we("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var VF={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};we("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in VF?t=VF[r]:(r.slice(0,4)==="\\not"||r in _s.math&&["bin","rel"].includes(_s.math[r].group))&&(t="\\dotsb"),t});var HC={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};we("\\dotso",function(e){var t=e.future().text;return t in HC?"\\ldots\\,":"\\ldots"});we("\\dotsc",function(e){var t=e.future().text;return t in HC&&t!==","?"\\ldots\\,":"\\ldots"});we("\\cdots",function(e){var t=e.future().text;return t in HC?"\\@cdots\\,":"\\@cdots"});we("\\dotsb","\\cdots");we("\\dotsm","\\cdots");we("\\dotsi","\\!\\cdots");we("\\dotsx","\\ldots\\,");we("\\DOTSI","\\relax");we("\\DOTSB","\\relax");we("\\DOTSX","\\relax");we("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");we("\\,","\\tmspace+{3mu}{.1667em}");we("\\thinspace","\\,");we("\\>","\\mskip{4mu}");we("\\:","\\tmspace+{4mu}{.2222em}");we("\\medspace","\\:");we("\\;","\\tmspace+{5mu}{.2777em}");we("\\thickspace","\\;");we("\\!","\\tmspace-{3mu}{.1667em}");we("\\negthinspace","\\!");we("\\negmedspace","\\tmspace-{4mu}{.2222em}");we("\\negthickspace","\\tmspace-{5mu}{.277em}");we("\\enspace","\\kern.5em ");we("\\enskip","\\hskip.5em\\relax");we("\\quad","\\hskip1em\\relax");we("\\qquad","\\hskip2em\\relax");we("\\tag","\\@ifstar\\tag@literal\\tag@paren");we("\\tag@paren","\\tag@literal{({#1})}");we("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new nr("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});we("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");we("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");we("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");we("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");we("\\newline","\\\\\\relax");we("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var XW=vr(Uu["Main-Regular"][84][1]-.7*Uu["Main-Regular"][65][1]);we("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+XW+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");we("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+XW+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");we("\\hspace","\\@ifstar\\@hspacer\\@hspace");we("\\@hspace","\\hskip #1\\relax");we("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");we("\\ordinarycolon",":");we("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");we("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');we("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');we("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');we("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');we("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');we("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');we("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');we("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');we("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');we("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');we("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');we("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');we("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');we("","\\dblcolon");we("","\\eqcolon");we("","\\coloneqq");we("","\\eqqcolon");we("","\\Coloneqq");we("\\ratio","\\vcentcolon");we("\\coloncolon","\\dblcolon");we("\\colonequals","\\coloneqq");we("\\coloncolonequals","\\Coloneqq");we("\\equalscolon","\\eqqcolon");we("\\equalscoloncolon","\\Eqqcolon");we("\\colonminus","\\coloneq");we("\\coloncolonminus","\\Coloneq");we("\\minuscolon","\\eqcolon");we("\\minuscoloncolon","\\Eqcolon");we("\\coloncolonapprox","\\Colonapprox");we("\\coloncolonsim","\\Colonsim");we("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");we("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");we("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");we("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");we("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");we("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");we("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");we("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");we("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");we("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");we("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");we("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");we("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");we("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");we("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");we("\\ngeqq","\\html@mathml{\\@ngeqq}{}");we("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");we("\\nleqq","\\html@mathml{\\@nleqq}{}");we("\\nleqslant","\\html@mathml{\\@nleqslant}{}");we("\\nshortmid","\\html@mathml{\\@nshortmid}{}");we("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");we("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");we("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");we("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");we("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");we("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");we("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");we("\\imath","\\html@mathml{\\@imath}{}");we("\\jmath","\\html@mathml{\\@jmath}{}");we("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");we("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");we("","\\llbracket");we("","\\rrbracket");we("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");we("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");we("","\\lBrace");we("","\\rBrace");we("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");we("","\\minuso");we("\\darr","\\downarrow");we("\\dArr","\\Downarrow");we("\\Darr","\\Downarrow");we("\\lang","\\langle");we("\\rang","\\rangle");we("\\uarr","\\uparrow");we("\\uArr","\\Uparrow");we("\\Uarr","\\Uparrow");we("\\N","\\mathbb{N}");we("\\R","\\mathbb{R}");we("\\Z","\\mathbb{Z}");we("\\alef","\\aleph");we("\\alefsym","\\aleph");we("\\Alpha","\\mathrm{A}");we("\\Beta","\\mathrm{B}");we("\\bull","\\bullet");we("\\Chi","\\mathrm{X}");we("\\clubs","\\clubsuit");we("\\cnums","\\mathbb{C}");we("\\Complex","\\mathbb{C}");we("\\Dagger","\\ddagger");we("\\diamonds","\\diamondsuit");we("\\empty","\\emptyset");we("\\Epsilon","\\mathrm{E}");we("\\Eta","\\mathrm{H}");we("\\exist","\\exists");we("\\harr","\\leftrightarrow");we("\\hArr","\\Leftrightarrow");we("\\Harr","\\Leftrightarrow");we("\\hearts","\\heartsuit");we("\\image","\\Im");we("\\infin","\\infty");we("\\Iota","\\mathrm{I}");we("\\isin","\\in");we("\\Kappa","\\mathrm{K}");we("\\larr","\\leftarrow");we("\\lArr","\\Leftarrow");we("\\Larr","\\Leftarrow");we("\\lrarr","\\leftrightarrow");we("\\lrArr","\\Leftrightarrow");we("\\Lrarr","\\Leftrightarrow");we("\\Mu","\\mathrm{M}");we("\\natnums","\\mathbb{N}");we("\\Nu","\\mathrm{N}");we("\\Omicron","\\mathrm{O}");we("\\plusmn","\\pm");we("\\rarr","\\rightarrow");we("\\rArr","\\Rightarrow");we("\\Rarr","\\Rightarrow");we("\\real","\\Re");we("\\reals","\\mathbb{R}");we("\\Reals","\\mathbb{R}");we("\\Rho","\\mathrm{P}");we("\\sdot","\\cdot");we("\\sect","\\S");we("\\spades","\\spadesuit");we("\\sub","\\subset");we("\\sube","\\subseteq");we("\\supe","\\supseteq");we("\\Tau","\\mathrm{T}");we("\\thetasym","\\vartheta");we("\\weierp","\\wp");we("\\Zeta","\\mathrm{Z}");we("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");we("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");we("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");we("\\bra","\\mathinner{\\langle{#1}|}");we("\\ket","\\mathinner{|{#1}\\rangle}");we("\\braket","\\mathinner{\\langle{#1}\\rangle}");we("\\Bra","\\left\\langle#1\\right|");we("\\Ket","\\left|#1\\right\\rangle");var JW=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,s=t.consumeArg().tokens,a=t.consumeArg().tokens,i=t.macros.get("|"),o=t.macros.get("\\|");t.macros.beginGroup();var l=f=>h=>{e&&(h.macros.set("|",i),s.length&&h.macros.set("\\|",o));var g=f;if(!f&&s.length){var x=h.future();x.text==="|"&&(h.popToken(),g=!0)}return{tokens:g?s:n,numArgs:0}};t.macros.set("|",l(!1)),s.length&&t.macros.set("\\|",l(!0));var u=t.consumeArg().tokens,d=t.expandTokens([...a,...u,...r]);return t.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};we("\\bra@ket",JW(!1));we("\\bra@set",JW(!0));we("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");we("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");we("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");we("\\angln","{\\angl n}");we("\\blue","\\textcolor{##6495ed}{#1}");we("\\orange","\\textcolor{##ffa500}{#1}");we("\\pink","\\textcolor{##ff00af}{#1}");we("\\red","\\textcolor{##df0030}{#1}");we("\\green","\\textcolor{##28ae7b}{#1}");we("\\gray","\\textcolor{gray}{#1}");we("\\purple","\\textcolor{##9d38bd}{#1}");we("\\blueA","\\textcolor{##ccfaff}{#1}");we("\\blueB","\\textcolor{##80f6ff}{#1}");we("\\blueC","\\textcolor{##63d9ea}{#1}");we("\\blueD","\\textcolor{##11accd}{#1}");we("\\blueE","\\textcolor{##0c7f99}{#1}");we("\\tealA","\\textcolor{##94fff5}{#1}");we("\\tealB","\\textcolor{##26edd5}{#1}");we("\\tealC","\\textcolor{##01d1c1}{#1}");we("\\tealD","\\textcolor{##01a995}{#1}");we("\\tealE","\\textcolor{##208170}{#1}");we("\\greenA","\\textcolor{##b6ffb0}{#1}");we("\\greenB","\\textcolor{##8af281}{#1}");we("\\greenC","\\textcolor{##74cf70}{#1}");we("\\greenD","\\textcolor{##1fab54}{#1}");we("\\greenE","\\textcolor{##0d923f}{#1}");we("\\goldA","\\textcolor{##ffd0a9}{#1}");we("\\goldB","\\textcolor{##ffbb71}{#1}");we("\\goldC","\\textcolor{##ff9c39}{#1}");we("\\goldD","\\textcolor{##e07d10}{#1}");we("\\goldE","\\textcolor{##a75a05}{#1}");we("\\redA","\\textcolor{##fca9a9}{#1}");we("\\redB","\\textcolor{##ff8482}{#1}");we("\\redC","\\textcolor{##f9685d}{#1}");we("\\redD","\\textcolor{##e84d39}{#1}");we("\\redE","\\textcolor{##bc2612}{#1}");we("\\maroonA","\\textcolor{##ffbde0}{#1}");we("\\maroonB","\\textcolor{##ff92c6}{#1}");we("\\maroonC","\\textcolor{##ed5fa6}{#1}");we("\\maroonD","\\textcolor{##ca337c}{#1}");we("\\maroonE","\\textcolor{##9e034e}{#1}");we("\\purpleA","\\textcolor{##ddd7ff}{#1}");we("\\purpleB","\\textcolor{##c6b9fc}{#1}");we("\\purpleC","\\textcolor{##aa87ff}{#1}");we("\\purpleD","\\textcolor{##7854ab}{#1}");we("\\purpleE","\\textcolor{##543b78}{#1}");we("\\mintA","\\textcolor{##f5f9e8}{#1}");we("\\mintB","\\textcolor{##edf2df}{#1}");we("\\mintC","\\textcolor{##e0e5cc}{#1}");we("\\grayA","\\textcolor{##f6f7f7}{#1}");we("\\grayB","\\textcolor{##f0f1f2}{#1}");we("\\grayC","\\textcolor{##e3e5e6}{#1}");we("\\grayD","\\textcolor{##d6d8da}{#1}");we("\\grayE","\\textcolor{##babec2}{#1}");we("\\grayF","\\textcolor{##888d93}{#1}");we("\\grayG","\\textcolor{##626569}{#1}");we("\\grayH","\\textcolor{##3b3e40}{#1}");we("\\grayI","\\textcolor{##21242c}{#1}");we("\\kaBlue","\\textcolor{##314453}{#1}");we("\\kaGreen","\\textcolor{##71B307}{#1}");var QW={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class yde{constructor(t,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new pde(xde,r.macros),this.mode=n,this.stack=[]}feed(t){this.lexer=new HF(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,n,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new Rl("EOF",n.loc)),this.pushTokens(s),new Rl("",sl.range(r,n))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],n=t&&t.length>0;n||this.consumeSpaces();var s=this.future(),a,i=0,o=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++i;else if(a.text==="}"){if(--i,i===-1)throw new nr("Extra }",a)}else if(a.text==="EOF")throw new nr("Unexpected end of input in a macro argument, expected '"+(t&&n?t[o]:"}")+"'",a);if(t&&n)if((i===0||i===1&&t[o]==="{")&&a.text===t[o]){if(++o,o===t.length){r.splice(-o,o);break}}else o=0}while(i!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:a}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new nr("The length of delimiters doesn't match the number of args!");for(var n=r[0],s=0;s<n.length;s++){var a=this.popToken();if(n[s]!==a.text)throw new nr("Use of the macro doesn't match its definition",a)}}for(var i=[],o=0;o<t;o++)i.push(this.consumeArg(r&&r[o+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new nr("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||t&&s.unexpandable){if(t&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new nr("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){a=a.slice();for(var o=a.length-1;o>=0;--o){var l=a[o];if(l.text==="#"){if(o===0)throw new nr("Incomplete placeholder at end of macro body",l);if(l=a[--o],l.text==="#")a.splice(o+1,1);else if(/^[1-9]$/.test(l.text))a.splice(o,2,...i[+l.text-1]);else throw new nr("Not a valid argument number",l)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Rl(t)]):void 0}expandTokens(t){var r=[],n=this.stack.length;for(this.pushTokens(t);this.stack.length>n;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(n=>n.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var n=this.lexer.catcodes[t];if(n!=null&&n!==13)return}var s=typeof r=="function"?r(this):r;if(typeof s=="string"){var a=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(a+1))!==-1;)++a;for(var o=new HF(s,this.settings),l=[],u=o.lex();u.text!=="EOF";)l.push(u),u=o.lex();l.reverse();var d={tokens:l,numArgs:a};return d}return s}isDefined(t){return this.macros.has(t)||Cf.hasOwnProperty(t)||_s.math.hasOwnProperty(t)||_s.text.hasOwnProperty(t)||QW.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Cf.hasOwnProperty(t)&&!Cf[t].primitive}}var qF=/^[]/,ub=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),D5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},KF={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class s3{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new yde(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new nr("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Rl("}")),this.gullet.pushTokens(t);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(t,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(s3.endOfExpression.indexOf(s.text)!==-1||r&&s.text===r||t&&Cf[s.text]&&Cf[s.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(t){for(var r=-1,n,s=0;s<t.length;s++)if(t[s].type==="infix"){if(r!==-1)throw new nr("only one infix operator per group",t[s].token);r=s,n=t[s].replaceWith}if(r!==-1&&n){var a,i,o=t.slice(0,r),l=t.slice(r+1);o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o},l.length===1&&l[0].type==="ordgroup"?i=l[0]:i={type:"ordgroup",mode:this.mode,body:l};var u;return n==="\\\\abovefrac"?u=this.callFunction(n,[a,t[r],i],[]):u=this.callFunction(n,[a,i],[]),[u]}else return t}handleSupSubscript(t){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var s;do{var a;s=this.parseGroup(t)}while(((a=s)==null?void 0:a.type)==="internal");if(!s)throw new nr("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(t){for(var r=[],n=0;n<t.length;n++)r.push({type:"textord",mode:"text",text:t[n]});var s={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return a}parseAtom(t){var r=this.parseGroup("atom",t);if(r?.type==="internal"||this.mode==="text")return r;for(var n,s;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var i=a.text==="\\limits";r.limits=i,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new nr("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new nr("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(s)throw new nr("Double subscript",a);s=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new nr("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},l=[o];for(this.consume();this.fetch().text==="'";)l.push(o),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(ub[a.text]){var u=qF.test(a.text),d=[];for(d.push(new Rl(ub[a.text])),this.consume();;){var f=this.fetch().text;if(!ub[f]||qF.test(f)!==u)break;d.unshift(new Rl(ub[f])),this.consume()}var h=this.subparse(d);u?s={type:"ordgroup",mode:"math",body:h}:n={type:"ordgroup",mode:"math",body:h}}else break}return n||s?{type:"supsub",mode:this.mode,base:r,sup:n,sub:s}:r}parseFunction(t,r){var n=this.fetch(),s=n.text,a=Cf[s];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new nr("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new nr("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new nr("Can't use function '"+s+"' in math mode",n);var{args:i,optArgs:o}=this.parseArguments(s,a);return this.callFunction(s,i,o,n,t)}callFunction(t,r,n,s,a){var i={funcName:t,parser:this,token:s,breakOnTokenText:a},o=Cf[t];if(o&&o.handler)return o.handler(i,r,n);throw new nr("No function handler for "+t)}parseArguments(t,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var s=[],a=[],i=0;i<n;i++){var o=r.argTypes&&r.argTypes[i],l=i<r.numOptionalArgs;(r.primitive&&o==null||r.type==="sqrt"&&i===1&&a[0]==null)&&(o="primitive");var u=this.parseGroupOfType("argument to '"+t+"'",o,l);if(l)a.push(u);else if(u!=null)s.push(u);else throw new nr("Null argument, please report this as a bug")}return{args:s,optArgs:a}}parseGroupOfType(t,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new nr("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new nr("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new nr("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var s="",a;(a=this.fetch()).text!=="EOF";)s+=a.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(t,r){for(var n=this.fetch(),s=n,a="",i;(i=this.fetch()).text!=="EOF"&&t.test(a+i.text);)s=i,a+=s.text,this.consume();if(a==="")throw new nr("Invalid "+r+": '"+n.text+"'",n);return n.range(s,a)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new nr("Invalid color: '"+r.text+"'",r);var s=n[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var r,n=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",n=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new nr("Invalid size: '"+r.text+"'",r);var a={number:+(s[1]+s[2]),unit:s[3]};if(!lW(a))throw new nr("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(t,r){var n=this.gullet.scanArgument(t);if(n==null)return null;var s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(s),i}parseGroup(t,r){var n=this.fetch(),s=n.text,a;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,i),l=this.fetch();this.expect(i),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:sl.range(n,l),body:o,semisimple:s==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,t)||this.parseSymbol(),a==null&&s[0]==="\\"&&!QW.hasOwnProperty(s)){if(this.settings.throwOnError)throw new nr("Undefined control sequence: "+s,n);a=this.formatUnsupportedCmd(s),this.consume()}return a}formLigatures(t){for(var r=t.length-1,n=0;n<r;++n){var s=t[n],a=s.text;a==="-"&&t[n+1].text==="-"&&(n+1<r&&t[n+2].text==="-"?(t.splice(n,3,{type:"textord",mode:"text",loc:sl.range(s,t[n+2]),text:"---"}),r-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:sl.range(s,t[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&t[n+1].text===a&&(t.splice(n,2,{type:"textord",mode:"text",loc:sl.range(s,t[n+1]),text:a+a}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),s=n.charAt(0)==="*";if(s&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new nr(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:s}}KF.hasOwnProperty(r[0])&&!_s[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=KF[r[0]]+r.slice(1));var a=mde.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var i;if(_s[this.mode][r]){this.settings.strict&&this.mode==="math"&&F8.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var o=_s[this.mode][r].group,l=sl.range(t),u;if(iue.hasOwnProperty(o)){var d=o;u={type:"atom",mode:this.mode,family:d,loc:l,text:r}}else u={type:o,mode:this.mode,loc:l,text:r};i=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(oW(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:sl.range(t),text:r};else return null;if(this.consume(),a)for(var f=0;f<a[0].length;f++){var h=a[0][f];if(!D5[h])throw new nr("Unknown accent ' "+h+"'",t);var g=D5[h][this.mode]||D5[h].text;if(!g)throw new nr("Accent "+h+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:sl.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}}s3.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var GC=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new s3(t,r);delete n.gullet.macros.current["\\df@tag"];var s=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new nr("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:n.subparse([new Rl("\\df@tag")])}]}return s},ZW=function(t,r,n){r.textContent="";var s=VC(t,n).toNode();r.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ZW=function(){throw new nr("KaTeX doesn't work in quirks mode.")});var vde=function(t,r){var n=VC(t,r).toMarkup();return n},wde=function(t,r){var n=new EC(r);return GC(t,n)},eH=function(t,r,n){if(n.throwOnError||!(t instanceof nr))throw t;var s=ut.makeSpan(["katex-error"],[new _c(r)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+n.errorColor),s},VC=function(t,r){var n=new EC(r);try{var s=GC(t,n);return Aue(s,t,n)}catch(a){return eH(a,t,n)}},bde=function(t,r){var n=new EC(r);try{var s=GC(t,n);return jue(s,t,n)}catch(a){return eH(a,t,n)}},_de="0.16.25",Sde={Span:y2,Anchor:jC,SymbolNode:_c,SvgNode:c0,PathNode:$f,LineNode:M8},B8={version:_de,render:ZW,renderToString:vde,ParseError:nr,SETTINGS_SCHEMA:Kb,__parse:wde,__renderToDomTree:VC,__renderToHTMLTree:bde,__setFontMetrics:Qce,__defineSymbol:Z,__defineFunction:Cr,__defineMacro:we,__domTree:Sde};const $8=(e,t=!1)=>{if(!e||typeof e!="string")return"";try{return B8.renderToString(e,{throwOnError:!1,displayMode:t,strict:!1})}catch(r){return console.error("Math rendering error:",r),`<span class="math-error" title="Math rendering error">${z8(e)}</span>`}},ia=(e,t=!1)=>{if(!e||typeof e!="string")return"";let r=e;const n=/\$\$(.*?)\$\$/g;let s;const a=[];for(;(s=n.exec(e))!==null;)a.push({fullMatch:s[0],expression:s[1],index:s.index});for(let l=a.length-1;l>=0;l--){const{fullMatch:u,expression:d}=a[l];try{const f=B8.renderToString(d,{throwOnError:!1,displayMode:!0,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,z8(u))}}const i=/\$(.*?)\$/g,o=[];for(;(s=i.exec(r))!==null;)s[0].startsWith("$$")||o.push({fullMatch:s[0],expression:s[1],index:s.index});for(let l=o.length-1;l>=0;l--){const{fullMatch:u,expression:d}=o[l];try{const f=B8.renderToString(d,{throwOnError:!1,displayMode:!1,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,z8(u))}}return r},kde=e=>{if(!e||typeof e!="string")return"";if(e.includes("$"))return e;const t=["\\sqrt","\\frac","\\times","\\div","\\cdot","\\pm","\\mp","\\leq","\\geq","\\neq","\\approx","\\equiv","\\sum","\\prod","\\int","\\lim","\\sin","\\cos","\\tan","\\log","\\ln","\\exp"],r=[];let n="",s=!1,a=0;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1]||"",d=e[o-1]||"",f=l+u;if(e.substring(o,o+3),l==="\\"){const h=e.substring(o).match(/^\\([a-zA-Z]+)/);if(h){const g="\\"+h[1];if(t.some(x=>g.startsWith(x))||g.length>1){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=l;continue}}}if(f==="^{"||f==="_{"||l==="^"||l==="_"){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=l;continue}if(l==="{"){if(s){a++,n+=l;continue}else if(d==="^"||d==="_"||d==="\\"){s=!0,n+=l,a++;continue}}if(l==="}"&&s){if(n+=l,a--,a===0){const h=e.substring(o+1).trim();(!h||h.match(/^[\s,.!?;:]/))&&(r.push({type:"math",content:n}),n="",s=!1)}continue}if(s){if(n+=l,l===" "&&a===0){const h=e.substring(o+1).trim();h&&!h.match(/^[\\^_{]/)&&(r.push({type:"math",content:n.trim()}),n="",s=!1,n+=l)}}else n+=l}n&&r.push({type:s?"math":"text",content:n});let i="";for(const o of r)o.type==="math"?i+=`$${o.content}$`:i+=o.content;return i},z8=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Tde=({isOpen:e=!1,onClose:t,onSave:r,initialValue:n="",cursorPosition:s=null,inputRef:a=null})=>{const[i,o]=_.useState(n),[l,u]=_.useState({start:0,end:0}),[d,f]=_.useState(null),[h,g]=_.useState(null),[x,y]=_.useState(!1),v=_.useRef(null);_.useRef(null),_.useEffect(()=>{e&&(o(n),f(null),g(null),setTimeout(()=>{v.current?.focus(),i&&v.current?.setSelectionRange(i.length,i.length)},100))},[e,n]);const T=()=>{const{start:A,end:F}=l,L=A>0?i.substring(A-1,A):"",V=L&&L.trim()&&!L.match(/[{}()]/);let J="",ne=0;V?(J="^{}",ne=-1):(J="x^{2}",ne=-3);const ee=i.substring(0,A)+J+i.substring(F);o(ee),setTimeout(()=>{v.current?.focus();const ie=A+J.length+ne;v.current?.setSelectionRange(ie,ie)},0)},k=()=>{const{start:A,end:F}=l,L=i.substring(A,F);if(L){const V=i.substring(0,A)+`\\sqrt{${L}}`+i.substring(F);o(V),setTimeout(()=>{v.current?.focus();const J=A+L.length+8;v.current?.setSelectionRange(J,J)},0)}else{const V=i.substring(0,A)+"\\sqrt{}"+i.substring(F);o(V),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0)}},b=()=>{const{start:A}=l,F=i;if(d==="numerator"&&h!==null){const L=h;let V=0,J=-1;const ne=L+6;for(let ee=ne;ee<F.length;ee++)if(F[ee]==="{")V++;else if(F[ee]==="}"){if(V===0){J=ee+1;break}V--}if(J>0){const ee=J+2;setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(ee,ee)},0),f(null),g(null)}else{const ee=i.substring(0,A)+"\\frac{}{}"+i.substring(l.end);o(ee),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0),f("numerator"),g(A)}}else{const L=i.substring(0,A)+"\\frac{}{}"+i.substring(l.end);o(L),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0),f("numerator"),g(A)}},E=()=>{const{start:A,end:F}=l,L=i.substring(0,A)+"x^{}"+i.substring(F);o(L),y(!0),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+3,A+3)},0)},N=A=>{const{start:F,end:L}=l,V=i.substring(0,F)+A+i.substring(L);o(V),setTimeout(()=>{v.current?.focus();const J=F+A.length;v.current?.setSelectionRange(J,J)},0)},P=A=>{u({start:A.target.selectionStart,end:A.target.selectionEnd})},M=()=>{let A=i;i&&!i.includes("$")&&i.trim()&&/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(i)&&(A=`$${i}$`),r?.(A),t()};if(_.useEffect(()=>{const A=F=>{F.key==="Escape"&&e&&t()};return e&&document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[e,t]),!e)return null;let j="";if(i&&i.trim())try{j=$8(i,!1),(!j||j.trim()==="")&&(j=`<span class="text-gray-500 font-mono">${O5(i)}</span>`)}catch(A){console.error("Preview rendering error:",A),j=`<span class="text-red-500 font-mono">Error: ${O5(i)}</span>`}return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:A=>{A.target===A.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-label":"Math Visual Editor",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-2xl mx-auto",onClick:A=>A.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Visual Editor"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Expression"}),c.jsx("textarea",{ref:v,value:i,onChange:A=>{const F=A.target.value,L=A.target.selectionStart,V=i;if(F.length>V.length){const J=F.substring(0,L),ne=F.substring(L),ee=J.match(/\^{([^}]*)$/);if(ee)if(ne.startsWith("}")){const ie=ee[1];x&&ie.length>0&&(setTimeout(()=>{if(v.current&&v.current.value===F){const B=L+1;v.current.setSelectionRange(B,B)}},10),y(!1))}else y(!1);else y(!1);J.match(/\\sqrt\{([^}]*)$/),J.match(/\\frac\{([^}]*)$/),J.match(/\\frac\{[^}]*\}\{([^}]*)$/)}o(F)},onSelect:P,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Type LaTeX code or use buttons below...",rows:4}),i&&i.trim()&&c.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Preview:"}),c.jsx("div",{className:"text-gray-700",style:{minHeight:"1.5em",fontSize:"16px"},dangerouslySetInnerHTML:{__html:j||O5(i)}})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Symbols"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:T,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x)",children:"x"}),c.jsx("button",{onClick:E,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x) - Type letter, click this, type number",children:"x"}),c.jsx("button",{onClick:k,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Square Root (x)",children:"x"}),c.jsx("button",{onClick:b,className:`px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${d==="numerator"?"bg-green-50 hover:bg-green-100 border-green-300 text-green-700":"bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700"}`,title:d==="numerator"?"Move to denominator (click again)":"Fraction (a/b) - Click for numerator, click again for denominator",children:"a/b"}),c.jsx("button",{onClick:()=>N("\\times"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Times",children:""}),c.jsx("button",{onClick:()=>N("\\div"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Divide",children:""})]})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(tt,{variant:"secondary",onClick:t,children:"Cancel"}),c.jsx(tt,{variant:"primary",onClick:M,children:"Insert"})]})]})})},O5=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Nl=({inputRef:e,onChange:t,position:r="right",size:n="small",showPreview:s=!1,className:a=""})=>{const[i,o]=_.useState(!1),[l,u]=_.useState(!1),[d,f]=_.useState(0),[h,g]=_.useState(null),[x,y]=_.useState(""),v=b=>{b.preventDefault(),b.stopPropagation();let E=null;if(typeof e=="function"?E=e():E=e?.current||e,!E){console.warn("MathEditorButton: No input reference provided");return}E.focus();const N=E.selectionStart!==null&&E.selectionStart!==void 0?E.selectionStart:E.selectionEnd!==null&&E.selectionEnd!==void 0?E.selectionEnd:E.value?.length||0;console.log(" Captured cursor position:",N,"from input value length:",E.value?.length),f(N),g(E),o(!0)},T=b=>{let E=h;if(E||(typeof e=="function"?E=e():E=e?.current||e),!E){console.warn("MathEditorButton: No input reference available for insert"),o(!1);return}const N=E.value||"",P=Math.max(0,Math.min(d,N.length));console.log(" Inserting formula at position:",P,"Value length:",N.length,"Formula:",b);const M=N.substring(0,P),j=N.substring(P),A=M+b+j;console.log(" New value:",A.substring(0,P)+"["+b+"]"+A.substring(P+b.length)),E.value=A,t&&t({target:{value:A,name:E.name}});const F=new Event("input",{bubbles:!0});if(E.dispatchEvent(F),E._valueTracker){const V=E._valueTracker;V.setValue(""),E.value=A,V.setValue(A)}const L=P+b.length;setTimeout(()=>{E.focus(),E.setSelectionRange(L,L),console.log(" Cursor moved to position:",L)},0),o(!1)};_.useEffect(()=>{console.log(" MathEditorButton rendered",{hasInputRef:!!e,inputRefType:typeof e,position:r,size:n})},[e,r,n]);const k=b=>{b.preventDefault(),b.stopPropagation();let E=null;typeof e=="function"?E=e():E=e?.current||e,y(E?.value||""),u(!0)};return _.useEffect(()=>{if(l){const b=setInterval(()=>{let E=null;typeof e=="function"?E=e():E=e?.current||e,E&&y(E.value||"")},300);return()=>clearInterval(b)}},[l,e]),c.jsxs(c.Fragment,{children:[s&&c.jsx("button",{type:"button",onClick:k,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"48px":"auto",left:r==="left"?"48px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",color:"white",border:"2px solid #059669",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:b=>{b.target.style.backgroundColor="#059669"},onMouseLeave:b=>{b.target.style.backgroundColor="#10b981"},title:"Preview Math (p)","aria-label":"Preview math rendering",children:c.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"p"})}),c.jsx("button",{type:"button",onClick:v,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"8px":"auto",left:r==="left"?"8px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#3b82f6",color:"white",border:"2px solid #2563eb",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:b=>{b.target.style.backgroundColor="#2563eb"},onMouseLeave:b=>{b.target.style.backgroundColor="#3b82f6"},title:"Math Editor (fx)","aria-label":"Open math editor",children:c.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"fx"})}),l&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:b=>{b.target===b.currentTarget&&u(!1)},role:"dialog","aria-modal":"true","aria-label":"Math Preview",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-3xl mx-auto max-h-[90vh] overflow-auto",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Preview"}),c.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),c.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-gray-600 font-mono",children:["LaTeX: ",x||"(empty)"]}),c.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg min-h-[200px] text-lg",dangerouslySetInnerHTML:{__html:x?x.includes("$")?ia(x,!1):ia(kde(x),!1):'<span class="text-gray-400">No content to preview</span>'}})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Close"})})]})}),c.jsx(Tde,{isOpen:i,onClose:()=>o(!1),onSave:T,initialValue:"",cursorPosition:d,inputRef:h||e?.current||e})]})},Cde=({question:e,testId:t,testType:r="true_false",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onSave:l,isEditing:u=!1,isSaving:d=!1,validationErrors:f={},showCorrectAnswers:h=!1,studentId:g=null})=>{const{getItem:x,setItem:y}=J_();si(),_.useRef(null);const[v,T]=_.useState(""),[k,b]=_.useState(""),[E,N]=_.useState(""),[P,M]=_.useState(!1),[j,A]=_.useState(!0),[F,L]=_.useState(""),[V,J]=_.useState(!1),[ne,ee]=_.useState(null);_.useEffect(()=>{if(e&&(N(e.question||""),b(e.correct_answer||""),n==="student"&&g)){const re=x(`test_progress_${g}_${r}_${t}_${e.question_id}`);re&&T(re)}},[e,t,r,n,x]),_.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" TrueFalseQuestion syncing with parent studentAnswer:",a),T(a))},[a,n]),_.useEffect(()=>{if(n==="student"&&v&&t&&e?.question_id&&g){const re=setTimeout(()=>{J(!0),y(`test_progress_${g}_${r}_${t}_${e.question_id}`,v),ee(new Date().toLocaleTimeString()),setTimeout(()=>J(!1),1e3)},1e3);return()=>clearTimeout(re)}},[v,t,r,e?.question_id,n,g,y]),_.useEffect(()=>{if(n==="teacher"&&(E||k)){const re=setTimeout(()=>{J(!0);const q={question:E,correct_answer:k,timestamp:Date.now()};y(`teacher_form_${r}_${t}`,q),ee(new Date().toLocaleTimeString()),setTimeout(()=>J(!1),1e3)},2e3);return()=>clearTimeout(re)}},[E,k,t,r,n,y]);const ie=_.useCallback(re=>{n==="student"&&(T(re),i&&i(e.question_id,re),I(re))},[n,e?.question_id,i]),B=_.useCallback(re=>{N(re),o&&o(e.question_id,re),H(re)},[e?.question_id,o]),Y=_.useCallback(re=>{b(re),o&&o(e.question_id,{...e,correct_answer:re}),W(re)},[e,o]),I=_.useCallback(re=>{if(n==="student"){if(!re){A(!1),L("Please select an answer");return}A(!0),L("")}},[n]),H=_.useCallback(re=>{if(n==="teacher"){if(!re||re.trim().length<10){A(!1),L("Question must be at least 10 characters long");return}A(!0),L("")}},[n]),W=_.useCallback(re=>{if(n==="teacher"){if(!re){A(!1),L("Please select a correct answer");return}A(!0),L("")}},[n]),R=_.useCallback(()=>{if(n!=="teacher"||!l)return;const re={question_id:e.question_id,question:E,correct_answer:k,type:"true_false"};l(re)},[n,l,e?.question_id,E,k]),z=_.useCallback(re=>re?ia(re,!1):"",[]),G=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e?.question_id]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[V&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(fn,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),ne&&!V&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",ne]})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:z(E)}}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="true"?"border-blue-500 bg-blue-50":"border-gray-200"} ${h&&k==="true"?"ring-2 ring-green-400":""}`,children:[c.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"true",checked:v==="true",onChange:()=>ie("true"),className:"sr-only","aria-label":"True"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="true"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="false"?"border-blue-500 bg-blue-50":"border-gray-200"} ${h&&k==="false"?"ring-2 ring-green-400":""}`,children:[c.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"false",checked:v==="false",onChange:()=>ie("false"),className:"sr-only","aria-label":"False"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="false"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]}),!j&&F&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:F})]}),Q=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[V&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(fn,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),ne&&!V&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",ne]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:`question_${e?.question_id}`,value:E,onChange:re=>B(re.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),c.jsx(Nl,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:re=>B(re.target.value)})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Correct Answer *"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="true"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[c.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"true",checked:k==="true",onChange:()=>Y("true"),className:"sr-only","aria-label":"True"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="true"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="false"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[c.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"false",checked:k==="false",onChange:()=>Y("false"),className:"sr-only","aria-label":"False"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="false"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]})]})]}),!j&&F&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:F}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(tt,{variant:"success",onClick:R,disabled:!j||d,className:"w-full sm:w-auto",children:d?c.jsx(fn,{size:"small"}):"Save Question"})})]});return c.jsx("div",{className:"true-false-question-container",children:n==="student"?G():Q()})},Ede=({question:e,testId:t,testType:r="multiple_choice",mode:n="student",studentAnswer:s,onAnswerChange:a,onQuestionChange:i,onOptionAdd:o,onOptionRemove:l,onSave:u,isEditing:d=!1,isSaving:f=!1,validationErrors:h={},showCorrectAnswers:g=!1,studentId:x=null,displayNumber:y})=>{const{getItem:v,setItem:T}=J_(),{showNotification:k}=si();_.useRef(null);const[b,E]=_.useState(""),[N,P]=_.useState(["","","",""]),[M,j]=_.useState(""),[A,F]=_.useState(""),[L,V]=_.useState(!1),[J,ne]=_.useState(!0),[ee,ie]=_.useState(""),[B,Y]=_.useState(!1),[I,H]=_.useState(null);_.useEffect(()=>{if(e&&(F(e.question||""),P(e.options||["","","",""]),j(e.correct_answer||""),n==="student"&&x)){const je=v(`test_progress_${x}_${r}_${t}_${e.question_id}`);je&&E(je)}},[e,t,r,n,v]),_.useEffect(()=>{n==="student"&&s!==void 0&&s!==null&&(console.log(" MultipleChoiceQuestion syncing with parent studentAnswer:",s),E(s))},[s,n]),_.useEffect(()=>{if(n==="student"&&b&&t&&e?.question_id&&x){const je=setTimeout(()=>{Y(!0),T(`test_progress_${x}_${r}_${t}_${e.question_id}`,b),H(new Date().toLocaleTimeString()),setTimeout(()=>Y(!1),1e3)},1e3);return()=>clearTimeout(je)}},[b,t,r,e?.question_id,n,x,T]),_.useEffect(()=>{if(n==="teacher"&&(A||N.some(je=>je.trim()))){const je=setTimeout(()=>{Y(!0);const Ne={question:A,options:N,correct_answer:M,timestamp:Date.now()};T(`teacher_form_${r}_${t}`,Ne),H(new Date().toLocaleTimeString()),setTimeout(()=>Y(!1),1e3)},2e3);return()=>clearTimeout(je)}},[A,N,M,t,r,n,T]),_.useCallback(je=>{if(n!=="student")return;const Ne=String(je);E(Ne),a&&a(e.question_id,Ne),re(Ne)},[n,e?.question_id,a]);const W=_.useCallback(je=>{F(je),i&&i(e.question_id,je),q(je)},[e?.question_id,i]),R=_.useCallback((je,Ne)=>{const We=[...N];We[je]=Ne,P(We),i&&i(e.question_id,{...e,options:We}),se(We)},[N,e,i]),z=_.useCallback(je=>{j(je),i&&i(e.question_id,{...e,correct_answer:je}),ce(je)},[e,i]),G=_.useCallback(()=>{if(N.length<6){const je=[...N,""];P(je),o&&o(e.question_id,je)}else k("Maximum 6 options allowed","warning")},[N,e?.question_id,o,k]),Q=_.useCallback(je=>{if(N.length>2){const Ne=N.filter((We,$e)=>$e!==je);if(P(Ne),M===String.fromCharCode(65+je))j("");else if(M&&String.fromCharCode(65+je)<M){const We=String.fromCharCode(65+je-1);j(We)}l&&l(e.question_id,Ne)}else k("Minimum 2 options required","warning")},[N,M,e?.question_id,l,k]),re=_.useCallback(je=>{if(n==="student"){if(!je){ne(!1),ie("Please select an answer");return}ne(!0),e?.correct_answer&&je===e.correct_answer?ie(" Correct answer!"):e?.correct_answer?ie(" Incorrect answer"):ie("Answer selected")}},[n,e?.correct_answer]),q=_.useCallback(je=>!je||je.trim().length<10?(ne(!1),ie("Question must be at least 10 characters long"),!1):(ne(!0),ie(""),!0),[]),se=_.useCallback(je=>{if(n!=="teacher")return;if(je.filter(We=>We.trim().length>0).length<2){ne(!1),ie("At least 2 options must be filled");return}if(je.some(We=>We.trim().length>0&&We.trim().length<3)){ne(!1),ie("Each option must be at least 3 characters long");return}ne(!0),ie("")},[n]),ce=_.useCallback(je=>{if(n==="teacher"){if(!je){ne(!1),ie("Please select a correct answer");return}ne(!0),ie("")}},[n]),pe=_.useCallback(()=>{if(n!=="teacher"||!u)return;const je={question_id:e.question_id,question:A,options:N.filter(Ne=>Ne.trim().length>0),correct_answer:M,type:"multiple_choice"};u(je)},[n,u,e?.question_id,A,N,M]),ke=_.useCallback(je=>je?ia(je,!1):"",[]);return n==="teacher"?c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[B&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(fn,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),I&&!B&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",I]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:`question_${e?.question_id}`,value:A,onChange:je=>W(je.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),c.jsx(Nl,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:je=>W(je.target.value)})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options *"}),c.jsx(tt,{variant:"secondary",size:"small",onClick:G,disabled:N.length>=6,className:"px-3 py-1 text-sm",children:"+ Add Option"})]}),c.jsx("div",{className:"space-y-3",children:N.map((je,Ne)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+Ne)}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:je,onChange:We=>R(Ne,We.target.value),placeholder:`Option ${String.fromCharCode(65+Ne)}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e?.question_id,"data-option-index":Ne,required:!0}),c.jsx(Nl,{inputRef:()=>document.querySelector(`[data-question-id="${e?.question_id}"][data-option-index="${Ne}"]`),onChange:We=>R(Ne,We.target.value)})]}),N.length>2&&c.jsx(tt,{variant:"danger",size:"small",onClick:()=>Q(Ne),className:"px-2 py-1 text-sm",children:""})]},Ne))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`correct_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{id:`correct_${e?.question_id}`,value:M,onChange:je=>z(je.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[c.jsx("option",{value:"",children:"Select correct answer"}),N.map((je,Ne)=>{if(!je.trim())return null;const We=String.fromCharCode(65+Ne);return c.jsxs("option",{value:We,children:[We,") ",je]},Ne)})]})]})]}),!J&&ee&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:ee}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(tt,{variant:"success",onClick:pe,disabled:!J||f,className:"w-full sm:w-auto",children:f?c.jsx(fn,{size:"small"}):"Save Question"})})]}):c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof y=="number"?y:e?.question_id]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[B&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(fn,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),I&&!B&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",I]})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:ke(A)}}),c.jsx("div",{className:"space-y-3",children:N.map((je,Ne)=>c.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${b===String.fromCharCode(65+Ne)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("input",{type:"radio",name:`mcq_${t}_${e?.question_id}`,value:String.fromCharCode(65+Ne),checked:b===String.fromCharCode(65+Ne),onChange:We=>{E(We.target.value),a&&a(e?.question_id,We.target.value)},className:"mr-3"}),c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600 mr-3",children:String.fromCharCode(65+Ne)}),c.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:je?ia(je):`Option ${String.fromCharCode(65+Ne)}`}})]},Ne))}),!J&&ee&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:ee})]})},Nde=({question:e,testId:t,testType:r="input",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onAnswerAdd:l,onAnswerRemove:u,onSave:d,isEditing:f=!1,isSaving:h=!1,validationErrors:g={},showCorrectAnswers:x=!1,studentId:y=null})=>{const{getItem:v,setItem:T}=J_(),{showNotification:k}=si(),b=_.useRef(null),[E,N]=_.useState(""),[P,M]=_.useState([""]),[j,A]=_.useState(!1),[F,L]=_.useState(!0),[V,J]=_.useState(""),[ne,ee]=_.useState(!1);_.useEffect(()=>{if(n==="student"&&e?.question_id&&t&&r&&y){const q=`test_progress_${y}_${r}_${t}_${e.question_id}`,se=v(q);se&&N(se)}},[e?.question_id,r,t,n,y,v]),_.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" InputQuestion syncing with parent studentAnswer:",a),N(a))},[a,n]),_.useEffect(()=>{n==="teacher"&&e?.answers&&M(e.answers.length>0?e.answers:[""])},[e?.answers,n]),_.useEffect(()=>{if(n==="student"&&E&&e?.question_id&&t&&r&&y){const q=setTimeout(()=>{ee(!0),T(`test_progress_${y}_${r}_${t}_${e.question_id}`,E),setTimeout(()=>ee(!1),1e3)},1e3);return()=>clearTimeout(q)}},[E,e?.question_id,r,t,n,y,T]),_.useEffect(()=>{if(n==="teacher"&&P&&o){const q=setTimeout(()=>{o({...e,answers:P.filter(se=>se.trim())})},500);return()=>clearTimeout(q)}},[P,e,n,o]);const ie=_.useCallback(q=>{N(q);const se=q.trim().length>0;L(se),J(se?"":"Please enter an answer"),i&&i(e.question_id,q)},[e?.question_id,i]),B=_.useCallback((q,se)=>{const ce=[...P];ce[q]=se,M(ce),i&&i(e.question_id,ce)},[P,e?.question_id,i]),Y=_.useCallback(()=>{if(n==="teacher"){const q=[...P,""];M(q),l&&l(e.question_id,q)}},[P,e?.question_id,n,l]),I=_.useCallback(q=>{if(n==="teacher"&&P.length>1){const se=P.filter((ce,pe)=>pe!==q);M(se),u&&u(e.question_id,se)}},[P,e?.question_id,n,u]),H=_.useCallback(()=>{if(n==="student"){const q=E.trim().length>0;return L(q),J(q?"":"Please enter an answer"),q}else if(n==="teacher"){const q=P.some(se=>se.trim().length>0);return L(q),J(q?"":"Please enter at least one correct answer"),q}return!0},[E,P,n]),W=_.useCallback(q=>q?ia(q,!1):"",[]),R=_.useCallback(()=>{A(!0)},[]),z=_.useCallback(()=>{A(!1),H()},[H]),G=_.useCallback(q=>{q.key==="Enter"&&n==="student"&&E.trim()&&(T(`test_progress_${r}_${t}_${e.question_id}`,E),k("Answer saved","success"))},[E,r,t,e?.question_id,n,T,k]),Q=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e.question_id]}),ne&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[c.jsx(fn,{size:"small"}),c.jsx("span",{children:"Saving..."})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:W(e.question)}}),c.jsx("div",{className:"space-y-3",children:c.jsx("div",{className:"relative",children:c.jsx("input",{ref:b,type:"text",id:`input_${e.question_id}`,placeholder:"Enter your answer here...",value:E,onChange:q=>ie(q.target.value),onFocus:R,onBlur:z,onKeyPress:G,className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${F?j?"border-blue-500":"border-gray-300 hover:border-gray-400":"border-red-300 focus:border-red-500 focus:ring-red-500"}`,"data-question-id":e.question_id,"aria-label":`Answer for question ${e.question_id}`,"aria-invalid":!F,"aria-describedby":F?void 0:`error-${e.question_id}`})})}),x&&e.correct_answers&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("h5",{className:"text-sm font-semibold text-green-800 mb-2",children:"Correct Answers:"}),c.jsx("ul",{className:"space-y-1",children:e.correct_answers.map((q,se)=>c.jsx("li",{className:"text-green-700 text-sm",dangerouslySetInnerHTML:{__html:` ${ia(q,!1)}`}},se))})]})]}),re=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e.question_id||"New"]}),h&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[c.jsx(fn,{size:"small"}),c.jsx("span",{children:"Saving..."})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e.question_id||"new"}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",id:`question_${e.question_id||"new"}`,value:e.question||"",onChange:q=>o&&o({...e,question:q.target.value}),placeholder:"Enter question text",className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.question?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:border-blue-500"}`}),c.jsx(MathEditorButton,{inputRef:()=>document.getElementById(`question_${e.question_id||"new"}`),onChange:q=>o&&o({...e,question:q.target.value})})]}),g.question&&c.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.question})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answers *"}),c.jsx(tt,{type:"button",variant:"secondary",size:"small",onClick:Y,className:"px-3 py-1 text-sm",children:"+ Add Answer"})]}),c.jsx("div",{className:"space-y-3",children:P.map((q,se)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:se+1}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:q,onChange:ce=>B(se,ce.target.value),placeholder:`Correct answer ${se+1}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e.question_id,"data-answer-index":se}),c.jsx(MathEditorButton,{inputRef:()=>document.querySelector(`[data-question-id="${e.question_id}"][data-answer-index="${se}"]`),onChange:ce=>B(se,ce.target.value)})]}),P.length>1&&c.jsx(tt,{type:"button",variant:"danger",size:"small",onClick:()=>I(se),className:"px-2 py-1 text-sm",children:" Remove"})]},se))}),g.answers&&c.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.answers})]})]}),d&&c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(tt,{type:"button",variant:"success",onClick:d,disabled:h,className:"w-full sm:w-auto",children:h?c.jsx(fn,{size:"small"}):"Save Question"})})]});return c.jsx("div",{className:`input-question-container ${n} ${j?"focused":""}`,children:n==="student"?Q():re()})},v1=(e,t,r)=>{const[n,s]=_.useState(!1),[a,i]=_.useState(0),[o,l]=_.useState(!1),u=_.useRef(!1);_.useEffect(()=>{if(!e||!t||!r)return;const v=`anti_cheating_${r}_${e}_${t}`,T=Ta(v);T&&(i(T.tabSwitches||0),l(T.isCheating||!1))},[e,t,r]);const d=_.useCallback(()=>{if(console.log(" handleTabSwitch called - isTracking:",u.current),!u.current){console.log(" Not tracking, returning early");return}console.log(" Tab switch detected - starting 7 second timer...");const v=Date.now();setTimeout(()=>{const T=Date.now()-v;console.log(" Timer completed - time hidden:",T,"ms"),T>=6500?(console.log(" Tab was hidden for sufficient time - counting as tab switch"),i(k=>{const b=k+1,E=b>=2;console.log(" Tab switch count updated:",{newCount:b,cheating:E}),l(E);const N=`anti_cheating_${r}_${e}_${t}`;return Bs(N,{tabSwitches:b,isCheating:E},120*1e3),b})):console.log(" Tab was not hidden long enough - not counting as switch")},7e3)},[e,t,r]),f=_.useCallback(()=>{u.current&&(console.log(" Visibility change detected:",{hidden:document.hidden,isTracking:u.current}),document.hidden?d():console.log(" Tab became visible"))},[d]),h=_.useCallback(()=>{console.log(" startTracking called - setting up anti-cheating detection"),console.log(" Current document.hidden state:",document.hidden),console.log(" Current document.visibilityState:",document.visibilityState),s(!0),u.current=!0,document.addEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners added (visibilitychange only)")},[f]),g=_.useCallback(()=>{console.log(" stopTracking called - removing anti-cheating detection"),s(!1),u.current=!1,document.removeEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners removed")},[f]),x=_.useCallback(()=>{const v={caught_cheating:o,visibility_change_times:a};return console.log(" getCheatingData called:",v),v},[o,a]),y=_.useCallback(()=>{r&&e&&t&&n1(r,e,t),i(0),l(!1),console.log(" Anti-cheating data deleted from localStorage")},[r,e,t]);return{startTracking:h,stopTracking:g,clearData:y,getCheatingData:x,tabSwitches:a,isCheating:o,isTracking:n}},a3=(e,t)=>{const r=_.useRef(e),n=_.useRef(t),s=_.useRef(!1);return _.useEffect(()=>{n.current=t},[t]),_.useEffect(()=>{r.current=e},[e]),_.useEffect(()=>{if(typeof window>"u"||!e)return()=>{};const a=f=>{try{window.history.pushState({__intercept:!0,prevState:f??null,ts:Date.now()},document.title,window.location.href),s.current=!0}catch(h){console.warn("Failed to push intercept state",h)}},i=()=>{try{const f=window.history.state;if(f&&f.__intercept){const h=f.prevState??null;window.history.replaceState(h,document.title,window.location.href)}}catch(f){console.warn("Failed to restore previous state",f)}s.current=!1},o=()=>{s.current&&(r.current=!1,i(),window.history.go(-1))},l=()=>{},u=f=>{if(!r.current){s.current=!1;return}const h=f.state;a(h),n.current?.({source:"browser",confirm:o,cancel:l})},d=window.history.state;return a(d),window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u),i()}},[e]),null},Ade=({testData:e,onTestComplete:t,onBackToCabinet:r,isTestComplete:n=!1,testScore:s=null})=>{const[a,i]=_.useState(null),[o,l]=_.useState(null);_.useEffect(()=>{(async()=>{try{const[Ke,it]=await Promise.all([Qa(()=>Promise.resolve().then(()=>hae),void 0),Qa(()=>Promise.resolve().then(()=>Gne),void 0)]);i(Ke),l(it.default)}catch(Ke){console.error("Failed to load Konva:",Ke)}})()},[]);const u=()=>a?{Stage:a.Stage,Layer:a.Layer,Rect:a.Rect,Arrow:a.Arrow,KonvaImage:a.Image,KonvaText:a.Text,Group:a.Group}:null,[d,f]=_.useState({}),[h,g]=_.useState({}),[x,y]=_.useState(0),[v,T]=_.useState(!1),[k,b]=_.useState(null),[E,N]=_.useState(0),[P,M]=_.useState(0),[j,A]=_.useState(null),[F,L]=_.useState(null),[V,J]=_.useState(!1),[ne,ee]=_.useState(!1),[ie,B]=_.useState(!1),[Y,I]=_.useState(!0),H=_.useRef(null);a3(Y,_.useCallback(({confirm:wt,cancel:Ke})=>{H.current={confirm:wt,cancel:Ke},ee(!0)},[]));const{showNotification:W}=si(),{makeAuthenticatedRequest:R}=zl(),{user:z}=Ms(),{startTracking:G,stopTracking:Q,getCheatingData:re,clearData:q}=v1("matching_type",e?.id,z?.student_id||z?.id),se=_.useRef(null),ce=_.useRef(null),pe=_.useRef(null),ke=_.useRef(0),[le,ye]=_.useState(400);_.useRef({});const je=_.useCallback(()=>{J(!0)},[]),Ne=_.useCallback(()=>{g({}),f({}),J(!1)},[]),We=_.useCallback(()=>{H.current=null,ee(!0)},[]),$e=_.useCallback(()=>{ee(!1);const wt=H.current;if(H.current=null,wt?.confirm){I(!1),wt.confirm();return}I(!1),r()},[r]),Nt=_.useCallback(()=>{const wt=H.current;H.current=null,wt?.cancel&&wt.cancel(),ee(!1)},[]),He=_.useMemo(()=>{if(!e)return null;const wt=e.blocks.map(vt=>{let st=vt.coordinates;if(typeof st=="string")try{st=JSON.parse(st)}catch(qe){console.error(" Failed to parse coordinates:",qe),st={x:0,y:0,width:100,height:100}}return st={x:(typeof st.x=="number"?st.x:Number(st.x))||0,y:(typeof st.y=="number"?st.y:Number(st.y))||0,width:(typeof st.width=="number"?st.width:Number(st.width))||30,height:(typeof st.height=="number"?st.height:Number(st.height))||10},{id:vt.id,word:vt.word,coordinates:st,hasArrow:vt.hasArrow,arrow:vt.arrow}}),Ke=Array.isArray(e.arrows)?e.arrows:[],it=e.words.map(vt=>({id:vt.id,word:vt.word,blockId:null,isPlaced:!1,isCorrect:!1}));return{blocks:wt,arrows:Ke,words:it}},[e]);_.useEffect(()=>{if(!e?.image_url)return;const wt=new Image;wt.crossOrigin="anonymous",wt.onload=()=>{console.log(" Image loaded successfully"),N(wt.width),M(wt.height);const Ke=se.current?.clientWidth||800,it=se.current?.clientHeight||600,vt=Ke/wt.width,st=it/wt.height,qe=Math.min(vt,st,1),ot=wt.width*qe,kt=wt.height*qe,Ut=(Ke-ot)/2,Qt=(it-kt)/2;b({x:Ut,y:Qt,width:ot,height:kt,scaleX:qe,scaleY:qe,scale:qe,image:wt}),ke.current=se.current?.clientWidth||800,console.log(" Image info calculated:",{x:Ut,y:Qt,width:ot,height:kt,scaleX:qe,scaleY:qe})},wt.onerror=()=>{console.error(" Failed to load image"),W("Failed to load test image","error")},wt.src=e.image_url},[e?.image_url,W]),_.useEffect(()=>{if(!He||!k)return;const wt=ke.current||se.current?.clientWidth||800,Ke=12,it=38;let vt=k.x,st=k.y+k.height+Ke;const qe=k.x+k.width,ot={};He.words.forEach(Qt=>{if(!Object.prototype.hasOwnProperty.call(h,Qt.id)){const Gt=typeof Qt.word=="string"?Qt.word:"",Zt=Math.max(60,Gt.length*8+20);vt+Zt>Math.min(wt-Ke,qe)&&(vt=k.x,st+=it),d[Qt.id]||(ot[Qt.id]={x:vt,y:st}),vt+=Zt+Ke}}),Object.keys(ot).length&&f(Qt=>({...Qt,...ot}));const kt=Object.values(ot).reduce((Qt,Gt)=>Math.max(Qt,Gt.y),st),Ut=Math.max(k.y+k.height+Ke,kt+it+Ke);ye(Math.max(400,Math.ceil(Ut)))},[He,k,h,d]);const Et=_.useCallback(()=>{if(!k||!He)return[];const wt=u();return wt?He.blocks.map(Ke=>{const it=Ke.coordinates;let vt,st,qe,ot;vt=k.x+it.x*(k.scale??k.scaleX),st=k.y+it.y*(k.scale??k.scaleY),qe=it.width*(k.scale??k.scaleX),ot=it.height*(k.scale??k.scaleY);const kt=h[Ke.id];return c.jsxs(wt.Group,{children:[c.jsx(wt.Rect,{x:vt,y:st,width:qe,height:ot,fill:kt?"rgba(40, 167, 69, 0.4)":j===Ke.id?"rgba(0, 123, 255, 0.25)":"rgba(0, 123, 255, 0.15)",stroke:kt?"#28a745":j===Ke.id?"#0056b3":"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:kt?"rgba(40, 167, 69, 0.3)":"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),kt&&c.jsx(wt.KonvaText,{x:vt+5,y:st+ot/2-10,width:qe-10,height:20,text:He.words.find(Ut=>Ut.id===kt)?.word||"",fontSize:Math.min(12,qe/8),fontFamily:"Arial",fill:"#2c3e50",align:"center",verticalAlign:"middle",listening:!1})]},Ke.id)}):[]},[k,He,h,a]),Rt=_.useCallback(()=>{if(!k||!He)return[];const wt=u();return wt?(console.log(" Processing arrows:",He.arrows),He.arrows.map(Ke=>{if(console.log(" Arrow data:",Ke),!Ke.start||!Ke.end)return console.warn(" Arrow missing start/end coordinates:",Ke),null;let it,vt,st,qe;if(Ke.rel_start_x!==null&&Ke.rel_start_y!==null&&Ke.rel_end_x!==null&&Ke.rel_end_y!==null&&Ke.image_width&&Ke.image_height&&Ke.image_width>0&&Ke.image_height>0){const ot=Ke.image_width,kt=Ke.image_height,Ut=k.width/ot,Qt=k.height/kt;it=k.x+Number(Ke.rel_start_x)/100*ot*Ut,vt=k.y+Number(Ke.rel_start_y)/100*kt*Qt,st=k.x+Number(Ke.rel_end_x)/100*ot*Ut,qe=k.y+Number(Ke.rel_end_y)/100*kt*Qt}else{const ot=k.scale??k.scaleX??1,kt=Number(Ke.start.x),Ut=Number(Ke.start.y),Qt=Number(Ke.end.x),Gt=Number(Ke.end.y);kt<=k.width+1&&Qt<=k.width+1&&Ut<=k.height+1&&Gt<=k.height+1?(it=k.x+(isNaN(kt)?0:kt),vt=k.y+(isNaN(Ut)?0:Ut),st=k.x+(isNaN(Qt)?0:Qt),qe=k.y+(isNaN(Gt)?0:Gt)):(it=k.x+(isNaN(kt)?0:kt)*ot,vt=k.y+(isNaN(Ut)?0:Ut)*ot,st=k.x+(isNaN(Qt)?0:Qt)*ot,qe=k.y+(isNaN(Gt)?0:Gt)*ot)}return c.jsx(wt.Arrow,{points:[it,vt,st,qe],stroke:Ke.style?.color||"#dc3545",fill:Ke.style?.color||"#dc3545",strokeWidth:Ke.style?.thickness||3,pointerLength:10,pointerWidth:10},Ke.id)}).filter(Boolean)):[]},[k,He,a]),Mt=_.useCallback(()=>{if(!He)return[];const wt=u();return wt?He.words.map(Ke=>{const it=d[Ke.id]||{x:0,y:0},vt=typeof Ke.word=="string"?Ke.word:"",st=Math.max(60,vt.length*8+20);return Object.values(h).includes(Ke.id)?null:c.jsxs(wt.Group,{x:it.x,y:it.y,draggable:!0,onDragEnd:ot=>ur(ot,Ke.id),children:[c.jsx(wt.Rect,{width:st,height:34,fill:"#ffffff",stroke:"#ced4da",strokeWidth:1,cornerRadius:4,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffset:{x:0,y:2},shadowOpacity:.3,listening:!0}),c.jsx(wt.KonvaText,{text:vt,fontSize:14,fontFamily:"Arial",fill:"#343a40",padding:8,align:"center",verticalAlign:"middle",width:st,height:34,listening:!1})]},Ke.id)}):[]},[He,d,h,k,a]),ur=_.useCallback((wt,Ke)=>{const it=wt.target.x(),vt=wt.target.y();if(f(Zt=>({...Zt,[Ke]:{x:it,y:vt}})),!k||!He)return;const st=He.words.find(Zt=>Zt.id===Ke);if(!st)return;const qe=typeof st.word=="string"?st.word:"",ot=Math.max(60,qe.length*8+20),kt={x:it,y:vt,width:ot,height:34},Ut=k.scale??k.scaleX??1,Qt=(Zt,ir)=>!(ir.x>Zt.x+Zt.width||ir.x+ir.width<Zt.x||ir.y>Zt.y+Zt.height||ir.y+ir.height<Zt.y),Gt=He.blocks.find(Zt=>{const ir=Zt.coordinates,kr={x:k.x+ir.x*Ut,y:k.y+ir.y*Ut,width:ir.width*Ut,height:ir.height*Ut};return Qt(kt,kr)});if(Gt){g(Me=>({...Me,[Gt.id]:Ke}));const Zt=Gt.coordinates,ir=k.x+Zt.x*Ut,kr=k.y+Zt.y*Ut,ve=Zt.width*Ut,Pe=Zt.height*Ut;f(Me=>({...Me,[Ke]:{x:ir+(ve-ot)/2,y:kr+(Pe-34)/2}})),W(`Word "${st.word}" placed in block`,"success")}},[k,He,W]),wr=_.useCallback(()=>{if(!He)return 0;const wt=He.words.length,Ke=Object.keys(h).length;return wt>0?Ke/wt*100:0},[He,h]);_.useEffect(()=>{const wt=wr();y(wt)},[wr]),_.useEffect(()=>{if(e&&!F){const wt=new Date;L(wt),console.log(" Test timer started at:",wt.toISOString()),G(),console.log(" Anti-cheating tracking started")}},[e,F,G]);const dr=_.useCallback(async()=>{if(He){T(!0);try{const wt=He.words.length;let Ke=0;console.log(" Scoring check - placedWords:",h),console.log(" Scoring check - blocks:",He.blocks.map(ze=>({id:ze.id,word:ze.word}))),console.log(" Scoring check - words:",He.words.map(ze=>({id:ze.id,word:ze.word}))),He.blocks.forEach(ze=>{const At=h[ze.id];if(console.log(` Block ${ze.id} (expects "${ze.word}") has placed word ID: ${At}`),At){const Kt=He.words.find(hr=>hr.id===At);console.log(" Placed word:",Kt),Kt&&Kt.word===ze.word?(Ke++,console.log(` Correct! Block ${ze.id} has correct word "${Kt.word}"`)):console.log(` Incorrect! Block ${ze.id} expected "${ze.word}" but got "${Kt?.word||"nothing"}"`)}else console.log(` Block ${ze.id} has no word placed`)});const it=Ke,vt=wt;console.log(` Final Score: ${it}/${vt} (${Math.round(it/vt*100)}%)`);const st=new Date,qe=F?Math.round((st-F)/1e3):0,ot=F?F.toISOString():st.toISOString();console.log(" Test timing:",{startedAt:ot,endTime:st.toISOString(),timeTaken:`${qe} seconds`});const kt=re();console.log(" Anti-cheating data for submission:",kt);const Ut=z.student_id,Qt=`retest_assignment_id_${Ut}_matching_type_${e.id}`,Gt=localStorage.getItem(Qt),{academicCalendarService:Zt}=await Qa(async()=>{const{academicCalendarService:ze}=await Promise.resolve().then(()=>o3);return{academicCalendarService:ze}},void 0);await Zt.loadAcademicCalendar();const kr=Zt.getCurrentTerm()?.id;if(!kr)throw new Error("No current academic period found");const ve={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Ut,academic_period_id:kr,answers:h,score:it,maxScore:vt,time_taken:qe,started_at:ot,submitted_at:st.toISOString(),caught_cheating:kt.caught_cheating,visibility_change_times:kt.visibility_change_times,retest_assignment_id:Gt?Number(Gt):null,parent_test_id:e.id};console.log(" Submitting test data:",ve);const Me=await(await R("/.netlify/functions/submit-matching-type-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)})).json();if(console.log(" Submission response:",Me),Me.success){if(W("Test submitted successfully!","success"),Q(),q(),z?.student_id&&n1(z.student_id,"matching_type",e.id),!!Gt&&z?.student_id){let Kt=3;try{const ft=localStorage.getItem(`student_active_tests_${z.student_id}`);if(ft){const Wt=JSON.parse(ft)?.tests?.find(Fe=>Fe.test_id===e.id&&Fe.test_type==="matching_type");Wt&&(Kt=Wt.retest_attempts_left||Wt.max_attempts||3)}}catch(ft){console.error("Error checking active tests cache:",ft)}const Ye=(it>0&&vt>0?it/vt*100:0)>=50;if(Ye){const ft=`retest_attempt${Kt}_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(ft,"true"),console.log(" Passed retest, marking last-slot key:",ft);let lt=0;for(let xt=1;xt<=10;xt++){const yt=`retest_attempt${xt}_${z.student_id}_matching_type_${e.id}`;localStorage.getItem(yt)==="true"&&lt++}const Wt=`test_completed_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(Wt,"true"),console.log(" Marked retest as completed (student passed):",Wt);const Fe=`retest_attempts_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(Fe,JSON.stringify({used:lt,max:Kt})),console.log(" Set retest attempts metadata (student passed):",Fe,{used:lt,max:Kt})}else{let ft=1;for(let yt=1;yt<=10;yt++){const zt=`retest_attempt${yt}_${z.student_id}_matching_type_${e.id}`;if(localStorage.getItem(zt)!=="true"){ft=yt;break}}const lt=`retest_attempt${ft}_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(lt,"true"),console.log(" Marked retest attempt as completed:",lt);let Wt=0;for(let yt=1;yt<=10;yt++){const zt=`retest_attempt${yt}_${z.student_id}_matching_type_${e.id}`;localStorage.getItem(zt)==="true"&&Wt++}const Fe=Kt-Wt,xt=Fe<=0||Ye;if(console.log(" Retest completion check:",{usedAttempts:Wt,maxAttempts:Kt,attemptsLeft:Fe,passed:Ye,shouldComplete:xt}),xt){const yt=`test_completed_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(yt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",yt);const zt=`retest_attempts_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(zt,JSON.stringify({used:Wt,max:Kt})),console.log(" Set retest attempts metadata (attempts exhausted):",zt,{used:Wt,max:Kt})}}}else if(z?.student_id){const Kt=`test_completed_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(Kt,"true"),console.log(" Test marked as completed in localStorage:",Kt)}if(z?.student_id){const{setCachedData:Kt,CACHE_TTL:hr}=await Qa(async()=>{const{setCachedData:ft,CACHE_TTL:lt}=await Promise.resolve().then(()=>dp);return{setCachedData:ft,CACHE_TTL:lt}},void 0),Ye=`student_results_table_${z.student_id}`;Kt(Ye,Me,hr.student_results_table),console.log(" Test results cached with key:",Ye)}const At=`retest1_${Ut}_matching_type_${e.id}`;localStorage.removeItem(At),localStorage.removeItem(Qt),t&&(I(!1),t(it))}else throw new Error(Me.message||"Failed to submit test")}catch(wt){console.error(" Error submitting test:",wt),W(`Error submitting test: ${wt.message}`,"error")}finally{T(!1)}}},[He,h,e,z,F,R,W,t]);return!e||!He?c.jsx(fn,{}):c.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsx("div",{className:"flex justify-end mb-2",children:c.jsx(tt,{onClick:We,variant:"outline",size:"sm",children:"Back to Cabinet"})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.test_name})}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(x),"%"]})]})]}),c.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x}%`}})})]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:c.jsx("div",{className:"lg:col-span-3",children:c.jsxs(Ht,{className:"p-4",children:[c.jsx("div",{className:"mb-4 text-center",children:c.jsx(tt,{onClick:je,variant:"secondary",children:"Reset"})}),c.jsx("div",{ref:se,className:"w-full bg-gray-100 rounded-lg overflow-hidden",style:{height:`${le}px`},children:k&&a?(()=>{const{Stage:wt,Layer:Ke,KonvaImage:it}=u();return c.jsxs(wt,{ref:ce,width:se.current?.clientWidth||800,height:le,children:[c.jsxs(Ke,{children:[c.jsx(it,{ref:pe,image:k.image,x:k.x,y:k.y,width:k.width,height:k.height,listening:!1}),Et(),Rt()]}),c.jsx(Ke,{listening:!0,children:Mt()})]})})():k?c.jsxs("div",{className:"flex items-center justify-center h-full",children:[c.jsx(fn,{size:"lg"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Loading Konva canvas..."})]}):null}),c.jsx("div",{className:"mt-4 text-center",children:c.jsx(tt,{onClick:()=>B(!0),disabled:v||x<100,children:v?"Submitting...":"Submit Test"})})]})})}),c.jsx(Ba,{isOpen:V,onClose:()=>J(!1),title:"Reset Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and placed words."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:()=>J(!1),variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:Ne,variant:"primary",children:"Reset"})]})]})}),c.jsx(Ba,{isOpen:ne,onClose:Nt,title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet? Your progress will be saved but you will exit the test."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:Nt,variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:$e,variant:"primary",children:"Go Back"})]})]})}),c.jsx(Ba,{isOpen:ie,onClose:()=>B(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:()=>B(!1),variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:()=>{B(!1),dr()},variant:"primary",children:"Submit"})]})]})})]})})},jde=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Ms(),{makeAuthenticatedRequest:o}=zl(),{showNotification:l}=si(),[u,d]=_.useState([{leftWord:"",rightWord:""},{leftWord:"",rightWord:""},{leftWord:"",rightWord:""}]),[f,h]=_.useState("drag"),[g,x]=_.useState(!1),[y,v]=_.useState(null),T=_.useCallback(()=>{d(M=>[...M,{leftWord:"",rightWord:""}])},[]),k=_.useCallback(M=>{u.length>1&&d(j=>j.filter((A,F)=>F!==M))},[u.length]),b=_.useCallback((M,j)=>{d(A=>A.map((F,L)=>L===M?{...F,leftWord:j}:F))},[]),E=_.useCallback((M,j)=>{d(A=>A.map((F,L)=>L===M?{...F,rightWord:j}:F))},[]),N=_.useCallback(()=>u.every(M=>M.leftWord.trim()&&M.rightWord.trim()),[u]),P=_.useCallback(async()=>{if(!N()){l("Please fill in all word pairs","error");return}x(!0),v(null);try{const M=u.map((A,F)=>({question_id:F+1,left_word:A.leftWord.trim(),right_word:A.rightWord.trim()})),j={test_name:e,num_questions:M.length,interaction_type:f,questions:M};console.log(" Saving word matching test:",j),t({testName:e,numQuestions:M.length,interactionType:f,wordPairs:u,questions:M})}catch(M){console.error("Error saving word matching test:",M),v(M.message),l("Failed to save test: "+M.message,"error")}finally{x(!1)}},[e,u,f,N,o,l,t]);return c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-6xl mx-auto p-0",children:[c.jsx(Ht,{className:"mb-6",children:c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Interaction Type"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="drag"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("drag"),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:f==="drag",onChange:()=>h("drag"),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Drag & Drop"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Students drag words from left list to right list"}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" Easier for younger students",c.jsx("br",{})," Visual feedback on placement",c.jsx("br",{})," Mobile-friendly"]})]}),c.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="arrow"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("arrow"),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:f==="arrow",onChange:()=>h("arrow"),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Draw Arrows"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Students draw arrows connecting matching words"}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" More challenging",c.jsx("br",{})," Better for visual learners",c.jsx("br",{})," Requires precision"]})]})]})]})}),c.jsx(Ht,{className:"mb-6",children:c.jsxs("div",{className:"word-pairs-section",children:[c.jsxs("div",{className:"pairs-header flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Word Pairs"}),c.jsx(tt,{onClick:T,size:"sm",children:"+ Add Pair"})]}),c.jsx("div",{className:"pairs-list space-y-3 p-0 md:p-4",children:u.map((M,j)=>c.jsxs("div",{className:"word-pair-row flex items-center space-x-2 md:space-x-4 p-2 md:p-4 bg-gray-50 rounded-lg border",children:[c.jsx("div",{className:"pair-number flex-shrink-0",children:c.jsx("span",{className:"number-badge w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs md:text-sm font-semibold",children:j+1})}),c.jsx("div",{className:"left-word flex-1",children:c.jsx("input",{type:"text",value:M.leftWord,onChange:A=>b(j,A.target.value),placeholder:"Left word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsx("div",{className:"pair-arrow flex-shrink-0 text-gray-500 text-lg md:text-xl",children:""}),c.jsx("div",{className:"right-word flex-1",children:c.jsx("input",{type:"text",value:M.rightWord,onChange:A=>E(j,A.target.value),placeholder:"Right word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsx("div",{className:"pair-actions flex-shrink-0",children:c.jsx(tt,{onClick:()=>k(j),variant:"outline",size:"sm",className:"remove-btn w-6 h-6 md:w-8 md:h-8 p-0 text-red-500 hover:bg-red-50",disabled:u.length<=1,children:""})})]},j))})]})}),c.jsx(Ht,{className:"mb-6",children:c.jsxs("div",{className:"preview-section",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),c.jsx("div",{className:"preview-pairs space-y-2",children:u.map((M,j)=>c.jsxs("div",{className:"preview-pair flex items-center space-x-2 text-sm",children:[c.jsxs("span",{className:"preview-number font-semibold text-blue-600",children:[j+1,"."]}),c.jsx("span",{className:"preview-left px-2 py-1 bg-white rounded border",children:M.leftWord||"Left word"}),c.jsx("span",{className:"preview-arrow text-gray-500",children:""}),c.jsx("span",{className:"preview-right px-2 py-1 bg-white rounded border",children:M.rightWord||"Right word"})]},j))})]})}),c.jsxs("div",{className:"flex justify-center space-x-4",children:[c.jsx(tt,{onClick:P,disabled:!N()||g,className:"px-8",children:g?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test"}),c.jsx(tt,{onClick:r,variant:"secondary",children:"Cancel"})]}),y&&c.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600",children:y})})]})},Pde=(e,t)=>{const[r,n,s]=aW(`test_progress_${e}_${t}`,{}),[a,i]=_.useState(!1),[o,l]=_.useState(0),[u,d]=_.useState(0),[f,h]=_.useState(!1),[g,x]=_.useState(null),y=_.useRef(null),v=_.useRef(null),T=_.useCallback((I,H)=>{if(!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}n(W=>({...W,[I]:H})),console.log(`Saved progress for question ${I}:`,H)},[n]),k=_.useCallback(I=>!window.tokenManager||!window.tokenManager.isAuthenticated()?(console.warn("[WARN] Cannot get progress: No valid JWT token"),null):r[I]||null,[r]),b=_.useCallback(()=>{if(console.log(`[DEBUG] clearTestProgress called with testType: ${e}, testId: ${t}`),!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const I=`test_progress_${e}_${t}`;console.log(`[DEBUG] Removing localStorage key: ${I}`);const H=Object.keys(r).length>0;s(),console.log(H?`[DEBUG] Progress cleared for test ${e}_${t}`:`[DEBUG] No progress found to clear for test ${e}_${t}`)},[s,e,t,r]),E=_.useCallback(()=>{y.current&&(E(y.current),y.current=null),v.current&&(E(v.current),v.current=null)},[]),N=_.useCallback(()=>{console.log(`[DEBUG] setupProgressTrackingForPage called with testType: ${e}, testId: ${t}`),v.current=setInterval(()=>{console.log("[DEBUG] Auto-saving progress..."),F()},3e4),console.log("[DEBUG] Progress tracking interval set up (30 seconds)")},[e,t]),P=_.useCallback(()=>{console.log(`[DEBUG] updateProgressDisplayForPage called with testType: ${e}, testId: ${t}`);const I=A(),H=u>0?Math.round(I/u*100):0;return console.log(`[DEBUG] Progress: ${I}/${u} questions answered`),console.log(`[DEBUG] Progress bar updated: ${H}%`),{answeredQuestions:I,totalQuestions:u,percentage:H}},[e,t,u]),M=_.useCallback(()=>{console.log("[DEBUG] updateSubmitButtonStateForPage called");const I=A();console.log(`[DEBUG] Submit button state check: ${I}/${u} questions answered`);const H=I===u&&u>0;return console.log(H?"[DEBUG] Submit button enabled - all questions answered":"[DEBUG] Submit button disabled - not all questions answered"),H},[u]),j=_.useCallback(()=>{console.log(`[DEBUG] loadSavedProgressForPage called with testType: ${e}, testId: ${t}`);try{if(console.log("[DEBUG] Loaded progress from localStorage:",r),Object.keys(r).length===0){console.log("[DEBUG] No saved progress found");return}const I=Object.keys(r).length;l(I),console.log(`[DEBUG] Restored ${I} answered questions`)}catch(I){console.error("[ERROR] Failed to load saved progress:",I),x(I.message)}},[e,t,r]),A=_.useCallback(()=>{console.log(`[DEBUG] getAnsweredQuestionsCountForPage called with testType: ${e}`);const I=Object.keys(r).length;return l(I),console.log(`[DEBUG] Found ${I} answered questions`),I},[e,r]),F=_.useCallback(()=>{console.log(`[DEBUG] saveProgressForPage called with testType: ${e}, testId: ${t}`);try{console.log("[DEBUG] Progress saved:",r)}catch(I){console.error("[ERROR] Failed to save progress:",I),x(I.message)}},[e,t,r]),L=_.useCallback(()=>{try{const I=`test_completed_${e}_${t}`,H=localStorage.getItem(I)==="true";return i(H),H}catch(I){return console.error("Error checking test completion:",I),!1}},[e,t]),V=_.useCallback(()=>{try{const I=`test_completed_${e}_${t}`;localStorage.setItem(I,"true"),i(!0),console.log(`Test ${e}_${t} marked as completed`)}catch(I){console.error("Error marking test completed:",I)}},[e,t]),J=_.useCallback(()=>{console.log("Marking test completed in UI:",{testType:e,testId:t}),V()},[e,t,V]),ne=_.useCallback(I=>{try{const H=`test_creation_state_${e}_${t}`;localStorage.setItem(H,JSON.stringify(I)),console.log("Test creation state saved:",I)}catch(H){console.error("Error saving test creation state:",H)}},[e,t]),ee=_.useCallback(()=>{try{const I=`test_creation_state_${e}_${t}`;localStorage.removeItem(I),console.log("Test creation state cleared")}catch(I){console.error("Error clearing test creation state:",I)}},[e,t]),ie=_.useCallback((I,H)=>{try{const W=`test_step_${e}_${t}_${I}`;localStorage.setItem(W,JSON.stringify(H)),console.log(`Step ${I} data saved:`,H)}catch(W){console.error(`Error saving step ${I} data:`,W)}},[e,t]),B=_.useCallback(I=>{try{const H=`test_step_${e}_${t}_${I}`,W=localStorage.getItem(H);return W?JSON.parse(W):null}catch(H){return console.error(`Error restoring step ${I} data:`,H),null}},[e,t]),Y=_.useCallback(()=>{try{const I=`test_creation_state_${e}_${t}`,H=localStorage.getItem(I);return H?JSON.parse(H):null}catch(I){return console.error("Error restoring test creation state:",I),null}},[e,t]);return _.useEffect(()=>()=>{E()},[e,t,N,j,E]),_.useEffect(()=>{A()},[r,A]),{progress:r,isCompleted:a,answeredCount:o,totalQuestions:u,isLoading:f,error:g,saveProgress:T,getProgress:k,clearProgress:b,clearInterval:E,setupProgressTracking:N,updateProgress:P,updateSubmitButton:M,loadProgress:j,getAnsweredCount:A,saveProgressForPage:F,checkCompleted:L,markCompleted:V,markCompletedUI:J,saveState:ne,clearState:ee,saveStepData:ie,restoreStepData:B,restoreState:Y,setTotalQuestions:d,setError:x}},Mde=({testData:e,onTestComplete:t,onBackToCabinet:r})=>{const{user:n}=Ms(),{makeAuthenticatedRequest:s}=zl(),{showNotification:a}=si(),[i,o]=_.useState({width:window.innerWidth,height:window.innerHeight});_.useEffect(()=>{const qe=()=>{o({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",qe),()=>window.removeEventListener("resize",qe)},[]);const{getCheatingData:l,stopTracking:u,clearData:d}=v1(),[f,h]=_.useState(null),[g,x]=_.useState({}),[y,v]=_.useState(null),T=_.useRef(null),[k,b]=_.useState(800),E={VERY_SMALL:400,MOBILE:600,TABLET:900},N={VERY_SMALL:.6,MOBILE:.8,TABLET:.9,DESKTOP:1},P={CANVAS_HEIGHT:400,BLOCK_WIDTH:140,BLOCK_HEIGHT:50,BLOCK_SPACING:80,MARGIN:50},M=i.width<E.VERY_SMALL,j=i.width>=E.VERY_SMALL&&i.width<E.MOBILE,A=i.width>=E.MOBILE&&i.width<E.TABLET;i.width>=E.TABLET;const F=M?N.VERY_SMALL:j?N.MOBILE:A?N.TABLET:N.DESKTOP;_.useEffect(()=>{const qe=()=>{if(T.current){const kt=T.current.clientWidth;console.log(" Container width detected:",kt),kt>0&&b(kt)}};qe();const ot=[setTimeout(qe,50),setTimeout(qe,100),setTimeout(qe,200),setTimeout(qe,500)];return window.addEventListener("resize",qe),()=>{ot.forEach(kt=>clearTimeout(kt)),window.removeEventListener("resize",qe)}},[f]);const L=P.BLOCK_WIDTH*F,V=P.BLOCK_HEIGHT*F,J=P.BLOCK_SPACING*F,ne=P.MARGIN*F,ee=ne;console.log(" Mobile Debug:",{screenWidth:i.width,containerWidth:T.current?.clientWidth,canvasWidth:k,scale:F,blockWidth:L,margin:ne,leftBlockX:ee,displayDataLoaded:!!f});const ie=ee+L+20+L+ne,B=ie<=k;let Y,I=L,H=V;if(B)Y=Math.min(Math.max(ee+L+20,k-L-ne),k-L-ne);else{const qe=k-ne*2,ot=Math.floor((qe-20)/2);I=Math.max(60,ot),H=Math.max(30,H*(I/L)),Y=ee+I+20,console.log(" Very small screen - adjusted block size:",{availableWidth:qe,maxBlockWidth:ot,actualBlockWidth:I,actualBlockHeight:H})}console.log(" Right Block Position:",{rightBlockX:Y,rightBlockRightEdge:Y+I,canvasWidth:k,fits:Y+I<=k,canFitSideBySide:B,minRequiredWidth:ie});const W=ne,R={DRAGGED_WORD:Math.max(8,14*F),ORIGINAL_WORD:Math.max(10,16*F),LEFT_WORD:Math.max(10,14*F)},z=Math.max(1,3*F),G=_.useCallback((qe,ot,kt)=>{if(!qe)return H;const Ut=ot*.55,Qt=Math.floor(kt/Ut),Gt=Math.ceil(qe.length/Qt),Zt=ot*1.1,ir=12*F,kr=Gt*Zt+ir,ve=Math.max(H*.8,30*F);return Math.max(ve,kr)},[H,F]),re=_.useCallback(()=>{if(!f?.leftWords||!f?.rightWords)return P.CANVAS_HEIGHT*F;let qe=ne*2;for(let kt=0;kt<f.leftWords.length;kt++){const Ut=f.leftWords[kt],Qt=f.rightWords[kt],Gt=G(Ut,R.LEFT_WORD,I),Zt=G(Qt,R.ORIGINAL_WORD,I),ir=Math.max(Gt,Zt);qe+=ir,kt<f.leftWords.length-1&&(qe+=20*F)}const ot=P.CANVAS_HEIGHT*F;return Math.max(ot,qe)},[f,G,R,I,ne,F])();_.useCallback((qe,ot)=>{if(!qe||!ot)return J;const kt=qe.map((Gt,Zt)=>{const ir=ot[Zt],kr=G(Gt,R.LEFT_WORD,I),ve=G(ir,R.ORIGINAL_WORD,I);return Math.max(kr,ve)}),Ut=Math.max(...kt),Qt=20*F;return Ut+Qt},[J,G,R,I,F]);const se=_.useCallback(()=>{if(!f?.leftWords||!f?.rightWords)return[];const qe=[];let ot=ne;for(let kt=0;kt<f.leftWords.length;kt++){const Ut=f.leftWords[kt],Qt=f.rightWords[kt],Gt=G(Ut,R.LEFT_WORD,I),Zt=G(Qt,R.ORIGINAL_WORD,I),ir=Math.max(Gt,Zt);qe.push({y:ot,leftHeight:Gt,rightHeight:Zt,rowHeight:ir}),ot+=ir+20*F}return qe},[f,G,R,I,ne,F])(),[ce,pe]=_.useState([]),[ke,le]=_.useState(!1),[ye,je]=_.useState(!1),[Ne,We]=_.useState(null),[$e,Nt]=_.useState(!1),[He,Et]=_.useState(!1),[Rt,Mt]=_.useState(!0),ur=_.useRef(null);a3(Rt,_.useCallback(({confirm:qe,cancel:ot})=>{ur.current={confirm:qe,cancel:ot},Et(!0)},[])),_.useEffect(()=>{if(e){if(console.log(" WordMatchingStudent: Initializing test data:",e),console.log(" Interaction type:",e.interaction_type),console.log(" Left words:",e.leftWords),console.log(" Right words:",e.rightWords),console.log(" Correct pairs:",e.correctPairs),!Array.isArray(e.leftWords)||!Array.isArray(e.rightWords)){console.error(" Invalid data structure - leftWords or rightWords not arrays:",{leftWords:e.leftWords,rightWords:e.rightWords});return}if(h(e),We(new Date),n?.student_id){const qe=`test_progress_${n.student_id}_word_matching_${e.id}`,ot=Ta(qe);ot&&(x(ot.answers||{}),pe(ot.arrows||[]),We(new Date(ot.startTime)),console.log(" Test progress restored:",ot))}}},[e,n?.student_id]),_.useEffect(()=>{if(f&&Ne&&n?.student_id){const qe=setInterval(()=>{const ot={answers:g,arrows:ce,startTime:Ne.toISOString()},kt=`test_progress_${n.student_id}_word_matching_${e.id}`;Bs(kt,ot,Cs.test_progress),console.log(" Progress auto-saved")},3e4);return()=>clearInterval(qe)}},[f,g,ce,Ne,n?.student_id,e?.id]);const wr=_.useCallback((qe,ot)=>{if(console.log(" handleWordClick called:",{side:qe,index:ot,interactionType:e?.interaction_type,selectedWord:y}),e?.interaction_type!=="arrow"){console.log(" Not arrow mode, ignoring click");return}if(y){if(y.side===qe&&y.index===ot)console.log(" Deselecting word"),v(null);else if(y.side!==qe){console.log(" Creating arrow connection:",{startWord:y,endWord:{side:qe,index:ot}});const kt={id:Date.now().toString(),startWord:y,endWord:{side:qe,index:ot},color:"#3B82F6"};pe(Ut=>{const Qt=[...Ut,kt];return console.log(" Updated arrows:",Qt),Qt}),x(Ut=>{const Qt={...Ut,[y.index]:ot};return console.log(" Updated answers:",Qt),Qt}),v(null)}}else console.log(" Selecting word:",{side:qe,index:ot}),v({side:qe,index:ot})},[y,e?.interaction_type]);_.useCallback((qe,ot)=>{e.interaction_type==="drag"&&x(kt=>({...kt,[qe]:ot}))},[e?.interaction_type]);const dr=_.useCallback(()=>{Nt(!0)},[]),wt=_.useCallback(()=>{x({}),pe([]),v(null),Nt(!1)},[]),Ke=_.useCallback(()=>{ur.current=null,Et(!0)},[]),it=_.useCallback(()=>{Et(!1);const qe=ur.current;if(ur.current=null,qe?.confirm){Mt(!1),qe.confirm();return}Mt(!1),r&&r()},[r]),vt=_.useCallback(()=>{const qe=ur.current;ur.current=null,qe?.cancel&&qe.cancel(),Et(!1)},[]),st=_.useCallback(async()=>{if(f){le(!0);try{const qe=f?.leftWords?.length||0;let ot=0,kt={};e.interaction_type==="drag"?Object.entries(g).forEach(([lt,Wt])=>{const Fe=f?.correctPairs?.[lt];Wt===Fe&&ot++,kt[lt]=Wt}):ce.forEach(lt=>{const Wt=lt.startWord.side==="left"?lt.startWord.index:lt.endWord.index,Fe=lt.startWord.side==="right"?lt.startWord.index:lt.endWord.index;f?.correctPairs?.[Wt]===Fe&&ot++,kt[Wt]=Fe});const Ut=ot,Qt=qe;console.log(` Final Score: ${Ut}/${Qt} (${Math.round(Ut/Qt*100)}%)`);const Gt=new Date,Zt=Ne?Math.round((Gt-Ne)/1e3):0,ir=Ne?Ne.toISOString():Gt.toISOString(),kr=l(),ve=n.student_id,Pe=`retest_assignment_id_${ve}_word_matching_${e.id}`,Me=localStorage.getItem(Pe),{academicCalendarService:ze}=await Qa(async()=>{const{academicCalendarService:lt}=await Promise.resolve().then(()=>o3);return{academicCalendarService:lt}},void 0);await ze.loadAcademicCalendar();const Kt=ze.getCurrentTerm()?.id;if(!Kt)throw new Error("No current academic period found");const hr={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:ve,academic_period_id:Kt,parent_test_id:e.id,retest_assignment_id:Me?Number(Me):null,interaction_type:e.interaction_type,answers:kt,score:Ut,maxScore:Qt,time_taken:Zt,started_at:ir,submitted_at:Gt.toISOString(),caught_cheating:kr.caught_cheating,visibility_change_times:kr.visibility_change_times};console.log(" Submission data being sent:",hr),console.log(" TestData structure:",e),console.log(" Submitting test results...");const Ye=await s("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(hr)});console.log(" Submission response received:",Ye.status);const ft=await Ye.json();if(ft.success){if(a("Test submitted successfully!","success"),u(),d(),n?.student_id&&n1(n.student_id,"word_matching",e.id),!!Me&&n?.student_id){let Wt=3;try{const yt=localStorage.getItem(`student_active_tests_${n.student_id}`);if(yt){const or=JSON.parse(yt)?.tests?.find(de=>de.test_id===e.id&&de.test_type==="word_matching");or&&(Wt=or.retest_attempts_left||or.max_attempts||3)}}catch(yt){console.error("Error checking active tests cache:",yt)}const xt=(Ut>0&&Qt>0?Ut/Qt*100:0)>=50;if(xt){const yt=`retest_attempt${Wt}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(yt,"true"),console.log(" Passed retest, marking last-slot key:",yt);let zt=0;for(let _e=1;_e<=10;_e++){const ge=`retest_attempt${_e}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(ge)==="true"&&zt++}const or=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(or,"true"),console.log(" Marked retest as completed (student passed):",or);const de=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(de,JSON.stringify({used:zt,max:Wt})),console.log(" Set retest attempts metadata (student passed):",de,{used:zt,max:Wt})}else{let yt=1;for(let ge=1;ge<=10;ge++){const be=`retest_attempt${ge}_${n.student_id}_word_matching_${e.id}`;if(localStorage.getItem(be)!=="true"){yt=ge;break}}const zt=`retest_attempt${yt}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(zt,"true"),console.log(" Marked retest attempt as completed:",zt);let or=0;for(let ge=1;ge<=10;ge++){const be=`retest_attempt${ge}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(be)==="true"&&or++}const de=Wt-or,_e=de<=0||xt;if(console.log(" Retest completion check:",{usedAttempts:or,maxAttempts:Wt,attemptsLeft:de,passed:xt,shouldComplete:_e}),_e){const ge=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(ge,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",ge);const be=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(be,JSON.stringify({used:or,max:Wt})),console.log(" Set retest attempts metadata (attempts exhausted):",be,{used:or,max:Wt})}}}else if(n?.student_id){const Wt=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Wt,"true"),console.log(" Test marked as completed in localStorage:",Wt)}if(n?.student_id){const Wt=`student_results_table_${n.student_id}`;Bs(Wt,ft,Cs.student_results_table),console.log(" Test results cached with key:",Wt)}if(n?.student_id){const Wt=`retest1_${ve}_word_matching_${e.id}`;localStorage.removeItem(Wt),localStorage.removeItem(Pe)}t&&(Mt(!1),t(Ut)),le(!1)}else throw new Error(ft.message||"Failed to submit test")}catch(qe){console.error("Error submitting test:",qe),le(!1)}}},[f,g,ce,e,n,Ne,l,u,d,s,t]);return f?c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl mx-auto p-6",children:[c.jsx(Ba,{isOpen:ke,onClose:()=>{},title:"Submitting",size:"small",children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[c.jsx(fn,{size:"lg",className:"mb-3"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Submitting test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your results"})]})}),c.jsx("div",{className:"flex justify-end mb-2",children:c.jsx(tt,{onClick:Ke,variant:"outline",size:"sm",disabled:ke,children:"Back to Cabinet"})}),c.jsx(Ht,{className:"mb-6",children:c.jsxs("div",{className:"text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.test_name}),c.jsx("p",{className:"text-gray-600",children:e.interaction_type==="drag"?"Drag words from left to right to match them":"Click on the word or phrase on the left, then click on the matching word or phrase on the right to connect them"})]})}),e.interaction_type==="drag"?c.jsx(Ht,{className:"mb-6",children:c.jsx("div",{ref:T,className:"relative w-full",children:c.jsx(vm,{width:k,height:re,className:`border-2 border-gray-200 rounded-lg ${ke?"pointer-events-none opacity-50":""}`,children:c.jsxs(ym,{children:[f.leftWords.map((qe,ot)=>{const kt=g[ot]!==void 0,Ut=G(qe,R.LEFT_WORD,I),Qt=se[ot],Gt=Qt?Qt.y:W+ot*J;return c.jsxs(tu,{x:ee,y:Gt,draggable:!kt,onDragStart:Zt=>{Zt.target.moveToTop()},onDragEnd:Zt=>{Zt.target.getStage();const ir=f.rightWords,kr=I+60,ve=Y-30;console.log(" Drop detection - Word dropped at:",Zt.target.x(),Zt.target.y());for(let Pe=0;Pe<ir.length;Pe++){const Me=ir[Pe],ze=se[Pe],At=ze?ze.y:W+Pe*J,Kt=G(Me,R.ORIGINAL_WORD,I),hr=ve,Ye=ve+kr,ft=At,lt=At+Kt;if(console.log(` Checking drop zone ${Pe}:`,{left:hr,right:Ye,top:ft,bottom:lt,word:ir[Pe]}),Zt.target.x()>=hr&&Zt.target.x()<=Ye&&Zt.target.y()>=ft&&Zt.target.y()<=lt){if(Object.entries(g).some(([Fe,xt])=>xt===Pe&&parseInt(Fe)!==ot)){console.log(` Dropzone ${Pe} is already occupied, resetting position`),Zt.target.position({x:ee,y:Gt});return}console.log(` Match found! Word "${f.leftWords[ot]}" matched with "${ir[Pe]}"`),x(Fe=>({...Fe,[ot]:Pe}));break}}console.log(" No match found, resetting position"),Zt.target.position({x:ee,y:Gt})},children:[c.jsx(_i,{width:I,height:Ut,fill:kt?"#e5e7eb":"#3b82f6",stroke:kt?"#9ca3af":"#1d4ed8",strokeWidth:2,cornerRadius:8,opacity:kt?.5:1}),c.jsx($u,{text:qe,x:I/2,y:Ut/2,fontSize:R.LEFT_WORD,fontFamily:"Arial",fill:kt?"#dc2626":"white",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:Ut/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${ot}`)}),f.rightWords.map((qe,ot)=>{const kt=G(qe,R.ORIGINAL_WORD,I),Ut=se[ot],Qt=Ut?Ut.y:W+ot*J,Gt=Object.keys(g).find(Zt=>g[Zt]===ot);return c.jsxs(tu,{x:Y,y:Qt,children:[c.jsx(_i,{width:I,height:kt,fill:Gt?"#10b981":"#f3f4f6",stroke:Gt?"#059669":"#d1d5db",strokeWidth:2,cornerRadius:8}),c.jsx($u,{text:qe,x:I/2,y:kt/2,fontSize:R.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:kt/2,wrap:"word",ellipsis:!0,listening:!1}),Gt&&c.jsx($u,{text:f.leftWords[Gt],x:I/2,y:kt-5,fontSize:R.DRAGGED_WORD,fontFamily:"Arial",fill:"#dc2626",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:R.DRAGGED_WORD/2,wrap:"word",ellipsis:!0})]},`right-${ot}`)})]})})})}):c.jsx(Ht,{className:"mb-6",children:c.jsx("div",{ref:T,className:"relative w-full",children:c.jsx(vm,{width:k,height:re,className:`border-2 border-gray-200 rounded-lg ${ke?"pointer-events-none opacity-50":""}`,children:c.jsxs(ym,{children:[f?.leftWords?.map((qe,ot)=>{const kt=G(qe,R.LEFT_WORD,I),Ut=se[ot],Qt=Ut?Ut.y:W+ot*J,Gt=y?.side==="left"&&y?.index===ot;return c.jsxs(tu,{x:ee,y:Qt,onClick:()=>wr("left",ot),children:[c.jsx(_i,{width:I,height:kt,fill:Gt?"#3b82f6":"#f3f4f6",stroke:Gt?"#1d4ed8":"#d1d5db",strokeWidth:Gt?3:2,cornerRadius:8}),c.jsx($u,{text:qe,x:I/2,y:kt/2,fontSize:R.LEFT_WORD,fontFamily:"Arial",fill:Gt?"white":"#374151",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:kt/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${ot}`)}),f?.rightWords?.map((qe,ot)=>{const kt=G(qe,R.ORIGINAL_WORD,I),Ut=se[ot],Qt=Ut?Ut.y:W+ot*J,Gt=y?.side==="right"&&y?.index===ot;return c.jsxs(tu,{x:Y,y:Qt,onClick:()=>wr("right",ot),children:[c.jsx(_i,{width:I,height:kt,fill:Gt?"#3b82f6":"#f3f4f6",stroke:Gt?"#1d4ed8":"#d1d5db",strokeWidth:Gt?3:2,cornerRadius:8}),c.jsx($u,{text:qe,x:I/2,y:kt/2,fontSize:R.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:kt/2,wrap:"word",ellipsis:!0,listening:!1})]},`right-${ot}`)}),ce.map((qe,ot)=>{const kt=f?.leftWords?.[qe.startWord.index],Ut=f?.rightWords?.[qe.endWord.index],Qt=G(kt,R.LEFT_WORD,I),Gt=G(Ut,R.ORIGINAL_WORD,I),Zt=se[qe.startWord.index],ir=se[qe.endWord.index],kr=Zt?Zt.y+Qt/2:W+qe.startWord.index*J+Qt/2,ve=ir?ir.y+Gt/2:W+qe.endWord.index*J+Gt/2;return c.jsx(Ui,{points:[ee+I+20,kr,Y-20,ve],stroke:qe.color||"#3b82f6",strokeWidth:z,lineCap:"round",lineJoin:"round"},ot)})]})})})}),c.jsx(Ht,{children:c.jsxs("div",{className:`submit-section flex justify-center space-x-4 ${ke?"pointer-events-none opacity-50":""}`,children:[c.jsx(tt,{onClick:dr,variant:"outline",disabled:ke,children:"Reset"}),c.jsx(tt,{onClick:()=>je(!0),disabled:ke,className:"px-8",children:ke?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",color:"white",className:"mr-2"}),"Submitting..."]}):"Submit Test"})]})}),c.jsx(Ba,{isOpen:$e&&!ke,onClose:()=>Nt(!1),title:"Reset Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and answers."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:()=>Nt(!1),variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:wt,variant:"primary",children:"Reset"})]})]})}),c.jsx(Ba,{isOpen:He,onClose:vt,title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the test? Your progress will be saved."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:vt,variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:it,variant:"primary",children:"Leave"})]})]})}),c.jsx(Ba,{isOpen:ye,onClose:()=>je(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:()=>je(!1),variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:()=>{je(!1),st()},variant:"primary",children:"Submit"})]})]})})]}):c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx(fn,{size:"lg"})})},Fde=({id:e,x:t,y:r,width:n,height:s,text:a,fontSize:i,color:o,isSelected:l,onSelect:u,onUpdate:d,onDelete:f})=>{const[h,g]=_.useState(!1),x=_.useRef(!1),y=_.useRef(null),v=_.useRef({x:0,y:0}),T=_.useRef(null),k=5,b=()=>{x.current=!0,g(!0)},E=()=>{if(x.current=!1,g(!1),T.current)try{T.current.draggable(!1)}catch{}},N=()=>{y.current&&(clearTimeout(y.current),y.current=null)};_.useEffect(()=>()=>{N()},[]),_.useEffect(()=>{if(T.current)try{T.current.draggable(x.current)}catch{}},[h]);const P=j=>{j.cancelBubble=!0,d(e,{isEditing:!0})},M=j=>{d(e,{x:j.target.x(),y:j.target.y()})};return c.jsxs(tu,{ref:T,x:t,y:r,draggable:h,dragBoundFunc:j=>x.current?j:{x:t,y:r},name:"textbox-group",onClick:j=>{j.cancelBubble=!0,u(e)},onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblClick:P,onDblTap:P,onPointerDown:j=>{j.cancelBubble=!0;const A=j.evt||{};v.current={x:A.clientX??0,y:A.clientY??0},N(),y.current=setTimeout(()=>{b()},400)},onPointerMove:j=>{if(!y.current)return;const A=j.evt||{},F=Math.abs((A.clientX??0)-v.current.x),L=Math.abs((A.clientY??0)-v.current.y);(F>k||L>k)&&N()},onPointerUp:j=>{j.cancelBubble=!0,N(),E()},onPointerLeave:()=>{N(),E()},onDragEnd:j=>{M(j),E()},children:[c.jsx(_i,{width:n,height:s,fill:l?"#fef3c7":"#ffffff",stroke:l?"#f59e0b":"#d1d5db",strokeWidth:l?2:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1},name:"textbox-rect",onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblTap:j=>{j.cancelBubble=!0,P(j)}}),c.jsx($u,{text:a,width:n,height:s,padding:8,align:"left",verticalAlign:"top",fontSize:i,fill:o,wrap:"word",name:"textbox-text",onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblTap:j=>{j.cancelBubble=!0,P(j)}})]})},Dde=({x:e,y:t,width:r,height:n,initialText:s,onSave:a,onCancel:i})=>{const o=_.useRef(null);_.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const l=u=>{u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),a(o.current.value)):u.key==="Escape"&&i()};return c.jsx("textarea",{ref:o,defaultValue:s,style:{position:"absolute",top:t,left:e,width:r,height:n,fontSize:"14px",border:"2px solid #f59e0b",borderRadius:"6px",padding:"8px",background:"white",resize:"none",outline:"none",fontFamily:"inherit",lineHeight:"1.4",zIndex:1e3},onKeyDown:l,onBlur:()=>a(o.current.value)})},Ode=({width:e,height:t,lines:r,onDrawingChange:n,currentTool:s,currentColor:a,currentThickness:i,zoom:o,onZoomChange:l,isPanning:u,isFullscreen:d,constrainPanPosition:f,handleWheel:h,stageRef:g,setIsPanning:x,responsiveDimensions:y,canvasSize:v,question:T,textBoxes:k,setTextBoxes:b,selectedTextBox:E,setSelectedTextBox:N,handleTextBoxSelect:P,handleTextBoxUpdate:M,handleTextBoxDelete:j,isEditingText:A,editingTextBox:F,setIsEditingText:L,setEditingTextBox:V,setCurrentTool:J})=>{const[ne,ee]=_.useState(!1),[ie,B]=_.useState([]),[Y,I]=_.useState(null),[H,W]=_.useState(null),R=_.useRef(null),[z,G]=_.useState(.25),[Q,re]=_.useState({x:0,y:0}),q=_.useRef(null),se=_.useRef(null),ce=_.useRef(!1),pe=6;_.useEffect(()=>{const Ye=()=>{const ft=R.current;if(!ft)return;const lt=ft.clientWidth||1,Wt=ft.clientHeight||1,Fe=Math.min(lt/(v.width||1),Wt/(v.height||1));G(Math.min(Fe,1))};return Ye(),window.addEventListener("resize",Ye),()=>window.removeEventListener("resize",Ye)},[v.width,v.height,d]);const ke=Ye=>{const ft=g.current,lt=ft.getPointerPosition();if(s==="pan"){if(ze(Ye.target))try{ft.draggable(!1),ce.current=!0}catch{}return}if(s==="text"){const Fe={x:(lt.x-ft.x())/ft.scaleX(),y:(lt.y-ft.y())/ft.scaleY()};q.current={...Fe},se.current={x:lt.x,y:lt.y};return}ee(!0);const Wt={x:(lt.x-ft.x())/ft.scaleX(),y:(lt.y-ft.y())/ft.scaleY()};W(Wt),s==="pencil"?B([{x:Wt.x,y:Wt.y,color:a,thickness:i}]):s==="eraser"?B([{x:Wt.x,y:Wt.y,color:a,thickness:i,tool:"eraser"}]):["line","rectangle","circle"].includes(s)&&I({type:s,startX:Wt.x,startY:Wt.y,endX:Wt.x,endY:Wt.y,color:a,thickness:i})},le=Ye=>{const ft=g.current,lt=ft.getPointerPosition(),Wt={x:(lt.x-ft.x())/ft.scaleX(),y:(lt.y-ft.y())/ft.scaleY()};if(re(Wt),s!=="pan"){if(s==="text"&&q.current&&se.current){const Fe=Math.abs(lt.x-se.current.x),xt=Math.abs(lt.y-se.current.y);(Fe>pe||xt>pe)&&(q.current=null)}if(ne)if(s==="pencil"){const Fe=[...ie,{x:Wt.x,y:Wt.y,color:a,thickness:i}];B(Fe)}else if(s==="eraser"){const Fe=[...ie,{x:Wt.x,y:Wt.y,color:a,thickness:i,tool:"eraser"}];B(Fe)}else["line","rectangle","circle"].includes(s)&&Y&&I({...Y,endX:Wt.x,endY:Wt.y})}},ye=Ye=>{const ft=g.current;if(s==="pan"){if(ce.current){try{ft.draggable(!0)}catch{}ce.current=!1}return}if(s==="text"&&q.current){const lt=Ye&&Ye.target;if(lt&&typeof lt.name=="function"&&lt.name()==="canvas-bg"){const Fe={id:Date.now(),x:q.current.x,y:q.current.y,width:150,height:60,text:"Double-click to edit",fontSize:14,color:"#000000"};b(xt=>[...xt,Fe]),N(Fe.id)}q.current=null,se.current=null}if(ne){if(s==="pencil"){const lt=[...r,ie];n(lt),B([])}else if(s==="eraser"){const lt=[...r,ie];n(lt),B([])}else if(["line","rectangle","circle"].includes(s)&&Y){const lt=[...r,Y];n(lt),I(null)}ee(!1),W(null)}},[je,Ne]=_.useState(null),[We,$e]=_.useState(null),[Nt,He]=_.useState(!1),[Et,Rt]=_.useState(null),[Mt,ur]=_.useState(!1),[wr,dr]=_.useState(!1),[wt,Ke]=_.useState([]),[it,vt]=_.useState(null),[st,qe]=_.useState({totalGestures:0,zoomGestures:0,panGestures:0,combinedGestures:0,averageResponseTime:0});let ot=null;const Ut=(window.devicePixelRatio||1)>1.5,Qt={scaleDelta:Ut?.03:.04,centerDelta:Ut?4:6,minTouchDistance:8,gestureHysteresis:.02},Gt=()=>{ur(!1),Rt(null),Ne(null),$e(null),ee(!1),W(null),dr(!1),vt(null),ot&&(cancelAnimationFrame(ot),ot=null),g.current&&g.current.stop()},Zt=Ye=>{if(Ye.length<2)return 0;const ft=Ye[0],lt=Ye[1];return Math.sqrt(Math.pow(lt.clientX-ft.clientX,2)+Math.pow(lt.clientY-ft.clientY,2))},ir=Ye=>{if(Ye.length<2)return null;const ft=Ye[0],lt=Ye[1];return{x:(ft.clientX+lt.clientX)/2,y:(ft.clientY+lt.clientY)/2}},kr=Ye=>{Ke(ft=>[...ft,{type:Ye,timestamp:Date.now()}].slice(-5))},ve=()=>{const Ye=Date.now(),ft=wt.filter(Fe=>Ye-Fe.timestamp<500);if(ft.length<2)return 0;const lt=ft[ft.length-1],Wt=ft[ft.length-2];return lt.type===Wt.type?Qt.gestureHysteresis:0},Pe=(Ye,ft)=>{qe(lt=>({totalGestures:lt.totalGestures+1,zoomGestures:Ye.includes("zoom")?lt.zoomGestures+1:lt.zoomGestures,panGestures:Ye.includes("pan")?lt.panGestures+1:lt.panGestures,combinedGestures:Ye==="zoom+pan"?lt.combinedGestures+1:lt.combinedGestures,averageResponseTime:(lt.averageResponseTime+ft)/2}))},Me=(Ye,ft,lt,Wt)=>{const Fe=g.current,xt=Fe.scaleX(),yt=Fe.position();let zt=xt,or=yt;if(Ye){const ge=lt/je,be=xt*ge,Ce=T?.max_canvas_width||1536,Ee=T?.max_canvas_height||2048,rt=Ce/v.width,bt=Ee/v.height,at=Math.min(rt,bt,1);zt=Math.max(.25,Math.min(at,be));const ue=Wt,he={x:(ue.x-Fe.x())/xt,y:(ue.y-Fe.y())/xt};or={x:ue.x-he.x*zt,y:ue.y-he.y*zt}}if(ft){const ge=Wt.x-We.x,be=Wt.y-We.y;Ye?or={x:or.x+ge,y:or.y+be}:or={x:yt.x+ge,y:yt.y+be}}ot||(ot=requestAnimationFrame(()=>{Fe.scale({x:zt,y:zt}),Fe.position(or),Fe.batchDraw(),ot=null})),Ye&&ft?(Rt("zoom+pan"),dr(!0)):Ye?(Rt("zoom"),dr(!0)):ft&&Rt("pan");const _e=Date.now()-(it||Date.now());Pe(Ye&&ft?"zoom+pan":Ye?"zoom":"pan",_e),console.log(" Combined gesture",{doZoom:Ye,doPan:ft,scale:zt.toFixed(2),pos:or})},ze=Ye=>{if(!Ye||typeof Ye.name!="function")return!1;if((Ye.name()||"").includes("textbox-"))return!0;const lt=Ye.getParent&&Ye.getParent();return lt&&typeof lt.name=="function"&&(lt.name()||"").includes("textbox-")},At=Ye=>{const ft=Ye.evt.touches,lt=Ye.target;if(ze(lt)){if(s==="pan"&&g.current)try{g.current.draggable(!1),ce.current=!0}catch{}return}ft.length===2?(Ye.evt.preventDefault(),ur(!0),Rt(null),Ne(Zt(ft)),$e(ir(ft)),ee(!1),vt(Date.now())):ft.length===1&&(ur(!1),Rt(null),ke(Ye))},Kt=Ye=>{const ft=Ye.evt.touches,lt=Ye.target;if(!ze(lt))if(ft.length===2&&Mt){Ye.evt.preventDefault();const Wt=g.current,Fe=Zt(ft),xt=ir(ft);if(je&&We&&Wt&&Fe>Qt.minTouchDistance){const yt=Math.abs(Fe/je-1),zt=Math.sqrt(Math.pow(xt.x-We.x,2)+Math.pow(xt.y-We.y,2)),or=ve(),de=Qt.scaleDelta-or,_e=Qt.centerDelta-or*10,ge=yt>de,be=zt>_e;(ge||be)&&(Me(ge,be,Fe,xt),ge&&be?kr("zoom+pan"):ge?kr("zoom"):be&&kr("pan")),console.log(" Gesture Debug",{scaleDelta:yt.toFixed(3),centerDelta:zt.toFixed(1),doZoom:ge,doPan:be,hysteresis:or.toFixed(3),adjustedScaleDelta:de.toFixed(3),adjustedCenterDelta:_e.toFixed(1),gestureHistory:wt.slice(-3)})}Ne(Fe),$e(xt)}else ft.length===1&&!Mt&&(Ye.evt.preventDefault(),le())},hr=Ye=>{const ft=Ye.evt.touches,lt=Ye.target;ze(lt)||(ft.length===0?(ye(Ye),Gt(),dr(!1)):ft.length===1&&(ur(!1),Rt(null),Ne(null),$e(null),dr(!1)))};return c.jsx("div",{className:"relative w-full block sm:flex sm:justify-center",children:c.jsx("div",{className:"w-full max-w-full block sm:flex sm:justify-center",children:c.jsxs("div",{className:"relative",style:{border:d&&(y.width<window.innerWidth-40||y.height<window.innerHeight-40)?"2px solid #000000":"none",borderRadius:"8px",overflow:"hidden"},children:[c.jsx("div",{ref:R,className:"w-full h-full",style:{touchAction:"manipulation"},children:c.jsx(vm,{ref:g,width:y.width,height:y.height,scaleX:d?y.zoom:o,scaleY:d?y.zoom:o,onMouseDown:ke,onMousemove:le,onMouseup:ye,onTouchStart:At,onTouchMove:Kt,onTouchEnd:hr,onWheel:h||(()=>{}),onDragStart:()=>{console.log(" Drag started"),s==="pan"&&x(!0)},onDragEnd:()=>{if(console.log(" Drag ended"),s==="pan"&&(x(!1),f)){const Ye=g.current,ft=R.current,lt=ft?.clientWidth||y.width,Wt=ft?.clientHeight||y.height,Fe=v.width*Ye.scaleX(),xt=v.height*Ye.scaleY(),yt=Ye.x(),zt=Ye.y();(yt>lt||yt<-Fe||zt>Wt||zt<-xt)&&f(Ye)}},draggable:s==="pan"&&o>.25,className:`border-0 rounded-none shadow-none sm:border sm:rounded-lg sm:shadow-sm ${s==="pan"?"cursor-grab":u?"cursor-grabbing":"cursor-crosshair"}`,style:{width:"100%",height:"auto"},onLoad:()=>{console.log(" DrawingTestStudent - Stage loaded with dimensions:",y.width,"x",y.height),console.log(" DrawingTestStudent - Canvas size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Current zoom level:",o),console.log(" DrawingTestStudent - Effective display size:",Math.round(v.width*o),"x",Math.round(v.height*o)),console.log(" DrawingTestStudent - Total pixels displayed:",Math.round(v.width*o*v.height*o))},children:c.jsxs(ym,{children:[c.jsx(_i,{x:0,y:0,width:v.width,height:v.height,fill:"white",name:"canvas-bg"}),r.map((Ye,ft)=>{if(Array.isArray(Ye)){const lt=Ye[0]?.tool==="eraser";return c.jsx(Ui,{points:Ye.flatMap(Wt=>[Wt.x,Wt.y]),stroke:lt?"black":Ye[0]?.color||"#000000",strokeWidth:lt?(Ye[0]?.thickness||2)*7:Ye[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:lt?"destination-out":"source-over"},ft)}else{if(Ye.type==="line")return c.jsx(Ui,{points:[Ye.startX,Ye.startY,Ye.endX,Ye.endY],stroke:Ye.color,strokeWidth:Ye.thickness,lineCap:"round"},ft);if(Ye.type==="rectangle"){const lt=Math.abs(Ye.endX-Ye.startX),Wt=Math.abs(Ye.endY-Ye.startY),Fe=Math.min(Ye.startX,Ye.endX),xt=Math.min(Ye.startY,Ye.endY);return c.jsx(_i,{x:Fe,y:xt,width:lt,height:Wt,stroke:Ye.color,strokeWidth:Ye.thickness,fill:"transparent"},ft)}else if(Ye.type==="circle"){const lt=Math.sqrt(Math.pow(Ye.endX-Ye.startX,2)+Math.pow(Ye.endY-Ye.startY,2))/2,Wt=(Ye.startX+Ye.endX)/2,Fe=(Ye.startY+Ye.endY)/2;return c.jsx(Af,{x:Wt,y:Fe,radius:lt,stroke:Ye.color,strokeWidth:Ye.thickness,fill:"transparent"},ft)}}return null}),k.map(Ye=>c.jsx(Fde,{...Ye,isSelected:E===Ye.id,onSelect:P,onUpdate:M,onDelete:j},Ye.id)),s==="pencil"&&c.jsx(Ui,{points:ie.flatMap(Ye=>[Ye.x,Ye.y]),stroke:a,strokeWidth:i,tension:.5,lineCap:"round",lineJoin:"round"}),s==="eraser"&&c.jsx(Ui,{points:ie.flatMap(Ye=>[Ye.x,Ye.y]),stroke:"black",strokeWidth:i*7,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:"destination-out"}),Y&&Y.type==="line"&&c.jsx(Ui,{points:[Y.startX,Y.startY,Y.endX,Y.endY],stroke:Y.color,strokeWidth:Y.thickness,lineCap:"round"}),Y&&Y.type==="rectangle"&&c.jsx(_i,{x:Math.min(Y.startX,Y.endX),y:Math.min(Y.startY,Y.endY),width:Math.abs(Y.endX-Y.startX),height:Math.abs(Y.endY-Y.startY),stroke:Y.color,strokeWidth:Y.thickness,fill:"transparent"}),Y&&Y.type==="circle"&&c.jsx(Af,{x:(Y.startX+Y.endX)/2,y:(Y.startY+Y.endY)/2,radius:Math.sqrt(Math.pow(Y.endX-Y.startX,2)+Math.pow(Y.endY-Y.startY,2))/2,stroke:Y.color,strokeWidth:Y.thickness,fill:"transparent"}),s==="eraser"&&c.jsx(Af,{x:Q.x,y:Q.y,radius:i*7/2,stroke:"#666666",strokeWidth:2,fill:"rgba(102, 102, 102, 0.2)",dash:[5,5],listening:!1}),s==="pencil"&&c.jsx(Ui,{points:[Q.x-10,Q.y,Q.x+10,Q.y,Q.x,Q.y-10,Q.x,Q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="line"&&c.jsx(Ui,{points:[Q.x-10,Q.y,Q.x+10,Q.y,Q.x,Q.y-10,Q.x,Q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="rectangle"&&c.jsx(Ui,{points:[Q.x-10,Q.y,Q.x+10,Q.y,Q.x,Q.y-10,Q.x,Q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="circle"&&c.jsx(Ui,{points:[Q.x-10,Q.y,Q.x+10,Q.y,Q.x,Q.y-10,Q.x,Q.y+10],stroke:"#666666",strokeWidth:1,listening:!1})]})})}),A&&F&&c.jsx(Dde,{x:F.x,y:F.y,width:F.width,height:F.height,initialText:F.text,onSave:Ye=>{M(F.id,{text:Ye}),L(!1),V(null)},onCancel:()=>{L(!1),V(null)}}),c.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[c.jsx("button",{onClick:()=>{const Ye=g.current,ft=Ye.scaleX(),lt=T?.max_canvas_width||1536,Wt=T?.max_canvas_height||2048,Fe=lt/v.width,xt=Wt/v.height,yt=Math.min(Fe,xt,5),zt=Math.min(yt,Ye.scaleX()*1.2);Ye.scale({x:zt,y:zt}),Ye.batchDraw(),console.log(" DrawingTestStudent - Zoom In button:",ft.toFixed(2),"->",zt.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*zt),"x",Math.round(v.height*zt)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*zt*v.height*zt),"pixels"),l(zt)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom In",children:"+"}),c.jsx("button",{onClick:()=>{const Ye=g.current,ft=Ye.scaleX(),lt=Math.max(.25,Ye.scaleX()*.8);Ye.scale({x:lt,y:lt}),Ye.batchDraw(),console.log(" DrawingTestStudent - Zoom Out button:",ft.toFixed(2),"->",lt.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*lt),"x",Math.round(v.height*lt)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*lt*v.height*lt),"pixels"),l(lt)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom Out",children:""}),c.jsx("button",{onClick:()=>{const Ye=g.current,ft=Ye.scaleX();Ye.scale({x:1,y:1}),Ye.position({x:0,y:0}),Ye.batchDraw(),console.log(" DrawingTestStudent - Reset zoom:",ft.toFixed(2),"-> 1.00"),console.log(" DrawingTestStudent - Reset effective size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Reset resolution:",v.width*v.height,"pixels"),l(1)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 text-xs",title:"Reset Zoom",children:"1:1"})]}),c.jsxs("div",{className:"absolute bottom-2 left-2 bg-white border border-gray-300 rounded px-2 py-1 text-xs text-gray-600 shadow-sm",children:[Math.round(o*100),"%"]})]})})})},Rde=({content:e})=>{if(!e)return c.jsx("div",{className:"text-gray-500 italic",children:"No instructions provided"});const t=n=>{if(!n)return"";if(n.type==="text"){let s=n.text||"";if(n.format&&(n.format&1&&(s=`<strong>${s}</strong>`),n.format&2&&(s=`<em>${s}</em>`),n.format&8&&(s=`<u>${s}</u>`),n.format&16&&(s=`<s>${s}</s>`)),n.style){const a=n.style.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}if(n.textStyle){const a=n.textStyle.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}return s}if(n.type==="paragraph"){const s=n.children?n.children.map(t).join(""):"";let a="text-left";return n.format&&(n.format==="center"?a="text-center":n.format==="right"?a="text-right":n.format==="left"&&(a="text-left")),`<p class="${a}">${s}</p>`}if(n.type==="heading"){const s=n.tag||"h1",a=n.children?n.children.map(t).join(""):"";return`<${s}>${a}</${s}>`}if(n.type==="list"){const s=n.listType==="bullet"?"ul":"ol",a=n.children?n.children.map(i=>{if(i.type==="listitem"){const o=i.children?i.children.map(t).join(""):"";let l="margin: 4px 0; display: list-item;";return i.format&&(i.format==="center"?l+=" text-align: center;":i.format==="right"?l+=" text-align: right;":i.format==="left"&&(l+=" text-align: left;")),`<li style="${l}">${o}</li>`}return""}).join(""):"";return`<${s} style="margin: 8px 0; padding-left: 20px; list-style-type: ${n.listType==="bullet"?"disc":"decimal"}; display: block;">${a}</${s}>`}return n.children?n.children.map(t).join(""):""};let r=e;if(typeof e=="string"&&e.startsWith("{"))try{const n=JSON.parse(e);n.text?r=n.text:n.content?r=n.content:n.root&&n.root.children&&(r=n.root.children.map(t).join(""))}catch(n){console.log("Failed to parse Lexical content:",n)}return c.jsx("div",{className:"max-w-none rich-text-content",style:{lineHeight:"1.6",fontSize:"14px"},dangerouslySetInnerHTML:{__html:r}})},Ide=({question:e,questionIndex:t,studentAnswer:r,onAnswerChange:n,mode:s,testId:a,testType:i})=>{si();const[o,l]=_.useState([]),[u,d]=_.useState(!0),[f,h]=_.useState("pencil"),[g,x]=_.useState("#000000"),[y,v]=_.useState(2),[T,k]=_.useState([]),[b,E]=_.useState(-1),[N,P]=_.useState({width:600,height:800}),[M,j]=_.useState(1),[A,F]=_.useState(!1),[L,V]=_.useState(!1),[J,ne]=_.useState(!1),[ee,ie]=_.useState([]),[B,Y]=_.useState(null),[I,H]=_.useState(!1),[W,R]=_.useState(null),z=b>0,G=b<T.length-1,[Q,re]=_.useState(!1),q=_.useRef(null),se=_.useRef(null),[ce,pe]=_.useState({width:600,height:800}),ke=_.useRef(!1),[le,ye]=_.useState(.25),je=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#808080","#FFC0CB","#A52A2A","#000080"];_.useEffect(()=>{const Ke=()=>{ne(window.innerWidth>=1024)};return Ke(),window.addEventListener("resize",Ke),()=>window.removeEventListener("resize",Ke)},[]),_.useEffect(()=>{if(e){const Ke=e.max_canvas_width||1536,it=e.max_canvas_height||2048,vt=e.canvas_width||600,st=e.canvas_height||800;if(P({width:Ke,height:it}),ke.current)console.log(" DrawingTestStudent - Preserving user zoom:",M.toFixed(2));else{j(1),ke.current=!0;const ot=(vt-Ke*1)/2,kt=(st-it*1)/2;if(!isNaN(ot)&&!isNaN(kt)&&q.current){const Ut={x:ot,y:kt};q.current.position(Ut),q.current.batchDraw()}console.log(" DrawingTestStudent - Canvas size set:",Ke,"x",it),console.log(" DrawingTestStudent - Viewport size:",vt,"x",st),console.log(" DrawingTestStudent - Initial zoom:",1 .toFixed(2)),console.log(" DrawingTestStudent - Image resolution:",Ke*it,"pixels"),console.log(" DrawingTestStudent - Aspect ratio:",(Ke/it).toFixed(2))}if(r&&typeof r=="string")try{const qe=JSON.parse(r);qe.lines?l(qe.lines):l(qe),qe.textBoxes&&ie(qe.textBoxes)}catch{console.log("No valid drawing data found")}d(!1)}},[e,r]),_.useEffect(()=>{const Ke=()=>{const it=se.current;if(!it)return;const vt=it.clientWidth||1,st=it.clientHeight||1,qe=Math.min(vt/(N.width||1),st/(N.height||1));ye(Math.min(qe,1))};return Ke(),window.addEventListener("resize",Ke),()=>window.removeEventListener("resize",Ke)},[N.width,N.height,Q]);const Ne=Ke=>{l(Ke);const it={lines:Ke,textBoxes:ee};n(e.question_id,JSON.stringify(it)),We(Ke,ee)},We=(Ke,it=ee)=>{const vt=T.slice(0,b+1);vt.push({lines:[...Ke],textBoxes:[...it]}),k(vt),E(vt.length-1)},$e=()=>{if(z){const Ke=b-1,it=T[Ke];if(it&&typeof it=="object"&&it.lines){l([...it.lines]),ie([...it.textBoxes]);const vt={lines:it.lines,textBoxes:it.textBoxes};n(e.question_id,JSON.stringify(vt))}else{const vt=it||[];l([...vt]),n(e.question_id,JSON.stringify(vt))}E(Ke)}},Nt=()=>{if(G){const Ke=b+1,it=T[Ke];if(it&&typeof it=="object"&&it.lines){l([...it.lines]),ie([...it.textBoxes]);const vt={lines:it.lines,textBoxes:it.textBoxes};n(e.question_id,JSON.stringify(vt))}else{const vt=it||[];l([...vt]),n(e.question_id,JSON.stringify(vt))}E(Ke)}},He=()=>{l([]),ie([]),Y(null),n(e.question_id,"")},Et=Ke=>{Y(Ke)},Rt=(Ke,it)=>{const vt=ee.map(qe=>qe.id===Ke?{...qe,...it}:qe);ie(vt),We(o,vt);const st={lines:o,textBoxes:vt};if(n(e.question_id,JSON.stringify(st)),it.isEditing){const qe=ee.find(ot=>ot.id===Ke);R(qe),H(!0)}},Mt=Ke=>{const it=ee.filter(st=>st.id!==Ke);ie(it),B===Ke&&Y(null),We(o,it);const vt={lines:o,textBoxes:it};n(e.question_id,JSON.stringify(vt))},ur=()=>{if(Q){const vt=e?.canvas_width||600,st=e?.canvas_height||800,qe=window.innerWidth-40,ot=window.innerHeight-40,kt=qe/vt,Ut=ot/st,Qt=Math.min(kt,Ut,1);return{width:vt,height:st,zoom:Qt}}const Ke=e?.canvas_width||600,it=e?.canvas_height||800;return{width:Ke,height:it,zoom:1}};_.useEffect(()=>{const Ke=()=>{pe(ur())};return Ke(),window.addEventListener("resize",Ke),()=>window.removeEventListener("resize",Ke)},[Q,N]);const wr=Ke=>{Ke.evt.preventDefault();const it=q.current,vt=it.scaleX(),st=it.getPointerPosition(),qe={x:(st.x-it.x())/vt,y:(st.y-it.y())/vt},ot=Ke.evt.deltaY>0?vt*.9:vt*1.1,kt=e?.max_canvas_width||1536,Ut=e?.max_canvas_height||2048,Qt=kt/N.width,Gt=Ut/N.height,Zt=Math.min(Qt,Gt,1),ir=Math.max(le,Math.min(Zt,ot)),kr={x:st.x-qe.x*ir,y:st.y-qe.y*ir};if(ir<=le&&se.current){const ve=se.current.clientWidth||1,Pe=se.current.clientHeight||1;kr.x=(ve-N.width*ir)/2,kr.y=(Pe-N.height*ir)/2}it.scale({x:ir,y:ir}),it.position(kr),it.batchDraw(),console.log(" DrawingTestStudent - Wheel zoom:",vt.toFixed(2),"->",ir.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(N.width*ir),"x",Math.round(N.height*ir)),console.log(" DrawingTestStudent - New resolution:",Math.round(N.width*ir*N.height*ir),"pixels"),j(ir),ke.current=!0},dr=Ke=>{const it=Ke.scaleX(),vt=se.current,st=vt?.clientWidth||ce.width,qe=vt?.clientHeight||ce.height,ot=N.width*it,kt=N.height*it;if(it<=le){const Me=(st-ot)/2,ze=(qe-kt)/2;Ke.position({x:Me,y:ze}),Ke.batchDraw();return}if(ot<=st&&kt<=qe){const Me=(st-ot)/2,ze=(qe-kt)/2;Ke.position({x:Me,y:ze}),Ke.batchDraw();return}const Ut=Math.max(0,ot-st),Qt=Math.max(0,kt-qe),Gt=-Ut,Zt=-Qt,ir=Ke.x(),kr=Ke.y(),ve=Math.max(Gt,Math.min(Ut,ir)),Pe=Math.max(Zt,Math.min(Qt,kr));(ve!==ir||Pe!==kr)&&(Ke.position({x:ve,y:Pe}),Ke.batchDraw())},wt=()=>{if(Q)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const Ke=se.current;Ke&&(Ke.requestFullscreen?Ke.requestFullscreen():Ke.webkitRequestFullscreen?Ke.webkitRequestFullscreen():Ke.msRequestFullscreen&&Ke.msRequestFullscreen())}};return _.useEffect(()=>{const Ke=()=>{re(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Ke),document.addEventListener("webkitfullscreenchange",Ke),document.addEventListener("msfullscreenchange",Ke),()=>{document.removeEventListener("fullscreenchange",Ke),document.removeEventListener("webkitfullscreenchange",Ke),document.removeEventListener("msfullscreenchange",Ke)}},[]),_.useEffect(()=>()=>{q.current&&q.current.stop()},[]),u?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx(fn,{})}):e?c.jsxs("div",{className:`drawing-question w-full max-w-full mx-0 p-0 sm:p-2 ${Q?"fixed inset-0 z-50 bg-white overflow-y-auto":""}`,children:[!Q&&c.jsx("div",{className:"mb-4",children:c.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",t+1]})}),!Q&&e.question_json&&e.question_json.trim()&&c.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Task:"}),c.jsx("div",{className:"text-gray-700",children:c.jsx(Rde,{content:e.question_json})})]}),!Q&&c.jsx(Ht,{className:"p-1 sm:p-2 mb-2",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"hidden sm:block text-sm text-gray-700",children:"Tool:"}),c.jsxs("div",{className:"flex flex-nowrap sm:flex-wrap gap-1 overflow-x-auto",children:[c.jsx("button",{onClick:()=>h("pencil"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pencil"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pencil (Freehand drawing)",children:""}),c.jsx("button",{onClick:()=>h("line"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="line"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Line",children:""}),c.jsx("button",{onClick:()=>h("rectangle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="rectangle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Rectangle",children:""}),c.jsx("button",{onClick:()=>h("circle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="circle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Circle",children:""}),c.jsx("button",{onClick:()=>h("eraser"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="eraser"?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Eraser",children:""}),c.jsx("button",{onClick:()=>h("text"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="text"?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Text Box",children:""}),c.jsx("button",{onClick:()=>h("pan"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pan"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pan (Move canvas)",children:""})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"History:"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:$e,disabled:!z,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${z?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:""}),c.jsx("button",{onClick:Nt,disabled:!G,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${G?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:""})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>F(!A),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[c.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:g}}),c.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:"Color"})]}),A&&c.jsx("div",{className:"absolute top-full left-0 mt-2 p-4 bg-white border border-gray-300 rounded-lg shadow-lg z-30 min-w-max",children:c.jsx("div",{className:"flex flex-wrap gap-2 max-w-xs",children:je.map(Ke=>c.jsx("button",{onClick:()=>{x(Ke),F(!1)},className:`w-10 h-10 rounded border-2 hover:scale-110 transition-transform flex-shrink-0 ${g===Ke?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:Ke},title:Ke},Ke))})})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsx("label",{className:"text-xs sm:text-sm text-gray-700",children:"Thickness:"}),c.jsx("input",{type:"range",min:"1",max:"10",value:y,onChange:Ke=>v(parseInt(Ke.target.value)),className:"w-16 sm:w-20"}),c.jsxs("span",{className:"text-xs text-gray-500 w-6 sm:w-8",children:[y,"px"]})]}),c.jsx(tt,{onClick:He,variant:"secondary",size:"sm",children:"Clear"})]})}),c.jsx(Ht,{paddingClass:"p-0 sm:p-2",children:c.jsxs("div",{ref:se,className:"w-full drawing-canvas-container relative p-0 m-0",children:[c.jsx(Ode,{width:N.width,height:N.height,lines:o,onDrawingChange:Ne,currentTool:f,currentColor:g,currentThickness:y,zoom:M,onZoomChange:j,isPanning:L,isFullscreen:Q,constrainPanPosition:dr,handleWheel:wr,stageRef:q,setIsPanning:V,responsiveDimensions:ce,canvasSize:N,question:e,textBoxes:ee,setTextBoxes:ie,selectedTextBox:B,setSelectedTextBox:Y,handleTextBoxSelect:Et,handleTextBoxUpdate:Rt,handleTextBoxDelete:Mt,isEditingText:I,editingTextBox:W,setIsEditingText:H,setEditingTextBox:R,setCurrentTool:h}),c.jsx("button",{onClick:wt,className:"absolute top-2 left-2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-lg transition-all duration-200 z-10",title:Q?"Exit Fullscreen":"Enter Fullscreen",children:Q?c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})]}):c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-gray-500",children:"No drawing question data available"})})})},R5={enhanceUserData(e,t){const r={id:e.id||e.student_id||e.teacher_id,username:e.username||e.student_id,name:e.name||e.first_name,surname:e.surname||e.last_name,nickname:e.nickname,role:t,is_active:e.is_active!==void 0?e.is_active:!0,created_at:e.created_at,updated_at:e.updated_at};switch(t){case"student":return{...r,student_id:e.student_id,grade:e.grade,class:e.class,number:e.number,subjects:e.subjects||[]};case"teacher":return{...r,teacher_id:e.teacher_id,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,subjects:e.subjects||[]};case"admin":return{...r,admin_id:e.admin_id,permissions:e.permissions||["all"]};default:return r}},async studentLogin(e){console.log("Trying student login...");try{const t=await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e.username,password:e.password})}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.student,role:"student",response:t};throw new Error(r.message||"Student login failed")}catch(t){throw console.error("Student login error:",t),new Error(t.message||"Student login failed")}},async teacherLogin(e){console.log("Trying teacher login...");try{const t=await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.teacher,role:"teacher",response:t};throw new Error(r.message||"Teacher login failed")}catch(t){throw console.error("Teacher login error:",t),new Error(t.message||"Teacher login failed")}},async adminLogin(e){console.log("Trying admin login...");try{const t=await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.admin,role:"admin",response:t};throw new Error(r.message||"Admin login failed")}catch(t){throw console.error("Admin login error:",t),new Error(t.message||"Admin login failed")}},async login(e){const{username:t,password:r}=e;console.log("Attempting login with:",t,r);try{if(t==="admin"){const o=await this.adminLogin(e),l=await o.json();return await this.handleLoginResponse(o,"admin",l)}const n=await this.teacherLogin(e),s=await n.json();if(n.ok&&s.success)return await this.handleLoginResponse(n,"teacher",s);const a=await this.studentLogin(e),i=await a.json();return a.ok&&i.success?await this.handleLoginResponse(a,"student",i):(this.handleLoginFailure(),{success:!1,message:"Login failed. Please check your credentials and try again."})}catch(n){return console.error("Login error:",n),this.handleLoginFailure(),{success:!1,message:n.message||"Login failed"}}},async handleLoginResponse(e,t,r){if(e.ok&&r.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),this.handleLoginFailure(),{success:!1,message:"JWT system not available"};if(r.accessToken&&r.role)try{window.tokenManager.setTokens(r.accessToken,r.role),window.roleBasedLoader.setupAccessAfterLogin()}catch(n){return console.error("[ERROR] Failed to initialize JWT system:",n),this.handleLoginFailure(),{success:!1,message:"Failed to initialize JWT system"}}return this.resetLoginForm(),await this.handlePostLoginActions(r,t),{success:!0,data:r,role:t}}return{success:!1,message:"Login failed"}},async handlePostLoginActions(e,t){console.log(`Handling post-login actions for role: ${t}`);try{switch(t){case"student":e.student&&(this.populateStudentInfo(e.student),window.loadStudentData&&await window.loadStudentData());break;case"teacher":e.teacher&&(this.populateTeacherInfo(e.teacher),window.loadTeacherData&&await window.loadTeacherData());break;case"admin":e.admin&&window.loadAdminData&&await window.loadAdminData();break;default:console.warn(`Unknown role for post-login actions: ${t}`)}}catch(r){console.error("Error in post-login actions:",r)}},handleLoginFailure(){console.log("All login attempts failed"),this.resetLoginForm(),window.showNotification&&window.showNotification("Login failed. Please check your credentials and try again.","error")},resetLoginForm(){const e=document.getElementById("unifiedLoginForm");if(e){e.querySelectorAll("input").forEach(n=>{n.disabled=!1,n.style.opacity="1",n.style.cursor="text",n.removeAttribute("readonly"),n.style.pointerEvents="auto"});const r=e.querySelector('button[type="submit"]');r&&(r.disabled=!1,r.style.opacity="1",r.style.cursor="pointer",r.style.pointerEvents="auto",r.innerHTML="Login"),e.classList.remove("test-submitting","disabled"),e.style.pointerEvents="auto",console.log("Login form reset successfully - all inputs re-enabled")}},async logout(){console.log(" Logout initiated...");try{return window.tokenManager&&window.tokenManager.logout(),window.roleBasedLoader&&window.roleBasedLoader.reloadRoleAccess(),window.clearTestLocalStorage&&window.clearTestLocalStorage(),this.resetInterfaceAfterSessionClear(),console.log(" Logout completed - user session cleared, test data cleared, and interface reset"),{success:!0}}catch(e){return console.error("Logout error:",e),this.resetInterfaceAfterSessionClear(),{success:!0}}},resetInterfaceAfterSessionClear(){try{window.forceLogout=!0,window.preventAutoLogin=!0,window.isClearingSession=!0,window.forceLogoutComplete=!0,document.querySelectorAll(".section").forEach(s=>{s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0"}),document.querySelectorAll('[id$="-cabinet"], [id$="-container"], [id*="cabinet"], [id*="container"]').forEach(s=>{s.id&&s.id!=="login-section"&&(s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0")}),document.body.classList.remove("student-logged-in","teacher-logged-in","admin-logged-in"),document.body.classList.add("force-logout");const r=document.getElementById("login-section");r&&(r.classList.add("active"),r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),document.querySelectorAll("input, select, textarea").forEach(s=>{s.type!=="hidden"&&(s.value="",s.checked=!1)}),console.log(" Interface reset to login state")}catch(e){console.error("Error resetting interface:",e),localStorage.clear(),sessionStorage.clear(),window.location.reload()}},async changePassword(e){try{return{success:!0,message:(await sa.post("/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.message}}catch(t){throw new Error(t.response?.data?.message||"Password change failed")}},async verifyToken(e){try{const t=await sa.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,valid:t.data.valid,user:t.data.user}}catch(t){return{success:!1,valid:!1,error:t.message}}},async refreshToken(e){try{const t=await sa.post("/auth/refresh",{refreshToken:e});return{success:!0,token:t.data.token,refreshToken:t.data.refreshToken}}catch(t){throw new Error(t.response?.data?.message||"Token refresh failed")}},async getUserProfile(){try{return{success:!0,user:(await sa.get("/auth/profile")).data.user}}catch(e){throw new Error(e.response?.data?.message||"Failed to get user profile")}},async updateUserProfile(e){try{return{success:!0,user:(await sa.put("/auth/profile",e)).data.user}}catch(t){throw new Error(t.response?.data?.message||"Failed to update user profile")}},populateStudentInfo(e){console.log("=== populateStudentInfo called ==="),console.log("Student object:",e);const t=document.getElementById("studentName");if(t){const s=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=s,console.log("Set student name to:",s)}const r=document.getElementById("studentGrade");r&&(r.textContent=e?.grade||"",console.log("Set student grade to:",e?.grade));const n=document.getElementById("studentClass");n&&(n.textContent=e?.class||"",console.log("Set student class to:",e?.class)),console.log("Student info populated successfully")},populateTeacherInfo(e){console.log("=== populateTeacherInfo called ==="),console.log("Teacher object:",e);const t=document.getElementById("teacherName");if(t){const n=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=n,console.log("Set teacher name to:",n)}const r=document.getElementById("teacherUsername");r&&(r.textContent=e?.username||"",console.log("Set teacher username to:",e?.username)),console.log("Teacher info populated successfully")},getCurrentTeacherId(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.sub?e.role==="teacher"?(console.log(`[DEBUG] Found teacher ID from JWT: ${e.sub}`),e.sub):(console.warn(`[WARN] Unsupported role for teacher function: ${e.role}`),null):(console.warn("[WARN] No teacher ID found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher ID from JWT:",e),null}},getCurrentAdmin(){const e=window.tokenManager?.getToken();if(!e)return null;const t=window.tokenManager.decodeToken(e);if(!t||t.role!=="admin")throw new Error("getCurrentAdmin() called by non-admin user");return{id:t.sub,username:t.username,role:t.role}},getCurrentTeacherUsername(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.username?(console.log(`[DEBUG] Found teacher username from JWT: ${e.username}`),e.username):(console.warn("[WARN] No teacher username found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher username from JWT:",e),null}},isAdmin(){try{const e=window.tokenManager?.getToken();if(!e)return!1;const t=window.tokenManager.decodeToken(e);return t&&t.role==="admin"}catch(e){return console.error("[ERROR] Error checking admin status:",e),!1}},getCurrentAdminId(){try{const e=this.getCurrentAdmin();return e?e.id:null}catch(e){return console.error("[ERROR] Error getting admin ID:",e),null}}},Lde=()=>{const e=fl(),{login:t,setUserData:r,isAuthenticated:n,user:s}=Ms(),[a,i]=_.useState({username:"",password:""}),[o,l]=_.useState(!1),[u,d]=_.useState(""),[f,h]=_.useState([]),[g,x]=_.useState(!1);_.useEffect(()=>{y()},[]);const y=_.useCallback(async()=>{console.log("Checking for existing JWT session...");try{(window.forceLogout||window.preventAutoLogin)&&(window.forceLogout=!1,window.preventAutoLogin=!1)}catch{}if(window.tokenManager)if(await window.tokenManager.isAuthenticated()){console.log("JWT session valid, checking user role...");try{const V=await window.tokenManager.getAccessToken(),J=window.tokenManager.decodeToken(V);J&&J.role?console.log("User role from JWT:",J.role):console.log("No valid role found in JWT, showing login")}catch(V){console.error("Error decoding JWT token:",V)}}else console.log("No valid JWT session found, showing login");else console.log("No tokenManager found, showing login")},[]),v=_.useCallback(async L=>{if(L.preventDefault(),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),j("Please wait for the logout process to complete.","warning");return}const{username:V,password:J}=a;if(!V||!J){d("Please enter both username and password");return}l(!0),d("");try{let ne,ee;V==="admin"?(ne=await R5.adminLogin({username:V,password:J}),ee=Ro.ADMIN):/^\d+$/.test(V)?(ne=await R5.studentLogin({username:V,password:J}),ee=Ro.STUDENT):(ne=await R5.teacherLogin({username:V,password:J}),ee=Ro.TEACHER);let ie,B;if(ne.response?(ie=ne,B=ne.response):(ie=await ne.json(),B=ne),await T(B,ee,ie)){j("Login successful!","success");try{if("credentials"in navigator&&window.PasswordCredential&&a?.username&&a?.password){const Y=new window.PasswordCredential({id:String(a.username),password:String(a.password)});await navigator.credentials.store(Y)}}catch{}try{window.forceLogout=!1,window.preventAutoLogin=!1}catch{}}}catch(ne){console.error("Login error:",ne),d("Invalid username or password")}finally{l(!1)}},[a]),T=_.useCallback(async(L,V,J)=>{if(L.ok&&J.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),P(),!1;try{J.token&&(window.tokenManager.setTokens(J.token,V),J.refreshToken&&window.tokenManager.setRefreshToken(J.refreshToken),console.log("JWT token stored successfully"));const ne={...J.data,...J,role:V};return r(ne),await k(ne),!0}catch(ne){return console.error("Error handling login response:",ne),P(ne),!1}}else return console.error("Login failed:",J.error||"Unknown error"),d(J.error||"Login failed. Please check your credentials."),!1},[t]),k=_.useCallback(async L=>{if(console.log("Handling post-login actions for role:",L.role),g){console.log(" Post-login already handled, skipping");return}x(!0);try{switch(L.role){case Ro.STUDENT:await b(L),e("/student");break;case Ro.TEACHER:await E(L),e("/teacher");break;case Ro.ADMIN:await N(L),e("/admin");break;default:console.error("Unknown user role:",L.role),P()}}catch(V){console.error("Error in post-login actions:",V),P(V)}},[e,g]);_.useEffect(()=>{n||x(!1)},[n]);const b=_.useCallback(async L=>{console.log("Populating student info:",L)},[]),E=_.useCallback(async L=>{console.log("Populating teacher info:",L)},[]),N=_.useCallback(async L=>{console.log("Populating admin info:",L)},[]),P=_.useCallback((L=null)=>{console.error("Login failure:",L),d("Login failed. Please check your credentials and try again."),M()},[]),M=_.useCallback(()=>{i({username:"",password:""}),d(""),l(!1)},[]),j=_.useCallback((L,V)=>{const J={id:Date.now(),message:L,type:V,timestamp:new Date};h(ne=>[...ne,J]),setTimeout(()=>{h(ne=>ne.filter(ee=>ee.id!==J.id))},Km.NOTIFICATION_DURATION)},[]),A=_.useCallback(L=>{const{name:V,value:J}=L.target;i(ne=>({...ne,[V]:J})),u&&d("")},[u]),F=_.useCallback(L=>{L.key==="Enter"&&!o&&v(L)},[v,o]);return c.jsxs(dt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsxs(dt.div,{className:"w-full max-w-md",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsxs(dt.div,{className:"text-center mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsx(dt.div,{className:"flex justify-center mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},children:c.jsx("img",{src:"/pics/logo_mws.png",alt:"MWS Logo",className:"h-16 w-16 object-contain"})}),c.jsx(dt.h1,{className:"text-3xl font-bold text-gray-900 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.3},children:"Mathayom Watsing School"}),c.jsx(dt.p,{className:"text-lg text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:"Test Management System"})]}),c.jsxs(dt.div,{className:"bg-white rounded-xl shadow-2xl p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,duration:.5,type:"spring"},children:[c.jsx(dt.h2,{className:"text-2xl font-semibold text-gray-900 text-center mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"Login"}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs(dt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9,duration:.3},children:[c.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),c.jsx(dt.input,{type:"text",id:"username",name:"username",value:a.username,onChange:A,onKeyDown:F,placeholder:"Enter your username",required:!0,autoComplete:"username",autoCapitalize:"none",spellCheck:!1,disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c.jsxs(dt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.3},children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c.jsx(dt.input,{type:"password",id:"password",name:"password",value:a.password,onChange:A,onKeyDown:F,placeholder:"Enter your password",required:!0,autoComplete:"current-password",disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c.jsx(al,{children:u&&c.jsx(dt.div,{id:"error-message",className:"bg-red-50 border border-red-200 rounded-lg p-3",role:"alert","aria-live":"polite",initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3},children:c.jsx("p",{className:"text-sm text-red-600",children:u})})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.3},children:c.jsx(tt,{type:"submit",variant:"primary",size:"lg",disabled:o,className:"w-full",children:o?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",className:"mr-2"}),"Logging in..."]}):"Login"})})]})]})]}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:c.jsx(al,{children:f.map(L=>c.jsx(dt.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring"},children:c.jsx(ou,{type:L.type,message:L.message,onClose:()=>h(V=>V.filter(J=>J.id!==L.id))})},L.id))})})]})},Is={async getStudentData(){console.log("getStudentData called - loading student subjects");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-subjects")).json();if(t.success)return console.log("Student data loaded successfully:",t.subjects),t.subjects;throw new Error(t.error||"Failed to load student data")}catch(e){throw console.error("Error loading student data:",e),e}},getStudentSubjects(e){return console.log("getStudentSubjects called with subjects:",e),e.map(t=>({id:t.id||t.subject_id,name:t.subject,grade:t.grade,class:t.class,testResults:t.test_results||[]}))},async getTeacherData(){console.log("getTeacherData called - loading teacher subjects");try{const e=await this.getCurrentTeacherId();if(!e)throw new Error("No valid teacher session found");const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-subjects")).json();if(r.success)return console.log("Teacher data loaded successfully:",r.subjects),{teacher_id:e,subjects:r.subjects,hasSubjects:r.subjects.length>0};throw new Error(r.error||"Failed to load teacher data")}catch(e){throw console.error("Error loading teacher data:",e),e}},getTeacherSubjects(e){return console.log("getTeacherSubjects called with subjects:",e),e.map(t=>{let r=[];return t.classes&&Array.isArray(t.classes)&&(r=t.classes.map(n=>({grade:n.grade,class:n.class,className:n.class}))),{id:t.subject_id,name:t.subject,classes:r,assignments:t.assignments||[],description:t.description||""}})},getGradeButtons(){return console.log("getGradeButtons called"),["M1","M2","M3","M4","M5","M6"].map(t=>({id:t,name:t,classes:this.generateClassButtons(t)}))},generateClassButtons(e){const t=[];for(let r=1;r<=10;r++)t.push({id:`${e}_${r}`,name:`${e}/${r}`,grade:e,class:r});return t},async getAdminData(){console.log("getAdminData called - loading admin data");try{if(!await this.getCurrentAdminId())throw new Error("No valid admin session found");const[t,r,n]=await Promise.allSettled([this.getAllTeachers(),this.getAllSubjects(),this.getAllUsers()]);return{teachers:t.status==="fulfilled"?t.value:[],subjects:r.status==="fulfilled"?r.value:[],users:n.status==="fulfilled"?n.value:[],loadedAt:new Date().toISOString()}}catch(e){throw console.error("Error loading admin data:",e),e}},async saveTeacherSubjects(e){console.log("saveTeacherSubjects called with subjects:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-teacher-subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:e})})).json();if(r.success)return console.log("Teacher subjects saved successfully"),r;throw new Error(r.error||"Failed to save teacher subjects")}catch(t){throw console.error("Error saving teacher subjects:",t),t}},async deleteTeacherSubject(e){console.log("deleteTeacherSubject called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/delete-teacher-subject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher subject assignment deleted successfully"),r;throw new Error(r.error||"Failed to delete teacher subject assignment")}catch(t){throw console.error("Error deleting teacher subject assignment:",t),t}},async getSubjectsDropdown(){console.log("getSubjectsDropdown called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("Subjects dropdown data loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,value:r.subject_name}));throw new Error(t.error||"Failed to load subjects dropdown")}catch(e){throw console.error("Error loading subjects dropdown:",e),e}},async getGradesAndClasses(){console.log("getGradesAndClasses called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-grades-classes")).json();if(t.success)return console.log("Grades and classes loaded successfully"),t.data;throw new Error(t.message||"Failed to load grades and classes")}catch(e){throw console.error("Error loading grades and classes:",e),e}},async saveSubjectClasses(e,t){console.log("saveSubjectClasses called with subjectId:",e,"classes:",t);try{const r=await this.getCurrentTeacherId();if(!r)throw new Error("No valid teacher session found");const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-subject-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:r,subject_id:e,classes:t})})).json();if(s.success)return console.log("Subject classes saved successfully"),s;throw new Error(s.error||"Failed to save subject classes")}catch(r){throw console.error("Error saving subject classes:",r),r}},async getAllSubjects(){console.log("getAllSubjects called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("All subjects loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,description:r.description||"",created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all subjects")}catch(e){throw console.error("Error loading all subjects:",e),e}},async getSubjectsForSelection(){console.log("getSubjectsForSelection called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-subjects")).json();if(t.success)return console.log("Subjects for selection loaded successfully"),t.subjects;throw new Error(t.message||"Failed to load subjects for selection")}catch(e){throw console.error("Error loading subjects for selection:",e),e}},async addAcademicYear(e){console.log("addAcademicYear called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/add-academic-year",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Academic year added successfully"),r;throw new Error(r.error||"Failed to add academic year")}catch(t){throw console.error("Error adding academic year:",t),t}},async getAllUsers(){console.log("getAllUsers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-users")).json();if(t.success)return console.log("All users loaded successfully"),t.users.map(r=>({id:r.id,student_id:r.student_id,grade:r.grade,class:r.class,number:r.number,name:r.name,surname:r.surname,nickname:r.nickname,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all users")}catch(e){throw console.error("Error loading all users:",e),e}},async getAllTeachers(){console.log("getAllTeachers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-teachers")).json();if(t.success)return console.log("All teachers loaded successfully"),t.teachers.map(r=>({id:r.id,teacher_id:r.teacher_id,username:r.username,name:r.name,surname:r.surname,email:r.email,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all teachers")}catch(e){throw console.error("Error loading all teachers:",e),e}},async createUser(e){console.log("createUser called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("User created successfully"),r;throw new Error(r.error||"Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){console.log("updateUser called with userId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("User updated successfully"),n;throw new Error(n.error||"Failed to update user")}catch(r){throw console.error("Error updating user:",r),r}},async createTeacher(e){console.log("createTeacher called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-teacher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher created successfully"),r;throw new Error(r.error||"Failed to create teacher")}catch(t){throw console.error("Error creating teacher:",t),t}},async updateTeacher(e,t){console.log("updateTeacher called with teacherId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-teacher/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("Teacher updated successfully"),n;throw new Error(n.error||"Failed to update teacher")}catch(r){throw console.error("Error updating teacher:",r),r}},async updateStudentInfo(e){console.log("updateStudentInfo called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-student-info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Student info updated successfully"),r;throw new Error(r.error||"Failed to update student info")}catch(t){throw console.error("Error updating student info:",t),t}},async changePassword(e){console.log("changePassword called");let t;if(e.studentId)t="/.netlify/functions/change-student-password";else if(e.username)t="/.netlify/functions/change-teacher-password";else throw new Error("Invalid password data: missing studentId or username");try{const n=await(await window.tokenManager.makeAuthenticatedRequest(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n.success)return console.log("Password changed successfully"),n;throw new Error(n.error||"Failed to change password")}catch(r){throw console.error("Error changing password:",r),r}},async getCurrentTeacherId(){try{const{SecureToken:e}=await Qa(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>t4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.teacher_id||r.sub||null}catch(e){return console.error("Error getting current teacher ID:",e),null}},async getCurrentAdminId(){try{const{SecureToken:e}=await Qa(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>t4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.admin_id||r.sub||null}catch(e){return console.error("Error getting current admin ID:",e),null}}},tH=_.createContext(),rH=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState([]),[a,i]=_.useState([]),[o,l]=_.useState([]),[u,d]=_.useState([]),[f,h]=_.useState([]),[g,x]=_.useState([]),[y,v]=_.useState([]),[T,k]=_.useState(!1),[b,E]=_.useState(null),[N,P]=_.useState(!1),[M,j]=_.useState(!1),[A,F]=_.useState(!1),[L,V]=_.useState(null),[J,ne]=_.useState(null),[ee,ie]=_.useState(null),B=_.useCallback(async()=>{try{k(!0),E(null);const Pe=`student_subjects_${t?.student_id||t?.id||""}`;console.log(" UserContext: Checking cache for key:",Pe);const Me=Ta(Pe);if(Me){console.log(" UserContext: Cache HIT! Using cached student data"),s(Me),Y(Me);return}console.log(" UserContext: Cache MISS! Fetching from API");const ze=await Is.getStudentData();if(ze)s(ze),Y(ze),console.log(" UserContext: Caching student data with key:",Pe),Bs(Pe,ze,Cs.student_subjects);else throw new Error("No subjects data received")}catch(ve){E(ve.message||"Failed to load student data"),console.error("Error loading student data:",ve)}finally{k(!1)}},[t?.student_id,t?.id]),Y=ve=>{console.log("Displaying student subjects:",ve),s(ve)},I=_.useCallback(async()=>{try{if(k(!0),E(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid teacher session found in loadTeacherData, redirecting to login"),E("No valid teacher session found");return}const Pe=`teacher_subjects_${t?.teacher_id||t?.id||""}`,Me=Ta(Pe);if(Me){s(Me),Me.length===0?Ut():H(Me);return}const ze=await Is.getTeacherSubjects();if(ze.success)s(ze.subjects),Bs(Pe,ze.subjects,Cs.teacher_subjects),ze.subjects.length===0?Ut():H(ze.subjects);else throw new Error(ze.message||"Failed to load teacher data")}catch(ve){E(ve.message||"Failed to load teacher data"),console.error("Error loading teacher data:",ve)}finally{k(!1)}},[t?.teacher_id,t?.id]),H=ve=>{console.log("Showing main cabinet with subjects:",ve),s(ve)},W=ve=>{console.log("Displaying grade buttons:",ve),l(ve)},R=async()=>{try{if(k(!0),E(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid admin session found in loadAdminData, redirecting to login"),E("No valid admin session found");return}await Promise.all([ye(),Rt(),re()])}catch(ve){E(ve.message||"Failed to load admin data"),console.error("Error loading admin data:",ve)}finally{k(!1)}},z=ve=>{console.log(" populateStudentInfoDirectly called with:",ve);try{r(ve),console.log(" Set student profile:",ve)}catch(Pe){console.error("Error populating student info:",Pe)}},G=ve=>{console.log("=== populateStudentInfo called ==="),r(ve)},Q=ve=>{console.log("=== populateTeacherInfo called ==="),r(ve)},re=_.useCallback(async()=>{try{k(!0);const ve="admin_users_",Pe=Ta(ve);if(Pe){d(Pe),q(Pe);return}const Me=await Is.getAllUsers();if(Me.success)d(Me.users),q(Me.users),Bs(ve,Me.users,Cs.admin_users);else throw new Error(Me.message||"Failed to load users")}catch(ve){E(ve.message||"Failed to load users"),console.error("Error loading users:",ve)}finally{k(!1)}},[]),q=ve=>{console.log("Displaying all users:",ve),d(ve)},se=(ve,Pe)=>{console.log("Displaying users table:",ve,Pe),d(ve)},ce=()=>{console.log("Toggling users content")},pe=()=>{console.log("Showing add user form"),P(!0)},ke=()=>{console.log("Hiding add user form"),P(!1)},le=ve=>{console.log("Editing user row:",ve);const Pe=u.find(Me=>Me.id===ve);V(Pe)},ye=_.useCallback(async()=>{try{const ve="admin_teachers_",Pe=Ta(ve);if(Pe){h(Pe),je(Pe);return}const Me=await Is.getAllTeachers();if(Me.success)h(Me.teachers),je(Me.teachers),Bs(ve,Me.teachers,Cs.admin_teachers);else throw new Error(Me.message||"Failed to load teachers")}catch(ve){E(ve.message||"Failed to load teachers"),console.error("Error loading teachers:",ve)}},[]),je=ve=>{console.log("Displaying all teachers:",ve),h(ve)},Ne=(ve,Pe)=>{console.log("Displaying teachers table:",ve,Pe),h(ve)},We=()=>{console.log("Toggling teachers content")},$e=()=>{console.log("Showing add teacher form"),j(!0)},Nt=()=>{console.log("Hiding add teacher form"),j(!1)},He=ve=>{console.log("Editing teacher:",ve);const Pe=f.find(Me=>Me.id===ve);ne(Pe)},Et=ve=>{console.log("Editing teacher row:",ve);const Pe=f.find(Me=>Me.id===ve);ne(Pe)},Rt=_.useCallback(async()=>{try{const ve="admin_subjects_",Pe=Ta(ve);if(Pe){x(Pe),Mt(Pe);return}const Me=await Is.getAllSubjects();if(Me.success)x(Me.subjects),Mt(Me.subjects),Bs(ve,Me.subjects,Cs.admin_subjects);else throw new Error(Me.message||"Failed to load subjects")}catch(ve){E(ve.message||"Failed to load subjects"),console.error("Error loading subjects:",ve)}},[]),Mt=ve=>{console.log("Displaying all subjects:",ve),x(ve)},ur=(ve,Pe)=>{console.log("Displaying subjects table:",ve,Pe),x(ve)},wr=()=>{console.log("Toggling subjects content")},dr=()=>{console.log("Showing add subject form"),F(!0)},wt=()=>{console.log("Hiding add subject form"),F(!1)},Ke=ve=>{console.log("Editing subject row:",ve);const Pe=g.find(Me=>Me.id===ve);ie(Pe)},it=ve=>{console.log("Displaying academic year:",ve),v(ve)},vt=()=>{console.log("Showing add academic year form")},st=()=>{console.log("Hiding add academic year form")},qe=ve=>{console.log("Handling add academic year:",ve)},ot=()=>{console.log("Toggling academic year content")},kt=()=>{console.log("Showing academic year editor")},Ut=()=>{console.log("Showing subject selection")},Qt=()=>{console.log("Showing main cabinet")},Gt=ve=>{r(Pe=>({...Pe,...ve}))},Zt=()=>{r(null),s([]),i([]),l([]),d([]),h([]),x([]),v([]),E(null)},ir=_.useCallback(ve=>{Zt(),ve&&GT(ve)},[]),kr={userProfile:t,userSubjects:n,userClasses:a,userGrades:o,allUsers:u,allTeachers:f,allSubjects:g,academicYears:y,isLoading:T,error:b,showUserForm:N,showTeacherForm:M,showSubjectForm:A,editingUser:L,editingTeacher:J,editingSubject:ee,loadStudentData:B,displayStudentSubjects:Y,populateStudentInfoDirectly:z,populateStudentInfo:G,loadTeacherData:I,showMainCabinetWithSubjects:H,displayGradeButtons:W,populateTeacherInfo:Q,showSubjectSelection:Ut,showMainCabinet:Qt,loadAdminData:R,getAllUsers:re,displayAllUsers:q,displayUsersTable:se,toggleUsersContent:ce,showAddUserForm:pe,hideAddUserForm:ke,editUserRow:le,loadAllTeachers:ye,displayAllTeachers:je,displayTeachersTable:Ne,toggleTeachersContent:We,showAddTeacherForm:$e,hideAddTeacherForm:Nt,editTeacher:He,editTeacherRow:Et,loadAllSubjects:Rt,displayAllSubjects:Mt,displaySubjectsTable:ur,toggleSubjectsContent:wr,showAddSubjectForm:dr,hideAddSubjectForm:wt,editSubjectRow:Ke,displayAcademicYear:it,showAddAcademicYearForm:vt,hideAddAcademicYearForm:st,handleAddAcademicYear:qe,toggleAcademicYearContent:ot,showAcademicYearEditor:kt,updateUserProfile:Gt,clearUserData:Zt,clearUserDataWithCache:ir,setUserProfile:r,setUserSubjects:s,setUserClasses:i,setUserGrades:l,setAllUsers:d,setAllTeachers:h,setAllSubjects:x,setAcademicYears:v,setError:E};return c.jsx(tH.Provider,{value:kr,children:e})},i3=()=>{const e=_.useContext(tH);if(!e)throw new Error("useUser must be used within a UserProvider");return e},Wd={STUDENT_LOGIN:"/.netlify/functions/student-login",TEACHER_LOGIN:"/.netlify/functions/teacher-login",ADMIN_LOGIN:"/.netlify/functions/admin-login",CHANGE_PASSWORD:"/.netlify/functions/change-password",GET_TEST_QUESTIONS:"/.netlify/functions/get-test-questions",SUBMIT_MULTIPLE_CHOICE_TEST:"/.netlify/functions/submit-multiple-choice-test",SUBMIT_TRUE_FALSE_TEST:"/.netlify/functions/submit-true-false-test",SUBMIT_INPUT_TEST:"/.netlify/functions/submit-input-test",SUBMIT_MATCHING_TEST:"/.netlify/functions/submit-matching-test",SUBMIT_DRAWING_TEST:"/.netlify/functions/submit-drawing-test",GET_STUDENT_SUBJECTS:"/.netlify/functions/get-student-subjects",GET_TEACHER_SUBJECTS:"/.netlify/functions/get-teacher-subjects",GET_ALL_USERS:"/.netlify/functions/get-all-users",GET_ALL_TEACHERS:"/.netlify/functions/get-all-teachers",GET_ALL_SUBJECTS:"/.netlify/functions/get-all-subjects",GET_ACADEMIC_YEAR:"/.netlify/functions/get-academic-year",SAVE_MULTIPLE_CHOICE_TEST:"/.netlify/functions/save-multiple-choice-test",SAVE_TRUE_FALSE_TEST:"/.netlify/functions/save-true-false-test",SAVE_INPUT_TEST:"/.netlify/functions/save-input-test",SAVE_MATCHING_TEST:"/.netlify/functions/save-matching-test",SAVE_DRAWING_TEST:"/.netlify/functions/save-drawing-test",UPDATE_DRAWING_TEST_SCORE:"/.netlify/functions/update-drawing-test-score",UPDATE_SPEAKING_TEST_SCORE:"/.netlify/functions/update-speaking-test-score",UPDATE_TEST_SCORE:"/.netlify/functions/update-test-score",ASSIGN_TEST_TO_CLASSES:"/.netlify/functions/assign-test-to-classes",GET_TEACHER_ACTIVE_TESTS:"/.netlify/functions/get-teacher-active-tests",GET_STUDENT_ACTIVE_TESTS:"/.netlify/functions/get-student-active-tests"},ts={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false",INPUT:"input",MATCHING:"matching_type",WORD_MATCHING:"word_matching",DRAWING:"drawing",FILL_BLANKS:"fill_blanks"},Ro={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"};Array.from({length:10},(e,t)=>t+1);const Km={NOTIFICATION_DURATION:3e3},Ff=(e,t,r)=>{if(!e||!Array.isArray(e)||e.length===0)return{score:0,total:0,percentage:0};let n=0;return e.forEach((s,a)=>{const i=Array.isArray(t)?t[a]:t[String(s.question_id||s.id||a)];i!=null&&Hp(s,i,r)&&n++}),{score:n,total:e.length,percentage:Math.round(n/e.length*100)}},Tv=(e,t)=>{console.log(" Getting correct answer for question:",e,"testType:",t);let r="";switch(t){case ts.TRUE_FALSE:r=e.correct_answer?"true":"false",console.log(" TRUE_FALSE correct_answer from question:",r,typeof r);break;case ts.MULTIPLE_CHOICE:const n=e.correct_answer.charCodeAt(0)-65,s=`option_${String.fromCharCode(97+n)}`,a=e[s];a?r=a:r=`Option ${e.correct_answer}`;break;case ts.INPUT:e.correct_answers&&Array.isArray(e.correct_answers)?r=e.correct_answers.join(", "):r=e.correct_answer||"Unknown";break;case ts.MATCHING:r=e.correct_answer||e.answer;break;case ts.WORD_MATCHING:r=e.correct_answer||e.answer;break;case ts.DRAWING:r="Drawing required";break;case ts.FILL_BLANKS:e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?r=e.correct_answers[0]:r=e.correct_answer||"Unknown";break;default:r="Unknown"}return console.log(" Correct answer:",r),r},Hp=(e,t,r)=>{if(console.log("[DEBUG] checkAnswerCorrectness called for question:",e,"studentAnswer:",t,"testType:",r),!t||t==="")return console.log("[DEBUG] No student answer provided"),!1;let n=!1;switch(r){case ts.TRUE_FALSE:n=t.toLowerCase()==="true"===e.correct_answer;break;case ts.MULTIPLE_CHOICE:let a="";if(typeof t=="string"){const o=t.trim();if(/^[a-z]$/i.test(o))a=o.toUpperCase();else if(/^\d+$/.test(o)){const l=parseInt(o,10),u=l>=0?l:NaN;Number.isNaN(u)||(a=String.fromCharCode(65+u))}}else if(typeof t=="number"){const o=t;Number.isNaN(o)||(a=String.fromCharCode(65+o))}n=a!==""&&a===String(e.correct_answer||"").toUpperCase();break;case ts.INPUT:if(e.correct_answers&&Array.isArray(e.correct_answers)){const o=t.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();n=e.correct_answers.some(l=>{const u=l.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1})}else{const o=t.toLowerCase().trim(),l=e.correct_answer.toLowerCase().trim();o===l?n=!0:l&&o.includes(l)?l.length===1?n=o.startsWith(l)||o.endsWith(l):n=!0:n=!1}break;case ts.MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case ts.WORD_MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case ts.DRAWING:console.warn("Drawing tests should not be auto-scored!"),n=!1;break;case ts.FILL_BLANKS:const i=e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?e.correct_answers[0]:e.correct_answer;if(i&&t){let o="";if(typeof t=="string"){const l=t.trim();if(/^[a-z]$/i.test(l))o=l.toUpperCase();else if(/^\d+$/.test(l)){const u=parseInt(l,10),d=u>=0?u:NaN;Number.isNaN(d)||(o=String.fromCharCode(65+d))}}else if(typeof t=="number"){const l=t;Number.isNaN(l)||(o=String.fromCharCode(65+l))}n=o!==""&&o===String(i||"").toUpperCase()}break;default:console.warn(`[WARN] Unknown test type for answer checking: ${r}`),n=!1}return console.log(`[DEBUG] Answer correctness: ${n}`),n};class Bde{constructor(){this.academicCalendar=null,this.loaded=!1}async loadAcademicCalendar(){if(this.loaded)return this.academicCalendar;try{const t=async n=>{const s=await fetch(n,{headers:{Accept:"application/json"},credentials:"include"}),a=s.headers&&s.headers.get&&s.headers.get("content-type")||"";if(!s.ok)throw new Error(`HTTP ${s.status}`);if(!a.includes("application/json"))throw new Error("Non-JSON response");return await s.json()};let r=null;if(r=await t("/academic_year.json"),!Array.isArray(r))throw new Error("Invalid academic calendar format");return this.academicCalendar=r,this.loaded=!0,console.log(" Academic calendar loaded:",this.academicCalendar.length,"terms"),this.academicCalendar}catch(t){return console.error(" Error loading academic calendar:",t),null}}getCurrentTerm(){if(!this.academicCalendar)return null;const t=new Date;return this.academicCalendar.find(n=>{const s=new Date(n.start_date),a=new Date(n.end_date);return t>=s&&t<=a})}getCurrentSemester(){const t=this.getCurrentTerm();if(!t)return null;const r=t.semester,n=this.academicCalendar.filter(s=>s.semester===r&&s.academic_year===t.academic_year);return{semester:r,currentTerm:t,allTerms:n}}getCurrentAcademicPeriodId(){return this.getCurrentTerm()?.id||null}getSemesterTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.semester===t):[]}getAcademicYearTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.academic_year===t):[]}getCurrentSemesterWithTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,allTerms:s,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getCurrentSemesterTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getTermById(t){return this.academicCalendar?this.academicCalendar.find(r=>r.id===t):null}isCurrentTerm(t){return this.getCurrentTerm()?.id===t}getAcademicYears(){return this.academicCalendar?[...new Set(this.academicCalendar.map(r=>r.academic_year))].sort():[]}getAcademicYearSemesterTerms(t,r){return this.academicCalendar?this.academicCalendar.filter(n=>n.academic_year===t&&n.semester===r):[]}}const cu=new Bde,o3=Object.freeze(Object.defineProperty({__proto__:null,academicCalendarService:cu},Symbol.toStringTag,{value:"Module"})),_n={async getTestInfo(e,t){console.log(`[DEBUG] getTestInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test info data received:",s),s.success)return console.log("[DEBUG] Test info retrieved successfully"),s.test_info;throw new Error(s.error||"Failed to get test info")}catch(r){throw console.error("[ERROR] Failed to get test info:",r),r}},async getTestQuestions(e,t){console.log(`[DEBUG] getTestQuestions called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions data received:",s),s.success)return console.log("[DEBUG] Test questions retrieved successfully"),s.questions;throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions:",r),r}},async getTestQuestionsWithInfo(e,t){console.log(`[DEBUG] getTestQuestionsWithInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions with info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions with info data received:",s),s.success)return console.log("[DEBUG] Test questions with info retrieved successfully"),{questions:s.questions,testInfo:s.test_info};throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions with info:",r),r}},async getActiveTests(){console.log("getActiveTests called - extracting studentId from JWT token");try{const e="/.netlify/functions/get-student-active-tests";console.log("[DEBUG] Fetching active tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Active tests data received:",r),r.success)return console.log("[DEBUG] Active tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get active tests")}catch(e){throw console.error("[ERROR] Failed to get active tests:",e),e}},async getTeacherTests(e=!1){console.log("getTeacherTests called - extracting teacherId from JWT token");try{const t="/.netlify/functions/get-teacher-active-tests",r=e?`${t}?ts=${Date.now()}`:t;console.log("[DEBUG] Fetching teacher tests from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Teacher tests data received:",s),s.success)return console.log("[DEBUG] Teacher tests retrieved successfully"),s.tests;throw new Error(s.error||"Failed to get teacher tests")}catch(t){throw console.error("[ERROR] Failed to get teacher tests:",t),t}},async submitTest(e,t,r,n={},s=null){console.log("Submitting test:",{testType:e,testId:t});try{if(Object.keys(r).length===0)throw new Error("Please answer at least one question before submitting.");let a;try{const E=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`)).json();if(E.success)a=E.test_info;else throw new Error("Failed to get test information")}catch(b){console.error("Error getting test info:",b);const E=await this.getTestQuestions(e,t);a={test_name:`Test ${t}`,num_questions:E.length}}const i=await this.getTestQuestions(e,t);let o,l;if(e==="drawing")o=null,l=null;else{const b=n?.answers_by_id?n.answers_by_id:r;o=Ff(i,b,e).score,l=a.num_questions}const u=this.transformAnswersForSubmission(r,e),d=a.teacher_id||null,f=a.subject_id||null,h=s?.student_id||s?.id||(window.tokenManager?.getCurrentUser?window.tokenManager.getCurrentUser()?.student_id||window.tokenManager.getCurrentUser()?.id:null);await cu.loadAcademicCalendar();const x=cu.getCurrentTerm()?.id;if(!x)throw new Error("No current academic period found");const y={test_id:t,test_name:a.test_name,test_type:e,teacher_id:d,subject_id:f,student_id:h,academic_period_id:x,answers:u,score:o,maxScore:l,time_taken:n.time_taken||null,started_at:n.started_at||null,submitted_at:n.submitted_at||new Date().toISOString(),caught_cheating:n.caught_cheating||!1,visibility_change_times:n.visibility_change_times||0,answers_by_id:n.answers_by_id||null,question_order:n.question_order||null,retest_assignment_id:n.retest_assignment_id||null,parent_test_id:n.parent_test_id||t};console.log(" testService retest_assignment_id:",n.retest_assignment_id),console.log(" testService timingData:",n),console.log(" testService commonData.retest_assignment_id:",y.retest_assignment_id);let v;switch(e){case"multiple_choice":v="/.netlify/functions/submit-multiple-choice-test";break;case"true_false":v="/.netlify/functions/submit-true-false-test";break;case"input":v="/.netlify/functions/submit-input-test";break;case"matching_type":v="/.netlify/functions/submit-matching-type-test";break;case"word_matching":v="/.netlify/functions/submit-word-matching-test";break;case"drawing":v="/.netlify/functions/submit-drawing-test";break;case"fill_blanks":v="/.netlify/functions/submit-fill-blanks-test";break;default:throw new Error(`Unsupported test type: ${e}`)}console.log("Submitting to:",v),console.log("Submission data:",y),console.log("Submission data JSON:",JSON.stringify(y,null,2)),console.log(" Final submission retest_assignment_id:",y.retest_assignment_id);const T=await window.tokenManager.makeAuthenticatedRequest(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const k=await T.json();if(console.log("Test submission result:",k),k.success)return this.clearTestProgress(e,t),{success:!0,score:o,maxScore:l,result:k};throw new Error(k.error||"Failed to submit test")}catch(a){throw console.error("Error submitting test:",a),a}},async createTest(e){try{return(await sa.post("/tests/create",e)).data}catch(t){throw new Error(t.message||"Failed to create test")}},async updateTest(e,t,r){try{return(await sa.put(`/tests/${e}/${t}`,r)).data}catch(n){throw new Error(n.message||"Failed to update test")}},async deleteTest(e,t){try{return(await sa.delete(`/tests/${e}/${t}`)).data}catch(r){throw new Error(r.message||"Failed to delete test")}},async duplicateTest(e,t){try{return(await sa.post(`/tests/${e}/${t}/duplicate`)).data}catch(r){throw new Error(r.message||"Failed to duplicate test")}},async publishTest(e,t){try{return(await sa.post(`/tests/${e}/${t}/publish`)).data}catch(r){throw new Error(r.message||"Failed to publish test")}},async unpublishTest(e,t){try{return(await sa.post(`/tests/${e}/${t}/unpublish`)).data}catch(r){throw new Error(r.message||"Failed to unpublish test")}},async removeClassAssignment(e,t,r){try{return(await sa.delete(`/tests/${e}/${t}/assignments/${r}`)).data}catch(n){throw new Error(n.message||"Failed to remove class assignment")}},async getTestStatistics(e,t){try{return(await sa.get(`/tests/${e}/${t}/statistics`)).data}catch(r){throw new Error(r.message||"Failed to get test statistics")}},async exportTest(e,t,r="json"){try{return(await sa.get(`/tests/${e}/${t}/export?format=${r}`)).data}catch(n){throw new Error(n.message||"Failed to export test")}},async importTest(e,t){try{return(await sa.uploadFile(`/tests/import?type=${t}`,e)).data}catch(r){throw new Error(r.message||"Failed to import test")}},async getTestResults(e,t){try{return(await sa.get(`/tests/${e}/${t}/results`)).data}catch(r){throw new Error(r.message||"Failed to get test results")}},async getStudentTestResults(){try{console.log("[DEBUG] Fetching student test results from: /.netlify/functions/get-student-test-results");const e=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-test-results");if(console.log("[DEBUG] Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("[DEBUG] Student test results data received:",t),t.success)return console.log("[DEBUG] Student test results retrieved successfully"),t;throw new Error(t.error||"Failed to get student test results")}catch(e){throw console.error("[ERROR] Failed to get student test results:",e),new Error(e.message||"Failed to get student test results")}},async getClassResults(e,t,r){try{return(await sa.get(`/tests/class-results/${e}/${t}/${r}`)).data}catch(n){throw new Error(n.message||"Failed to get class results")}},async saveTestProgress(e,t,r){try{return(await sa.post(`/tests/${e}/${t}/progress`,{progress:r})).data}catch(n){throw new Error(n.message||"Failed to save test progress")}},async getTestProgress(e,t){try{return(await sa.get(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to get test progress")}},async clearTestProgress(e,t){try{return(await sa.delete(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to clear test progress")}},async validateTestData(e){try{return(await sa.post("/tests/validate",e)).data}catch(t){throw new Error(t.message||"Failed to validate test data")}},async getTestPreview(e,t){try{return(await sa.get(`/tests/${e}/${t}/preview`)).data}catch(r){throw new Error(r.message||"Failed to get test preview")}},isAnswerCorrect(e,t,r,n){switch(n){case"multiple_choice":return String.fromCharCode(65+parseInt(t))===r.correct_answer;case"true_false":return t.toLowerCase()==="true"===r.correct_answer;case"input":const i=r.correct_answers||[],o=t.toLowerCase().trim();return i.some(l=>{const u=l.toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1});case"matching_type":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"word_matching":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"drawing":return t&&t!=="No answer";default:return!1}},transformAnswersForSubmission(e,t){switch(t){case"multiple_choice":return e;case"true_false":return e;case"input":return e;case"matching_type":return e;case"word_matching":return e;case"drawing":if(Array.isArray(e)&&e.length>0)try{const r=e[0];return typeof r=="string"&&r.startsWith("[")?JSON.parse(r):e}catch(r){return console.warn("Failed to parse drawing answers:",r),e}return e;default:return e}},async markAssignmentCompleted(e){try{console.log(`[DEBUG] markAssignmentCompleted called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/mark-test-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Mark assignment completed response:",r),r.success)return console.log(`Assignment ${e} marked as completed successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to mark assignment as completed")}catch(t){throw console.error("Error marking assignment completed:",t),t}},async activateAssignment(e){try{console.log(`[DEBUG] activateAssignment called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/activate-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Activate assignment response:",r),r.success)return console.log(`Assignment ${e} activated successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to activate assignment")}catch(t){throw console.error("Error activating assignment:",t),t}},clearTestProgress(e,t){try{const r=`test_progress_${e}_${t}`;localStorage.removeItem(r),console.log(`Test progress cleared for ${e}_${t}`)}catch(r){console.error("Error clearing test progress:",r)}},async saveMultipleChoiceTest(e){console.log("[DEBUG] saveMultipleChoiceTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-multiple-choice-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save multiple choice test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving multiple choice test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveTrueFalseTest(e){console.log("[DEBUG] saveTrueFalseTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-true-false-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save true/false test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving true/false test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveInputTest(e){console.log("[DEBUG] saveInputTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-input-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save input test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving input test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveMatchingTest(e){console.log("[DEBUG] saveMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"matching_type",num_questions:e.num_blocks})})).json();return console.log("[DEBUG] Save matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveWordMatchingTest(e){console.log("[DEBUG] saveWordMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"word_matching"})})).json();return console.log("[DEBUG] Save word matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving word matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveDrawingTest(e){console.log("[DEBUG] saveDrawingTest called with:",e);try{const t={...e,test_type:"drawing"},n=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return console.log("[DEBUG] Save drawing test response:",n),n.success?{success:!0,data:{test_id:n.test_id}}:{success:!1,message:n.message||"Failed to save test"}}catch(t){return console.error("Error saving drawing test:",t),{success:!1,message:"Error saving test: "+t.message}}},async getDrawingTest(e){console.log("[DEBUG] getDrawingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-drawing-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get drawing test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting drawing test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitDrawingTest(e,t,r,n){console.log("[DEBUG] submitDrawingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-drawing-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit drawing test response:",a),a.success?{success:!0,data:a.data}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting drawing test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async updateDrawingTestScore(e,t,r){console.log("[DEBUG] updateDrawingTestScore called with:",{resultId:e,score:t,maxScore:r});try{const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-drawing-test-score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:e,score:t,max_score:r})})).json();return console.log("[DEBUG] Update drawing test score response:",s),s.success?{success:!0,data:s.data}:{success:!1,message:s.message||"Failed to update score"}}catch(n){return console.error("Error updating drawing test score:",n),{success:!1,message:"Error updating score: "+n.message}}},async getWordMatchingTest(e){console.log("[DEBUG] getWordMatchingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-word-matching-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get word matching test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting word matching test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitWordMatchingTest(e,t,r,n){console.log("[DEBUG] submitWordMatchingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit word matching test response:",a),a.success?{success:!0,result:a.result}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting word matching test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async assignTestToClasses(e){console.log("[DEBUG] assignTestToClasses called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save test with assignments response:",r),r.success?{success:!0,message:"Test assigned successfully"}:{success:!1,message:r.message||"Failed to assign test"}}catch(t){return console.error("Error assigning test to classes:",t),{success:!1,message:"Error assigning test: "+t.message}}},async removeClassAssignment(e){console.log("[DEBUG] removeClassAssignment called with assignmentId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/remove-class-assignment?assignment_id=${e}`,{method:"DELETE"})).json();return console.log("[DEBUG] Remove class assignment response:",r),r.success?{success:!0,message:"Assignment removed successfully"}:{success:!1,message:r.message||"Failed to remove assignment"}}catch(t){return console.error("Error removing class assignment:",t),{success:!1,message:"Error removing assignment: "+t.message}}},async updateTestQuestions(e,t,r){try{console.log(`[DEBUG] updateTestQuestions called with testType: ${e}, testId: ${t}`);const n=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-test-questions",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t,questions:r})});if(!n.ok){let a=`HTTP error! status: ${n.status}`;try{const i=await n.json();a=i.details||i.error||a,console.error("[DEBUG] Update questions error response:",i)}catch{}throw new Error(a)}const s=await n.json();if(console.log("[DEBUG] Update questions response:",s),s.success)return console.log(`Questions for ${e}_${t} updated successfully`),{success:!0,message:s.message};{const a=s.error||s.details||"Failed to update questions";throw console.error("[DEBUG] Update questions error:",a,s),new Error(a)}}catch(n){throw console.error("Error updating questions:",n),n}},async updateTestSettings(e,t,r){try{console.log(`[DEBUG] updateTestSettings called with testType: ${e}, testId: ${t}`);const n=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-test-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t,...r})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Update settings response:",s),s.success)return console.log(`Settings for ${e}_${t} updated successfully`),{success:!0,message:s.message};throw new Error(s.error||"Failed to update settings")}catch(n){throw console.error("Error updating settings:",n),n}}},nH=_.createContext(),sH=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState([]),[a,i]=_.useState({}),[o,l]=_.useState({}),[u,d]=_.useState(!1),[f,h]=_.useState(null),[g,x]=_.useState([]),[y,v]=_.useState(!1),[T,k]=_.useState(null),[b,E]=_.useState({isOpen:!1,testType:null,testId:null,testName:null,questions:[]}),[N,P]=_.useState(null),[M,j]=_.useState(0),{getItem:A,setItem:F,removeItem:L}=aW();_.useEffect(()=>{let ve;return u&&N&&(ve=setInterval(()=>{const Pe=Math.floor((Date.now()-N)/1e3);j(Pe)},1e3)),()=>{ve&&clearInterval(ve)}},[u,N]);const V=async(ve,Pe)=>{try{v(!0),k(null),console.log(`[DEBUG] loadTestForPage called with testType: ${ve}, testId: ${Pe}`);const Me=await _n.getTestInfo(ve,Pe);console.log("[DEBUG] Test info retrieved:",Me);const ze=await _n.getTestQuestions(ve,Pe);console.log("[DEBUG] Test questions retrieved:",ze),r({...Me,testType:ve,testId:Pe}),s(ze),d(!0),P(Date.now()),j(0),J(ve,Pe),console.log("[DEBUG] Test loaded successfully")}catch(Me){k(Me.message||"Failed to load test"),console.error("Error loading test:",Me)}finally{v(!1)}},J=(ve,Pe)=>{try{const Me=`test_progress_${ve}_${Pe}`,ze=A(Me);ze&&(i(ze.answers||{}),l(ze.progress||{}))}catch(Me){console.error("Error loading saved progress:",Me)}},ne=(ve,Pe,Me,ze)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}const Kt=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${ve}_${Pe}`,hr={...a,[Me]:ze},Ye={...o,[Me]:{answered:!0,timestamp:Date.now()}};i(hr),l(Ye),F(Kt,{answers:hr,progress:Ye,lastSaved:Date.now()}),console.log(`Saved progress for question ${Me}:`,ze)}catch(At){console.error("Error saving test progress:",At)}},ee=(ve,Pe,Me)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated())return console.warn("[WARN] Cannot get progress: No valid JWT token"),null;const At=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${ve}_${Pe}`;return A(At)?.answers?.[Me]||null}catch(ze){return console.error("Error getting test progress:",ze),null}},ie=(ve,Pe)=>{try{if(console.log(`[DEBUG] clearTestProgress called with testType: ${ve}, testId: ${Pe}`),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const Me=window.tokenManager?.getDecodedToken()?.sub||"unknown",ze=`test_progress_${Me}_${ve}_${Pe}`;console.log(`[DEBUG] Removing localStorage key: ${ze}`);const At=A(ze)!==null;L(ze),i({}),l({});for(let Kt=0;Kt<localStorage.length;Kt++){const hr=localStorage.key(Kt);hr&&hr.startsWith(`test_progress_${Me}_${ve}_${Pe}_`)&&(localStorage.removeItem(hr),console.log(`[DEBUG] Cleared individual question key: ${hr}`))}console.log(At?`[DEBUG] Progress cleared for test ${ve}_${Pe}`:`[DEBUG] No progress found to clear for test ${ve}_${Pe}`)}catch(Me){console.error("Error clearing test progress:",Me)}},B=async(ve,Pe,Me="")=>{try{v(!0),k(null),console.log("Submitting test:",{testType:ve,testId:Pe});const ze=re(ve,Pe);if(Object.keys(ze).length===0){k("Please answer at least one question before submitting.");return}let At;try{At=await _n.getTestInfo(ve,Pe)}catch(Fe){console.error("Error getting test info:",Fe);const xt=await _n.getTestQuestions(ve,Pe);At={test_name:`Test ${Pe}`,num_questions:xt.length}}const Kt=await _n.getTestQuestions(ve,Pe),hr=Ff(Kt,ze,ve),Ye=At.num_questions,ft=se(ze,ve),lt={test_id:Pe,test_name:At.test_name,score:hr,maxScore:Ye,answers:ft},Wt=await _n.submitTest(ve,Pe,lt);if(Wt.success){if(h(Wt.result),W(ve,Pe,Me),ie(ve,Pe),Me){const Fe=`student_results_table_${Me}`;ve!=="drawing"?(console.log(" TestContext: Caching test results after submission with key:",Fe),Bs(Fe,Wt.result,Cs.student_results_table)):console.log(" TestContext: Skipping cache for drawing test submission (teacher-scored).")}return Me&&n1(Me,ve,Pe),d(!1),Wt.results}else throw new Error(Wt.message||"Test submission failed")}catch(ze){throw k(ze.message||"Failed to submit test"),ze}finally{v(!1)}},Y=(ve,Pe,Me)=>{h({testType:ve,testId:Pe,answers:Me}),d(!1)},I=()=>{r(null),s([]),i({}),l({}),d(!1),h(null),k(null),P(null),j(0)},H=(ve,Pe,Me="")=>{try{const ze=`test_completed_${Me}_${ve}_${Pe}`;return A(ze)===!0}catch(ze){return console.error("Error checking test completion:",ze),!1}},W=(ve,Pe,Me="")=>{try{const ze=`test_completed_${Me}_${ve}_${Pe}`;F(ze,!0)}catch(ze){console.error("Error marking test completed:",ze)}},R=ve=>Object.keys(a).length,z=()=>{const ve=R(t?.testType),Pe=n.length;return{canSubmit:ve===Pe,answeredCount:ve,totalQuestions:Pe}},G=()=>{t&&ie(t.testType,t.testId),I()},Q=(ve="")=>{try{const Pe=`student_results_table_${ve}`;console.log(" TestContext: Clearing test results cache:",Pe),localStorage.removeItem(Pe),console.log(" TestContext: Test results cache cleared")}catch(Pe){console.error("Error clearing test results cache:",Pe)}},re=(ve,Pe)=>({...a}),q=(ve,Pe,Me=null)=>{try{if(!ve)return"No answer";switch(Pe){case"true_false":return ve?"True":"False";case"multiple_choice":if(Me&&typeof ve=="string"&&!isNaN(parseInt(ve))){const ze=parseInt(ve),At=`option_${String.fromCharCode(97+ze)}`,Kt=Me[At];if(Kt)return Kt}return String(ve).toUpperCase();case"input":return String(ve);case"matching_type":return typeof ve=="object"?Object.entries(ve).map(([ze,At])=>`${ze}  ${At}`).join(", "):String(ve);case"word_matching":return typeof ve=="object"?Object.entries(ve).map(([ze,At])=>`${ze}  ${At}`).join(", "):String(ve);case"drawing":return"Drawing submitted";default:return String(ve)}}catch(ze){return console.error("Error formatting student answer:",ze),"Error displaying answer"}},se=(ve,Pe)=>{try{if(!ve||typeof ve!="object")return{};const Me={};return Object.entries(ve).forEach(([ze,At])=>{if(At!=null)switch(Pe){case"true_false":Me[ze]=!!At;break;case"multiple_choice":Me[ze]=String(At).toUpperCase();break;case"input":Me[ze]=String(At).trim();break;case"matching_type":typeof At=="object"?Me[ze]=At:Me[ze]=String(At);break;case"word_matching":typeof At=="object"?Me[ze]=At:Me[ze]=String(At);break;case"drawing":Me[ze]=At;break;default:Me[ze]=At}}),Me}catch(Me){return console.error("Error transforming answers for submission:",Me),ve||{}}},ce=_.useCallback(async(ve="")=>{const Pe=`student_active_tests_${ve}`,Me=HT(Pe,{includeExpired:!0}),ze=Me?.data,At=Array.isArray(ze)?!0:!!ze,Kt=Cs.student_active_tests?Cs.student_active_tests*.5:0,hr=!At||Me?.isExpired||Kt>0&&Me?.age>Kt,Ye=!At||Me?.isExpired===!0;if(At&&x(ze),!hr)return v(!1),ze;if(!Ye&&At)return v(!1),(async()=>{try{const ft=await _n.getActiveTests();if(x(ft),Bs(Pe,ft,Cs.student_active_tests),ve)try{localStorage.setItem(`last_cabinet_refresh_${ve}`,Date.now().toString())}catch(lt){console.warn("Unable to persist last cabinet refresh timestamp:",lt)}}catch(ft){console.warn("Background refresh of active tests failed:",ft)}})(),ze;v(!0);try{const ft=await _n.getActiveTests();if(x(ft),Bs(Pe,ft,Cs.student_active_tests),ve)try{localStorage.setItem(`last_cabinet_refresh_${ve}`,Date.now().toString())}catch(lt){console.warn("Unable to persist last cabinet refresh timestamp:",lt)}return ft}catch(ft){return k(ft.message||"Failed to load active tests"),x([]),[]}finally{v(!1)}},[]),pe=async()=>{try{return v(!0),await _n.getTeacherTests()}catch(ve){return k(ve.message||"Failed to load teacher tests"),[]}finally{v(!1)}},ke=async ve=>{try{return v(!0),await _n.createTest(ve)}catch(Pe){throw k(Pe.message||"Failed to create test"),Pe}finally{v(!1)}},le=async(ve,Pe)=>{try{return v(!0),await _n.deleteTest(ve,Pe)}catch(Me){throw k(Me.message||"Failed to delete test"),Me}finally{v(!1)}},ye=async(ve,Pe)=>{try{return await _n.getTestInfo(ve,Pe)}catch(Me){throw console.error("Error getting test info:",Me),Me}},je=async(ve,Pe)=>{try{return await _n.getTestQuestions(ve,Pe)}catch(Me){throw console.error("Error getting test questions:",Me),Me}},Ne=async(ve,Pe,Me)=>{try{console.log("Showing test results:",{testType:ve,testId:Pe,studentAnswers:Me});const ze=await ye(ve,Pe),At=await je(ve,Pe);Nt(ze,At,ve,Me),d(!1),console.log("Test results displayed successfully")}catch(ze){console.error("Error showing test results:",ze),k("Failed to display test results"),h({testType:ve,testId:Pe,answers:Me,showResults:!0,error:"Could not load detailed results"}),d(!1)}},We=async(ve,Pe,Me)=>{try{v(!0);const ze=await ye(ve,Pe),At=await je(ve,Pe);Nt(ze,At,ve,Me)}catch(ze){k(ze.message||"Failed to load test results")}finally{v(!1)}},$e=_.useCallback(async(ve="")=>{try{v(!0);const Pe=`student_results_table_${ve}`;console.log(" TestContext: Checking cache for key:",Pe);const Me=Ta(Pe);if(Me)return console.log(" TestContext: Cache HIT! Using cached test results"),h(Me),Me;console.log(" TestContext: Cache MISS! Fetching from API");const ze=await _n.getStudentTestResults();return console.log(" TestContext: Test results loaded:",ze),console.log(" TestContext: Results data:",ze?.results||ze),console.log(" TestContext: Results length:",ze?.results?.length||0),h(ze),console.log(" TestContext: Caching test results with key:",Pe),console.log(" TestContext: Results being cached:",ze),console.log(" TestContext: Results.results being cached:",ze.results),Bs(Pe,ze,Cs.student_results_table),ze}catch(Pe){throw console.error("Error loading test results:",Pe),k(Pe.message||"Failed to load test results"),Pe}finally{v(!1)}},[]),Nt=(ve,Pe,Me,ze)=>{try{console.log("Displaying test results:",{testInfo:ve,questions:Pe,testType:Me,studentAnswers:ze});const At=Ff(Pe,ze,Me),Kt=ve?.num_questions||Pe?.length||0,hr=Kt>0?Math.round(At/Kt*100):0,Ye=hr>=60,ft=Pe.map((lt,Wt)=>{const Fe=lt.question_id||lt.id,xt=ze[Fe],yt=Hp(lt,xt,Me);return{questionNumber:Wt+1,question:lt.question||lt.question_text,userAnswer:q(xt,Me),correctAnswer:Tv(lt,Me),isCorrect:yt,questionType:Me}});h({testInfo:ve,questions:Pe,testType:Me,studentAnswers:ze,showResults:!0,score:At,totalQuestions:Kt,percentage:hr,passed:Ye,questionAnalysis:ft,timestamp:new Date().toISOString()}),l(lt=>({...lt,score:At,totalQuestions:Kt,percentage:hr,passed:Ye,lastUpdated:Date.now()})),He(),console.log(`Test results displayed: ${At}/${Kt} (${hr}%) - ${Ye?"PASSED":"FAILED"}`)}catch(At){console.error("Error displaying test results:",At),k("Failed to display test results")}},He=_.useCallback(()=>{try{console.log("Setting up test results page event listeners");const ve=Kt=>{if(Kt.key==="Escape"&&G(),Kt.ctrlKey&&Kt.key==="p"&&(Kt.preventDefault(),window.print()),Kt.key==="Enter"&&f&&!f.passed){const hr=document.getElementById("retake-test-button");hr&&hr.click()}},Pe=()=>{window.print()},Me=()=>{if(f){const Kt=`Test: ${f.testInfo?.test_name||"Test"}
Score: ${f.score}/${f.totalQuestions} (${f.percentage}%)
Status: ${f.passed?"PASSED":"FAILED"}
Completed: ${new Date(f.timestamp).toLocaleString()}`;navigator.clipboard.writeText(Kt).then(()=>{console.log("Results copied to clipboard")}).catch(hr=>{console.error("Failed to copy results:",hr)})}};document.addEventListener("keydown",ve);const ze=document.getElementById("print-results");ze&&ze.addEventListener("click",Pe);const At=document.getElementById("copy-results");return At&&At.addEventListener("click",Me),()=>{document.removeEventListener("keydown",ve),ze&&ze.removeEventListener("click",Pe),At&&At.removeEventListener("click",Me)}}catch(ve){console.error("Error setting up test results page event listeners:",ve)}},[G,f]),Et=async(ve,Pe,Me)=>{try{v(!0),k(null),console.log("Viewing test details:",{testType:ve,testId:Pe,testName:Me}),E({isOpen:!0,testType:ve,testId:Pe,testName:Me,questions:[],isLoading:!0});const ze=await _n.getTestQuestions(ve,Pe);ze&&ze.length>0?(E({isOpen:!0,testType:ve,testId:Pe,testName:Me,questions:ze,isLoading:!1}),console.log(`Test details loaded: ${ze.length} questions`)):(k("Could not load test questions. Please try again."),E({isOpen:!0,testType:ve,testId:Pe,testName:Me,questions:[],isLoading:!1,error:"No questions available for this test"}))}catch(ze){console.error("Error loading test details:",ze),k("Error loading test details. Please try again."),E({isOpen:!0,testType:ve,testId:Pe,testName:Me,questions:[],isLoading:!1,error:ze.message||"Failed to load test details"})}finally{v(!1)}},Rt=(ve,Pe,Me,ze)=>{try{console.log("Showing test details modal:",{testType:ve,testId:Pe,testName:Me,questions:ze}),E({isOpen:!0,testType:ve,testId:Pe,testName:Me,questions:ze||[],isLoading:!1,error:null})}catch(At){console.error("Error showing test details modal:",At),k("Failed to show test details modal")}},Mt=()=>{try{console.log("Closing test details modal"),E({isOpen:!1,testType:null,testId:null,testName:null,questions:[],isLoading:!1,error:null})}catch(ve){console.error("Error closing test details modal:",ve)}},ur=(ve,Pe)=>{try{switch(Pe){case"multiple_choice":return c.jsxs("div",{className:"answer-options",children:[c.jsx("p",{children:c.jsx("strong",{children:"Options:"})}),c.jsxs("p",{children:["A) ",ve.option_a||"No text"]}),c.jsxs("p",{children:["B) ",ve.option_b||"No text"]}),ve.option_c&&c.jsxs("p",{children:["C) ",ve.option_c]}),ve.option_d&&c.jsxs("p",{children:["D) ",ve.option_d]}),ve.option_e&&c.jsxs("p",{children:["E) ",ve.option_e]}),ve.option_f&&c.jsxs("p",{children:["F) ",ve.option_f]}),c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer||"Not specified"]})})]});case"true_false":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer?"True":"False"]})})});case"input":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer||"Not specified"]})})});case"matching_type":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer?JSON.stringify(ve.correct_answer):"Not specified"]})})});case"word_matching":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer?JSON.stringify(ve.correct_answer):"Not specified"]})})});default:return c.jsx("p",{children:"Unknown question type"})}}catch(Me){return console.error("Error formatting question answer display:",Me),c.jsx("p",{children:"Error displaying question"})}},wr=(ve,Pe)=>{try{console.log("Navigating to test:",{testType:ve,testId:Pe}),r({testType:ve,testId:Pe}),d(!0),V(ve,Pe)}catch(Me){console.error("Error navigating to test:",Me),k("Failed to navigate to test")}},dr=()=>{try{console.log("Hiding test sections"),r(null),s([]),i({}),l({}),d(!1),h(null),k(null)}catch(ve){console.error("Error hiding test sections:",ve)}},wt=(ve,Pe,Me,ze)=>{try{console.log("Displaying test on page:",{testInfo:ve,questions:Pe,testType:Me,testId:ze}),r({...ve,testType:Me,testId:ze}),s(Pe),d(!0),J(Me,ze),kt(Me,ze),qe(Me,ze)}catch(At){console.error("Error displaying test on page:",At),k("Failed to display test on page")}},Ke=(ve,Pe,Me)=>{try{return console.log("Rendering questions for page:",{questions:ve,testType:Pe,testId:Me}),!ve||!Array.isArray(ve)?(console.warn("Invalid questions array for rendering"),[]):ve.map((ze,At)=>{const Kt=hr=>{const Ye={...a,[ze.question_id]:hr};i(Ye),ne(Pe,Me,ze.question_id,hr)};return{question:ze,index:At,testType:Pe,testId:Me,studentAnswer:a[ze.question_id]||"",onAnswerChange:Kt}})}catch(ze){return console.error("Error rendering questions for page:",ze),[]}},it=_.useCallback((ve,Pe)=>{try{if(!ve||!Pe){console.warn("Cannot save progress: missing testType or testId");return}const Me=`test_progress_${ve}_${Pe}`,ze={answers:a,progress:o,lastSaved:Date.now(),testType:ve,testId:Pe};F(Me,ze),console.log(`Progress saved for test ${ve}_${Pe}:`,ze)}catch(Me){console.error("Error saving progress for page:",Me)}},[a,o,F]),vt=_.useCallback(ve=>{try{return!a||Object.keys(a).length===0?0:Object.values(a).filter(Me=>Me==null?!1:typeof Me=="string"?Me.trim()!=="":typeof Me=="object"?Object.keys(Me).length>0:!0).length}catch(Pe){return console.error("Error getting answered questions count for page:",Pe),0}},[a]),st=_.useCallback((ve,Pe)=>{try{console.log("Updating progress display for page:",{testType:ve,testId:Pe});const Me=vt(ve),ze=n.length,At=ze>0?Math.round(Me/ze*100):0,Kt=Me===ze&&ze>0;l(lt=>({...lt,answeredCount:Me,totalQuestions:ze,percentage:At,canSubmit:Kt,remainingQuestions:ze-Me,lastUpdated:Date.now()}));const hr=document.getElementById("progress-bar"),Ye=document.getElementById("progress-text"),ft=document.getElementById("submit-test-button");return hr&&(hr.style.width=`${At}%`,hr.className=hr.className.replace(/bg-\w+-\d+/,""),At>=100?hr.classList.add("bg-green-500"):At>=80?hr.classList.add("bg-blue-500"):At>=60?hr.classList.add("bg-yellow-500"):At>=40?hr.classList.add("bg-orange-500"):hr.classList.add("bg-red-500")),Ye&&(Ye.textContent=`${Me}/${ze} questions answered (${At}%)`),ft&&(ft.disabled=!Kt,Kt?(ft.textContent=" Submit Test",ft.classList.remove("bg-gray-400"),ft.classList.add("bg-green-600","hover:bg-green-700")):(ft.textContent=` Complete ${ze-Me} more question${ze-Me!==1?"s":""}`,ft.classList.remove("bg-green-600","hover:bg-green-700"),ft.classList.add("bg-gray-400"))),{answeredCount:Me,totalQuestions:ze,percentage:At,canSubmit:Kt}}catch(Me){return console.error("Error updating progress display for page:",Me),{answeredCount:0,totalQuestions:0,percentage:0,canSubmit:!1}}},[n.length,vt]),qe=_.useCallback((ve,Pe)=>{try{console.log("Setting up test page event listeners:",{testType:ve,testId:Pe});const Me=setInterval(()=>{Object.keys(a).length>0&&(it(ve,Pe),console.log("Auto-saved progress for test:",ve,Pe))},3e4),ze=setInterval(()=>{st(ve,Pe)},2e3),At=lt=>{lt.key==="Escape"&&window.confirm("Are you sure you want to exit the test? Your progress will be saved.")&&G(),lt.ctrlKey&&lt.key==="s"&&(lt.preventDefault(),it(ve,Pe),console.log("Manual save triggered")),lt.key},Kt=lt=>{Object.keys(a).length>0&&(lt.preventDefault(),lt.returnValue="Your test progress will be saved. Are you sure you want to leave?")},hr=()=>{document.hidden&&(console.log("Tab became hidden - saving progress"),it(ve,Pe))},Ye=()=>{console.log("Window focused - updating progress"),st(ve,Pe)},ft=()=>{console.log("Window blurred - saving progress"),it(ve,Pe)};return document.addEventListener("keydown",At),window.addEventListener("beforeunload",Kt),document.addEventListener("visibilitychange",hr),window.addEventListener("focus",Ye),window.addEventListener("blur",ft),window.testIntervals||(window.testIntervals={}),window.testIntervals[`autosave_${ve}_${Pe}`]=Me,window.testIntervals[`progress_${ve}_${Pe}`]=ze,()=>{clearInterval(Me),clearInterval(ze),document.removeEventListener("keydown",At),window.removeEventListener("beforeunload",Kt),document.removeEventListener("visibilitychange",hr),window.removeEventListener("focus",Ye),window.removeEventListener("blur",ft),window.testIntervals&&(delete window.testIntervals[`autosave_${ve}_${Pe}`],delete window.testIntervals[`progress_${ve}_${Pe}`])}}catch(Me){console.error("Error setting up test page event listeners:",Me)}},[a,it,st,G]),ot=_.useCallback(()=>{try{const ve=vt(t?.testType),Pe=n.length,Me=ve===Pe&&Pe>0,ze=document.getElementById("submit-test-button");return ze&&(ze.disabled=!Me,ze.textContent=Me?"Submit Test":`Complete ${Pe-ve} more questions`),{canSubmit:Me,answeredCount:ve,totalQuestions:Pe}}catch(ve){return console.error("Error updating submit button state for page:",ve),{canSubmit:!1,answeredCount:0,totalQuestions:0}}},[t,n.length,vt]),kt=_.useCallback((ve,Pe)=>{try{console.log("Setting up progress tracking for page:",{testType:ve,testId:Pe});const Me=setInterval(()=>{st(ve,Pe),ot()},1e3),ze=setInterval(()=>{Object.keys(a).length>0&&it(ve,Pe)},3e4);return window.testIntervals||(window.testIntervals={}),window.testIntervals[`progress_${ve}_${Pe}`]=Me,window.testIntervals[`autosave_${ve}_${Pe}`]=ze,()=>{clearInterval(Me),clearInterval(ze),window.testIntervals&&(delete window.testIntervals[`progress_${ve}_${Pe}`],delete window.testIntervals[`autosave_${ve}_${Pe}`])}}catch(Me){console.error("Error setting up progress tracking for page:",Me)}},[a,st,ot,it]),Ut=_.useCallback(async(ve,Pe)=>{const Me=document.getElementById("submit-test-button");try{const ze=vt(ve),At=n.length;if(ze<At){k(`Please answer all ${At} questions before submitting.`);return}if(!window.confirm("Are you sure you want to submit your test? This action cannot be undone."))return;Me&&(Me.disabled=!0,Me.innerHTML=`
          <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
            <span>Submitting...</span>
          </div>
        `),await B(ve,Pe)&&(ie(ve,Pe),Y(ve,Pe,a),console.log("Test submitted successfully!"))}catch(ze){console.error("Error submitting test from page:",ze),k("Failed to submit test. Please try again."),Me&&(Me.disabled=!1,Me.textContent="Submit Test")}},[vt,n.length,B,ie,Y,a]),Qt=_.useCallback(()=>{try{if(!t)return null;const ve=["true_false","multiple_choice","input","matching_type","word_matching"];return ve.includes(t.testType)?t.testType:ve.includes(t.test_type)?t.test_type:null}catch(ve){return console.error("Error getting current test type:",ve),null}},[t]),Gt=_.useCallback((ve,Pe)=>{try{console.log("Clearing progress tracking interval:",{testType:ve,testId:Pe});const Me=`progress_interval_${ve}_${Pe}`,ze=`autosave_interval_${ve}_${Pe}`;window.testIntervals&&(window.testIntervals[Me]&&(clearInterval(window.testIntervals[Me]),delete window.testIntervals[Me]),window.testIntervals[ze]&&(clearInterval(window.testIntervals[ze]),delete window.testIntervals[ze])),console.log(`Cleared progress tracking intervals for test ${ve}_${Pe}`)}catch(Me){console.error("Error clearing progress tracking interval:",Me)}},[]),kr={currentTest:t,testQuestions:n,studentAnswers:a,testProgress:o,isTestActive:u,testResults:f,activeTests:g,isLoading:y,error:T,testDetailsModal:b,testStartTime:N,timeElapsed:M,loadTestForPage:V,submitTest:B,navigateToTestResults:Y,navigateBackToCabinet:I,clearTestDataAndReturnToCabinet:G,saveTestProgress:ne,getTestProgress:ee,clearTestProgress:ie,loadSavedProgressForPage:J,isTestCompleted:H,markTestCompleted:W,markTestCompletedInUI:(ve,Pe)=>{console.log("Marking test completed in UI:",{testType:ve,testId:Pe}),W(ve,Pe)},getAnsweredQuestionsCount:R,updateSubmitButtonState:z,updateSubmitButtonStateForPage:ot,loadStudentActiveTests:ce,loadActiveTests:ce,loadTeacherActiveTests:pe,getTestInfo:ye,getTestQuestions:je,createTest:ke,deleteTest:le,showTestResults:Ne,loadTestResults:$e,loadTestResultsForPage:We,displayTestResultsOnPage:Nt,setupTestResultsPageEventListeners:He,clearTestResultsCache:Q,viewTestDetails:Et,showTestDetailsModal:Rt,closeTestDetailsModal:Mt,getQuestionAnswerDisplay:ur,navigateToTest:wr,hideTestSections:dr,displayTestOnPage:wt,renderQuestionsForPage:Ke,setupTestPageEventListeners:qe,setupProgressTrackingForPage:kt,updateProgressDisplayForPage:st,submitTestFromPage:Ut,getAnsweredQuestionsCountForPage:vt,getCurrentTestType:Qt,saveProgressForPage:it,clearProgressTrackingInterval:Gt,collectTestAnswers:re,calculateTestScore:Ff,checkAnswerCorrectness:Hp,formatStudentAnswerForDisplay:q,getCorrectAnswer:Tv,transformAnswersForSubmission:se,clearAllTestData:()=>{try{console.log("Clearing old test data from localStorage (older than 15 days)...");const Pe=Date.now()-360*60*60*1e3,Me=[];for(let ze=0;ze<localStorage.length;ze++){const At=localStorage.key(ze);if(!(!At||!((At.startsWith("test_")||At.startsWith("student_")||At.startsWith("teacher_")||At.startsWith("admin_")||At.includes("progress")||At.includes("answers"))&&!At.includes("test_completed_"))))try{const hr=localStorage.getItem(At);if(!hr){Me.push(At);continue}let Ye=null;if(hr.startsWith("{")||hr.startsWith("[")){const ft=JSON.parse(hr),lt=ft.timestamp||ft.lastSaved||ft.lastTickAt||ft.createdAt||ft.updatedAt||ft.startedAt||ft.started_at||ft.created_at;lt&&(Ye=new Date(lt).getTime())}if(!Ye){const ft=`${At}__ts`,lt=localStorage.getItem(ft);lt&&(Ye=parseInt(lt)||null)}if(!Ye)continue;Ye<Pe&&Me.push(At)}catch{continue}}return Me.forEach(ze=>{console.log(`Removing old localStorage key: ${ze}`),L(ze)}),console.log(`Cleared ${Me.length} old test-related items from localStorage`),{success:!0,clearedCount:Me.length}}catch(ve){return console.error("Error clearing old test data:",ve),{success:!1,error:ve.message}}},setCurrentTest:r,setTestQuestions:s,setStudentAnswers:i,setTestProgress:l,setIsTestActive:d,setTestResults:h,setError:k};return c.jsx(nH.Provider,{value:kr,children:e})},w2=()=>{const e=_.useContext(nH);if(!e)throw new Error("useTest must be used within a TestProvider");return e},My=window.location.hostname==="mathayomwatsing.netlify.app";My&&(console.log=()=>{},console.debug=()=>{},console.info=()=>{},console.warn=()=>{});const xe={debug:(e,...t)=>{My||console.log(e,...t)},warn:(e,...t)=>{My||console.warn(e,...t)},error:(e,...t)=>{console.error(e,...t)},info:(e,...t)=>{My||console.info(e,...t)},isEnabled:()=>!My},b2=({testResults:e,onBackToCabinet:t,onRetakeTest:r,isLoading:n=!1,caught_cheating:s=!1,visibility_change_times:a=0})=>{if(!e||!e.showResults)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-gray-500",children:"No test results to display"})})});const{testInfo:i,testType:o,score:l,totalQuestions:u,percentage:d,passed:f,questionAnalysis:h,timestamp:g}=e,x=T=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[T]||T,y=T=>T>=80?"text-green-600 bg-green-50":T>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",v=T=>T?"text-green-600 bg-green-100 border-green-200":"text-red-600 bg-red-100 border-red-200";return n?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading test results..."})]})}):c.jsx("div",{className:"bg-gray-50 py-8 overflow-y-auto",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs(dt.div,{className:"bg-white rounded-lg shadow-lg p-6 mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(e?.caught_cheating||s)&&c.jsx("div",{className:"mb-6 border-2 border-red-500 bg-red-50 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("div",{className:"flex-1",children:c.jsx("p",{className:"text-red-700",children:"Suspicious activity was detected during this test. Your teacher has been notified."})})]})}),c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Results"}),c.jsx("h2",{className:"text-xl text-gray-700 mb-1",children:i?.test_name||"Test"}),c.jsxs("p",{className:"text-sm text-gray-500",children:[x(o),"  Completed on ",new Date(g).toLocaleDateString()]})]}),c.jsx("div",{className:"text-right",children:c.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${v(f)}`,children:f?" PASSED":" FAILED"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l}),c.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:u}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:`text-3xl font-bold ${y(d).split(" ")[0]}`,children:[d,"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-6",children:c.jsx(dt.div,{className:`h-3 rounded-full ${y(d).split(" ")[1]}`,initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,ease:"easeOut"}})})]}),o!=="matching_type"&&o!=="word_matching"&&c.jsxs(dt.div,{className:"bg-white rounded-lg shadow-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Question Review"}),c.jsx("div",{className:"space-y-4",children:h.map((T,k)=>c.jsxs(dt.div,{className:`p-4 rounded-lg border-2 ${T.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:k*.1},children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Question ",T.questionNumber]}),c.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${T.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.isCorrect?" Correct":" Incorrect"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Question:"}),c.jsx("p",{className:"text-gray-700 bg-gray-100 p-3 rounded",children:T.question})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Your Answer:"}),c.jsx("p",{className:`p-3 rounded ${T.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.userAnswer||"No answer provided"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Correct Answer:"}),c.jsx("p",{className:"bg-blue-100 text-blue-800 p-3 rounded",children:T.correctAnswer})]})]})]},k))})]}),c.jsxs(dt.div,{className:"bg-white rounded-lg shadow-lg p-6 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Summary Statistics"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.filter(T=>T.isCorrect).length}),c.jsx("div",{className:"text-sm text-blue-600",children:"Correct"})]}),c.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.filter(T=>!T.isCorrect).length}),c.jsx("div",{className:"text-sm text-red-600",children:"Incorrect"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[Math.round(h.filter(T=>T.isCorrect).length/u*100),"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),c.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u}),c.jsx("div",{className:"text-sm text-purple-600",children:"Total"})]})]})]})]})})};let $de=class{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.accessToken),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){return this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}};const Gp=new $de;window.tokenManager=Gp;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Gp.init()}):Gp.init());const aH=async(e,t,r,n,s=!1)=>{try{console.log(" Fetching teacher student results:",{teacherId:e,grade:t,className:r,termId:n,forceRefresh:s});const a=s?`&_t=${Date.now()}`:"",o=await(await Gp.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-student-results?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}${a}`,{cache:s?"no-cache":"default",headers:s?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}:{}})).json();if(o.success)return console.log(" Teacher student results loaded:",o.results.length,"results"),console.log(" Students loaded:",o.students?.length||0,"students"),{success:!0,results:o.results,students:o.students||[],count:o.results.length,student_count:o.student_count||0};throw new Error(o.error||"Failed to load teacher student results")}catch(a){return console.error("Error fetching teacher student results:",a),{success:!1,error:a.message,results:[]}}},iH=async(e,t)=>{try{console.log(" Fetching student results view:",{studentId:e,academicPeriodId:t});const r=t?`&academic_period_id=${t}`:"",s=await(await Gp.makeAuthenticatedRequest(`/.netlify/functions/get-student-results-view?student_id=${e}${r}`)).json();if(s.success)return console.log(" Student results view loaded:",s.results.length,"results"),{success:!0,results:s.results,count:s.results.length};throw new Error(s.error||"Failed to load student results view")}catch(r){return console.error("Error fetching student results view:",r),{success:!1,error:r.message,results:[]}}},zde=async(e,t,r,n)=>{try{console.log(" Fetching class summary:",{teacherId:e,grade:t,className:r,academicPeriodId:n});const a=await(await Gp.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Class summary loaded:",a.summary),{success:!0,summary:a.summary,hasData:!!a.summary};throw new Error(a.error||"Failed to load class summary")}catch(s){return console.error("Error fetching class summary:",s),{success:!1,error:s.message,summary:null}}},Ude=async(e,t,r,n,s={})=>{try{const a=await aH(e,t,r,n);if(!a.success)return a;let i=a.results;return s.subject&&(i=i.filter(o=>o.subject&&o.subject.toLowerCase().includes(s.subject.toLowerCase()))),s.testType&&(i=i.filter(o=>o.test_type===s.testType)),s.minScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100>=s.minScore)),s.maxScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100<=s.maxScore)),s.passed!==void 0&&(i=i.filter(o=>o.score>=o.passing_score===s.passed)),{success:!0,results:i,count:i.length,originalCount:a.results.length}}catch(a){return console.error("Error filtering teacher student results:",a),{success:!1,error:a.message,results:[]}}},Wde=async(e,t,r={})=>{try{const n=await iH(e,t);if(!n.success)return n;let s=n.results;return r.subject&&(s=s.filter(a=>a.subject&&a.subject.toLowerCase().includes(r.subject.toLowerCase()))),r.testType&&(s=s.filter(a=>a.test_type===r.testType)),r.semester&&(s=s.filter(a=>a.semester===r.semester)),r.passed!==void 0&&(s=s.filter(a=>a.score>=a.passing_score===r.passed)),{success:!0,results:s,count:s.length,originalCount:n.results.length}}catch(n){return console.error("Error filtering student results view:",n),{success:!1,error:n.message,results:[]}}},Hde={getTeacherStudentResults:aH,getStudentResultsView:iH,getClassSummary:zde,getTeacherStudentResultsFiltered:Ude,getStudentResultsViewFiltered:Wde},Gde=({testType:e,testId:t,isShuffled:r,allowedTime:n,onSave:s,onCancel:a,canEdit:i=!0})=>{const[o,l]=_.useState(!1),[u,d]=_.useState(r||!1),[f,h]=_.useState(!!n),[g,x]=_.useState(n?Math.floor(n/60):""),[y,v]=_.useState(!1);_.useEffect(()=>{d(r||!1)},[r]),_.useEffect(()=>{h(!!n),x(n?Math.floor(n/60):"")},[n]),_.useEffect(()=>{!i&&o&&l(!1)},[i,o]);const T=async()=>{v(!0);try{const b=f&&g?Math.floor(parseFloat(g)*60):null,E={};["input","true_false","multiple_choice"].includes(e)&&(E.is_shuffled=u),E.allowed_time=b,await s(E),l(!1)}catch(b){console.error("Error saving settings:",b),alert("Failed to save settings. Please try again.")}finally{v(!1)}},k=()=>{d(r||!1),h(!!n),x(n?Math.floor(n/60):""),l(!1)};return o?c.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[["input","true_false","multiple_choice"].includes(e)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",id:"is_shuffled",checked:u,onChange:b=>d(b.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("label",{htmlFor:"is_shuffled",className:"text-sm font-medium text-gray-700",children:"Shuffle questions"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",id:"enable_timer",checked:f,onChange:b=>{h(b.target.checked),b.target.checked||x("")},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("label",{htmlFor:"enable_timer",className:"text-sm font-medium text-gray-700",children:"Enable timer"})]}),f&&c.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[c.jsx("input",{type:"number",min:"1",step:"1",value:g,onChange:b=>x(b.target.value.replace(/[^0-9]/g,"")),placeholder:"Minutes",className:"w-24 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-gray-600",children:"minutes"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[c.jsx(tt,{onClick:T,variant:"primary",size:"sm",disabled:y||f&&!g,children:y?"Saving...":"Save"}),c.jsx(tt,{onClick:k,variant:"outline",size:"sm",children:"Cancel"})]})]}):c.jsxs("div",{className:"flex items-center space-x-4",children:[["input","true_false","multiple_choice"].includes(e)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Shuffled:"}),c.jsx("span",{className:`text-sm font-semibold ${u?"text-green-600":"text-gray-400"}`,children:u?" Yes":" No"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),f&&g?c.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[" ",g," minutes"]}):c.jsx("span",{className:"text-sm font-semibold text-gray-400",children:" Not set"})]}),i&&c.jsx(tt,{onClick:()=>l(!0),variant:"outline",size:"sm",children:" Edit"})]})},qC=({isOpen:e,onClose:t,testType:r,testId:n,testName:s,questions:a=[],isLoading:i=!1,onSave:o,canEdit:l=!0,canEditSettings:u=!0,subject:d,createdAt:f,assignments:h=[],testInfo:g=null,onSettingsSave:x})=>{const[y,v]=_.useState(!1),[T,k]=_.useState([]),[b,E]=_.useState(!1),[N,P]=_.useState(!1),M=Array.isArray(a)?a:[],j=!!l,A=u!==void 0?!!u:!!l;if(_.useEffect(()=>{M.length>0?k(JSON.parse(JSON.stringify(M))):k([]),P(!1)},[M]),_.useEffect(()=>{e||(v(!1),P(!1),E(!1))},[e]),_.useEffect(()=>{!j&&y&&(v(!1),P(!1))},[j,y]),!e)return null;const F=R=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching",word_matching:"Word Matching",fill_blanks:"Fill in the Blanks"})[R]||R,L=(R,z)=>{switch(z){case"multiple_choice":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[R.option_a&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"A"}),c.jsx("span",{className:"text-gray-700",children:R.option_a})]}),R.option_b&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"B"}),c.jsx("span",{className:"text-gray-700",children:R.option_b})]}),R.option_c&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"C"}),c.jsx("span",{className:"text-gray-700",children:R.option_c})]}),R.option_d&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"D"}),c.jsx("span",{className:"text-gray-700",children:R.option_d})]}),R.option_e&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"E"}),c.jsx("span",{className:"text-gray-700",children:R.option_e})]}),R.option_f&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),c.jsx("span",{className:"text-gray-700",children:R.option_f})]})]})]});case"true_false":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"T"}),c.jsx("span",{className:"text-gray-700",children:"True"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),c.jsx("span",{className:"text-gray-700",children:"False"})]})]})]});case"input":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Answer Format:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("span",{className:"text-gray-600 italic",children:"Type your answer in the text input field"})})]});case"matching_type":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Instructions:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("span",{className:"text-gray-600 italic",children:"Match the items by connecting them with lines or selecting pairs"})})]});default:return null}},V=(R,z)=>{if(!R.correct_answer&&!R.correct_answers)return null;let G="";switch(z){case"multiple_choice":G=R.correct_answer?.toUpperCase()||"";break;case"true_false":G=R.correct_answer?"True":"False";break;case"input":Array.isArray(R.correct_answers)?G=R.correct_answers.join(", "):G=R.correct_answer||R.correct_answers||"";break;case"matching_type":G=typeof R.correct_answer=="object"?JSON.stringify(R.correct_answer):R.correct_answer;break;default:G=String(R.correct_answer||R.correct_answers||"")}return c.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[c.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Correct Answer:"}),c.jsx("p",{className:"text-green-700 font-mono",children:G})]})},J=async()=>{if(!N){console.log("No changes to save");return}console.log("Saving questions...",{testType:r,testId:n,questionsCount:T.length}),E(!0);try{o?await o(r,n,T):await _n.updateTestQuestions(r,n,T),P(!1),v(!1)}catch(R){console.error("Error saving questions:",R),alert("Failed to save questions. Please try again.")}finally{E(!1)}};_.useEffect(()=>{y&&console.log("Edit mode is ON",{hasChanges:N,questionsCount:T.length})},[y,N,T.length]);const ne=(R,z)=>{if(!y)return c.jsxs(c.Fragment,{children:[L(R,"multiple_choice"),V(R,"multiple_choice")]});const G=`mc_question_${n}_${z}`,Q=q=>{const se=[...T];se[z].question=q,k(se),P(!0)},re=(q,se)=>{const ce=[...T];ce[z][q]=se,k(ce),P(!0)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text:"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:G,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:3,value:T[z]?.question||"",onChange:q=>{Q(q.target.value)}}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(G),onChange:q=>Q(q.target.value)})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options:"}),c.jsx("button",{type:"button",onClick:()=>{const q=[...T],se=q[z],ce=["A","B","C","D","E","F"];if(ce.filter(ke=>{const le=`option_${ke.toLowerCase()}`;return se[le]&&se[le].trim()!==""}).length<6){const ke=ce.find(le=>{const ye=`option_${le.toLowerCase()}`;return!se[ye]||se[ye].trim()===""});if(ke){const le=`option_${ke.toLowerCase()}`;se[le]="",k(q),P(!0)}}},className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",disabled:["A","B","C","D","E","F"].filter(q=>{const se=`option_${q.toLowerCase()}`;return T[z]?.[se]&&T[z][se].trim()!==""}).length>=6,children:"+ Add Option"})]}),["A","B","C","D","E","F"].map(q=>{const se=`option_${q.toLowerCase()}`,ce=T[z]?.[se],pe=ce??"",ke=typeof ce=="string"&&ce.trim()!=="";return!ke&&!(ce==="")&&q!=="A"&&q!=="B"?null:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded w-8 text-center",children:q}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",id:`mc_option_${n}_${z}_${q}`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:pe,onChange:ye=>{re(se,ye.target.value)},placeholder:`Option ${q}`}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(`mc_option_${n}_${z}_${q}`),onChange:ye=>re(se,ye.target.value)})]}),ke&&c.jsx("button",{type:"button",onClick:()=>{const ye=[...T];ye[z][se]=null,k(ye),P(!0)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",title:"Remove option",children:""})]},q)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer:"}),c.jsxs("select",{className:"p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:T[z]?.correct_answer||"",onChange:q=>{const se=[...T];se[z].correct_answer=q.target.value,k(se),P(!0)},children:[c.jsx("option",{value:"",children:"Select correct answer"}),["A","B","C","D","E","F"].map(q=>{const se=`option_${q.toLowerCase()}`,ce=T[z]?.[se]||"";return!ce||ce.trim()===""?null:c.jsxs("option",{value:q.toLowerCase(),children:["Option ",q]},q)})]})]})]})},ee=(R,z)=>{if(!y)return c.jsxs(c.Fragment,{children:[L(R,"true_false"),V(R,"true_false")]});const G=`tf_question_${n}_${z}`,Q=re=>{const q=[...T];q[z].question=re,k(q),P(!0)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text:"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:G,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:3,value:T[z]?.question||"",onChange:re=>{Q(re.target.value)}}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(G),onChange:re=>Q(re.target.value)})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer:"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"radio",name:`correct_answer_${z}`,value:"true",checked:T[z]?.correct_answer===!0||T[z]?.correct_answer==="true",onChange:()=>{const re=[...T];re[z].correct_answer=!0,k(re),P(!0)}}),c.jsx("span",{children:"True"})]}),c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"radio",name:`correct_answer_${z}`,value:"false",checked:T[z]?.correct_answer===!1||T[z]?.correct_answer==="false",onChange:()=>{const re=[...T];re[z].correct_answer=!1,k(re),P(!0)}}),c.jsx("span",{children:"False"})]})]})]})]})},ie=(R,z)=>{if(!y)return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",dangerouslySetInnerHTML:{__html:ia(R.question||R.question_text||"")}}),c.jsx("p",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Correct Answer(s):"}),c.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:Array.isArray(R.correct_answers)?c.jsx("ul",{className:"list-disc list-inside space-y-1",children:R.correct_answers.map((ce,pe)=>c.jsx("li",{dangerouslySetInnerHTML:{__html:ia(String(ce))}},pe))}):c.jsx("span",{dangerouslySetInnerHTML:{__html:ia(String(R.correct_answer||R.correct_answers||""))}})})]});const G=`input_question_${n}_${z}`,Q=T[z]?.question??T[z]?.question_text??"",re=ce=>{const pe=[...T];pe[z].question_text!==void 0?pe[z].question_text=ce:pe[z].question=ce,k(pe),P(!0)},q=(ce,pe)=>{const ke=[...T];Array.isArray(ke[z].correct_answers)||(ke[z].correct_answers=[]),ke[z].correct_answers[ce]=pe,k(ke),P(!0)},se=ce=>{const pe=[...T];pe[z].correct_answers!==void 0&&!Array.isArray(pe[z].correct_answers)?pe[z].correct_answers=ce:(pe[z].correct_answer,pe[z].correct_answer=ce),k(pe),P(!0)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text (supports math: $...$ for inline, $$...$$ for display):"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:G,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:4,value:Q,onChange:ce=>{re(ce.target.value)},placeholder:"Enter question text. Use $x^2$ for math expressions."}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(G),onChange:ce=>re(ce.target.value)})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s) (supports math: $...$ for inline, $$...$$ for display):"}),Array.isArray(T[z]?.correct_answers)?c.jsxs("div",{className:"space-y-2",children:[T[z].correct_answers.map((ce,pe)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",id:`input_answer_${n}_${z}_${pe}`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:String(ce),onChange:ke=>{q(pe,ke.target.value)},placeholder:"Enter answer (supports math: $x^2$)"}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(`input_answer_${n}_${z}_${pe}`),onChange:ke=>q(pe,ke.target.value)})]}),c.jsx("button",{type:"button",onClick:()=>{const ke=[...T];ke[z].correct_answers.splice(pe,1),k(ke),P(!0)},className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},pe)),c.jsx("button",{type:"button",onClick:()=>{const ce=[...T];ce[z].correct_answers||(ce[z].correct_answers=[]),ce[z].correct_answers.push(""),k(ce),P(!0)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:"+ Add Answer"})]}):c.jsx("div",{children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",id:`input_answer_${n}_${z}_single`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:String(T[z]?.correct_answer||T[z]?.correct_answers||""),onChange:ce=>{se(ce.target.value)},placeholder:"Enter answer (supports math: $x^2$)"}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(`input_answer_${n}_${z}_single`),onChange:ce=>se(ce.target.value)})]})})]})]})},B=Ls.useCallback(()=>{k(R=>{const z=R.map(Q=>{const re=Q?.question_id??Q?.id,q=Number(re);return Number.isFinite(q)?q:null}).filter(Q=>Q!==null),G=z.length>0?Math.max(...z)+1:1;return[...R,{id:null,question_id:G,left_word:"",right_word:"",__isNew:!0}]}),P(!0)},[k,P]),Y=(R,z)=>{if(!y)return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Word Pair:"}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-100 p-3 rounded",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Left:"})," ",R.left_word]}),c.jsx("span",{className:"text-gray-400",children:""}),c.jsxs("div",{className:"flex-1 bg-gray-100 p-3 rounded",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Right:"})," ",R.right_word]})]})]});const G=(q,se,ce)=>T.filter((ke,le)=>le===ce?!1:se==="left"?ke.left_word?.toLowerCase()===q?.toLowerCase():ke.right_word?.toLowerCase()===q?.toLowerCase()).length>0,Q=G(T[z]?.left_word,"left",z),re=G(T[z]?.right_word,"right",z);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Left Word:"}),c.jsx("input",{type:"text",className:`w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${Q?"border-red-300 bg-red-50":"border-gray-300"}`,value:T[z]?.left_word||"",onChange:q=>{const se=[...T];se[z].left_word=q.target.value,k(se),P(!0)},placeholder:"Enter left word"}),Q&&c.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Duplicate left word detected"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Right Word:"}),c.jsx("input",{type:"text",className:`w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${re?"border-red-300 bg-red-50":"border-gray-300"}`,value:T[z]?.right_word||"",onChange:q=>{const se=[...T];se[z].right_word=q.target.value,k(se),P(!0)},placeholder:"Enter right word"}),re&&c.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Duplicate right word detected"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{type:"button",onClick:()=>{if(z>0){const q=[...T];[q[z-1],q[z]]=[q[z],q[z-1]],k(q),P(!0)}},disabled:z===0,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:" Move Up"}),c.jsx("button",{type:"button",onClick:()=>{if(z<T.length-1){const q=[...T];[q[z],q[z+1]]=[q[z+1],q[z]],k(q),P(!0)}},disabled:z===T.length-1,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:" Move Down"}),c.jsx("button",{type:"button",onClick:()=>{if(window.confirm("Are you sure you want to remove this word pair?")){const q=T.filter((se,ce)=>ce!==z);k(q),P(!0)}},className:"px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm",children:"Remove"})]})]})},I=(R,z)=>{if(!y)return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(R.question_json,null,2)})}),c.jsx("p",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Correct Answers:"}),c.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:Array.isArray(R.correct_answers)?c.jsx("ul",{className:"list-disc list-inside space-y-1",children:R.correct_answers.map((re,q)=>c.jsx("li",{children:String(re)},q))}):c.jsx("span",{children:String(R.correct_answers)})})]});const G=JSON.stringify(R.question_json||{},null,2),Q=Array.isArray(R.correct_answers)?R.correct_answers:[R.correct_answers||""];return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question JSON (structured text):"}),c.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:6,value:G,onChange:re=>{try{const q=JSON.parse(re.target.value),se=[...T];se[z].question_json=q,k(se),P(!0)}catch(q){console.error("Invalid JSON:",q)}},placeholder:'{"type": "paragraph", "children": [...]}'}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Edit the JSON structure for the question text"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s):"}),c.jsxs("div",{className:"space-y-2",children:[Q.map((re,q)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"text",className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:String(re),onChange:se=>{const ce=[...T];ce[z].correct_answers[q]=se.target.value,k(ce),P(!0)},placeholder:"Enter answer"}),c.jsx("button",{type:"button",onClick:()=>{const se=[...T];se[z].correct_answers.splice(q,1),k(se),P(!0)},className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},q)),c.jsx("button",{type:"button",onClick:()=>{const re=[...T];re[z].correct_answers||(re[z].correct_answers=[]),re[z].correct_answers.push(""),k(re),P(!0)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:"+ Add Answer"})]})]})]})},H=y?T:M,W=H.length;return c.jsx(al,{children:c.jsxs(dt.div,{className:"fixed inset-0 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[c.jsx(dt.div,{className:"fixed inset-0 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs(dt.div,{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[c.jsx("div",{className:"flex items-center space-x-3",children:c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s||"Test Details"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[F(r),"  ",W," Question",W!==1?"s":""]})]})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[j&&["input","multiple_choice","true_false","word_matching"].includes(r)&&c.jsx(tt,{onClick:()=>{y&&N?window.confirm("You have unsaved changes. Are you sure you want to cancel?")&&(v(!1),k(JSON.parse(JSON.stringify(a))),P(!1)):v(!y)},variant:y?"outline":"primary",size:"sm",className:"flex items-center space-x-1",children:y?" Cancel Edit":" Edit Questions"}),c.jsx(tt,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Close"})]})]}),c.jsx("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:i?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading test details..."})]})}):c.jsxs("div",{className:"space-y-6",children:[!j&&c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:"Editing is disabled because this test has an active assignment."}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Information"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d&&c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),c.jsx("p",{className:"text-sm text-gray-900",children:d})]}),f&&c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),c.jsx("p",{className:"text-sm text-gray-900",children:new Date(f).toLocaleDateString()})]})]}),h&&h.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.map((R,z)=>c.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[R.grade,"/",R.class]},z))})]}),g&&x&&c.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:c.jsx(Gde,{testType:r,testId:n,isShuffled:g?.is_shuffled,allowedTime:g?.allowed_time,onSave:x,canEdit:A})})]}),W===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Questions Available"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"This test doesn't have any questions yet."}),y&&r==="word_matching"&&c.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 text-sm font-medium text-blue-600 border border-dashed border-blue-300 rounded hover:bg-blue-50",children:"+ Add Word Pair"})]}):c.jsxs("div",{className:"space-y-6",children:[H.map((R,z)=>c.jsxs(dt.div,{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:z*.1,duration:.3},children:[c.jsx("div",{className:"flex items-start justify-between mb-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:["Question ",z+1]}),c.jsx("span",{className:"text-gray-500 text-sm",children:F(r)})]})}),c.jsx("div",{className:"mb-4",children:y?c.jsxs("div",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:[r==="multiple_choice"&&ne(R,z),r==="true_false"&&ee(R,z),r==="input"&&ie(R,z),r==="word_matching"&&Y(R,z),r==="fill_blanks"&&I(R,z)]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:r==="input"?c.jsx("span",{dangerouslySetInnerHTML:{__html:ia(R.question||R.question_text||"")}}):r==="word_matching"?c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("span",{className:"bg-blue-100 px-3 py-1 rounded",children:R.left_word}),c.jsx("span",{className:"text-gray-400",children:""}),c.jsx("span",{className:"bg-green-100 px-3 py-1 rounded",children:R.right_word})]}):r==="fill_blanks"?c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(R.question_json,null,2)})}):R.question||R.question_text}),L(R,r),V(R,r)]})})]},R.id||R.question_id||z)),y&&r==="word_matching"&&c.jsx("div",{className:"flex justify-center pt-2",children:c.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 text-sm font-medium text-blue-600 border border-dashed border-blue-300 rounded hover:bg-blue-50",children:"+ Add Word Pair"})})]})]})}),c.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:[c.jsx("div",{className:"text-sm text-gray-600",children:W>0&&c.jsx("span",{children:y?N?c.jsx("span",{className:"text-orange-600 font-semibold",children:" Unsaved changes"}):c.jsxs("span",{children:["Showing ",W," question",W!==1?"s":""]}):c.jsxs("span",{children:["Showing ",W," question",W!==1?"s":""]})})}),c.jsxs("div",{className:"flex items-center space-x-3",children:[y&&c.jsx("button",{onClick:J,disabled:b||!N,className:`px-4 py-2 rounded-md font-medium flex items-center space-x-2 min-w-[140px] justify-center transition-all ${b||!N?"bg-gray-400 text-gray-700 cursor-not-allowed opacity-60":"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer"}`,children:b?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),c.jsx("span",{children:"Saving..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Save Changes"})]})}),c.jsx(tt,{onClick:t,variant:y?"outline":"primary",className:"flex items-center space-x-2",children:"Close"})]})]})]})})]})})},Vde=({answeredCount:e=0,totalQuestions:t=0,timeElapsed:r=0,onSubmitTest:n,isSubmitting:s=!1,canSubmit:a=!1,className:i=""})=>{const o=t>0?Math.round(e/t*100):0,l=t-e,u=h=>{const g=Math.floor(h/3600),x=Math.floor(h%3600/60),y=h%60;return g>0?`${g}:${x.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`:`${x}:${y.toString().padStart(2,"0")}`},d=h=>h>=100?"bg-green-500":h>=80?"bg-blue-500":h>=60?"bg-yellow-500":h>=40?"bg-orange-500":"bg-red-500",f=h=>h>=100?"text-green-600":h>=80?"text-blue-600":h>=60?"text-yellow-600":h>=40?"text-orange-600":"text-red-600";return c.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 ${i}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Progress"}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsx("span",{className:"text-sm font-mono text-gray-600",children:u(r)})]})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),c.jsxs("span",{className:`text-sm font-semibold ${f(o)}`,children:[o,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:c.jsx(dt.div,{className:`h-full ${d(o)} transition-colors duration-300`,initial:{width:0},animate:{width:`${o}%`},transition:{duration:.5,ease:"easeOut"}})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:e}),c.jsx("div",{className:"text-xs text-blue-600",children:"Answered"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-gray-600",children:l}),c.jsx("div",{className:"text-xs text-gray-600",children:"Remaining"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:t}),c.jsx("div",{className:"text-xs text-purple-600",children:"Total"})]})]}),c.jsx("div",{className:"mb-4",children:e===t?c.jsx(dt.div,{className:"flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:c.jsx("span",{className:"text-green-600 font-medium",children:" All questions answered! Ready to submit."})}):l===1?c.jsx(dt.div,{className:"flex items-center justify-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:c.jsx("span",{className:"text-yellow-600 font-medium",children:"Almost there! 1 question remaining."})}):c.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-50 border border-gray-200 rounded-lg",children:c.jsxs("span",{className:"text-gray-600 font-medium",children:[l," questions remaining"]})})}),a&&c.jsx("div",{className:"flex justify-center",children:c.jsx(dt.button,{onClick:n,disabled:s,className:`px-8 py-3 rounded-lg font-semibold text-white transition-all duration-300 ${s?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl"}`,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},children:s?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),c.jsx("span",{children:"Submitting..."})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Submit Test"})]})})})]})},qde=({testText:e,blanks:t,separateType:r=!0,testId:n,testName:s="Unknown Test",teacherId:a="Unknown Teacher",subjectId:i,onTestComplete:o,onAnswerChange:l})=>{if(console.log(" FillBlanksTestStudent Props Debug:"),console.log("- testText:",e),console.log("- blanks:",t),console.log("- separateType:",r),console.log("- testId:",n),console.log("- testName:",s),console.log("- teacherId:",a),console.log("- subjectId:",i),!e||!t||!Array.isArray(t))return console.log(" FillBlanksTestStudent: Missing test data"),c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx(Ht,{className:"max-w-md w-full",children:c.jsxs(Ht.Body,{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load fill blanks test data"}),c.jsx(tt,{onClick:()=>window.history.back(),variant:"primary",children:"Back to Dashboard"})]})})});const[u,d]=_.useState({}),[f,h]=_.useState(!1),[g,x]=_.useState(null),[y,v]=_.useState(null),[T,k]=_.useState(!1),[b,E]=_.useState(null),{showNotification:N}=si(),{makeAuthenticatedRequest:P}=zl(),{user:M}=Ms(),{startTracking:j,stopTracking:A,getCheatingData:F,clearData:L}=v1("fill_blanks",n,M?.student_id||M?.id);J_();const V=_.useCallback((ie,B)=>{try{let Y=ie;if(typeof ie=="string"&&ie.startsWith("{"))try{const R=JSON.parse(ie);R.root&&R.root.children&&(Y=R.root.children.map(z=>z.children?z.children.map(G=>G.style&&G.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":G.text||"").join(""):"").join(" "))}catch(R){console.error("Error parsing Lexical JSON:",R)}let I=Y;B.forEach((R,z)=>{const G=`[${z+1}_________]`;I=I.replace("[BLANK_PLACEHOLDER]",G)});const W=I.split(/(\[\d+_________\])/).map((R,z)=>R.match(/\[\d+_________\]/)?c.jsx("span",{className:"inline-block px-3 py-1 mx-1 bg-purple-100 text-purple-800 border-2 border-purple-400 rounded-lg font-mono font-bold shadow-sm",children:R},z):c.jsx("span",{children:R},z));return c.jsx("div",{className:"prose max-w-none mb-6",children:c.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:W})})}catch(Y){return console.error("Error rendering text with blanks:",Y),c.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[]),J=_.useCallback((ie,B)=>{try{let Y=ie;if(typeof ie=="string"&&ie.startsWith("{"))try{const R=JSON.parse(ie);R.root&&R.root.children&&(Y=R.root.children.map(z=>z.children?z.children.map(G=>G.style&&G.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":G.text||"").join(""):"").join(" "))}catch(R){console.error("Error parsing Lexical JSON:",R)}const I=[];B.forEach((R,z)=>{const G=u[R.id],Q=G?R.options[G.charCodeAt(0)-65]:null,re=Q?c.jsx("span",{className:"inline-block px-3 py-2 bg-green-100 text-green-800 rounded-lg border-2 border-green-400 cursor-pointer hover:bg-green-200 hover:border-green-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(R.id),children:Q},z):c.jsxs("span",{className:"inline-block px-3 py-2 bg-purple-100 text-purple-800 rounded-lg border-2 border-purple-400 cursor-pointer hover:bg-purple-200 hover:border-purple-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(R.id),children:[z+1,"_________"]},z);I.push(re),Y=Y.replace("[BLANK_PLACEHOLDER]",`__BLANK_${R.id}__`)});const H=Y.split(/__BLANK_\d+__/),W=[];for(let R=0;R<H.length;R++)H[R]&&W.push(c.jsx("span",{children:H[R]},`text-${R}`)),R<I.length&&W.push(I[R]);return c.jsx("div",{className:"prose max-w-none mb-6",children:c.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:W})})}catch(Y){return console.error("Error rendering text with inline blanks:",Y),c.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[u]),ne=_.useCallback((ie,B)=>{const Y={...u,[ie]:B};d(Y),l&&l(ie,B)},[u,l]),ee=_.useCallback(ie=>c.jsx("div",{className:"space-y-6",children:ie.map((B,Y)=>{const I=B.blank_options||B.options||[];B.correct_answers;const H=B.question_json||B.question||`Blank ${Y+1}`;return console.log(` Blank ${Y+1} question text:`,H),c.jsxs(Ht,{className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",Y+1]}),c.jsx("p",{className:"text-gray-600 mb-4",children:H})]}),c.jsx("div",{className:"space-y-3",children:I.filter(W=>W&&W.trim().length>0).map((W,R)=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors",children:[c.jsx("input",{type:"radio",name:`blank_${B.question_id||B.id||Y}`,value:String.fromCharCode(65+R),checked:u[B.question_id||B.id||Y]===String.fromCharCode(65+R),onChange:z=>ne(B.question_id||B.id||Y,z.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),c.jsxs("span",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+R)}),c.jsx("span",{className:"text-gray-700",children:W})]})]},R))})]},B.question_id||B.id||Y)})}),[u,ne]);return _.useEffect(()=>{if(n&&M?.student_id){x(new Date),j(),console.log(" Anti-cheating tracking started for fill blanks test");const B=`test_progress_${M.student_id}_fill_blanks_${n}`,Y=Ta(B);Y&&(d(Y.answers||{}),x(new Date(Y.startTime)),console.log(" Fill blanks test progress restored:",Y))}},[n,M?.student_id,t,j]),_.useEffect(()=>{if(g&&M?.student_id&&n){const ie=setInterval(()=>{const B={answers:u,startTime:g.toISOString()},Y=`test_progress_${M.student_id}_fill_blanks_${n}`;Bs(Y,B,Cs.test_progress),console.log(" Fill blanks progress auto-saved")},3e4);return()=>clearInterval(ie)}},[g,u,M?.student_id,n]),_.useEffect(()=>()=>{A(),L(),console.log(" Fill blanks test component unmounted - anti-cheating cleanup")},[A,L]),_.useCallback(async()=>{h(!0);try{const ie=t.length;let B=0;t.forEach((ye,je)=>{const Ne=u[ye.id];Ne&&Ne===ye.correct_answer&&B++});const Y=B,I=ie;console.log(` Fill Blanks Score: ${Y}/${I} (${Math.round(Y/I*100)}%)`);const H=new Date,W=g?Math.round((H-g)/1e3):0,R=g?g.toISOString():H.toISOString(),z=F();console.log(" Anti-cheating data for fill blanks submission:",z);const G=M.student_id,Q=`retest_assignment_id_${G}_fill_blanks_${n}`,re=localStorage.getItem(Q),{academicCalendarService:q}=await Qa(async()=>{const{academicCalendarService:ye}=await Promise.resolve().then(()=>o3);return{academicCalendarService:ye}},void 0);await q.loadAcademicCalendar();const ce=q.getCurrentTerm()?.id;if(!ce)throw new Error("No current academic period found");const pe={test_id:n,test_name:s,teacher_id:a||null,subject_id:i||null,student_id:G,academic_period_id:ce,parent_test_id:n,retest_assignment_id:re?Number(re):null,answers:u,score:Y,maxScore:I,time_taken:W,started_at:R,submitted_at:H.toISOString(),caught_cheating:z.caught_cheating,visibility_change_times:z.visibility_change_times};console.log(" Submitting fill blanks test:",pe);const le=await(await P("/.netlify/functions/submit-fill-blanks-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)})).json();if(le.success){if(N("Test submitted successfully!","success"),A(),L(),console.log(" Anti-cheating tracking stopped and data cleared for fill blanks test"),M?.student_id&&(n1(M.student_id,"fill_blanks",n),console.log(" Fill blanks test data cleared from cache")),!!re&&M?.student_id){let je=3;try{const $e=localStorage.getItem(`student_active_tests_${M.student_id}`);if($e){const He=JSON.parse($e)?.tests?.find(Et=>Et.test_id===n&&Et.test_type==="fill_blanks");He&&(je=He.retest_attempts_left||He.max_attempts||3)}}catch($e){console.error("Error checking active tests cache:",$e)}const We=(Y>0&&I>0?Y/I*100:0)>=50;if(We){const $e=`retest_attempt${je}_${M.student_id}_fill_blanks_${n}`;localStorage.setItem($e,"true"),console.log(" Passed retest, marking last-slot key:",$e);let Nt=0;for(let Rt=1;Rt<=10;Rt++){const Mt=`retest_attempt${Rt}_${M.student_id}_fill_blanks_${n}`;localStorage.getItem(Mt)==="true"&&Nt++}const He=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(He,"true"),console.log(" Marked retest as completed (student passed):",He);const Et=`retest_attempts_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(Et,JSON.stringify({used:Nt,max:je})),console.log(" Set retest attempts metadata (student passed):",Et,{used:Nt,max:je})}else{let $e=1;for(let Mt=1;Mt<=10;Mt++){const ur=`retest_attempt${Mt}_${M.student_id}_fill_blanks_${n}`;if(localStorage.getItem(ur)!=="true"){$e=Mt;break}}const Nt=`retest_attempt${$e}_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(Nt,"true"),console.log(" Marked retest attempt as completed:",Nt);let He=0;for(let Mt=1;Mt<=10;Mt++){const ur=`retest_attempt${Mt}_${M.student_id}_fill_blanks_${n}`;localStorage.getItem(ur)==="true"&&He++}const Et=je-He,Rt=Et<=0||We;if(console.log(" Retest completion check:",{usedAttempts:He,maxAttempts:je,attemptsLeft:Et,passed:We,shouldComplete:Rt}),Rt){const Mt=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(Mt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",Mt);const ur=`retest_attempts_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(ur,JSON.stringify({used:He,max:je})),console.log(" Set retest attempts metadata (attempts exhausted):",ur,{used:He,max:je})}}}else if(M?.student_id){const je=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(je,"true"),console.log(" Fill blanks test marked as completed in localStorage:",je)}if(M?.student_id){const je=`retest1_${G}_fill_blanks_${n}`;localStorage.removeItem(je),localStorage.removeItem(Q)}if(M?.student_id){const je=`student_results_table_${M.student_id}`;Bs(je,le,Cs.student_results_table),console.log(" Fill blanks test results cached with key:",je)}setShowSubmitModal(!1),setTimeout(()=>{o&&o(Y)},2e3)}else throw new Error(le.message||"Failed to submit test")}catch(ie){console.error("Error submitting test:",ie),N("Error submitting test. Please try again.","error")}finally{h(!1)}},[u,t,n,s,a,i,g,F,A,L,P,N,o,M]),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:c.jsxs(Ht,{children:[f&&c.jsx(Ht.Header,{children:c.jsx("div",{className:"flex items-center justify-center",children:c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[c.jsx(fn,{size:"small"}),c.jsx("span",{children:"Submitting..."})]})})}),c.jsx(Ht.Body,{children:r===!0?c.jsxs(c.Fragment,{children:[V(e,t),ee(t)]}):c.jsx(c.Fragment,{children:J(e,t)})}),r===!1&&y&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Answer"}),c.jsx("div",{className:"space-y-2",children:t.find(ie=>ie.id===y)?.options.filter(ie=>ie.trim().length>0).map((ie,B)=>c.jsxs("button",{onClick:()=>{ne(y,String.fromCharCode(65+B)),v(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 rounded-lg border border-gray-200",children:[c.jsxs("span",{className:"font-semibold text-blue-600 mr-2",children:[String.fromCharCode(65+B),")"]}),ie]},B))}),c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx(tt,{onClick:()=>v(null),variant:"secondary",size:"sm",children:"Cancel"})})]})}),c.jsx(Ht.Footer,{children:c.jsx("div",{className:"flex gap-3"})})]})})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kde=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yde=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),YF=e=>{const t=Yde(e);return t.charAt(0).toUpperCase()+t.slice(1)},oH=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Xde=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jde={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qde=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},l)=>_.createElement("svg",{ref:l,...Jde,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:oH("lucide",s),...!a&&!Xde(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>_.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=(e,t)=>{const r=_.forwardRef(({className:n,...s},a)=>_.createElement(Qde,{ref:a,iconNode:t,className:oH(`lucide-${Kde(YF(e))}`,`lucide-${e}`,n),...s}));return r.displayName=YF(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zde=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],e0e=w1("download",Zde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],r0e=w1("maximize-2",t0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],s0e=w1("rotate-cw",n0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lH=w1("x",a0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],o0e=w1("zoom-in",i0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],c0e=w1("zoom-out",l0e),Kc={WIDTH:1536,HEIGHT:2048,ASPECT_RATIO:1536/2048},cH={MIN:.25,MAX:1,INITIAL:.25,STEP:.1},Uh={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",ERASER:"eraser"},XF={CURSOR_COLOR:"#ff0000",CURSOR_OPACITY:.3},JF={ERASER_TO_THICKNESS_RATIO:2.5,THICKNESS_TO_ERASER_RATIO:.4},M4={MAX_ENTRIES:10,MAX_MEMORY_KB:500,COMPRESSION_THRESHOLD:200},uH=e=>{try{const t=JSON.stringify(e);return new Blob([t]).size/1024}catch(t){return console.warn("Error calculating memory usage:",t),0}},u0e=e=>Array.isArray(e)?e.map(t=>Array.isArray(t)?d0e(t):t):e,d0e=e=>{if(e.length<=2)return e;const t=[e[0]],r=2;for(let n=1;n<e.length-1;n++){const s=e[n-1],a=e[n];e[n+1],Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))>r&&t.push(a)}return t.push(e[e.length-1]),t},f0e=(e,t=Date.now())=>{const r=uH(e);return{data:[...e],timestamp:t,memoryUsage:r,compressed:r>M4.COMPRESSION_THRESHOLD}},QF=(e,t,r)=>{const n=f0e(t),s=uH(t),a=e.slice(0,r+1);a.push(n);let i=a;return s>M4.MAX_MEMORY_KB&&(i=h0e(a)),i.length>M4.MAX_ENTRIES&&(i=i.slice(-10)),{history:i,index:i.length-1}},h0e=e=>e.map(t=>t.memoryUsage>M4.COMPRESSION_THRESHOLD?{...t,data:u0e(t.data),compressed:!0}:t),ZF=(e,t)=>{if(t<0||t>=e.length)return[];const r=e[t];return r?r.compressed?m0e(r.data):[...r.data]:[]},m0e=e=>[...e],eD=e=>e>0,tD=(e,t)=>e<t-1,g0e=()=>({history:[],index:-1}),p0e=()=>{const[e,t]=_.useState({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null}),[r,n]=_.useState([]),[s,a]=_.useState([]),i=_.useCallback(N=>{t(P=>({...P,...N}))},[]),o=_.useCallback(()=>{t({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null})},[]),l=_.useCallback(N=>{const P={x:N.x,y:N.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(M=>({...M,isDrawing:!0,currentLine:[P]})):["line","rectangle","circle"].includes(e.currentTool)&&t(M=>({...M,isDrawing:!0,currentShape:{type:e.currentTool,startX:N.x,startY:N.y,endX:N.x,endY:N.y,color:e.currentColor,thickness:e.currentThickness}}))},[e.currentTool,e.currentColor,e.currentThickness]),u=_.useCallback(N=>{if(!e.isDrawing)return;const P={x:N.x,y:N.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(M=>({...M,currentLine:[...M.currentLine,P]})):e.currentShape&&t(M=>({...M,currentShape:{...M.currentShape,endX:N.x,endY:N.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape]),d=_.useCallback(()=>{if(!e.isDrawing)return;let N=r;if(e.currentTool==="pencil"&&e.currentLine.length>0?(N=[...r,e.currentLine],n(N)):e.currentShape&&(N=[...r,e.currentShape],n(N)),N!==r){const P=QF(e.drawingHistory,N,e.historyIndex);t(M=>({...M,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:P.history,historyIndex:P.index}))}else t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null}))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,r,e.drawingHistory,e.historyIndex]),f=_.useCallback(N=>Math.round(N*JF.ERASER_TO_THICKNESS_RATIO),[]),h=_.useCallback(N=>Math.round(N*JF.THICKNESS_TO_ERASER_RATIO),[]),g=_.useCallback(N=>{t(P=>({...P,currentThickness:N,eraserSize:f(N)}))},[f]),x=_.useCallback(N=>{t(P=>({...P,eraserSize:N,currentThickness:h(N)}))},[h]),y=_.useCallback(N=>{const P=QF(e.drawingHistory,N,e.historyIndex);t(M=>({...M,drawingHistory:P.history,historyIndex:P.index}))},[e.drawingHistory,e.historyIndex]),v=_.useCallback(()=>{if(eD(e.historyIndex)){const N=e.historyIndex-1,P=ZF(e.drawingHistory,N);n([...P]),t(M=>({...M,historyIndex:N}))}},[e.historyIndex,e.drawingHistory]),T=_.useCallback(()=>{if(tD(e.historyIndex,e.drawingHistory.length)){const N=e.historyIndex+1,P=ZF(e.drawingHistory,N);n([...P]),t(M=>({...M,historyIndex:N}))}},[e.historyIndex,e.drawingHistory]),k=_.useCallback(()=>{const N=g0e();t(P=>({...P,drawingHistory:N.history,historyIndex:N.index}))},[]),b=eD(e.historyIndex),E=tD(e.historyIndex,e.drawingHistory.length);return{drawingState:e,setDrawingState:t,drawingData:r,setDrawingData:n,textBoxes:s,setTextBoxes:a,updateDrawingState:i,resetDrawingState:o,startDrawing:l,continueDrawing:u,finishDrawing:d,handleThicknessChange:g,handleEraserSizeChange:x,saveToHistoryState:y,undo:v,redo:T,clearHistoryState:k,canUndoState:b,canRedoState:E}},rD={SCALE_DELTA:.05,CENTER_DELTA:20},vp=e=>{if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2))},yf=e=>{if(e.length<2)return null;const t=e[0],r=e[1];return{x:(t.clientX+r.clientX)/2,y:(t.clientY+r.clientY)/2}},x0e=(e,t)=>{if(e.length!==2||!t)return null;const r=vp(e),n=vp(t),s=yf(e),a=yf(t);if(n===0)return null;const i=Math.abs(r/n-1),o=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return i>rD.SCALE_DELTA?"zoom":o>rD.CENTER_DELTA?"pan":null},y0e=e=>{let t;return function(){const r=arguments,n=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e.apply(n,r),t=null})}},cp=(e,t)=>{const r=t.getPointerPosition();return{x:(r.x-t.x())/t.scaleX(),y:(r.y-t.y())/t.scaleY()}},nc={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",PAN:"pan"},F4={color:"#000000",thickness:2},nD=(e,t,r)=>({x:e.x,y:e.y,color:t||F4.color,thickness:r||F4.thickness}),v0e=(e,t,r,n,s)=>({type:e,startX:t.x,startY:t.y,endX:r.x,endY:r.y,color:n||F4.color,thickness:s||F4.thickness}),dH=(e,t,r,n,s,a)=>{const i=e-r,o=t-n,l=s-r,u=a-n,d=i*l+o*u,f=l*l+u*u;let h=-1;f!==0&&(h=d/f);let g,x;h<0?(g=r,x=n):h>1?(g=s,x=a):(g=r+h*l,x=n+h*u);const y=e-g,v=t-x;return Math.sqrt(y*y+v*v)},w0e=(e,t)=>{if(t.length===0)return[e];const r=t.sort((a,i)=>a.index-i.index),n=[];let s=0;for(const a of r)a.index>s&&n.push(e.slice(s,a.index+1)),s=a.index+1;return s<e.length&&n.push(e.slice(s)),n.filter(a=>a.length>0)},b0e=(e,t,r,n)=>{const s=[],a=r/2;for(let i=0;i<n.length-1;i++){const o=n[i],l=n[i+1],u=dH(e,t,o.x,o.y,l.x,l.y);u<=a&&s.push({index:i,point:{x:o.x,y:o.y},distance:u})}return s},_0e=(e,t,r,n)=>{const s=b0e(t,r,n,e);return s.length===0?[e]:w0e(e,s)},S0e=(e,t,r,n)=>{if(n.type==="rectangle"){const s=Math.min(n.startX,n.endX),a=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),o=Math.abs(n.endY-n.startY);return e>=s&&e<=s+i&&t>=a&&t<=a+o}else if(n.type==="circle"){const s=(n.startX+n.endX)/2,a=(n.startY+n.endY)/2,i=Math.sqrt(Math.pow(n.endX-n.startX,2)+Math.pow(n.endY-n.startY,2))/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-a,2))<=i}return!1},sD=(e,t,r,n)=>{const s=[];for(const a of n)if(Array.isArray(a)){const i=_0e(a,e,t,r);s.push(...i)}else a.type==="line"?dH(e,t,a.startX,a.startY,a.endX,a.endY)>r/2&&s.push(a):(a.type==="rectangle"||a.type==="circle")&&(S0e(e,t,r,a)||s.push(a));return s},k0e=(e,t,r,n,s,a,i,o,l)=>{const[u,d]=_.useState({isActive:!1,type:null,lastDistance:null,lastCenter:null}),f=_.useCallback(P=>{if(P.evt.preventDefault(),P.evt.stopPropagation(),e.currentTool===nc.PAN)return;const M=P.target.getStage(),j=cp(P,M),A=nD(j,e.currentColor,e.currentThickness);e.currentTool===nc.PENCIL?t(F=>({...F,isDrawing:!0,currentLine:[A]})):[nc.LINE,nc.RECTANGLE,nc.CIRCLE].includes(e.currentTool)&&t(F=>({...F,isDrawing:!0,currentShape:v0e(e.currentTool,j,j,e.currentColor,e.currentThickness)}))},[e.currentTool,e.currentColor,e.currentThickness,t]),h=_.useCallback(P=>{const M=sD(P.x,P.y,e.eraserSize,r);n(M),s(M)},[e.eraserSize,r,n,s]),g=_.useCallback(P=>{o&&(a(),y("Undo",P))},[o,a]),x=_.useCallback(P=>{l&&(i(),y("Redo",P))},[l,i]),y=_.useCallback((P,M)=>{const j=M.target.getStage(),A=cp(M,j),F=new Konva.Circle({x:A.x,y:A.y,radius:20,stroke:"#4CAF50",strokeWidth:3,opacity:.8,listening:!1});j.add(F),F.to({scaleX:2,scaleY:2,opacity:0,duration:.3,onFinish:()=>{F.destroy()}})},[]),v=_.useCallback(P=>{if(P.evt.preventDefault(),P.evt.stopPropagation(),!e.isDrawing)return;const M=P.target.getStage(),j=cp(P,M),A=nD(j,e.currentColor,e.currentThickness);e.currentTool===nc.PENCIL?t(F=>({...F,currentLine:[...F.currentLine,A]})):e.currentShape&&t(F=>({...F,currentShape:{...F.currentShape,endX:j.x,endY:j.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape,t]),T=_.useCallback(P=>{P&&P.evt&&(P.evt.preventDefault(),P.evt.stopPropagation()),e.isDrawing&&(e.currentTool===nc.PENCIL&&e.currentLine.length>0?n(M=>[...M,e.currentLine]):e.currentShape&&n(M=>[...M,e.currentShape]),t(M=>({...M,isDrawing:!1,currentLine:[],currentShape:null})))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,n,t]),k=_.useCallback(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;if(M.length===2)d({isActive:!0,type:"pan",lastDistance:vp(M),lastCenter:yf(M)});else if(M.length===1)if(e.currentTool===nc.ERASER){const j=P.target.getStage(),A=cp(P,j);h(A)}else e.currentTool===nc.UNDO?g(P):e.currentTool===nc.REDO?x(P):f(P)},[vp,yf,f,e.currentTool,h,g,x]),b=_.useCallback(y0e(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;if(M.length===2&&u.isActive){const j=x0e(M,u);if(j==="zoom"){const A=vp(M),F=yf(M),L=A/u.lastDistance,V=Math.max(.25,Math.min(1,e.zoom*L));t(J=>({...J,zoom:V,position:{x:F.x-(F.x-J.position.x)*(V/J.zoom),y:F.y-(F.y-J.position.y)*(V/J.zoom)}}))}else if(j==="pan"){const A=yf(M),F=A.x-u.lastCenter.x,L=A.y-u.lastCenter.y;t(V=>({...V,position:{x:V.position.x+F,y:V.position.y+L}}))}d(A=>({...A,lastDistance:vp(M),lastCenter:yf(M)}))}else if(M.length===1)if(e.currentTool===nc.ERASER){const j=P.target.getStage(),A=cp(P,j),F=sD(A.x,A.y,e.eraserSize,r);n(F)}else if(e.currentTool===nc.PAN){const j=yf(M),A=j.x-u.lastCenter.x,F=j.y-u.lastCenter.y;t(L=>({...L,position:{x:L.position.x+A,y:L.position.y+F}})),d(L=>({...L,lastCenter:j}))}else v(P)}),[u,e.zoom,t,v]),E=_.useCallback(P=>{b(P)},[b]),N=_.useCallback(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;M.length===0?(T(P),d({isActive:!1,type:null,lastDistance:null,lastCenter:null})):M.length===1&&d(j=>({...j,isActive:!1}))},[T]);return{handleTouchStart:k,handleTouchMove:E,handleTouchEnd:N,handleEraserStart:h,handleUndoTouch:g,handleRedoTouch:x,showTouchFeedback:y}},T0e=(e,t)=>{const[r,n]=_.useState(e.MIN),[s,a]=_.useState({x:0,y:0}),i=_.useCallback((h,g,x)=>{const y=Math.max(e.MIN,Math.min(e.MAX,h));if(g){const v=y/r,T={x:g.x-(g.x-s.x)*v,y:g.y-(g.y-s.y)*v};return{zoom:y,position:T}}else{const v=t.width*y,T=t.height*y,k={x:(x.width-v)/2,y:(x.height-T)/2};return{zoom:y,position:k}}},[r,s,e,t]),o=_.useCallback(()=>{const h=Math.min(r*(1+e.STEP),e.MAX);n(h)},[r,e]),l=_.useCallback(()=>{const h=Math.max(r/(1+e.STEP),e.MIN);n(h)},[r,e]),u=_.useCallback((h,g,x)=>{const y=i(h,g,x);n(y.zoom),a(y.position)},[i]),d=_.useCallback((h,g)=>{a(x=>({x:x.x+h,y:x.y+g}))},[]),f=_.useCallback(()=>{n(e.INITIAL),a({x:0,y:0})},[e.INITIAL]);return{zoom:r,setZoom:n,position:s,setPosition:a,handleZoomIn:o,handleZoomOut:l,handleZoomToPoint:u,handlePan:d,resetZoom:f}},C0e=e=>{const[t,r]=_.useState([]),[n,s]=_.useState(0),a=_.useCallback(f=>{if(console.log("parseDrawingData - input drawing:",f),console.log("parseDrawingData - drawing.answers:",f?.answers),!f?.answers)return console.log("parseDrawingData - no answers found, returning empty array"),[];try{if(typeof f.answers=="string"){console.log("parseDrawingData - parsing string answers");const h=JSON.parse(f.answers);return console.log("parseDrawingData - parsed string result:",h),h&&typeof h=="object"&&h.lines&&console.log("parseDrawingData - new format detected with lines and textBoxes"),h}if(f.answers&&typeof f.answers=="object"&&f.answers.lines)return console.log("parseDrawingData - answers is new format object"),f.answers;if(Array.isArray(f.answers)){if(console.log("parseDrawingData - answers is array"),f.answers.every(g=>typeof g=="string"))try{const g=f.answers.map(x=>{try{return JSON.parse(x)}catch{return x}});return console.log("parseDrawingData - parsed array elements"),g}catch{return console.log("parseDrawingData - failed to parse array elements, returning raw"),f.answers}return f.answers}return console.log("parseDrawingData - answers is neither string nor array, returning empty array"),[]}catch(h){return console.error("Error parsing drawing data:",h),[]}},[]),i=_.useCallback(f=>{if(console.log("processQuestions - input answers:",f),console.log("processQuestions - answers type:",typeof f),console.log("processQuestions - answers isArray:",Array.isArray(f)),f&&typeof f=="object"&&f.lines){console.log("processQuestions - new format detected with lines and textBoxes"),console.log("processQuestions - lines count:",f.lines?.length),console.log("processQuestions - textBoxes count:",f.textBoxes?.length);const g=o(f.lines);return console.log("processQuestions - canvas groups:",g),console.log("processQuestions - number of canvas groups:",g.length),g.map((x,y)=>(console.log(`processQuestions - canvas ${y} strokes:`,x),console.log(`processQuestions - canvas ${y} stroke count:`,x.length),{questionNumber:y+1,drawingData:x,textBoxes:f.textBoxes||[]}))}if(Array.isArray(f)&&f.every(g=>g&&typeof g=="object"&&g.lines))return console.log("processQuestions - array of {lines,textBoxes} detected"),f.map((g,x)=>({questionNumber:x+1,drawingData:g.lines||[],textBoxes:g.textBoxes||[]}));if(!Array.isArray(f))return console.log("processQuestions - answers is not array or object, returning empty array"),[];console.log("processQuestions - processing",f.length,"answers (old format)");const h=o(f);return console.log("processQuestions - canvas groups:",h),console.log("processQuestions - number of canvas groups:",h.length),h.map((g,x)=>(console.log(`processQuestions - canvas ${x} strokes:`,g),console.log(`processQuestions - canvas ${x} stroke count:`,g.length),{questionNumber:x+1,drawingData:g,textBoxes:[]}))},[]),o=_.useCallback(f=>{console.log("groupStrokesByCanvas - input answers:",f);const h=l(f);return console.log("groupStrokesByCanvas - using strategy:",h),h==="by_question_boundary"?u(f):h==="by_stroke_type"?d(f):[f]},[]),l=_.useCallback(f=>{console.log("determineGroupingStrategy - analyzing answers:",f);let h=0,g=0;return f.forEach(x=>{Array.isArray(x)?h++:typeof x=="object"&&g++}),console.log("determineGroupingStrategy - arrayCount:",h,"objectCount:",g),h>0&&g>0?"by_stroke_type":f.length>3?"by_question_boundary":"single_canvas"},[]),u=_.useCallback(f=>{console.log("groupByQuestionBoundary - grouping answers:",f);const h=[];let g=[];const x=Math.ceil(f.length/2);for(let y=0;y<f.length;y++)g.push(f[y]),(y+1)%x===0&&y<f.length-1&&(h.push([...g]),g=[]);return g.length>0&&h.push(g),console.log("groupByQuestionBoundary - result:",h),h},[]),d=_.useCallback(f=>{console.log("groupByStrokeType - grouping answers:",f);const h=[],g=[];f.forEach(y=>{Array.isArray(y)?h.push(y):typeof y=="object"&&g.push(y)});const x=[];return h.length>0&&x.push(h),g.length>0&&x.push(g),console.log("groupByStrokeType - result:",x),x},[]);return _.useEffect(()=>{if(e){console.log("useDataParsing - drawing object:",e),console.log("useDataParsing - drawing.answers:",e.answers),console.log("useDataParsing - drawing.answers type:",typeof e.answers),console.log("useDataParsing - drawing.answers length:",e.answers?.length);const f=a(e);console.log("useDataParsing - parsed answers:",f),console.log("useDataParsing - parsed answers type:",typeof f),console.log("useDataParsing - parsed answers length:",f?.length);const h=i(f);console.log("useDataParsing - processed questions:",h),console.log("useDataParsing - processed questions length:",h?.length),h.length>0&&(console.log("useDataParsing - first question drawingData:",h[0]?.drawingData),console.log("useDataParsing - first question drawingData length:",h[0]?.drawingData?.length)),r(h),s(0)}},[e,a,i]),{questionsData:t,setQuestionsData:r,currentQuestionIndex:n,setCurrentQuestionIndex:s,parseDrawingData:a,processQuestions:i}},aD={MIN:.25,INITIAL:1},E0e=(e,t)=>{const[r,n]=_.useState(!1),[s,a]=_.useState(null),i=_.useCallback(()=>{document.fullscreenElement||(a({zoom:e.zoom,position:{...e.position}}),document.documentElement.requestFullscreen().then(()=>{n(!0),t(l=>({...l,zoom:aD.MIN,position:{x:0,y:0},isFullscreen:!0}))}).catch(l=>{console.error("Error entering fullscreen:",l)}))},[e.zoom,e.position,t]),o=_.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen().then(()=>{n(!1),s?(t(l=>({...l,zoom:s.zoom,position:s.position,isFullscreen:!1})),a(null)):t(l=>({...l,zoom:aD.INITIAL,position:{x:0,y:0},isFullscreen:!1}))}).catch(l=>{console.error("Error exiting fullscreen:",l)})},[s,t]);return{isFullscreen:r,enterFullscreen:i,exitFullscreen:o}},fH=_.forwardRef(({drawingData:e,textBoxes:t=[],drawingState:r,canvasSize:n,zoom:s,position:a,onTouchStart:i,onTouchMove:o,onTouchEnd:l,mousePosition:u,isMouseOverCanvas:d,isEraserDrawing:f},h)=>{const g=_.useRef(null),[x,y]=_.useState(.25),[v,T]=_.useState(null),[k,b]=_.useState({x:0,y:0}),[E,N]=_.useState(!1),P=_.useCallback(({x:H,y:W,size:R,visible:z,isDrawing:G})=>!z||!H||!W?null:c.jsx(Af,{x:H,y:W,radius:R/2,stroke:XF.CURSOR_COLOR,strokeWidth:2,dash:[5,5],opacity:G?.8:XF.CURSOR_OPACITY,listening:!1,zIndex:1e3}),[]),M=_.useCallback(H=>{if(r.currentTool===Uh.ERASER){const W=H.target.getStage(),R=cp(H,W);b(R)}},[r.currentTool]),j=_.useCallback(()=>{r.currentTool===Uh.ERASER&&N(!0)},[r.currentTool]),A=_.useCallback(()=>{N(!1)},[]);_.useEffect(()=>{const H=h.current;if(H)return H.on("mousemove",M),H.on("mouseenter",j),H.on("mouseleave",A),()=>{H.off("mousemove",M),H.off("mouseenter",j),H.off("mouseleave",A)}},[M,j,A,h]),_.useEffect(()=>{const H=n.width??n.WIDTH,W=n.height??n.HEIGHT,R=()=>{const z=g.current;if(!z)return;const G=z.clientWidth||1,Q=z.clientHeight||1,re=Math.abs(r.rotation%180)===90,q=re?W:H,se=re?H:W,ce=Math.min(G/(q||1),Q/(se||1));y(Math.min(ce,1))};return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[n.width,n.height,n.WIDTH,n.HEIGHT,r.rotation]);const F=_.useMemo(()=>{const H=g.current;if(!H||!v)return 0;const W=H.clientWidth||1,R=H.clientHeight||1,z=Math.min(W/Math.max(v.width,1),R/Math.max(v.height,1));return Math.min(z,cH.MAX)},[v]),L=_.useMemo(()=>Math.max(s,x||1),[s,x]),V=_.useMemo(()=>{const H=n.width??n.WIDTH,W=n.height??n.HEIGHT;if(!g.current)return{x:0,y:0};const R=g.current.clientWidth||1,z=g.current.clientHeight||1,G=(R-H*L)/2,Q=(z-W*L)/2;return s<=x?{x:G,y:Q}:{x:a.x!==void 0?a.x:G,y:a.y!==void 0?a.y:Q}},[a,s,x,L,n.width,n.height,v,F]);_.useEffect(()=>{if(!Array.isArray(e)||e.length===0){T(null);return}let H=1/0,W=1/0,R=-1/0,z=-1/0;const G=(se,ce)=>{Number.isFinite(se)&&Number.isFinite(ce)&&(se<H&&(H=se),ce<W&&(W=ce),se>R&&(R=se),ce>z&&(z=ce))};if(e.forEach(se=>{if(Array.isArray(se))se.forEach(ce=>G(ce.x,ce.y));else if(se&&typeof se=="object"){if(se.type==="line")G(se.startX,se.startY),G(se.endX,se.endY);else if(se.type==="rectangle")G(se.startX,se.startY),G(se.endX,se.endY);else if(se.type==="circle"){const ce=Math.sqrt(Math.pow(se.endX-se.startX,2)+Math.pow(se.endY-se.startY,2))/2,pe=(se.startX+se.endX)/2,ke=(se.startY+se.endY)/2;G(pe-ce,ke-ce),G(pe+ce,ke+ce)}}}),!Number.isFinite(H)||!Number.isFinite(W)||!Number.isFinite(R)||!Number.isFinite(z)){T(null);return}const Q=16,re=Math.max(1,R-H+Q*2),q=Math.max(1,z-W+Q*2);T({minX:H-Q,minY:W-Q,width:re,height:q})},[e]),_.useEffect(()=>{console.log("CanvasViewer - drawingData:",e),console.log("CanvasViewer - drawingData length:",e?.length),console.log("CanvasViewer - textBoxes:",t),console.log("CanvasViewer - textBoxes length:",t?.length),e&&e.length>0&&console.log("CanvasViewer - first item:",e[0]),t&&t.length>0&&console.log("CanvasViewer - first textBox:",t[0])},[e,t]),_.useEffect(()=>{const H=n.width??n.WIDTH,W=n.height??n.HEIGHT;console.log("CanvasViewer - canvas dimensions:",{width:H,height:W}),console.log("CanvasViewer - zoom:",s,"fitZoom:",x,"displayScale:",L),console.log("CanvasViewer - stagePosition:",V)},[n,s,x,L,V]);const J=(H,W)=>{if(console.log(`CanvasViewer - rendering element ${W}:`,H),Array.isArray(H))return console.log(`CanvasViewer - rendering line with ${H.length} points`),c.jsx(Ui,{points:H.flatMap(R=>[R.x,R.y]),stroke:H[0]?.color||"#000000",strokeWidth:H[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},W);if(H.type==="line")return c.jsx(Ui,{points:[H.startX,H.startY,H.endX,H.endY],stroke:H.color,strokeWidth:H.thickness,lineCap:"round"},W);if(H.type==="rectangle"){const R=Math.abs(H.endX-H.startX),z=Math.abs(H.endY-H.startY),G=Math.min(H.startX,H.endX),Q=Math.min(H.startY,H.endY);return c.jsx(_i,{x:G,y:Q,width:R,height:z,stroke:H.color,strokeWidth:H.thickness,fill:"transparent"},W)}else if(H.type==="circle"){const R=Math.sqrt(Math.pow(H.endX-H.startX,2)+Math.pow(H.endY-H.startY,2))/2,z=(H.startX+H.endX)/2,G=(H.startY+H.endY)/2;return c.jsx(Af,{x:z,y:G,radius:R,stroke:H.color,strokeWidth:H.thickness,fill:"transparent"},W)}return null},ne=()=>{if(!r.isDrawing)return null;if(r.currentTool===Uh.PENCIL&&r.currentLine.length>0)return c.jsx(Ui,{points:r.currentLine.flatMap(H=>[H.x,H.y]),stroke:r.currentColor,strokeWidth:r.currentThickness,tension:.5,lineCap:"round",lineJoin:"round"});if(r.currentShape){const{type:H,startX:W,startY:R,endX:z,endY:G,color:Q,thickness:re}=r.currentShape;if(H===Uh.LINE)return c.jsx(Ui,{points:[W,R,z,G],stroke:Q,strokeWidth:re,lineCap:"round"});if(H===Uh.RECTANGLE){const q=Math.abs(z-W),se=Math.abs(G-R),ce=Math.min(W,z),pe=Math.min(R,G);return c.jsx(_i,{x:ce,y:pe,width:q,height:se,stroke:Q,strokeWidth:re,fill:"transparent"})}else if(H===Uh.CIRCLE){const q=Math.sqrt(Math.pow(z-W,2)+Math.pow(G-R,2))/2,se=(W+z)/2,ce=(R+G)/2;return c.jsx(Af,{x:se,y:ce,radius:q,stroke:Q,strokeWidth:re,fill:"transparent"})}}return null},ee=r.isFullscreen?{position:"fixed",inset:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",zIndex:60}:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},ie={transform:`rotate(${r.rotation}deg)`,transformOrigin:"center center"},B=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),Y=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),I=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]);return c.jsx("div",{style:{...ee,touchAction:"none",WebkitTouchCallout:"none"},ref:g,className:"select-none",onTouchStart:B,onTouchMove:Y,onTouchEnd:I,children:c.jsx("div",{style:{...ie,touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onTouchStart:B,onTouchMove:Y,onTouchEnd:I,children:c.jsx(vm,{ref:h,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),scaleX:L,scaleY:L,x:V.x,y:V.y,onTouchStart:i,onTouchMove:o,onTouchEnd:l,children:c.jsxs(ym,{children:[c.jsx(_i,{x:0,y:0,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),fill:"white"}),e.map((H,W)=>(console.log(`CanvasViewer - mapping item ${W}:`,H),J(H,W))),t&&t.map((H,W)=>c.jsx(_i,{x:H.x,y:H.y,width:H.width,height:H.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}},`textbox-${W}`)),t&&t.map((H,W)=>c.jsx($u,{x:H.x+8,y:H.y+8,width:H.width-16,height:H.height-16,text:H.text,fontSize:H.fontSize||14,fill:H.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"},`text-${W}`)),ne(),r.currentTool===Uh.ERASER&&c.jsx(P,{x:k.x,y:k.y,size:r.eraserSize,visible:E,isDrawing:f})]})})})})});fH.displayName="CanvasViewer";function N0e({containerRef:e,canvasSize:t,rotation:r=0}){const[n,s]=_.useState(1),[a,i]=_.useState({x:0,y:0}),o=_.useRef({width:1,height:1}),l=_.useRef(.01),u=_.useRef(0),d=_.useRef(!1),f=_.useCallback(()=>{const E=t?.width??t?.WIDTH??0,N=t?.height??t?.HEIGHT??0,P=Math.abs(r%180)===90;return{width:P?N:E,height:P?E:N}},[t,r]),h=_.useCallback(()=>{const E=e?.current;if(!E)return{width:1,height:1};const N=E.clientWidth||1,P=E.clientHeight||1;return o.current={width:N,height:P},{width:N,height:P}},[e]),g=_.useCallback(()=>{const{width:E,height:N}=o.current,{width:P,height:M}=f(),j=E/Math.max(P,1),A=N/Math.max(M,1);return Math.min(j,A,1)*.98},[f]),x=_.useCallback(E=>{const{width:N,height:P}=o.current,{width:M,height:j}=f(),A=Math.max(l.current,Math.min(E,1.5));let F=(N-M*A)/2,L=(P-j*A)/2;const V=N-M*A,J=P-j*A;F=Math.min(Math.max(0,F),Math.max(0,V)),L=Math.min(Math.max(0,L),Math.max(0,J));try{console.log("[Camera] centerAtScale",{targetScale:E,clampedScale:A,container:{containerW:N,containerH:P},canvas:{canvasW:M,canvasH:j},translate:{x:F,y:L},rotation:r})}catch{}i({x:F,y:L}),s(A)},[f]),y=_.useCallback(()=>{const{width:E,height:N}=h(),{width:P,height:M}=f(),j=g();let A=(E-P*j)/2,F=(N-M*j)/2;const L=E-P*j,V=N-M*j;A=Math.min(Math.max(0,A),Math.max(0,L)),F=Math.min(Math.max(0,F),Math.max(0,V));try{console.log("[Camera] fitCanvas",{scale:j,container:{containerW:E,containerH:N},canvas:{canvasW:P,canvasH:M},translate:{x:A,y:F},rotation:r})}catch{}s(j),i({x:A,y:F}),l.current=j,d.current=!1},[f,h,g]),v=_.useCallback(()=>{const{width:E,height:N}=h(),{width:P,height:M}=f(),j=(E-P)/2,A=(N-M)/2;s(1),i({x:j,y:A})},[f,h]),T=_.useCallback((E,N)=>{const{width:P,height:M}=o.current,{width:j,height:A}=f(),F=Math.max(l.current,Math.min(E,1.5));if(N&&Number.isFinite(N.x)&&Number.isFinite(N.y)){const L={x:(N.x-a.x)/n,y:(N.y-a.y)/n},V=N.x-L.x*F,J=N.y-L.y*F;try{console.log("[Camera] zoomTo(pointer) ->",{from:n,to:F})}catch{}s(F),i({x:V,y:J}),u.current=Date.now()+400,d.current=!0}else{let L=(P-j*F)/2,V=(M-A*F)/2;const J=P-j*F,ne=M-A*F;L=Math.min(Math.max(0,L),Math.max(0,J)),V=Math.min(Math.max(0,V),Math.max(0,ne));try{console.log("[Camera] zoomTo(center) ->",{from:n,to:F})}catch{}s(F),i({x:L,y:V}),u.current=Date.now()+400,d.current=!0}},[f,n,a]),k=_.useCallback((E,N)=>{const P=n*E,{width:M,height:j}=o.current,A={x:M/2,y:j/2};T(P,N||A)},[n,T]),b=_.useCallback((E,N)=>{i(P=>({x:P.x+E,y:P.y+N})),u.current=Date.now()+200,d.current=!0},[]);return _.useEffect(()=>{const E=e?.current;if(!E)return;const N=new ResizeObserver(()=>{h();const P=g();if(l.current=P,!(Date.now()<u.current)&&!d.current){try{console.log("[Camera] resize centerAtScale",{scale:n})}catch{}x(n)}});return N.observe(E),h(),()=>N.disconnect()},[e,h,g,x,n]),_.useEffect(()=>{d.current=!1,l.current=g(),x(n)},[r,t?.width,t?.height,t?.WIDTH,t?.HEIGHT,g,x,n]),_.useMemo(()=>({scale:n,translate:a,setScale:s,setTranslate:i,centerAtScale:x,fitCanvas:y,oneToOne:v,zoomTo:T,zoomByFactor:k,panBy:b}),[n,a,x,y,v,T,k,b])}const vy=new Map,hH=_.forwardRef(({drawingData:e,textBoxes:t=[],canvasSize:r,rotation:n=0,onScaleChange:s,persistKey:a="viewer",onTextBoxEdit:i},o)=>{const l=_.useRef(null),u=_.useRef(null),d=N0e({containerRef:l,canvasSize:r,rotation:n}),[f,h]=_.useState({width:1,height:1}),g=_.useRef(null),x=_.useRef(null),[y,v]=_.useState(null);_.useEffect(()=>{console.log("[ViewerCanvas] drawingData received:",e),console.log("[ViewerCanvas] drawingData length:",e?.length),e&&e.length>0&&console.log("[ViewerCanvas] First drawing element:",e[0]),console.log("[ViewerCanvas] textBoxes:",t),console.log("[ViewerCanvas] textBoxes length:",t?.length)},[e]),_.useEffect(()=>{typeof s=="function"&&s(d.scale);try{console.log("[ViewerCanvas] scale changed",{scale:d.scale})}catch{}if(a){const I=vy.get(a)||{};vy.set(a,{...I,scale:d.scale})}},[d.scale,s]),_.useEffect(()=>{if(a){const I=vy.get(a)||{};vy.set(a,{...I,translate:{x:d.translate.x,y:d.translate.y}})}},[a,d.translate.x,d.translate.y]),_.useImperativeHandle(o,()=>({zoomIn:I=>d.zoomByFactor(1.1,I),zoomOut:I=>d.zoomByFactor(1/1.1,I),fitCanvas:()=>d.fitCanvas(),oneToOne:()=>d.oneToOne(),getScale:()=>d.scale,getStage:()=>u.current,getPointerPosition:()=>u.current?.getPointerPosition?.(),exportPNGFullCanvas:()=>{const I=u.current;if(!I)return null;const H=r?.width??r?.WIDTH??1536,W=r?.height??r?.HEIGHT??2048,R={scaleX:I.scaleX(),scaleY:I.scaleY(),x:I.x(),y:I.y(),width:I.width(),height:I.height()},z=g.current,G=x.current,Q=z?{x:z.x(),y:z.y(),scaleX:z.scaleX(),scaleY:z.scaleY()}:null,re=G?{x:G.x(),y:G.y(),rotation:G.rotation()}:null;try{return I.scale({x:1,y:1}),I.position({x:0,y:0}),I.size({width:H,height:W}),z&&(z.position({x:0,y:0}),z.scale({x:1,y:1})),G&&(G.position({x:0,y:0}),G.rotation(0)),I.batchDraw(),I.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:H,height:W})}finally{G&&re&&(G.position({x:re.x,y:re.y}),G.rotation(re.rotation)),z&&Q&&(z.position({x:Q.x,y:Q.y}),z.scale({x:Q.scaleX,y:Q.scaleY})),I.scale({x:R.scaleX,y:R.scaleY}),I.position({x:R.x,y:R.y}),I.size({width:R.width,height:R.height}),I.batchDraw()}}}),[d]),_.useEffect(()=>{const I=l.current;if(!I)return;const H=()=>{h({width:I.clientWidth||1,height:I.clientHeight||1})};H();const W=new ResizeObserver(H);return W.observe(I),()=>W.disconnect()},[]),_.useEffect(()=>{if(!Array.isArray(e)||e.length===0){v(null);return}let I=1/0,H=1/0,W=-1/0,R=-1/0;const z=(q,se)=>{Number.isFinite(q)&&Number.isFinite(se)&&(q<I&&(I=q),se<H&&(H=se),q>W&&(W=q),se>R&&(R=se))};if(e.forEach(q=>{if(Array.isArray(q))q.forEach(se=>z(se.x,se.y));else if(q&&typeof q=="object"){if(q.type==="line")z(q.startX,q.startY),z(q.endX,q.endY);else if(q.type==="rectangle")z(q.startX,q.startY),z(q.endX,q.endY);else if(q.type==="circle"){const se=Math.hypot(q.endX-q.startX,q.endY-q.startY)/2,ce=(q.startX+q.endX)/2,pe=(q.startY+q.endY)/2;z(ce-se,pe-se),z(ce+se,pe+se)}}}),!Number.isFinite(I)||!Number.isFinite(H)||!Number.isFinite(W)||!Number.isFinite(R)){v(null);return}const G=16,Q=Math.max(1,W-I+G*2),re=Math.max(1,R-H+G*2);v({minX:I-G,minY:H-G,width:Q,height:re,centerX:I-G+Q/2,centerY:H-G+re/2})},[e]);const T=_.useMemo(()=>{if(!y)return{scale:1,x:0,y:0};const I=r?.width??r?.WIDTH??1536,H=r?.height??r?.HEIGHT??2048,W=Math.min(I/Math.max(1,y.width),H/Math.max(1,y.height),1),R=y.width*W,z=y.height*W,G=(I-R)/2,Q=(H-z)/2,re=G-y.minX*W,q=Q-y.minY*W;return{scale:W,x:re,y:q}},[y,r?.width,r?.height,r?.WIDTH,r?.HEIGHT]),k=_.useRef(!1);_.useEffect(()=>{if(k.current)return;const I=a?vy.get(a):null;I&&Number.isFinite(I.scale)&&I.translate&&Number.isFinite(I.translate.x)&&Number.isFinite(I.translate.y)?(d.setScale(I.scale),d.setTranslate(I.translate)):d.fitCanvas(),k.current=!0},[a,d]),_.useEffect(()=>{try{console.log("[ViewerCanvas] rotation changed",{rotation:n,scale:d.scale,translate:d.translate})}catch{}d.fitCanvas()},[n]),_.useEffect(()=>{d.centerAtScale(d.scale)},[n]);const b=I=>{I.evt.preventDefault();const H=u.current;if(!H)return;const W=H.getPointerPosition(),R=Math.pow(1.0015,-I.evt.deltaY);d.zoomByFactor(R,W)},E=_.useRef(!1),N=_.useRef({x:0,y:0}),P=()=>{const I=l.current;if(!I)return 1;const H=I.clientWidth||1,W=I.clientHeight||1,R=r?.width??r?.WIDTH??1,z=r?.height??r?.HEIGHT??1,G=Math.abs(n%180)===90,Q=G?z:R,re=G?R:z,q=Math.min(H/Q,W/re);return Math.min(q,1)},M=I=>{const H=P();d.scale<=H||(E.current=!0,N.current={x:I.evt.clientX,y:I.evt.clientY})},j=I=>{if(!E.current)return;const H=I.evt.clientX-N.current.x,W=I.evt.clientY-N.current.y;N.current={x:I.evt.clientX,y:I.evt.clientY},d.panBy(H,W)},A=()=>{E.current=!1},F=1536,L=2048,V=(I,H)=>{if(console.log(`[ViewerCanvas] Rendering drawing element ${H}:`,I),Array.isArray(I))return console.log(`[ViewerCanvas] Array item with ${I.length} points:`,I.slice(0,3)),c.jsx(Ui,{points:I.flatMap(W=>[W.x,W.y]),stroke:I[0]?.color||"#000000",strokeWidth:I[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},H);if(I?.type==="line")return c.jsx(Ui,{points:[I.startX,I.startY,I.endX,I.endY],stroke:I.color,strokeWidth:I.thickness,lineCap:"round"},H);if(I?.type==="rectangle"){const W=Math.abs(I.endX-I.startX),R=Math.abs(I.endY-I.startY),z=Math.min(I.startX,I.endX),G=Math.min(I.startY,I.endY);return c.jsx(_i,{x:z,y:G,width:W,height:R,stroke:I.color,strokeWidth:I.thickness,fill:"transparent"},H)}else if(I?.type==="circle"){const W=Math.sqrt(Math.pow(I.endX-I.startX,2)+Math.pow(I.endY-I.startY,2))/2,R=(I.startX+I.endX)/2,z=(I.startY+I.endY)/2;return c.jsx(Af,{x:R,y:z,radius:W,stroke:I.color,strokeWidth:I.thickness,fill:"transparent"},H)}return null},J=_.useRef(new Map),ne=_.useRef(null),ee=_.useRef({x:0,y:0}),ie=_.useCallback(I=>{const H=l.current;H&&(H.setPointerCapture?.(I.pointerId),J.current.set(I.pointerId,{x:I.clientX,y:I.clientY}),N.current={x:I.clientX,y:I.clientY})},[]),B=_.useCallback(I=>{const H=J.current;if(H.has(I.pointerId)){if(H.set(I.pointerId,{x:I.clientX,y:I.clientY}),H.size===2){const W=Array.from(H.values()),R=W[1].x-W[0].x,z=W[1].y-W[0].y,G=Math.hypot(R,z),Q={x:(W[0].x+W[1].x)/2,y:(W[0].y+W[1].y)/2},re=u.current,q=re&&re.getPointerPosition()||Q;if(ne.current!=null){const se=G/Math.max(1,ne.current);d.zoomByFactor(se,q)}ne.current=G,ee.current=q}else if(H.size===1){const W=P();if(d.scale<=W)return;const R=I.clientX-N.current.x,z=I.clientY-N.current.y;N.current={x:I.clientX,y:I.clientY},d.panBy(R,z)}}},[]),Y=_.useCallback(I=>{const H=l.current;H&&(H.releasePointerCapture?.(I.pointerId),J.current.delete(I.pointerId),J.current.size<2&&(ne.current=null),E.current=!1)},[]);return c.jsx("div",{ref:l,style:{width:"100%",height:"100%",display:"block",backgroundColor:"transparent",touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onPointerDown:ie,onPointerMove:B,onPointerUp:Y,children:c.jsx(vm,{ref:u,width:f.width,height:f.height,onWheel:b,onMouseDown:M,onMouseMove:j,onMouseUp:A,onMouseLeave:A,children:c.jsx(ym,{children:c.jsx(tu,{ref:g,x:d.translate.x,y:d.translate.y,scaleX:d.scale,scaleY:d.scale,children:(()=>{const I=(n%360+360)%360;let H=0,W=0;I===90?H=L:I===180?(H=F,W=L):I===270&&(W=F);try{console.log("[ViewerCanvas] rotatedGroup offset",{rotation:n,norm:I,tx:H,ty:W,canvasW:F,canvasH:L})}catch{}return c.jsxs(tu,{ref:x,x:H,y:W,rotation:n,children:[c.jsx(_i,{x:0,y:0,width:F,height:L,fill:"white"}),c.jsxs(tu,{x:T.x,y:T.y,scaleX:T.scale,scaleY:T.scale,children:[Array.isArray(e)?(console.log("[ViewerCanvas] Rendering",e.length,"drawing elements"),e.map((R,z)=>V(R,z))):null,Array.isArray(t)&&t.map((R,z)=>c.jsxs(tu,{x:R.x,y:R.y,children:[c.jsx(_i,{width:R.width,height:R.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}}),c.jsx($u,{text:R.text,x:8,y:8,width:Math.max(0,(R.width||0)-16),height:Math.max(0,(R.height||0)-16),fontSize:R.fontSize||14,fill:R.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"})]},`tb-${z}`))]})]})})()})})})})});hH.displayName="ViewerCanvas";const A0e=({zoom:e,onZoomIn:t,onZoomOut:r,onRotate:n,onDownload:s,onFullscreen:a,isFullscreen:i})=>c.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-center justify-center",children:[c.jsx(tt,{onClick:t,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom In",children:c.jsx(o0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(tt,{onClick:r,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom Out",children:c.jsx(c0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(tt,{onClick:n,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Rotate",children:c.jsx(s0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(tt,{onClick:s,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Download",children:c.jsx(e0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(tt,{onClick:a,variant:"secondary",size:"icon",className:"w-10 h-10",title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?c.jsx(lH,{className:"w-4 h-4 mx-auto my-auto"}):c.jsx(r0e,{className:"w-4 h-4 mx-auto my-auto"})})]}),j0e=({currentQuestion:e,totalQuestions:t,onPrevious:r,onNext:n,drawingDataLength:s})=>t<=1?null:c.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(tt,{onClick:r,disabled:e===0,variant:"outline",size:"sm",children:"Previous"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",e+1," of ",t]}),c.jsx(tt,{onClick:n,disabled:e===t-1,variant:"outline",size:"sm",children:"Next"})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:[s," lines"]})]})}),mH=({drawing:e,isOpen:t,onClose:r,onScoreChange:n,onMaxScoreChange:s,isTeacherView:a=!1,onSaveScore:i})=>{const{drawingState:o,setDrawingState:l,drawingData:u,setDrawingData:d,textBoxes:f,setTextBoxes:h,saveToHistoryState:g,undo:x,redo:y,canUndoState:v,canRedoState:T}=p0e(),{questionsData:k,currentQuestionIndex:b,setCurrentQuestionIndex:E}=C0e(e),{zoom:N,position:P,handleZoomIn:M,handleZoomOut:j}=T0e(cH,Kc),{isFullscreen:A,enterFullscreen:F,exitFullscreen:L}=E0e(o,l),{handleTouchStart:V,handleTouchMove:J,handleTouchEnd:ne}=k0e(o,l,u,d,g,x,y,v,T),ee=_.useRef(null),ie=_.useRef(null),[B,Y]=_.useState(1),[I,H]=_.useState(""),[W,R]=_.useState("");_.useEffect(()=>{if(console.log("DrawingModal - questionsData:",k),console.log("DrawingModal - currentQuestionIndex:",b),k.length>0){const pe=k[b]?.drawingData||[],ke=k[b]?.textBoxes||[];console.log("DrawingModal - setting drawingData:",pe),console.log("DrawingModal - setting textBoxes:",ke),d(pe),h(ke)}},[k,b,d,h]),_.useEffect(()=>{t&&e&&(H((Number.isFinite(e.score)?e.score:0).toString()),R("10"))},[t,e]);const z=()=>{b>0&&E(b-1)},G=()=>{b<k.length-1&&E(b+1)},Q=()=>{v&&x()},re=()=>{T&&y()};_.useEffect(()=>{const pe=ke=>{(ke.ctrlKey||ke.metaKey)&&(ke.key==="z"&&!ke.shiftKey?(ke.preventDefault(),Q()):(ke.key==="y"||ke.key==="z"&&ke.shiftKey)&&(ke.preventDefault(),re()))};return document.addEventListener("keydown",pe),()=>document.removeEventListener("keydown",pe)},[Q,re]);const q=()=>{l(pe=>({...pe,rotation:(pe.rotation+90)%360}))},se=()=>{if(a&&ie.current){const ye=ie.current.exportPNGFullCanvas();if(!ye)return;const je=document.createElement("a");je.href=ye,je.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(je),je.click(),document.body.removeChild(je);return}const pe=ee.current;if(!pe)return;const ke=pe.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:Kc.WIDTH,height:Kc.HEIGHT}),le=document.createElement("a");le.href=ke,le.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(le),le.click(),document.body.removeChild(le)},ce=async()=>{if(!a)return r();const pe=parseInt(I,10),ke=10;Number.isFinite(pe)&&(typeof i=="function"?await i({resultId:e.id,score:Math.max(0,Math.min(10,pe)),maxScore:ke}):(n&&n(e.id,pe),s&&s(e.id,ke))),r()};return!t||!e?null:c.jsx(al,{children:c.jsx(dt.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:c.jsxs(dt.div,{className:"bg-white rounded-lg shadow-xl max-w-4xl h-[90vh] w-full mx-4 flex flex-col select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:pe=>pe.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Drawing Submission"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," ",e.surname," - ",e.test_name]})]}),c.jsx(tt,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:c.jsx(lH,{className:"w-5 h-5"})})]}),k.length>1&&c.jsx(j0e,{currentQuestion:b,totalQuestions:k.length,onPrevious:z,onNext:G,drawingDataLength:k[b]?.drawingData?.length||0}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[c.jsxs("div",{className:"flex-1 min-h-0 relative overflow-hidden bg-gray-100 p-0 sm:p-4 select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},children:[a?c.jsx(hH,{ref:ie,drawingData:u,textBoxes:f,canvasSize:{width:Kc.WIDTH,height:Kc.HEIGHT,WIDTH:Kc.WIDTH,HEIGHT:Kc.HEIGHT},rotation:o.rotation,onScaleChange:Y}):c.jsx(fH,{ref:ee,drawingData:u,textBoxes:f,drawingState:o,canvasSize:{width:Kc.WIDTH,height:Kc.HEIGHT,WIDTH:Kc.WIDTH,HEIGHT:Kc.HEIGHT},zoom:N,position:P,onTouchStart:V,onTouchMove:J,onTouchEnd:ne,mousePosition:{x:0,y:0},isMouseOverCanvas:!1,isEraserDrawing:!1}),c.jsx(A0e,{zoom:a?B:N,onZoomIn:()=>{if(a&&ie.current){try{console.log("[ZoomButton] ZoomIn click (teacher)",{before:ie.current.getScale?.()})}catch{}ie.current.zoomIn(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomIn after",{after:ie.current.getScale?.()})}catch{}},0)}else M()},onZoomOut:()=>{if(a&&ie.current){try{console.log("[ZoomButton] ZoomOut click (teacher)",{before:ie.current.getScale?.()})}catch{}ie.current.zoomOut(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomOut after",{after:ie.current.getScale?.()})}catch{}},0)}else j()},onRotate:q,onDownload:se,onFullscreen:A?L:F,isFullscreen:A}),c.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800 bg-opacity-70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round((a?B:N)*100),"%"]})]}),a&&c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Score:"}),c.jsx("input",{type:"number",min:"0",max:10,value:I,onChange:pe=>H(pe.target.value),className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max:"}),c.jsx("input",{type:"number",value:10,disabled:!0,className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),c.jsx(tt,{onClick:ce,variant:"primary",size:"sm",children:"Save"})]})})]})]})})})},gH=({testType:e,testId:t,studentAnswers:r,onBackToCabinet:n,compact:s=!1,showAll:a=!1,onToggleShowAll:i,maxInitial:o=3})=>{const l=fl(),{user:u,isAuthenticated:d}=Ms(),{testResults:f,loadTestResults:h}=w2(),[g,x]=_.useState(!0),[y,v]=_.useState(""),[T,k]=_.useState([]),[b,E]=_.useState([]),[N,P]=_.useState(null),[M,j]=_.useState([]),[A,F]=_.useState(0),[L,V]=_.useState(0),[J,ne]=_.useState(!1),[ee,ie]=_.useState(null),B=_.useCallback(q=>{const se=q.best_retest_score||q.score,ce=q.best_retest_max_score||q.max_score,pe=Math.round(se/ce*100);return{score:se,maxScore:ce,percentage:pe}},[]);_.useEffect(()=>{Y()},[e,t]),_.useEffect(()=>{!e&&!t&&(f&&f.results?(xe.debug(" Using cached test results from TestContext"),E(f.results),x(!1)):H())},[e,t,f]);const Y=_.useCallback(async()=>{xe.debug(" Initializing Student Results...");try{if(x(!0),v(""),!d||!u){xe.debug(" User not authenticated"),v("User not authenticated");return}if(u.role!==Ro.STUDENT){xe.error(" Invalid user role for student results:",u.role),v("Access denied. Student role required.");return}xe.debug(" Loading test results..."),await h(u?.student_id||u?.id||""),e&&t&&r&&(xe.debug(" Loading specific test results..."),await I(e,t,r)),xe.debug(" Student Results initialization complete!")}catch(q){xe.error(" Error initializing student results:",q),v("Failed to initialize student results")}finally{x(!1)}},[d,u,e,t,r,h]),I=_.useCallback(async(q,se,ce)=>{xe.debug(" Loading specific test results:",q,se);try{const pe=await _n.getTestInfo(q,se);xe.debug(" Test info loaded:",pe),P(pe);const ke=await _n.getTestQuestions(q,se);xe.debug(" Test questions loaded:",ke),j(ke);const le=Ff(ke,ce,q).score,ye=ke.length>0?Math.round(le/ke.length*100):0;F(le),V(ye),xe.debug(" Test results calculated:",{score:le,percentage:ye})}catch(pe){throw xe.error(" Error loading specific test results:",pe),pe}},[]),H=_.useCallback(async(q=0)=>{xe.debug(" Loading all student results using existing test results API...",q>0?`(retry ${q})`:"");try{if(!(u?.student_id||u?.sub))throw new Error("Student ID not found");const ce=await _n.getStudentTestResults();if(ce.success){xe.debug(" All student results loaded:",ce.results.length,"results");const pe=ce.results.map(ke=>({...ke,caught_cheating:ke.caught_cheating||!1,visibility_change_times:ke.visibility_change_times||0}));E(pe),ie(new Date),ce.results.length===0&&q===0&&(xe.debug(" No results found, retrying in 2 seconds..."),setTimeout(()=>{H(1)},2e3))}else throw new Error(ce.error||"Failed to load student results")}catch(se){xe.error(" Error loading all student results:",se),v(se.message)}},[u]),W=_.useCallback(q=>({"Listening and Speaking":"L&S","Reading and Writing":"R&W","English for Career":"Eng for Career","Science Fundamental":"Science F","Science Supplementary":"Science S","Math Fundamental":"Math F","Math Supplementary":"Math S","English for Communication":"Eng for Comm"})[q]||q,[]),R=_.useCallback(q=>{if(!q||q.length===0)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No results available"})});const se=a?q:q.slice(0,o);return c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),c.jsx("th",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.map((ce,pe)=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs font-medium text-gray-900",children:c.jsx("span",{className:"bg-blue-100 text-blue-800 px-0.5 sm:px-2 py-0.5 rounded text-xs",children:W(ce.subject)})}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-12 sm:max-w-none",children:ce.teacher_name}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-16 sm:max-w-none",children:ce.test_name}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500",children:c.jsx("div",{className:"flex flex-col items-center space-y-1",children:ce.test_type==="drawing"?ce.score!==null?c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:ke,maxScore:le,percentage:ye}=B(ce);return ye>=80?"bg-green-100 text-green-800":ye>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:ke,maxScore:le,percentage:ye}=B(ce);return`${ke}/${le} (${ye}%)`})()}):c.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):ce.test_type==="speaking"?ce.score!==null?c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:ke,maxScore:le,percentage:ye}=B(ce);return ye>=80?"bg-green-100 text-green-800":ye>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:ke,maxScore:le,percentage:ye}=B(ce);return`${ke}/${le} (${ye}%)`})()}):c.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:ke,maxScore:le,percentage:ye}=B(ce);return ye>=80?"bg-green-100 text-green-800":ye>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:ke,maxScore:le,percentage:ye}=B(ce);return`${ke}/${le} (${ye}%)`})()})})}),c.jsx("td",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:new Date(ce.submitted_at).toLocaleDateString()})]},pe))})]}),q.length>o&&i&&c.jsx("div",{className:"text-center pt-4",children:c.jsx("button",{onClick:i,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a?"Show Less":`Show ${q.length-o} More`})})]})},[W,a,o,i]),z=_.useCallback((q,se)=>{if(xe.debug(" formatAnswer called with:",{answer:q,testType:se,answerType:typeof q}),!q)return"No answer";switch(se){case"true_false":const ce=typeof q=="boolean"?q:q==="true";return xe.debug(" Boolean answer processed:",ce),ce?"True":"False";case"multiple_choice":return q.toUpperCase();case"input":return q;case"word_matching":return typeof q=="object"?Object.entries(q).map(([pe,ke])=>`${pe}  ${ke}`).join(", "):q;case"drawing":return"Drawing submitted";default:return q}},[]),G=_.useCallback(()=>!N||!M||!r?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Test Results: ",N.test_name||N.title||"Test"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600",children:A}),c.jsx("p",{className:"text-sm text-gray-500",children:"Correct Answers"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:M.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Total Questions"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-3xl font-bold ${L>=80?"text-green-600":L>=60?"text-yellow-600":"text-red-600"}`,children:[L,"%"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Score"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions Review"}),c.jsx("div",{className:"space-y-4",children:M.map((q,se)=>{const ce=r[se],pe=Tv(q,e),ke=Hp(q,ce,e);return c.jsxs("div",{className:`border rounded-lg p-4 ${ke?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("h4",{className:"font-medium text-gray-900",children:["Question ",se+1]}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ke?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ke?"Correct":"Incorrect"})]}),c.jsx("p",{className:"text-gray-700 mb-3",children:q.question}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Your Answer:"}),c.jsx("p",{className:"text-sm text-gray-900",children:z(ce,e)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Correct Answer:"}),c.jsx("p",{className:"text-sm text-gray-900",children:z(pe,e)})]})]})]},se)})})]})]}),[N,M,r,e,A,L,Tv,Hp,z]),Q=_.useCallback(()=>{if(!b||b.length===0)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No test results available yet."})});const q={};return b.forEach(se=>{const ce=se.subject||"Unknown Subject";q[ce]||(q[ce]=[]),q[ce].push(se)}),c.jsx("div",{className:"space-y-6",children:Object.entries(q).map(([se,ce])=>c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:se})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ce.map((pe,ke)=>{const{score:le,maxScore:ye,percentage:je}=B(pe),Ne=je>=80?"text-green-600":je>=60?"text-yellow-600":"text-red-600";return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:pe.test_name}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.teacher_name||"Unknown"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:Ne,children:[le,"/",ye," (",je,"%)"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(pe.submitted_at).toLocaleDateString()})]},ke)})})]})})]},se))})},[b]);_.useCallback(()=>{xe.debug(" Clearing test data and returning to cabinet..."),P(null),j([]),setStudentAnswers(null),F(0),V(0),ne(!1),n?n():l("/student")},[n,l]);const re=_.useCallback(()=>{xe.debug(" Navigating back to cabinet..."),n?n():l("/student")},[n,l]);return _.useCallback((q,se)=>{const ce={id:Date.now(),message:q,type:se,timestamp:new Date};k(pe=>[...pe,ce]),setTimeout(()=>{k(pe=>pe.filter(ke=>ke.id!==ce.id))},Km.NOTIFICATION_DURATION)},[]),g?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Student Results..."})]})}):y?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:y}),c.jsx(tt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?c.jsxs("div",{children:[g?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(fn,{size:"md"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading results..."})]}):y?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-red-500 text-4xl mb-2",children:""}),c.jsx("p",{className:"text-red-600",children:y})]}):R(b),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(q=>c.jsx(ou,{type:q.type,message:q.message,onClose:()=>k(se=>se.filter(ce=>ce.id!==q.id))},q.id))})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Results"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",ee?ee.toLocaleString():"Never"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[N&&c.jsx(tt,{variant:"outline",onClick:()=>ne(!J),children:J?"Hide Details":"Show Details"}),c.jsx(tt,{variant:"outline",onClick:re,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:J&&N?G():Q()}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(q=>c.jsx(ou,{type:q.type,message:q.message,onClose:()=>k(se=>se.filter(ce=>ce.id!==q.id))},q.id))}),selectedDrawing&&c.jsx(mH,{drawing:selectedDrawing,isOpen:isDrawingModalOpen,onClose:()=>setIsDrawingModalOpen(!1)})]})},P0e=({isMenuOpen:e,onToggleMenu:t,onShowPasswordChange:r})=>{const n=fl(),{user:s,isAuthenticated:a,logout:i}=Ms(),{studentData:o,loadStudentData:l}=i3(),{activeTests:u,testResults:d,loadActiveTests:f,loadTestResults:h,viewTestDetails:g,testDetailsModal:x,closeTestDetailsModal:y}=w2(),[v,T]=_.useState(!0),[k,b]=_.useState(""),[E,N]=_.useState([]),[P,M]=_.useState(null),[j,A]=_.useState(!1),[F,L]=_.useState(null),[V,J]=_.useState(null),[ne,ee]=_.useState(new Set),[ie,B]=_.useState(!1),[Y,I]=_.useState(!1),[H,W]=_.useState(!1),[R,z]=_.useState(!1);_.useEffect(()=>{G()},[]),_.useEffect(()=>()=>{W(!1)},[]),_.useEffect(()=>{if(H){const ye=setTimeout(()=>{W(!1)},1e3);return()=>clearTimeout(ye)}},[H]);const G=_.useCallback(async()=>{xe.debug(" Initializing Student Cabinet...");try{if(T(!0),b(""),!a||!s){xe.debug(" User not authenticated, redirecting to login"),n("/login");return}if(s.role!==Ro.STUDENT){xe.error(" Invalid user role for student cabinet:",s.role),b("Access denied. Student role required.");return}xe.debug(" Loading active tests (single API call)...");const ye=s?.student_id||s?.id||"";if(Q(ye)){xe.debug(" Cache refresh triggered - clearing cache");try{const Ne=`student_active_tests_${ye}`,We=`student_results_table_${ye}`;localStorage.removeItem(Ne),localStorage.removeItem(We)}catch{}}else xe.debug(" Using cached active tests (background revalidation will keep data fresh)");await f(ye),xe.debug(" Student Cabinet initialization complete!")}catch(ye){xe.error(" Error initializing student cabinet:",ye),b("Failed to initialize student cabinet")}finally{T(!1)}},[a,s,n]),Q=_.useCallback(ye=>{if(window.studentCabinetRefreshRequested)return window.studentCabinetRefreshRequested=!1,xe.debug(" Manual refresh requested"),!0;if(window.recentTestCompleted)return window.recentTestCompleted=!1,xe.debug(" Test completed - cache refresh triggered"),!0;const je=localStorage.getItem(`last_cabinet_refresh_${ye}`);if(je&&Date.now()-parseInt(je)>300*1e3)return xe.debug(" Time-based refresh triggered"),!0;try{for(let Ne=0;Ne<localStorage.length;Ne++){const We=localStorage.key(Ne);if(We&&We.startsWith(`retest_assignment_id_${ye}_`))return xe.debug(" Retest assignment key detected, forcing cache refresh:",We),!0}}catch{}return xe.debug(" No refresh triggers - using existing cache"),!1},[]);_.useCallback(async()=>{xe.debug(" Calculating average score...");try{if(d&&d.length>0){const ye=d.reduce((Ne,We)=>{const $e=We.best_retest_score||We.score,Nt=We.best_retest_max_score||We.max_score;return typeof $e=="number"&&typeof Nt=="number"&&Nt>0?Ne+Math.round($e/Nt*100):Ne},0),je=Math.round(ye/d.length);J(je),xe.debug(" Average score calculated:",je)}}catch(ye){xe.error(" Error calculating average score:",ye)}},[d]),_.useEffect(()=>{if(H){xe.debug(" Skipping completed tests initialization during navigation");return}const ye=s?.student_id||s?.id;if(!ye){xe.debug(" Student ID not available yet, skipping localStorage initialization");return}const je=new Set;for(let Ne=0;Ne<localStorage.length;Ne++){const We=localStorage.key(Ne);if(We&&We.startsWith(`test_completed_${ye}_`)&&localStorage.getItem(We)==="true"){const Nt=We.replace(`test_completed_${ye}_`,"").split("_");if(Nt.length>=2){const He=Nt[0],Et=Nt.slice(1).join("_"),Rt=`${He}_${Et}`;je.add(Rt),xe.debug(" Found completed test in localStorage:",Rt)}}}ee(je),z(!0),xe.debug(" Initialized completed tests from localStorage:",Array.from(je))},[s?.student_id,s?.id,H]),_.useEffect(()=>{xe.debug(" testResults structure:",d);const ye=d?.results||d;if(xe.debug(" resultsArray:",ye),ye&&ye.length>0){const je=s?.student_id||s?.id||"",Ne=new Set;ye.forEach(We=>{const $e=`${We.test_type}_${We.test_id}`;Ne.add($e),localStorage.setItem(`test_completed_${je}_${We.test_type}_${We.test_id}`,"true")}),ee(We=>{const $e=new Set([...We,...Ne]);return xe.debug(" Updated completed tests (merged):",Array.from($e)),$e})}},[d,s?.student_id,s?.id]);const re=_.useCallback(async(ye,je,Ne=!1,We=null)=>{xe.debug(" Checking test completion:",ye,je,"retestAvailable:",Ne);try{const $e=s?.student_id||s?.id||"";if(Ne){xe.debug(" Retest available from backend, checking attempt limits.");const Rt=`retest_attempts_${$e}_${ye}_${je}`;let Mt;try{const st=localStorage.getItem(Rt);Mt=st?JSON.parse(st):void 0}catch(st){xe.warn(" Failed to parse attempts metadata:",st)}const ur=[];for(let st=1;st<=10;st++){const qe=`retest_attempt${st}_${$e}_${ye}_${je}`;localStorage.getItem(qe)==="true"&&ur.push(qe)}const wr=ur.length,dr=typeof We?.retest_attempts_left=="number"?We.retest_attempts_left:void 0,wt=typeof We?.retest_attempt_number=="number"?We.retest_attempt_number:void 0,Ke=typeof We?.retest_max_attempts=="number"?We.retest_max_attempts:void 0;if(dr===0)return xe.debug(" API reports no attempts left. Retest considered completed."),!0;const it=Ke??(dr!=null&&wt!=null?dr+wt:Mt?.max??3),vt=Mt?.used??wr;return xe.debug(" Retest check:",{attemptsMeta:Mt,attemptKeys:ur,usedAttempts:vt,totalAttempts:it,attemptsLeftFromApi:dr,retriesRemaining:dr??it-vt}),vt>=it?(xe.debug(" Maximum retest attempts reached (meta/localStorage)."),!0):(xe.debug(" Retest attempts available, allowing start."),!1)}const Nt=`test_completed_${$e}_${ye}_${je}`,He=localStorage.getItem(Nt);if(xe.debug(" localStorage key:",Nt),xe.debug(" localStorage value:",He),ye==="word_matching"){xe.debug(" Debug: All localStorage keys for student",$e);for(let Rt=0;Rt<localStorage.length;Rt++){const Mt=localStorage.key(Rt);Mt&&Mt.includes($e)&&Mt.includes("word_matching")&&xe.debug(" Found word_matching key:",Mt,"=",localStorage.getItem(Mt))}}if(He==="true")return xe.debug(" Found completion status in local storage:",He),!0;const Et=d?.results||d;return Et&&Et.length>0&&(xe.debug(" Checking database results:",Et.length,"results"),Et.some(Mt=>(xe.debug(" Checking result:",Mt.test_type,Mt.test_id,"vs",ye,je),Mt.test_type===ye&&Mt.test_id===je)))?(xe.debug(" Found completion status in database results"),localStorage.setItem(Nt,"true"),!0):(xe.debug(" Test not completed according to local storage or database"),!1)}catch($e){return xe.error(" Error checking test completion:",$e),!1}},[d,s?.student_id,s?.id]),q=_.useCallback((ye,je)=>{const Ne={id:Date.now(),message:ye,type:je,timestamp:new Date};N(We=>[...We,Ne]),setTimeout(()=>{N(We=>We.filter($e=>$e.id!==Ne.id))},Km.NOTIFICATION_DURATION)},[]),se=_.useCallback(async ye=>{xe.debug(" Showing test details:",ye);try{await g(ye.test_type,ye.test_id,ye.test_name)}catch(je){xe.error("Error loading test details:",je),q("Failed to load test details","error")}},[g,q]),ce=_.useCallback(ye=>{xe.debug(" Starting test:",ye);const je=`${ye.test_type}_${ye.test_id}`;if(ne.has(je)&&!ye?.retest_available){q("This test has already been completed","warning");return}if(xe.debug(" Checking retest conditions:"),xe.debug(" test.retest_available:",ye?.retest_available),xe.debug(" testKey:",je),xe.debug(" completedTests.has(testKey):",ne.has(je)),xe.debug(" completedTests:",Array.from(ne)),ye?.retest_available&&!ye?.retest_is_completed){const Ne=s?.student_id||s?.id||"",We=`retest1_${Ne}_${ye.test_type}_${ye.test_id}`;localStorage.setItem(We,"true"),xe.debug(" Set retest key:",We);const $e=`retest_in_progress_${Ne}_${ye.test_type}_${ye.test_id}`;localStorage.setItem($e,"1"),xe.debug(" Set in-progress retest lock:",$e);try{const Nt=`anti_cheating_${Ne}_${ye.test_type}_${ye.test_id}`;localStorage.removeItem(Nt);const He=`speaking_test_data_${Ne}_${ye.test_id}`;localStorage.removeItem(He);const Et=`speaking_progress_${ye.test_id}`;localStorage.removeItem(Et);const Rt=`_${Ne}_${ye.test_type}_${ye.test_id}`,Mt=[];for(let wr=0;wr<localStorage.length;wr++){const dr=localStorage.key(wr);dr&&(dr.startsWith("retest_attempt")||(dr.endsWith(Rt)||dr.includes(`answers_${Ne}_${ye.test_type}_${ye.test_id}`)||dr.includes(`progress_${Ne}_${ye.test_type}_${ye.test_id}`)||dr.includes(`state_${Ne}_${ye.test_type}_${ye.test_id}`)||dr.includes(`selected_${Ne}_${ye.test_type}_${ye.test_id}`))&&Mt.push(dr))}Mt.forEach(wr=>localStorage.removeItem(wr)),xe.debug(" Cleared generic cached keys for retest start:",Mt);const ur=`retest_attempts_${Ne}_${ye.test_type}_${ye.test_id}`;xe.debug(" Cleared per-test cached keys for retest start:",{antiCheatKey:Nt,speakingCacheKey:He,speakingProgressKey:Et})}catch{}if(xe.debug(" Test retest_assignment_id:",ye.retest_assignment_id),xe.debug(" Test retest_assignment_id type:",typeof ye.retest_assignment_id),ye?.retest_assignment_id){const Nt=`retest_assignment_id_${Ne}_${ye.test_type}_${ye.test_id}`;localStorage.setItem(Nt,String(ye.retest_assignment_id)),xe.debug(" Set retest assignment ID:",Nt,"=",ye.retest_assignment_id)}else xe.debug(" No retest assignment ID found in test data")}else xe.debug(" Retest assignment ID storage skipped - retest not available");if(W(!0),xe.debug(" Set isStartingTest to true for test:",ye.test_type),ye.test_type==="matching_type"){xe.debug(" Redirecting to matching test page for testId:",ye.test_id),n(`/student/matching-test/${ye.test_id}`);return}if(ye.test_type==="word_matching"){xe.debug(" Redirecting to word matching test page for testId:",ye.test_id),n(`/student/word-matching-test/${ye.test_id}`);return}if(ye.test_type==="speaking"){xe.debug(" Redirecting to speaking test page for testId:",ye.test_id),n(`/student/speaking-test/${ye.test_id}`);return}n(`/student/test/${ye.test_type}/${ye.test_id}`)},[n,ne,q,s?.student_id,s?.id]),pe=_.useCallback(()=>{B(ye=>!ye)},[]),ke=_.useCallback(()=>{I(ye=>!ye)},[]),le=_.useCallback(async ye=>{if(xe.debug(" Starting test:",ye),H){xe.debug(" Test already starting, ignoring click");return}try{if(await re(ye.test_type,ye.test_id,ye?.retest_available,ye)){q("This test has already been completed","warning");return}ce(ye)}catch(je){xe.error(" Error starting test:",je),q("Failed to start test. Please try again.","error")}},[re,ce,q,H]);return _.useCallback(ye=>{xe.debug(" Viewing test details:",ye),se(ye)},[se]),v?c.jsx(dt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsxs(dt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx(fn,{size:"lg"}),c.jsx(dt.p,{className:"mt-4 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:"Loading Student Cabinet..."})]})}):k?c.jsx(dt.div,{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsx(dt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:c.jsxs(dt.div,{className:"bg-white border border-red-200 rounded-xl p-8 max-w-md shadow-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.3},children:[c.jsx(dt.div,{className:"text-4xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3,type:"spring"},children:""}),c.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Cabinet Error"}),c.jsx("p",{className:"text-red-600 mb-6",children:k}),c.jsx(tt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs(dt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(dt.div,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-6",children:[c.jsxs(dt.div,{className:"flex items-center space-x-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(dt.div,{className:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:c.jsx("span",{className:"text-white font-semibold text-xl",children:s?.name?.charAt(0)||"S"})})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white",children:[s?.name," ",s?.surname]}),c.jsxs("p",{className:"text-blue-100 text-sm sm:text-base md:text-lg",children:["Grade ",s?.grade," - Class ",s?.class]})]})]}),c.jsxs(dt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsxs("button",{onClick:t,className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",style:{zIndex:1e3},children:[c.jsx("span",{className:"hidden sm:inline",children:"Menu"}),c.jsx(dt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:e?180:0},transition:{duration:.2},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),c.jsx(al,{children:e&&c.jsx(dt.div,{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:c.jsxs("div",{className:"py-2",children:[c.jsx(dt.button,{onClick:r,className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),c.jsx(dt.button,{onClick:()=>{t(),i()},className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),c.jsxs(dt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:c.jsx("div",{className:"lg:col-span-1 space-y-6",children:V!==null&&c.jsx(dt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.5},children:c.jsxs(Ht,{children:[c.jsx(Ht.Header,{children:c.jsx(Ht.Title,{children:"Average Score"})}),c.jsx(Ht.Body,{children:c.jsxs(dt.div,{className:"text-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.8,duration:.3},children:[c.jsxs(dt.div,{className:"text-4xl font-bold text-blue-600 mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5,type:"spring"},children:[V,"%"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Overall Performance"})]})})]})})})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsxs(Ht,{children:[c.jsx(Ht.Header,{children:c.jsx(Ht.Title,{className:"text-center",children:"Active Tests"})}),c.jsx(Ht.Body,{children:u&&u.length>0?c.jsxs("div",{className:"relative",children:[xe.debug(" Rendering overlay, isStartingTest:",H),H&&c.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg border-2 border-blue-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Starting test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait..."})]})}),c.jsxs("div",{className:"space-y-4",children:[(ie?u:u.slice(0,3)).map((ye,je)=>c.jsx(dt.div,{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ie?0:.7+je*.1,duration:.3},whileHover:{scale:1.02},children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"sm:hidden",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1 break-words leading-tight",children:ye.test_name}),c.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[c.jsx("span",{children:ye.teacher_name}),c.jsx("span",{children:""}),c.jsx("span",{children:new Date(ye.assigned_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})})]})]}),c.jsxs("div",{className:"hidden sm:flex items-center space-x-3 text-sm",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 break-words leading-tight",children:ye.test_name}),c.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:ye.subject}),c.jsx("span",{className:"text-gray-500",children:ye.teacher_name}),c.jsx("span",{className:"text-gray-500",children:new Date(ye.assigned_at).toLocaleDateString()})]})]}),c.jsx("div",{className:"flex space-x-2 ml-4",children:(()=>{const Ne=`${ye.test_type}_${ye.test_id}`,We=ne.has(Ne);let $e=!1;if(typeof window<"u"&&ye?.retest_available){const Nt=s?.student_id||s?.id||"";if(Nt)try{const He=`test_completed_${Nt}_${ye.test_type}_${ye.test_id}`,Et=localStorage.getItem(He)==="true",Rt=`retest_attempts_${Nt}_${ye.test_type}_${ye.test_id}`;let Mt;const ur=localStorage.getItem(Rt);if(ur)try{Mt=JSON.parse(ur)}catch(it){xe.warn(" Failed to parse retest attempts metadata in render:",it)}let wr=typeof Mt?.used=="number"?Mt.used:void 0;if(wr==null){let it=0;for(let vt=1;vt<=10;vt++){const st=`retest_attempt${vt}_${Nt}_${ye.test_type}_${ye.test_id}`;localStorage.getItem(st)==="true"&&it++}wr=it}const dr=typeof ye?.retest_attempts_left=="number"?ye.retest_attempts_left:void 0,Ke=(typeof ye?.retest_max_attempts=="number"?ye.retest_max_attempts:void 0)??(Mt?.max!=null?Mt.max:dr!=null&&typeof ye?.retest_attempt_number=="number"?dr+ye.retest_attempt_number:void 0);(dr===0||Ke!=null&&wr!=null&&wr>=Ke||Et&&dr==null&&Ke==null)&&($e=!0)}catch(He){xe.warn(" Failed to evaluate local retest completion:",He)}}return R?ye?.retest_is_completed||$e?c.jsx(tt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):ye?.retest_available&&!ye?.retest_is_completed&&!$e?(ye.retest_attempts_left||0)>0?c.jsx(tt,{variant:"primary",size:"sm",onClick:()=>le(ye),disabled:H,children:"Start Retest"}):c.jsx(tt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):We?c.jsx(tt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):(xe.debug(" Button render, isStartingTest:",H,"test:",ye.test_type),c.jsx(tt,{variant:"primary",size:"sm",onClick:()=>le(ye),disabled:H,children:"Start Test"})):c.jsx(tt,{variant:"secondary",size:"sm",disabled:!0,className:"bg-gray-100 text-gray-500 border-gray-200",children:"Loading..."})})()})]})},`${ye.test_type}_${ye.test_id}`)),u.length>3&&c.jsx("div",{className:"text-center pt-2",children:c.jsx("button",{onClick:pe,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:ie?"Show Less":`Show ${u.length-3} More`})})]})]}):c.jsxs(dt.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.3},children:[c.jsx(dt.img,{src:"/pics/no-tests.png",alt:"No active tests",className:"w-24 h-24 mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.5,type:"spring"}}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Active Tests"})]})})]})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:c.jsxs(Ht,{children:[c.jsx(Ht.Header,{children:c.jsx(Ht.Title,{children:"Test Results"})}),c.jsx(Ht.Body,{children:d&&d.showResults?c.jsx(b2,{testResults:d,onBackToCabinet:()=>{setTestResults(null)},onRetakeTest:(ye,je)=>{f(),setTestResults(null)},isLoading:v}):c.jsx(gH,{compact:!0,showAll:Y,onToggleShowAll:ke,maxInitial:3})})]})})]})]}),c.jsx(qC,{isOpen:x.isOpen,onClose:y,testType:x.testType,testId:x.testId,testName:x.testName,questions:x.questions||[],isLoading:x.isLoading||!1}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:E.map(ye=>c.jsx(ou,{type:ye.type,message:ye.message,onClose:()=>N(je=>je.filter(Ne=>Ne.id!==ye.id))},ye.id))})]})},M0e=({testInfo:e,questions:t,testType:r,studentAnswers:n,onBackToCabinet:s,checkAnswerCorrectness:a,formatStudentAnswerForDisplay:i,getCorrectAnswer:o,caughtCheating:l=!1})=>{const[u,d]=_.useState(0),[f,h]=_.useState(0),[g,x]=_.useState(!0);if(_.useEffect(()=>{const T=()=>{try{const k=Ff(t,n,r).score,b=e?.num_questions||t?.length||0,E=b>0?Math.round(k/b*100):0;d(k),h(E),x(!1)}catch(k){console.error("Error calculating test results:",k),d(0),h(0),x(!1)}};t&&t.length>0?T():x(!1)},[t,n,r,e,Ff]),g)return c.jsx("div",{className:"flex justify-center items-center min-h-64",children:c.jsx("div",{className:"text-lg",children:"Calculating results..."})});const y=e?.num_questions||t?.length||0,v=e?.test_name||e?.title||"Test";return c.jsxs("div",{className:"test-results-page max-w-4xl mx-auto p-6 overflow-y-auto min-h-screen",children:[c.jsx(Ht,{className:"mb-6",children:c.jsxs("div",{className:"results-header text-center",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Test Results: ",v]}),c.jsx("p",{className:"text-gray-600",children:r==="matching_type"?"Matching Test":r==="multiple_choice"?"Multiple Choice Test":r==="true_false"?"True/False Test":r==="input"?"Input Test":r==="drawing"?"Drawing Test":"Test"})]})}),l&&c.jsx(Ht,{className:"mb-6 border-2 border-red-500 bg-red-50",children:c.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("div",{className:"flex-1",children:c.jsx("p",{className:"text-red-700",children:"Suspicious activity was detected during this test. Your teacher has been notified."})})]})}),c.jsx(Ht,{className:"mb-6",children:c.jsxs("div",{className:"results-summary",children:[c.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:["Your Score: ",u," / ",y," (",f,"%)"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:c.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${f>=80?"bg-green-500":f>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${f}%`}})}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:`text-lg font-medium ${f>=80?"text-green-600":f>=60?"text-yellow-600":"text-red-600"}`,children:f>=80?"Excellent!":f>=60?"Good job!":"Keep practicing!"})})]})}),t&&t.length>0&&c.jsx(Ht,{className:"mb-6",children:c.jsxs("div",{className:"questions-review",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Question Review"}),c.jsx("div",{className:"space-y-4",children:t.map((T,k)=>{const b=n[String(T.question_id)]||"No answer",E=a(T,b,r);return c.jsxs("div",{className:`question-review p-4 rounded-lg border-2 ${E?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[c.jsxs("div",{className:"question-review-header flex justify-between items-start mb-3",children:[c.jsxs("h4",{className:"text-lg font-medium text-gray-800",children:["Question ",k+1]}),c.jsx("span",{className:`text-2xl font-bold ${E?"text-green-600":"text-red-600"}`,children:E?"":""})]}),c.jsx("div",{className:"question-text mb-3",children:c.jsx("p",{className:"text-gray-700 font-medium",children:T.question})}),c.jsxs("div",{className:"answer-section space-y-2",children:[c.jsxs("p",{className:"student-answer",children:[c.jsx("strong",{className:"text-gray-600",children:"Your Answer:"})," ",c.jsx("span",{className:`font-medium ${E?"text-green-700":"text-red-700"}`,children:i(b,r,T)})]}),!E&&c.jsxs("p",{className:"correct-answer",children:[c.jsx("strong",{className:"text-gray-600",children:"Correct Answer:"})," ",c.jsx("span",{className:"text-green-700 font-medium",children:r==="multiple_choice"?String(T.correct_answer||"").toUpperCase():i(o(T,r),r,T)})]})]})]},T.question_id||k)})})]})}),c.jsx(Ht,{children:c.jsx("div",{className:"results-actions text-center",children:c.jsx(tt,{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-medium",children:"Back to Cabinet"})})})]})};class F0e{constructor(){this.activeRequests=new Map,this.completedRequests=new Map,this.maxCacheSize=100,this.cacheTimeout=3e4}generateKey(t,r,n={}){const s=Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{});return`${t}_${r}_${JSON.stringify(s)}`}isRequestInProgress(t){return this.activeRequests.has(t)}getCachedResult(t){const r=this.completedRequests.get(t);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.result:null}startRequest(t,r){return this.activeRequests.set(t,r),r.finally(()=>{this.activeRequests.delete(t)}),r}cacheResult(t,r){if(this.completedRequests.size>=this.maxCacheSize){const n=this.completedRequests.keys().next().value;this.completedRequests.delete(n)}this.completedRequests.set(t,{result:r,timestamp:Date.now()})}async deduplicateApiCall(t,r,n,s){const a=this.generateKey(t,r,n);if(this.isRequestInProgress(a))return console.log(" API deduplication: Request already in progress, waiting...",a),this.activeRequests.get(a);const i=this.getCachedResult(a);if(i)return console.log(" API deduplication: Using cached result",a),i;console.log(" API deduplication: Making new request",a);const o=this.startRequest(a,s());try{const l=await o;return this.cacheResult(a,l),l}catch(l){throw l}}clearCache(){this.activeRequests.clear(),this.completedRequests.clear(),console.log(" API deduplication: Cache cleared")}}const iD=new F0e,D0e=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(null,n),t)}},O0e=({onBackToCabinet:e,currentTest:t})=>{const r=fl(),{user:n,isAuthenticated:s}=Ms(),{activeTests:a,loadActiveTests:i}=w2(),o=_.useCallback(D0e((Fe,xt,yt)=>{try{if(window.skipInitialProgressSave&&yt.answers&&yt.answers.length===0){xe.debug(" Skipping empty progress save during restoration"),window.skipInitialProgressSave=!1;return}const or=`test_progress_${n?.student_id||n?.id||"unknown"}_${Fe}_${xt}`,de=localStorage.getItem(or);if(de&&yt.answers&&yt.answers.length===0)try{const _e=JSON.parse(de);if(_e.answers&&_e.answers.length>0){xe.debug(" Skipping empty progress save - existing progress is better:",_e.answers);return}}catch{}localStorage.setItem(or,JSON.stringify(yt)),xe.debug(`Saved test progress for ${Fe}_${xt}:`,yt)}catch(zt){xe.error("Error saving test progress:",zt)}},1e3),[n?.student_id,n?.id]),l=_.useCallback((Fe,xt,yt)=>{o(Fe,xt,yt)},[o]),u=_.useCallback((Fe,xt)=>{try{const zt=`test_progress_${n?.student_id||n?.id||"unknown"}_${Fe}_${xt}`,or=localStorage.getItem(zt);return or?JSON.parse(or):null}catch(yt){return xe.error("Error getting test progress:",yt),null}},[n?.student_id,n?.id]),d=_.useCallback((Fe,xt)=>{try{const yt=n?.student_id||n?.id||"unknown",zt=`test_progress_${yt}_${Fe}_${xt}`;localStorage.removeItem(zt);for(let or=0;or<localStorage.length;or++){const de=localStorage.key(or);de&&de.startsWith(`test_progress_${yt}_${Fe}_${xt}_`)&&(localStorage.removeItem(de),xe.debug(` Cleared individual question key: ${de}`))}xe.debug(`Cleared test progress for ${Fe}_${xt}`)}catch(yt){xe.error("Error clearing test progress:",yt)}},[n?.student_id,n?.id]),[f,h]=_.useState(!0),[g,x]=_.useState(!1),[y,v]=_.useState(""),[T,k]=_.useState(!1),[b,E]=_.useState(""),[N,P]=_.useState([]),[M,j]=_.useState(t?"test":"list"),[A,F]=_.useState(null),[L,V]=_.useState(null),[J,ne]=_.useState(null),[ee,ie]=_.useState([]),[B,Y]=_.useState([]),[I,H]=_.useState(0),[W,R]=_.useState(0),[z,G]=_.useState(null),Q=Ls.useRef(null),re=Ls.useRef(null),[q,se]=_.useState(!1),[ce,pe]=_.useState(!1),[ke,le]=_.useState(null),[ye,je]=_.useState(null),[Ne,We]=_.useState(!1),[$e,Nt]=_.useState(!1),[He,Et]=_.useState(!1),Rt=_.useRef(null);a3(He,_.useCallback(({confirm:Fe,cancel:xt})=>{Rt.current={confirm:Fe,cancel:xt},Nt(!0)},[])),_.useEffect(()=>{M==="test"&&A?Et(!0):(Et(!1),Rt.current=null)},[M,A]);const[Mt,ur]=_.useState({isInitialized:!1,initializationId:null,lastTestId:null,initializationCount:0}),[wr,dr]=_.useState({isRestored:!1,restoredTestId:null,restorationCount:0}),{startTracking:wt,stopTracking:Ke,getCheatingData:it,clearData:vt,isCheating:st,tabSwitches:qe}=v1(A?.test_type,A?.test_id,n?.student_id||n?.id);_.useEffect(()=>{(()=>{const xt=[];for(let yt=0;yt<localStorage.length;yt++){const zt=localStorage.key(yt);if(zt&&zt.startsWith("test_progress_")&&!zt.includes("_51712_")&&!zt.includes("_51736_")){const or=zt.split("_");or.length===4&&or[0]==="test"&&or[1]==="progress"&&xt.push(zt)}}xt.forEach(yt=>{localStorage.removeItem(yt),xe.debug(" Cleared old cache key:",yt)})})()},[]);const ot=_.useCallback(()=>{const Fe=A?.test_id,xt=n?.student_id||n?.id;if(!xt||!Fe)return xe.debug(" Skipping initialization - missing required data:",{studentId:xt,currentTestId:Fe}),!1;const yt=`${xt}_${Fe}_${Date.now()}`;return Mt.isInitialized&&Mt.lastTestId===Fe?(xe.debug(" Already initialized for this test - skipping"),!1):Mt.initializationId?(xe.debug(" Initialization in progress - skipping duplicate"),!1):(xe.debug(" Starting initialization:",yt),ur({isInitialized:!1,initializationId:yt,lastTestId:Fe}),!0)},[Mt,A,n?.student_id,n?.id]),kt=_.useCallback(()=>{ur(Fe=>({...Fe,isInitialized:!0,initializationId:null})),xe.debug(" Initialization completed")},[]),Ut=_.useCallback(async()=>{xe.debug(" Initializing Student Tests...");try{if(h(!0),E(""),!s||!n){xe.debug(" User not authenticated"),E("User not authenticated");return}if(n.role!==Ro.STUDENT){xe.error(" Invalid user role for student tests:",n.role),E("Access denied. Student role required.");return}xe.debug(" Loading active tests..."),await i(),kt(),xe.debug(" Student Tests initialization complete!")}catch(Fe){xe.error(" Error initializing student tests:",Fe),E("Failed to initialize student tests")}finally{h(!1)}},[s,n,i,kt]);_.useEffect(()=>{ot()&&Ut()},[ot,Ut]),_.useEffect(()=>{t&&(xe.debug(" Auto-starting test from prop:",t),k(!0),Zt(t))},[t]),_.useCallback(async()=>{xe.debug(" Loading student active tests...");try{const Fe=await _n.getActiveTests();xe.debug(" Active tests loaded:",Fe);const xt=Fe.map(yt=>({...yt,subject_id:yt.subject_id||yt.subjectId,teacher_id:yt.teacher_id||yt.teacherId,is_active:yt.is_active!==void 0?yt.is_active:!0,created_at:yt.created_at||yt.createdAt,updated_at:yt.updated_at||yt.updatedAt}));return je(new Date),xt}catch(Fe){throw xe.error(" Error loading active tests:",Fe),Fe}},[]),_.useCallback(async(Fe,xt)=>{xe.debug(" Checking test completion:",Fe,xt);try{const yt=u(Fe,xt);return yt&&yt.completed}catch(yt){return xe.error(" Error checking test completion:",yt),!1}},[u]),_.useEffect(()=>{if(ee.length>0&&A?.test_id){const Fe=setTimeout(()=>{let xt=!1;const yt=new Array(ee.length).fill("");if(ee.forEach((zt,or)=>{const _e=`test_progress_${n?.student_id||n?.id||"unknown"}_${L}_${A?.test_id}_${zt.question_id}`,ge=localStorage.getItem(_e);if(ge){const be=ge.replace(/^"(.*)"$/,"$1");yt[or]=be,xt=!0}}),xt){Y(yt);const zt=yt.filter(de=>de&&typeof de=="string"&&de.trim()!=="").length,or=ee.length>0?zt/ee.length*100:0;H(or)}},100);return()=>clearTimeout(Fe)}},[ee,L,A?.test_id]);const Qt=_.useCallback(async(Fe,xt)=>{xe.debug(" Marking test as completed:",Fe,xt);try{const yt=u(Fe,xt)||{};yt.completed=!0,yt.completedAt=new Date().toISOString(),l(Fe,xt,yt);const or=`test_completed_${n?.student_id||n?.id||""}_${Fe}_${xt}`;localStorage.setItem(or,"true"),xe.debug(" Test completion marked in localStorage:",or),xe.debug(" localStorage value after setting:",localStorage.getItem(or)),hr("Test marked as completed","success")}catch(yt){xe.error(" Error marking test as completed:",yt),hr("Failed to mark test as completed","error")}},[u,l]),Gt=_.useCallback(Fe=>{xe.debug(" Showing test details:",Fe),le(Fe),pe(!0)},[]),Zt=_.useCallback(async Fe=>{xe.debug(" Starting test:",Fe);let xt=Date.now(),yt;try{v(""),x(!0),xt=Date.now();const zt=()=>{const Ct=Date.now()-xt,Er=Math.max(0,250-Ct);setTimeout(()=>{h(!1),x(!1)},Er)};let or=!1;yt=setTimeout(()=>{or=!0,v("Loading is taking longer than expected...")},15e3);const _e=`test_completed_${n?.student_id||n?.id||""}_${Fe.test_type}_${Fe.test_id}`,ge=localStorage.getItem(_e)==="true";if(ge&&!Fe?.retest_available){xe.debug(" Test already completed, redirecting to main cabinet"),hr("This test has already been completed","info"),r("/student");return}if(ge&&Fe?.retest_available&&xe.debug(" Test completed but retest available, allowing retest"),Fe.test_type===ts.MATCHING){xe.debug(" Redirecting to matching test page for testId:",Fe.test_id),r(`/student/matching-test/${Fe.test_id}`);return}if(Fe.test_type===ts.WORD_MATCHING){xe.debug(" Redirecting to word matching test page for testId:",Fe.test_id),r(`/student/word-matching-test/${Fe.test_id}`);return}F(Fe),V(Fe.test_type),dr({isRestored:!1,restoredTestId:null,restorationCount:0});const[be,Ce]=await Promise.all([iD.deduplicateApiCall("GET",`test-info-${Fe.test_type}-${Fe.test_id}`,{testType:Fe.test_type,testId:Fe.test_id},()=>_n.getTestInfo(Fe.test_type,Fe.test_id)),iD.deduplicateApiCall("GET",`test-questions-${Fe.test_type}-${Fe.test_id}`,{testType:Fe.test_type,testId:Fe.test_id},()=>_n.getTestQuestions(Fe.test_type,Fe.test_id))]);ne(be);let Ee=Ce;try{if(!!be?.is_shuffled){const fr=n?.student_id||n?.id||"unknown",Er=`${fr}:${Fe.test_type}:${Fe.test_id}`,Fr=Array.from(Er).reduce((Yr,Pr)=>(Yr<<5)-Yr+Pr.charCodeAt(0),0)>>>0,on=`test_shuffle_order_${fr}_${Fe.test_type}_${Fe.test_id}`,ln=localStorage.getItem(on);if(ln){const Yr=JSON.parse(ln),Pr=new Map(Ce.map(as=>[as.question_id,as]));Ee=Yr.map(as=>Pr.get(as)).filter(Boolean)}else{const Pr=function(Kr){return function(){var Tn=Kr+=1831565813;return Tn=Math.imul(Tn^Tn>>>15,Tn|1),Tn^=Tn+Math.imul(Tn^Tn>>>7,Tn|61),((Tn^Tn>>>14)>>>0)/4294967296}}(Fr);Ee=[...Ce];for(let Kr=Ee.length-1;Kr>0;Kr--){const Tn=Math.floor(Pr()*(Kr+1));[Ee[Kr],Ee[Tn]]=[Ee[Tn],Ee[Kr]]}const as=Ee.map(Kr=>Kr.question_id);localStorage.setItem(on,JSON.stringify(as))}}}catch(Ct){xe.error("Shuffle error (ignored):",Ct)}ie(Ee),zt();const rt=Fe.test_id;if(wr.isRestored&&wr.restoredTestId===rt){xe.debug(" Progress already restored for this test - skipping");return}xe.debug(" Starting progress restoration for test:",Fe.test_type,Fe.test_id),dr(Ct=>({...Ct,restorationCount:Ct.restorationCount+1}));const bt=n?.student_id||n?.id||"unknown",at=`test_progress_${bt}_${Fe.test_type}_${Fe.test_id}`,ue=localStorage.getItem(at);xe.debug(" Checking main progress key:",at),xe.debug(" Main progress data:",ue);let he=new Array(Ce.length).fill("");if(ue)try{const Ct=JSON.parse(ue);xe.debug(" Parsed progress data:",Ct),Ct.answers&&Array.isArray(Ct.answers)&&(he=Ct.answers,xe.debug(" Loaded answers from main progress:",he))}catch(Ct){xe.error(" Error parsing main progress:",Ct)}Ce.forEach((Ct,fr)=>{const Er=`test_progress_${bt}_${Fe.test_type}_${Fe.test_id}_${Ct.question_id}`,Fr=localStorage.getItem(Er);if(xe.debug(` Checking individual answer for question ${Ct.question_id}:`,Fr),Fr){const on=Fr.replace(/^"(.*)"$/,"$1");he[fr]=on,xe.debug(` Loaded individual answer for question ${Ct.question_id}:`,on)}}),xe.debug(" Final initial answers after loading all sources:",he);const Ae=he.filter(Ct=>Ct&&typeof Ct=="string"&&Ct.trim()!=="").length;if(Ae>0){xe.debug(` Restoring progress: ${Ae}/${Ce.length} questions answered`),Y(he);const Ct=Ce.length>0?Ae/Ce.length*100:0;H(Ct),xe.debug(` Progress restored: ${Ct}% complete`)}else xe.debug(" No existing progress found - starting fresh"),Y(he),H(0);dr(Ct=>({...Ct,isRestored:!0,restoredTestId:rt})),Ae>0&&(xe.debug(" Existing progress found - preventing overwrite during initialization"),window.skipInitialProgressSave=!0);const Ie=Number(be?.allowed_time||0),Ze=n?.student_id||n?.id||"unknown";if(Q.current=`test_timer_${Ze}_${Fe.test_type}_${Fe.test_id}`,Ie>0)try{const Ct=localStorage.getItem(Q.current),fr=Date.now();if(Ct){const Er=JSON.parse(Ct),Fr=Math.floor((fr-new Date(Er.lastTickAt).getTime())/1e3),on=Math.max(0,Number(Er.remainingSeconds||Ie)-Math.max(0,Fr));R(on),re.current=fr}else R(Ie),re.current=fr,localStorage.setItem(Q.current,JSON.stringify({remainingSeconds:Ie,lastTickAt:new Date(fr).toISOString(),startedAt:new Date(fr).toISOString()}))}catch(Ct){xe.error("Timer cache init error:",Ct),R(Ie)}else R(0);const mt=new Date;G(mt),xe.debug(" Test timer started at:",mt.toISOString());const Tt=n?.student_id||n?.id||"unknown",lr=`anti_cheating_${Tt}_${Fe.test_type}_${Fe.test_id}`,Ft=localStorage.getItem(lr);if(xe.debug(" Checking for anti-cheating data with key:",lr),xe.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),xe.debug(" Current test details:",{testType:Fe.test_type,testId:Fe.test_id,studentId:Tt}),Ft)try{const Ct=JSON.parse(Ft);xe.debug(" Found existing anti-cheating data for THIS test:",Ct),xe.debug(" Visibility change times for this test:",Ct.tabSwitches||0),xe.debug(" Cheating status for this test:",Ct.isCheating||!1),Ct.isCheating&&(xe.debug(" WARNING: Student has been flagged for cheating in THIS test!"),xe.debug(" Tab switches detected in this test:",Ct.tabSwitches),hr(` Warning: Suspicious activity detected in this test (${Ct.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(Ct){xe.error(" Error parsing existing anti-cheating data:",Ct)}else xe.debug(" No existing anti-cheating data found for this test - starting fresh");wt(),xe.debug(" Anti-cheating tracking started"),j("test"),xe.debug(" Test started successfully")}catch(zt){xe.error(" Error starting test:",zt),hr("Failed to start test","error"),v("Failed to load test data. Please try again.")}finally{const zt=Date.now()-xt,de=Math.max(0,250-zt);setTimeout(()=>{h(!1),x(!1)},de),k(!1);try{yt&&clearTimeout(yt)}catch{}}},[u]),ir=_.useCallback(async()=>{if(!A||!J||!ee||!B){hr("No test data to submit","error");return}xe.debug(" Submitting test:",A);try{se(!0);const Fe=Ff(ee,B,A.test_type),xt=new Date,yt=z?Math.round((xt-z)/1e3):0,zt=z?z.toISOString():xt.toISOString();xe.debug(" Test timing:",{startedAt:zt,endTime:xt.toISOString(),timeTaken:`${yt} seconds`});const or=it();xe.debug(" Anti-cheating data for submission:",or);const de={};ee.forEach((ge,be)=>{de[ge.question_id]=B[be]??""}),A.test_type==="drawing"&&(xe.debug(" Drawing test answers being submitted:",B),xe.debug(" Drawing test answers type:",typeof B[0]),xe.debug(" Drawing test answers content:",B[0]));const _e=await _n.submitTest(A.test_type,A.test_id,B,{time_taken:(()=>{const ge=Number(J?.allowed_time||0);return ge>0?Math.min(yt,ge):yt})(),started_at:zt,submitted_at:xt.toISOString(),answers_by_id:de,question_order:ee.map(ge=>ge.question_id),caught_cheating:or.caught_cheating,visibility_change_times:or.visibility_change_times,retest_assignment_id:(()=>{const be=`retest_assignment_id_${n?.student_id||n?.id||""}_${A.test_type}_${A.test_id}`,Ce=localStorage.getItem(be);return xe.debug(" Frontend retest key:",be),xe.debug(" Frontend retest assignment ID from localStorage:",Ce),xe.debug(" Frontend retest assignment ID converted:",Ce?Number(Ce):null),xe.debug(" Frontend current test data:",A),xe.debug(" Frontend current test retest_assignment_id:",A.retest_assignment_id),Ce?Number(Ce):null})(),parent_test_id:A.test_id},n);if(xe.debug(" Test submission result:",_e),_e.success){window.recentTestCompleted=!0,xe.debug(" Test completed - cache refresh triggered");const ge=n?.student_id||n?.id||"",be=`retest_assignment_id_${ge}_${A.test_type}_${A.test_id}`,Ce=!!localStorage.getItem(be);let Ee=!1;if(Ce){const he=typeof A?.retest_max_attempts=="number"?A.retest_max_attempts:void 0,Ae=typeof A?.retest_attempts_left=="number"?A.retest_attempts_left:void 0,Ie=typeof A?.retest_attempt_number=="number"?A.retest_attempt_number:void 0,Ze=he??(Ae!=null&&Ie!=null?Ae+Ie:1),mt=(_e?.percentage_score??_e?.percentage??0)>=50;if(mt){const Tt=`retest_attempt${Ze}_${ge}_${A.test_type}_${A.test_id}`;localStorage.setItem(Tt,"true"),xe.debug(" Passed retest, marking last-slot key:",Tt);let lr=0;for(let Ct=1;Ct<=10;Ct++){const fr=`retest_attempt${Ct}_${ge}_${A.test_type}_${A.test_id}`;localStorage.getItem(fr)==="true"&&lr++}if(ge&&A.test_type&&A.test_id){const Ct=`test_completed_${ge}_${A.test_type}_${A.test_id}`;localStorage.setItem(Ct,"true"),xe.debug(" Marked retest as completed (student passed):",Ct);const fr=`retest_attempts_${ge}_${A.test_type}_${A.test_id}`;localStorage.setItem(fr,JSON.stringify({used:lr,max:Ze})),xe.debug(" Set retest attempts metadata (student passed):",fr,{used:lr,max:Ze})}const Ft=`retest1_${ge}_${A.test_type}_${A.test_id}`;localStorage.removeItem(Ft),Ee=!0}else{let Tt=1;for(let Er=1;Er<=10;Er++){const Fr=`retest_attempt${Er}_${ge}_${A.test_type}_${A.test_id}`;if(localStorage.getItem(Fr)!=="true"){Tt=Er;break}}const lr=`retest_attempt${Tt}_${ge}_${A.test_type}_${A.test_id}`;localStorage.setItem(lr,"true"),xe.debug(" Marked retest attempt as completed:",lr);let Ft=0;for(let Er=1;Er<=10;Er++){const Fr=`retest_attempt${Er}_${ge}_${A.test_type}_${A.test_id}`;localStorage.getItem(Fr)==="true"&&Ft++}const Ct=Ze>0&&Ft>=Ze,fr=Ct||mt;if(xe.debug(" Retest completion check:",{usedAttempts:Ft,maxAttempts:Ze,attemptsExhausted:Ct,passed:mt,shouldComplete:fr,studentId:!!ge,test_type:!!A?.test_type,test_id:!!A?.test_id}),fr)if(!ge||!A?.test_type||!A?.test_id)xe.error(" Cannot set completion key - missing required fields:",{studentId:ge,test_type:A?.test_type,test_id:A?.test_id});else{const Er=`test_completed_${ge}_${A.test_type}_${A.test_id}`;localStorage.setItem(Er,"true"),xe.debug(" Marked retest as completed (attempts exhausted or passed):",Er),xe.debug(" Verification - completion key value:",localStorage.getItem(Er));const Fr=`retest_attempts_${ge}_${A.test_type}_${A.test_id}`;localStorage.setItem(Fr,JSON.stringify({used:Ft,max:Ze})),xe.debug(" Set retest attempts metadata (attempts exhausted):",Fr,{used:Ft,max:Ze});const on=`retest1_${ge}_${A.test_type}_${A.test_id}`;localStorage.removeItem(on),xe.debug(" Removed retest key after completion:",on),Ee=!0}else xe.debug(" Retest NOT completed - conditions not met:",{attemptsExhausted:Ct,passed:mt,shouldComplete:fr})}}if(xe.debug(" Marking test as completed..."),await Qt(A.test_type,A.test_id),A.test_type!=="drawing"){xe.debug(" Caching test results after submission...");const Ae=`student_results_table_${n?.student_id||n?.id||"unknown"}`,{setCachedData:Ie,CACHE_TTL:Ze}=await Qa(async()=>{const{setCachedData:mt,CACHE_TTL:Tt}=await Promise.resolve().then(()=>dp);return{setCachedData:mt,CACHE_TTL:Tt}},void 0);Ie(Ae,_e,Ze.student_results_table),xe.debug(" Test results cached with key:",Ae)}else xe.debug(" Drawing test submitted - not caching results (will appear after teacher grades)");xe.debug(" Clearing test progress..."),d(A.test_type,A.test_id);try{const he=n?.student_id||n?.id||"unknown",Ae=`test_timer_${he}_${A.test_type}_${A.test_id}`;localStorage.removeItem(Ae);const Ie=`test_shuffle_order_${he}_${A.test_type}_${A.test_id}`;localStorage.removeItem(Ie)}catch{}if(n?.student_id){const he=`test_completed_${n.student_id}_${A.test_type}_${A.test_id}`;localStorage.setItem(he,"true"),xe.debug(" Test marked as completed in localStorage:",he)}try{const he=n?.student_id||n?.id||"",Ae=`retest1_${he}_${A.test_type}_${A.test_id}`,Ie=`retest_assignment_id_${he}_${A.test_type}_${A.test_id}`;Ee?(localStorage.removeItem(Ae),localStorage.removeItem(Ie),xe.debug(" Cleared retest keys (completion):",Ae,Ie)):xe.debug(" Retest still pending - keeping keys:",Ae,Ie)}catch(he){xe.warn(" Failed to manage retest keys:",he)}xe.debug(" Clearing test progress and anti-cheating data for THIS test only...");const rt=n?.student_id||n?.id||"unknown",bt=[],at=`test_progress_${rt}_${A.test_type}_${A.test_id}`,ue=`anti_cheating_${rt}_${A.test_type}_${A.test_id}`;for(let he=0;he<localStorage.length;he++){const Ae=localStorage.key(he);Ae&&(Ae===at||Ae===ue)&&bt.push(Ae)}bt.forEach(he=>{localStorage.removeItem(he),xe.debug(` Cleared for THIS test only: ${he}`)}),xe.debug(" Clearing anti-cheating data..."),Ke(),vt(),A.test_type!=="drawing"?j("results"):r("/student"),hr("Test submitted successfully!","success"),xe.debug(" Test submitted successfully")}else throw xe.error(" Test submission failed:",_e.error),new Error(_e.error||"Failed to submit test")}catch(Fe){xe.error(" Error submitting test:",Fe),hr("Failed to submit test","error")}finally{se(!1)}},[A,J,ee,B,Qt,d]);_.useCallback(()=>(xe.debug(" Collecting test answers..."),B),[B]);const kr=_.useCallback(()=>{if(!ee||!B)return;const Fe=B.filter(yt=>yt&&typeof yt=="string"&&yt.trim()!=="").length,xt=ee.length>0?Fe/ee.length*100:0;if(H(xt),xe.debug(` Progress updated: ${Fe}/${ee.length} questions answered (${Math.round(xt)}%)`),A){const yt={answers:B,progress:xt,lastSaved:new Date().toISOString()};l(A.test_type,A.test_id,yt)}},[ee,B,A,l]);_.useEffect(()=>{kr()},[kr]);const ve=_.useCallback(()=>{if(!B)return 0;const Fe=B.filter(xt=>xt&&typeof xt=="string"&&xt.trim()!=="").length;return xe.debug(" getAnsweredCount:",{studentAnswers:B,answeredCount:Fe,totalQuestions:ee?.length}),Fe},[B,ee]),Pe=_.useCallback(()=>{if(!A||!n?.student_id)return;xe.debug(" Cabinet navigation detected - counting as cheating attempt");const xt=`anti_cheating_${n?.student_id||n?.id||"unknown"}_${A.test_type}_${A.test_id}`,yt=localStorage.getItem(xt);let zt=0,or=!1;if(yt)try{const be=JSON.parse(yt);zt=be.tabSwitches||0,or=be.isCheating||!1}catch(be){xe.error(" Error parsing existing anti-cheating data:",be)}const de=zt+1,_e=de>=2;xe.debug(` Tab switch count: ${zt}  ${de} (cheating: ${_e})`);const ge={tabSwitches:de,isCheating:_e,lastUpdated:new Date().toISOString()};localStorage.setItem(xt,JSON.stringify(ge)),xe.debug(" Anti-cheating data updated for cabinet navigation:",ge)},[A,n?.student_id,n?.id]),Me=_.useCallback(()=>{xe.debug(" Navigating back to cabinet..."),Pe(),Et(!1),Rt.current=null,e?e():r("/student")},[Pe,e,r]),ze=_.useCallback(()=>{Nt(!1);const Fe=Rt.current;if(Rt.current=null,Et(!1),Fe?.confirm){Pe(),Fe.confirm();return}Me()},[Me,Pe]),At=_.useCallback(()=>{const Fe=Rt.current;Rt.current=null,Fe?.cancel&&Fe.cancel(),Nt(!1)},[]);_.useCallback(()=>{xe.debug(" Showing test results..."),j("results")},[]);const Kt=_.useCallback((Fe,xt,yt=null)=>{switch(xe.debug(" Formatting student answer for display:",Fe,"testType:",xt,"question:",yt),xt){case ts.MULTIPLE_CHOICE:if(Fe.toString().startsWith("Option "))return Fe;if(yt&&typeof Fe=="string"&&!isNaN(parseInt(Fe))){const zt=parseInt(Fe),or=`option_${String.fromCharCode(97+zt)}`,de=yt[or];if(de)return xe.debug(" Converted",Fe,"to option text:",de),de;{const _e=String.fromCharCode(65+zt);return xe.debug(" Converted",Fe,"to",_e),_e}}else{if(typeof Fe=="string"&&isNaN(parseInt(Fe)))return xe.debug(" Already formatted text:",Fe),Fe;{const zt=String.fromCharCode(65+parseInt(Fe));return xe.debug(" Converted",Fe,"to",zt),zt}}case ts.TRUE_FALSE:return Fe==="true"?"True":"False";case ts.INPUT:return Fe;case ts.MATCHING:return typeof Fe=="object"?JSON.stringify(Fe):Fe;case ts.WORD_MATCHING:return typeof Fe=="object"?JSON.stringify(Fe):Fe;case ts.DRAWING:return Fe&&Fe.trim()!==""?"Drawing submitted":"No drawing";case ts.FILL_BLANKS:return Fe;default:return xe.warn(" Unknown test type for answer formatting:",xt),Fe}},[]),hr=_.useCallback((Fe,xt)=>{const yt={id:Date.now(),message:Fe,type:xt,timestamp:new Date};P(zt=>[...zt,yt]),setTimeout(()=>{P(zt=>zt.filter(or=>or.id!==yt.id))},Km.NOTIFICATION_DURATION)},[]);_.useEffect(()=>{kr()},[kr]),_.useEffect(()=>{if(M!=="test")return;const Fe=Number(J?.allowed_time||0);if(!Fe)return;const xt=setInterval(()=>{R(yt=>{const zt=Math.max(0,yt-1);try{const or=Date.now();re.current||(re.current=or),Q.current&&localStorage.setItem(Q.current,JSON.stringify({remainingSeconds:zt,lastTickAt:new Date(or).toISOString(),startedAt:z?z.toISOString():new Date(or-(Fe-zt)*1e3).toISOString()}))}catch{}return zt===0&&ir(),zt})},1e3);return()=>clearInterval(xt)},[M,J?.allowed_time,ir,z]);const Ye=_.useCallback((Fe,xt)=>{if(!Fe)return null;const yt=(zt,or)=>{const de=[...B];de[xt]=or,Y(de),xe.debug(` Answer changed: question ${zt} = ${or}`),xe.debug(" Updated studentAnswers:",de)};switch(A.test_type){case ts.TRUE_FALSE:return c.jsx(Cde,{question:Fe,questionIndex:xt,studentAnswer:B[xt]||"",onAnswerChange:yt,mode:"student",testId:A?.test_id,testType:L,displayNumber:xt+1});case ts.MULTIPLE_CHOICE:return c.jsx(Ede,{question:Fe,questionIndex:xt,studentAnswer:B[xt]||"",onAnswerChange:yt,mode:"student",testId:A?.test_id,testType:L,displayNumber:xt+1});case ts.INPUT:return c.jsx(Nde,{question:Fe,questionIndex:xt,studentAnswer:B[xt]||"",onAnswerChange:yt,mode:"student",testId:A?.test_id,testType:L,displayNumber:xt+1});case ts.MATCHING:return xe.error("Matching test reached renderQuestion - this should not happen"),c.jsxs("div",{className:"text-center p-8",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"Matching Test"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Redirecting to matching test page..."}),c.jsx(tt,{onClick:()=>r("/student"),variant:"primary",children:"Back to Dashboard"})]});case ts.DRAWING:return c.jsx(Ide,{question:Fe,questionIndex:xt,studentAnswer:B[xt]||"",onAnswerChange:yt,mode:"student",testId:A?.test_id,testType:L});case ts.FILL_BLANKS:return xt===0?c.jsx(qde,{testText:J?.test_text,blanks:(ee||[]).map((zt,or)=>({id:zt.question_id||or+1,options:zt.blank_options||[],correct_answer:zt.correct_answers?.[0]||zt.correct_answer,question:zt.question_json||""})),separateType:J?.separate_type,testId:A?.test_id,testName:J?.test_name||A?.test_name,teacherId:J?.teacher_id||A?.teacher_id,subjectId:J?.subject_id||A?.subject_id,onTestComplete:ir,onAnswerChange:(zt,or)=>{const de=ee.findIndex(_e=>_e.question_id===zt);if(de!==-1){const _e=[...B];_e[de]=or,Y(_e),xe.debug(` Fill Blanks answer changed: question ${zt} = ${or}`)}}},`fill-blanks-${A?.test_id}-${J?.test_name}`):null;default:return c.jsx("div",{children:"Unsupported question type"})}},[A,B,L]);function ft(){return!A||!J||!ee?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:J.test_name||J.title||"Test"})}),c.jsx("div",{className:"mb-4",children:c.jsx(Vde,{answeredCount:ve(),totalQuestions:ee.length,percentage:Math.round(I),timeElapsed:Number(J?.allowed_time||0)>0?W:0,showDetails:!0})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Answer all questions below:"}),c.jsx("div",{className:"space-y-8",children:ee.map((Fe,xt)=>c.jsx("div",{className:"question-container",children:Ye(Fe,xt)},Fe.question_id||xt))})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx(tt,{variant:"primary",size:"lg",onClick:()=>We(!0),disabled:q||ve()<ee.length,loading:q,children:q?"Submitting...":`Submit Test (${ve()}/${ee.length})`})})]})}if(f)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:t?"Starting Test...":"Loading Student Tests..."})]})});if(b)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Tests Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:b}),c.jsx(tt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx(Ba,{isOpen:$e,onClose:At,title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:At,variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:ze,variant:"primary",children:"Go Back"})]})]})}),c.jsx(Ba,{isOpen:Ne,onClose:()=>We(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:()=>We(!1),variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:()=>{We(!1),ir()},variant:"primary",children:"Submit"})]})]})}),c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Test"})}),c.jsx(tt,{variant:"outline",onClick:()=>{Rt.current=null,Nt(!0)},children:"Back to Cabinet"})]})})}),st&&M==="results"&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mx-4 sm:mx-6 lg:mx-8 mt-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm text-red-700",children:[c.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",qe," times during the test."]})})]})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-y-auto",children:[!t&&M==="list"&&lt(),M==="test"&&ft(),M==="results"&&Wt()]}),M==="test"&&g&&c.jsxs("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center z-50",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-3 text-gray-700",children:"Preparing your test"}),y&&c.jsx("div",{className:"mt-3 text-sm text-gray-500",children:y})]}),c.jsx(qC,{isOpen:ce,onClose:()=>pe(!1),testType:ke?.test_type,testId:ke?.test_id,testName:ke?.test_name,questions:ke?.questions,isLoading:f}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:N.map(Fe=>c.jsx(ou,{type:Fe.type,message:Fe.message,onClose:()=>P(xt=>xt.filter(yt=>yt.id!==Fe.id))},Fe.id))})]});function lt(){return!a||a.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No active tests available for your class."})}):c.jsx("div",{className:"space-y-6",children:a.map((Fe,xt)=>c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:Fe.test_name}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Subject:"})," ",Fe.subject]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Teacher:"})," ",Fe.teacher_name]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Type:"})," ",Fe.test_type]})]}),c.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Assigned: ",new Date(Fe.assigned_at).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(tt,{variant:"outline",onClick:()=>Gt(Fe),disabled:T||f,children:"View Details"}),c.jsx(tt,{variant:"primary",onClick:()=>Zt(Fe),disabled:T||f,children:T?"Starting...":"Start Test"})]})]})},xt))})}function Wt(){if(!A||!J||!ee||!B)return null;const Fe={};return B.forEach((xt,yt)=>{if(ee[yt]){const zt=ee[yt].question_id||ee[yt].id||yt;Fe[String(zt)]=xt,xe.debug(" Converting answer:",{index:yt,questionId:zt,answer:xt,question:ee[yt]})}}),xe.debug(" Final answersObject:",Fe),xe.debug(" Questions structure:",ee.map(xt=>({id:xt.question_id,correct_answer:xt.correct_answer}))),c.jsx(M0e,{testInfo:J,questions:ee,testType:A.test_type,studentAnswers:Fe,onBackToCabinet:Me,checkAnswerCorrectness:Hp,formatStudentAnswerForDisplay:Kt,getCorrectAnswer:Tv})}},R0e=()=>{const{testId:e}=N_(),t=fl(),{user:r}=Ms(),{makeAuthenticatedRequest:n}=zl(),{showNotification:s}=si(),[a,i]=_.useState(null),[o,l]=_.useState(!0),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1);v1("matching_type",a?.id);const y=_.useCallback(()=>{if(!r?.student_id||!e)return!1;const E=`test_completed_${r.student_id}_matching_type_${e}`,N=localStorage.getItem(E)==="true",P=`retest1_${r.student_id}_matching_type_${e}`,M=localStorage.getItem(P)==="true";return N&&!M?(xe.debug(" Test already completed, redirecting to cabinet"),s("This test has already been completed","info"),t("/student"),!0):!1},[r?.student_id,e,t,s]),v=_.useCallback(async()=>{if(!e){d("Test ID is required"),l(!1);return}if(!y())try{l(!0),d(null);const E=await n(`/.netlify/functions/get-matching-type-test?test_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!E.ok)throw new Error("Failed to load test data");const N=await E.json();if(!N.success)throw new Error(N.message||"Failed to load test");const P=N.data;xe.debug(" Test data from get-matching-type-test:",P);const M=await n(`/.netlify/functions/get-test-questions?test_id=${e}&test_type=matching_type`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!M.ok)throw new Error("Failed to load test questions");const j=await M.json();if(!j.success)throw new Error(j.message||"Failed to load test questions");xe.debug(" Questions data from get-test-questions:",j);const A={id:P.test_id,test_name:P.test_name,teacher_id:P.teacher_id,subject_id:P.subject_id,image_url:P.image_url,image:null,blocks:(()=>{if(Array.isArray(j.questions)&&j.questions.length>0){const F=j.questions[0];return Array.isArray(F.blocks)?F.blocks.map((L,V)=>{let J=L.block_coordinates||L.coordinates||(typeof L.x=="number"?{x:L.x,y:L.y,width:L.width,height:L.height}:null);if(typeof J=="string")try{J=JSON.parse(J)}catch{J=null}return(!J||typeof J!="object")&&(J={x:0,y:0,width:30,height:10}),J={x:(typeof J.x=="number"?J.x:Number(J.x))||0,y:(typeof J.y=="number"?J.y:Number(J.y))||0,width:(typeof J.width=="number"?J.width:Number(J.width))||30,height:(typeof J.height=="number"?J.height:Number(J.height))||10},{id:L.block_id||L.question_id||L.id||V+1,word:L.word||`Word ${V+1}`,coordinates:J,hasArrow:!!L.has_arrow,arrow:L.arrow||null}}):j.questions.map(L=>{xe.debug(" Processing question:",L);let V;try{V=typeof L.block_coordinates=="string"?JSON.parse(L.block_coordinates):L.block_coordinates}catch{V={x:0,y:0,width:100,height:100}}return(!V||typeof V!="object")&&(V={x:0,y:0,width:100,height:100}),V={x:(typeof V.x=="number"?V.x:Number(V.x))||0,y:(typeof V.y=="number"?V.y:Number(V.y))||0,width:(typeof V.width=="number"?V.width:Number(V.width))||100,height:(typeof V.height=="number"?V.height:Number(V.height))||100},{id:L.question_id,word:L.word,coordinates:V,hasArrow:L.has_arrow,arrow:L.arrow}})}return[]})(),words:(()=>{if(Array.isArray(j.questions)&&j.questions.length>0){const F=j.questions[0];if(Array.isArray(F.words)){const L=F.words,V=Array.isArray(F.blocks)?F.blocks:[];return typeof L[0]=="string"?L.map((ne,ee)=>({id:`w_${V[ee]?.question_id||V[ee]?.block_id||j.questions[ee]?.question_id||ee+1}_${ee}`,word:String(ne),blockId:null,isPlaced:!1,isCorrect:!1})):L.map((ne,ee)=>({id:`w_${ne.question_id||ne.id||ee+1}_${ee}`,word:ne.word||String(ne.text||""),blockId:null,isPlaced:!1,isCorrect:!1}))}return j.questions.map(L=>({id:`w_${L.question_id}`,word:L.word,blockId:null,isPlaced:!1,isCorrect:!1}))}return[]})(),arrows:P.arrows?P.arrows.map(F=>(xe.debug(" Processing arrow:",F),{id:F.id,questionId:F.question_id,blockId:F.block_id||F.question_id,start:{x:Number(F.start_x)||0,y:Number(F.start_y)||0},end:{x:Number(F.end_x)||0,y:Number(F.end_y)||0},rel_start_x:F.rel_start_x!==null?Number(F.rel_start_x):null,rel_start_y:F.rel_start_y!==null?Number(F.rel_start_y):null,rel_end_x:F.rel_end_x!==null?Number(F.rel_end_x):null,rel_end_y:F.rel_end_y!==null?Number(F.rel_end_y):null,image_width:F.image_width?Number(F.image_width):null,image_height:F.image_height?Number(F.image_height):null,style:(typeof F.style=="string"?JSON.parse(F.style):F.style)||{color:"#dc3545",thickness:3}})):[]};if(P.image_url){const F=new Image;F.crossOrigin="anonymous",F.onload=()=>{A.image=F,i(A),l(!1)},F.onerror=()=>{xe.warn("Failed to load test image"),i(A),l(!1)},F.src=P.image_url}else i(A),l(!1)}catch(E){xe.error("Error loading test data:",E),d(E.message||"Failed to load test"),l(!1)}},[e,n]);_.useEffect(()=>{r?.student_id&&v()},[v,r?.student_id]);const T=_.useCallback(async E=>{xe.debug("Test completed:",E),s("Test completed successfully!","success");const N=parseInt(E)||0,P=a?.blocks?.length||a?.words?.length||0,M=P>0?Math.round(N/P*100):0,j={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"matching_type",score:N,totalQuestions:P,percentage:M,passed:M>=60,questionAnalysis:a?.questions?.map((A,F)=>({questionNumber:F+1,isCorrect:F<N,userAnswer:F<N?`Matched: ${A.word}`:"Not answered",correctAnswer:`Match: ${A.word}`}))||Array.from({length:P},(A,F)=>({questionNumber:F+1,isCorrect:F<N,userAnswer:F<N?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};xe.debug(" Using test results data:",j),h(j),x(!0)},[a,s]),k=_.useCallback(()=>{t("/student")},[t]),b=_.useCallback(()=>{x(!1),h(null),v()},[v]);return o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx(Ht,{className:"max-w-md w-full",children:c.jsxs(Ht.Body,{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading test..."})]})})}):u?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx(Ht,{className:"max-w-md w-full",children:c.jsxs(Ht.Body,{className:"text-center",children:[c.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-4",children:u}),c.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})}):a?g&&f?c.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:c.jsx(b2,{testResults:f,onBackToCabinet:k,onRetakeTest:b,isLoading:!1})}):c.jsx(Ade,{testData:a,onTestComplete:T,onBackToCabinet:k}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx(Ht,{className:"max-w-md w-full",children:c.jsxs(Ht.Body,{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load test data"}),c.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})})},I0e=()=>{const{testId:e}=N_(),t=fl(),{user:r}=Ms(),{makeAuthenticatedRequest:n}=zl(),{showNotification:s}=si(),[a,i]=_.useState(null),[o,l]=_.useState(!0),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1),y=_.useCallback(()=>{if(!r?.student_id||!e)return!1;const b=`test_completed_${r.student_id}_word_matching_${e}`,E=`retest1_${r.student_id}_word_matching_${e}`;return localStorage.getItem(E)==="true"?!1:localStorage.getItem(b)==="true"},[r?.student_id,e]),v=_.useCallback(async()=>{if(!e){d("Test ID is required"),l(!1);return}if(y()){s("This test has already been completed","warning"),t("/student");return}l(!0),d(null);try{const b=`word_matching_test_${e}`,E=Ta(b);if(E){if(xe.debug(" Word matching test loaded from cache:",E),E.id){let M=E,j=Array.isArray(M.correctPairs)?M.correctPairs:M.correctPairs&&typeof M.correctPairs=="object"?Object.keys(M.correctPairs).map(A=>[Number(A),M.correctPairs[A]]).sort((A,F)=>A[0]-F[0]).map(([,A])=>A):null;if(Array.isArray(M.leftWords)&&Array.isArray(M.rightWords)&&Array.isArray(j)){const A=M.rightWords.map((ee,ie)=>ie),F=M.leftWords.map((ee,ie)=>ie);for(let ee=A.length-1;ee>0;ee--){const ie=Math.floor(Math.random()*(ee+1));[A[ee],A[ie]]=[A[ie],A[ee]]}for(let ee=F.length-1;ee>0;ee--){const ie=Math.floor(Math.random()*(ee+1));[F[ee],F[ie]]=[F[ie],F[ee]]}const L=A.map(ee=>M.rightWords[ee]),V=F.map(ee=>M.leftWords[ee]),J=new Map(A.map((ee,ie)=>[ee,ie])),ne=F.map(ee=>{const ie=j[ee];return J.get(ie)});M={...M,leftWords:V,rightWords:L,correctPairs:ne}}i(M)}else{let j={id:E.test_id,test_id:E.test_id,test_name:E.test_name,teacher_id:E.teacher_id,subject_id:E.subject_id,num_questions:E.num_questions,interaction_type:E.interaction_type,passing_score:E.passing_score,allowed_time:E.allowed_time,created_at:E.created_at,updated_at:E.updated_at,leftWords:E.leftWords,rightWords:E.rightWords,correctPairs:E.correctPairs,originalPairs:E.originalPairs},A=Array.isArray(j.correctPairs)?j.correctPairs:j.correctPairs&&typeof j.correctPairs=="object"?Object.keys(j.correctPairs).map(F=>[Number(F),j.correctPairs[F]]).sort((F,L)=>F[0]-L[0]).map(([,F])=>F):null;if(Array.isArray(j.leftWords)&&Array.isArray(j.rightWords)&&Array.isArray(A)){const F=j.rightWords.map((ie,B)=>B),L=j.leftWords.map((ie,B)=>B);for(let ie=F.length-1;ie>0;ie--){const B=Math.floor(Math.random()*(ie+1));[F[ie],F[B]]=[F[B],F[ie]]}for(let ie=L.length-1;ie>0;ie--){const B=Math.floor(Math.random()*(ie+1));[L[ie],L[B]]=[L[B],L[ie]]}const V=F.map(ie=>j.rightWords[ie]),J=L.map(ie=>j.leftWords[ie]),ne=new Map(F.map((ie,B)=>[ie,B])),ee=L.map(ie=>{const B=A[ie];return ne.get(B)});j={...j,leftWords:J,rightWords:V,correctPairs:ee}}i(j)}l(!1);return}const P=await(await n(`/.netlify/functions/get-word-matching-test?test_id=${e}`)).json();if(P.success){const M={id:P.data.test_id,test_id:P.data.test_id,test_name:P.data.test_name,teacher_id:P.data.teacher_id,subject_id:P.data.subject_id,num_questions:P.data.num_questions,interaction_type:P.data.interaction_type,passing_score:P.data.passing_score,allowed_time:P.data.allowed_time,created_at:P.data.created_at,updated_at:P.data.updated_at,leftWords:P.data.leftWords,rightWords:P.data.rightWords,correctPairs:P.data.correctPairs,originalPairs:P.data.originalPairs};let j=M,A=Array.isArray(j.correctPairs)?j.correctPairs:j.correctPairs&&typeof j.correctPairs=="object"?Object.keys(j.correctPairs).map(F=>[Number(F),j.correctPairs[F]]).sort((F,L)=>F[0]-L[0]).map(([,F])=>F):null;if(Array.isArray(j.leftWords)&&Array.isArray(j.rightWords)&&Array.isArray(A)){const F=j.rightWords.map((ie,B)=>B),L=j.leftWords.map((ie,B)=>B);for(let ie=F.length-1;ie>0;ie--){const B=Math.floor(Math.random()*(ie+1));[F[ie],F[B]]=[F[B],F[ie]]}for(let ie=L.length-1;ie>0;ie--){const B=Math.floor(Math.random()*(ie+1));[L[ie],L[B]]=[L[B],L[ie]]}const V=F.map(ie=>j.rightWords[ie]),J=L.map(ie=>j.leftWords[ie]),ne=new Map(F.map((ie,B)=>[ie,B])),ee=L.map(ie=>{const B=A[ie];return ne.get(B)});j={...j,leftWords:J,rightWords:V,correctPairs:ee}}i(j),Bs(b,j,Cs.word_matching_test),xe.debug(" Word matching test loaded from API and cached:",M)}else throw new Error(P.message||"Failed to load test")}catch(b){xe.error("Error loading word matching test:",b),d(b.message),s("Failed to load test: "+b.message,"error")}finally{l(!1)}},[e,y,n,s,t]),T=_.useCallback(async b=>{xe.debug("Test completed:",b),s("Test completed successfully!","success");const E=typeof b=="object"?parseInt(b.score)||0:parseInt(b)||0,N=typeof b=="object"&&b.caught_cheating||!1,P=typeof b=="object"&&b.visibility_change_times||0,M=a?.num_questions||0,j=M>0?Math.round(E/M*100):0,A={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"word_matching",score:E,totalQuestions:M,percentage:j,passed:j>=60,questionAnalysis:Array.isArray(a?.correctPairs)?a.correctPairs.map((F,L)=>({questionNumber:L+1,isCorrect:L<E,userAnswer:L<E?`${F.left}  ${F.right}`:"Not answered",correctAnswer:`${F.left}  ${F.right}`})):Array.from({length:M},(F,L)=>({questionNumber:L+1,isCorrect:L<E,userAnswer:L<E?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:N,visibility_change_times:P};xe.debug(" Using test results data:",A),h(A),x(!0)},[a,s]),k=_.useCallback(()=>{t("/student")},[t]);return _.useEffect(()=>{v()},[v]),o?c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsxs(Ht,{className:"p-8 text-center",children:[c.jsx(fn,{size:"lg",className:"mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading word matching test..."})]})}):u?c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx(Ht,{className:"p-8 text-center",children:c.jsxs("div",{className:"text-red-600 mb-4",children:[c.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-4",children:u}),c.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})}):a?g&&f?c.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:c.jsx(b2,{testResults:f,onBackToCabinet:()=>{h(null),x(!1),t("/student")},onRetakeTest:(b,E)=>{h(null),x(!1),v()},isLoading:!1,caught_cheating:f.caught_cheating||!1,visibility_change_times:f.visibility_change_times||0})}):c.jsx(dt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"min-h-screen bg-gray-50 py-8",children:c.jsx(Mde,{testData:a,onTestComplete:T,onBackToCabinet:k})}):c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx(Ht,{className:"p-8 text-center",children:c.jsxs("div",{className:"text-gray-600 mb-4",children:[c.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Not Found"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"The requested test could not be found."}),c.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})})},L0e=_.forwardRef(({onRecordingComplete:e,minDuration:t=0,maxDuration:r=600,minWords:n=50,maxAttempts:s=3,currentAttempt:a=1},i)=>{const[o,l]=_.useState(!1),[u,d]=_.useState(!1),[f,h]=_.useState(0),[g,x]=_.useState(null),[y,v]=_.useState(null),[T,k]=_.useState("good"),b=_.useRef(null),E=_.useRef([]),N=_.useRef(null),P=_.useRef(null),M=_.useRef(null),j=_.useRef(null),A=_.useRef(null);_.useImperativeHandle(i,()=>({startRecording:()=>F(),stopRecording:()=>L(),pauseRecording:()=>V(),resumeRecording:()=>J()}));const F=_.useCallback(async()=>{try{if(v(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");if(!window.isSecureContext&&!window.location.hostname.includes("localhost"))throw new Error("Microphone access requires HTTPS. Please use a secure connection.");const Y=window.AudioContext||window.webkitAudioContext;M.current||(M.current=new Y),M.current.state!=="running"&&await M.current.resume().catch(()=>{}),console.log(" Requesting microphone permission...");const I=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});console.log(" Microphone permission granted"),N.current=I;try{let G=document.getElementById("ios-audio-sink");G||(G=document.createElement("audio"),G.id="ios-audio-sink",G.muted=!0,G.playsInline=!0,G.style.display="none",document.body.appendChild(G)),G.srcObject=I,await G.play().catch(()=>{})}catch{}const H=M.current.createAnalyser();M.current.createMediaStreamSource(I).connect(H),H.fftSize=256,j.current=H,ne();let R="audio/webm;codecs=opus";typeof MediaRecorder<"u"&&MediaRecorder.isTypeSupported&&!MediaRecorder.isTypeSupported(R)&&(MediaRecorder.isTypeSupported("audio/mp4")?R="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?R="audio/aac":R="");const z=new MediaRecorder(I,R?{mimeType:R}:void 0);b.current=z,E.current=[],z.ondataavailable=G=>{G.data.size>0&&E.current.push(G.data)},z.onstop=()=>{const G=R&&R.startsWith("audio/")?R:"audio/webm",Q=new Blob(E.current,{type:G});x(Q),e(Q,f),N.current&&N.current.getTracks().forEach(re=>re.stop()),A.current&&cancelAnimationFrame(A.current)},z.start(1e3),l(!0),h(0),P.current=setInterval(()=>{h(G=>{const Q=G+1;return Q>=r&&L(),Q})},1e3)}catch(Y){console.error("Error starting recording:",Y);const I=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;Y.name==="NotAllowedError"?v(I?"Microphone access denied. Please go to Settings > Safari > Microphone and allow access, then refresh the page.":"Microphone access denied. Please allow microphone access in your browser settings and try again."):Y.name==="NotFoundError"?v("No microphone found. Please connect a microphone and try again."):Y.name==="NotSupportedError"?v("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox."):Y.message.includes("HTTPS")?v("Microphone access requires HTTPS. Please use a secure connection."):v(`Failed to access microphone: ${Y.message}`)}},[r]),L=_.useCallback(()=>{if(b.current&&o&&(b.current.stop(),l(!1),d(!1),P.current&&clearInterval(P.current),f<t)){v(`Recording must be at least ${t} seconds long.`);return}},[o,f,t,g,e]),V=_.useCallback(()=>{b.current&&o&&!u&&(b.current.pause(),d(!0),P.current&&clearInterval(P.current))},[o,u]),J=_.useCallback(()=>{b.current&&o&&u&&(b.current.resume(),d(!1),P.current=setInterval(()=>{h(Y=>{const I=Y+1;return I>=r&&L(),I})},1e3))},[o,u,r,L]),ne=_.useCallback(()=>{if(!j.current)return;const Y=j.current,I=new Uint8Array(Y.frequencyBinCount),H=()=>{Y.getByteFrequencyData(I);const W=I.reduce((R,z)=>R+z,0)/I.length;W<10?k("poor"):W<30?k("fair"):k("good"),o&&(A.current=requestAnimationFrame(H))};H()},[o]),ee=Y=>{const I=Math.floor(Y/60),H=Y%60;return`${I}:${H.toString().padStart(2,"0")}`},ie=()=>{switch(T){case"poor":return"text-red-600";case"fair":return"text-yellow-600";case"good":return"text-green-600";default:return"text-gray-600"}},B=()=>{switch(T){case"poor":return"Poor audio quality - speak closer to microphone";case"fair":return"Fair audio quality - good for recording";case"good":return"Excellent audio quality";default:return"Monitoring audio quality..."}};return c.jsxs("div",{className:"audio-recorder bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Record Your Response"}),c.jsx("p",{className:"text-gray-600",children:"Speak clearly and at a normal pace. You can pause and resume if needed."})]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:ee(f)}),c.jsx("div",{className:`text-sm ${ie()}`,children:B()}),u&&c.jsx("div",{className:"text-yellow-600 font-semibold mt-2",children:" Recording Paused"})]}),o&&c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"flex justify-center items-center space-x-1 h-8",children:Array.from({length:20},(Y,I)=>c.jsx("div",{className:"bg-blue-400 rounded-sm",style:{width:"4px",height:`${Math.random()*20+4}px`,animation:"pulse 0.5s ease-in-out infinite"}},I))})}),c.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:o?c.jsxs(c.Fragment,{children:[u?c.jsxs("button",{onClick:J,className:"w-full sm:w-auto bg-green-600 text-white px-6 py-4 rounded-full hover:bg-green-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Resume"})]}):c.jsxs("button",{onClick:V,className:"w-full sm:w-auto bg-yellow-600 text-white px-6 py-4 rounded-full hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Pause"})]}),c.jsxs("button",{onClick:L,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-4 rounded-full hover:bg-gray-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Stop & Submit"})]})]}):c.jsxs("button",{onClick:F,className:"w-full sm:w-auto bg-red-600 text-white px-6 py-4 rounded-full hover:bg-red-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Start Recording"})]})}),y&&c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:y})}),c.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Attempt ",a," of ",s,a<s&&c.jsx("span",{className:"ml-2 text-blue-600",children:"(You can re-record if needed)"})]})]})}),pH=({audioBlob:e,audioUrl:t,recordingTime:r,className:n=""})=>{const[s,a]=_.useState(!1),[i,o]=_.useState(0),[l,u]=_.useState(0),[d,f]=_.useState(1),[h,g]=_.useState(1),[x,y]=_.useState(!0),[v,T]=_.useState(""),[k,b]=_.useState(!1),[E,N]=_.useState(null),[P,M]=_.useState(!1),j=_.useRef(null),A=_.useRef(null),F=_.useRef(!1);_.useEffect(()=>()=>{F.current=!0},[]),_.useEffect(()=>{let I=!1;if(t)I||T(t);else if(e){if(!e||e.size===0){I||y(!1);return}if(!(e instanceof Blob)){console.error("audioBlob is not a Blob:",typeof e,e),I||y(!1);return}const H=URL.createObjectURL(e);return I||T(H),()=>{I=!0,URL.revokeObjectURL(H)}}return()=>{I=!0}},[e,t]),_.useEffect(()=>{let I=!1;const H=R=>{try{const z=new URL(R);return/\/storage\/v1\/object\/public\//.test(z.pathname)}catch{return!1}};async function W(R){if(!R||P||/\/object\/sign\//.test(R)||!H(R))return R;try{const G=new URL(R).pathname.replace(/^\/storage\/v1\/object\/public\//,""),Q=G.split("/")[0],re=G.substring(Q.length+1),q=await fetch(`/.netlify/functions/get-speaking-test-new?action=sign-audio&bucket=${encodeURIComponent(Q)}&file_path=${encodeURIComponent(re)}`);if(q.ok){const{url:se}=await q.json();if(!I&&!F.current){M(!0);try{await fetch(se,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}T(se)}return se}}catch{}return R}return(async()=>{if(t){const R=await W(t);try{await fetch(R,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}!I&&!F.current&&!P&&T(R)}})(),()=>{I=!0}},[t,P]),_.useEffect(()=>{let I=!1;return v&&(I||(b(!1),N(null),y(!0))),()=>{I=!0}},[v]),_.useEffect(()=>{if(j.current&&v){const I=j.current;let H=!1;try{I.src=v}catch{}I.load();const W=()=>{if(H||F.current)return;let le=I.duration;if(le===1/0)try{I.currentTime=1e101,I.ontimeupdate=()=>{if(H||F.current)return;I.ontimeupdate=null;const ye=I.duration;H||(u(isFinite(ye)&&ye>0?ye:0),I.currentTime=0,y(!1))};return}catch(ye){console.warn("Seek trick failed:",ye)}if(isNaN(le)||!isFinite(le)||le<=0){const ye=I.seekable&&I.seekable.length>0&&isFinite(I.seekable.end(0)),je=!ye&&I.buffered&&I.buffered.length>0&&isFinite(I.buffered.end(I.buffered.length-1));ye?le=I.seekable.end(0):je&&(le=I.buffered.end(I.buffered.length-1))}isNaN(le)||!isFinite(le)||le<=0?(console.warn("Invalid audio duration after fallbacks:",le),r&&r>0?H||u(r):H||u(0)):H||u(le),H||y(!1)},R=()=>{H||F.current||W()},z=()=>{H||F.current||W()},G=()=>{H||F.current||W()},Q=()=>{H||F.current||W()},re=()=>{H||F.current||o(I.currentTime)},q=()=>{H||F.current||(a(!1),o(0))},se=()=>{H||F.current||a(!0)},ce=()=>{H||F.current||a(!1)},pe=le=>{if(H||F.current)return;console.error("Audio loading error:",le),console.error("Audio error details:",{error:I.error,networkState:I.networkState,readyState:I.readyState,src:I.src,currentSrc:I.currentSrc});const ye=I.error?.code;ye===4&&b(!0),N(I.error||{code:ye}),y(!1)},ke=setTimeout(()=>{H||F.current||I.readyState===0&&y(!1)},6e3);return I.addEventListener("loadedmetadata",R),I.addEventListener("durationchange",z),I.addEventListener("canplay",G),I.addEventListener("canplaythrough",Q),I.addEventListener("timeupdate",re),I.addEventListener("ended",q),I.addEventListener("play",se),I.addEventListener("pause",ce),I.addEventListener("error",pe),()=>{H=!0,clearTimeout(ke),I.removeEventListener("loadedmetadata",R),I.removeEventListener("durationchange",z),I.removeEventListener("canplay",G),I.removeEventListener("canplaythrough",Q),I.removeEventListener("timeupdate",re),I.removeEventListener("ended",q),I.removeEventListener("play",se),I.removeEventListener("pause",ce),I.removeEventListener("error",pe),I.pause(),I.src="",I.load()}}},[v,r]),_.useEffect(()=>{let I=!1;return r&&r>0&&(isNaN(l)||!isFinite(l)||l<=0)&&(I||u(r)),()=>{I=!0}},[r,l]);const L=()=>{j.current&&(s?j.current.pause():j.current.play().catch(I=>{console.error("Play failed:",I)}))},V=I=>{if(j.current&&A.current&&l>0){const H=A.current.getBoundingClientRect(),W=I.clientX-H.left,R=H.width,z=Math.max(0,Math.min(l,W/R*l));isFinite(z)&&z>=0&&(j.current.currentTime=z,o(z))}},J=I=>{const H=parseFloat(I.target.value);f(H),j.current&&(j.current.volume=H)},ne=I=>{const H=parseFloat(I.target.value);g(H),j.current&&(j.current.playbackRate=H)},ee=I=>{if(isNaN(I))return"0:00";const H=Math.floor(I/60),W=Math.floor(I%60);return`${H}:${W.toString().padStart(2,"0")}`};if(!e&&!t)return c.jsx("div",{className:`audio-player ${n}`,children:c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No audio available"})});const B=(I=>{try{const W=(I||"").toLowerCase().split("?")[0].split("#")[0];return W.endsWith(".webm")?"audio/webm":W.endsWith(".mp3")?"audio/mpeg":W.endsWith(".m4a")?"audio/mp4":W.endsWith(".aac")?"audio/aac":W.endsWith(".wav")?"audio/wav":void 0}catch{return}})(v||t),Y=Ls.useMemo(()=>typeof window>"u"?!0:document.createElement("audio").canPlayType("audio/webm")!=="",[]);return c.jsxs("div",{className:`audio-player bg-gray-50 rounded-lg p-4 ${n}`,children:[c.jsx("audio",{ref:j,preload:"metadata",controls:!1,style:{display:"none"},crossOrigin:"anonymous",children:c.jsx("source",{src:v,type:B})}),x?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading audio..."})]}):k?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-sm text-red-600",children:"This audio format isn't supported by your browser."}),v?c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,B?c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",B]}):null,c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Browser WebM support: ",Y?"Yes":"No",!Y&&" - Try using Chrome, Firefox, or Edge"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Preferred format: WebM"})]}):E?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-sm text-red-600",children:"Playback failed. Please try opening the audio directly."}),v?c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,B?c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",B]}):null]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{ref:A,className:"w-full bg-gray-200 rounded-full h-3 cursor-pointer hover:h-4 transition-all min-h-[24px]",onClick:V,children:c.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${i/l*100}%`}})}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2 font-medium",children:[c.jsx("span",{children:ee(i)}),c.jsx("span",{children:ee(l)})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:L,className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:s?c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.617 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.617l3.766-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d,onChange:J,className:"w-24 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer min-h-[20px]"}),c.jsxs("span",{className:"text-sm text-gray-600 w-10 font-medium",children:[Math.round(d*100),"%"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Speed:"}),c.jsxs("select",{value:h,onChange:ne,className:"text-sm border border-gray-300 rounded px-2 py-1",children:[c.jsx("option",{value:"0.5",children:"0.5x"}),c.jsx("option",{value:"0.75",children:"0.75x"}),c.jsx("option",{value:"1",children:"1x"}),c.jsx("option",{value:"1.25",children:"1.25x"}),c.jsx("option",{value:"1.5",children:"1.5x"}),c.jsx("option",{value:"2",children:"2x"})]})]})]})]})]})},B0e=({transcript:e,scores:t,audioBlob:r,recordingTime:n,onReRecord:s,onFinalSubmit:a,canReRecord:i,attemptNumber:o,maxAttempts:l,isSubmitting:u=!1})=>{const[d,f]=_.useState(!1);console.log(" FeedbackDisplay received recordingTime:",n);const h=(v,T)=>{const k=v/T*100;return k>=80?"text-green-600":k>=60?"text-yellow-600":"text-red-600"},g=(v,T)=>{const k=v/T*100;return k>=90?"A+":k>=80?"A":k>=70?"B":k>=60?"C":k>=50?"D":"F"},x=()=>g(t?.overall_score||0,100),y=()=>h(t?.overall_score||0,100);return console.log(" FeedbackDisplay received scores:",t),console.log(" Individual score values:",{grammar_score:t?.grammar_score,vocabulary_score:t?.vocabulary_score,pronunciation_score:t?.pronunciation_score,fluency_score:t?.fluency_score,content_score:t?.content_score}),c.jsxs("div",{className:"feedback-display bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Speaking Test Results"}),c.jsx("p",{className:"text-gray-600",children:"Review your performance and decide whether to submit or re-record."})]}),c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-3 sm:p-6 rounded-lg mb-6",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-4xl font-bold ${y()}`,children:[t?.overall_score||0,"/100"]}),c.jsxs("div",{className:`text-2xl font-semibold ${y()} mt-2`,children:["Grade: ",x()]}),c.jsx("div",{className:"text-gray-600 mt-2",children:t?.overall_score>=80?"Excellent work!":t?.overall_score>=60?"Good job!":t?.overall_score>=50?"Not bad, but could be better.":"Keep practicing!"})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Grammar"}),c.jsxs("span",{className:`font-bold ${h(t?.grammar_score||0,25)}`,children:[t?.grammar_score||0,"/25"]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t?.grammar_mistakes||0," mistakes found"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Vocabulary"}),c.jsxs("span",{className:`font-bold ${h(t?.vocabulary_score||0,20)}`,children:[t?.vocabulary_score||0,"/20"]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t?.vocabulary_mistakes||0," vocabulary issues"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Pronunciation"}),c.jsxs("span",{className:`font-bold ${h(t?.pronunciation_score||0,15)}`,children:[t?.pronunciation_score||0,"/15"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Clarity and accuracy"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Fluency"}),c.jsxs("span",{className:`font-bold ${h(t?.fluency_score||0,20)}`,children:[t?.fluency_score||0,"/20"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Pace, pauses, and flow"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Content"}),c.jsxs("span",{className:`font-bold ${h(t?.content_score||0,20)}`,children:[t?.content_score||0,"/20"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"How well addressed the prompt"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${Math.min((t?.content_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Word Count"}),c.jsxs("span",{className:"font-bold text-gray-700",children:[t?.word_count||0," words"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total words spoken"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${Math.min((t?.word_count||0)/100*100,100)}%`}})})]})]}),r&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Recording"}),c.jsx(pH,{audioBlob:r,recordingTime:n})]}),t?.feedback&&c.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-blue-50 p-3 sm:p-6 rounded-lg border border-green-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("span",{className:"text-green-600 text-2xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-green-800 mb-3 text-lg",children:"AI Feedback"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.feedback})]})]})}),t?.improved_transcript&&c.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[c.jsx("span",{className:"text-green-600 text-lg",children:""}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Improved Version"}),c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Here's how your response could be improved with better grammar and vocabulary:"})]})]}),c.jsx("div",{className:"bg-white border border-green-200 rounded p-3",children:c.jsx("p",{className:"text-gray-800 leading-relaxed",children:t.improved_transcript})})]}),c.jsx("div",{className:"mb-6",children:c.jsx("button",{onClick:()=>f(!d),className:"text-blue-600 hover:text-blue-800 text-sm",children:d?"Hide Details":"Show Details"})}),d&&c.jsxs("div",{className:"mb-6 bg-blue-50 p-3 sm:p-4 rounded-lg",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Detailed Analysis"}),c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Word Count Analysis:"}),c.jsxs("span",{className:"ml-2 text-gray-700",children:["You spoke ",t?.word_count||0," words.",t?.word_count>=50?" Great job meeting the minimum requirement!":" Consider speaking more to meet the minimum word requirement."]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Grammar Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.grammar_mistakes===0?"Perfect grammar!":`Found ${t?.grammar_mistakes||0} grammar ${t?.grammar_mistakes===1?"mistake":"mistakes"}.`}),t?.grammar_corrections&&t.grammar_corrections.length>0&&c.jsx("div",{className:"mt-2 space-y-2",children:t.grammar_corrections.map((v,T)=>c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-red-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-red-600",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),c.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[c.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Vocabulary Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.vocabulary_mistakes===0?"Excellent vocabulary usage!":`Found ${t?.vocabulary_mistakes||0} vocabulary ${t?.vocabulary_mistakes===1?"issue":"issues"}.`}),t?.vocabulary_corrections&&t.vocabulary_corrections.length>0&&c.jsx("div",{className:"mt-2 space-y-2",children:t.vocabulary_corrections.map((v,T)=>c.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-purple-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-purple-600",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),c.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[c.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Pronunciation Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.pronunciation_corrections&&t.pronunciation_corrections.length>0?`Found ${t.pronunciation_corrections.length} pronunciation ${t.pronunciation_corrections.length===1?"tip":"tips"} to help improve clarity.`:"Great pronunciation! Your speech was clear and easy to understand."})]}),t?.pronunciation_corrections&&t.pronunciation_corrections.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Pronunciation Tips:"}),c.jsx("div",{className:"mt-2 space-y-2",children:t.pronunciation_corrections.map((v,T)=>c.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-orange-600 font-mono text-sm",children:""}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-orange-700",children:v.word}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-700",children:v.correction})]})})]})},T))})]}),t?.language_use_corrections&&t.language_use_corrections.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Language Use Suggestions:"}),c.jsx("div",{className:"mt-2 space-y-2",children:t.language_use_corrections.map((v,T)=>c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-blue-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-blue-700",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-700",children:v.suggestion})]}),v.explanation&&c.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:[c.jsx("strong",{children:"Why:"})," ",v.explanation]})]})]})},T))})]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Attempt ",o," of ",l]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[i&&c.jsxs("button",{onClick:s,className:"w-full sm:w-auto bg-yellow-600 text-white px-4 py-2.5 rounded-lg hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Re-record"})]}),c.jsx("button",{onClick:a,disabled:u,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium ${u?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white`,children:u?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Submitting..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Submit Final"})]})})]}),!i&&c.jsx("div",{className:"mt-4 p-2 sm:p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-yellow-800 text-sm",children:[c.jsx("strong",{children:"Maximum attempts reached."}),' This is your final attempt. Click "Submit Final" to complete the test.']})})]})},$0e=({testData:e,onComplete:t,onExit:r,onTestComplete:n})=>{const[s,a]=_.useState("recording"),[i,o]=_.useState(null),[l,u]=_.useState(""),[d,f]=_.useState(null),[h,g]=_.useState(!1),[x,y]=_.useState(!1),[v,T]=_.useState(!1),[k,b]=_.useState(null),[E,N]=_.useState(1),[P]=_.useState(e.max_attempts||3),[M,j]=_.useState(!1),[A,F]=_.useState(0),[L,V]=_.useState(!1),[J,ne]=_.useState(!0),ee=_.useRef(null),[ie,B]=_.useState(0),[Y,I]=_.useState(null),H=zl(),{user:W}=Ms(),{makeAuthenticatedRequest:R}=H,z=_.useRef(null);a3(J,_.useCallback(({confirm:Ne,cancel:We})=>{ee.current={confirm:Ne,cancel:We},T(!0)},[])),_.useEffect(()=>{s!=="completed"?ne(!0):(ne(!1),ee.current=null)},[s]),_.useEffect(()=>{if(e?.test_id&&W?.student_id){const Ne=`speaking_attempts_${W.student_id}_${e.test_id}`,We=localStorage.getItem(Ne);if(We){const $e=parseInt(We,10);$e>0&&$e<=P&&(N($e),console.log(" Loaded attempts from localStorage:",$e))}}},[e,W,P]),_.useEffect(()=>{if(e&&!Y){const Ne=new Date;I(Ne),console.log(" Speaking test timer started at:",Ne.toISOString())}},[e,Y]),_.useEffect(()=>{let Ne=0;s==="recording"?Ne=25:s==="processing"?Ne=50:s==="feedback"?Ne=75:s==="completed"&&(Ne=100),B(Ne)},[s]),_.useEffect(()=>{(async()=>{try{if(!window.isSecureContext&&!window.location.hostname.includes("localhost")){b("Microphone access requires HTTPS. Please use a secure connection.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){b("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");return}if(navigator.permissions)try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(j(!0),console.log(" Microphone permission already granted")):console.log(" Microphone permission not yet granted - user will need to click record button")}catch(We){console.log(" Could not check microphone permission status:",We)}}catch(We){console.error(" Error checking microphone permission:",We)}})()},[]),_.useEffect(()=>{const Ne=setInterval(()=>{i&&s==="recording"&&G()},3e4);return()=>clearInterval(Ne)},[i,s]);const G=_.useCallback(async()=>{try{const Ne={test_id:e.test_id,audio_blob:i?await Q(i):null,attempt_number:E,step:s,timestamp:new Date().toISOString()};localStorage.setItem(`speaking_progress_${e.test_id}`,JSON.stringify(Ne))}catch(Ne){console.error("Failed to save progress:",Ne)}},[e.test_id,i,E,s]),Q=Ne=>new Promise((We,$e)=>{const Nt=new FileReader;Nt.onloadend=()=>{const Et=Nt.result.split(",")[1];We(Et)},Nt.onerror=$e,Nt.readAsDataURL(Ne)}),re=_.useCallback(Ne=>{if(e?.test_id&&W?.student_id){const We=`speaking_attempts_${W.student_id}_${e.test_id}`;localStorage.setItem(We,Ne.toString()),console.log(" Saved attempts to localStorage:",Ne)}},[e,W]),q=_.useCallback(async(Ne,We,$e,Nt,He)=>{if(e?.test_id&&W?.student_id)try{const{setCachedData:Et,CACHE_TTL:Rt}=await Qa(async()=>{const{setCachedData:dr,CACHE_TTL:wt}=await Promise.resolve().then(()=>dp);return{setCachedData:dr,CACHE_TTL:wt}},void 0),Mt=`speaking_test_data_${W.student_id}_${e.test_id}`,wr={audioBlob:Ne?await Q(Ne):null,transcript:We,scores:$e,recordingTime:Nt,currentStep:He,timestamp:Date.now()};Et(Mt,wr,Rt.speaking_test_data),console.log(" Saved speaking test data to cache:",Mt)}catch(Et){console.error("Failed to save speaking test data to cache:",Et)}},[e,W]),se=_.useCallback(async()=>{if(e?.test_id&&W?.student_id)try{const{getCachedData:Ne}=await Qa(async()=>{const{getCachedData:Nt}=await Promise.resolve().then(()=>dp);return{getCachedData:Nt}},void 0),We=`speaking_test_data_${W.student_id}_${e.test_id}`,$e=Ne(We);if($e){if(console.log(" Loaded speaking test data from cache:",$e),$e.audioBlob){const Nt=new Blob([Uint8Array.from(atob($e.audioBlob),He=>He.charCodeAt(0))],{type:"audio/webm"});o(Nt)}return $e.transcript&&u($e.transcript),$e.scores&&f($e.scores),$e.recordingTime&&F($e.recordingTime),$e.currentStep&&a($e.currentStep),!0}}catch(Ne){console.error("Failed to load speaking test data from cache:",Ne)}return!1},[e,W]);_.useEffect(()=>{if(e?.test_id&&W?.student_id){try{const Ne=W.student_id,We=`retest_assignment_id_${Ne}_speaking_${e.test_id}`,$e=`retest_in_progress_${Ne}_speaking_${e.test_id}`;if(!!localStorage.getItem(We)||!!localStorage.getItem($e)){const He=`speaking_test_data_${Ne}_${e.test_id}`,Et=`anti_cheating_${Ne}_speaking_${e.test_id}`,Rt=`speaking_progress_${e.test_id}`;localStorage.removeItem(He),localStorage.removeItem(Et),localStorage.removeItem(Rt),console.log(" Cleared speaking per-test cache for retest start:",{cacheKey:He,antiCheatKey:Et,progressKey:Rt})}}catch{}se()}},[e,W,se]),_.useEffect(()=>{e?.test_id&&W?.student_id&&(i||l||d)&&q(i,l,d,A,s)},[i,l,d,A,s,e,W,q]);const ce=_.useCallback(async(Ne,We)=>{if(L){console.log(" Already processing, skipping duplicate call");return}console.log(" Recording completed, duration:",We),V(!0),o(Ne),F(We),a("processing"),b(null);try{const $e=await Q(Ne),Nt=new Date,He=e.start_time?Math.round((Nt-e.start_time)/1e3):0,Et=e.start_time?new Date(e.start_time).toISOString():Nt.toISOString(),Rt=W.student_id,Mt=`retest_assignment_id_${Rt}_speaking_${e.test_id}`,ur=localStorage.getItem(Mt),wr={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Rt,question_id:e.question_id||1,audio_blob:$e,audio_duration:Ne.duration||0,time_taken:He,started_at:Et,submitted_at:Nt.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:ur?Number(ur):null,parent_test_id:e.test_id};console.log(" Submitting speaking test:",wr),console.log(" Processing audio with AI...");try{const wt=await(await R("/.netlify/functions/process-speaking-audio-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e.test_id,question_id:e.question_id||1,audio_blob:$e})})).json();if(wt.success){console.log(" AI Analysis Result:",wt),u(wt.transcript);const Ke=wt.transcript?wt.transcript.split(/\s+/).filter(st=>st.length>0).length:0;console.log(" Word Count Verification:",{aiCount:wt.word_count,actualCount:Ke,transcript:wt.transcript});const it=Ke,vt={overall_score:wt.overall_score,word_count:it,grammar_score:wt.grammar_score,vocabulary_score:wt.vocabulary_score,pronunciation_score:wt.pronunciation_score,fluency_score:wt.fluency_score,content_score:wt.content_score,grammar_mistakes:wt.grammar_mistakes,vocabulary_mistakes:wt.vocabulary_mistakes,feedback:wt.feedback,improved_transcript:wt.improved_transcript,grammar_corrections:wt.grammar_corrections||[],vocabulary_corrections:wt.vocabulary_corrections||[],language_use_corrections:wt.language_use_corrections||[],pronunciation_corrections:wt.pronunciation_corrections||[],ai_feedback:wt.ai_feedback||null};console.log(" Mapped Scores:",vt),console.log(" Individual scores check:",{grammar_score:wt.grammar_score,vocabulary_score:wt.vocabulary_score,pronunciation_score:wt.pronunciation_score,fluency_score:wt.fluency_score,content_score:wt.content_score}),f(vt),a("feedback")}else throw new Error(wt.message||wt.error||"Failed to process audio with AI");localStorage.removeItem(`speaking_progress_${e.test_id}`)}catch(dr){console.error("Speaking test submission error:",dr),dr.message.includes("No valid authentication token found")?(b("Your session has expired. Please refresh the page and try again."),setTimeout(()=>{window.location.reload()},3e3)):b(dr.message),a("recording")}}catch($e){console.error("Speaking test submission error:",$e),b($e.message),a("recording")}finally{V(!1)}},[e,W,R,E,re,L]);_.useEffect(()=>{s==="processing"&&!l&&!d&&(console.log(' Detected stuck "processing" state on reload. Attempting recovery...'),i?(console.log(" Resuming processing from cached audio blob..."),ce(i,A)):(console.log(" No cached audio blob found. Resetting to recording step."),a("recording")))},[s,l,d,i,A,ce]);const pe=_.useCallback(()=>{if(E<P){o(null),u(""),f(null),b(null),V(!1);const Ne=E+1;N(Ne),re(Ne),a("recording")}else b("Maximum attempts reached")},[E,P,re]),ke=_.useCallback(async()=>{if(!(!l||!d)){g(!0);try{const Ne=new Date,We=e.start_time?Math.round((Ne-e.start_time)/1e3):0,$e=e.start_time?new Date(e.start_time).toISOString():Ne.toISOString(),Nt=W.student_id,He=`retest_assignment_id_${Nt}_speaking_${e.test_id}`,Et=localStorage.getItem(He),{academicCalendarService:Rt}=await Qa(async()=>{const{academicCalendarService:Ke}=await Promise.resolve().then(()=>o3);return{academicCalendarService:Ke}},void 0);await Rt.loadAcademicCalendar();const ur=Rt.getCurrentTerm()?.id;if(!ur)throw new Error("No current academic period found");const wr={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Nt,academic_period_id:ur,question_id:e.question_id||1,audio_blob:i?await Q(i):null,audio_duration:i?.duration||0,time_taken:We,started_at:$e,submitted_at:Ne.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:Et?Number(Et):null,parent_test_id:e.test_id,transcript:l,scores:d,final_submission:!0};console.log(" Final submission:",wr),console.log(" Making final submission request...");const dr=await R("/.netlify/functions/submit-speaking-test-final",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(wr)});console.log(" Final submission response status:",dr.status);const wt=await dr.json();if(console.log(" Final submission result:",wt),wt.success){if(W?.student_id){const Gt=`test_completed_${W.student_id}_speaking_${e.test_id}`;localStorage.setItem(Gt,"true"),console.log(" Speaking test marked as completed in localStorage:",Gt);const Zt=`retest_in_progress_${W.student_id}_speaking_${e.test_id}`;localStorage.removeItem(Zt),console.log(" Cleared in-progress retest lock:",Zt);const ir=`speaking_attempts_${W.student_id}_${e.test_id}`;localStorage.removeItem(ir),console.log(" Cleared attempts from localStorage upon submission");const{clearTestData:kr}=await Qa(async()=>{const{clearTestData:ve}=await Promise.resolve().then(()=>dp);return{clearTestData:ve}},void 0);kr(W.student_id,"speaking_test_data",e.test_id),console.log(" Cleared speaking test data from cache upon submission");try{const ve=`anti_cheating_${W.student_id}_speaking_${e.test_id}`;localStorage.removeItem(ve),console.log(" Cleared anti-cheating key:",ve)}catch{}}console.log(" Caching speaking test results after submission...");const it=`student_results_table_${W?.student_id||W?.id||"unknown"}`,{setCachedData:vt,getCachedData:st,CACHE_TTL:qe,clearTestData:ot}=await Qa(async()=>{const{setCachedData:Gt,getCachedData:Zt,CACHE_TTL:ir,clearTestData:kr}=await Promise.resolve().then(()=>dp);return{setCachedData:Gt,getCachedData:Zt,CACHE_TTL:ir,clearTestData:kr}},void 0),kt={id:Date.now(),test_id:e.test_id,test_type:"speaking",test_name:e.test_name,score:Math.round(d.overall_score/10),max_score:10,percentage:d.overall_score,caught_cheating:!1,visibility_change_times:0,is_completed:!0,submitted_at:new Date().toISOString(),subject:"Listening and Speaking",teacher_name:e.teacher_name||"Unknown"};let Ut={success:!0,results:[],count:0};try{const Gt=st(it);Gt&&Array.isArray(Gt.results)&&(Ut.results=Gt.results.slice())}catch{}if(Ut.results.unshift(kt),Ut.count=Ut.results.length,vt(it,Ut,qe.student_results_table),console.log(" Speaking test results cached (merged) with key:",it),W?.student_id&&ot(W.student_id,"speaking",e.test_id),!!Et&&W?.student_id){let Gt=3;try{const kr=localStorage.getItem(`student_active_tests_${W.student_id}`);if(kr){const Pe=JSON.parse(kr)?.tests?.find(Me=>Me.test_id===e.test_id&&Me.test_type==="speaking");Pe&&(Gt=Pe.retest_attempts_left||Pe.max_attempts||3)}}catch(kr){console.error("Error checking active tests cache:",kr)}const ir=(d?.overall_score??0)>=50;if(ir){const kr=`retest_attempt${Gt}_${W.student_id}_speaking_${e.test_id}`;localStorage.setItem(kr,"true"),console.log(" Passed retest, marking last-slot key:",kr);let ve=0;for(let ze=1;ze<=10;ze++){const At=`retest_attempt${ze}_${W.student_id}_speaking_${e.test_id}`;localStorage.getItem(At)==="true"&&ve++}const Pe=`test_completed_${W.student_id}_speaking_${e.test_id}`;localStorage.setItem(Pe,"true"),console.log(" Marked retest as completed (student passed):",Pe);const Me=`retest_attempts_${W.student_id}_speaking_${e.test_id}`;localStorage.setItem(Me,JSON.stringify({used:ve,max:Gt})),console.log(" Set retest attempts metadata (student passed):",Me,{used:ve,max:Gt})}else{let kr=1;for(let At=1;At<=10;At++){const Kt=`retest_attempt${At}_${W.student_id}_speaking_${e.test_id}`;if(localStorage.getItem(Kt)!=="true"){kr=At;break}}const ve=`retest_attempt${kr}_${W.student_id}_speaking_${e.test_id}`;localStorage.setItem(ve,"true"),console.log(" Marked retest attempt as completed:",ve);let Pe=0;for(let At=1;At<=10;At++){const Kt=`retest_attempt${At}_${W.student_id}_speaking_${e.test_id}`;localStorage.getItem(Kt)==="true"&&Pe++}const Me=Gt-Pe,ze=Me<=0||ir;if(console.log(" Retest completion check:",{usedAttempts:Pe,maxAttempts:Gt,attemptsLeft:Me,passed:ir,shouldComplete:ze}),ze){const At=`test_completed_${W.student_id}_speaking_${e.test_id}`;localStorage.setItem(At,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",At);const Kt=`retest_attempts_${W.student_id}_speaking_${e.test_id}`;localStorage.setItem(Kt,JSON.stringify({used:Pe,max:Gt})),console.log(" Set retest attempts metadata (attempts exhausted):",Kt,{used:Pe,max:Gt})}}}if(W?.student_id){const Gt=`retest1_${W.student_id}_speaking_${e.test_id}`,Zt=`retest_assignment_id_${W.student_id}_speaking_${e.test_id}`;localStorage.removeItem(Gt),localStorage.removeItem(Zt)}try{n&&n(d.overall_score),typeof r=="function"&&r()}catch{}return}else throw new Error(wt.message||"Failed to submit speaking test")}catch(Ne){console.error("Speaking test submission error:",Ne),b(Ne.message)}finally{g(!1)}}},[e,W,R,l,d,i,E,t]);_.useCallback(()=>{a("completed"),t({test_id:e.test_id,transcript:l,scores:d,attempt_number:E})},[e.test_id,l,d,E,t]);const le=_.useCallback(()=>{T(!1);const Ne=ee.current;ee.current=null,ne(!1),typeof r=="function"&&r(),Ne?.confirm&&Ne.confirm()},[r]),ye=_.useCallback(()=>{const Ne=ee.current;ee.current=null,Ne?.cancel&&Ne.cancel(),T(!1),s!=="completed"&&ne(!0)},[s]),je=()=>{switch(s){case"recording":return c.jsxs("div",{className:"speaking-test-recording",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:e.test_name}),c.jsxs("div",{className:"mb-6 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),c.jsx("p",{className:"text-gray-700 mb-4",children:e.prompt}),c.jsx("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Requirements:"})," Minimum ",e.min_words||50," words, 0-",e.max_duration||600," seconds duration"]})})]}),c.jsx(L0e,{ref:z,onRecordingComplete:ce,minDuration:0,maxDuration:e.max_duration||600,minWords:e.min_words||50,maxAttempts:P,currentAttempt:E}),k&&c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:k})})]});case"processing":return c.jsxs("div",{className:"transcription-status bg-white rounded-lg shadow-lg p-4 sm:p-8 text-center",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Processing Your Speech"}),c.jsx("p",{className:"text-lg text-blue-600",children:"Please wait while we process your audio..."})]}),c.jsxs("div",{className:"inline-flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]});case"feedback":return console.log(" Rendering feedback step with Submit Final button"),c.jsx(B0e,{transcript:l,scores:d,audioBlob:i,recordingTime:A,onReRecord:pe,onFinalSubmit:()=>y(!0),canReRecord:E<P,attemptNumber:E,maxAttempts:P,isSubmitting:h});case"completed":const Ne={showResults:!0,testInfo:{test_name:e?.test_name||"Speaking Test",id:e?.test_id,test_id:e?.test_id},testType:"speaking",score:d?.overall_score||0,totalQuestions:1,percentage:d?.overall_score||0,passed:(d?.overall_score||0)>=50,questionAnalysis:[{questionNumber:1,userAnswer:l,correctAnswer:"Speaking test completed",isCorrect:!0,score:d?.overall_score||0,maxScore:100,feedback:`Word Count: ${d?.word_count||0}, Grammar: ${d?.grammar_score||0}/40, Vocabulary: ${d?.vocab_score||0}/30`}],timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};return c.jsx("div",{className:"speaking-test-completed",children:c.jsx(b2,{testResults:Ne,onBackToCabinet:()=>{ee.current=null,T(!0)},onRetakeTest:()=>{a("recording"),u(""),f(null),o(null),N(1)},isLoading:!1})});default:return null}};return c.jsxs("div",{children:[c.jsx(Ba,{isOpen:x&&!h,onClose:()=>y(!1),title:"Submit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:()=>y(!1),variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:()=>{y(!1),ke()},variant:"primary",children:"Submit"})]})]})}),c.jsx(Ba,{isOpen:v,onClose:ye,title:"Exit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:ye,variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:le,variant:"primary",children:"Go Back"})]})]})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6",children:[k&&c.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:k})}),je()]})]})},z0e=e=>function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296},U0e=(e,t,r)=>{if(e.length===1)return e[0];const n=`${r}:speaking:${t}`,s=Array.from(n).reduce((o,l)=>(o<<5)-o+l.charCodeAt(0),0)>>>0,a=z0e(s),i=Math.floor(a()*e.length);return e[i]},W0e=()=>{const{testId:e}=N_(),t=fl(),{user:r}=Ms(),n=zl(),{showNotification:s}=si(),[a,i]=_.useState(null),[o,l]=_.useState([]),[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,x]=_.useState(null),[y,v]=_.useState(!1),[T,k]=_.useState(null),[b,E]=_.useState(!1),{startTracking:N,stopTracking:P}=v1("speaking",e,r?.student_id||r?.id);_.useEffect(()=>{M(),j()},[e]),_.useEffect(()=>{if(a&&!y){xe.debug(" Speaking test - initializing anti-cheating tracking");const V=r?.student_id||r?.id||"unknown",J=`anti_cheating_${V}_speaking_${e}`,ne=localStorage.getItem(J);if(xe.debug(" Checking for anti-cheating data with key:",J),xe.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),xe.debug(" Current test details:",{testType:"speaking",testId:e,studentId:V}),ne)try{const ee=JSON.parse(ne);xe.debug(" Found existing anti-cheating data for THIS speaking test:",ee),xe.debug(" Visibility change times for this test:",ee.tabSwitches||0),xe.debug(" Cheating status for this test:",ee.isCheating||!1),ee.isCheating&&(xe.debug(" WARNING: Student has been flagged for cheating in THIS speaking test!"),xe.debug(" Tab switches detected in this test:",ee.tabSwitches),s(` Warning: Suspicious activity detected in this speaking test (${ee.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(ee){xe.error(" Error parsing existing anti-cheating data:",ee)}else xe.debug(" No existing anti-cheating data found for this speaking test - starting fresh");N(),xe.debug(" Anti-cheating tracking started for speaking test")}return()=>{a&&(xe.debug(" Cleaning up anti-cheating tracking for speaking test"),P())}},[a,y,e,r?.student_id,r?.id,N,P,s]);const M=async()=>{try{h(!0);const V=await n.getSpeakingTest(e);if(V.success)i(V.test);else throw new Error(V.message||"Failed to load test");const J=await n.getSpeakingTestQuestions(e);if(J.success){const ne=J.questions;l(ne);const ee=r?.student_id||r?.id,ie=U0e(ne,e,ee);d(ie),xe.debug(" Selected question for student:",{studentId:ee,testId:e,totalQuestions:ne.length,selectedQuestion:ie?.id,selectedPrompt:ie?.prompt?.substring(0,50)+"..."})}}catch(V){xe.error("Error loading test data:",V),x(V.message)}finally{h(!1)}},j=()=>{const J=`test_completed_${r?.student_id||r?.id}_speaking_${e}`;if(localStorage.getItem(J)==="true"){v(!0);const ee=localStorage.getItem(`speaking_test_result_${e}`);ee&&k(JSON.parse(ee))}},A=async V=>{try{v(!0),k(V),localStorage.setItem(`speaking_test_result_${e}`,JSON.stringify(V)),window.dispatchEvent(new CustomEvent("testCompleted",{detail:{testId:e,testType:"speaking"}})),setTimeout(()=>{t("/student")},2e3)}catch(J){xe.error("Error handling test completion:",J)}},F=()=>{if(xe.debug(" Navigating back to cabinet from speaking test..."),a&&r?.student_id){xe.debug(" Cabinet navigation detected - counting as cheating attempt");const J=`anti_cheating_${r?.student_id||r?.id||"unknown"}_speaking_${e}`,ne=localStorage.getItem(J);let ee=0,ie=!1;if(ne)try{const H=JSON.parse(ne);ee=H.tabSwitches||0,ie=H.isCheating||!1}catch(H){xe.error(" Error parsing existing anti-cheating data:",H)}const B=ee+1,Y=B>=2;xe.debug(` Tab switch count: ${ee}  ${B} (cheating: ${Y})`);const I={tabSwitches:B,isCheating:Y,lastUpdated:new Date().toISOString()};localStorage.setItem(J,JSON.stringify(I)),xe.debug(" Anti-cheating data updated for cabinet navigation:",I)}t("/student")};if(f)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(tt,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-gray-600 mt-4",children:"Loading speaking test..."})]})})})]});if(g)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(tt,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-6",children:g})]})})})]});if(y&&T)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test Results"})}),c.jsx(tt,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx(b2,{testType:"speaking",testData:a,result:T,onRetake:()=>{v(!1),k(null);const V=JSON.parse(localStorage.getItem("userData")||"{}").student_id;localStorage.removeItem(`test_completed_${V}_speaking_${e}`)}})})]});if(!a||o.length===0)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(tt,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to load test information"})]})})})]});const L=u;return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx(Ba,{isOpen:b,onClose:()=>E(!1),title:"Exit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(tt,{onClick:()=>E(!1),variant:"secondary",children:"Cancel"}),c.jsx(tt,{onClick:()=>{E(!1),F()},variant:"primary",children:"Go Back"})]})]})}),c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(tt,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.length>1&&u&&c.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-xs font-bold",children:"i"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Question Selection"}),c.jsx("div",{className:"mt-1 text-sm text-blue-700",children:c.jsxs("p",{children:["This test has ",o.length," questions. You have been assigned ",c.jsxs("strong",{children:["Question ",u.question_number]}),"."]})})]})]})}),c.jsx($0e,{testData:{...a,test_id:parseInt(e),question_id:L?.id,prompt:L?.prompt,start_time:Date.now()},onComplete:A,onExit:F,onTestComplete:A})]})]})},H0e=()=>{const{testType:e,testId:t}=N_(),r=fl(),{activeTests:n}=w2(),s=()=>{xe.debug(" [DEBUG] handleBackToCabinet called in TestPage"),xe.debug(" [DEBUG] Current location before navigate:",window.location.pathname),xe.debug(' [DEBUG] Calling navigate("/student")'),r("/student"),xe.debug(" [DEBUG] Navigate called, checking result..."),setTimeout(()=>{xe.debug(" [DEBUG] Location after navigate:",window.location.pathname),window.location.pathname!=="/student"&&(xe.debug(" [DEBUG] Navigation failed, forcing window.location.href"),window.location.href="/student")},50)},a=n.find(o=>o.test_type===e&&o.test_id===parseInt(t)),i=Zv();return xe.debug(" [DEBUG] TestPage rendering, location:",i.pathname,"testType:",e,"testId:",t),c.jsx(O0e,{onBackToCabinet:s,currentTest:a||{test_type:e,test_id:parseInt(t)}},`test-${e}-${t}`)},G0e=()=>{const e=fl(),{user:t,isAuthenticated:r,isLoading:n}=Ms(),[s,a]=_.useState(!1),[i,o]=_.useState(!0),[l,u]=_.useState(""),[d,f]=_.useState([]),[h,g]=_.useState(!1),[x,y]=_.useState(!1),[v,T]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),k=_.useCallback(async()=>{xe.debug(" Initializing Student Application...");try{if(o(!0),u(""),!r||!t){xe.debug(" User not authenticated, redirecting to login"),e("/login");return}if(t.role!==Ro.STUDENT){xe.error(" Invalid user role for student app:",t.role),u("Access denied. Student role required.");return}xe.debug(" Initializing event listeners..."),b(),xe.debug(" Setting up back to cabinet button listeners..."),E(),xe.debug(" Setting up password change form listener..."),N(),xe.debug(" Loading student data..."),await P(),xe.debug(" Exposing student functions globally..."),M(),xe.debug(" Populating student info from user data..."),J(t),a(!0),xe.debug(" Student Application initialization complete!")}catch(ie){xe.error(" Error initializing student app:",ie),u("Failed to initialize student application")}finally{o(!1)}},[r,t,e]);_.useEffect(()=>{n||k()},[n,r,t,k]);const b=_.useCallback(()=>{xe.debug(" Setting up student event listeners...");const ie=Y=>{h&&!Y.target.closest(".student-menu")&&g(!1)},B=Y=>{Y.key==="Escape"&&h&&g(!1)};return document.addEventListener("click",ie),document.addEventListener("keydown",B),()=>{document.removeEventListener("click",ie),document.removeEventListener("keydown",B)}},[h]),E=_.useCallback(()=>{xe.debug(" Setting up back to cabinet listeners...")},[]),N=_.useCallback(()=>{xe.debug(" Setting up password change form...")},[]),P=_.useCallback(async()=>{xe.debug(" Loading student data...");try{xe.debug(" Student data loaded successfully")}catch(ie){throw xe.error(" Error loading student data:",ie),ie}},[]),M=_.useCallback(()=>{xe.debug(" Exposing student functions globally..."),window.toggleStudentMenu=j,window.showChangePasswordTab=A,window.hideChangePasswordTab=F,window.navigateBackToCabinet=V,window.handlePasswordChange=L,window.populateStudentInfoDirectly=J,xe.debug(" All student functions exposed globally")},[]),j=_.useCallback(()=>{xe.debug(" toggleStudentMenu called"),g(ie=>{const B=!ie;return xe.debug(" Menu state changed from",ie,"to",B),B}),xe.debug(" Toggled dropdown menu")},[]),A=_.useCallback(()=>{xe.debug(" showChangePasswordTab called"),y(!0),g(!1)},[]),F=_.useCallback(()=>{xe.debug(" hideChangePasswordTab called"),y(!1),T({currentPassword:"",newPassword:"",confirmPassword:""})},[]),L=_.useCallback(async ie=>{ie.preventDefault(),xe.debug(" handlePasswordChange called");const{currentPassword:B,newPassword:Y,confirmPassword:I}=v;if(!B||!Y||!I){ne("Please fill in all fields","error");return}if(Y!==I){ne("New passwords do not match","error");return}if(Y.length<6){ne("New password must be at least 6 characters long","error");return}const H=/[a-zA-Z]/.test(Y),W=/[0-9]/.test(Y);if(!H||!W){ne("New password must contain both letters and numbers","error");return}if(!t||!t.student_id){ne("Session expired. Please login again.","error");return}const R=t.student_id;if(window.confirm("Are you sure you want to change your password?"))try{o(!0);const z=await Is.changePassword({studentId:R,currentPassword:B,newPassword:Y});z.success?(ne("Password changed successfully!","success"),F()):ne(z.message||"Failed to change password","error")}catch(z){xe.error("Password change error:",z),ne("Failed to change password. Please try again.","error")}finally{o(!1)}},[v,t]),V=_.useCallback(()=>{if(xe.debug("[DEBUG] navigateBackToCabinet called"),!r||!t){xe.warn("[WARN] No valid user found, redirecting to login"),e("/login");return}t.role===Ro.STUDENT?(xe.debug("[DEBUG] Navigating to student cabinet"),e("/student")):(xe.warn("[WARN] Unknown user role, redirecting to login"),e("/login"))},[r,t,e]),J=_.useCallback(ie=>{xe.debug(" populateStudentInfoDirectly called with:",ie);try{xe.debug(" Student info populated successfully")}catch(B){xe.error(" Error populating student info:",B)}},[]),ne=_.useCallback((ie,B)=>{const Y={id:Date.now(),message:ie,type:B,timestamp:new Date};f(I=>[...I,Y]),setTimeout(()=>{f(I=>I.filter(H=>H.id!==Y.id))},Km.NOTIFICATION_DURATION)},[]),ee=_.useCallback(ie=>{const{name:B,value:Y}=ie.target;T(I=>({...I,[B]:Y}))},[]);return i?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing Student Application..."})]})}):l?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Initialization Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:l}),c.jsx(tt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?c.jsxs("div",{className:"bg-gray-50",children:[c.jsxs(WT,{children:[c.jsx(ua,{path:"/",element:c.jsxs("div",{className:"student-app",children:[c.jsx(P0e,{isMenuOpen:h,onToggleMenu:j,onShowPasswordChange:A}),x&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Change Password"}),c.jsxs("form",{onSubmit:L,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:ee,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:ee,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:ee,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(tt,{type:"button",variant:"secondary",onClick:F,className:"flex-1",children:"Cancel"}),c.jsx(tt,{type:"submit",variant:"primary",disabled:i,className:"flex-1",children:i?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",className:"mr-2"}),"Changing..."]}):"Change Password"})]})]})]})})]})}),c.jsx(ua,{path:"/test/:testType/:testId",element:c.jsx(H0e,{})}),c.jsx(ua,{path:"matching-test/:testId",element:c.jsx(R0e,{})}),c.jsx(ua,{path:"word-matching-test/:testId",element:c.jsx(I0e,{})}),c.jsx(ua,{path:"speaking-test/:testId",element:c.jsx(W0e,{})}),c.jsx(ua,{path:"/results",element:c.jsx(gH,{})})]}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:d.map(ie=>c.jsx(ou,{type:ie.type,message:ie.message,onClose:()=>f(B=>B.filter(Y=>Y.id!==ie.id))},ie.id))})]}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Setting up Student Application..."})]})})},V0e=()=>c.jsx(dB,{children:c.jsx(sH,{children:c.jsx(rH,{children:c.jsx(G0e,{})})})}),q0e=({result:e,isOpen:t,onClose:r,initialTab:n="overview",editingSpeakingScore:s,tempSpeakingScore:a,isSavingSpeakingScore:i,onStartSpeakingScoreEdit:o,onSaveSpeakingScore:l,onCancelSpeakingScoreEdit:u,onTempSpeakingScoreChange:d})=>{const[f,h]=_.useState(n),g=_.useRef(!1);if(_.useEffect(()=>()=>{g.current=!0},[]),_.useEffect(()=>{t&&h(n)},[t,n]),!t||!e)return null;const x={test_id:e.test_id,test_name:e.test_name,subject_id:e.subject_id};let y=e?.__audioUrl||void 0;const v=y?void 0:e?.answers;typeof v=="string"?y=v:v&&typeof v=="object"&&(y=v.audio_url),_.useEffect(()=>{console.log("[SpeakingReview] Transcript sources",{fromResult:e?.transcript,fromAnswersObject:typeof v=="object"&&v?.transcript?v.transcript:void 0,hasAnswers:!!v,test_id:e?.test_id,student_id:e?.student_id})},[e?.test_id,e?.student_id]);const[T,k]=_.useState("");_.useEffect(()=>{const E=new AbortController;let N=!1;const P=e?.__studentId||e?.student_id;return!e?.transcript&&!(typeof v=="object"&&v?.transcript)&&e?.test_id&&P&&(async()=>{try{const M=`/.netlify/functions/get-speaking-test-new?action=transcript&test_id=${encodeURIComponent(e.test_id)}&student_id=${encodeURIComponent(P)}`;console.log("[SpeakingReview] Fetching transcript from API:",{url:M});const j=await(window.tokenManager?.getToken()||oa.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),A=await fetch(M,{headers:{Authorization:j?`Bearer ${j}`:""},signal:E.signal});console.log("[SpeakingReview] Transcript API response:",{ok:A.ok,status:A.status});const F=await A.json().catch(()=>({}));console.log("[SpeakingReview] Transcript API body:",F),!N&&!g.current&&(A.ok?k(F.transcript||""):console.warn("[SpeakingReview] Transcript API failed:",F?.error||"unknown error"))}catch(M){M.name!=="AbortError"&&!g.current&&console.error("[SpeakingReview] Transcript fetch error:",M)}})(),()=>{N=!0;try{E.abort()}catch{}}},[e]);const b={score:e.score,max_score:e.max_score,percentage:e.percentage,audio_url:y,transcript:e.transcript||T||(typeof v=="object"&&v?.transcript?v.transcript:void 0),time_taken:e.time_taken,started_at:e.started_at,submitted_at:e.submitted_at};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[c.jsxs("h2",{className:"text-xl font-semibold",children:["Speaking Test Review - ",x.test_name]}),c.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"audio",label:"Audio"},{id:"transcript",label:"Transcript"},{id:"analysis",label:"AI Analysis"},{id:"scoring",label:"Scoring"}].map(E=>c.jsx("button",{onClick:()=>h(E.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${f===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:E.label},E.id))})}),c.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f==="overview"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:x.test_name})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[b.score," / ",b.max_score]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Taken"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.time_taken?`${Math.floor(b.time_taken/60)}:${(b.time_taken%60).toString().padStart(2,"0")}`:"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.submitted_at?new Date(b.submitted_at).toLocaleString():"N/A"})]})]})}),f==="audio"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audio Recording"}),b.audio_url?c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Click the play button to listen to the student's recording:"}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsx(pH,{audioUrl:b.audio_url,className:"w-full"})})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No audio recording available"})})]}),f==="transcript"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transcript"}),b.transcript?c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.transcript})}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No transcript available"})})]}),f==="analysis"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Analysis Results"}),(()=>{let E=e.ai_feedback;if(E&&typeof E=="string")try{E=JSON.parse(E)}catch{E=null}return E?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Overall Performance"}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-800",children:E.overall_score||0}),c.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score (0-100)"})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Category Breakdown"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[E.grammar_score||0,"/25"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Grammar"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-green-600",children:[E.vocabulary_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Vocabulary"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[E.pronunciation_score||0,"/15"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Pronunciation"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[E.fluency_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Fluency"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-red-600",children:[E.content_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Content"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Word Count:"}),c.jsx("span",{className:"text-sm font-medium",children:E.word_count||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Grammar Mistakes:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:E.grammar_mistakes||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Vocabulary Issues:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:E.vocabulary_mistakes||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Difficulty Level:"}),c.jsx("span",{className:"text-sm font-medium",children:E.difficulty_level||"N/A"})]})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"AI Feedback"}),E.feedback?c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:c.jsx("p",{className:"text-sm text-gray-700",children:E.feedback})}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:c.jsx("p",{className:"text-sm",children:"No AI feedback available"})})]})]}),E.improved_transcript&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Improved Transcript"}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:c.jsx("p",{className:"text-sm text-gray-700",children:E.improved_transcript})})]}),E.grammar_corrections&&E.grammar_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Grammar Corrections"}),c.jsx("div",{className:"space-y-3",children:E.grammar_corrections.map((N,P)=>c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-red-800",children:"Mistake:"})," ",N.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-green-800",children:"Correction:"})," ",N.correction]}),N.explanation&&c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Explanation:"})," ",N.explanation]})]},P))})]}),E.vocabulary_corrections&&E.vocabulary_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Vocabulary Improvements"}),c.jsx("div",{className:"space-y-3",children:E.vocabulary_corrections.map((N,P)=>c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-yellow-800",children:"Original:"})," ",N.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-green-800",children:"Better:"})," ",N.correction]}),N.explanation&&c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Explanation:"})," ",N.explanation]})]},P))})]}),E.language_use_corrections&&E.language_use_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Language Use Suggestions"}),c.jsx("div",{className:"space-y-3",children:E.language_use_corrections.map((N,P)=>c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-blue-800",children:"Original:"})," ",N.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-blue-800",children:"Suggestion:"})," ",N.suggestion]}),N.explanation&&c.jsx("div",{className:"text-xs text-blue-700 mt-1",children:N.explanation})]},P))})]})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No AI analysis available for this result"})})})()]}),f==="scoring"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Score Details"}),s?c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 place-items-center",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Score"}),c.jsx("input",{type:"number",min:"0",max:b.max_score,value:a,onChange:E=>d(E.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Max Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.max_score," (Fixed)"]})]})]}),c.jsxs("div",{className:"flex justify-center space-x-3",children:[c.jsx("button",{onClick:l,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Score"}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("div",{className:"grid grid-cols-1 place-items-center gap-2",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Current Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.score," / ",b.max_score]})]})}),c.jsx("button",{onClick:()=>o(e.id,b.score),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mx-auto",children:"Edit Score"})]})]})]}),c.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},K0e=({isOpen:e,onClose:t,testResult:r,questions:n,isLoadingQuestions:s,onScoreUpdate:a})=>{const[i,o]=_.useState(!1),[l,u]=_.useState(""),[d,f]=_.useState(!1),h=F=>{if(!F)return{};if(typeof F=="string")try{return JSON.parse(F)}catch{return{}}return F||{}},g=()=>{const F=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;u(F.toString()),o(!0)},x=()=>{o(!1),u("")},y=async F=>{F&&(F.preventDefault(),F.stopPropagation());const L=r?.id||r?.result_id;if(!L){console.error("TestAnswerModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("TestAnswerModal: Saving score",{resultId:L,score:l,testType:r.test_type}),f(!0);try{const V=r.test_type||r.testType,J={resultId:L,score:parseInt(l)||0,testType:V};console.log("TestAnswerModal: Sending payload",J);let ne;if(window.tokenManager?.makeAuthenticatedRequest)ne=await window.tokenManager.makeAuthenticatedRequest(Wd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});else{const{SecureToken:ee}=await Qa(async()=>{const{SecureToken:B}=await Promise.resolve().then(()=>t4);return{SecureToken:B}},void 0),ie=await(window.tokenManager?.getToken()||ee.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");ne=await fetch(Wd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:ie?`Bearer ${ie}`:""},body:JSON.stringify(J)})}if(console.log("TestAnswerModal: Response status",ne.status),ne.ok){const ee=await ne.json();console.log("TestAnswerModal: Score updated successfully",ee),a&&a(ee),o(!1),u("")}else{const ee=await ne.json().catch(()=>({error:"Unknown error"}));console.error("TestAnswerModal: Error response",ee),alert(ee.error||`Failed to update score. Status: ${ne.status}`)}}catch(V){console.error("TestAnswerModal: Exception updating score:",V),alert(`Failed to update score: ${V.message||V}`)}finally{f(!1)}},v=_.useMemo(()=>{const F=r?.answers;if(console.log(" [TestAnswerModal] Raw testResult.answers:",F),console.log(" [TestAnswerModal] Raw testResult.answers type:",typeof F),console.log(" [TestAnswerModal] testResult.retest_offered:",r?.retest_offered),F&&typeof F=="object"&&F.answers_by_id)return console.log(" [TestAnswerModal] Found answers_by_id format"),console.log(" [TestAnswerModal] answers_by_id:",F.answers_by_id),console.log(" [TestAnswerModal] question_order:",F.question_order),F.answers_by_id||{};const L=h(F);return console.log(" [TestAnswerModal] Parsed student answers:",L),console.log(" [TestAnswerModal] Full testResult:",r),L},[r?.answers]),T=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((F,L)=>{const V=F.question_id||F.id||L+1,J=String(V),ne=Number(V),ee=v[J]!==void 0?v[J]:v[ne]!==void 0?v[ne]:v[V]!==void 0?v[V]:void 0,ie=F.correct_answer,B=ee===ie,Y=I=>{if(F.options&&Array.isArray(F.options)){const W=I.charCodeAt(0)-65;return F.options[W]||I}const H=`option_${I.toLowerCase()}`;return F[H]||I};return c.jsxs("tr",{className:B?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ia(F.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:ee?c.jsxs("span",{className:`font-medium ${B?"text-green-700":"text-red-700"}`,children:[ee," - ",c.jsx("span",{dangerouslySetInnerHTML:{__html:ia(String(Y(ee)))}})]}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[ie," - ",c.jsx("span",{dangerouslySetInnerHTML:{__html:ia(String(Y(ie)))}})]}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:B?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},J)})})]})}),k=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((F,L)=>{const V=F.question_id||F.id||L+1,J=String(V),ne=Number(V),ee=v[J]!==void 0?v[J]:v[ne]!==void 0?v[ne]:v[V]!==void 0?v[V]:void 0,ie=F.correct_answer;let B;typeof ee=="boolean"?B=ee:typeof ee=="string"?B=ee.toLowerCase().trim()==="true":ee===1||ee==="1"?B=!0:ee===0||ee==="0"?B=!1:B=!!ee;let Y;typeof ie=="boolean"?Y=ie:typeof ie=="string"?Y=ie.toLowerCase().trim()==="true":Y=!!ie;const I=B===Y;L===0&&console.log(" [TestAnswerModal] True/False First Question Debug:",{questionIdStr:J,studentAnswer:ee,studentAnswerType:typeof ee,normalizedStudentAnswer:B,correctAnswer:ie,correctAnswerType:typeof ie,normalizedCorrectAnswer:Y,isCorrect:I});const H=ee!=null?B:null,W=Y;return c.jsxs("tr",{className:I?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ia(F.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:H!==null?c.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${H?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:H?"True":"False"}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${W?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:W?"True":"False"})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:I?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},J)})})]})}),b=()=>{if(!n||n.length===0)return c.jsx("p",{className:"text-gray-500",children:"No questions available"});const F=(L,V)=>{if(!L||!V||V.length===0)return!1;const J=String(L).toLowerCase().trim();return V.some(ne=>{const ee=String(ne).toLowerCase().trim();return J===ee||ee.length>=2&&J.includes(ee)?!0:ee.length===1?J.startsWith(ee)||J.endsWith(ee):!1})};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer(s)"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((L,V)=>{const J=L.question_id||L.id||V+1,ne=String(J),ee=Number(J),ie=v[ne]!==void 0?v[ne]:v[ee]!==void 0?v[ee]:v[J]!==void 0?v[J]:void 0,B=Array.isArray(L.correct_answers)?L.correct_answers:L.correct_answer?[L.correct_answer]:[],Y=F(ie,B);return V===0&&console.log(" [TestAnswerModal] First question debug:",{questionIdNum:J,questionIdStr:ne,questionIdNumKey:ee,studentAnswer:ie,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:B,question:L}),c.jsxs("tr",{className:Y?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:V+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ia(L.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:ie?c.jsx("span",{className:`font-medium ${Y?"text-green-700":"text-red-700"}`,dangerouslySetInnerHTML:{__html:(()=>{const I=String(ie);if(I.includes("$"))return ia(I);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(I))try{return $8(I)}catch{return ia(I)}return ia(I)})()}}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B.length>0?c.jsx("div",{className:"space-y-1",children:B.map((I,H)=>{const W=String(I);return c.jsx("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",dangerouslySetInnerHTML:{__html:(()=>{if(W.includes("$"))return ia(W);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(W))try{return $8(W)}catch{return ia(W)}return ia(W)})()}},H)})}):c.jsx("span",{className:"text-gray-400",children:"No correct answer defined"})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Y?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},ne)})})]})})},E=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Left Word"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Match"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Match"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((F,L)=>{const V=F.question_id||F.id||L+1,J=String(V),ne=Number(V),ee=v[J]!==void 0?v[J]:v[ne]!==void 0?v[ne]:v[V]!==void 0?v[V]:void 0,ie=F.left_word,B=F.right_word;let Y=null,I=!1;if(ee){if(typeof ee=="object")Y=ee.definition||ee.right||ee.word,I=ee.word===ie&&(ee.definition||ee.right)===B;else if(typeof ee=="string")try{const H=JSON.parse(ee);Y=H.definition||H.right||H.word,I=H.word===ie&&(H.definition||H.right)===B}catch{Y=ee}}return c.jsxs("tr",{className:I?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:ie}),c.jsx("td",{className:"px-4 py-3 text-sm",children:Y?c.jsx("span",{className:I?"text-green-700 font-medium":"text-red-700 font-medium",children:Y}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:I?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},J)})})]})}),N=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"space-y-6",children:n.map((F,L)=>{const V=F.question_id||F.id||L+1,J=String(V),ne=Number(V);L===0&&console.log(" [TestAnswerModal] Fill Blanks First Question Debug:",{questionIdNum:V,questionIdStr:J,questionIdNumKey:ne,question:F,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:F.correct_answers});const ee=v[J]!==void 0?v[J]:v[ne]!==void 0?v[ne]:v[V]!==void 0?v[V]:void 0,ie=Array.isArray(F.correct_answers)?F.correct_answers:[];let B=[];return Array.isArray(ee)?B=ee:ee!=null?B=[ee]:B=[],c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Question ",L+1]}),c.jsxs("div",{className:"space-y-3",children:[F.question_json&&c.jsx("div",{className:"text-sm text-gray-700 mb-4",children:typeof F.question_json=="string"?F.question_json:F.question_json.text||F.question_json.question||"Question text not available"}),c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Blank #"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ie.map((Y,I)=>{let H=B[I];const W=I+1,R=String(W),z=Number(W);(H==null||H==="")&&(H=v[R]!==void 0?v[R]:v[z]!==void 0?v[z]:H),L===0&&I===0&&console.log(" [TestAnswerModal] Fill Blanks First Blank Debug:",{blankIndex:I,potentialBlankId:W,potentialBlankIdStr:R,potentialBlankIdNum:z,studentAns:H,studentAnswersForQ:B,correctAns:Y,studentAnswersKeys:Object.keys(v)});const G=String(H||"").trim().toLowerCase()===String(Y||"").trim().toLowerCase();return c.jsxs("tr",{className:G?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:I+1}),c.jsx("td",{className:"px-4 py-2 text-sm",children:H?c.jsx("span",{className:G?"text-green-700 font-medium":"text-red-700 font-medium",children:String(H)}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:String(Y)}),c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:G?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:""}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:""})})]},I)})})]})]})]},J)})}),P=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Matching type tests require visual comparison. Answers stored as connection pairs."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Word"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Connection"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((F,L)=>{const V=F.question_id||F.id||L+1,J=String(V),ne=Number(V),ee=v[J]!==void 0?v[J]:v[ne]!==void 0?v[ne]:v[V]!==void 0?v[V]:void 0;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:F.word}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ee?typeof ee=="object"?JSON.stringify(ee):ee:c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})})]},J)})})]})})]}),M=()=>{if(!r)return null;const F=r.test_type||r.testType;if(s)return c.jsxs("div",{className:"flex items-center justify-center py-12",children:[c.jsx(fn,{size:"lg"}),c.jsx("span",{className:"ml-4 text-gray-600",children:"Loading questions..."})]});if(!n||n.length===0)return c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-500",children:"Unable to load questions for this test."}),c.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Test ID: ",r.test_id,", Type: ",F]})]});switch(F){case"multiple_choice":return T();case"true_false":return k();case"input":return b();case"word_matching":return E();case"fill_blanks":return N();case"matching_type":return P();default:return c.jsxs("div",{className:"text-center py-8",children:[c.jsxs("p",{className:"text-gray-500",children:['Test type "',F,'" is not supported for answer viewing.']}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Drawing and Speaking tests have their own dedicated modals."})]})}};if(!r)return null;r.test_type||r.testType;const j=`${r.name||""} ${r.surname||""}`.trim(),A=`${r.test_name||"Test"} - ${j||r.student_id}`;return c.jsxs(Ba,{isOpen:e,onClose:t,title:A,size:"large",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[c.jsxs("div",{className:"flex space-x-6",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Score"}),(()=>{const F=r.test_type||r.testType,L=["multiple_choice","true_false","input"].includes(F),V=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0,J=r.best_retest_max_score||r.max_score||0;return L&&i?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"0",max:J,value:l,onChange:ne=>u(ne.target.value),className:"w-16 px-2 py-1 text-sm border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsxs("span",{className:"text-lg font-semibold text-gray-500",children:["/ ",J]}),c.jsx("button",{type:"button",onClick:y,disabled:d,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:d?"Saving...":"Save"}),c.jsx("button",{type:"button",onClick:x,disabled:d,className:"px-2 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[V," / ",J,r.best_retest_score!==null&&r.best_retest_score!==void 0&&c.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Retest Best)"})]}),L&&c.jsx("button",{onClick:g,className:"ml-2 px-2 py-1 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded",title:"Click to edit score",children:"Edit"})]})})()]}),r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0&&r.best_retest_percentage>0||r.percentage&&r.percentage>0?c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Percentage"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0?`${r.best_retest_percentage.toFixed(1)}%`:`${r.percentage?.toFixed(1)||"0.0"}%`})]}):null,r.subject&&r.subject!=="N/A"?c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Subject"}),c.jsx("div",{className:"text-sm font-medium text-gray-700",children:r.subject})]}):null]}),r.submitted_at&&c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Submitted"}),c.jsx("div",{className:"text-sm text-gray-700",children:new Date(r.submitted_at).toLocaleString()})]})]}),c.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:M()}),r.caught_cheating&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-red-800",children:[" This test was flagged for suspicious activity (visibility changes: ",r.visibility_change_times||0,")"]})})]})},Y0e=({isOpen:e,onClose:t,testResult:r,onScoreUpdate:n})=>{const[s,a]=_.useState(""),[i,o]=_.useState(!1);Ls.useEffect(()=>{if(console.log("EditScoreModal: useEffect triggered",{isOpen:e,testResult:r}),e&&r){const h=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;a(h.toString()),console.log("EditScoreModal: Initialized with score",h)}},[e,r]);const l=async h=>{h.preventDefault(),h.stopPropagation();const g=r?.id||r?.result_id;if(!g){console.error("EditScoreModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("EditScoreModal: Saving score",{resultId:g,score:s,testType:r.test_type}),o(!0);try{const x=r.test_type||r.testType,y={resultId:g,score:parseInt(s)||0,testType:x};console.log("EditScoreModal: Sending payload",y);let v;if(window.tokenManager?.makeAuthenticatedRequest)v=await window.tokenManager.makeAuthenticatedRequest(Wd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});else{const{SecureToken:T}=await Qa(async()=>{const{SecureToken:b}=await Promise.resolve().then(()=>t4);return{SecureToken:b}},void 0),k=await(window.tokenManager?.getToken()||T.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");v=await fetch(Wd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:k?`Bearer ${k}`:""},body:JSON.stringify(y)})}if(console.log("EditScoreModal: Response status",v.status),v.ok){const T=await v.json();console.log("EditScoreModal: Score updated successfully",T),n&&n(T),t()}else{const T=await v.json().catch(()=>({error:"Unknown error"}));console.error("EditScoreModal: Error response",T),alert(T.error||`Failed to update score. Status: ${v.status}`)}}catch(x){console.error("EditScoreModal: Exception updating score:",x),alert(`Failed to update score: ${x.message||x}`)}finally{o(!1)}};if(console.log("EditScoreModal: Rendering",{isOpen:e,testResult:r,hasTestResult:!!r}),!r)return console.log("EditScoreModal: No testResult, returning null"),null;const u=r.best_retest_max_score||r.max_score||0,d=`${r.name||""} ${r.surname||""}`.trim()||r.student_id,f=`Edit Score - ${r.test_name||"Test"} - ${d}`;return c.jsx(Ba,{isOpen:e,onClose:t,title:f,size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Score"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"0",max:u,value:s,onChange:h=>a(h.target.value),className:"w-24 px-3 py-2 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsxs("span",{className:"text-lg font-semibold text-gray-600",children:["/ ",u]})]}),c.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Enter a score between 0 and ",u]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[c.jsx("button",{onClick:t,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{type:"button",onClick:l,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Saving...":"Save"})]})]})})};class db extends Ls.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),t.message&&t.message.includes("Minified React error #300")){console.warn("React error #300 caught and handled by ErrorBoundary");return}}render(){return this.state.hasError?c.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[c.jsx("h3",{className:"text-red-800 font-medium",children:"Something went wrong"}),c.jsx("p",{className:"text-red-600 text-sm mt-1",children:"An error occurred while rendering this component."})]}):this.props.children}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var D4={};D4.version="0.18.5";var xH=1252,X0e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],KC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},YC=function(e){X0e.indexOf(e)!=-1&&(xH=KC[0]=e)};function J0e(){YC(1252)}var ru=function(e){YC(e)};function XC(){ru(1200),J0e()}function oD(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Q0e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function yH(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Fy=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Q0e(e.slice(2)):t==254&&r==255?yH(e.slice(2)):t==65279?e.slice(1):e},fb=function(t){return String.fromCharCode(t)},lD=function(t){return String.fromCharCode(t)},Cv,Ef="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ev(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,s=e.charCodeAt(u++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),t+=Ef.charAt(a)+Ef.charAt(i)+Ef.charAt(o)+Ef.charAt(l);return t}function Bl(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=Ef.indexOf(e.charAt(u++)),i=Ef.indexOf(e.charAt(u++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=Ef.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=Ef.indexOf(e.charAt(u++)),s=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(s));return t}var Sn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),w0=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Uf(e){return Sn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function cD(e){return Sn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Fl=function(t){return Sn?w0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function l3(e){if(typeof ArrayBuffer>"u")return Fl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function th(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Z0e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function JC(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return JC(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var bi=Sn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:w0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function efe(e){for(var t=[],r=0,n=e.length+250,s=Uf(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Uf(65535),n=65530)}return t.push(s.slice(0,r)),bi(t)}var zo=/\u0000/g,Dy=/[\u0001-\u0006]/g;function jp(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function nu(e,t){var r=""+e;return r.length>=t?r:da("0",t-r.length)+r}function QC(e,t){var r=""+e;return r.length>=t?r:da(" ",t-r.length)+r}function O4(e,t){var r=""+e;return r.length>=t?r:r+da(" ",t-r.length)}function tfe(e,t){var r=""+Math.round(e);return r.length>=t?r:da("0",t-r.length)+r}function rfe(e,t){var r=""+e;return r.length>=t?r:da("0",t-r.length)+r}var uD=Math.pow(2,32);function ep(e,t){if(e>uD||e<-uD)return tfe(e,t);var r=Math.round(e);return rfe(r,t)}function R4(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var dD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],I5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function nfe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Jr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},fD={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},sfe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function I4(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,l=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*i+a,d=f*u+l,!(s-f<5e-8));)s=1/(s-f),a=i,i=o,l=u,u=d;if(d>t&&(u>t?(d=l,o=a):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Zh(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=ufe(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var vH=new Date(1899,11,31,0,0,0),afe=vH.getTime(),ife=new Date(1900,2,1,0,0,0);function wH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=ife&&(r+=1440*60*1e3),(r-(afe+(e.getTimezoneOffset()-vH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function ZC(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ofe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function lfe(e){var t=e<0?12:11,r=ZC(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function cfe(e){var t=ZC(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Nv(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=lfe(e):t===10?r=e.toFixed(10).substr(0,12):r=cfe(e),ZC(ofe(r.toUpperCase()))}function Mm(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Nv(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return kc(14,wH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function ufe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function dfe(e,t,r,n){var s="",a=0,i=0,o=r.y,l,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return I5[r.m-1][1];case 5:return I5[r.m-1][0];default:return I5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return dD[r.q][0];default:return dD[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?nu(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=nu(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?nu(l,u):"";return d}function Nf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var bH=/%/g;function ffe(e,t,r){var n=t.replace(bH,""),s=t.length-n.length;return e0(e,n,r*Math.pow(10,2*s))+da("%",s)}function hfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return e0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function _H(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+_H(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var SH=/# (\?+)( ?)\/( ?)(\d+)/;function mfe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?da(" ",e[1].length+1+e[4].length):QC(i,e[1].length)+e[2]+"/"+e[3]+nu(o,e[4].length))}function gfe(e,t,r){return r+(t===0?"":""+t)+da(" ",e[1].length+2+e[4].length)}var kH=/^#*0*\.([0#]+)/,TH=/\).*[0#]/,CH=/\(###\) ###\\?-####/;function Do(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function hD(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function mD(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function pfe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function xfe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ac(e,t,r){if(e.charCodeAt(0)===40&&!t.match(TH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ac("n",n,r):"("+ac("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return hfe(e,t,r);if(t.indexOf("%")!==-1)return ffe(e,t,r);if(t.indexOf("E")!==-1)return _H(t,r);if(t.charCodeAt(0)===36)return"$"+ac(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ep(l,t.length);if(t.match(/^[#?]+$/))return s=ep(r,0),s==="0"&&(s=""),s.length>t.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(SH))return mfe(a,l,u);if(t.match(/^#+0+$/))return u+ep(l,t.length-t.indexOf("0"));if(a=t.match(kH))return s=hD(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])).replace(/\.(\d*)$/,function(x,y){return"."+y+da("0",Do(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+hD(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Nf(ep(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ac(e,t,-r):Nf(""+(Math.floor(r)+pfe(r,a[1].length)))+"."+nu(mD(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return ac(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jp(ac(e,t.replace(/[\\-]/g,""),r)),i=0,jp(jp(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(CH))return s=ac(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=I4(l,Math.pow(10,i)-1,!1),s=""+u,d=e0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=O4(o[2],i),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=I4(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?QC(o[1],i)+a[2]+"/"+a[3]+O4(o[2],i):da(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=ep(r,0),t.length<=s.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Do(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=mD(r,a[1].length),r<0?"-"+ac(e,t,-r):Nf(xfe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?nu(0,3-x.length):"")+x})+"."+nu(i,a[1].length);switch(t){case"###,##0.00":return ac(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Nf(ep(l,0));return g!=="0"?u+g:"";case"###,###.00":return ac(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ac(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function yfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return e0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function vfe(e,t,r){var n=t.replace(bH,""),s=t.length-n.length;return e0(e,n,r*Math.pow(10,2*s))+da("%",s)}function EH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+EH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Du(e,t,r){if(e.charCodeAt(0)===40&&!t.match(TH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Du("n",n,r):"("+Du("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return yfe(e,t,r);if(t.indexOf("%")!==-1)return vfe(e,t,r);if(t.indexOf("E")!==-1)return EH(t,r);if(t.charCodeAt(0)===36)return"$"+Du(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+nu(l,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(SH))return gfe(a,l,u);if(t.match(/^#+0+$/))return u+nu(l,t.length-t.indexOf("0"));if(a=t.match(kH))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])),s=s.replace(/\.(\d*)$/,function(x,y){return"."+y+da("0",Do(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Nf(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Du(e,t,-r):Nf(""+r)+"."+da("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Du(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jp(Du(e,t.replace(/[\\-]/g,""),r)),i=0,jp(jp(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(CH))return s=Du(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=I4(l,Math.pow(10,i)-1,!1),s=""+u,d=e0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=O4(o[2],i),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=I4(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?QC(o[1],i)+a[2]+"/"+a[3]+O4(o[2],i):da(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Do(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Du(e,t,-r):Nf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?nu(0,3-x.length):"")+x})+"."+nu(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=Nf(""+l);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return Du(e,t.slice(0,t.lastIndexOf(".")),r)+Do(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function e0(e,t,r){return(r|0)===r?Du(e,t,r):ac(e,t,r)}function wfe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var NH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function b1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":R4(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(NH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function bfe(e,t,r,n){for(var s=[],a="",i=0,o="",l="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!R4(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(f=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=e.charAt(++i),x=g==="("||g===")"?g:"t";s[s.length]={t:x,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Zh(t,r,e.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Zh(t,r),u==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=Zh(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",i+=5,h="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(NH)){if(u==null&&(u=Zh(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",b1(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var v=0,T=0,k;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=h,l="h",v<1&&(v=1);break;case"s":(k=s[i].v.match(/\.0+$/))&&(T=Math.max(T,k[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[i].v.match(/[Hh]/)&&(v=1),v<2&&s[i].v.match(/[Mm]/)&&(v=2),v<3&&s[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",E;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=dfe(s[i].t.charCodeAt(0),s[i].v,u,T),s[i].t="t";break;case"n":case"?":for(E=i+1;s[E]!=null&&((o=s[E].t)==="?"||o==="D"||(o===" "||o==="t")&&s[E+1]!=null&&(s[E+1].t==="?"||s[E+1].t==="t"&&s[E+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[E].v==="/"||s[E].v===" "&&s[E+1]!=null&&s[E+1].t=="?"));)s[i].v+=s[E].v,s[E]={v:"",t:";"},++E;b+=s[i].v,i=E-1;break;case"G":s[i].t="t",s[i].v=Mm(t,r);break}var N="",P,M;if(b.length>0){b.charCodeAt(0)==40?(P=t<0&&b.charCodeAt(0)===45?-t:t,M=e0("n",b,P)):(P=t<0&&n>1?-t:t,M=e0("n",b,P),P<0&&s[0]&&s[0].t=="t"&&(M=M.substr(1),s[0].v="-"+s[0].v)),E=M.length-1;var j=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){j=i;break}var A=s.length;if(j===s.length&&M.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(E>=s[i].v.length-1?(E-=s[i].v.length,s[i].v=M.substr(E+1,s[i].v.length)):E<0?s[i].v="":(s[i].v=M.substr(0,E+1),E=-1),s[i].t="t",A=i);E>=0&&A<s.length&&(s[A].v=M.substr(0,E+1)+s[A].v)}else if(j!==s.length&&M.indexOf("E")===-1){for(E=M.indexOf(".")-1,i=j;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")-1:s[i].v.length-1,N=s[i].v.substr(d+1);d>=0;--d)E>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(N=M.charAt(E--)+N);s[i].v=N,s[i].t="t",A=i}for(E>=0&&A<s.length&&(s[A].v=M.substr(0,E+1)+s[A].v),E=M.indexOf(".")+1,i=j;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==j)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")+1:0,N=s[i].v.substr(0,d);d<s[i].v.length;++d)E<M.length&&(N+=M.charAt(E++));s[i].v=N,s[i].t="t",A=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(P=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=e0(s[i].t,s[i].v,P),s[i].t="t");var F="";for(i=0;i!==s.length;++i)s[i]!=null&&(F+=s[i].v);return F}var gD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function pD(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function _fe(e,t){var r=wfe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(gD),o=r[1].match(gD);return pD(t,i)?[n,r[0]]:pD(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function kc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Jr)[e],n==null&&(n=r.table&&r.table[fD[e]]||Jr[fD[e]]),n==null&&(n=sfe[e]||"General");break}if(R4(n,0))return Mm(t,r);t instanceof Date&&(t=wH(t,r.date1904));var s=_fe(n,t);if(R4(s[1]))return Mm(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return bfe(s[1],t,r,s[0])}function t0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Jr[r]==null){t<0&&(t=r);continue}if(Jr[r]==e){t=r;break}}t<0&&(t=391)}return Jr[t]=e,t}function c3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&t0(e[t],t)}function _1(){Jr=nfe()}var Sfe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},AH=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function kfe(e){var t=typeof e=="number"?Jr[e]:e;return t=t.replace(AH,"(\\d+)"),new RegExp("^"+t+"$")}function Tfe(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(t.match(AH)||[]).forEach(function(f,h){var g=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var Cfe=(function(){var e={};e.version="1.2.0";function t(){for(var M=0,j=new Array(256),A=0;A!=256;++A)M=A,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,j[A]=M;return typeof Int32Array<"u"?new Int32Array(j):j}var r=t();function n(M){var j=0,A=0,F=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)L[F]=M[F];for(F=0;F!=256;++F)for(A=M[F],j=256+F;j<4096;j+=256)A=L[j]=A>>>8^M[A&255];var V=[];for(F=1;F!=16;++F)V[F-1]=typeof Int32Array<"u"?L.subarray(F*256,F*256+256):L.slice(F*256,F*256+256);return V}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],f=s[6],h=s[7],g=s[8],x=s[9],y=s[10],v=s[11],T=s[12],k=s[13],b=s[14];function E(M,j){for(var A=j^-1,F=0,L=M.length;F<L;)A=A>>>8^r[(A^M.charCodeAt(F++))&255];return~A}function N(M,j){for(var A=j^-1,F=M.length-15,L=0;L<F;)A=b[M[L++]^A&255]^k[M[L++]^A>>8&255]^T[M[L++]^A>>16&255]^v[M[L++]^A>>>24]^y[M[L++]]^x[M[L++]]^g[M[L++]]^h[M[L++]]^f[M[L++]]^d[M[L++]]^u[M[L++]]^l[M[L++]]^o[M[L++]]^i[M[L++]]^a[M[L++]]^r[M[L++]];for(F+=15;L<F;)A=A>>>8^r[(A^M[L++])&255];return~A}function P(M,j){for(var A=j^-1,F=0,L=M.length,V=0,J=0;F<L;)V=M.charCodeAt(F++),V<128?A=A>>>8^r[(A^V)&255]:V<2048?(A=A>>>8^r[(A^(192|V>>6&31))&255],A=A>>>8^r[(A^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,J=M.charCodeAt(F++)&1023,A=A>>>8^r[(A^(240|V>>8&7))&255],A=A>>>8^r[(A^(128|V>>2&63))&255],A=A>>>8^r[(A^(128|J>>6&15|(V&3)<<4))&255],A=A>>>8^r[(A^(128|J&63))&255]):(A=A>>>8^r[(A^(224|V>>12&15))&255],A=A>>>8^r[(A^(128|V>>6&63))&255],A=A>>>8^r[(A^(128|V&63))&255]);return~A}return e.table=r,e.bstr=E,e.buf=N,e.str=P,e})(),zr=(function(){var t={};t.version="1.2.1";function r(de,_e){for(var ge=de.split("/"),be=_e.split("/"),Ce=0,Ee=0,rt=Math.min(ge.length,be.length);Ce<rt;++Ce){if(Ee=ge[Ce].length-be[Ce].length)return Ee;if(ge[Ce]!=be[Ce])return ge[Ce]<be[Ce]?-1:1}return ge.length-be.length}function n(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:n(de.slice(0,-1));var _e=de.lastIndexOf("/");return _e===-1?de:de.slice(0,_e+1)}function s(de){if(de.charAt(de.length-1)=="/")return s(de.slice(0,-1));var _e=de.lastIndexOf("/");return _e===-1?de:de.slice(_e+1)}function a(de,_e){typeof _e=="string"&&(_e=new Date(_e));var ge=_e.getHours();ge=ge<<6|_e.getMinutes(),ge=ge<<5|_e.getSeconds()>>>1,de.write_shift(2,ge);var be=_e.getFullYear()-1980;be=be<<4|_e.getMonth()+1,be=be<<5|_e.getDate(),de.write_shift(2,be)}function i(de){var _e=de.read_shift(2)&65535,ge=de.read_shift(2)&65535,be=new Date,Ce=ge&31;ge>>>=5;var Ee=ge&15;ge>>>=4,be.setMilliseconds(0),be.setFullYear(ge+1980),be.setMonth(Ee-1),be.setDate(Ce);var rt=_e&31;_e>>>=5;var bt=_e&63;return _e>>>=6,be.setHours(_e),be.setMinutes(bt),be.setSeconds(rt<<1),be}function o(de){Hi(de,0);for(var _e={},ge=0;de.l<=de.length-4;){var be=de.read_shift(2),Ce=de.read_shift(2),Ee=de.l+Ce,rt={};switch(be){case 21589:ge=de.read_shift(1),ge&1&&(rt.mtime=de.read_shift(4)),Ce>5&&(ge&2&&(rt.atime=de.read_shift(4)),ge&4&&(rt.ctime=de.read_shift(4))),rt.mtime&&(rt.mt=new Date(rt.mtime*1e3));break}de.l=Ee,_e[be]=rt}return _e}var l;function u(){return l||(l={})}function d(de,_e){if(de[0]==80&&de[1]==75)return ve(de,_e);if((de[0]|32)==109&&(de[1]|32)==105)return lt(de,_e);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var ge=3,be=512,Ce=0,Ee=0,rt=0,bt=0,at=0,ue=[],he=de.slice(0,512);Hi(he,0);var Ae=f(he);switch(ge=Ae[0],ge){case 3:be=512;break;case 4:be=4096;break;case 0:if(Ae[1]==0)return ve(de,_e);default:throw new Error("Major Version: Expected 3 or 4 saw "+ge)}be!==512&&(he=de.slice(0,be),Hi(he,28));var Ie=de.slice(0,be);h(he,ge);var Ze=he.read_shift(4,"i");if(ge===3&&Ze!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ze);he.l+=4,rt=he.read_shift(4,"i"),he.l+=4,he.chk("00100000","Mini Stream Cutoff Size: "),bt=he.read_shift(4,"i"),Ce=he.read_shift(4,"i"),at=he.read_shift(4,"i"),Ee=he.read_shift(4,"i");for(var mt=-1,Tt=0;Tt<109&&(mt=he.read_shift(4,"i"),!(mt<0));++Tt)ue[Tt]=mt;var lr=g(de,be);v(at,Ee,lr,be,ue);var Ft=k(lr,rt,ue,be);Ft[rt].name="!Directory",Ce>0&&bt!==J&&(Ft[bt].name="!MiniFAT"),Ft[ue[0]].name="!FAT",Ft.fat_addrs=ue,Ft.ssz=be;var Ct={},fr=[],Er=[],Fr=[];b(rt,Ft,lr,fr,Ce,Ct,Er,bt),x(Er,Fr,fr),fr.shift();var on={FileIndex:Er,FullPaths:Fr};return _e&&_e.raw&&(on.raw={header:Ie,sectors:lr}),on}function f(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(ne,"Header Signature: "),de.l+=16;var _e=de.read_shift(2,"u");return[de.read_shift(2,"u"),_e]}function h(de,_e){var ge=9;switch(de.l+=2,ge=de.read_shift(2)){case 9:if(_e!=3)throw new Error("Sector Shift: Expected 9 saw "+ge);break;case 12:if(_e!=4)throw new Error("Sector Shift: Expected 12 saw "+ge);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ge)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function g(de,_e){for(var ge=Math.ceil(de.length/_e)-1,be=[],Ce=1;Ce<ge;++Ce)be[Ce-1]=de.slice(Ce*_e,(Ce+1)*_e);return be[ge-1]=de.slice(ge*_e),be}function x(de,_e,ge){for(var be=0,Ce=0,Ee=0,rt=0,bt=0,at=ge.length,ue=[],he=[];be<at;++be)ue[be]=he[be]=be,_e[be]=ge[be];for(;bt<he.length;++bt)be=he[bt],Ce=de[be].L,Ee=de[be].R,rt=de[be].C,ue[be]===be&&(Ce!==-1&&ue[Ce]!==Ce&&(ue[be]=ue[Ce]),Ee!==-1&&ue[Ee]!==Ee&&(ue[be]=ue[Ee])),rt!==-1&&(ue[rt]=be),Ce!==-1&&be!=ue[be]&&(ue[Ce]=ue[be],he.lastIndexOf(Ce)<bt&&he.push(Ce)),Ee!==-1&&be!=ue[be]&&(ue[Ee]=ue[be],he.lastIndexOf(Ee)<bt&&he.push(Ee));for(be=1;be<at;++be)ue[be]===be&&(Ee!==-1&&ue[Ee]!==Ee?ue[be]=ue[Ee]:Ce!==-1&&ue[Ce]!==Ce&&(ue[be]=ue[Ce]));for(be=1;be<at;++be)if(de[be].type!==0){if(bt=be,bt!=ue[bt])do bt=ue[bt],_e[be]=_e[bt]+"/"+_e[be];while(bt!==0&&ue[bt]!==-1&&bt!=ue[bt]);ue[be]=-1}for(_e[0]+="/",be=1;be<at;++be)de[be].type!==2&&(_e[be]+="/")}function y(de,_e,ge){for(var be=de.start,Ce=de.size,Ee=[],rt=be;ge&&Ce>0&&rt>=0;)Ee.push(_e.slice(rt*V,rt*V+V)),Ce-=V,rt=Yh(ge,rt*4);return Ee.length===0?Lt(0):bi(Ee).slice(0,de.size)}function v(de,_e,ge,be,Ce){var Ee=J;if(de===J){if(_e!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var rt=ge[de],bt=(be>>>2)-1;if(!rt)return;for(var at=0;at<bt&&(Ee=Yh(rt,at*4))!==J;++at)Ce.push(Ee);v(Yh(rt,be-4),_e-1,ge,be,Ce)}}function T(de,_e,ge,be,Ce){var Ee=[],rt=[];Ce||(Ce=[]);var bt=be-1,at=0,ue=0;for(at=_e;at>=0;){Ce[at]=!0,Ee[Ee.length]=at,rt.push(de[at]);var he=ge[Math.floor(at*4/be)];if(ue=at*4&bt,be<4+ue)throw new Error("FAT boundary crossed: "+at+" 4 "+be);if(!de[he])break;at=Yh(de[he],ue)}return{nodes:Ee,data:ND([rt])}}function k(de,_e,ge,be){var Ce=de.length,Ee=[],rt=[],bt=[],at=[],ue=be-1,he=0,Ae=0,Ie=0,Ze=0;for(he=0;he<Ce;++he)if(bt=[],Ie=he+_e,Ie>=Ce&&(Ie-=Ce),!rt[Ie]){at=[];var mt=[];for(Ae=Ie;Ae>=0;){mt[Ae]=!0,rt[Ae]=!0,bt[bt.length]=Ae,at.push(de[Ae]);var Tt=ge[Math.floor(Ae*4/be)];if(Ze=Ae*4&ue,be<4+Ze)throw new Error("FAT boundary crossed: "+Ae+" 4 "+be);if(!de[Tt]||(Ae=Yh(de[Tt],Ze),mt[Ae]))break}Ee[Ie]={nodes:bt,data:ND([at])}}return Ee}function b(de,_e,ge,be,Ce,Ee,rt,bt){for(var at=0,ue=be.length?2:0,he=_e[de].data,Ae=0,Ie=0,Ze;Ae<he.length;Ae+=128){var mt=he.slice(Ae,Ae+128);Hi(mt,64),Ie=mt.read_shift(2),Ze=iE(mt,0,Ie-ue),be.push(Ze);var Tt={name:Ze,type:mt.read_shift(1),color:mt.read_shift(1),L:mt.read_shift(4,"i"),R:mt.read_shift(4,"i"),C:mt.read_shift(4,"i"),clsid:mt.read_shift(16),state:mt.read_shift(4,"i"),start:0,size:0},lr=mt.read_shift(2)+mt.read_shift(2)+mt.read_shift(2)+mt.read_shift(2);lr!==0&&(Tt.ct=E(mt,mt.l-8));var Ft=mt.read_shift(2)+mt.read_shift(2)+mt.read_shift(2)+mt.read_shift(2);Ft!==0&&(Tt.mt=E(mt,mt.l-8)),Tt.start=mt.read_shift(4,"i"),Tt.size=mt.read_shift(4,"i"),Tt.size<0&&Tt.start<0&&(Tt.size=Tt.type=0,Tt.start=J,Tt.name=""),Tt.type===5?(at=Tt.start,Ce>0&&at!==J&&(_e[at].name="!StreamData")):Tt.size>=4096?(Tt.storage="fat",_e[Tt.start]===void 0&&(_e[Tt.start]=T(ge,Tt.start,_e.fat_addrs,_e.ssz)),_e[Tt.start].name=Tt.name,Tt.content=_e[Tt.start].data.slice(0,Tt.size)):(Tt.storage="minifat",Tt.size<0?Tt.size=0:at!==J&&Tt.start!==J&&_e[at]&&(Tt.content=y(Tt,_e[at].data,(_e[bt]||{}).data))),Tt.content&&Hi(Tt.content,0),Ee[Ze]=Tt,rt.push(Tt)}}function E(de,_e){return new Date((jl(de,_e+4)/1e7*Math.pow(2,32)+jl(de,_e)/1e7-11644473600)*1e3)}function N(de,_e){return u(),d(l.readFileSync(de),_e)}function P(de,_e){var ge=_e&&_e.type;switch(ge||Sn&&Buffer.isBuffer(de)&&(ge="buffer"),ge||"base64"){case"file":return N(de,_e);case"base64":return d(Fl(Bl(de)),_e);case"binary":return d(Fl(de),_e)}return d(de,_e)}function M(de,_e){var ge=_e||{},be=ge.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=be+"/",de.FileIndex[0]={name:be,type:5}),ge.CLSID&&(de.FileIndex[0].clsid=ge.CLSID),j(de)}function j(de){var _e="Sh33tJ5";if(!zr.find(de,"/"+_e)){var ge=Lt(4);ge[0]=55,ge[1]=ge[3]=50,ge[2]=54,de.FileIndex.push({name:_e,type:2,content:ge,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+_e),A(de)}}function A(de,_e){M(de);for(var ge=!1,be=!1,Ce=de.FullPaths.length-1;Ce>=0;--Ce){var Ee=de.FileIndex[Ce];switch(Ee.type){case 0:be?ge=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:be=!0,isNaN(Ee.R*Ee.L*Ee.C)&&(ge=!0),Ee.R>-1&&Ee.L>-1&&Ee.R==Ee.L&&(ge=!0);break;default:ge=!0;break}}if(!(!ge&&!_e)){var rt=new Date(1987,1,19),bt=0,at=Object.create?Object.create(null):{},ue=[];for(Ce=0;Ce<de.FullPaths.length;++Ce)at[de.FullPaths[Ce]]=!0,de.FileIndex[Ce].type!==0&&ue.push([de.FullPaths[Ce],de.FileIndex[Ce]]);for(Ce=0;Ce<ue.length;++Ce){var he=n(ue[Ce][0]);be=at[he],be||(ue.push([he,{name:s(he).replace("/",""),type:1,clsid:ie,ct:rt,mt:rt,content:null}]),at[he]=!0)}for(ue.sort(function(Ze,mt){return r(Ze[0],mt[0])}),de.FullPaths=[],de.FileIndex=[],Ce=0;Ce<ue.length;++Ce)de.FullPaths[Ce]=ue[Ce][0],de.FileIndex[Ce]=ue[Ce][1];for(Ce=0;Ce<ue.length;++Ce){var Ae=de.FileIndex[Ce],Ie=de.FullPaths[Ce];if(Ae.name=s(Ie).replace("/",""),Ae.L=Ae.R=Ae.C=-(Ae.color=1),Ae.size=Ae.content?Ae.content.length:0,Ae.start=0,Ae.clsid=Ae.clsid||ie,Ce===0)Ae.C=ue.length>1?1:-1,Ae.size=0,Ae.type=5;else if(Ie.slice(-1)=="/"){for(bt=Ce+1;bt<ue.length&&n(de.FullPaths[bt])!=Ie;++bt);for(Ae.C=bt>=ue.length?-1:bt,bt=Ce+1;bt<ue.length&&n(de.FullPaths[bt])!=n(Ie);++bt);Ae.R=bt>=ue.length?-1:bt,Ae.type=1}else n(de.FullPaths[Ce+1]||"")==n(Ie)&&(Ae.R=Ce+1),Ae.type=2}}}function F(de,_e){var ge=_e||{};if(ge.fileType=="mad")return Wt(de,ge);switch(A(de),ge.fileType){case"zip":return Me(de,ge)}var be=(function(Ze){for(var mt=0,Tt=0,lr=0;lr<Ze.FileIndex.length;++lr){var Ft=Ze.FileIndex[lr];if(Ft.content){var Ct=Ft.content.length;Ct>0&&(Ct<4096?mt+=Ct+63>>6:Tt+=Ct+511>>9)}}for(var fr=Ze.FullPaths.length+3>>2,Er=mt+7>>3,Fr=mt+127>>7,on=Er+Tt+fr+Fr,ln=on+127>>7,Yr=ln<=109?0:Math.ceil((ln-109)/127);on+ln+Yr+127>>7>ln;)Yr=++ln<=109?0:Math.ceil((ln-109)/127);var Pr=[1,Yr,ln,Fr,fr,Tt,mt,0];return Ze.FileIndex[0].size=mt<<6,Pr[7]=(Ze.FileIndex[0].start=Pr[0]+Pr[1]+Pr[2]+Pr[3]+Pr[4]+Pr[5])+(Pr[6]+7>>3),Pr})(de),Ce=Lt(be[7]<<9),Ee=0,rt=0;{for(Ee=0;Ee<8;++Ee)Ce.write_shift(1,ee[Ee]);for(Ee=0;Ee<8;++Ee)Ce.write_shift(2,0);for(Ce.write_shift(2,62),Ce.write_shift(2,3),Ce.write_shift(2,65534),Ce.write_shift(2,9),Ce.write_shift(2,6),Ee=0;Ee<3;++Ee)Ce.write_shift(2,0);for(Ce.write_shift(4,0),Ce.write_shift(4,be[2]),Ce.write_shift(4,be[0]+be[1]+be[2]+be[3]-1),Ce.write_shift(4,0),Ce.write_shift(4,4096),Ce.write_shift(4,be[3]?be[0]+be[1]+be[2]-1:J),Ce.write_shift(4,be[3]),Ce.write_shift(-4,be[1]?be[0]-1:J),Ce.write_shift(4,be[1]),Ee=0;Ee<109;++Ee)Ce.write_shift(-4,Ee<be[2]?be[1]+Ee:-1)}if(be[1])for(rt=0;rt<be[1];++rt){for(;Ee<236+rt*127;++Ee)Ce.write_shift(-4,Ee<be[2]?be[1]+Ee:-1);Ce.write_shift(-4,rt===be[1]-1?J:rt+1)}var bt=function(Ze){for(rt+=Ze;Ee<rt-1;++Ee)Ce.write_shift(-4,Ee+1);Ze&&(++Ee,Ce.write_shift(-4,J))};for(rt=Ee=0,rt+=be[1];Ee<rt;++Ee)Ce.write_shift(-4,B.DIFSECT);for(rt+=be[2];Ee<rt;++Ee)Ce.write_shift(-4,B.FATSECT);bt(be[3]),bt(be[4]);for(var at=0,ue=0,he=de.FileIndex[0];at<de.FileIndex.length;++at)he=de.FileIndex[at],he.content&&(ue=he.content.length,!(ue<4096)&&(he.start=rt,bt(ue+511>>9)));for(bt(be[6]+7>>3);Ce.l&511;)Ce.write_shift(-4,B.ENDOFCHAIN);for(rt=Ee=0,at=0;at<de.FileIndex.length;++at)he=de.FileIndex[at],he.content&&(ue=he.content.length,!(!ue||ue>=4096)&&(he.start=rt,bt(ue+63>>6)));for(;Ce.l&511;)Ce.write_shift(-4,B.ENDOFCHAIN);for(Ee=0;Ee<be[4]<<2;++Ee){var Ae=de.FullPaths[Ee];if(!Ae||Ae.length===0){for(at=0;at<17;++at)Ce.write_shift(4,0);for(at=0;at<3;++at)Ce.write_shift(4,-1);for(at=0;at<12;++at)Ce.write_shift(4,0);continue}he=de.FileIndex[Ee],Ee===0&&(he.start=he.size?he.start-1:J);var Ie=Ee===0&&ge.root||he.name;if(ue=2*(Ie.length+1),Ce.write_shift(64,Ie,"utf16le"),Ce.write_shift(2,ue),Ce.write_shift(1,he.type),Ce.write_shift(1,he.color),Ce.write_shift(-4,he.L),Ce.write_shift(-4,he.R),Ce.write_shift(-4,he.C),he.clsid)Ce.write_shift(16,he.clsid,"hex");else for(at=0;at<4;++at)Ce.write_shift(4,0);Ce.write_shift(4,he.state||0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,he.start),Ce.write_shift(4,he.size),Ce.write_shift(4,0)}for(Ee=1;Ee<de.FileIndex.length;++Ee)if(he=de.FileIndex[Ee],he.size>=4096)if(Ce.l=he.start+1<<9,Sn&&Buffer.isBuffer(he.content))he.content.copy(Ce,Ce.l,0,he.size),Ce.l+=he.size+511&-512;else{for(at=0;at<he.size;++at)Ce.write_shift(1,he.content[at]);for(;at&511;++at)Ce.write_shift(1,0)}for(Ee=1;Ee<de.FileIndex.length;++Ee)if(he=de.FileIndex[Ee],he.size>0&&he.size<4096)if(Sn&&Buffer.isBuffer(he.content))he.content.copy(Ce,Ce.l,0,he.size),Ce.l+=he.size+63&-64;else{for(at=0;at<he.size;++at)Ce.write_shift(1,he.content[at]);for(;at&63;++at)Ce.write_shift(1,0)}if(Sn)Ce.l=Ce.length;else for(;Ce.l<Ce.length;)Ce.write_shift(1,0);return Ce}function L(de,_e){var ge=de.FullPaths.map(function(at){return at.toUpperCase()}),be=ge.map(function(at){var ue=at.split("/");return ue[ue.length-(at.slice(-1)=="/"?2:1)]}),Ce=!1;_e.charCodeAt(0)===47?(Ce=!0,_e=ge[0].slice(0,-1)+_e):Ce=_e.indexOf("/")!==-1;var Ee=_e.toUpperCase(),rt=Ce===!0?ge.indexOf(Ee):be.indexOf(Ee);if(rt!==-1)return de.FileIndex[rt];var bt=!Ee.match(Dy);for(Ee=Ee.replace(zo,""),bt&&(Ee=Ee.replace(Dy,"!")),rt=0;rt<ge.length;++rt)if((bt?ge[rt].replace(Dy,"!"):ge[rt]).replace(zo,"")==Ee||(bt?be[rt].replace(Dy,"!"):be[rt]).replace(zo,"")==Ee)return de.FileIndex[rt];return null}var V=64,J=-2,ne="d0cf11e0a1b11ae1",ee=[208,207,17,224,161,177,26,225],ie="00000000000000000000000000000000",B={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:J,FREESECT:-1,HEADER_SIGNATURE:ne,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ie,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Y(de,_e,ge){u();var be=F(de,ge);l.writeFileSync(_e,be)}function I(de){for(var _e=new Array(de.length),ge=0;ge<de.length;++ge)_e[ge]=String.fromCharCode(de[ge]);return _e.join("")}function H(de,_e){var ge=F(de,_e);switch(_e&&_e.type||"buffer"){case"file":return u(),l.writeFileSync(_e.filename,ge),ge;case"binary":return typeof ge=="string"?ge:I(ge);case"base64":return Ev(typeof ge=="string"?ge:I(ge));case"buffer":if(Sn)return Buffer.isBuffer(ge)?ge:w0(ge);case"array":return typeof ge=="string"?Fl(ge):ge}return ge}var W;function R(de){try{var _e=de.InflateRaw,ge=new _e;if(ge._processChunk(new Uint8Array([3,0]),ge._finishFlushFlag),ge.bytesRead)W=de;else throw new Error("zlib does not expose bytesRead")}catch(be){console.error("cannot use native zlib: "+(be.message||be))}}function z(de,_e){if(!W)return ir(de,_e);var ge=W.InflateRaw,be=new ge,Ce=be._processChunk(de.slice(de.l),be._finishFlushFlag);return de.l+=be.bytesRead,Ce}function G(de){return W?W.deflateRawSync(de):st(de)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function se(de){var _e=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(_e>>16|_e>>8|_e)&255}for(var ce=typeof Uint8Array<"u",pe=ce?new Uint8Array(256):[],ke=0;ke<256;++ke)pe[ke]=se(ke);function le(de,_e){var ge=pe[de&255];return _e<=8?ge>>>8-_e:(ge=ge<<8|pe[de>>8&255],_e<=16?ge>>>16-_e:(ge=ge<<8|pe[de>>16&255],ge>>>24-_e))}function ye(de,_e){var ge=_e&7,be=_e>>>3;return(de[be]|(ge<=6?0:de[be+1]<<8))>>>ge&3}function je(de,_e){var ge=_e&7,be=_e>>>3;return(de[be]|(ge<=5?0:de[be+1]<<8))>>>ge&7}function Ne(de,_e){var ge=_e&7,be=_e>>>3;return(de[be]|(ge<=4?0:de[be+1]<<8))>>>ge&15}function We(de,_e){var ge=_e&7,be=_e>>>3;return(de[be]|(ge<=3?0:de[be+1]<<8))>>>ge&31}function $e(de,_e){var ge=_e&7,be=_e>>>3;return(de[be]|(ge<=1?0:de[be+1]<<8))>>>ge&127}function Nt(de,_e,ge){var be=_e&7,Ce=_e>>>3,Ee=(1<<ge)-1,rt=de[Ce]>>>be;return ge<8-be||(rt|=de[Ce+1]<<8-be,ge<16-be)||(rt|=de[Ce+2]<<16-be,ge<24-be)||(rt|=de[Ce+3]<<24-be),rt&Ee}function He(de,_e,ge){var be=_e&7,Ce=_e>>>3;return be<=5?de[Ce]|=(ge&7)<<be:(de[Ce]|=ge<<be&255,de[Ce+1]=(ge&7)>>8-be),_e+3}function Et(de,_e,ge){var be=_e&7,Ce=_e>>>3;return ge=(ge&1)<<be,de[Ce]|=ge,_e+1}function Rt(de,_e,ge){var be=_e&7,Ce=_e>>>3;return ge<<=be,de[Ce]|=ge&255,ge>>>=8,de[Ce+1]=ge,_e+8}function Mt(de,_e,ge){var be=_e&7,Ce=_e>>>3;return ge<<=be,de[Ce]|=ge&255,ge>>>=8,de[Ce+1]=ge&255,de[Ce+2]=ge>>>8,_e+16}function ur(de,_e){var ge=de.length,be=2*ge>_e?2*ge:_e+5,Ce=0;if(ge>=_e)return de;if(Sn){var Ee=cD(be);if(de.copy)de.copy(Ee);else for(;Ce<de.length;++Ce)Ee[Ce]=de[Ce];return Ee}else if(ce){var rt=new Uint8Array(be);if(rt.set)rt.set(de);else for(;Ce<ge;++Ce)rt[Ce]=de[Ce];return rt}return de.length=be,de}function wr(de){for(var _e=new Array(de),ge=0;ge<de;++ge)_e[ge]=0;return _e}function dr(de,_e,ge){var be=1,Ce=0,Ee=0,rt=0,bt=0,at=de.length,ue=ce?new Uint16Array(32):wr(32);for(Ee=0;Ee<32;++Ee)ue[Ee]=0;for(Ee=at;Ee<ge;++Ee)de[Ee]=0;at=de.length;var he=ce?new Uint16Array(at):wr(at);for(Ee=0;Ee<at;++Ee)ue[Ce=de[Ee]]++,be<Ce&&(be=Ce),he[Ee]=0;for(ue[0]=0,Ee=1;Ee<=be;++Ee)ue[Ee+16]=bt=bt+ue[Ee-1]<<1;for(Ee=0;Ee<at;++Ee)bt=de[Ee],bt!=0&&(he[Ee]=ue[bt+16]++);var Ae=0;for(Ee=0;Ee<at;++Ee)if(Ae=de[Ee],Ae!=0)for(bt=le(he[Ee],be)>>be-Ae,rt=(1<<be+4-Ae)-1;rt>=0;--rt)_e[bt|rt<<Ae]=Ae&15|Ee<<4;return be}var wt=ce?new Uint16Array(512):wr(512),Ke=ce?new Uint16Array(32):wr(32);if(!ce){for(var it=0;it<512;++it)wt[it]=0;for(it=0;it<32;++it)Ke[it]=0}(function(){for(var de=[],_e=0;_e<32;_e++)de.push(5);dr(de,Ke,32);var ge=[];for(_e=0;_e<=143;_e++)ge.push(8);for(;_e<=255;_e++)ge.push(9);for(;_e<=279;_e++)ge.push(7);for(;_e<=287;_e++)ge.push(8);dr(ge,wt,288)})();var vt=(function(){for(var _e=ce?new Uint8Array(32768):[],ge=0,be=0;ge<q.length-1;++ge)for(;be<q[ge+1];++be)_e[be]=ge;for(;be<32768;++be)_e[be]=29;var Ce=ce?new Uint8Array(259):[];for(ge=0,be=0;ge<re.length-1;++ge)for(;be<re[ge+1];++be)Ce[be]=ge;function Ee(bt,at){for(var ue=0;ue<bt.length;){var he=Math.min(65535,bt.length-ue),Ae=ue+he==bt.length;for(at.write_shift(1,+Ae),at.write_shift(2,he),at.write_shift(2,~he&65535);he-- >0;)at[at.l++]=bt[ue++]}return at.l}function rt(bt,at){for(var ue=0,he=0,Ae=ce?new Uint16Array(32768):[];he<bt.length;){var Ie=Math.min(65535,bt.length-he);if(Ie<10){for(ue=He(at,ue,+(he+Ie==bt.length)),ue&7&&(ue+=8-(ue&7)),at.l=ue/8|0,at.write_shift(2,Ie),at.write_shift(2,~Ie&65535);Ie-- >0;)at[at.l++]=bt[he++];ue=at.l*8;continue}ue=He(at,ue,+(he+Ie==bt.length)+2);for(var Ze=0;Ie-- >0;){var mt=bt[he];Ze=(Ze<<5^mt)&32767;var Tt=-1,lr=0;if((Tt=Ae[Ze])&&(Tt|=he&-32768,Tt>he&&(Tt-=32768),Tt<he))for(;bt[Tt+lr]==bt[he+lr]&&lr<250;)++lr;if(lr>2){mt=Ce[lr],mt<=22?ue=Rt(at,ue,pe[mt+1]>>1)-1:(Rt(at,ue,3),ue+=5,Rt(at,ue,pe[mt-23]>>5),ue+=3);var Ft=mt<8?0:mt-4>>2;Ft>0&&(Mt(at,ue,lr-re[mt]),ue+=Ft),mt=_e[he-Tt],ue=Rt(at,ue,pe[mt]>>3),ue-=3;var Ct=mt<4?0:mt-2>>1;Ct>0&&(Mt(at,ue,he-Tt-q[mt]),ue+=Ct);for(var fr=0;fr<lr;++fr)Ae[Ze]=he&32767,Ze=(Ze<<5^bt[he])&32767,++he;Ie-=lr-1}else mt<=143?mt=mt+48:ue=Et(at,ue,1),ue=Rt(at,ue,pe[mt]),Ae[Ze]=he&32767,++he}ue=Rt(at,ue,0)-1}return at.l=(ue+7)/8|0,at.l}return function(at,ue){return at.length<8?Ee(at,ue):rt(at,ue)}})();function st(de){var _e=Lt(50+Math.floor(de.length*1.1)),ge=vt(de,_e);return _e.slice(0,ge)}var qe=ce?new Uint16Array(32768):wr(32768),ot=ce?new Uint16Array(32768):wr(32768),kt=ce?new Uint16Array(128):wr(128),Ut=1,Qt=1;function Gt(de,_e){var ge=We(de,_e)+257;_e+=5;var be=We(de,_e)+1;_e+=5;var Ce=Ne(de,_e)+4;_e+=4;for(var Ee=0,rt=ce?new Uint8Array(19):wr(19),bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],at=1,ue=ce?new Uint8Array(8):wr(8),he=ce?new Uint8Array(8):wr(8),Ae=rt.length,Ie=0;Ie<Ce;++Ie)rt[Q[Ie]]=Ee=je(de,_e),at<Ee&&(at=Ee),ue[Ee]++,_e+=3;var Ze=0;for(ue[0]=0,Ie=1;Ie<=at;++Ie)he[Ie]=Ze=Ze+ue[Ie-1]<<1;for(Ie=0;Ie<Ae;++Ie)(Ze=rt[Ie])!=0&&(bt[Ie]=he[Ze]++);var mt=0;for(Ie=0;Ie<Ae;++Ie)if(mt=rt[Ie],mt!=0){Ze=pe[bt[Ie]]>>8-mt;for(var Tt=(1<<7-mt)-1;Tt>=0;--Tt)kt[Ze|Tt<<mt]=mt&7|Ie<<3}var lr=[];for(at=1;lr.length<ge+be;)switch(Ze=kt[$e(de,_e)],_e+=Ze&7,Ze>>>=3){case 16:for(Ee=3+ye(de,_e),_e+=2,Ze=lr[lr.length-1];Ee-- >0;)lr.push(Ze);break;case 17:for(Ee=3+je(de,_e),_e+=3;Ee-- >0;)lr.push(0);break;case 18:for(Ee=11+$e(de,_e),_e+=7;Ee-- >0;)lr.push(0);break;default:lr.push(Ze),at<Ze&&(at=Ze);break}var Ft=lr.slice(0,ge),Ct=lr.slice(ge);for(Ie=ge;Ie<286;++Ie)Ft[Ie]=0;for(Ie=be;Ie<30;++Ie)Ct[Ie]=0;return Ut=dr(Ft,qe,286),Qt=dr(Ct,ot,30),_e}function Zt(de,_e){if(de[0]==3&&!(de[1]&3))return[Uf(_e),2];for(var ge=0,be=0,Ce=cD(_e||1<<18),Ee=0,rt=Ce.length>>>0,bt=0,at=0;(be&1)==0;){if(be=je(de,ge),ge+=3,be>>>1)be>>1==1?(bt=9,at=5):(ge=Gt(de,ge),bt=Ut,at=Qt);else{ge&7&&(ge+=8-(ge&7));var ue=de[ge>>>3]|de[(ge>>>3)+1]<<8;if(ge+=32,ue>0)for(!_e&&rt<Ee+ue&&(Ce=ur(Ce,Ee+ue),rt=Ce.length);ue-- >0;)Ce[Ee++]=de[ge>>>3],ge+=8;continue}for(;;){!_e&&rt<Ee+32767&&(Ce=ur(Ce,Ee+32767),rt=Ce.length);var he=Nt(de,ge,bt),Ae=be>>>1==1?wt[he]:qe[he];if(ge+=Ae&15,Ae>>>=4,(Ae>>>8&255)===0)Ce[Ee++]=Ae;else{if(Ae==256)break;Ae-=257;var Ie=Ae<8?0:Ae-4>>2;Ie>5&&(Ie=0);var Ze=Ee+re[Ae];Ie>0&&(Ze+=Nt(de,ge,Ie),ge+=Ie),he=Nt(de,ge,at),Ae=be>>>1==1?Ke[he]:ot[he],ge+=Ae&15,Ae>>>=4;var mt=Ae<4?0:Ae-2>>1,Tt=q[Ae];for(mt>0&&(Tt+=Nt(de,ge,mt),ge+=mt),!_e&&rt<Ze&&(Ce=ur(Ce,Ze+100),rt=Ce.length);Ee<Ze;)Ce[Ee]=Ce[Ee-Tt],++Ee}}}return _e?[Ce,ge+7>>>3]:[Ce.slice(0,Ee),ge+7>>>3]}function ir(de,_e){var ge=de.slice(de.l||0),be=Zt(ge,_e);return de.l+=be[1],be[0]}function kr(de,_e){if(de)typeof console<"u"&&console.error(_e);else throw new Error(_e)}function ve(de,_e){var ge=de;Hi(ge,0);var be=[],Ce=[],Ee={FileIndex:be,FullPaths:Ce};M(Ee,{root:_e.root});for(var rt=ge.length-4;(ge[rt]!=80||ge[rt+1]!=75||ge[rt+2]!=5||ge[rt+3]!=6)&&rt>=0;)--rt;ge.l=rt+4,ge.l+=4;var bt=ge.read_shift(2);ge.l+=6;var at=ge.read_shift(4);for(ge.l=at,rt=0;rt<bt;++rt){ge.l+=20;var ue=ge.read_shift(4),he=ge.read_shift(4),Ae=ge.read_shift(2),Ie=ge.read_shift(2),Ze=ge.read_shift(2);ge.l+=8;var mt=ge.read_shift(4),Tt=o(ge.slice(ge.l+Ae,ge.l+Ae+Ie));ge.l+=Ae+Ie+Ze;var lr=ge.l;ge.l=mt+4,Pe(ge,ue,he,Ee,Tt),ge.l=lr}return Ee}function Pe(de,_e,ge,be,Ce){de.l+=2;var Ee=de.read_shift(2),rt=de.read_shift(2),bt=i(de);if(Ee&8257)throw new Error("Unsupported ZIP encryption");for(var at=de.read_shift(4),ue=de.read_shift(4),he=de.read_shift(4),Ae=de.read_shift(2),Ie=de.read_shift(2),Ze="",mt=0;mt<Ae;++mt)Ze+=String.fromCharCode(de[de.l++]);if(Ie){var Tt=o(de.slice(de.l,de.l+Ie));(Tt[21589]||{}).mt&&(bt=Tt[21589].mt),((Ce||{})[21589]||{}).mt&&(bt=Ce[21589].mt)}de.l+=Ie;var lr=de.slice(de.l,de.l+ue);switch(rt){case 8:lr=z(de,he);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+rt)}var Ft=!1;Ee&8&&(at=de.read_shift(4),at==134695760&&(at=de.read_shift(4),Ft=!0),ue=de.read_shift(4),he=de.read_shift(4)),ue!=_e&&kr(Ft,"Bad compressed size: "+_e+" != "+ue),he!=ge&&kr(Ft,"Bad uncompressed size: "+ge+" != "+he),xt(be,Ze,lr,{unsafe:!0,mt:bt})}function Me(de,_e){var ge=_e||{},be=[],Ce=[],Ee=Lt(1),rt=ge.compression?8:0,bt=0,at=0,ue=0,he=0,Ae=0,Ie=de.FullPaths[0],Ze=Ie,mt=de.FileIndex[0],Tt=[],lr=0;for(at=1;at<de.FullPaths.length;++at)if(Ze=de.FullPaths[at].slice(Ie.length),mt=de.FileIndex[at],!(!mt.size||!mt.content||Ze=="Sh33tJ5")){var Ft=he,Ct=Lt(Ze.length);for(ue=0;ue<Ze.length;++ue)Ct.write_shift(1,Ze.charCodeAt(ue)&127);Ct=Ct.slice(0,Ct.l),Tt[Ae]=Cfe.buf(mt.content,0);var fr=mt.content;rt==8&&(fr=G(fr)),Ee=Lt(30),Ee.write_shift(4,67324752),Ee.write_shift(2,20),Ee.write_shift(2,bt),Ee.write_shift(2,rt),mt.mt?a(Ee,mt.mt):Ee.write_shift(4,0),Ee.write_shift(-4,Tt[Ae]),Ee.write_shift(4,fr.length),Ee.write_shift(4,mt.content.length),Ee.write_shift(2,Ct.length),Ee.write_shift(2,0),he+=Ee.length,be.push(Ee),he+=Ct.length,be.push(Ct),he+=fr.length,be.push(fr),Ee=Lt(46),Ee.write_shift(4,33639248),Ee.write_shift(2,0),Ee.write_shift(2,20),Ee.write_shift(2,bt),Ee.write_shift(2,rt),Ee.write_shift(4,0),Ee.write_shift(-4,Tt[Ae]),Ee.write_shift(4,fr.length),Ee.write_shift(4,mt.content.length),Ee.write_shift(2,Ct.length),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(4,0),Ee.write_shift(4,Ft),lr+=Ee.l,Ce.push(Ee),lr+=Ct.length,Ce.push(Ct),++Ae}return Ee=Lt(22),Ee.write_shift(4,101010256),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,Ae),Ee.write_shift(2,Ae),Ee.write_shift(4,lr),Ee.write_shift(4,he),Ee.write_shift(2,0),bi([bi(be),bi(Ce),Ee])}var ze={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function At(de,_e){if(de.ctype)return de.ctype;var ge=de.name||"",be=ge.match(/\.([^\.]+)$/);return be&&ze[be[1]]||_e&&(be=(ge=_e).match(/[\.\\]([^\.\\])+$/),be&&ze[be[1]])?ze[be[1]]:"application/octet-stream"}function Kt(de){for(var _e=Ev(de),ge=[],be=0;be<_e.length;be+=76)ge.push(_e.slice(be,be+76));return ge.join(`\r
`)+`\r
`}function hr(de){var _e=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ue){var he=ue.charCodeAt(0).toString(16).toUpperCase();return"="+(he.length==1?"0"+he:he)});_e=_e.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),_e.charAt(0)==`
`&&(_e="=0D"+_e.slice(1)),_e=_e.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ge=[],be=_e.split(`\r
`),Ce=0;Ce<be.length;++Ce){var Ee=be[Ce];if(Ee.length==0){ge.push("");continue}for(var rt=0;rt<Ee.length;){var bt=76,at=Ee.slice(rt,rt+bt);at.charAt(bt-1)=="="?bt--:at.charAt(bt-2)=="="?bt-=2:at.charAt(bt-3)=="="&&(bt-=3),at=Ee.slice(rt,rt+bt),rt+=bt,rt<Ee.length&&(at+="="),ge.push(at)}}return ge.join(`\r
`)}function Ye(de){for(var _e=[],ge=0;ge<de.length;++ge){for(var be=de[ge];ge<=de.length&&be.charAt(be.length-1)=="=";)be=be.slice(0,be.length-1)+de[++ge];_e.push(be)}for(var Ce=0;Ce<_e.length;++Ce)_e[Ce]=_e[Ce].replace(/[=][0-9A-Fa-f]{2}/g,function(Ee){return String.fromCharCode(parseInt(Ee.slice(1),16))});return Fl(_e.join(`\r
`))}function ft(de,_e,ge){for(var be="",Ce="",Ee="",rt,bt=0;bt<10;++bt){var at=_e[bt];if(!at||at.match(/^\s*$/))break;var ue=at.match(/^(.*?):\s*([^\s].*)$/);if(ue)switch(ue[1].toLowerCase()){case"content-location":be=ue[2].trim();break;case"content-type":Ee=ue[2].trim();break;case"content-transfer-encoding":Ce=ue[2].trim();break}}switch(++bt,Ce.toLowerCase()){case"base64":rt=Fl(Bl(_e.slice(bt).join("")));break;case"quoted-printable":rt=Ye(_e.slice(bt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ce)}var he=xt(de,be.slice(ge.length),rt,{unsafe:!0});Ee&&(he.ctype=Ee)}function lt(de,_e){if(I(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ge=_e&&_e.root||"",be=(Sn&&Buffer.isBuffer(de)?de.toString("binary"):I(de)).split(`\r
`),Ce=0,Ee="";for(Ce=0;Ce<be.length;++Ce)if(Ee=be[Ce],!!/^Content-Location:/i.test(Ee)&&(Ee=Ee.slice(Ee.indexOf("file")),ge||(ge=Ee.slice(0,Ee.lastIndexOf("/")+1)),Ee.slice(0,ge.length)!=ge))for(;ge.length>0&&(ge=ge.slice(0,ge.length-1),ge=ge.slice(0,ge.lastIndexOf("/")+1),Ee.slice(0,ge.length)!=ge););var rt=(be[1]||"").match(/boundary="(.*?)"/);if(!rt)throw new Error("MAD cannot find boundary");var bt="--"+(rt[1]||""),at=[],ue=[],he={FileIndex:at,FullPaths:ue};M(he);var Ae,Ie=0;for(Ce=0;Ce<be.length;++Ce){var Ze=be[Ce];Ze!==bt&&Ze!==bt+"--"||(Ie++&&ft(he,be.slice(Ae,Ce),ge),Ae=Ce)}return he}function Wt(de,_e){var ge=_e||{},be=ge.boundary||"SheetJS";be="------="+be;for(var Ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+be.slice(2)+'"',"","",""],Ee=de.FullPaths[0],rt=Ee,bt=de.FileIndex[0],at=1;at<de.FullPaths.length;++at)if(rt=de.FullPaths[at].slice(Ee.length),bt=de.FileIndex[at],!(!bt.size||!bt.content||rt=="Sh33tJ5")){rt=rt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(lr){return"_x"+lr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(lr){return"_u"+lr.charCodeAt(0).toString(16)+"_"});for(var ue=bt.content,he=Sn&&Buffer.isBuffer(ue)?ue.toString("binary"):I(ue),Ae=0,Ie=Math.min(1024,he.length),Ze=0,mt=0;mt<=Ie;++mt)(Ze=he.charCodeAt(mt))>=32&&Ze<128&&++Ae;var Tt=Ae>=Ie*4/5;Ce.push(be),Ce.push("Content-Location: "+(ge.root||"file:///C:/SheetJS/")+rt),Ce.push("Content-Transfer-Encoding: "+(Tt?"quoted-printable":"base64")),Ce.push("Content-Type: "+At(bt,rt)),Ce.push(""),Ce.push(Tt?hr(he):Kt(he))}return Ce.push(be+`--\r
`),Ce.join(`\r
`)}function Fe(de){var _e={};return M(_e,de),_e}function xt(de,_e,ge,be){var Ce=be&&be.unsafe;Ce||M(de);var Ee=!Ce&&zr.find(de,_e);if(!Ee){var rt=de.FullPaths[0];_e.slice(0,rt.length)==rt?rt=_e:(rt.slice(-1)!="/"&&(rt+="/"),rt=(rt+_e).replace("//","/")),Ee={name:s(_e),type:2},de.FileIndex.push(Ee),de.FullPaths.push(rt),Ce||zr.utils.cfb_gc(de)}return Ee.content=ge,Ee.size=ge?ge.length:0,be&&(be.CLSID&&(Ee.clsid=be.CLSID),be.mt&&(Ee.mt=be.mt),be.ct&&(Ee.ct=be.ct)),Ee}function yt(de,_e){M(de);var ge=zr.find(de,_e);if(ge){for(var be=0;be<de.FileIndex.length;++be)if(de.FileIndex[be]==ge)return de.FileIndex.splice(be,1),de.FullPaths.splice(be,1),!0}return!1}function zt(de,_e,ge){M(de);var be=zr.find(de,_e);if(be){for(var Ce=0;Ce<de.FileIndex.length;++Ce)if(de.FileIndex[Ce]==be)return de.FileIndex[Ce].name=s(ge),de.FullPaths[Ce]=ge,!0}return!1}function or(de){A(de,!0)}return t.find=L,t.read=P,t.parse=d,t.write=H,t.writeFile=Y,t.utils={cfb_new:Fe,cfb_add:xt,cfb_del:yt,cfb_mov:zt,cfb_gc:or,ReadShift:Yy,CheckField:JH,prep_blob:Hi,bconcat:bi,use_zlib:R,_deflateRaw:st,_inflateRaw:ir,consts:B},t})();function Efe(e){return typeof e=="string"?l3(e):Array.isArray(e)?Z0e(e):e}function _2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=l3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Hu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([Efe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=th(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function Nfe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function ha(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function xD(e,t){for(var r=[],n=ha(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function u3(e){for(var t=[],r=ha(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function d3(e){for(var t=[],r=ha(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Afe(e){for(var t=[],r=ha(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var L4=new Date(1899,11,30,0,0,0);function ni(e,t){var r=e.getTime(),n=L4.getTime()+(e.getTimezoneOffset()-L4.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var jH=new Date,jfe=L4.getTime()+(jH.getTimezoneOffset()-L4.getTimezoneOffset())*6e4,yD=jH.getTimezoneOffset();function f3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+jfe),t.getTimezoneOffset()!==yD&&t.setTime(t.getTime()+(t.getTimezoneOffset()-yD)*6e4),t}function Pfe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var vD=new Date("2017-02-19T19:06:09.000Z"),PH=isNaN(vD.getFullYear())?new Date("2/19/17"):vD,Mfe=PH.getFullYear()==2017;function As(e,t){var r=new Date(e);if(Mfe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(PH.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Fm(e,t){if(Sn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Hu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Hu(yH(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Hu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Hu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function js(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=js(e[r]));return t}function da(e,t){for(var r="";r.length<t;)r+=e;return r}function au(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var Ffe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Vp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Ffe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Dfe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function MH(e){return e?e.content&&e.type?Fm(e.content,!0):e.data?Fy(e.data):e.asNodeBuffer&&Sn?Fy(e.asNodeBuffer().toString("binary")):e.asBinary?Fy(e.asBinary()):e._data&&e._data.getContent?Fy(Fm(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function FH(e){if(!e)return null;if(e.data)return oD(e.data);if(e.asNodeBuffer&&Sn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?oD(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Ofe(e){return e&&e.name.slice(-4)===".bin"?FH(e):MH(e)}function uc(e,t){for(var r=e.FullPaths||ha(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function eE(e,t){var r=uc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Oa(e,t,r){if(!r)return Ofe(eE(e,t));if(!t)return null;try{return Oa(e,t)}catch{return null}}function Dl(e,t,r){if(!r)return MH(eE(e,t));if(!t)return null;try{return Dl(e,t)}catch{return null}}function Rfe(e,t,r){return FH(eE(e,t))}function wD(e){for(var t=e.FullPaths||ha(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function vn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Sn?n=w0(r):n=efe(r),zr.utils.cfb_add(e,t,n)}zr.utils.cfb_add(e,t,r)}else e.file(t,r)}function tE(){return zr.utils.cfb_new()}function DH(e,t){switch(t.type){case"base64":return zr.read(e,{type:"base64"});case"binary":return zr.read(e,{type:"binary"});case"buffer":case"array":return zr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Oy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Aa=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ife=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,bD=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Lfe=/<[^>]*>/g,wo=Aa.match(bD)?bD:Lfe,Bfe=/<\w*:/,$fe=/<(\/?)\w+:/;function rn(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(Ife),o=0,l="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(h=(s=f.charCodeAt(a+1))==34||s==39?1:0,l=f.slice(a+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=l,n[g.toLowerCase()]=l}}return n}function ad(e){return e.replace($fe,"<$1")}var OH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rE=u3(OH),Rn=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,l){return OH[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),nE=/[&<>'"]/g,zfe=/[\u0000-\u0008\u000b-\u001f]/g;function ss(e){var t=e+"";return t.replace(nE,function(r){return rE[r]}).replace(zfe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function _D(e){return ss(e).replace(/ /g,"_x0020_")}var RH=/[\u0000-\u001f]/g;function sE(e){var t=e+"";return t.replace(nE,function(r){return rE[r]}).replace(/\n/g,"<br/>").replace(RH,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Ufe(e){var t=e+"";return t.replace(nE,function(r){return rE[r]}).replace(RH,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var SD=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Wfe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ts(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function L5(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function kD(e){var t=Uf(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function TD(e){return w0(e,"binary").toString("utf8")}var hb="foo bar baz",ds=Sn&&(TD(hb)==L5(hb)&&TD||kD(hb)==L5(hb)&&kD)||L5,Hu=Sn?function(e){return w0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Av=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),IH=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),Hfe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Gfe=/<\/?(?:vt:)?variant>/g,Vfe=/<(?:vt:)([^>]*)>([\s\S]*)</;function CD(e,t){var r=rn(e),n=e.match(Hfe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(Gfe,"").match(Vfe);i&&s.push({v:ds(i[2]),t:i[1]})}),s}var LH=/(^\s|\s$|\n)/;function qi(e,t){return"<"+e+(t.match(LH)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function jv(e){return ha(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function mr(e,t,r){return"<"+e+(r!=null?jv(r):"")+(t!=null?(t.match(LH)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function U8(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function qfe(e,t){switch(typeof e){case"string":var r=mr("vt:lpwstr",ss(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return mr((e|0)==e?"vt:i4":"vt:r8",ss(String(e)));case"boolean":return mr("vt:bool",e?"true":"false")}if(e instanceof Date)return mr("vt:filetime",U8(e));throw new Error("Unable to serialize "+e)}function aE(e){if(Sn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ds(th(JC(e)));throw new Error("Bad input format: expected Buffer or string")}var Pv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ei={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ym=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Al={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Kfe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Yfe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var ED=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},ND=Sn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:w0(t)})):ED(e)}:ED,AD=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Kd(e,s)));return n.join("").replace(zo,"")},iE=Sn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(zo,""):AD(e,t,r)}:AD,jD=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},BH=Sn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):jD(e,t,r)}:jD,PD=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(up(e,s)));return n.join("")},S2=Sn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):PD(t,r,n)}:PD,$H=function(e,t){var r=jl(e,t);return r>0?S2(e,t+4,t+4+r-1):""},zH=$H,UH=function(e,t){var r=jl(e,t);return r>0?S2(e,t+4,t+4+r-1):""},WH=UH,HH=function(e,t){var r=2*jl(e,t);return r>0?S2(e,t+4,t+4+r-1):""},GH=HH,VH=function(t,r){var n=jl(t,r);return n>0?iE(t,r+4,r+4+n):""},qH=VH,KH=function(e,t){var r=jl(e,t);return r>0?S2(e,t+4,t+4+r):""},YH=KH,XH=function(e,t){return Kfe(e,t)},B4=XH,oE=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Sn&&(zH=function(t,r){if(!Buffer.isBuffer(t))return $H(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},WH=function(t,r){if(!Buffer.isBuffer(t))return UH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},GH=function(t,r){if(!Buffer.isBuffer(t))return HH(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},qH=function(t,r){if(!Buffer.isBuffer(t))return VH(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},YH=function(t,r){if(!Buffer.isBuffer(t))return KH(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},B4=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):XH(t,r)},oE=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var up=function(e,t){return e[t]},Kd=function(e,t){return e[t+1]*256+e[t]},Xfe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},jl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Yh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Jfe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Yy(e,t){var r="",n,s,a=[],i,o,l,u;switch(t){case"dbcs":if(u=this.l,Sn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(Kd(this,u)),u+=2;e*=2;break;case"utf8":r=S2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=iE(this,this.l,this.l+e);break;case"wstr":return Yy.call(this,e,"dbcs");case"lpstr-ansi":r=zH(this,this.l),e=4+jl(this,this.l);break;case"lpstr-cp":r=WH(this,this.l),e=4+jl(this,this.l);break;case"lpwstr":r=GH(this,this.l),e=4+2*jl(this,this.l);break;case"lpp4":e=4+jl(this,this.l),r=qH(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+jl(this,this.l),r=YH(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=up(this,this.l+e++))!==0;)a.push(fb(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=Kd(this,this.l+e))!==0;)a.push(fb(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=up(this,u),this.l=u+1,o=Yy.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(fb(Kd(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=up(this,u),this.l=u+1,o=Yy.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(fb(up(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=up(this,this.l),this.l++,n;case 2:return n=(t==="i"?Xfe:Kd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Yh:Jfe)(this,this.l),this.l+=4,n):(s=jl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=B4(this,this.l):s=B4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=BH(this,this.l,e);break}}return this.l+=e,r}var Qfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Zfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ehe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function the(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)ehe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Qfe(this,t,this.l);break;case 8:if(n=8,r==="f"){Yfe(this,t,this.l);break}case 16:break;case-4:n=4,Zfe(this,t,this.l);break}return this.l+=n,this}function JH(e,t){var r=BH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Hi(e,t){e.l=t,e.read_shift=Yy,e.chk=JH,e.write_shift=the}function vo(e,t){e.l+=t}function Lt(e){var t=Uf(e);return Hi(t,0),t}function b0(e,t,r){if(e){var n,s,a;Hi(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Iv[o]||Iv[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;l=e.l+a;var d=u.f&&u.f(e,a,r);if(e.l=l,t(d,u,o))return}}}function ul(){var e=[],t=Sn?256:2048,r=function(u){var d=Lt(u);return Hi(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},i=function(){return s(),bi(e)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function Vt(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=Iv[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&oE(r)&&e.push(r)}}function Xy(e,t,r){var n=js(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function MD(e,t,r){var n=js(e);return n.s=Xy(n.s,t.s,r),n.e=Xy(n.e,t.s,r),n}function Jy(e,t){if(e.cRel&&e.c<0)for(e=js(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=js(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Zr(e);return!e.cRel&&e.cRel!=null&&(r=she(r)),!e.rRel&&e.rRel!=null&&(r=rhe(r)),r}function B5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Xs(e.s.c)+":"+(e.e.cRel?"":"$")+Xs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ea(e.s.r)+":"+(e.e.rRel?"":"$")+Ea(e.e.r):Jy(e.s,t.biff)+":"+Jy(e.e,t.biff)}function lE(e){return parseInt(nhe(e),10)-1}function Ea(e){return""+(e+1)}function rhe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function nhe(e){return e.replace(/\$(\d+)$/,"$1")}function cE(e){for(var t=ahe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Xs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function she(e){return e.replace(/^([A-Z])/,"$$$1")}function ahe(e){return e.replace(/^\$([A-Z])/,"$1")}function ihe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Js(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function Zr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function dl(e){var t=e.indexOf(":");return t==-1?{s:Js(e),e:Js(e)}:{s:Js(e.slice(0,t)),e:Js(e.slice(t+1))}}function yn(e,t){return typeof t>"u"||typeof t=="number"?yn(e.s,e.e):(typeof e!="string"&&(e=Zr(e)),typeof t!="string"&&(t=Zr(t)),e==t?e:e+":"+t)}function Ln(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function FD(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=kc(e.z,r?ni(t):t)}catch{}try{return e.w=kc((e.XF||{}).numFmtId||(r?14:0),r?ni(t):t)}catch{return""+t}}function f0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?_0[e.v]||e.v:t==null?FD(e,e.v):FD(e,t))}function rh(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function QH(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Js(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Ln(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var g={v:t[f][h]},x=i+f,y=o+h;if(u.s.r>x&&(u.s.r=x),u.s.c>y&&(u.s.c=y),u.e.r<x&&(u.e.r=x),u.e.c<y&&(u.e.c=y),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))g=t[f][h];else if(Array.isArray(g.v)&&(g.f=t[f][h][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||Jr[14],n.cellDates?(g.t="d",g.w=kc(g.z,ni(g.v))):(g.t="n",g.v=ni(g.v),g.w=kc(g.z,g.v))):g.t="s";if(s)a[x]||(a[x]=[]),a[x][y]&&a[x][y].z&&(g.z=a[x][y].z),a[x][y]=g;else{var v=Zr({c:y,r:x});a[v]&&a[v].z&&(g.z=a[v].z),a[v]=g}}}return u.s.c<1e7&&(a["!ref"]=yn(u)),a}function S1(e,t){return QH(null,e,t)}function ohe(e){return e.read_shift(4,"i")}function iu(e,t){return t||(t=Lt(4)),t.write_shift(4,e),t}function xo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Si(e,t){var r=!1;return t==null&&(r=!0,t=Lt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function lhe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function che(e,t){return t||(t=Lt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function uE(e,t){var r=e.l,n=e.read_shift(1),s=xo(e),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(lhe(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function uhe(e,t){var r=!1;return t==null&&(r=!0,t=Lt(15+4*e.t.length)),t.write_shift(1,0),Si(e.t,t),r?t.slice(0,t.l):t}var dhe=uE;function fhe(e,t){var r=!1;return t==null&&(r=!0,t=Lt(23+4*e.t.length)),t.write_shift(1,1),Si(e.t,t),t.write_shift(4,1),che({},t),r?t.slice(0,t.l):t}function Ac(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Xm(e,t){return t==null&&(t=Lt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Jm(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Qm(e,t){return t==null&&(t=Lt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var hhe=xo,ZH=Si;function dE(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function $4(e,t){var r=!1;return t==null&&(r=!0,t=Lt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var mhe=xo,W8=dE,fE=$4;function hE(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?B4([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Yh(t,0)>>2;return r?s/100:s}function eG(e,t){t==null&&(t=Lt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function tG(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function ghe(e,t){return t||(t=Lt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Zm=tG,k1=ghe;function ho(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Dm(e,t){return(t||Lt(8)).write_shift(8,e,"f")}function phe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=um[s];u&&(t.rgb=Fv(u));break;case 2:t.rgb=Fv([i,o,l]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function z4(e,t){if(t||(t=Lt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function xhe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function yhe(e,t){t||(t=Lt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function rG(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function vhe(e){return rG(e,1)}function whe(e){return rG(e,2)}var mE=2,rl=3,mb=11,DD=12,U4=19,gb=64,bhe=65,_he=71,She=4108,khe=4126,xi=80,nG=81,The=[xi,nG],H8={1:{n:"CodePage",t:mE},2:{n:"Category",t:xi},3:{n:"PresentationFormat",t:xi},4:{n:"ByteCount",t:rl},5:{n:"LineCount",t:rl},6:{n:"ParagraphCount",t:rl},7:{n:"SlideCount",t:rl},8:{n:"NoteCount",t:rl},9:{n:"HiddenCount",t:rl},10:{n:"MultimediaClipCount",t:rl},11:{n:"ScaleCrop",t:mb},12:{n:"HeadingPairs",t:She},13:{n:"TitlesOfParts",t:khe},14:{n:"Manager",t:xi},15:{n:"Company",t:xi},16:{n:"LinksUpToDate",t:mb},17:{n:"CharacterCount",t:rl},19:{n:"SharedDoc",t:mb},22:{n:"HyperlinksChanged",t:mb},23:{n:"AppVersion",t:rl,p:"version"},24:{n:"DigSig",t:bhe},26:{n:"ContentType",t:xi},27:{n:"ContentStatus",t:xi},28:{n:"Language",t:xi},29:{n:"Version",t:xi},255:{},2147483648:{n:"Locale",t:U4},2147483651:{n:"Behavior",t:U4},1919054434:{}},G8={1:{n:"CodePage",t:mE},2:{n:"Title",t:xi},3:{n:"Subject",t:xi},4:{n:"Author",t:xi},5:{n:"Keywords",t:xi},6:{n:"Comments",t:xi},7:{n:"Template",t:xi},8:{n:"LastAuthor",t:xi},9:{n:"RevNumber",t:xi},10:{n:"EditTime",t:gb},11:{n:"LastPrinted",t:gb},12:{n:"CreatedDate",t:gb},13:{n:"ModifiedDate",t:gb},14:{n:"PageCount",t:rl},15:{n:"WordCount",t:rl},16:{n:"CharCount",t:rl},17:{n:"Thumbnail",t:_he},18:{n:"Application",t:xi},19:{n:"DocSecurity",t:rl},255:{},2147483648:{n:"Locale",t:U4},2147483651:{n:"Behavior",t:U4},1919054434:{}},OD={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Che=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Ehe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Nhe=Ehe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),um=js(Nhe),_0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},sG={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},V8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},pb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function gE(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Ahe(e){var t=gE();if(!e||!e.match)return t;var r={};if((e.match(wo)||[]).forEach(function(n){var s=rn(n);switch(s[0].replace(Bfe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[V8[s.ContentType]]!==void 0&&t[V8[s.ContentType]].push(s.PartName);break}}),t.xmlns!==ei.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function aG(e,t){var r=Afe(V8),n=[],s;n[n.length]=Aa,n[n.length]=mr("Types",null,{xmlns:ei.CT,"xmlns:xsd":ei.xsd,"xmlns:xsi":ei.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return mr("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){e[l]&&e[l].length>0&&(s=e[l][0],n[n.length]=mr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:pb[l][t.bookType]||pb[l].xlsx}))},i=function(l){(e[l]||[]).forEach(function(u){n[n.length]=mr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:pb[l][t.bookType]||pb[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=mr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var En={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Mv(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Qy(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(wo)||[]).forEach(function(s){var a=rn(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Oy(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Pp(e){var t=[Aa,mr("Relationships",null,{xmlns:ei.RELS})];return ha(e["!id"]).forEach(function(r){t[t.length]=mr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function rs(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[En.HLINK,En.XPATH,En.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var jhe="application/vnd.oasis.opendocument.spreadsheet";function Phe(e,t){for(var r=aE(e),n,s;n=Pv.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=rn(n[0],!1),s.path=="/"&&s.type!==jhe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Mhe(e){var t=[Aa];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function RD(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Fhe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Dhe(e){var t=[Aa];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(RD(e[r][0],e[r][1])),t.push(Fhe("",e[r][0]));return t.push(RD("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function iG(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+D4.version+"</meta:generator></office:meta></office:document-meta>"}var vc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Ohe=(function(){for(var e=new Array(vc.length),t=0;t<vc.length;++t){var r=vc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function oG(e){var t={};e=ds(e);for(var r=0;r<vc.length;++r){var n=vc[r],s=e.match(Ohe[r]);s!=null&&s.length>0&&(t[n[1]]=Rn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=As(t[n[1]]))}return t}function $5(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=ss(t),n[n.length]=r?mr(e,t,r):qi(e,t))}function lG(e,t){var r=t||{},n=[Aa,mr("cp:coreProperties",null,{"xmlns:cp":ei.CORE_PROPS,"xmlns:dc":ei.dc,"xmlns:dcterms":ei.dcterms,"xmlns:dcmitype":ei.dcmitype,"xmlns:xsi":ei.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&$5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:U8(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&$5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:U8(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=vc.length;++a){var i=vc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&$5(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var dm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],cG=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function uG(e,t,r,n){var s=[];if(typeof e=="string")s=CD(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(d){return{v:d}}));var i=typeof t=="string"?CD(t,n).map(function(d){return d.v}):t,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function Rhe(e,t,r){var n={};return t||(t={}),e=ds(e),dm.forEach(function(s){var a=(e.match(Av(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=Rn(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&uG(n.HeadingPairs,n.TitlesOfParts,t,r),t}function dG(e){var t=[],r=mr;return e||(e={}),e.Application="SheetJS",t[t.length]=Aa,t[t.length]=mr("Properties",null,{xmlns:ei.EXT_PROPS,"xmlns:vt":ei.vt}),dm.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=ss(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ss(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Ihe=/<[^>]+>[^<]*/g;function Lhe(e,t){var r={},n="",s=e.match(Ihe);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=rn(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Rn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Rn(d);break;case"bool":r[n]=Ts(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=As(d);break;case"cy":case"error":r[n]=Rn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function fG(e){var t=[Aa,mr("Properties",null,{xmlns:ei.CUST_PROPS,"xmlns:vt":ei.vt})];if(!e)return t.join("");var r=1;return ha(e).forEach(function(s){++r,t[t.length]=mr("property",qfe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ss(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var q8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},z5;function Bhe(e,t,r){z5||(z5=u3(q8)),t=z5[t]||t,e[t]=r}function $he(e,t){var r=[];return ha(q8).map(function(n){for(var s=0;s<vc.length;++s)if(vc[s][1]==n)return vc[s];for(s=0;s<dm.length;++s)if(dm[s][1]==n)return dm[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(qi(q8[n[1]]||n[1],s))}}),mr("DocumentProperties",r.join(""),{xmlns:Al.o})}function zhe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&ha(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var i=0;i<vc.length;++i)if(a==vc[i][1])return;for(i=0;i<dm.length;++i)if(a==dm[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=e[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(mr(_D(a),o,{"dt:dt":l}))}}),t&&ha(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var i=t[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(mr(_D(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Al.o+'">'+s.join("")+"</"+n+">"}function pE(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Uhe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=Lt(8);return i.write_shift(4,n),i.write_shift(4,s),i}function hG(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function mG(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function gG(e,t,r){return t===31?mG(e):hG(e,t,r)}function K8(e,t,r){return gG(e,t,r===!1?0:4)}function Whe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return gG(e,t,0)}function Hhe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(zo,""),e.l-s&2&&(e.l+=2)}return r}function Ghe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(zo,"");return r}function Vhe(e){var t=e.l,r=W4(e,nG);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=W4(e,rl);return[r,n]}function qhe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Vhe(e));return r}function ID(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(zo,"").replace(Dy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function pG(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Khe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function W4(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==DD&&n!==t&&The.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===DD?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return hG(e,n,4).replace(zo,"");case 31:return mG(e);case 64:return pE(e);case 65:return pG(e);case 71:return Khe(e);case 80:return K8(e,n,!a.raw).replace(zo,"");case 81:return Whe(e,n).replace(zo,"");case 4108:return qhe(e);case 4126:case 4127:return n==4127?Hhe(e):Ghe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function LD(e,t){var r=Lt(4),n=Lt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Lt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Uhe(t);break;case 31:case 80:for(n=Lt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return bi([r,n])}function BD(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=e.read_shift(4),f=e.read_shift(4);a[i]=[d,f+r]}a.sort(function(k,b){return k[1]-b[1]});var h={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var g=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,g=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(g=!1,e.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var x=t[a[i][0]];if(h[x.n]=W4(e,x.t,{raw:!0}),x.p==="version"&&(h[x.n]=String(h[x.n]>>16)+"."+("0000"+String(h[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(h[x.n]){case 0:h[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ru(o=h[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[x.n])}}else if(a[i][0]===1){if(o=h.CodePage=W4(e,mE),ru(o),l!==-1){var y=e.l;e.l=a[l][1],u=ID(e,o),e.l=y}}else if(a[i][0]===0){if(o===0){l=i,e.l=a[i+1][1];continue}u=ID(e,o)}else{var v=u[a[i][0]],T;switch(e[e.l]){case 65:e.l+=4,T=pG(e);break;case 30:e.l+=4,T=K8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,T=K8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,T=e.read_shift(4,"i");break;case 19:e.l+=4,T=e.read_shift(4);break;case 5:e.l+=4,T=e.read_shift(8,"f");break;case 11:e.l+=4,T=_a(e,4);break;case 64:e.l+=4,T=As(pE(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=T}}return e.l=r+n,h}var xG=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Yhe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function $D(e,t,r){var n=Lt(8),s=[],a=[],i=8,o=0,l=Lt(8),u=Lt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!t){u=Lt(8),u.write_shift(4,0),s.unshift(u);var d=[Lt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=Lt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=bi(d),a.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(xG.indexOf(e[o][0])>-1||cG.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],g=0;if(t){g=+t[e[o][0]];var x=r[g];if(x.p=="version"&&typeof h=="string"){var y=h.split(".");h=(+y[0]<<16)+(+y[1]||0)}l=LD(x.t,h)}else{var v=Yhe(h);v==-1&&(v=31,h=String(h)),l=LD(v,h)}a.push(l),u=Lt(8),u.write_shift(4,t?g:2+o),s.push(u),i+=8+l.length}var T=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,T),T+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),bi([n].concat(s).concat(a))}function zD(e,t,r){var n=e.content;if(!n)return{};Hi(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==zr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var f=BD(n,t),h={SystemIdentifier:u};for(var g in f)h[g]=f[g];if(h.FMTID=a,s===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=BD(n,null)}catch{}for(g in x)h[g]=x[g];return h.FMTID=[a,i],h}function UD(e,t,r,n,s,a){var i=Lt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,zr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var l=$D(e,r,n);if(o.push(l),s){var u=$D(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return bi(o)}function pf(e,t){return e.read_shift(t),null}function Xhe(e,t){t||(t=Lt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Jhe(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function _a(e,t){return e.read_shift(t)===1}function Oo(e,t){return t||(t=Lt(2)),t.write_shift(2,+!!e),t}function Ra(e){return e.read_shift(2,"u")}function dc(e,t){return t||(t=Lt(2)),t.write_shift(2,e),t}function yG(e,t){return Jhe(e,t,Ra)}function Qhe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function vG(e,t,r){return r||(r=Lt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function k2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function Zhe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*i),n&&(e.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function eme(e){var t=e.t||"",r=Lt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Lt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return bi(s)}function Om(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function T2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Om(e,n,r)}function eg(e,t,r){if(r.biff>5)return T2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function wG(e,t,r){return r||(r=Lt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function tme(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function rme(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(zo,"");return n&&(e.l+=24),s}function nme(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(zo,"");return r+i}function sme(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return rme(e);case"0303000000000000c000000000000046":return nme(e);default:throw new Error("Unsupported Moniker "+r)}}function xb(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(zo,""):"";return r}function WD(e,t){t||(t=Lt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function ame(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,l,u="",d,f;s&16&&(a=xb(e,r-e.l)),s&128&&(i=xb(e,r-e.l)),(s&257)===257&&(o=xb(e,r-e.l)),(s&257)===1&&(l=sme(e,r-e.l)),s&8&&(u=xb(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=pE(e)),e.l=r;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var g={Target:h};return d&&(g.guid=d),f&&(g.time=f),a&&(g.Tooltip=a),g}function ime(e){var t=Lt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(a==28)n=n.slice(1),WD(n,t);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&WD(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function bG(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function _G(e,t){var r=bG(e);return r[3]=0,r}function id(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Rm(e,t,r,n){return n||(n=Lt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function ome(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function lme(e,t,r){return t===0?"":eg(e,t,r)}function cme(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function SG(e){var t=e.read_shift(2),r=hE(e);return[t,r]}function ume(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=k2(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function h3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function kG(e,t){return t||(t=Lt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function TG(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var dme=TG;function CG(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function fme(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function hme(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function ao(e){e.l+=2,e.l+=e.read_shift(2)}var mme={0:ao,4:ao,5:ao,6:ao,7:hme,8:ao,9:ao,10:ao,11:ao,12:ao,13:fme,14:ao,15:ao,16:ao,17:ao,18:ao,19:ao,20:ao,21:CG};function gme(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(mme[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function yb(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function xE(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=Lt(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function pme(e,t){return t===0||e.read_shift(2),1200}function xme(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=eg(e,0,r);return e.read_shift(t+n-e.l),s}function yme(e,t){var r=!t||t.biff==8,n=Lt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function vme(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function wme(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=k2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function bme(e,t){var r=!t||t.biff>=8?2:1,n=Lt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function _me(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(Zhe(e));return a.Count=n,a.Unique=s,a}function Sme(e,t){var r=Lt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=eme(e[s]);var a=bi([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function kme(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Tme(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Cme(e){var t=ome(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Eme(e){return e.read_shift(2),e.read_shift(4)}function HD(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function Nme(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Ame(){var e=Lt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function jme(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Pme(e){var t=Lt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Mme(){}function Fme(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=k2(e,0,r),n}function Dme(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=Lt(s);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function Ome(e){var t=id(e);return t.isst=e.read_shift(4),t}function Rme(e,t,r,n){var s=Lt(10);return Rm(e,t,n,s),s.write_shift(4,r),s}function Ime(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=id(e);r.biff==2&&e.l++;var a=T2(e,n-e.l,r);return s.val=a,s}function Lme(e,t,r,n,s){var a=!s||s.biff==8,i=Lt(8+ +a+(1+a)*r.length);return Rm(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function Bme(e,t,r){var n=e.read_shift(2),s=eg(e,0,r);return[n,s]}function $me(e,t,r,n){var s=r&&r.biff==5;n||(n=Lt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var zme=eg;function GD(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function Ume(e,t){var r=t.biff==8||!t.biff?4:2,n=Lt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Wme(e){var t=e.read_shift(2),r=e.read_shift(2),n=SG(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Hme(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(SG(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function Gme(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function Vme(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return s.patternType=Che[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function qme(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Vme(e,t,n.fStyle,r),n}function VD(e,t,r,n){var s=r&&r.biff==5;n||(n=Lt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Kme(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Yme(e){var t=Lt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function qD(e,t,r){var n=id(e);(r.biff==2||t==9)&&++e.l;var s=Qhe(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Xme(e,t,r,n,s,a){var i=Lt(8);return Rm(e,t,n,i),vG(r,a,i),i}function Jme(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=id(e),s=ho(e);return n.val=s,n}function Qme(e,t,r,n){var s=Lt(14);return Rm(e,t,n,s),Dm(r,s),s}var KD=lme;function Zme(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Om(e,a),o=[];n>e.l;)o.push(T2(e));return[a,s,i,o]}function YD(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=ume(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var ege=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function XD(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Om(e,i,r);s&32&&(u=ege[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:gye(e,d,r,o);return{chKey:a,Name:u,itab:l,rgce:f}}function EG(e,t,r){if(r.biff<8)return tge(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(cme(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function tge(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=k2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function rge(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=Om(e,n,r),i=Om(e,s,r);return[a,i]}function nge(e,t,r){var n=TG(e);e.l++;var s=e.read_shift(1);return t-=8,[pye(e,t,r),s,n]}function JD(e,t,r){var n=dme(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,hye(e,t,r)]}function sge(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function age(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=eg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function ige(e,t,r){return age(e,t,r)}function oge(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(h3(e));return r}function lge(e){var t=Lt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)kG(e[r],t);return t}function cge(e,t,r){if(r&&r.biff<8)return dge(e,t,r);var n=CG(e),s=gme(e,t-22,n[1]);return{cmo:n,ft:s}}var uge={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function dge(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((uge[n]||vo)(e,t,r)),{cmo:[s,n,a],ft:i}}function fge(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=tme(e,6,r);var o=e.read_shift(2);e.read_shift(2),Ra(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Om(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function hge(e,t){var r=h3(e);e.l+=16;var n=ame(e,t-24);return[r,n]}function mge(e){var t=Lt(24),r=Js(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return bi([t,ime(e[1])])}function gge(e,t){e.read_shift(2);var r=h3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(zo,""),[r,n]}function pge(e){var t=e[1].Tooltip,r=Lt(10+2*(t.length+1));r.write_shift(2,2048);var n=Js(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function xge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=OD[r]||r,r=e.read_shift(2),t[1]=OD[r]||r,t}function yge(e){return e||(e=Lt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function vge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(_G(e));return r}function wge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(_G(e));return r}function bge(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function NG(e,t,r){if(!r.cellStyles)return vo(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function _ge(e,t){var r=Lt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Sge(e,t){var r={};return t<32||(e.l+=16,r.header=ho(e),r.footer=ho(e),e.l+=2),r}function kge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function Tge(e){for(var t=Lt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Cge=id,Ege=yG,Nge=T2;function Age(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function jge(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=id(e);++e.l;var s=eg(e,t-7,r);return n.t="str",n.val=s,n}function Pge(e){var t=id(e);++e.l;var r=ho(e);return t.t="n",t.val=r,t}function Mge(e,t,r){var n=Lt(15);return A2(n,e,t),n.write_shift(8,r,"f"),n}function Fge(e){var t=id(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Dge(e,t,r){var n=Lt(9);return A2(n,e,t),n.write_shift(2,r),n}function Oge(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Rge(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Ige(e,t,r){var n=e.l+t,s=id(e),a=e.read_shift(2),i=Om(e,a,r);return e.l=n,s.t="str",s.val=i,s}var Lge=[2,3,48,49,131,139,140,245],Y8=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=u3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=Uf(1);switch(l.type){case"base64":d=Fl(Bl(o));break;case"binary":d=Fl(o);break;case"buffer":case"array":d=o;break}Hi(d,0);var f=d.read_shift(1),h=!!(f&136),g=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:g=!0,h=!0;break;case 49:g=!0,h=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,v=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(v=d.read_shift(2));var T=d.read_shift(2),k=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var b=[],E={},N=Math.min(d.length,f==2?521:v-10-(g?264:0)),P=x?32:11;d.l<N&&d[d.l]!=13;)switch(E={},E.name=Cv.utils.decode(k,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,E.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(E.offset=d.read_shift(4)),E.len=d.read_shift(1),f==2&&(E.offset=d.read_shift(2)),E.dec=d.read_shift(1),E.name.length&&b.push(E),f!=2&&(d.l+=x?13:14),E.type){case"B":(!g||E.len!=8)&&l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+E.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var M=0,j=0;for(u[0]=[],j=0;j!=b.length;++j)u[0][j]=b[j].name;for(;y-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,u[++M]=[],j=0,j=0;j!=b.length;++j){var A=d.slice(d.l,d.l+b[j].len);d.l+=b[j].len,Hi(A,0);var F=Cv.utils.decode(k,A);switch(b[j].type){case"C":F.trim().length&&(u[M][j]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[M][j]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[M][j]=F;break;case"F":u[M][j]=parseFloat(F.trim());break;case"+":case"I":u[M][j]=x?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[M][j]=!0;break;case"N":case"F":u[M][j]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[M][j]="##MEMO##"+(x?parseInt(F.trim(),10):A.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[M][j]=+F||0);break;case"@":u[M][j]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":u[M][j]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":u[M][j]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[M][j]=-A.read_shift(-8,"f");break;case"B":if(g&&b[j].len==8){u[M][j]=A.read_shift(8,"f");break}case"G":case"P":A.l+=b[j].len;break;case"0":if(b[j].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[j].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=b,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=S1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,l){try{return rh(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&ru(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=ul(),f=V4(o,{header:1,raw:!0,cellDates:!0}),h=f[0],g=f.slice(1),x=o["!cols"]||[],y=0,v=0,T=0,k=1;for(y=0;y<h.length;++y){if(((x[y]||{}).DBF||{}).name){h[y]=x[y].DBF.name,++T;continue}if(h[y]!=null){if(++T,typeof h[y]=="number"&&(h[y]=h[y].toString(10)),typeof h[y]!="string")throw new Error("DBF Invalid column name "+h[y]+" |"+typeof h[y]+"|");if(h.indexOf(h[y])!==y){for(v=0;v<1024;++v)if(h.indexOf(h[y]+"_"+v)==-1){h[y]+="_"+v;break}}}}var b=Ln(o["!ref"]),E=[],N=[],P=[];for(y=0;y<=b.e.c-b.s.c;++y){var M="",j="",A=0,F=[];for(v=0;v<g.length;++v)g[v][y]!=null&&F.push(g[v][y]);if(F.length==0||h[y]==null){E[y]="?";continue}for(v=0;v<F.length;++v){switch(typeof F[v]){case"number":j="B";break;case"string":j="C";break;case"boolean":j="L";break;case"object":j=F[v]instanceof Date?"D":"C";break;default:j="C"}A=Math.max(A,String(F[v]).length),M=M&&M!=j?"C":j}A>250&&(A=250),j=((x[y]||{}).DBF||{}).type,j=="C"&&x[y].DBF.len>A&&(A=x[y].DBF.len),M=="B"&&j=="N"&&(M="N",P[y]=x[y].DBF.dec,A=x[y].DBF.len),N[y]=M=="C"||j=="N"?A:a[M]||0,k+=N[y],E[y]=M}var L=d.next(32);for(L.write_shift(4,318902576),L.write_shift(4,g.length),L.write_shift(2,296+32*T),L.write_shift(2,k),y=0;y<4;++y)L.write_shift(4,0);for(L.write_shift(4,0|(+t[xH]||3)<<8),y=0,v=0;y<h.length;++y)if(h[y]!=null){var V=d.next(32),J=(h[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);V.write_shift(1,J,"sbcs"),V.write_shift(1,E[y]=="?"?"C":E[y],"sbcs"),V.write_shift(4,v),V.write_shift(1,N[y]||a[E[y]]||0),V.write_shift(1,P[y]||0),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(1,0),V.write_shift(4,0),V.write_shift(4,0),v+=N[y]||a[E[y]]||0}var ne=d.next(264);for(ne.write_shift(4,13),y=0;y<65;++y)ne.write_shift(4,0);for(y=0;y<g.length;++y){var ee=d.next(k);for(ee.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(E[v]){case"L":ee.write_shift(1,g[y][v]==null?63:g[y][v]?84:70);break;case"B":ee.write_shift(8,g[y][v]||0,"f");break;case"N":var ie="0";for(typeof g[y][v]=="number"&&(ie=g[y][v].toFixed(P[v]||0)),T=0;T<N[v]-ie.length;++T)ee.write_shift(1,32);ee.write_shift(1,ie,"sbcs");break;case"D":g[y][v]?(ee.write_shift(4,("0000"+g[y][v].getFullYear()).slice(-4),"sbcs"),ee.write_shift(2,("00"+(g[y][v].getMonth()+1)).slice(-2),"sbcs"),ee.write_shift(2,("00"+g[y][v].getDate()).slice(-2),"sbcs")):ee.write_shift(8,"00000000","sbcs");break;case"C":var B=String(g[y][v]!=null?g[y][v]:"").slice(0,N[v]);for(ee.write_shift(1,B,"sbcs"),T=0;T<N[v]-B.length;++T)ee.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),AG=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ha(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,g){var x=e[g];return typeof x=="number"?lD(x):x},n=function(h,g,x){var y=g.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return y==59?h:lD(y)};e["|"]=254;function s(h,g){switch(g.type){case"base64":return a(Bl(h),g);case"binary":return a(h,g);case"buffer":return a(Sn&&Buffer.isBuffer(h)?h.toString("binary"):th(h),g);case"array":return a(Fm(h),g)}throw new Error("Unrecognized type "+g.type)}function a(h,g){var x=h.split(/[\n\r]+/),y=-1,v=-1,T=0,k=0,b=[],E=[],N=null,P={},M=[],j=[],A=[],F=0,L;for(+g.codepage>=0&&ru(+g.codepage);T!==x.length;++T){F=0;var V=x[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),J=V.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),ne=J[0],ee;if(V.length>0)switch(ne){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":J[1].charAt(0)=="P"&&E.push(V.slice(3).replace(/;;/g,";"));break;case"C":var ie=!1,B=!1,Y=!1,I=!1,H=-1,W=-1;for(k=1;k<J.length;++k)switch(J[k].charAt(0)){case"A":break;case"X":v=parseInt(J[k].slice(1))-1,B=!0;break;case"Y":for(y=parseInt(J[k].slice(1))-1,B||(v=0),L=b.length;L<=y;++L)b[L]=[];break;case"K":ee=J[k].slice(1),ee.charAt(0)==='"'?ee=ee.slice(1,ee.length-1):ee==="TRUE"?ee=!0:ee==="FALSE"?ee=!1:isNaN(au(ee))?isNaN(Vp(ee).getDate())||(ee=As(ee)):(ee=au(ee),N!==null&&b1(N)&&(ee=f3(ee))),ie=!0;break;case"E":I=!0;var R=Mp(J[k].slice(1),{r:y,c:v});b[y][v]=[b[y][v],R];break;case"S":Y=!0,b[y][v]=[b[y][v],"S5S"];break;case"G":break;case"R":H=parseInt(J[k].slice(1))-1;break;case"C":W=parseInt(J[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}if(ie&&(b[y][v]&&b[y][v].length==2?b[y][v][0]=ee:b[y][v]=ee,N=null),Y){if(I)throw new Error("SYLK shared formula cannot have own formula");var z=H>-1&&b[H][W];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");b[y][v][1]=qG(z[1],{r:y-H,c:v-W})}break;case"F":var G=0;for(k=1;k<J.length;++k)switch(J[k].charAt(0)){case"X":v=parseInt(J[k].slice(1))-1,++G;break;case"Y":for(y=parseInt(J[k].slice(1))-1,L=b.length;L<=y;++L)b[L]=[];break;case"M":F=parseInt(J[k].slice(1))/20;break;case"F":break;case"G":break;case"P":N=E[parseInt(J[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=J[k].slice(1).split(" "),L=parseInt(A[0],10);L<=parseInt(A[1],10);++L)F=parseInt(A[2],10),j[L-1]=F===0?{hidden:!0}:{wch:F},Wf(j[L-1]);break;case"C":v=parseInt(J[k].slice(1))-1,j[v]||(j[v]={});break;case"R":y=parseInt(J[k].slice(1))-1,M[y]||(M[y]={}),F>0?(M[y].hpt=F,M[y].hpx=Kp(F)):F===0&&(M[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}G<1&&(N=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}}return M.length>0&&(P["!rows"]=M),j.length>0&&(P["!cols"]=j),g&&g.sheetRows&&(b=b.slice(0,g.sheetRows)),[b,P]}function i(h,g){var x=s(h,g),y=x[0],v=x[1],T=S1(y,g);return ha(v).forEach(function(k){T[k]=v[k]}),T}function o(h,g){return rh(i(h,g),g)}function l(h,g,x,y){var v="C;Y"+(x+1)+";X"+(y+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+SE(h.f,{r:x,c:y}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,g){g.forEach(function(x,y){var v="F;W"+(y+1)+" "+(y+1)+" ";x.hidden?v+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=Dv(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Ov(x.wpx)),typeof x.wch=="number"&&(v+=Math.round(x.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,g){g.forEach(function(x,y){var v="F;";x.hidden?v+="M0;":x.hpt?v+="M"+20*x.hpt+";":x.hpx&&(v+="M"+20*Rv(x.hpx)+";"),v.length>2&&h.push(v+"R"+(y+1))})}function f(h,g){var x=["ID;PWXL;N;E"],y=[],v=Ln(h["!ref"]),T,k=Array.isArray(h),b=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),h["!cols"]&&u(x,h["!cols"]),h["!rows"]&&d(x,h["!rows"]),x.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var E=v.s.r;E<=v.e.r;++E)for(var N=v.s.c;N<=v.e.c;++N){var P=Zr({r:E,c:N});T=k?(h[E]||[])[N]:h[P],!(!T||T.v==null&&(!T.f||T.F))&&y.push(l(T,h,E,N))}return x.join(b)+b+y.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:i,from_sheet:f}})(),jG=(function(){function e(a,i){switch(i.type){case"base64":return t(Bl(a),i);case"binary":return t(a,i);case"buffer":return t(Sn&&Buffer.isBuffer(a)?a.toString("binary"):th(a),i);case"array":return t(Fm(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var h=o[d].trim().split(","),g=h[0],x=h[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){f[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[l][u]=!0:y==="FALSE"?f[l][u]=!1:isNaN(au(x))?isNaN(Vp(x).getDate())?f[l][u]=x:f[l][u]=As(x):f[l][u]=au(x),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(a,i){return S1(e(a,i),i)}function n(a,i){return rh(r(a,i),i)}var s=(function(){var a=function(l,u,d,f,h){l.push(u),l.push(d+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},i=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=Ln(l["!ref"]),f,h=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var y=Zr({r:g,c:x});if(f=h?(l[g]||[])[x]:l[y],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=kc(f.z||Jr[14],ni(As(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var T=`\r
`,k=u.join(T);return k}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),PG=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var g=f.split(`
`),x=-1,y=-1,v=0,T=[];v!==g.length;++v){var k=g[v].trim().split(":");if(k[0]==="cell"){var b=Js(k[1]);if(T.length<=b.r)for(x=T.length;x<=b.r;++x)T[x]||(T[x]=[]);switch(x=b.r,y=b.c,k[2]){case"t":T[x][y]=e(k[3]);break;case"v":T[x][y]=+k[3];break;case"vtf":var E=k[k.length-1];case"vtc":switch(k[3]){case"nl":T[x][y]=!!+k[4];break;default:T[x][y]=+k[4];break}k[2]=="vtf"&&(T[x][y]=[T[x][y],E])}}}return h&&h.sheetRows&&(T=T.slice(0,h.sheetRows)),T}function n(f,h){return S1(r(f,h),h)}function s(f,h){return rh(n(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],g=[],x,y="",v=dl(f["!ref"]),T=Array.isArray(f),k=v.s.r;k<=v.e.r;++k)for(var b=v.s.c;b<=v.e.c;++b)if(y=Zr({r:k,c:b}),x=T?(f[k]||[])[b]:f[y],!(!x||x.v==null||x.t==="z")){switch(g=["cell",y,"t"],x.t){case"s":case"str":g.push(t(x.v));break;case"n":x.f?(g[2]="vtf",g[3]="n",g[4]=x.v,g[5]=t(x.f)):(g[2]="v",g[3]=x.v);break;case"b":g[2]="vt"+(x.f?"f":"c"),g[3]="nl",g[4]=x.v?"1":"0",g[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var E=ni(As(x.v));g[2]="vtc",g[3]="nd",g[4]=""+E,g[5]=x.w||kc(x.z||Jr[14],E);break;case"e":continue}h.push(g.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[a,i,o,i,u(f),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),qp=(function(){function e(d,f,h,g,x){x.raw?f[h][g]=d:d===""||(d==="TRUE"?f[h][g]=!0:d==="FALSE"?f[h][g]=!1:isNaN(au(d))?isNaN(Vp(d).getDate())?f[h][g]=d:f[h][g]=As(d):f[h][g]=au(d))}function t(d,f){var h=f||{},g=[];if(!d||d.length===0)return g;for(var x=d.split(/[\r\n]/),y=x.length-1;y>=0&&x[y].length===0;)--y;for(var v=10,T=0,k=0;k<=y;++k)T=x[k].indexOf(" "),T==-1?T=x[k].length:T++,v=Math.max(v,T);for(k=0;k<=y;++k){g[k]=[];var b=0;for(e(x[k].slice(0,v).trim(),g,k,b,h),b=1;b<=(x[k].length-v)/10+1;++b)e(x[k].slice(v+(b-1)*10,v+b*10).trim(),g,k,b,h)}return h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},h=!1,g=0,x=0;g<d.length;++g)(x=d.charCodeAt(g))==34?h=!h:!h&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g]);if(!x.length){f=n;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g])}return x.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[x.pop()[1]]||44}function a(d,f){var h=f||{},g="",x=h.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):h&&h.FS?g=h.FS:g=s(d.slice(0,1024));var v=0,T=0,k=0,b=0,E=0,N=g.charCodeAt(0),P=!1,M=0,j=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var A=h.dateNF!=null?kfe(h.dateNF):null;function F(){var L=d.slice(b,E),V={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)V.t="z";else if(h.raw)V.t="s",V.v=L;else if(L.trim().length===0)V.t="s",V.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(V.t="s",V.v=L.slice(2,-1).replace(/""/g,'"')):Z1e(L)?(V.t="n",V.f=L.slice(1)):(V.t="s",V.v=L);else if(L=="TRUE")V.t="b",V.v=!0;else if(L=="FALSE")V.t="b",V.v=!1;else if(!isNaN(k=au(L)))V.t="n",h.cellText!==!1&&(V.w=L),V.v=k;else if(!isNaN(Vp(L).getDate())||A&&L.match(A)){V.z=h.dateNF||Jr[14];var J=0;A&&L.match(A)&&(L=Tfe(L,h.dateNF,L.match(A)||[]),J=1),h.cellDates?(V.t="d",V.v=As(L,J)):(V.t="n",V.v=ni(As(L,J))),h.cellText!==!1&&(V.w=kc(V.z,V.v instanceof Date?ni(V.v):V.v)),h.cellNF||delete V.z}else V.t="s",V.v=L;if(V.t=="z"||(h.dense?(x[v]||(x[v]=[]),x[v][T]=V):x[Zr({c:T,r:v})]=V),b=E+1,j=d.charCodeAt(b),y.e.c<T&&(y.e.c=T),y.e.r<v&&(y.e.r=v),M==N)++T;else if(T=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;E<d.length;++E)switch(M=d.charCodeAt(E)){case 34:j===34&&(P=!P);break;case N:case 10:case 13:if(!P&&F())break e;break}return E-b>0&&F(),x["!ref"]=yn(y),x}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):S1(t(d,f),f)}function o(d,f){var h="",g=f.type=="string"?[0,0,0,0]:PE(d,f);switch(f.type){case"base64":h=Bl(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Cv<"u"||(h=Sn&&Buffer.isBuffer(d)?d.toString("binary"):th(d));break;case"array":h=Fm(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return g[0]==239&&g[1]==187&&g[2]==191?h=ds(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=ds(h):f.type=="binary"&&typeof Cv<"u",h.slice(0,19)=="socialcalc:version:"?PG.to_sheet(f.type=="string"?h:ds(h),f):i(h,f)}function l(d,f){return rh(o(d,f),f)}function u(d){for(var f=[],h=Ln(d["!ref"]),g,x=Array.isArray(d),y=h.s.r;y<=h.e.r;++y){for(var v=[],T=h.s.c;T<=h.e.c;++T){var k=Zr({r:y,c:T});if(g=x?(d[y]||[])[T]:d[k],!g||g.v==null){v.push("          ");continue}for(var b=(g.w||(f0(g),g.w)||"").slice(0,10);b.length<10;)b+=" ";v.push(b+(T===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})();function Bge(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=AG.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return qp.to_workbook(e,t)}}var fm=(function(){function e(R,z,G){if(R){Hi(R,R.l||0);for(var Q=G.Enum||H;R.l<R.length;){var re=R.read_shift(2),q=Q[re]||Q[65535],se=R.read_shift(2),ce=R.l+se,pe=q.f&&q.f(R,se,G);if(R.l=ce,z(pe,q,re))return}}}function t(R,z){switch(z.type){case"base64":return r(Fl(Bl(R)),z);case"binary":return r(Fl(R),z);case"buffer":case"array":return r(R,z)}throw"Unsupported type "+z.type}function r(R,z){if(!R)return R;var G=z||{},Q=G.dense?[]:{},re="Sheet1",q="",se=0,ce={},pe=[],ke=[],le={s:{r:0,c:0},e:{r:0,c:0}},ye=G.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)G.Enum=H,e(R,function($e,Nt,He){switch(He){case 0:G.vers=$e,$e>=4096&&(G.qpro=!0);break;case 6:le=$e;break;case 204:$e&&(q=$e);break;case 222:q=$e;break;case 15:case 51:G.qpro||($e[1].v=$e[1].v.slice(1));case 13:case 14:case 16:He==14&&($e[2]&112)==112&&($e[2]&15)>1&&($e[2]&15)<15&&($e[1].z=G.dateNF||Jr[14],G.cellDates&&($e[1].t="d",$e[1].v=f3($e[1].v))),G.qpro&&$e[3]>se&&(Q["!ref"]=yn(le),ce[re]=Q,pe.push(re),Q=G.dense?[]:{},le={s:{r:0,c:0},e:{r:0,c:0}},se=$e[3],re=q||"Sheet"+(se+1),q="");var Et=G.dense?(Q[$e[0].r]||[])[$e[0].c]:Q[Zr($e[0])];if(Et){Et.t=$e[1].t,Et.v=$e[1].v,$e[1].z!=null&&(Et.z=$e[1].z),$e[1].f!=null&&(Et.f=$e[1].f);break}G.dense?(Q[$e[0].r]||(Q[$e[0].r]=[]),Q[$e[0].r][$e[0].c]=$e[1]):Q[Zr($e[0])]=$e[1];break}},G);else if(R[2]==26||R[2]==14)G.Enum=W,R[2]==14&&(G.qpro=!0,R.l=0),e(R,function($e,Nt,He){switch(He){case 204:re=$e;break;case 22:$e[1].v=$e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if($e[3]>se&&(Q["!ref"]=yn(le),ce[re]=Q,pe.push(re),Q=G.dense?[]:{},le={s:{r:0,c:0},e:{r:0,c:0}},se=$e[3],re="Sheet"+(se+1)),ye>0&&$e[0].r>=ye)break;G.dense?(Q[$e[0].r]||(Q[$e[0].r]=[]),Q[$e[0].r][$e[0].c]=$e[1]):Q[Zr($e[0])]=$e[1],le.e.c<$e[0].c&&(le.e.c=$e[0].c),le.e.r<$e[0].r&&(le.e.r=$e[0].r);break;case 27:$e[14e3]&&(ke[$e[14e3][0]]=$e[14e3][1]);break;case 1537:ke[$e[0]]=$e[1],$e[0]==se&&(re=$e[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(Q["!ref"]=yn(le),ce[q||re]=Q,pe.push(q||re),!ke.length)return{SheetNames:pe,Sheets:ce};for(var je={},Ne=[],We=0;We<ke.length;++We)ce[pe[We]]?(Ne.push(ke[We]||pe[We]),je[ke[We]]=ce[ke[We]]||ce[pe[We]]):(Ne.push(ke[We]),je[ke[We]]={"!ref":"A1"});return{SheetNames:Ne,Sheets:je}}function n(R,z){var G=z||{};if(+G.codepage>=0&&ru(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=ul(),re=Ln(R["!ref"]),q=Array.isArray(R),se=[];gr(Q,0,a(1030)),gr(Q,6,l(re));for(var ce=Math.min(re.e.r,8191),pe=re.s.r;pe<=ce;++pe)for(var ke=Ea(pe),le=re.s.c;le<=re.e.c;++le){pe===re.s.r&&(se[le]=Xs(le));var ye=se[le]+ke,je=q?(R[pe]||[])[le]:R[ye];if(!(!je||je.t=="z"))if(je.t=="n")(je.v|0)==je.v&&je.v>=-32768&&je.v<=32767?gr(Q,13,g(pe,le,je.v)):gr(Q,14,y(pe,le,je.v));else{var Ne=f0(je);gr(Q,15,f(pe,le,Ne.slice(0,239)))}}return gr(Q,1),Q.end()}function s(R,z){var G=z||{};if(+G.codepage>=0&&ru(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=ul();gr(Q,0,i(R));for(var re=0,q=0;re<R.SheetNames.length;++re)(R.Sheets[R.SheetNames[re]]||{})["!ref"]&&gr(Q,27,I(R.SheetNames[re],q++));var se=0;for(re=0;re<R.SheetNames.length;++re){var ce=R.Sheets[R.SheetNames[re]];if(!(!ce||!ce["!ref"])){for(var pe=Ln(ce["!ref"]),ke=Array.isArray(ce),le=[],ye=Math.min(pe.e.r,8191),je=pe.s.r;je<=ye;++je)for(var Ne=Ea(je),We=pe.s.c;We<=pe.e.c;++We){je===pe.s.r&&(le[We]=Xs(We));var $e=le[We]+Ne,Nt=ke?(ce[je]||[])[We]:ce[$e];if(!(!Nt||Nt.t=="z"))if(Nt.t=="n")gr(Q,23,F(je,We,se,Nt.v));else{var He=f0(Nt);gr(Q,22,M(je,We,se,He.slice(0,239)))}}++se}}return gr(Q,1),Q.end()}function a(R){var z=Lt(2);return z.write_shift(2,R),z}function i(R){var z=Lt(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var G=0,Q=0,re=0,q=0;q<R.SheetNames.length;++q){var se=R.SheetNames[q],ce=R.Sheets[se];if(!(!ce||!ce["!ref"])){++re;var pe=dl(ce["!ref"]);G<pe.e.r&&(G=pe.e.r),Q<pe.e.c&&(Q=pe.e.c)}}return G>8191&&(G=8191),z.write_shift(2,G),z.write_shift(1,re),z.write_shift(1,Q),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function o(R,z,G){var Q={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&G.qpro?(Q.s.c=R.read_shift(1),R.l++,Q.s.r=R.read_shift(2),Q.e.c=R.read_shift(1),R.l++,Q.e.r=R.read_shift(2),Q):(Q.s.c=R.read_shift(2),Q.s.r=R.read_shift(2),z==12&&G.qpro&&(R.l+=2),Q.e.c=R.read_shift(2),Q.e.r=R.read_shift(2),z==12&&G.qpro&&(R.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function l(R){var z=Lt(8);return z.write_shift(2,R.s.c),z.write_shift(2,R.s.r),z.write_shift(2,R.e.c),z.write_shift(2,R.e.r),z}function u(R,z,G){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(Q[0].c=R.read_shift(1),Q[3]=R.read_shift(1),Q[0].r=R.read_shift(2),R.l+=2):(Q[2]=R.read_shift(1),Q[0].c=R.read_shift(2),Q[0].r=R.read_shift(2)),Q}function d(R,z,G){var Q=R.l+z,re=u(R,z,G);if(re[1].t="s",G.vers==20768){R.l++;var q=R.read_shift(1);return re[1].v=R.read_shift(q,"utf8"),re}return G.qpro&&R.l++,re[1].v=R.read_shift(Q-R.l,"cstr"),re}function f(R,z,G){var Q=Lt(7+G.length);Q.write_shift(1,255),Q.write_shift(2,z),Q.write_shift(2,R),Q.write_shift(1,39);for(var re=0;re<Q.length;++re){var q=G.charCodeAt(re);Q.write_shift(1,q>=128?95:q)}return Q.write_shift(1,0),Q}function h(R,z,G){var Q=u(R,z,G);return Q[1].v=R.read_shift(2,"i"),Q}function g(R,z,G){var Q=Lt(7);return Q.write_shift(1,255),Q.write_shift(2,z),Q.write_shift(2,R),Q.write_shift(2,G,"i"),Q}function x(R,z,G){var Q=u(R,z,G);return Q[1].v=R.read_shift(8,"f"),Q}function y(R,z,G){var Q=Lt(13);return Q.write_shift(1,255),Q.write_shift(2,z),Q.write_shift(2,R),Q.write_shift(8,G,"f"),Q}function v(R,z,G){var Q=R.l+z,re=u(R,z,G);if(re[1].v=R.read_shift(8,"f"),G.qpro)R.l=Q;else{var q=R.read_shift(2);E(R.slice(R.l,R.l+q),re),R.l+=q}return re}function T(R,z,G){var Q=z&32768;return z&=-32769,z=(Q?R:0)+(z>=8192?z-16384:z),(Q?"":"$")+(G?Xs(z):Ea(z))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function E(R,z){Hi(R,0);for(var G=[],Q=0,re="",q="",se="",ce="";R.l<R.length;){var pe=R[R.l++];switch(pe){case 0:G.push(R.read_shift(8,"f"));break;case 1:q=T(z[0].c,R.read_shift(2),!0),re=T(z[0].r,R.read_shift(2),!1),G.push(q+re);break;case 2:{var ke=T(z[0].c,R.read_shift(2),!0),le=T(z[0].r,R.read_shift(2),!1);q=T(z[0].c,R.read_shift(2),!0),re=T(z[0].r,R.read_shift(2),!1),G.push(ke+le+":"+q+re)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(R.read_shift(2));break;case 6:{for(var ye="";pe=R[R.l++];)ye+=String.fromCharCode(pe);G.push('"'+ye.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:ce=G.pop(),se=G.pop(),G.push(["AND","OR"][pe-20]+"("+se+","+ce+")");break;default:if(pe<32&&b[pe])ce=G.pop(),se=G.pop(),G.push(se+b[pe]+ce);else if(k[pe]){if(Q=k[pe][1],Q==69&&(Q=R[R.l++]),Q>G.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+G.join("|")+"|");return}var je=G.slice(-Q);G.length-=Q,G.push(k[pe][0]+"("+je.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}G.length==1?z[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function N(R){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=R.read_shift(2),z[3]=R[R.l++],z[0].c=R[R.l++],z}function P(R,z){var G=N(R);return G[1].t="s",G[1].v=R.read_shift(z-4,"cstr"),G}function M(R,z,G,Q){var re=Lt(6+Q.length);re.write_shift(2,R),re.write_shift(1,G),re.write_shift(1,z),re.write_shift(1,39);for(var q=0;q<Q.length;++q){var se=Q.charCodeAt(q);re.write_shift(1,se>=128?95:se)}return re.write_shift(1,0),re}function j(R,z){var G=N(R);G[1].v=R.read_shift(2);var Q=G[1].v>>1;if(G[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return G[1].v=Q,G}function A(R,z){var G=N(R),Q=R.read_shift(4),re=R.read_shift(4),q=R.read_shift(2);if(q==65535)return Q===0&&re===3221225472?(G[1].t="e",G[1].v=15):Q===0&&re===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var se=q&32768;return q=(q&32767)-16446,G[1].v=(1-se*2)*(re*Math.pow(2,q+32)+Q*Math.pow(2,q)),G}function F(R,z,G,Q){var re=Lt(14);if(re.write_shift(2,R),re.write_shift(1,G),re.write_shift(1,z),Q==0)return re.write_shift(4,0),re.write_shift(4,0),re.write_shift(2,65535),re;var q=0,se=0,ce=0,pe=0;return Q<0&&(q=1,Q=-Q),se=Math.log2(Q)|0,Q/=Math.pow(2,se-31),pe=Q>>>0,(pe&2147483648)==0&&(Q/=2,++se,pe=Q>>>0),Q-=pe,pe|=2147483648,pe>>>=0,Q*=Math.pow(2,32),ce=Q>>>0,re.write_shift(4,ce),re.write_shift(4,pe),se+=16383+(q?32768:0),re.write_shift(2,se),re}function L(R,z){var G=A(R);return R.l+=z-14,G}function V(R,z){var G=N(R),Q=R.read_shift(4);return G[1].v=Q>>6,G}function J(R,z){var G=N(R),Q=R.read_shift(8,"f");return G[1].v=Q,G}function ne(R,z){var G=J(R);return R.l+=z-10,G}function ee(R,z){return R[R.l+z-1]==0?R.read_shift(z,"cstr"):""}function ie(R,z){var G=R[R.l++];G>z-1&&(G=z-1);for(var Q="";Q.length<G;)Q+=String.fromCharCode(R[R.l++]);return Q}function B(R,z,G){if(!(!G.qpro||z<21)){var Q=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var re=R.read_shift(z-21,"cstr");return[Q,re]}}function Y(R,z){for(var G={},Q=R.l+z;R.l<Q;){var re=R.read_shift(2);if(re==14e3){for(G[re]=[0,""],G[re][0]=R.read_shift(2);R[R.l];)G[re][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return G}function I(R,z){var G=Lt(5+R.length);G.write_shift(2,14e3),G.write_shift(2,z);for(var Q=0;Q<R.length;++Q){var re=R.charCodeAt(Q);G[G.l++]=re>127?95:re}return G[G.l++]=0,G}var H={0:{n:"BOF",f:Ra},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ee},222:{n:"SHEETNAMELP",f:ie},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:j},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Y},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:V},38:{n:"??"},39:{n:"NUMBER27",f:J},40:{n:"FORMULA28",f:ne},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ee},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:B},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function $ge(e){var t={},r=e.match(wo),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=rn(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=KC[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var zge=(function(){var e=Av("t"),t=Av("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Rn(i[1])},l=a.match(t);return l&&(o.s=$ge(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),Uge=(function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),Wge=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Hge=/<(?:\w+:)?r>/,Gge=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function yE(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Rn(ds(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ds(e),r&&(n.h=sE(n.t))):e.match(Hge)&&(n.r=ds(e),n.t=Rn(ds((e.replace(Gge,"").match(Wge)||[]).join("").replace(wo,""))),r&&(n.h=Uge(zge(n.r)))),n):{t:""}}var Vge=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,qge=/<(?:\w+:)?(?:si|sstItem)>/g,Kge=/<\/(?:\w+:)?(?:si|sstItem)>/;function Yge(e,t){var r=[],n="";if(!e)return r;var s=e.match(Vge);if(s){n=s[2].replace(qge,"").split(Kge);for(var a=0;a!=n.length;++a){var i=yE(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=rn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Xge=/^\s|\s$|[\t\n\r]/;function MG(e,t){if(!t.bookSST)return"";var r=[Aa];r[r.length]=mr("sst",null,{xmlns:Ym[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Xge)&&(a+=' xml:space="preserve"'),a+=">"+ss(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Jge(e){return[e.read_shift(4),e.read_shift(4)]}function Qge(e,t){var r=[],n=!1;return b0(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Zge(e,t){return t||(t=Lt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var epe=uhe;function tpe(e){var t=ul();Vt(t,159,Zge(e));for(var r=0;r<e.length;++r)Vt(t,19,epe(e[r]));return Vt(t,160),t.end()}function FG(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function r0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function rpe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=r0(e,4),t.U=r0(e,4),t.W=r0(e,4),t}function npe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function spe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(npe(e));return t}function ape(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function ipe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=r0(e,4),t.U=r0(e,4),t.W=r0(e,4),t}function ope(e){var t=ipe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function DG(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function OG(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function lpe(e){var t=r0(e);switch(t.Minor){case 2:return[t.Minor,cpe(e)];case 3:return[t.Minor,upe()];case 4:return[t.Minor,dpe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function cpe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=DG(e,r),s=OG(e,e.length-e.l);return{t:"Std",h:n,v:s}}function upe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function dpe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(wo,function(a){var i=rn(a);switch(ad(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function fpe(e,t){var r={},n=r.EncryptionVersionInfo=r0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=DG(e,s),t-=s,r.EncryptionVerifier=OG(e,t),r}function hpe(e){var t={},r=t.EncryptionVersionInfo=r0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function vE(e){var t=0,r,n=FG(e),s=n.length+1,a,i,o,l,u;for(r=Uf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(t&16384)===0?0:1,l=t<<1&32767,u=o|l,t=u^i;return t^52811}var RG=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=FG(i),l=a(o),u=o.length,d=Uf(16),f=0;f!=16;++f)d[f]=0;var h,g,x;for((u&1)===1&&(h=l>>8,d[u]=s(e[0],h),--u,h=l&255,g=o[o.length-1],d[u]=s(g,h));u>0;)--u,h=l>>8,d[u]=s(o[u],h),--u,h=l&255,d[u]=s(o[u],h);for(u=15,x=15-o.length;x>0;)h=l>>8,d[u]=s(e[x],h),--u,--x,h=l&255,d[u]=s(o[u],h),--u,--x;return d}})(),mpe=function(e,t,r,n,s){s||(s=t),n||(n=RG(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},gpe=function(e){var t=0,r=RG(e);return function(n){var s=mpe("",n,t,r);return t=s[1],s[0]}};function ppe(e,t,r,n){var s={key:Ra(e),verificationBytes:Ra(e)};return r.password&&(s.verifier=vE(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=gpe(r.password)),s}function xpe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=hpe(e):n.Data=fpe(e,t),n}function ype(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?xpe(e,t-2,n):ppe(e,r.biff>=8?t:t-2,r,n),n}var IG=(function(){function e(s,a){switch(a.type){case"base64":return t(Bl(s),a);case"binary":return t(s,a);case"buffer":return t(Sn&&Buffer.isBuffer(s)?s.toString("binary"):th(s),a);case"array":return t(Fm(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,g=0,x,y=-1;x=h.exec(d);){switch(x[0]){case"\\cell":var v=d.slice(g,h.lastIndex-x[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var T={v,t:"s"};Array.isArray(o)?o[f][y]=T:o[Zr({r:f,c:y})]=T}break}g=h.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=yn(u),o}function r(s,a){return rh(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Ln(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Zr({r:u,c:d});o=l?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(f0(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function vpe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Fv(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function wpe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,u/2]}function bpe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function H4(e,t){if(t===0)return e;var r=wpe(vpe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Fv(bpe(r))}var LG=6,_pe=15,Spe=1,uo=LG;function Dv(e){return Math.floor((e+Math.round(128/uo)/256)*uo)}function Ov(e){return Math.floor((e-5)/uo*100+.5)/100}function G4(e){return Math.round((e*uo+5)/uo*256)/256}function U5(e){return G4(Ov(Dv(e)))}function wE(e){var t=Math.abs(e-U5(e)),r=uo;if(t>.005)for(uo=Spe;uo<_pe;++uo)Math.abs(e-U5(e))<=t&&(t=Math.abs(e-U5(e)),r=uo);uo=r}function Wf(e){e.width?(e.wpx=Dv(e.width),e.wch=Ov(e.wpx),e.MDW=uo):e.wpx?(e.wch=Ov(e.wpx),e.width=G4(e.wch),e.MDW=uo):typeof e.wch=="number"&&(e.width=G4(e.wch),e.wpx=Dv(e.width),e.MDW=uo),e.customWidth&&delete e.customWidth}var kpe=96,BG=kpe;function Rv(e){return e*96/BG}function Kp(e){return e*BG/96}var Tpe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Cpe(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=rn(i);switch(ad(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Ts(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Ts(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Epe(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=rn(i);switch(ad(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Npe(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=rn(i);switch(ad(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=ds(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Ts(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Ts(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Ts(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Ts(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Ts(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Ts(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Ts(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=KC[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Ts(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=um[s.color.index];s.color.index==81&&(l=um[1]),l||(l=um[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=H4(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Ape(e,t,r){t.NumberFmt=[];for(var n=ha(Jr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Jr[n[s]];var a=e[0].match(wo);if(a)for(s=0;s<a.length;++s){var i=rn(a[s]);switch(ad(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Rn(ds(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}t0(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function jpe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=mr("numFmt",null,{numFmtId:n,formatCode:ss(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=mr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var vb=["numFmtId","fillId","fontId","borderId","xfId"],wb=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Ppe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(wo)||[]).forEach(function(a){var i=rn(a),o=0;switch(ad(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<vb.length;++o)n[vb[o]]&&(n[vb[o]]=parseInt(n[vb[o]],10));for(o=0;o<wb.length;++o)n[wb[o]]&&(n[wb[o]]=Ts(n[wb[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Ts(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Mpe(e){var t=[];return t[t.length]=mr("cellXfs",null),e.forEach(function(r){t[t.length]=mr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=mr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Fpe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&Ape(f,d,u),(f=o.match(s))&&Npe(f,d,l,u),(f=o.match(n))&&Epe(f,d,l,u),(f=o.match(a))&&Cpe(f,d,l,u),(f=o.match(r))&&Ppe(f,d,u),d}})();function $G(e,t){var r=[Aa,mr("styleSheet",null,{xmlns:Ym[0],"xmlns:vt":ei.vt})],n;return e.SSF&&(n=jpe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Mpe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Dpe(e,t){var r=e.read_shift(2),n=xo(e);return[r,n]}function Ope(e,t,r){r||(r=Lt(6+4*t.length)),r.write_shift(2,e),Si(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Rpe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=xhe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=phe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=xo(e),n}function Ipe(e,t){t||(t=Lt(153)),t.write_shift(2,e.sz*20),yhe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),z4(e.color,t);var n=0;return n=2,t.write_shift(1,n),Si(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Lpe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],W5,Bpe=vo;function QD(e,t){t||(t=Lt(84)),W5||(W5=u3(Lpe));var r=W5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(z4({auto:1},t),z4({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function $pe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function zG(e,t,r){r||(r=Lt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function wy(e,t){return t||(t=Lt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var zpe=vo;function Upe(e,t){return t||(t=Lt(51)),t.write_shift(1,0),wy(null,t),wy(null,t),wy(null,t),wy(null,t),wy(null,t),t.length>t.l?t.slice(0,t.l):t}function Wpe(e,t){return t||(t=Lt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),$4(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Hpe(e,t,r){var n=Lt(2052);return n.write_shift(4,e),$4(t,n),$4(r,n),n.length>n.l?n.slice(0,n.l):n}function Gpe(e,t,r){var n={};n.NumberFmt=[];for(var s in Jr)n.NumberFmt[s]=Jr[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return b0(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],t0(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=H4(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Vpe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Vt(e,615,iu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Vt(e,44,Ope(s,t[s]))}),Vt(e,616))}}function qpe(e){var t=1;Vt(e,611,iu(t)),Vt(e,43,Ipe({sz:12,color:{theme:1},name:"Calibri",family:2})),Vt(e,612)}function Kpe(e){var t=2;Vt(e,603,iu(t)),Vt(e,45,QD({patternType:"none"})),Vt(e,45,QD({patternType:"gray125"})),Vt(e,604)}function Ype(e){var t=1;Vt(e,613,iu(t)),Vt(e,46,Upe()),Vt(e,614)}function Xpe(e){var t=1;Vt(e,626,iu(t)),Vt(e,47,zG({numFmtId:0},65535)),Vt(e,627)}function Jpe(e,t){Vt(e,617,iu(t.length)),t.forEach(function(r){Vt(e,47,zG(r,0))}),Vt(e,618)}function Qpe(e){var t=1;Vt(e,619,iu(t)),Vt(e,48,Wpe({xfId:0,name:"Normal"})),Vt(e,620)}function Zpe(e){var t=0;Vt(e,505,iu(t)),Vt(e,506)}function e1e(e){var t=0;Vt(e,508,Hpe(t,"TableStyleMedium9","PivotStyleMedium4")),Vt(e,509)}function t1e(e,t){var r=ul();return Vt(r,278),Vpe(r,e.SSF),qpe(r),Kpe(r),Ype(r),Xpe(r),Jpe(r,t.cellXfs),Qpe(r),Zpe(r),e1e(r),Vt(r,279),r.end()}var r1e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function n1e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(wo)||[]).forEach(function(s){var a=rn(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[r1e.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function s1e(){}function a1e(){}var i1e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,o1e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,l1e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function c1e(e,t,r){t.themeElements={};var n;[["clrScheme",i1e,n1e],["fontScheme",o1e,s1e],["fmtScheme",l1e,a1e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var u1e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function UG(e,t){(!e||e.length===0)&&(e=bE());var r,n={};if(!(r=e.match(u1e)))throw new Error("themeElements not found in theme");return c1e(r[0],n,t),n.raw=e,n}function bE(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Aa];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function d1e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=DH(a,{type:"array"})}catch{return}var o=Dl(i,"theme/theme/theme1.xml",!0);if(o)return UG(o,r)}}function f1e(e){return e.read_shift(4)}function h1e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=m1e(e,4);break;case 2:t.xclrValue=bG(e);break;case 3:t.xclrValue=f1e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function m1e(e,t){return vo(e,t)}function g1e(e,t){return vo(e,t)}function p1e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=h1e(e);break;case 6:n[1]=g1e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function x1e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push(p1e(e,r-e.l));return{ixfe:n,ext:a}}function y1e(e,t){t.forEach(function(r){r[0]})}function v1e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:xo(e)}}function w1e(e){var t=Lt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Si(e.name,t),t.slice(0,t.l)}function b1e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function _1e(e){var t=Lt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function S1e(e,t){var r=Lt(8+2*t.length);return r.write_shift(4,e),Si(t,r),r.slice(0,r.l)}function k1e(e){return e.l+=4,e.read_shift(4)!=0}function T1e(e,t){var r=Lt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function C1e(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return b0(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function E1e(){var e=ul();return Vt(e,332),Vt(e,334,iu(1)),Vt(e,335,w1e({name:"XLDAPR",version:12e4,flags:3496657072})),Vt(e,336),Vt(e,339,S1e(1,"XLDAPR")),Vt(e,52),Vt(e,35,iu(514)),Vt(e,4096,iu(0)),Vt(e,4097,dc(1)),Vt(e,36),Vt(e,53),Vt(e,340),Vt(e,337,T1e(1)),Vt(e,51,_1e([[1,0]])),Vt(e,338),Vt(e,333),e.end()}function N1e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(wo,function(o){var l=rn(o);switch(ad(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function WG(){var e=[Aa];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function A1e(e){var t=[];if(!e)return t;var r=1;return(e.match(wo)||[]).forEach(function(n){var s=rn(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function j1e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Zr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function P1e(e,t,r){var n=[];return b0(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function M1e(e,t,r,n){if(!e)return e;var s=n||{},a=!1;b0(e,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function F1e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var wp=1024;function HG(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[mr("xml",null,{"xmlns:v":Al.v,"xmlns:o":Al.o,"xmlns:x":Al.x,"xmlns:mv":Al.mv}).replace(/\/>/,">"),mr("o:shapelayout",mr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),mr("v:shapetype",[mr("v:stroke",null,{joinstyle:"miter"}),mr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];wp<e*1e3;)wp+=1e3;return t.forEach(function(a){var i=Js(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?mr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=mr("v:fill",l,o),d={on:"t",obscured:"t"};++wp,s=s.concat(["<v:shape"+jv({id:"_x0000_s"+wp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,mr("v:shadow",null,d),mr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",qi("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),qi("x:AutoFill","False"),qi("x:Row",String(i.r)),qi("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function ZD(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=Js(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var l=Ln(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=yn(l);u!==e["!ref"]&&(e["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function D1e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=rn(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Js(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&yE(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function GG(e){var t=[Aa,mr("comments",null,{xmlns:Ym[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=ss(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(ss(l.a))),a.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(qi("t",ss(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;t.push(qi("t",ss(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function O1e(e,t){var r=[],n=!1,s={},a=0;return e.replace(wo,function(o,l){var u=rn(o);switch(ad(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function R1e(e,t,r){var n=[Aa,mr("ThreadedComments",null,{xmlns:ei.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(mr("threadedComment",qi("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function I1e(e,t){var r=[],n=!1;return e.replace(wo,function(a){var i=rn(a);switch(ad(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function L1e(e){var t=[Aa,mr("personList",null,{xmlns:ei.TCMNT,"xmlns:x":Ym[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(mr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function B1e(e){var t={};t.iauthor=e.read_shift(4);var r=Zm(e);return t.rfx=r.s,t.ref=Zr(r.s),e.l+=16,t}function $1e(e,t){return t==null&&(t=Lt(36)),t.write_shift(4,e[1].iauthor),k1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var z1e=xo;function U1e(e){return Si(e.slice(0,54))}function W1e(e,t){var r=[],n=[],s={},a=!1;return b0(e,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function H1e(e){var t=ul(),r=[];return Vt(t,628),Vt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Vt(t,632,U1e(s.a)))})}),Vt(t,631),Vt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:Js(n[0]),e:Js(n[0])};Vt(t,635,$1e([a,s])),s.t&&s.t.length>0&&Vt(t,637,fhe(s)),Vt(t,636),delete s.iauthor})}),Vt(t,634),Vt(t,629),t.end()}var G1e="application/vnd.ms-office.vbaProject";function V1e(e){var t=zr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");zr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),zr.write(t)}function q1e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&zr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var VG=["xlsb","xlsm","xlam","biff8","xla"];function K1e(){return{"!type":"dialog"}}function Y1e(){return{"!type":"dialog"}}function X1e(){return{"!type":"macro"}}function J1e(){return{"!type":"macro"}}var Mp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,l?u+=t.r:--u,s+(o?"":"$")+Xs(d)+(l?"":"$")+Ea(u)}return function(s,a){return t=a,s.replace(e,r)}})(),_E=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,SE=(function(){return function(t,r){return t.replace(_E,function(n,s,a,i,o,l){var u=cE(i)-(a?0:r.c),d=lE(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+h})}})();function qG(e,t){return e.replace(_E,function(r,n,s,a,i,o){return n+(s=="$"?s+a:Xs(cE(a)+t.c))+(i=="$"?i+o:Ea(lE(o)+t.r))})}function Q1e(e,t,r){var n=dl(t),s=n.s,a=Js(r),i={r:a.r-s.r,c:a.c-s.c};return qG(e,i)}function Z1e(e){return e.length!=1}function eO(e){return e.replace(/_xlfn\./g,"")}function Da(e){e.l+=1}function Hf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function KG(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return YG(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=Hf(e),o=Hf(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function YG(e){var t=Hf(e),r=Hf(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function exe(e,t,r){if(r.biff<8)return YG(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=Hf(e),i=Hf(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function XG(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return txe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Hf(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function txe(e){var t=Hf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function rxe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function nxe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return sxe(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function sxe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function axe(e,t,r){var n=(e[e.l++]&96)>>5,s=KG(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function ixe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=KG(e,a,r);return[n,s,i]}function oxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function lxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function cxe(e,t,r){var n=(e[e.l++]&96)>>5,s=exe(e,t-1,r);return[n,s]}function uxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function tO(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function dxe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function fxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function hxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function mxe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function gxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function JG(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function pxe(e){return e.read_shift(2),JG(e)}function xxe(e){return e.read_shift(2),JG(e)}function yxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=XG(e,0,r);return[n,s]}function vxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=nxe(e,0,r);return[n,s]}function wxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=XG(e,0,r);return[n,s,a]}function bxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[kye[s],eV[s],n]}function _xe(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:Sxe(e);return[s,(a[0]===0?eV:Sye)[a[1]]]}function Sxe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function kxe(e,t,r){e.l+=r&&r.biff==2?3:4}function Txe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Cxe(e){return e.l++,_0[e.read_shift(1)]}function Exe(e){return e.l++,e.read_shift(2)}function Nxe(e){return e.l++,e.read_shift(1)!==0}function Axe(e){return e.l++,ho(e)}function jxe(e,t,r){return e.l++,k2(e,t-1,r)}function Pxe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=_a(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=_0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ho(e);break;case 2:r[1]=eg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Mxe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?Zm:h3)(e));return s}function Fxe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Pxe(e,r.biff);return i}function Dxe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function Oxe(e,t,r){if(r.biff==5)return Rxe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function Rxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Ixe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Lxe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Bxe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function $xe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var zxe=vo,Uxe=vo,Wxe=vo;function C2(e,t,r){return e.l+=2,[rxe(e)]}function kE(e){return e.l+=6,[]}var Hxe=C2,Gxe=kE,Vxe=kE,qxe=C2;function QG(e){return e.l+=2,[Ra(e),e.read_shift(2)&1]}var Kxe=C2,Yxe=QG,Xxe=kE,Jxe=C2,Qxe=C2,Zxe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function eye(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=Zxe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function tye(e){return e.l+=2,[e.read_shift(4)]}function rye(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function nye(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function sye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function aye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function iye(e){return e.l+=4,[0,0]}var rO={1:{n:"PtgExp",f:Txe},2:{n:"PtgTbl",f:Wxe},3:{n:"PtgAdd",f:Da},4:{n:"PtgSub",f:Da},5:{n:"PtgMul",f:Da},6:{n:"PtgDiv",f:Da},7:{n:"PtgPower",f:Da},8:{n:"PtgConcat",f:Da},9:{n:"PtgLt",f:Da},10:{n:"PtgLe",f:Da},11:{n:"PtgEq",f:Da},12:{n:"PtgGe",f:Da},13:{n:"PtgGt",f:Da},14:{n:"PtgNe",f:Da},15:{n:"PtgIsect",f:Da},16:{n:"PtgUnion",f:Da},17:{n:"PtgRange",f:Da},18:{n:"PtgUplus",f:Da},19:{n:"PtgUminus",f:Da},20:{n:"PtgPercent",f:Da},21:{n:"PtgParen",f:Da},22:{n:"PtgMissArg",f:Da},23:{n:"PtgStr",f:jxe},26:{n:"PtgSheet",f:rye},27:{n:"PtgEndSheet",f:nye},28:{n:"PtgErr",f:Cxe},29:{n:"PtgBool",f:Nxe},30:{n:"PtgInt",f:Exe},31:{n:"PtgNum",f:Axe},32:{n:"PtgArray",f:uxe},33:{n:"PtgFunc",f:bxe},34:{n:"PtgFuncVar",f:_xe},35:{n:"PtgName",f:Dxe},36:{n:"PtgRef",f:yxe},37:{n:"PtgArea",f:axe},38:{n:"PtgMemArea",f:Ixe},39:{n:"PtgMemErr",f:zxe},40:{n:"PtgMemNoMem",f:Uxe},41:{n:"PtgMemFunc",f:Lxe},42:{n:"PtgRefErr",f:Bxe},43:{n:"PtgAreaErr",f:oxe},44:{n:"PtgRefN",f:vxe},45:{n:"PtgAreaN",f:cxe},46:{n:"PtgMemAreaN",f:sye},47:{n:"PtgMemNoMemN",f:aye},57:{n:"PtgNameX",f:Oxe},58:{n:"PtgRef3d",f:wxe},59:{n:"PtgArea3d",f:ixe},60:{n:"PtgRefErr3d",f:$xe},61:{n:"PtgAreaErr3d",f:lxe},255:{}},oye={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},lye={1:{n:"PtgElfLel",f:QG},2:{n:"PtgElfRw",f:Jxe},3:{n:"PtgElfCol",f:Hxe},6:{n:"PtgElfRwV",f:Qxe},7:{n:"PtgElfColV",f:qxe},10:{n:"PtgElfRadical",f:Kxe},11:{n:"PtgElfRadicalS",f:Xxe},13:{n:"PtgElfColS",f:Gxe},15:{n:"PtgElfColSV",f:Vxe},16:{n:"PtgElfRadicalLel",f:Yxe},25:{n:"PtgList",f:eye},29:{n:"PtgSxName",f:tye},255:{}},cye={0:{n:"PtgAttrNoop",f:iye},1:{n:"PtgAttrSemi",f:gxe},2:{n:"PtgAttrIf",f:hxe},4:{n:"PtgAttrChoose",f:dxe},8:{n:"PtgAttrGoto",f:fxe},16:{n:"PtgAttrSum",f:kxe},32:{n:"PtgAttrBaxcel",f:tO},33:{n:"PtgAttrBaxcel",f:tO},64:{n:"PtgAttrSpace",f:pxe},65:{n:"PtgAttrSpaceSemi",f:xxe},128:{n:"PtgAttrIfError",f:mxe},255:{}};function E2(e,t,r,n){if(n.biff<8)return vo(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Fxe(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Mxe(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(vo(e,t)),a}function N2(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=rO[a]||rO[oye[a]],(a===24||a===25)&&(s=(a===24?lye:cye)[e[e.l+1]]),!s||!s.f?vo(e,t):i.push([s.n,s.f(e,t,r)]);return i}function uye(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var dye={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function fye(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function ZG(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function nO(e,t,r){var n=ZG(e,t,r);return n=="#REF"?n:fye(n,r)}function co(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,f=0,h=0,g,x="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",T=0,k=e[0].length;T<k;++T){var b=e[0][T];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=da(" ",e[0][y][1][1]);break;case 1:v=da("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}o.push(u+dye[b[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Xy(b[1][1],i,s),o.push(Jy(d,a));break;case"PtgRefN":d=r?Xy(b[1][1],r,s):b[1][1],o.push(Jy(d,a));break;case"PtgRef3d":f=b[1][1],d=Xy(b[1][2],i,s),x=nO(n,f,s),o.push(x+"!"+Jy(d,a));break;case"PtgFunc":case"PtgFuncVar":var E=b[1][0],N=b[1][1];E||(E=0),E&=127;var P=E==0?[]:o.slice(-E);o.length-=E,N==="User"&&(N=P.shift()),o.push(N+"("+P.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":g=MD(b[1][1],r?{s:r}:i,s),o.push(B5(g,s));break;case"PtgArea":g=MD(b[1][1],i,s),o.push(B5(g,s));break;case"PtgArea3d":f=b[1][1],g=b[1][2],x=nO(n,f,s),o.push(x+"!"+B5(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var M=(n.names||[])[h-1]||(n[0]||[])[h],j=M?M.Name:"SH33TJSNAME"+String(h);j&&j.slice(0,6)=="_xlfn."&&!s.xlfn&&(j=j.slice(6)),o.push(j);break;case"PtgNameX":var A=b[1][1];h=b[1][2];var F;if(s.biff<=5)A<0&&(A=-A),n[A]&&(F=n[A][h]);else{var L="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][h]&&n[A][h].itab>0&&(L=n.SheetNames[n[A][h].itab-1]+"!"):L=n.SheetNames[h-1]+"!"),n[A]&&n[A][h])L+=n[A][h].Name;else if(n[0]&&n[0][h])L+=n[0][h].Name;else{var V=(ZG(n,A,s)||"").split(";;");V[h-1]?L=V[h-1]:L+="SH33TJSERRX"}o.push(L);break}F||(F={Name:"SH33TJSERRY"}),o.push(F.Name);break;case"PtgParen":var J="(",ne=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:J=da(" ",e[0][y][1][1])+J;break;case 3:J=da("\r",e[0][y][1][1])+J;break;case 4:ne=da(" ",e[0][y][1][1])+ne;break;case 5:ne=da("\r",e[0][y][1][1])+ne;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}o.push(J+o.pop()+ne);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var ee={c:r.c,r:r.r};if(n.sharedf[Zr(d)]){var ie=n.sharedf[Zr(d)];o.push(co(ie,i,ee,n,s))}else{var B=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(co(u[1],i,ee,n,s)),B=!0;break}B||o.push(b[1])}break;case"PtgArray":o.push("{"+uye(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var Y=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&Y.indexOf(e[0][T][0])==-1){b=e[0][y];var I=!0;switch(b[1][0]){case 4:I=!1;case 0:v=da(" ",b[1][1]);break;case 5:I=!1;case 1:v=da("\r",b[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((I?v:"")+o.pop()+(I?"":v)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function hye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],vo(e,t-2)];var o=N2(e,i,r);return t!==i+s&&(a=E2(e,t-i-s,o,r)),e.l=n,[o,a]}function mye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],vo(e,t-2)];var o=N2(e,i,r);return t!==i+s&&(a=E2(e,t-i-s,o,r)),e.l=n,[o,a]}function gye(e,t,r,n){var s=e.l+t,a=N2(e,n,r),i;return s!==e.l&&(i=E2(e,s-e.l,a,r)),[a,i]}function pye(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=N2(e,a,r);return a==65535?[[],vo(e,t-2)]:(t!==a+2&&(s=E2(e,n-a-2,i,r)),[i,s])}function xye(e){var t;if(Kd(e,e.l+6)!==65535)return[ho(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function yye(e){if(e==null){var t=Lt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Dm(e);return Dm(0)}function H5(e,t,r){var n=e.l+t,s=id(e);r.biff==2&&++e.l;var a=xye(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=mye(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function vye(e,t,r,n,s){var a=Rm(t,r,s),i=yye(e.v),o=Lt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Lt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=bi([a,i,o,u]);return f}function m3(e,t,r){var n=e.read_shift(4),s=N2(e,n,r),a=e.read_shift(4),i=a>0?E2(e,a,s,r):null;return[s,i]}var wye=m3,g3=m3,bye=m3,_ye=m3,Sye={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},eV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},kye={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function sO(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Tye(e){var t="of:="+e.replace(_E,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function G5(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Cye(e){return e.replace(/\./,"!")}var Zy={},Fp={},ev=typeof Map<"u";function TE(e,t,r){var n=0,s=e.length;if(r){if(ev?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=ev?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(ev?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function p3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(uo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Ov(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=G4(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function hm(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function nh(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){t0(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function tV(e,t,r,n,s,a){try{n.cellNF&&(e.z=Jr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=As(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Jr[t]==null&&t0(Sfe[t]||"General",t),e.t==="e")e.w=e.w||_0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Nv(e.v);else if(e.t==="d"){var i=ni(e.v);(i|0)===i?e.w=i.toString(10):e.w=Nv(i)}else{if(e.v===void 0)return"";e.w=Mm(e.v,Fp)}else e.t==="d"?e.w=kc(t,ni(e.v),Fp):e.w=kc(t,e.v,Fp)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=H4(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=H4(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function Eye(e,t,r){if(e&&e["!ref"]){var n=Ln(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Nye(e,t){var r=Ln(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=yn(r))}var Aye=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,jye=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Pye=/<(?:\w:)?hyperlink [^>]*>/mg,Mye=/"(\w*:\w*)"/,Fye=/<(?:\w:)?col\b[^>]*[\/]?>/g,Dye=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Oye=/<(?:\w:)?pageMargins[^>]*\/>/g,rV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Rye=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Iye=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Lye(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(jye);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(rV);h?CE(h[0],o,s,r):(h=u.match(Rye))&&$ye(h[0],h[1]||"",o,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var x=u.slice(g,g+50).match(Mye);x&&Nye(o,x[1])}var y=u.match(Iye);y&&y[1]&&Zye(y[1],s);var v=[];if(t.cellStyles){var T=u.match(Fye);T&&Kye(v,T)}f&&rve(f[1],o,t,l,a,i);var k=d.match(Dye);k&&(o["!autofilter"]=Xye(k[0]));var b=[],E=d.match(Aye);if(E)for(g=0;g!=E.length;++g)b[g]=Ln(E[g].slice(E[g].indexOf('"')+1));var N=d.match(Pye);N&&Gye(o,N,n);var P=d.match(Oye);if(P&&(o["!margins"]=Vye(rn(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=yn(l)),t.sheetRows>0&&o["!ref"]){var M=Ln(o["!ref"]);t.sheetRows<=+M.e.r&&(M.e.r=t.sheetRows-1,M.e.r>l.e.r&&(M.e.r=l.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>l.e.c&&(M.e.c=l.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),o["!fullref"]=o["!ref"],o["!ref"]=yn(M))}return v.length>0&&(o["!cols"]=v),b.length>0&&(o["!merges"]=b),o}function Bye(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+yn(e[r])+'"/>';return t+"</mergeCells>"}function CE(e,t,r,n){var s=rn(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Rn(ds(s.codeName)))}function $ye(e,t,r,n,s){CE(e.slice(0,e.indexOf(">")),r,n,s)}function zye(e,t,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,i.codeName=Hu(ss(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+mr("outlinePr",null,u)}!a&&!o||(s[s.length]=mr("sheetPr",o,i))}var Uye=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Wye=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Hye(e){var t={sheet:1};return Uye.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Wye.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=vE(e.password).toString(16).toUpperCase()),mr("sheetProtection",null,t)}function Gye(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=rn(ds(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+Rn(a.location))):(a.Target="#"+Rn(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Ln(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Zr({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function Vye(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function qye(e){return hm(e),mr("pageMargins",null,e)}function Kye(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=rn(t[n],!0);s.hidden&&(s.hidden=Ts(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,wE(s.width)),Wf(s);a<=i;)e[a++]=js(s)}}function Yye(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=mr("col",null,p3(s,n)));return r[r.length]="</cols>",r.join("")}function Xye(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Jye(e,t,r,n){var s=typeof e.ref=="string"?e.ref:yn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=dl(s);i.s.r==i.e.r&&(i.e.r=dl(t["!ref"]).e.r,s=yn(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),mr("autoFilter",null,{ref:s})}var Qye=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Zye(e,t){t.Views||(t.Views=[{}]),(e.match(Qye)||[]).forEach(function(r,n){var s=rn(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Ts(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function eve(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),mr("sheetViews",mr("sheetView",null,s),{})}function tve(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=_0[e.v];break;case"d":n&&n.cellDates?s=As(e.v,-1).toISOString():(e=js(e),e.t="n",s=""+(e.v=ni(As(e.v)))),typeof e.z>"u"&&(e.z=Jr[14]);break;default:s=e.v;break}var o=qi("v",ss(s)),l={r:t},u=nh(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=qi("v",""+TE(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=a&&(e.t=a,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=mr("f",ss(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),mr("c",o,l)}var rve=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Av("v"),i=Av("f");return function(l,u,d,f,h,g){for(var x=0,y="",v=[],T=[],k=0,b=0,E=0,N="",P,M,j=0,A=0,F,L,V=0,J=0,ne=Array.isArray(g.CellXf),ee,ie=[],B=[],Y=Array.isArray(u),I=[],H={},W=!1,R=!!d.sheetStubs,z=l.split(t),G=0,Q=z.length;G!=Q;++G){y=z[G].trim();var re=y.length;if(re!==0){var q=0;e:for(x=0;x<re;++x)switch(y[x]){case">":if(y[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(M=rn(y.slice(q,x),!0),j=M.r!=null?parseInt(M.r,10):j+1,A=-1,d.sheetRows&&d.sheetRows<j)continue;H={},W=!1,M.ht&&(W=!0,H.hpt=parseFloat(M.ht),H.hpx=Kp(H.hpt)),M.hidden=="1"&&(W=!0,H.hidden=!0),M.outlineLevel!=null&&(W=!0,H.level=+M.outlineLevel),W&&(I[j-1]=H)}break;case"<":q=x;break}if(q>=x)break;if(M=rn(y.slice(q,x),!0),j=M.r!=null?parseInt(M.r,10):j+1,A=-1,!(d.sheetRows&&d.sheetRows<j)){f.s.r>j-1&&(f.s.r=j-1),f.e.r<j-1&&(f.e.r=j-1),d&&d.cellStyles&&(H={},W=!1,M.ht&&(W=!0,H.hpt=parseFloat(M.ht),H.hpx=Kp(H.hpt)),M.hidden=="1"&&(W=!0,H.hidden=!0),M.outlineLevel!=null&&(W=!0,H.level=+M.outlineLevel),W&&(I[j-1]=H)),v=y.slice(x).split(e);for(var se=0;se!=v.length&&v[se].trim().charAt(0)=="<";++se);for(v=v.slice(se),x=0;x!=v.length;++x)if(y=v[x].trim(),y.length!==0){if(T=y.match(r),k=x,b=0,E=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,T!=null&&T.length===2){for(k=0,N=T[1],b=0;b!=N.length&&!((E=N.charCodeAt(b)-64)<1||E>26);++b)k=26*k+E;--k,A=k}else++A;for(b=0;b!=y.length&&y.charCodeAt(b)!==62;++b);if(++b,M=rn(y.slice(0,b),!0),M.r||(M.r=Zr({r:j-1,c:A})),N=y.slice(b),P={t:""},(T=N.match(a))!=null&&T[1]!==""&&(P.v=Rn(T[1])),d.cellFormula){if((T=N.match(i))!=null&&T[1]!==""){if(P.f=Rn(ds(T[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=eO(P.f)),T[0].indexOf('t="array"')>-1)P.F=(N.match(s)||[])[1],P.F.indexOf(":")>-1&&ie.push([Ln(P.F),P.F]);else if(T[0].indexOf('t="shared"')>-1){L=rn(T[0]);var ce=Rn(ds(T[1]));d.xlfn||(ce=eO(ce)),B[parseInt(L.si,10)]=[L,ce,M.r]}}else(T=N.match(/<f[^>]*\/>/))&&(L=rn(T[0]),B[L.si]&&(P.f=Q1e(B[L.si][1],B[L.si][2],M.r)));var pe=Js(M.r);for(b=0;b<ie.length;++b)pe.r>=ie[b][0].s.r&&pe.r<=ie[b][0].e.r&&pe.c>=ie[b][0].s.c&&pe.c<=ie[b][0].e.c&&(P.F=ie[b][1])}if(M.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(R)P.t="z";else continue;else P.t=M.t||"n";switch(f.s.c>A&&(f.s.c=A),f.e.c<A&&(f.e.c=A),P.t){case"n":if(P.v==""||P.v==null){if(!R)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!R)continue;P.t="z"}else F=Zy[parseInt(P.v,10)],P.v=F.t,P.r=F.r,d.cellHTML&&(P.h=F.h);break;case"str":P.t="s",P.v=P.v!=null?ds(P.v):"",d.cellHTML&&(P.h=sE(P.v));break;case"inlineStr":T=N.match(n),P.t="s",T!=null&&(F=yE(T[1]))?(P.v=F.t,d.cellHTML&&(P.h=F.h)):P.v="";break;case"b":P.v=Ts(P.v);break;case"d":d.cellDates?P.v=As(P.v,1):(P.v=ni(As(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=sG[P.v];break}if(V=J=0,ee=null,ne&&M.s!==void 0&&(ee=g.CellXf[M.s],ee!=null&&(ee.numFmtId!=null&&(V=ee.numFmtId),d.cellStyles&&ee.fillId!=null&&(J=ee.fillId))),tV(P,V,J,d,h,g),d.cellDates&&ne&&P.t=="n"&&b1(Jr[V])&&(P.t="d",P.v=f3(P.v)),M.cm&&d.xlmeta){var ke=(d.xlmeta.Cell||[])[+M.cm-1];ke&&ke.type=="XLDAPR"&&(P.D=!0)}if(Y){var le=Js(M.r);u[le.r]||(u[le.r]=[]),u[le.r][le.c]=P}else u[M.r]=P}}}}I.length>0&&(u["!rows"]=I)}})();function nve(e,t,r,n){var s=[],a=[],i=Ln(e["!ref"]),o="",l,u="",d=[],f=0,h=0,g=e["!rows"],x=Array.isArray(e),y={r:u},v,T=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=Xs(h);for(f=i.s.r;f<=i.e.r;++f){for(a=[],u=Ea(f),h=i.s.c;h<=i.e.c;++h){l=d[h]+u;var k=x?(e[f]||[])[h]:e[l];k!==void 0&&(o=tve(k,l,e,t))!=null&&a.push(o)}(a.length>0||g&&g[f])&&(y={r:u},g&&g[f]&&(v=g[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Rv(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=mr("row",a.join(""),y))}if(g)for(;f<g.length;++f)g&&g[f]&&(y={r:f+1},v=g[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Rv(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=mr("row","",y));return s.join("")}function nV(e,t,r,n){var s=[Aa,mr("worksheet",null,{xmlns:Ym[0],"xmlns:r":ei.r})],a=r.SheetNames[e],i=0,o="",l=r.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=Ln(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=yn(d)}n||(n={}),l["!comments"]=[];var f=[];zye(l,r,e,t,s),s[s.length]=mr("dimension",null,{ref:u}),s[s.length]=eve(l,t,e,r),t.sheetFormat&&(s[s.length]=mr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Yye(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=nve(l,t),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=Hye(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Jye(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Bye(l["!merges"]));var h=-1,g,x=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(x=rs(n,-1,ss(y[1].Target).replace(/#.*$/,""),En.HLINK),g["r:id"]="rId"+x),(h=y[1].Target.indexOf("#"))>-1&&(g.location=ss(y[1].Target.slice(h+1))),y[1].Tooltip&&(g.tooltip=ss(y[1].Tooltip)),s[s.length]=mr("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=qye(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=qi("ignoredErrors",mr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=rs(n,-1,"../drawings/drawing"+(e+1)+".xml",En.DRAW),s[s.length]=mr("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=rs(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",En.VML),s[s.length]=mr("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function sve(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function ave(e,t,r){var n=Lt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=Rv(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Zr(u)];x&&(f<0&&(f=g),h=g)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function ive(e,t,r,n){var s=ave(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Vt(e,0,s)}var ove=Zm,lve=k1;function cve(){}function uve(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=hhe(e),r}function dve(e,t,r){r==null&&(r=Lt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return z4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),ZH(e,r),r.slice(0,r.l)}function fve(e){var t=Ac(e);return[t]}function hve(e,t,r){return r==null&&(r=Lt(8)),Xm(t,r)}function mve(e){var t=Jm(e);return[t]}function gve(e,t,r){return r==null&&(r=Lt(4)),Qm(t,r)}function pve(e){var t=Ac(e),r=e.read_shift(1);return[t,r,"b"]}function xve(e,t,r){return r==null&&(r=Lt(9)),Xm(t,r),r.write_shift(1,e.v?1:0),r}function yve(e){var t=Jm(e),r=e.read_shift(1);return[t,r,"b"]}function vve(e,t,r){return r==null&&(r=Lt(5)),Qm(t,r),r.write_shift(1,e.v?1:0),r}function wve(e){var t=Ac(e),r=e.read_shift(1);return[t,r,"e"]}function bve(e,t,r){return r==null&&(r=Lt(9)),Xm(t,r),r.write_shift(1,e.v),r}function _ve(e){var t=Jm(e),r=e.read_shift(1);return[t,r,"e"]}function Sve(e,t,r){return r==null&&(r=Lt(8)),Qm(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function kve(e){var t=Ac(e),r=e.read_shift(4);return[t,r,"s"]}function Tve(e,t,r){return r==null&&(r=Lt(12)),Xm(t,r),r.write_shift(4,t.v),r}function Cve(e){var t=Jm(e),r=e.read_shift(4);return[t,r,"s"]}function Eve(e,t,r){return r==null&&(r=Lt(8)),Qm(t,r),r.write_shift(4,t.v),r}function Nve(e){var t=Ac(e),r=ho(e);return[t,r,"n"]}function Ave(e,t,r){return r==null&&(r=Lt(16)),Xm(t,r),Dm(e.v,r),r}function sV(e){var t=Jm(e),r=ho(e);return[t,r,"n"]}function jve(e,t,r){return r==null&&(r=Lt(12)),Qm(t,r),Dm(e.v,r),r}function Pve(e){var t=Ac(e),r=hE(e);return[t,r,"n"]}function Mve(e,t,r){return r==null&&(r=Lt(12)),Xm(t,r),eG(e.v,r),r}function Fve(e){var t=Jm(e),r=hE(e);return[t,r,"n"]}function Dve(e,t,r){return r==null&&(r=Lt(8)),Qm(t,r),eG(e.v,r),r}function Ove(e){var t=Ac(e),r=uE(e);return[t,r,"is"]}function Rve(e){var t=Ac(e),r=xo(e);return[t,r,"str"]}function Ive(e,t,r){return r==null&&(r=Lt(12+4*e.v.length)),Xm(t,r),Si(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Lve(e){var t=Jm(e),r=xo(e);return[t,r,"str"]}function Bve(e,t,r){return r==null&&(r=Lt(8+4*e.v.length)),Qm(t,r),Si(e.v,r),r.length>r.l?r.slice(0,r.l):r}function $ve(e,t,r){var n=e.l+t,s=Ac(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=g3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function zve(e,t,r){var n=e.l+t,s=Ac(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=g3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function Uve(e,t,r){var n=e.l+t,s=Ac(e);s.r=r["!row"];var a=ho(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=g3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function Wve(e,t,r){var n=e.l+t,s=Ac(e);s.r=r["!row"];var a=xo(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=g3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}var Hve=Zm,Gve=k1;function Vve(e,t){return t==null&&(t=Lt(4)),t.write_shift(4,e),t}function qve(e,t){var r=e.l+t,n=Zm(e),s=dE(e),a=xo(e),i=xo(e),o=xo(e);e.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function Kve(e,t){var r=Lt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));k1({s:Js(e[0]),e:Js(e[0])},r),fE("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Si(s||"",r),Si(e[1].Tooltip||"",r),Si("",r),r.slice(0,r.l)}function Yve(){}function Xve(e,t,r){var n=e.l+t,s=tG(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=wye(e,n-e.l,r);i[1]=o}else e.l=n;return i}function Jve(e,t,r){var n=e.l+t,s=Zm(e),a=[s];if(r.cellFormula){var i=_ye(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}function Qve(e,t,r){r==null&&(r=Lt(18));var n=p3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var aV=["left","right","top","bottom","header","footer"];function Zve(e){var t={};return aV.forEach(function(r){t[r]=ho(e)}),t}function e2e(e,t){return t==null&&(t=Lt(48)),hm(e),aV.forEach(function(r){Dm(e[r],t)}),t}function t2e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function r2e(e,t,r){r==null&&(r=Lt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function n2e(e){var t=Lt(24);return t.write_shift(4,4),t.write_shift(4,1),k1(e,t),t}function s2e(e,t){return t==null&&(t=Lt(66)),t.write_shift(2,e.password?vE(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function a2e(){}function i2e(){}function o2e(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,g,x,y,v,T,k,b,E,N,P=[];o.biff=12,o["!row"]=0;var M=0,j=!1,A=[],F={},L=o.supbooks||s.supbooks||[[]];if(L.sharedf=F,L.arrayf=A,L.SheetNames=s.SheetNames||s.Sheets.map(function(Y){return Y.name}),!o.supbooks&&(o.supbooks=L,s.Names))for(var V=0;V<s.Names.length;++V)L[0][V+1]=s.Names[V];var J=[],ne=[],ee=!1;Iv[16]={n:"BrtShortReal",f:sV};var ie;if(b0(e,function(I,H,W){if(!h)switch(W){case 148:u=I;break;case 0:g=I,o.sheetRows&&o.sheetRows<=g.r&&(h=!0),E=Ea(v=g.r),o["!row"]=g.r,(I.hidden||I.hpt||I.level!=null)&&(I.hpt&&(I.hpx=Kp(I.hpt)),ne[I.r]=I);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:I[2]},I[2]){case"n":x.v=I[1];break;case"s":b=Zy[I[1]],x.v=b.t,x.r=b.r;break;case"b":x.v=!!I[1];break;case"e":x.v=I[1],o.cellText!==!1&&(x.w=_0[x.v]);break;case"str":x.t="s",x.v=I[1];break;case"is":x.t="s",x.v=I[1].t;break}if((y=i.CellXf[I[0].iStyleRef])&&tV(x,y.numFmtId,null,o,a,i),T=I[0].c==-1?T+1:I[0].c,o.dense?(l[v]||(l[v]=[]),l[v][T]=x):l[Xs(T)+E]=x,o.cellFormula){for(j=!1,M=0;M<A.length;++M){var R=A[M];g.r>=R[0].s.r&&g.r<=R[0].e.r&&T>=R[0].s.c&&T<=R[0].e.c&&(x.F=yn(R[0]),j=!0)}!j&&I.length>3&&(x.f=I[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),o.cellDates&&y&&x.t=="n"&&b1(Jr[y.numFmtId])){var z=Zh(x.v);z&&(x.t="d",x.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}ie&&(ie.type=="XLDAPR"&&(x.D=!0),ie=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},T=I[0].c==-1?T+1:I[0].c,o.dense?(l[v]||(l[v]=[]),l[v][T]=x):l[Xs(T)+E]=x,d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),ie&&(ie.type=="XLDAPR"&&(x.D=!0),ie=void 0);break;case 176:P.push(I);break;case 49:ie=((o.xlmeta||{}).Cell||[])[I-1];break;case 494:var G=n["!id"][I.relId];for(G?(I.Target=G.Target,I.loc&&(I.Target+="#"+I.loc),I.Rel=G):I.relId==""&&(I.Target="#"+I.loc),v=I.rfx.s.r;v<=I.rfx.e.r;++v)for(T=I.rfx.s.c;T<=I.rfx.e.c;++T)o.dense?(l[v]||(l[v]=[]),l[v][T]||(l[v][T]={t:"z",v:void 0}),l[v][T].l=I):(k=Zr({c:T,r:v}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=I);break;case 426:if(!o.cellFormula)break;A.push(I),N=o.dense?l[v][T]:l[Xs(T)+E],N.f=co(I[1],d,{r:g.r,c:T},L,o),N.F=yn(I[0]);break;case 427:if(!o.cellFormula)break;F[Zr(I[0].s)]=I[1],N=o.dense?l[v][T]:l[Xs(T)+E],N.f=co(I[1],d,{r:g.r,c:T},L,o);break;case 60:if(!o.cellStyles)break;for(;I.e>=I.s;)J[I.e--]={width:I.w/256,hidden:!!(I.flags&1),level:I.level},ee||(ee=!0,wE(I.w/256)),Wf(J[I.e+1]);break;case 161:l["!autofilter"]={ref:yn(I)};break;case 476:l["!margins"]=I;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),I.name&&(s.Sheets[r].CodeName=I.name),(I.above||I.left)&&(l["!outline"]={above:I.above,left:I.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),I.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!H.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=yn(u||d)),o.sheetRows&&l["!ref"]){var B=Ln(l["!ref"]);o.sheetRows<=+B.e.r&&(B.e.r=o.sheetRows-1,B.e.r>d.e.r&&(B.e.r=d.e.r),B.e.r<B.s.r&&(B.s.r=B.e.r),B.e.c>d.e.c&&(B.e.c=d.e.c),B.e.c<B.s.c&&(B.s.c=B.e.c),l["!fullref"]=l["!ref"],l["!ref"]=yn(B))}return P.length>0&&(l["!merges"]=P),J.length>0&&(l["!cols"]=J),ne.length>0&&(l["!rows"]=ne),l}function l2e(e,t,r,n,s,a,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=js(t),t.z=t.z||Jr[14],t.v=ni(As(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=nh(s.cellXfs,t,s),t.l&&a["!links"].push([Zr(l),t.l]),t.c&&a["!comments"].push([Zr(l),t.c]),t.t){case"s":case"str":return s.bookSST?(o=TE(s.Strings,t.v,s.revStrings),l.t="s",l.v=o,i?Vt(e,18,Eve(t,l)):Vt(e,7,Tve(t,l))):(l.t="str",i?Vt(e,17,Bve(t,l)):Vt(e,6,Ive(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Vt(e,13,Dve(t,l)):Vt(e,2,Mve(t,l)):i?Vt(e,16,jve(t,l)):Vt(e,5,Ave(t,l)),!0;case"b":return l.t="b",i?Vt(e,15,vve(t,l)):Vt(e,4,xve(t,l)),!0;case"e":return l.t="e",i?Vt(e,14,Sve(t,l)):Vt(e,3,bve(t,l)),!0}return i?Vt(e,12,gve(t,l)):Vt(e,1,hve(t,l)),!0}function c2e(e,t,r,n){var s=Ln(t["!ref"]||"A1"),a,i="",o=[];Vt(e,145);var l=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Ea(d),ive(e,t,s,d);var f=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=Xs(h)),a=o[h]+i;var g=l?(t[d]||[])[h]:t[a];if(!g){f=!1;continue}f=l2e(e,g,d,h,n,t,f)}}Vt(e,146)}function u2e(e,t){!t||!t["!merges"]||(Vt(e,177,Vve(t["!merges"].length)),t["!merges"].forEach(function(r){Vt(e,176,Gve(r))}),Vt(e,178))}function d2e(e,t){!t||!t["!cols"]||(Vt(e,390),t["!cols"].forEach(function(r,n){r&&Vt(e,60,Qve(n,r))}),Vt(e,391))}function f2e(e,t){!t||!t["!ref"]||(Vt(e,648),Vt(e,649,n2e(Ln(t["!ref"]))),Vt(e,650))}function h2e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=rs(r,-1,n[1].Target.replace(/#.*$/,""),En.HLINK);Vt(e,494,Kve(n,s))}}),delete t["!links"]}function m2e(e,t,r,n){if(t["!comments"].length>0){var s=rs(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",En.VML);Vt(e,551,fE("rId"+s)),t["!legacy"]=s}}function g2e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:yn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=dl(a);o.s.r==o.e.r&&(o.e.r=dl(t["!ref"]).e.r,a=yn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Vt(e,161,k1(Ln(a))),Vt(e,162)}}function p2e(e,t,r){Vt(e,133),Vt(e,137,r2e(t,r)),Vt(e,138),Vt(e,134)}function x2e(e,t){t["!protect"]&&Vt(e,535,s2e(t["!protect"]))}function y2e(e,t,r,n){var s=ul(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Ln(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Vt(s,129),(r.vbaraw||i["!outline"])&&Vt(s,147,dve(o,i["!outline"])),Vt(s,148,lve(l)),p2e(s,i,r.Workbook),d2e(s,i),c2e(s,i,e,t),x2e(s,i),g2e(s,i,r,e),u2e(s,i),h2e(s,i,n),i["!margins"]&&Vt(s,476,e2e(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&f2e(s,i),m2e(s,i,e,n),Vt(s,130),s.end()}function v2e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=Rn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function w2e(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=v2e(f);d.s.r=d.s.c=0,d.e.c=o,u=Xs(o),h[0].forEach(function(g,x){i[u+Ea(x)]={t:"n",v:g,z:h[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=yn(d)),i}function b2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(rV);return o&&CE(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function _2e(e,t){e.l+=10;var r=xo(e);return{name:r}}function S2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return b0(e,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var EE=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],k2e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],T2e=[],C2e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function aO(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Ts(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function iO(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ts(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function iV(e){iO(e.WBProps,EE),iO(e.CalcPr,C2e),aO(e.WBView,k2e),aO(e.Sheets,T2e),Fp.date1904=Ts(e.WBProps.date1904)}function E2e(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ts(e.Workbook.WBProps.date1904)?"true":"false"}var N2e="][*?/\\".split("");function oV(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return N2e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function A2e(e,t,r){e.forEach(function(n,s){oV(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function j2e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];A2e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Eye(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var P2e=/<\w+:workbook/;function M2e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(wo,function(l,u){var d=rn(l);switch(ad(d[0])){case"<?xml":break;case"<workbook":l.match(P2e)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":EE.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ts(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=ds(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Rn(ds(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=ds(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Ts(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=Rn(ds(e.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Ym.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return iV(r),r}function lV(e){var t=[Aa];t[t.length]=mr("workbook",null,{xmlns:Ym[0],"xmlns:r":ei.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(EE.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=mr("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:ss(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=mr("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=mr("definedName",ss(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function F2e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=W8(e),r.name=xo(e),r}function D2e(e,t){return t||(t=Lt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),fE(e.strRelID,t),Si(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function O2e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?xo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function R2e(e,t){t||(t=Lt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),ZH(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function I2e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function L2e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=mhe(e),i=bye(e,0,r),o=dE(e);e.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function B2e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Iv[16]={n:"BrtFRTArchID$",f:I2e},b0(e,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=co(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),iV(r),r.Names=a,r.supbooks=i,r}function $2e(e,t){Vt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Vt(e,156,D2e(s))}Vt(e,144)}function z2e(e,t){t||(t=Lt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Si("SheetJS",t),Si(D4.version,t),Si(D4.version,t),Si("7262",t),t.length>t.l?t.slice(0,t.l):t}function U2e(e,t){t||(t=Lt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function W2e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Vt(e,135),Vt(e,158,U2e(s)),Vt(e,136))}}function H2e(e,t){var r=ul();return Vt(r,131),Vt(r,128,z2e()),Vt(r,153,R2e(e.Workbook&&e.Workbook.WBProps||null)),W2e(r,e),$2e(r,e),Vt(r,132),r.end()}function G2e(e,t,r){return t.slice(-4)===".bin"?B2e(e,r):M2e(e,r)}function V2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?o2e(e,n,r,s,a,i,o):Lye(e,n,r,s,a,i,o)}function q2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?S2e(e,n,r,s,a):b2e(e,n,r,s,a)}function K2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?X1e():J1e()}function Y2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?K1e():Y1e()}function X2e(e,t,r,n){return t.slice(-4)===".bin"?Gpe(e,r,n):Fpe(e,r,n)}function J2e(e,t,r){return UG(e,r)}function Q2e(e,t,r){return t.slice(-4)===".bin"?Qge(e,r):Yge(e,r)}function Z2e(e,t,r){return t.slice(-4)===".bin"?W1e(e,r):D1e(e,r)}function ewe(e,t,r){return t.slice(-4)===".bin"?P1e(e):A1e(e)}function twe(e,t,r,n){return r.slice(-4)===".bin"?M1e(e,t,r,n):void 0}function rwe(e,t,r){return t.slice(-4)===".bin"?C1e(e,t,r):N1e(e,t,r)}function nwe(e,t,r){return(t.slice(-4)===".bin"?H2e:lV)(e)}function swe(e,t,r,n,s){return(t.slice(-4)===".bin"?y2e:nV)(e,r,n,s)}function awe(e,t,r){return(t.slice(-4)===".bin"?t1e:$G)(e,r)}function iwe(e,t,r){return(t.slice(-4)===".bin"?tpe:MG)(e,r)}function owe(e,t,r){return(t.slice(-4)===".bin"?H1e:GG)(e)}function lwe(e){return(e.slice(-4)===".bin"?E1e:WG)()}var cV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,uV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Yc(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(cV),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(uV),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function cwe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(cV),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(uV),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var tv;function uwe(e,t){var r=tv[e]||Rn(e);return r==="General"?Mm(t):kc(r,t)}function dwe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ts(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=As(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Rn(t)]=s}function fwe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||_0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Nv(e.v):e.w=Mm(e.v):e.w=uwe(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=tv[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&b1(n)){var s=Zh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function hwe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Tpe[n.Pattern]||n.Pattern)}e[t.ID]=t}function mwe(e,t,r,n,s,a,i,o,l,u){var d="General",f=n.StyleID,h={};u=u||{};var g=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&g.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ts(e);break;case"String":n.t="s",n.r=SD(Rn(e)),n.v=e.indexOf("<")>-1?Rn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(As(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Rn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=sG[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=SD(t||e));break}if(fwe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=Rn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Mp(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Mp("RC:RC",s):n.ArrayRange&&(n.F=Mp(n.ArrayRange,s),l.push([Ln(n.F),n.F]))}else for(x=0;x<l.length;++x)s.r>=l[x][0].s.r&&s.r<=l[x][0].e.r&&s.c>=l[x][0].s.c&&s.c<=l[x][0].e.c&&(n.F=l[x][1]);u.cellStyles&&(g.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function gwe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function V5(e,t){var r=t||{};_1();var n=Fy(aE(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ds(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=js(r);return i.type="string",qp.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Nt){s.indexOf("<"+Nt)>=0&&(a=!0)}),a)return ebe(n,r);tv={"General Number":"General","General Date":Jr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Jr[15],"Short Date":Jr[14],"Long Time":Jr[19],"Medium Time":Jr[18],"Short Time":Jr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Jr[2],Standard:Jr[4],Percent:Jr[10],Scientific:Jr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},f=[],h=r.dense?[]:{},g="",x={},y={},v=Yc('<Data ss:Type="String">'),T=0,k=0,b=0,E={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},P={},M="",j=0,A=[],F={},L={},V=0,J=[],ne=[],ee={},ie=[],B,Y=!1,I=[],H=[],W={},R=0,z=0,G={Sheets:[],WBProps:{date1904:!1}},Q={};Pv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var re="";o=Pv.exec(n);)switch(o[3]=(re=o[3]).toLowerCase()){case"data":if(re=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?mwe(n.slice(T,o.index),M,v,l[l.length-1][0]=="comment"?ee:x,{c:k,r:b},N,ie[k],y,I,r):(M="",v=Yc(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(ne.length>0&&(x.c=ne),(!r.sheetRows||r.sheetRows>b)&&x.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][k]=x):h[Xs(k)+Ea(b)]=x),x.HRef&&(x.l={Target:Rn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(R=k+(parseInt(x.MergeAcross,10)|0),z=b+(parseInt(x.MergeDown,10)|0),A.push({s:{c:k,r:b},e:{c:R,r:z}})),!r.sheetStubs)x.MergeAcross?k=R+1:++k;else if(x.MergeAcross||x.MergeDown){for(var q=k;q<=R;++q)for(var se=b;se<=z;++se)(q>k||se>b)&&(r.dense?(h[se]||(h[se]=[]),h[se][q]={t:"z"}):h[Xs(q)+Ea(se)]={t:"z"});k=R+1}else++k;else x=cwe(o[0]),x.Index&&(k=+x.Index-1),k<E.s.c&&(E.s.c=k),k>E.e.c&&(E.e.c=k),o[0].slice(-2)==="/>"&&++k,ne=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<E.s.r&&(E.s.r=b),b>E.e.r&&(E.e.r=b),o[0].slice(-2)==="/>"&&(y=Yc(o[0]),y.Index&&(b=+y.Index-1)),k=0,++b):(y=Yc(o[0]),y.Index&&(b=+y.Index-1),W={},(y.AutoFitHeight=="0"||y.Height)&&(W.hpx=parseInt(y.Height,10),W.hpt=Rv(W.hpx),H[b]=W),y.Hidden=="1"&&(W.hidden=!0,H[b]=W));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(g),E.s.r<=E.e.r&&E.s.c<=E.e.c&&(h["!ref"]=yn(E),r.sheetRows&&r.sheetRows<=E.e.r&&(h["!fullref"]=h["!ref"],E.e.r=r.sheetRows-1,h["!ref"]=yn(E))),A.length&&(h["!merges"]=A),ie.length>0&&(h["!cols"]=ie),H.length>0&&(h["!rows"]=H),d[g]=h}else E={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=k=0,l.push([o[3],!1]),u=Yc(o[0]),g=Rn(u.Name),h=r.dense?[]:{},A=[],I=[],H=[],Q={name:g,Hidden:0},G.Sheets.push(Q);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),ie=[],Y=!1}break;case"style":o[1]==="/"?hwe(N,P,r):P=Yc(o[0]);break;case"numberformat":P.nf=Rn(Yc(o[0]).Format||"General"),tv[P.nf]&&(P.nf=tv[P.nf]);for(var ce=0;ce!=392&&Jr[ce]!=P.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Jr[ce]==null){t0(P.nf,ce);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(B=Yc(o[0]),B.Hidden&&(B.hidden=!0,delete B.Hidden),B.Width&&(B.wpx=parseInt(B.Width,10)),!Y&&B.wpx>10){Y=!0,uo=LG;for(var pe=0;pe<ie.length;++pe)ie[pe]&&Wf(ie[pe])}Y&&Wf(B),ie[B.Index-1||ie.length]=B;for(var ke=0;ke<+B.Span;++ke)ie[ie.length]=js(B);break;case"namedrange":if(o[1]==="/")break;G.Names||(G.Names=[]);var le=rn(o[0]),ye={Name:le.Name,Ref:Mp(le.RefersTo.slice(1),{r:0,c:0})};G.Sheets.length>0&&(ye.Sheet=G.Sheets.length-1),G.Names.push(ye);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?M+=n.slice(j,o.index):j=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=Yc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Bhe(F,re,n.slice(V,o.index)):V=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));gwe(ee),ne.push(ee)}else l.push([o[3],!1]),u=Yc(o[0]),ee={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var je=Yc(o[0]);h["!autofilter"]={ref:Mp(je.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return dO(n,r);var Ne=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ne=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ne=!1}break;case"excelworkbook":switch(o[3]){case"date1904":G.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ne=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ne=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(V,o.index)){case"SheetHidden":Q.Hidden=1;break;case"SheetVeryHidden":Q.Hidden=2;break}else V=o.index+o[0].length;break;case"header":h["!margins"]||hm(h["!margins"]={},"xlml"),isNaN(+rn(o[0]).Margin)||(h["!margins"].header=+rn(o[0]).Margin);break;case"footer":h["!margins"]||hm(h["!margins"]={},"xlml"),isNaN(+rn(o[0]).Margin)||(h["!margins"].footer=+rn(o[0]).Margin);break;case"pagemargins":var We=rn(o[0]);h["!margins"]||hm(h["!margins"]={},"xlml"),isNaN(+We.Top)||(h["!margins"].top=+We.Top),isNaN(+We.Left)||(h["!margins"].left=+We.Left),isNaN(+We.Right)||(h["!margins"].right=+We.Right),isNaN(+We.Bottom)||(h["!margins"].bottom=+We.Bottom);break;case"displayrighttoleft":G.Views||(G.Views=[]),G.Views[0]||(G.Views[0]={}),G.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ne=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ne=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ne=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ne=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ne=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ne=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ne=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ne=!1}break;case"smarttags":break;default:Ne=!1;break}if(Ne||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?dwe(L,re,J,n.slice(V,o.index)):(J=o,V=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var $e={};return!r.bookSheets&&!r.bookProps&&($e.Sheets=d),$e.SheetNames=f,$e.Workbook=G,$e.SSF=js(Jr),$e.Props=F,$e.Custprops=L,$e}function X8(e,t){switch(AE(t=t||{}),t.type||"base64"){case"base64":return V5(Bl(e),t);case"binary":case"buffer":case"file":return V5(e,t);case"array":return V5(th(e),t)}}function pwe(e,t){var r=[];return e.Props&&r.push($he(e.Props,t)),e.Custprops&&r.push(zhe(e.Props,e.Custprops)),r.join("")}function xwe(){return""}function ywe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(mr("NumberFormat",null,{"ss:Format":ss(Jr[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(mr("Style",a.join(""),i))}),mr("Styles",r.join(""))}function dV(e){return mr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+SE(e.Ref,{r:0,c:0})})}function vwe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(dV(s)))}return mr("Names",r.join(""))}function wwe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(dV(o)))}return a.join("")}function bwe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(mr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(mr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(mr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(mr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(qi("ProtectContents","True")),e["!protect"].objects&&s.push(qi("ProtectObjects","True")),e["!protect"].scenarios&&s.push(qi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(qi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(qi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":mr("WorksheetOptions",s.join(""),{xmlns:Al.x})}function _we(e){return e.map(function(t){var r=Wfe(t.t||""),n=mr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return mr("Comment",n,{"ss:Author":t.a})}).join("")}function Swe(e,t,r,n,s,a,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ss(SE(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=Js(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ss(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ss(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=_0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Jr[14]);break;case"s":f="String",h=Ufe(e.v||"");break}var g=nh(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var x=e.v!=null?h:"",y=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(y+=_we(e.c)),mr("Cell",y,o)}function kwe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Kp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Twe(e,t,r,n){if(!e["!ref"])return"";var s=Ln(e["!ref"]),a=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,T){Wf(v);var k=!!v.width,b=p3(T,v),E={"ss:Index":T+1};k&&(E["ss:Width"]=Dv(b.width)),v.hidden&&(E["ss:Hidden"]="1"),o.push(mr("Column",null,E))});for(var l=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[kwe(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var h=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>f)&&!(a[i].s.r>u)&&!(a[i].e.c<f)&&!(a[i].e.r<u)){(a[i].s.c!=f||a[i].s.r!=u)&&(h=!0);break}if(!h){var g={r:u,c:f},x=Zr(g),y=l?(e[u]||[])[f]:e[x];d.push(Swe(y,x,e,t,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Cwe(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?wwe(a,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?Twe(a,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(bwe(a,t,e,r)),n.join("")}function Ewe(e,t){t||(t={}),e.SSF||(e.SSF=js(Jr)),e.SSF&&(_1(),c3(e.SSF),t.revssf=d3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],nh(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(pwe(e,t)),r.push(xwe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(mr("Worksheet",Cwe(n,t,e),{"ss:Name":ss(e.SheetNames[n])}));return r[2]=ywe(e,t),r[3]=vwe(e),Aa+mr("Workbook",r.join(""),{xmlns:Al.ss,"xmlns:o":Al.o,"xmlns:x":Al.x,"xmlns:ss":Al.ss,"xmlns:dt":Al.dt,"xmlns:html":Al.html})}function Nwe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=vhe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=whe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Awe=[60,1084,2066,2165,2175];function jwe(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=Kd(r,r.l),u=J8[l],d=0;u!=null&&Awe.indexOf(l)>-1;)a=Kd(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=J8[l=Kd(r,r.l)];var f=bi(i);Hi(f,0);var h=0;f.lens=[];for(var g=0;g<i.length;++g)f.lens.push(h),h+=i[g].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,s)}function Fu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Jr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||_0[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Nv(e.v):e.w=Mm(e.v):e.w=kc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&b1(Jr[n]||String(n))){var s=Zh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function bb(e,t,r){return{v:e,ixfe:t,t:r}}function Pwe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,l=[],u="",d={},f,h="",g,x,y,v,T={},k=[],b,E,N=[],P=[],M={Sheets:[],WBProps:{date1904:!1},Views:[{}]},j={},A=function(st){return st<8?um[st]:st<64&&P[st-8]||um[st]},F=function(st,qe,ot){var kt=qe.XF.data;if(!(!kt||!kt.patternType||!ot||!ot.cellStyles)){qe.s={},qe.s.patternType=kt.patternType;var Ut;(Ut=Fv(A(kt.icvFore)))&&(qe.s.fgColor={rgb:Ut}),(Ut=Fv(A(kt.icvBack)))&&(qe.s.bgColor={rgb:Ut})}},L=function(st,qe,ot){if(!(W>1)&&!(ot.sheetRows&&st.r>=ot.sheetRows)){if(ot.cellStyles&&qe.XF&&qe.XF.data&&F(st,qe,ot),delete qe.ixfe,delete qe.XF,f=st,h=Zr(st),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),st.r<i.s.r&&(i.s.r=st.r),st.c<i.s.c&&(i.s.c=st.c),st.r+1>i.e.r&&(i.e.r=st.r+1),st.c+1>i.e.c&&(i.e.c=st.c+1),ot.cellFormula&&qe.f){for(var kt=0;kt<k.length;++kt)if(!(k[kt][0].s.c>st.c||k[kt][0].s.r>st.r)&&!(k[kt][0].e.c<st.c||k[kt][0].e.r<st.r)){qe.F=yn(k[kt][0]),(k[kt][0].s.c!=st.c||k[kt][0].s.r!=st.r)&&delete qe.f,qe.f&&(qe.f=""+co(k[kt][1],i,st,I,V));break}}ot.dense?(s[st.r]||(s[st.r]=[]),s[st.r][st.c]=qe):s[h]=qe}},V={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(V.password=t.password);var J,ne=[],ee=[],ie=[],B=[],Y=!1,I=[];I.SheetNames=V.snames,I.sharedf=V.sharedf,I.arrayf=V.arrayf,I.names=[],I.XTI=[];var H=0,W=0,R=0,z=[],G=[],Q;V.codepage=1200,ru(1200);for(var re=!1;e.l<e.length-1;){var q=e.l,se=e.read_shift(2);if(se===0&&H===10)break;var ce=e.l===e.length?0:e.read_shift(2),pe=J8[se];if(pe&&pe.f){if(t.bookSheets&&H===133&&se!==133)break;if(H=se,pe.r===2||pe.r==12){var ke=e.read_shift(2);if(ce-=2,!V.enc&&ke!==se&&((ke&255)<<8|ke>>8)!==se)throw new Error("rt mismatch: "+ke+"!="+se);pe.r==12&&(e.l+=10,ce-=10)}var le={};if(se===10?le=pe.f(e,ce,V):le=jwe(se,pe,e,ce,V),W==0&&[9,521,1033,2057].indexOf(H)===-1)continue;switch(se){case 34:r.opts.Date1904=M.WBProps.date1904=le;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(V.enc||(e.l=0),V.enc=le,!t.password)throw new Error("File is password-protected");if(le.valid==null)throw new Error("Encryption scheme unsupported");if(!le.valid)throw new Error("Password is incorrect");break;case 92:V.lastuser=le;break;case 66:var ye=Number(le);switch(ye){case 21010:ye=1200;break;case 32768:ye=1e4;break;case 32769:ye=1252;break}ru(V.codepage=ye),re=!0;break;case 317:V.rrtabid=le;break;case 25:V.winlocked=le;break;case 439:r.opts.RefreshAll=le;break;case 12:r.opts.CalcCount=le;break;case 16:r.opts.CalcDelta=le;break;case 17:r.opts.CalcIter=le;break;case 13:r.opts.CalcMode=le;break;case 14:r.opts.CalcPrecision=le;break;case 95:r.opts.CalcSaveRecalc=le;break;case 15:V.CalcRefMode=le;break;case 2211:r.opts.FullCalc=le;break;case 129:le.fDialog&&(s["!type"]="dialog"),le.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),le.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:N.push(le);break;case 430:I.push([le]),I[I.length-1].XTI=[];break;case 35:case 547:I[I.length-1].push(le);break;case 24:case 536:Q={Name:le.Name,Ref:co(le.rgce,i,null,I,V)},le.itab>0&&(Q.Sheet=le.itab-1),I.names.push(Q),I[0]||(I[0]=[],I[0].XTI=[]),I[I.length-1].push(le),le.Name=="_xlnm._FilterDatabase"&&le.itab>0&&le.rgce&&le.rgce[0]&&le.rgce[0][0]&&le.rgce[0][0][0]=="PtgArea3d"&&(G[le.itab-1]={ref:yn(le.rgce[0][0][1][2])});break;case 22:V.ExternCount=le;break;case 23:I.length==0&&(I[0]=[],I[0].XTI=[]),I[I.length-1].XTI=I[I.length-1].XTI.concat(le),I.XTI=I.XTI.concat(le);break;case 2196:if(V.biff<8)break;Q!=null&&(Q.Comment=le[1]);break;case 18:s["!protect"]=le;break;case 19:le!==0&&V.WTF&&console.error("Password verifier: "+le);break;case 133:a[le.pos]=le,V.snames.push(le.name);break;case 10:{if(--W)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=yn(i),t.sheetRows&&t.sheetRows<=i.e.r){var je=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=yn(i),i.e.r=je}i.e.r++,i.e.c++}ne.length>0&&(s["!merges"]=ne),ee.length>0&&(s["!objects"]=ee),ie.length>0&&(s["!cols"]=ie),B.length>0&&(s["!rows"]=B),M.Sheets.push(j)}u===""?d=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(V.biff===8&&(V.biff={9:2,521:3,1033:4}[se]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[le.BIFFVer]||8),V.biffguess=le.BIFFVer==0,le.BIFFVer==0&&le.dt==4096&&(V.biff=5,re=!0,ru(V.codepage=28591)),V.biff==8&&le.BIFFVer==0&&le.dt==16&&(V.biff=2),W++)break;if(s=t.dense?[]:{},V.biff<8&&!re&&(re=!0,ru(V.codepage=t.codepage||1252)),V.biff<5||le.BIFFVer==0&&le.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Ne={pos:e.l-ce,name:u};a[Ne.pos]=Ne,V.snames.push(u)}else u=(a[q]||{name:""}).name;le.dt==32&&(s["!type"]="chart"),le.dt==64&&(s["!type"]="macro"),ne=[],ee=[],V.arrayf=k=[],ie=[],B=[],Y=!1,j={Hidden:(a[q]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[le.r]||[])[le.c]:s[Zr({c:le.c,r:le.r})])&&++le.c,b={ixfe:le.ixfe,XF:N[le.ixfe]||{},v:le.val,t:"n"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L({c:le.c,r:le.r},b,t);break;case 5:case 517:b={ixfe:le.ixfe,XF:N[le.ixfe],v:le.val,t:le.t},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L({c:le.c,r:le.r},b,t);break;case 638:b={ixfe:le.ixfe,XF:N[le.ixfe],v:le.rknum,t:"n"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L({c:le.c,r:le.r},b,t);break;case 189:for(var We=le.c;We<=le.C;++We){var $e=le.rkrec[We-le.c][0];b={ixfe:$e,XF:N[$e],v:le.rkrec[We-le.c][1],t:"n"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L({c:We,r:le.r},b,t)}break;case 6:case 518:case 1030:{if(le.val=="String"){o=le;break}if(b=bb(le.val,le.cell.ixfe,le.tt),b.XF=N[b.ixfe],t.cellFormula){var Nt=le.formula;if(Nt&&Nt[0]&&Nt[0][0]&&Nt[0][0][0]=="PtgExp"){var He=Nt[0][0][1][0],Et=Nt[0][0][1][1],Rt=Zr({r:He,c:Et});T[Rt]?b.f=""+co(le.formula,i,le.cell,I,V):b.F=((t.dense?(s[He]||[])[Et]:s[Rt])||{}).F}else b.f=""+co(le.formula,i,le.cell,I,V)}R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L(le.cell,b,t),o=le}break;case 7:case 519:if(o)o.val=le,b=bb(le,o.cell.ixfe,"s"),b.XF=N[b.ixfe],t.cellFormula&&(b.f=""+co(o.formula,i,o.cell,I,V)),R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L(o.cell,b,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(le);var Mt=Zr(le[0].s);if(g=t.dense?(s[le[0].s.r]||[])[le[0].s.c]:s[Mt],t.cellFormula&&g){if(!o||!Mt||!g)break;g.f=""+co(le[1],i,le[0],I,V),g.F=yn(le[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;T[Zr(o.cell)]=le[0],g=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[Zr(o.cell)],(g||{}).f=""+co(le[0],i,f,I,V)}}break;case 253:b=bb(l[le.isst].t,le.ixfe,"s"),l[le.isst].h&&(b.h=l[le.isst].h),b.XF=N[b.ixfe],R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L({c:le.c,r:le.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:le.ixfe,XF:N[le.ixfe],t:"z"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L({c:le.c,r:le.r},b,t));break;case 190:if(t.sheetStubs)for(var ur=le.c;ur<=le.C;++ur){var wr=le.ixfe[ur-le.c];b={ixfe:wr,XF:N[wr],t:"z"},R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L({c:ur,r:le.r},b,t)}break;case 214:case 516:case 4:b=bb(le.val,le.ixfe,"s"),b.XF=N[b.ixfe],R>0&&(b.z=z[b.ixfe>>8&63]),Fu(b,t,r.opts.Date1904),L({c:le.c,r:le.r},b,t);break;case 0:case 512:W===1&&(i=le);break;case 252:l=le;break;case 1054:if(V.biff==4){z[R++]=le[1];for(var dr=0;dr<R+163&&Jr[dr]!=le[1];++dr);dr>=163&&t0(le[1],R+163)}else t0(le[1],le[0]);break;case 30:{z[R++]=le;for(var wt=0;wt<R+163&&Jr[wt]!=le;++wt);wt>=163&&t0(le,R+163)}break;case 229:ne=ne.concat(le);break;case 93:ee[le.cmo[0]]=V.lastobj=le;break;case 438:V.lastobj.TxO=le;break;case 127:V.lastobj.ImData=le;break;case 440:for(v=le[0].s.r;v<=le[0].e.r;++v)for(y=le[0].s.c;y<=le[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[Zr({c:y,r:v})],g&&(g.l=le[1]);break;case 2048:for(v=le[0].s.r;v<=le[0].e.r;++v)for(y=le[0].s.c;y<=le[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[Zr({c:y,r:v})],g&&g.l&&(g.l.Tooltip=le[1]);break;case 28:{if(V.biff<=5&&V.biff>=2)break;g=t.dense?(s[le[0].r]||[])[le[0].c]:s[Zr(le[0])];var Ke=ee[le[2]];g||(t.dense?(s[le[0].r]||(s[le[0].r]=[]),g=s[le[0].r][le[0].c]={t:"z"}):g=s[Zr(le[0])]={t:"z"},i.e.r=Math.max(i.e.r,le[0].r),i.s.r=Math.min(i.s.r,le[0].r),i.e.c=Math.max(i.e.c,le[0].c),i.s.c=Math.min(i.s.c,le[0].c)),g.c||(g.c=[]),x={a:le[1],t:Ke.TxO.t},g.c.push(x)}break;case 2173:y1e(N[le.ixfe],le.ext);break;case 125:{if(!V.cellStyles)break;for(;le.e>=le.s;)ie[le.e--]={width:le.w/256,level:le.level||0,hidden:!!(le.flags&1)},Y||(Y=!0,wE(le.w/256)),Wf(ie[le.e+1])}break;case 520:{var it={};le.level!=null&&(B[le.r]=it,it.level=le.level),le.hidden&&(B[le.r]=it,it.hidden=!0),le.hpt&&(B[le.r]=it,it.hpt=le.hpt,it.hpx=Kp(le.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||hm(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[se]]=le;break;case 161:s["!margins"]||hm(s["!margins"]={}),s["!margins"].header=le.header,s["!margins"].footer=le.footer;break;case 574:le.RTL&&(M.Views[0].RTL=!0);break;case 146:P=le;break;case 2198:J=le;break;case 140:E=le;break;case 442:u?j.CodeName=le||j.name:M.WBProps.CodeName=le||"ThisWorkbook";break}}else pe||console.error("Missing Info for XLS Record 0x"+se.toString(16)),e.l+=ce}return r.SheetNames=ha(a).sort(function(vt,st){return Number(vt)-Number(st)}).map(function(vt){return a[vt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&G.forEach(function(vt,st){r.Sheets[r.SheetNames[st]]["!autofilter"]=vt}),r.Strings=l,r.SSF=js(Jr),V.enc&&(r.Encryption=V.enc),J&&(r.Themes=J),r.Metadata={},E!==void 0&&(r.Metadata.Country=E),I.names.length>0&&(M.Names=I.names),r.Workbook=M,r}var rv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Mwe(e,t,r){var n=zr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=zD(n,H8,rv.DSI);for(var a in s)t[a]=s[a]}catch(u){if(r.WTF)throw u}var i=zr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=zD(i,G8,rv.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(uG(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Fwe(e,t){var r=[],n=[],s=[],a=0,i,o=xD(H8,"n"),l=xD(G8,"n");if(e.Props)for(i=ha(e.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],e.Props[i[a]]]);if(e.Custprops)for(i=ha(e.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],e.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)xG.indexOf(s[a][0])>-1||cG.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&zr.utils.cfb_add(t,"/SummaryInformation",UD(n,rv.SI,l,G8)),(r.length||u.length)&&zr.utils.cfb_add(t,"/DocumentSummaryInformation",UD(r,rv.DSI,o,H8,u.length?u:null,rv.UDI))}function fV(e,t){t||(t={}),AE(t),XC(),t.codepage&&YC(t.codepage);var r,n;if(e.FullPaths){if(zr.find(e,"/encryption"))throw new Error("File is password-protected");r=zr.find(e,"!CompObj"),n=zr.find(e,"/Workbook")||zr.find(e,"/Book")}else{switch(t.type){case"base64":e=Fl(Bl(e));break;case"binary":e=Fl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Hi(e,0),n={content:e}}var s,a;if(r&&Nwe(r),t.bookProps&&!t.bookSheets)s={};else{var i=Sn?"buffer":"array";if(n&&n.content)s=Pwe(n.content,t);else if((a=zr.find(e,"PerfectOffice_MAIN"))&&a.content)s=fm.to_workbook(a.content,(t.type=i,t));else if((a=zr.find(e,"NativeContent_MAIN"))&&a.content)s=fm.to_workbook(a.content,(t.type=i,t));else throw(a=zr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&zr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=V1e(e))}var o={};return e.FullPaths&&Mwe(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function Dwe(e,t){var r=t||{},n=zr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return zr.utils.cfb_add(n,s,hV(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Fwe(e,n),r.biff==8&&e.vbaraw&&q1e(n,zr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Iv={0:{f:sve},1:{f:fve},2:{f:Pve},3:{f:wve},4:{f:pve},5:{f:Nve},6:{f:Rve},7:{f:kve},8:{f:Wve},9:{f:Uve},10:{f:$ve},11:{f:zve},12:{f:mve},13:{f:Fve},14:{f:_ve},15:{f:yve},16:{f:sV},17:{f:Lve},18:{f:Cve},19:{f:uE},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:L2e},40:{},42:{},43:{f:Rpe},44:{f:Dpe},45:{f:Bpe},46:{f:zpe},47:{f:$pe},48:{},49:{f:ohe},50:{},51:{f:b1e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:NG},62:{f:Ove},63:{f:j1e},64:{f:a2e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:vo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:t2e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:uve},148:{f:ove,p:16},151:{f:Yve},152:{},153:{f:O2e},154:{},155:{},156:{f:F2e},157:{},158:{},159:{T:1,f:Jge},160:{T:-1},161:{T:1,f:Zm},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Hve},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:v1e},336:{T:-1},337:{f:k1e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:W8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:EG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Xve},427:{f:Jve},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Zve},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:cve},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:qve},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:W8},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:z1e},633:{T:1},634:{T:-1},635:{T:1,f:B1e},636:{T:-1},637:{f:dhe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:_2e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:i2e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},J8={6:{f:H5},10:{f:pf},12:{f:Ra},13:{f:Ra},14:{f:_a},15:{f:_a},16:{f:ho},17:{f:_a},18:{f:_a},19:{f:Ra},20:{f:KD},21:{f:KD},23:{f:EG},24:{f:XD},25:{f:_a},26:{},27:{},28:{f:ige},29:{},34:{f:_a},35:{f:YD},38:{f:ho},39:{f:ho},40:{f:ho},41:{f:ho},42:{f:_a},43:{f:_a},47:{f:ype},49:{f:Fme},51:{f:Ra},60:{},61:{f:Nme},64:{f:_a},65:{f:Mme},66:{f:Ra},77:{},80:{},81:{},82:{},85:{f:Ra},89:{},90:{},91:{},92:{f:xme},93:{f:cge},94:{},95:{f:_a},96:{},97:{},99:{f:_a},125:{f:NG},128:{f:Kme},129:{f:vme},130:{f:Ra},131:{f:_a},132:{f:_a},133:{f:wme},134:{},140:{f:xge},141:{f:Ra},144:{},146:{f:wge},151:{},152:{},153:{},154:{},155:{},156:{f:Ra},157:{},158:{},160:{f:Ege},161:{f:Sge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Hme},190:{f:Gme},193:{f:pf},197:{},198:{},199:{},200:{},201:{},202:{f:_a},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ra},220:{},221:{f:_a},222:{},224:{f:qme},225:{f:pme},226:{f:pf},227:{},229:{f:oge},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:_me},253:{f:Ome},255:{f:kme},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:yG},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:_a},353:{f:pf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Zme},431:{f:_a},432:{},433:{},434:{},437:{},438:{f:fge},439:{f:_a},440:{f:hge},441:{},442:{f:T2},443:{},444:{f:Ra},445:{},446:{},448:{f:pf},449:{f:Eme,r:2},450:{f:pf},512:{f:GD},513:{f:Cge},515:{f:Jme},516:{f:Ime},517:{f:qD},519:{f:Nge},520:{f:Tme},523:{},545:{f:JD},549:{f:HD},566:{},574:{f:jme},638:{f:Wme},659:{},1048:{},1054:{f:Bme},1084:{},1212:{f:nge},2048:{f:gge},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:yb},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:pf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:bge,r:12},2173:{f:x1e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:_a,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:rge,r:12},2197:{},2198:{f:d1e,r:12},2199:{},2200:{},2201:{},2202:{f:sge,r:12},2203:{f:pf},2204:{},2205:{},2206:{},2207:{},2211:{f:Cme},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ra},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:kge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:vge},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:GD},1:{},2:{f:Fge},3:{f:Pge},4:{f:jge},5:{f:qD},7:{f:Oge},8:{},9:{f:yb},11:{},22:{f:Ra},30:{f:zme},31:{},32:{},33:{f:JD},36:{},37:{f:HD},50:{f:Rge},62:{},52:{},67:{},68:{f:Ra},69:{},86:{},126:{},127:{f:Age},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Ige},223:{},234:{},354:{},421:{},518:{f:H5},521:{f:yb},536:{f:XD},547:{f:YD},561:{},579:{},1030:{f:H5},1033:{f:yb},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function gr(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&oE(r)&&e.push(r)}}function Owe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return gr(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function A2(e,t,r){return e||(e=Lt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Rwe(e,t,r,n){var s=Lt(9);return A2(s,e,t),vG(r,n||"b",s),s}function Iwe(e,t,r){var n=Lt(8+2*r.length);return A2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Lwe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?ni(As(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?gr(e,2,Dge(r,n,s)):gr(e,3,Mge(r,n,s));return;case"b":case"e":gr(e,5,Rwe(r,n,t.v,t.t));return;case"s":case"str":gr(e,4,Iwe(r,n,(t.v||"").slice(0,255)));return}gr(e,1,A2(null,r,n))}function Bwe(e,t,r,n){var s=Array.isArray(t),a=Ln(t["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=yn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Ea(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=Xs(d)),i=l[d]+o;var f=s?(t[u]||[])[d]:t[i];f&&Lwe(e,f,u,d)}}}function $we(e,t){for(var r=t||{},n=ul(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return gr(n,r.biff==4?1033:r.biff==3?521:9,xE(e,16,r)),Bwe(n,e.Sheets[e.SheetNames[s]],s,r),gr(n,10),n.end()}function zwe(e,t,r){gr(e,49,Dme({sz:12,name:"Arial"},r))}function Uwe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&gr(e,1054,$me(s,t[s],r))})}function Wwe(e,t){var r=Lt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),gr(e,2151,r),r=Lt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),kG(Ln(t["!ref"]||"A1"),r),r.write_shift(4,4),gr(e,2152,r)}function Hwe(e,t){for(var r=0;r<16;++r)gr(e,224,VD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){gr(e,224,VD(n,0,t))})}function Gwe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];gr(e,440,mge(n)),n[1].Tooltip&&gr(e,2048,pge(n))}delete t["!links"]}function Vwe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&gr(e,125,_ge(p3(s,n),s))})}}function qwe(e,t,r,n,s){var a=16+nh(s.cellXfs,t,s);if(t.v==null&&!t.bf){gr(e,513,Rm(r,n,a));return}if(t.bf)gr(e,6,vye(t,r,n,s,a));else switch(t.t){case"d":case"n":var i=t.t=="d"?ni(As(t.v)):t.v;gr(e,515,Qme(r,n,i,a));break;case"b":case"e":gr(e,517,Xme(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var o=TE(s.Strings,t.v,s.revStrings);gr(e,253,Rme(r,n,o,a))}else gr(e,516,Lme(r,n,(t.v||"").slice(0,255),a,s));break;default:gr(e,513,Rm(r,n,a))}}function Kwe(e,t,r){var n=ul(),s=r.SheetNames[e],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},l=Array.isArray(a),u=t.biff==8,d,f="",h=[],g=Ln(a["!ref"]||"A1"),x=u?65536:16384;if(g.e.c>255||g.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,x-1)}gr(n,2057,xE(r,16,t)),gr(n,13,dc(1)),gr(n,12,dc(100)),gr(n,15,Oo(!0)),gr(n,17,Oo(!1)),gr(n,16,Dm(.001)),gr(n,95,Oo(!0)),gr(n,42,Oo(!1)),gr(n,43,Oo(!1)),gr(n,130,dc(1)),gr(n,128,Yme()),gr(n,131,Oo(!1)),gr(n,132,Oo(!1)),u&&Vwe(n,a["!cols"]),gr(n,512,Ume(g,t)),u&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){f=Ea(y);for(var v=g.s.c;v<=g.e.c;++v){y===g.s.r&&(h[v]=Xs(v)),d=h[v]+f;var T=l?(a[y]||[])[v]:a[d];T&&(qwe(n,T,y,v,t),u&&T.l&&a["!links"].push([d,T.l]))}}var k=o.CodeName||o.name||s;return u&&gr(n,574,Pme((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&gr(n,229,lge(a["!merges"])),u&&Gwe(n,a),gr(n,442,wG(k)),u&&Wwe(n,a),gr(n,10),n.end()}function Ywe(e,t,r){var n=ul(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(gr(n,2057,xE(e,5,r)),r.bookType=="xla"&&gr(n,135),gr(n,225,o?dc(1200):null),gr(n,193,Xhe(2)),l&&gr(n,191),l&&gr(n,192),gr(n,226),gr(n,92,yme("SheetJS",r)),gr(n,66,dc(o?1200:1252)),o&&gr(n,353,dc(0)),o&&gr(n,448),gr(n,317,Tge(e.SheetNames.length)),o&&e.vbaraw&&gr(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";gr(n,442,wG(u))}gr(n,156,dc(17)),gr(n,25,Oo(!1)),gr(n,18,Oo(!1)),gr(n,19,dc(0)),o&&gr(n,431,Oo(!1)),o&&gr(n,444,dc(0)),gr(n,61,Ame()),gr(n,64,Oo(!1)),gr(n,141,dc(0)),gr(n,34,Oo(E2e(e)=="true")),gr(n,14,Oo(!0)),o&&gr(n,439,Oo(!1)),gr(n,218,dc(0)),zwe(n,e,r),Uwe(n,e.SSF,r),Hwe(n,r),o&&gr(n,352,Oo(!1));var d=n.end(),f=ul();o&&gr(f,140,yge()),o&&r.Strings&&Owe(f,252,Sme(r.Strings)),gr(f,10);var h=f.end(),g=ul(),x=0,y=0;for(y=0;y<e.SheetNames.length;++y)x+=(o?12:11)+(o?2:1)*e.SheetNames[y].length;var v=d.length+x+h.length;for(y=0;y<e.SheetNames.length;++y){var T=a[y]||{};gr(g,133,bme({pos:v,hs:T.Hidden||0,dt:0,name:e.SheetNames[y]},r)),v+=t[y].length}var k=g.end();if(x!=k.length)throw new Error("BS8 "+x+" != "+k.length);var b=[];return d.length&&b.push(d),k.length&&b.push(k),h.length&&b.push(h),bi(b)}function Xwe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=js(Jr)),e&&e.SSF&&(_1(),c3(e.SSF),r.revssf=d3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,jE(r),r.cellXfs=[],nh(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=Kwe(s,r,e);return n.unshift(Ywe(e,n,r)),bi(n)}function hV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=dl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return Xwe(e,t);case 4:case 3:case 2:return $we(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function oO(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,l=Dfe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<l.length;++i){var y=l[i].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var T=y.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var k=T[o].trim();if(k.match(/<t[dh]/i)){for(var b=k,E=0;b.charAt(0)=="<"&&(E=b.indexOf(">"))>-1;)b=b.slice(E+1);for(var N=0;N<x.length;++N){var P=x[N];P.s.c==d&&P.s.r<u&&u<=P.e.r&&(d=P.e.c+1,N=-1)}var M=rn(k.slice(0,k.indexOf(">")));h=M.colspan?+M.colspan:1,((f=+M.rowspan)>1||h>1)&&x.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var j=M.t||M["data-t"]||"";if(!b.length){d+=h;continue}if(b=IH(b),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!b.length){d+=h;continue}var A={t:"s",v:b};r.raw||!b.trim().length||j=="s"||(b==="TRUE"?A={t:"b",v:!0}:b==="FALSE"?A={t:"b",v:!1}:isNaN(au(b))?isNaN(Vp(b).getDate())||(A={t:"d",v:As(b)},r.cellDates||(A={t:"n",v:ni(A.v)}),A.z=r.dateNF||Jr[14]):A={t:"n",v:au(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=A):n[Zr({r:u,c:d})]=A,d+=h}}}}return n["!ref"]=yn(g),x.length&&(n["!merges"]=x),n}function Jwe(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=Zr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||sE(f.w||(f0(f),f.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(g["data-t"]=f&&f.t||"z",f.v!=null&&(g["data-v"]=f.v),f.z!=null&&(g["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),g.id=(n.id||"sjs")+"-"+d,a.push(mr("td",h,g))}}var x="<tr>";return x+a.join("")+"</tr>"}var Qwe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Zwe="</body></html>";function ebe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return rh(oO(r[0],t),t);var n=FE();return r.forEach(function(s,a){DE(n,oO(s,t),"Sheet"+(a+1))}),n}function tbe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function mV(e,t){var r=t||{},n=r.header!=null?r.header:Qwe,s=r.footer!=null?r.footer:Zwe,a=[n],i=dl(e["!ref"]);r.dense=Array.isArray(e),a.push(tbe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(Jwe(e,i,o,r));return a.push("</table>"+s),a.join("")}function gV(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?Js(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=dl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],h=0,g=e["!rows"]||(e["!rows"]=[]),x=0,y=0,v=0,T=0,k=0,b=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&y<l;++x){var E=o[x];if(lO(E)){if(n.display)continue;g[y]={hidden:!0}}var N=E.children;for(v=T=0;v<N.length;++v){var P=N[v];if(!(n.display&&lO(P))){var M=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):IH(P.innerHTML),j=P.getAttribute("data-z")||P.getAttribute("z");for(h=0;h<f.length;++h){var A=f[h];A.s.c==T+a&&A.s.r<y+s&&y+s<=A.e.r&&(T=A.e.c+1-a,h=-1)}b=+P.getAttribute("colspan")||1,((k=+P.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:y+s,c:T+a},e:{r:y+s+(k||1)-1,c:T+a+(b||1)-1}});var F={t:"s",v:M},L=P.getAttribute("data-t")||P.getAttribute("t")||"";M!=null&&(M.length==0?F.t=L||"z":n.raw||M.trim().length==0||L=="s"||(M==="TRUE"?F={t:"b",v:!0}:M==="FALSE"?F={t:"b",v:!1}:isNaN(au(M))?isNaN(Vp(M).getDate())||(F={t:"d",v:As(M)},n.cellDates||(F={t:"n",v:ni(F.v)}),F.z=n.dateNF||Jr[14]):F={t:"n",v:au(M)})),F.z===void 0&&j!=null&&(F.z=j);var V="",J=P.getElementsByTagName("A");if(J&&J.length)for(var ne=0;ne<J.length&&!(J[ne].hasAttribute("href")&&(V=J[ne].getAttribute("href"),V.charAt(0)!="#"));++ne);V&&V.charAt(0)!="#"&&(F.l={Target:V}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][T+a]=F):e[Zr({c:T+a,r:y+s})]=F,u.e.c<T+a&&(u.e.c=T+a),T+=b}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=yn(u),y>=l&&(e["!fullref"]=yn((u.e.r=o.length-x+y-1+s,u))),e}function pV(e,t){var r=t||{},n=r.dense?[]:{};return gV(n,e,t)}function rbe(e,t){return rh(pV(e,t),t)}function lO(e){var t="",r=nbe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function nbe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function sbe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Rn(t.replace(/<[^>]*>/g,""));return[r]}var cO={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function xV(e,t){var r=t||{},n=aE(e),s=[],a,i,o={name:""},l="",u=0,d,f,h={},g=[],x=r.dense?[]:{},y,v,T={value:""},k="",b=0,E=[],N=-1,P=-1,M={s:{r:1e6,c:1e7},e:{r:0,c:0}},j=0,A={},F=[],L={},V=0,J=0,ne=[],ee=1,ie=1,B=[],Y={Names:[]},I={},H=["",""],W=[],R={},z="",G=0,Q=!1,re=!1,q=0;for(Pv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Pv.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(M.e.c>=M.s.c&&M.e.r>=M.s.r?x["!ref"]=yn(M):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=M.e.r&&(x["!fullref"]=x["!ref"],M.e.r=r.sheetRows-1,x["!ref"]=yn(M)),F.length&&(x["!merges"]=F),ne.length&&(x["!rows"]=ne),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),h[d.name]=x,re=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=rn(y[0],!1),N=P=-1,M.s.r=M.s.c=1e7,M.e.r=M.e.c=0,x=r.dense?[]:{},F=[],ne=[],re=!0);break;case"table-row-group":y[1]==="/"?--j:++j;break;case"table-row":case"":if(y[1]==="/"){N+=ee,ee=1;break}if(f=rn(y[0],!1),f.?N=f.-1:N==-1&&(N=0),ee=+f["number-rows-repeated"]||1,ee<10)for(q=0;q<ee;++q)j>0&&(ne[N+q]={level:j});P=-1;break;case"covered-table-cell":y[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(x[N]||(x[N]=[]),x[N][P]={t:"z"}):x[Zr({r:N,c:P})]={t:"z"}),k="",E=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++P,T=rn(y[0],!1),ie=parseInt(T["number-columns-repeated"]||"1",10),v={t:"z",v:null},T.formula&&r.cellFormula!=!1&&(v.f=sO(Rn(T.formula))),(T.||T["value-type"])=="string"&&(v.t="s",v.v=Rn(T["string-value"]||""),r.dense?(x[N]||(x[N]=[]),x[N][P]=v):x[Zr({r:N,c:P})]=v),P+=ie-1;else if(y[1]!=="/"){++P,k="",b=0,E=[],ie=1;var se=ee?N+ee-1:N;if(P>M.e.c&&(M.e.c=P),P<M.s.c&&(M.s.c=P),N<M.s.r&&(M.s.r=N),se>M.e.r&&(M.e.r=se),T=rn(y[0],!1),W=[],R={},v={t:T.||T["value-type"],v:null},r.cellFormula)if(T.formula&&(T.formula=Rn(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(V=parseInt(T["number-matrix-rows-spanned"],10)||0,J=parseInt(T["number-matrix-columns-spanned"],10)||0,L={s:{r:N,c:P},e:{r:N+V-1,c:P+J-1}},v.F=yn(L),B.push([L,v.F])),T.formula)v.f=sO(T.formula);else for(q=0;q<B.length;++q)N>=B[q][0].s.r&&N<=B[q][0].e.r&&P>=B[q][0].s.c&&P<=B[q][0].e.c&&(v.F=B[q][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(V=parseInt(T["number-rows-spanned"],10)||0,J=parseInt(T["number-columns-spanned"],10)||0,L={s:{r:N,c:P},e:{r:N+V-1,c:P+J-1}},F.push(L)),T["number-columns-repeated"]&&(ie=parseInt(T["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ts(T["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(T.value);break;case"percentage":v.t="n",v.v=parseFloat(T.value);break;case"currency":v.t="n",v.v=parseFloat(T.value);break;case"date":v.t="d",v.v=As(T["date-value"]),r.cellDates||(v.t="n",v.v=ni(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=Pfe(T["time-value"])/86400,r.cellDates&&(v.t="d",v.v=f3(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(T.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",T["string-value"]!=null&&(k=Rn(T["string-value"]),E=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(Q=!1,v.t==="s"&&(v.v=k||"",E.length&&(v.R=E),Q=b==0),I.Target&&(v.l=I),W.length>0&&(v.c=W,W=[]),k&&r.cellText!==!1&&(v.w=k),Q&&(v.t="z",delete v.v),(!Q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var ce=0;ce<ee;++ce){if(ie=parseInt(T["number-columns-repeated"]||"1",10),r.dense)for(x[N+ce]||(x[N+ce]=[]),x[N+ce][P]=ce==0?v:js(v);--ie>0;)x[N+ce][P+ie]=js(v);else for(x[Zr({r:N+ce,c:P})]=v;--ie>0;)x[Zr({r:N+ce,c:P+ie})]=js(v);M.e.c<=P&&(M.e.c=P)}ie=parseInt(T["number-columns-repeated"]||"1",10),P+=ie-1,ie=0,v={},k="",E=[]}I={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;R.t=k,E.length&&(R.R=E),R.a=z,W.push(R)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);z="",G=0,k="",b=0,E=[];break;case"creator":y[1]==="/"?z=n.slice(G,y.index):G=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",b=0,E=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(A[o.name]=l,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=rn(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=rn(y[0],!1),l+=cO[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=rn(y[0],!1),l+=cO[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=rn(y[0],!1),H=G5(i["cell-range-address"]);var pe={Name:i.name,Ref:H[0]+"!"+H[1]};re&&(pe.Sheet=g.length),Y.Names.push(pe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!T||!T["string-value"])){var ke=sbe(n.slice(b,y.index));k=(k.length>0?k+`
`:"")+ke[0]}else rn(y[0],!1),b=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{H=G5(rn(y[0])["target-range-address"]),h[H[0]]["!autofilter"]={ref:H[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(I=rn(y[0],!1),!I.href)break;I.Target=Rn(I.href),delete I.href,I.Target.charAt(0)=="#"&&I.Target.indexOf(".")>-1?(H=G5(I.Target.slice(1)),I.Target="#"+H[0]+"!"+H[1]):I.Target.match(/^\.\.[\\\/]/)&&(I.Target=I.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var le={Sheets:h,SheetNames:g,Workbook:Y};return r.bookSheets&&delete le.Sheets,le}function uO(e,t){t=t||{},uc(e,"META-INF/manifest.xml")&&Phe(Oa(e,"META-INF/manifest.xml"),t);var r=Dl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=xV(ds(r),t);return uc(e,"meta.xml")&&(n.Props=oG(Oa(e,"meta.xml"))),n}function dO(e,t){return xV(e,t)}var abe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+jv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Aa+t}})(),fO=(function(){var e=function(a){return ss(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var l=[];l.push('      <table:table table:name="'+ss(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=dl(a["!ref"]||"A1"),h=a["!merges"]||[],g=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=f.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var T=!1,k={},b="";for(g=0;g!=h.length;++g)if(!(h[g].s.c>d)&&!(h[g].s.r>u)&&!(h[g].e.c<d)&&!(h[g].e.r<u)){(h[g].s.c!=d||h[g].s.r!=u)&&(T=!0),k["table:number-columns-spanned"]=h[g].e.c-h[g].s.c+1,k["table:number-rows-spanned"]=h[g].e.r-h[g].s.r+1;break}if(T){l.push(r);continue}var E=Zr({r:u,c:d}),N=x?(a[u]||[])[d]:a[E];if(N&&N.f&&(k["table:formula"]=ss(Tye(N.f)),N.F&&N.F.slice(0,E.length)==E)){var P=dl(N.F);k["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,k["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!N){l.push(t);continue}switch(N.t){case"b":b=N.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=N.v?"true":"false";break;case"n":b=N.w||String(N.v||0),k["office:value-type"]="float",k["office:value"]=N.v||0;break;case"s":case"str":b=N.v==null?"":N.v,k["office:value-type"]="string";break;case"d":b=N.w||As(N.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=As(N.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(t);continue}var M=e(b);if(N.l&&N.l.Target){var j=N.l.Target;j=j.charAt(0)=="#"?"#"+Cye(j.slice(1)):j,j.charAt(0)!="#"&&!j.match(/^\w+:/)&&(j="../"+j),M=mr("text:a",M,{"xlink:href":j.replace(/&/g,"&amp;")})}l.push("          "+mr("table:table-cell",mr("text:p",M,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Wf(f),f.ods=o;var h=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Aa],u=jv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=jv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(iG().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)l.push(n(i.Sheets[i.SheetNames[f]],i,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function yV(e,t){if(t.bookType=="fods")return fO(e,t);var r=tE(),n="",s=[],a=[];return n="mimetype",vn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",vn(r,n,fO(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",vn(r,n,abe(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",vn(r,n,Aa+iG()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",vn(r,n,Dhe(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",vn(r,n,Mhe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Im(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Q8(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ds(th(e))}function ibe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Fl(Hu(e))}function obe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Gf(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function hO(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function lbe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function cbe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function Lv(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function es(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function fa(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function $n(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=Lv(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Lv(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Bi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(es(n*8+s.type)),s.type==2&&t.push(es(s.data.length)),t.push(s.data))})}),Gf(t)}function NE(e,t){return e?.map(function(r){return t(r.data)})||[]}function ic(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=Lv(e,n),a=$n(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:fa(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=$n(o.data),u=fa(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(i.merge=fa(a[3][0].data)>>>0>0),r.push(i)}return r}function tp(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:es(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:es(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:es(i.data.length)}],n[2].push({data:Bi(i.meta),type:2})});var a=Bi(n);t.push(es(a.length)),t.push(a),s.forEach(function(i){return t.push(i)})}),Gf(t)}function ube(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Lv(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Gf(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=Gf(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function oc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(ube(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Gf(t)}function rp(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=es(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Gf(t)}function dbe(e,t,r,n){var s=Im(e),a=s.getUint32(4,!0),i=(n>1?12:8)+hO(a&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=hO(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function fbe(e,t,r){var n=Im(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=lbe(e,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function q5(e,t){var r=new Uint8Array(32),n=Im(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,cbe(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function K5(e,t){var r=new Uint8Array(32),n=Im(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function hbe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return dbe(e,t,r,e[0]);case 5:return fbe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function lo(e){var t=$n(e);return Lv(t[1][0].data)}function mO(e,t){var r=$n(t.data),n=fa(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=$n(i.data),l=fa(o[1][0].data)>>>0;switch(n){case 1:a[l]=Q8(o[3][0].data);break;case 8:{var u=e[lo(o[9][0].data)][0],d=$n(u.data),f=e[lo(d[1][0].data)][0],h=fa(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var g=$n(f.data);a[l]=g[3].map(function(x){return Q8(x.data)}).join("")}break}}),a}function mbe(e,t){var r,n,s,a,i,o,l,u,d,f,h,g,x,y,v=$n(e),T=fa(v[1][0].data)>>>0,k=fa(v[2][0].data)>>>0,b=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&fa(v[8][0].data)>0||!1,E,N;if((a=(s=v[7])==null?void 0:s[0])!=null&&a.data&&t!=0)E=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,N=(u=(l=v[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)E=(g=(h=v[4])==null?void 0:h[0])==null?void 0:g.data,N=(y=(x=v[3])==null?void 0:x[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=b?4:1,M=Im(E),j=[],A=0;A<E.length/2;++A){var F=M.getUint16(A*2,!0);F<65535&&j.push([A,F])}if(j.length!=k)throw"Expected ".concat(k," cells, found ").concat(j.length);var L=[];for(A=0;A<j.length-1;++A)L[j[A][0]]=N.subarray(j[A][1]*P,j[A+1][1]*P);return j.length>=1&&(L[j[j.length-1][0]]=N.subarray(j[j.length-1][1]*P)),{R:T,cells:L}}function gbe(e,t){var r,n=$n(t.data),s=(r=n?.[7])!=null&&r[0]?fa(n[7][0].data)>>>0>0?1:0:-1,a=NE(n[5],function(i){return mbe(i,s)});return{nrows:fa(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function pbe(e,t,r){var n,s=$n(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(fa(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(fa(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=yn(a);var i=$n(s[4][0].data),o=mO(e,e[lo(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?mO(e,e[lo(i[17][0].data)][0]):[],u=$n(i[3][0].data),d=0;u[1].forEach(function(f){var h=$n(f.data),g=e[lo(h[2][0].data)][0],x=fa(g.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var y=gbe(e,g);y.data.forEach(function(v,T){v.forEach(function(k,b){var E=Zr({r:d+T,c:b}),N=hbe(k,o,l);N&&(r[E]=N)})}),d+=y.nrows})}function xbe(e,t){var r=$n(t.data),n={"!ref":"A1"},s=e[lo(r[2][0].data)],a=fa(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return pbe(e,s[0],n),n}function ybe(e,t){var r,n=$n(t.data),s={name:(r=n[1])!=null&&r[0]?Q8(n[1][0].data):"",sheets:[]},a=NE(n[2],lo);return a.forEach(function(i){e[i].forEach(function(o){var l=fa(o.meta[1][0].data);l==6e3&&s.sheets.push(xbe(e,o))})}),s}function vbe(e,t){var r=FE(),n=$n(t.data),s=NE(n[1],lo);if(s.forEach(function(a){e[a].forEach(function(i){var o=fa(i.meta[1][0].data);if(o==2){var l=ybe(e,i);l.sheets.forEach(function(u,d){DE(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Y5(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=oc(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=ic(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&fa(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=fa(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return vbe(a,o)}function wbe(e,t,r){var n,s,a,i;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=e[8])==null?void 0:a[0])==null?void 0:i.data)&&fa(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Im(e[7][0].data),d=0,f=[],h=Im(e[4][0].data),g=0,x=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),h.setUint16(y*2,g,!0);var v,T;switch(typeof t[y]){case"string":v=q5({t:"s",v:t[y]},r),T=K5({t:"s",v:t[y]},r);break;case"number":v=q5({t:"n",v:t[y]},r),T=K5({t:"n",v:t[y]},r);break;case"boolean":v=q5({t:"b",v:t[y]},r),T=K5({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}f.push(v),d+=v.length,x.push(T),g+=T.length,++l}for(e[2][0].data=es(l);y<e[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535,!0);return e[6][0].data=Gf(f),e[3][0].data=Gf(x),l}function bbe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=dl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(yn(n)));var a=V4(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(z){return z.forEach(function(G){typeof G=="string"&&i.push(G)})});var o={},l=[],u=zr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(z,G){return[z,u.FullPaths[G]]}).forEach(function(z){var G=z[0],Q=z[1];if(G.type==2&&G.name.match(/\.iwa/)){var re=G.content,q=oc(re),se=ic(q);se.forEach(function(ce){l.push(ce.id),o[ce.id]={deps:[],location:Q,type:fa(ce.messages[0].meta[1][0].data)}})}}),l.sort(function(z,G){return z-G});var d=l.filter(function(z){return z>1}).map(function(z){return[z,es(z)]});u.FileIndex.map(function(z,G){return[z,u.FullPaths[G]]}).forEach(function(z){var G=z[0];if(z[1],!!G.name.match(/\.iwa/)){var Q=ic(oc(G.content));Q.forEach(function(re){re.messages.forEach(function(q){d.forEach(function(se){re.messages.some(function(ce){return fa(ce.meta[1][0].data)!=11006&&obe(ce.data,se[1])})&&o[se[0]].deps.push(re.id)})})})}});for(var f=zr.find(u,o[1].location),h=ic(oc(f.content)),g,x=0;x<h.length;++x){var y=h[x];y.id==1&&(g=y)}var v=lo($n(g.messages[0].data)[1][0].data);for(f=zr.find(u,o[v].location),h=ic(oc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);for(v=lo($n(g.messages[0].data)[2][0].data),f=zr.find(u,o[v].location),h=ic(oc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);for(v=lo($n(g.messages[0].data)[2][0].data),f=zr.find(u,o[v].location),h=ic(oc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);var T=$n(g.messages[0].data);{T[6][0].data=es(n.e.r+1),T[7][0].data=es(n.e.c+1);var k=lo(T[46][0].data),b=zr.find(u,o[k].location),E=ic(oc(b.content));{for(var N=0;N<E.length&&E[N].id!=k;++N);if(E[N].id!=k)throw"Bad ColumnRowUIDMapArchive";var P=$n(E[N].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var M=0;M<=n.e.c;++M){var j=[];j[1]=j[2]=[{type:0,data:es(M+420690)}],P[1].push({type:2,data:Bi(j)}),P[2].push({type:0,data:es(M)}),P[3].push({type:0,data:es(M)})}P[4]=[],P[5]=[],P[6]=[];for(var A=0;A<=n.e.r;++A)j=[],j[1]=j[2]=[{type:0,data:es(A+726270)}],P[4].push({type:2,data:Bi(j)}),P[5].push({type:0,data:es(A)}),P[6].push({type:0,data:es(A)});E[N].messages[0].data=Bi(P)}b.content=rp(tp(E)),b.size=b.content.length,delete T[46];var F=$n(T[4][0].data);{F[7][0].data=es(n.e.r+1);var L=$n(F[1][0].data),V=lo(L[2][0].data);b=zr.find(u,o[V].location),E=ic(oc(b.content));{if(E[0].id!=V)throw"Bad HeaderStorageBucket";var J=$n(E[0].messages[0].data);for(A=0;A<a.length;++A){var ne=$n(J[2][0].data);ne[1][0].data=es(A),ne[4][0].data=es(a[A].length),J[2][A]={type:J[2][0].type,data:Bi(ne)}}E[0].messages[0].data=Bi(J)}b.content=rp(tp(E)),b.size=b.content.length;var ee=lo(F[2][0].data);b=zr.find(u,o[ee].location),E=ic(oc(b.content));{if(E[0].id!=ee)throw"Bad HeaderStorageBucket";for(J=$n(E[0].messages[0].data),M=0;M<=n.e.c;++M)ne=$n(J[2][0].data),ne[1][0].data=es(M),ne[4][0].data=es(n.e.r+1),J[2][M]={type:J[2][0].type,data:Bi(ne)};E[0].messages[0].data=Bi(J)}b.content=rp(tp(E)),b.size=b.content.length;var ie=lo(F[4][0].data);(function(){for(var z=zr.find(u,o[ie].location),G=ic(oc(z.content)),Q,re=0;re<G.length;++re){var q=G[re];q.id==ie&&(Q=q)}var se=$n(Q.messages[0].data);{se[3]=[];var ce=[];i.forEach(function(le,ye){ce[1]=[{type:0,data:es(ye)}],ce[2]=[{type:0,data:es(1)}],ce[3]=[{type:2,data:ibe(le)}],se[3].push({type:2,data:Bi(ce)})})}Q.messages[0].data=Bi(se);var pe=tp(G),ke=rp(pe);z.content=ke,z.size=z.content.length})();var B=$n(F[3][0].data);{var Y=B[1][0];delete B[2];var I=$n(Y.data);{var H=lo(I[2][0].data);(function(){for(var z=zr.find(u,o[H].location),G=ic(oc(z.content)),Q,re=0;re<G.length;++re){var q=G[re];q.id==H&&(Q=q)}var se=$n(Q.messages[0].data);{delete se[6],delete B[7];var ce=new Uint8Array(se[5][0].data);se[5]=[];for(var pe=0,ke=0;ke<=n.e.r;++ke){var le=$n(ce);pe+=wbe(le,a[ke],i),le[1][0].data=es(ke),se[5].push({data:Bi(le),type:2})}se[1]=[{type:0,data:es(n.e.c+1)}],se[2]=[{type:0,data:es(n.e.r+1)}],se[3]=[{type:0,data:es(pe)}],se[4]=[{type:0,data:es(n.e.r+1)}]}Q.messages[0].data=Bi(se);var ye=tp(G),je=rp(ye);z.content=je,z.size=z.content.length})()}Y.data=Bi(I)}F[3][0].data=Bi(B)}T[4][0].data=Bi(F)}g.messages[0].data=Bi(T);var W=tp(h),R=rp(W);return f.content=R,f.size=f.content.length,u}function vV(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function AE(e){vV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function jE(e){vV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function _be(e){return En.WS.indexOf(e)>-1?"sheet":e==En.CS?"chart":e==En.DS?"dialog":e==En.MS?"macro":e&&e.length?e:"sheet"}function Sbe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,_be(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function kbe(e,t,r,n,s,a,i,o,l,u,d,f){try{a[n]=Qy(Dl(e,r,!0),t);var h=Oa(e,t),g;switch(o){case"sheet":g=V2e(h,t,s,l,a[n],u,d,f);break;case"chart":if(g=q2e(h,t,s,l,a[n],u,d,f),!g||!g["!drawel"])break;var x=Oy(g["!drawel"].Target,t),y=Mv(x),v=F1e(Dl(e,x,!0),Qy(Dl(e,y,!0),x)),T=Oy(v,x),k=Mv(T);g=w2e(Dl(e,T,!0),T,l,Qy(Dl(e,k,!0),T),u,g);break;case"macro":g=K2e(h,t,s,l,a[n],u,d,f);break;case"dialog":g=Y2e(h,t,s,l,a[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var b=[];a&&a[n]&&ha(a[n]).forEach(function(E){var N="";if(a[n][E].Type==En.CMNT){N=Oy(a[n][E].Target,t);var P=Z2e(Oa(e,N,!0),N,l);if(!P||!P.length)return;ZD(g,P,!1)}a[n][E].Type==En.TCMNT&&(N=Oy(a[n][E].Target,t),b=b.concat(O1e(Oa(e,N,!0),l)))}),b&&b.length&&ZD(g,b,!0,l.people||[])}catch(E){if(l.WTF)throw E}}function sc(e){return e.charAt(0)=="/"?e.slice(1):e}function Tbe(e,t){if(_1(),t=t||{},AE(t),uc(e,"META-INF/manifest.xml")||uc(e,"objectdata.xml"))return uO(e,t);if(uc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Y5<"u"){if(e.FileIndex)return Y5(e);var r=zr.utils.cfb_new();return wD(e).forEach(function(ne){vn(r,ne,Rfe(e,ne))}),Y5(r)}throw new Error("Unsupported NUMBERS file")}if(!uc(e,"[Content_Types].xml"))throw uc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):uc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=wD(e),s=Ahe(Dl(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Oa(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Oa(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(Zy=[],s.sst)try{Zy=Q2e(Oa(e,sc(s.sst)),s.sst,t)}catch(ne){if(t.WTF)throw ne}t.cellStyles&&s.themes.length&&(l=J2e(Dl(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=X2e(Oa(e,sc(s.style)),s.style,l,t))}s.links.map(function(ne){try{var ee=Qy(Dl(e,Mv(sc(ne))),ne);return twe(Oa(e,sc(ne)),ee,ne,t)}catch{}});var d=G2e(Oa(e,sc(s.workbooks[0])),s.workbooks[0],t),f={},h="";s.coreprops.length&&(h=Oa(e,sc(s.coreprops[0]),!0),h&&(f=oG(h)),s.extprops.length!==0&&(h=Oa(e,sc(s.extprops[0]),!0),h&&Rhe(h,f,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(h=Dl(e,sc(s.custprops[0]),!0),h&&(g=Lhe(h,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ee){return ee.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=g),t.bookSheets&&typeof i<"u"&&(x.SheetNames=i),t.bookSheets?x.SheetNames:t.bookProps))return x;i={};var y={};t.bookDeps&&s.calcchain&&(y=ewe(Oa(e,sc(s.calcchain)),s.calcchain));var v=0,T={},k,b;{var E=d.Sheets;f.Worksheets=E.length,f.SheetNames=[];for(var N=0;N!=E.length;++N)f.SheetNames[N]=E[N].name}var P=a?"bin":"xml",M=s.workbooks[0].lastIndexOf("/"),j=(s.workbooks[0].slice(0,M+1)+"_rels/"+s.workbooks[0].slice(M+1)+".rels").replace(/^\//,"");uc(e,j)||(j="xl/_rels/workbook."+P+".rels");var A=Qy(Dl(e,j,!0),j.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=rwe(Oa(e,sc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=I1e(Oa(e,sc(s.people[0])),t)),A&&(A=Sbe(A,d.Sheets));var F=Oa(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var L="sheet";if(A&&A[v]?(k="xl/"+A[v][1].replace(/[\/]?xl\//,""),uc(e,k)||(k=A[v][1]),uc(e,k)||(k=j.replace(/_rels\/.*$/,"")+A[v][1]),L=A[v][2]):(k="xl/worksheets/sheet"+(v+1-F)+"."+P,k=k.replace(/sheet0\./,"sheet.")),b=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var V=!1,J=0;J!=t.sheets.length;++J)typeof t.sheets[J]=="number"&&t.sheets[J]==v&&(V=1),typeof t.sheets[J]=="string"&&t.sheets[J].toLowerCase()==f.SheetNames[v].toLowerCase()&&(V=1);if(!V)continue e}}kbe(e,k,b,f.SheetNames[v],v,T,i,L,t,d,l,u)}return x={Directory:s,Workbook:d,Props:f,Custprops:g,Deps:y,Sheets:i,SheetNames:f.SheetNames,Strings:Zy,Styles:u,Themes:l,SSF:js(Jr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(ne,ee){ne=ne.replace(/^Root Entry[\/]/,""),x.keys.push(ne),x.files[ne]=e.FileIndex[ee]}))),t&&t.bookVBA&&(s.vba.length>0?x.vbaraw=Oa(e,sc(s.vba[0]),!0):s.defaults&&s.defaults.bin===G1e&&(x.vbaraw=Oa(e,"xl/vbaProject.bin",!0))),x}function Cbe(e,t){var r=t||{},n="Workbook",s=zr.find(e,n);try{if(n="/!DataSpaces/Version",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(rpe(s.content),n="/!DataSpaces/DataSpaceMap",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=spe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=ape(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);ope(s.content)}catch{}if(n="/EncryptionInfo",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=lpe(s.content);if(n="/EncryptedPackage",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Ebe(e,t){return t.bookType=="ods"?yV(e,t):t.bookType=="numbers"?bbe(e,t):t.bookType=="xlsb"?Nbe(e,t):Abe(e,t)}function Nbe(e,t){wp=1024,e&&!e.SSF&&(e.SSF=js(Jr)),e&&e.SSF&&(_1(),c3(e.SSF),t.revssf=d3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ev?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=VG.indexOf(t.bookType)>-1,s=gE();jE(t=t||{});var a=tE(),i="",o=0;if(t.cellXfs=[],nh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",vn(a,i,lG(e.Props,t)),s.coreprops.push(i),rs(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,vn(a,i,dG(e.Props)),s.extprops.push(i),rs(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&ha(e.Custprops||{}).length>0&&(i="docProps/custom.xml",vn(a,i,fG(e.Custprops)),s.custprops.push(i),rs(t.rels,4,i,En.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,vn(a,i,swe(o-1,i,t,e,d)),s.sheets.push(i),rs(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(f){var g=f["!comments"],x=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,vn(a,y,owe(g,y)),s.comments.push(y),rs(d,-1,"../comments"+o+"."+r,En.CMNT),x=!0),f["!legacy"]&&x&&vn(a,"xl/drawings/vmlDrawing"+o+".vml",HG(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&vn(a,Mv(i),Pp(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,vn(a,i,iwe(t.Strings,i,t)),s.strs.push(i),rs(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,vn(a,i,nwe(e,i)),s.workbooks.push(i),rs(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",vn(a,i,bE(e.Themes,t)),s.themes.push(i),rs(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,vn(a,i,awe(e,i,t)),s.styles.push(i),rs(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",vn(a,i,e.vbaraw),s.vba.push(i),rs(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,vn(a,i,lwe(i)),s.metadata.push(i),rs(t.wbrels,-1,"metadata."+r,En.XLMETA),vn(a,"[Content_Types].xml",aG(s,t)),vn(a,"_rels/.rels",Pp(t.rels)),vn(a,"xl/_rels/workbook."+r+".rels",Pp(t.wbrels)),delete t.revssf,delete t.ssf,a}function Abe(e,t){wp=1024,e&&!e.SSF&&(e.SSF=js(Jr)),e&&e.SSF&&(_1(),c3(e.SSF),t.revssf=d3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ev?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=VG.indexOf(t.bookType)>-1,s=gE();jE(t=t||{});var a=tE(),i="",o=0;if(t.cellXfs=[],nh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",vn(a,i,lG(e.Props,t)),s.coreprops.push(i),rs(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,vn(a,i,dG(e.Props)),s.extprops.push(i),rs(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&ha(e.Custprops||{}).length>0&&(i="docProps/custom.xml",vn(a,i,fG(e.Custprops)),s.custprops.push(i),rs(t.rels,4,i,En.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,vn(a,i,nV(o-1,t,e,f)),s.sheets.push(i),rs(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(h){var x=h["!comments"],y=!1,v="";if(x&&x.length>0){var T=!1;x.forEach(function(k){k[1].forEach(function(b){b.T==!0&&(T=!0)})}),T&&(v="xl/threadedComments/threadedComment"+o+"."+r,vn(a,v,R1e(x,d,t)),s.threadedcomments.push(v),rs(f,-1,"../threadedComments/threadedComment"+o+"."+r,En.TCMNT)),v="xl/comments"+o+"."+r,vn(a,v,GG(x)),s.comments.push(v),rs(f,-1,"../comments"+o+"."+r,En.CMNT),y=!0}h["!legacy"]&&y&&vn(a,"xl/drawings/vmlDrawing"+o+".vml",HG(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&vn(a,Mv(i),Pp(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,vn(a,i,MG(t.Strings,t)),s.strs.push(i),rs(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,vn(a,i,lV(e)),s.workbooks.push(i),rs(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",vn(a,i,bE(e.Themes,t)),s.themes.push(i),rs(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,vn(a,i,$G(e,t)),s.styles.push(i),rs(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",vn(a,i,e.vbaraw),s.vba.push(i),rs(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,vn(a,i,WG()),s.metadata.push(i),rs(t.wbrels,-1,"metadata."+r,En.XLMETA),d.length>1&&(i="xl/persons/person.xml",vn(a,i,L1e(d)),s.people.push(i),rs(t.wbrels,-1,"persons/person.xml",En.PEOPLE)),vn(a,"[Content_Types].xml",aG(s,t)),vn(a,"_rels/.rels",Pp(t.rels)),vn(a,"xl/_rels/workbook."+r+".rels",Pp(t.wbrels)),delete t.revssf,delete t.ssf,a}function PE(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Bl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function jbe(e,t){return zr.find(e,"EncryptedPackage")?Cbe(e,t):fV(e,t)}function Pbe(e,t){var r,n=e,s=t||{};return s.type||(s.type=Sn&&Buffer.isBuffer(e)?"buffer":"base64"),r=DH(n,s),Tbe(r,s)}function wV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return X8(e.slice(r),t);default:break e}return qp.to_workbook(e,t)}function Mbe(e,t){var r="",n=PE(e,t);switch(t.type){case"base64":r=Bl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Fm(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ds(r)),t.type="binary",wV(r,t)}function Fbe(e,t){var r=e;return t.type=="base64"&&(r=Bl(r)),r=Cv.utils.decode(1200,r.slice(2),"str"),t.type="binary",wV(r,t)}function Dbe(e){return e.match(/[^\x00-\x7F]/)?Hu(e):e}function X5(e,t,r,n){return n?(r.type="string",qp.to_workbook(e,r)):qp.to_workbook(t,r)}function Z8(e,t){XC();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Z8(new Uint8Array(e),(r=js(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Fp={},r.dateNF&&(Fp.dateNF=r.dateNF),r.type||(r.type=Sn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Sn?"buffer":"binary",n=Nfe(e),typeof Uint8Array<"u"&&!Sn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=Dbe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=js(r),r.type="array",Z8(JC(n),r)}switch((s=PE(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return jbe(zr.read(n,r),r);break;case 9:if(s[1]<=8)return fV(n,r);break;case 60:return X8(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Bge(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return jG.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Pbe(n,r):X5(e,n,r,a);case 239:return s[3]===60?X8(n,r):X5(e,n,r,a);case 255:if(s[1]===254)return Fbe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return fm.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return fm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Y8.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return IG.to_workbook(n,r);break;case 10:case 13:case 32:return Mbe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Lge.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Y8.to_workbook(n,r):X5(e,n,r,a)}function bV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return _2(t.file,zr.write(e,{type:Sn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return zr.write(e,t)}function Obe(e,t){var r=js(t||{}),n=Ebe(e,r);return Rbe(n,r)}function Rbe(e,t){var r={},n=Sn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?zr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(l3(s))}return t.password&&typeof encrypt_agile<"u"?bV(encrypt_agile(s,t.password),t):t.type==="file"?_2(t.file,s):t.type=="string"?ds(s):s}function Ibe(e,t){var r=t||{},n=Dwe(e,r);return bV(n,r)}function Ou(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Ev(Hu(n));case"binary":return Hu(n);case"string":return e;case"file":return _2(t.file,n,"utf8");case"buffer":return Sn?w0(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ou(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Lbe(e,t){switch(t.type){case"base64":return Ev(e);case"binary":return e;case"string":return e;case"file":return _2(t.file,e,"binary");case"buffer":return Sn?w0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function _b(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Ev(r):t.type=="string"?ds(r):r;case"file":return _2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function _V(e,t){XC(),j2e(e);var r=js(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=_V(e,r);return r.type="array",l3(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ou(Ewe(e,r),r);case"slk":case"sylk":return Ou(AG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Ou(mV(e.Sheets[e.SheetNames[s]],r),r);case"txt":return Lbe(SV(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Ou(ME(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Ou(jG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return _b(Y8.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Ou(qp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Ou(IG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Ou(PG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Ou(yV(e,r),r);case"wk1":return _b(fm.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return _b(fm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),_b(hV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Ibe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Obe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Bbe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function $be(e,t,r){var n={};return n.type="file",n.file=t,Bbe(n),_V(e,n)}function zbe(e,t,r,n,s,a,i,o){var l=Ea(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var g=t.s.c;g<=t.e.c;++g){var x=i?e[r][g]:e[n[g]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;a[g]!=null&&(h[a[g]]=u);continue}var y=x.v;switch(x.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[g]!=null){if(y==null)if(x.t=="e"&&y===null)h[a[g]]=null;else if(u!==void 0)h[a[g]]=u;else if(d&&y===null)h[a[g]]=null;else continue;else h[a[g]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?y:f0(x,y,o);y!=null&&(f=!1)}}return{row:h,isempty:f}}function V4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Ln(d);break;case"number":l=Ln(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var f=Ea(l.s.r),h=[],g=[],x=0,y=0,v=Array.isArray(e),T=l.s.r,k=0,b={};v&&!e[T]&&(e[T]=[]);var E=u.skipHidden&&e["!cols"]||[],N=u.skipHidden&&e["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(E[k]||{}).hidden)switch(h[k]=Xs(k),r=v?e[T][k]:e[h[k]+f],n){case 1:a[k]=k-l.s.c;break;case 2:a[k]=h[k];break;case 3:a[k]=u.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=f0(r,null,u),y=b[i]||0,!y)b[i]=1;else{do o=i+"_"+y++;while(b[o]);b[i]=y,b[o]=1}a[k]=o}for(T=l.s.r+s;T<=l.e.r;++T)if(!(N[T]||{}).hidden){var P=zbe(e,l,T,h,n,a,v,u);(P.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[x++]=P.row)}return g.length=x,g}var gO=/"/g;function Ube(e,t,r,n,s,a,i,o){for(var l=!0,u=[],d="",f=Ea(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var g=o.dense?(e[r]||[])[h]:e[n[h]+f];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:f0(g,null,o));for(var x=0,y=0;x!==d.length;++x)if((y=d.charCodeAt(x))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(gO,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(gO,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function ME(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Ln(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(h[x]||{}).hidden||(f[x]=Xs(x));for(var y=0,v=s.s.r;v<=s.e.r;++v)(g[v]||{}).hidden||(d=Ube(e,s,v,f,i,l,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function SV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=ME(e,t);return r}function Wbe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Ln(e["!ref"]),a="",i=[],o,l=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=Xs(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Ea(d),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function kV(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Js(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var f=Ln(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+s)}else i==-1&&(i=0,d.e.r=t.length-1+s);var h=n.header||[],g=0;t.forEach(function(y,v){ha(y).forEach(function(T){(g=h.indexOf(T))==-1&&(h[g=h.length]=T);var k=y[T],b="z",E="",N=Zr({c:o+g,r:i+v+s});u=Bv(a,N),k&&typeof k=="object"&&!(k instanceof Date)?a[N]=k:(typeof k=="number"?b="n":typeof k=="boolean"?b="b":typeof k=="string"?b="s":k instanceof Date?(b="d",n.cellDates||(b="n",k=ni(k)),E=n.dateNF||Jr[14]):k===null&&n.nullError&&(b="e",k=0),u?(u.t=b,u.v=k,delete u.w,delete u.R,E&&(u.z=E)):a[N]=u={t:b,v:k},E&&(u.z=E))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var x=Ea(i);if(s)for(g=0;g<h.length;++g)a[Xs(g+o)+x]={t:"s",v:h[g]};return a["!ref"]=yn(d),a}function Hbe(e,t){return kV(null,e,t)}function Bv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Js(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Bv(e,Zr(t)):Bv(e,Zr({r:t,c:r||0}))}function Gbe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function FE(){return{SheetNames:[],Sheets:{}}}function DE(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(oV(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Vbe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Gbe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function qbe(e,t){return e.z=t,e}function TV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Kbe(e,t,r){return TV(e,"#"+t,r)}function Ybe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Xbe(e,t,r,n){for(var s=typeof t!="string"?t:Ln(t),a=typeof t=="string"?t:yn(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=Bv(e,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return e}var Xb={encode_col:Xs,encode_row:Ea,encode_cell:Zr,encode_range:yn,decode_col:cE,decode_row:lE,split_cell:ihe,decode_cell:Js,decode_range:dl,format_cell:f0,sheet_add_aoa:QH,sheet_add_json:kV,sheet_add_dom:gV,aoa_to_sheet:S1,json_to_sheet:Hbe,table_to_sheet:pV,table_to_book:rbe,sheet_to_csv:ME,sheet_to_txt:SV,sheet_to_json:V4,sheet_to_html:mV,sheet_to_formulae:Wbe,sheet_to_row_object_array:V4,sheet_get_cell:Bv,book_new:FE,book_append_sheet:DE,book_set_sheet_visibility:Vbe,cell_set_number_format:qbe,cell_set_hyperlink:TV,cell_set_internal_link:Kbe,cell_add_comment:Ybe,sheet_set_array_formula:Xbe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const CV=({onBackToCabinet:e,selectedGrade:t,selectedClass:r,openRetestModal:n,forceRefreshOnMount:s=!1})=>{fl(),Zv();const{user:a,isAuthenticated:i}=Ms(),{showNotification:o}=si(),l=_.useCallback(De=>{let Ve=null;if(typeof De?.percentage=="number"&&!Number.isNaN(De.percentage))return Ve=Math.round(De.percentage),console.debug("[TeacherResults] Using provided percentage",{percentage:De.percentage,rounded:Ve,result:De}),Ve;const $t=De?.retest_best_score??De?.score,gt=De?.retest_best_max_score??De?.max_score,br=Number($t??0),jt=Number(gt??0);return jt>0&&(Ve=Math.round(br/jt*100)),Ve},[]);_.useCallback(De=>{const Ve=l(De);return Ve===null?"text-gray-600":Ve<50?"text-red-600 font-semibold":Ve<70?"text-yellow-600":"text-green-600"},[l]),_.useCallback(De=>{const Ve=l(De);return Ve!==null&&Ve<50},[l]);const[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,x]=_.useState(""),[y,v]=_.useState([]),[T,k]=_.useState(null),[b,E]=_.useState(!1),[N,P]=_.useState([]),[M,j]=_.useState([]),[A,F]=_.useState([1,2]),[L,V]=_.useState(null),[J,ne]=_.useState(null),[ee,ie]=_.useState(null),[B,Y]=_.useState("main"),[I,H]=_.useState(null),[W,R]=_.useState(null),z=I||t,G=W||r,[Q,re]=_.useState(null),[q,se]=_.useState({}),[ce,pe]=_.useState(!1),[ke,le]=_.useState(new Set),[ye,je]=_.useState(!0),[Ne,We]=_.useState(null),[$e,Nt]=_.useState(null),[He,Et]=_.useState(!1),[Rt,Mt]=_.useState(!1),[ur,wr]=_.useState(!1),dr=_.useRef(null),[wt,Ke]=_.useState(null),[it,vt]=_.useState(!1),[st,qe]=_.useState(null),[ot,kt]=_.useState(!1),[Ut,Qt]=_.useState(null),[Gt,Zt]=_.useState(""),[ir,kr]=_.useState(""),[ve,Pe]=_.useState(!1),[Me,ze]=_.useState(!1),[At,Kt]=_.useState(null),[hr,Ye]=_.useState(""),[ft,lt]=_.useState(!1),[Wt,Fe]=_.useState(new Set),[xt,yt]=_.useState({}),[zt,or]=_.useState(!1),[de,_e]=_.useState(null),[ge,be]=_.useState(""),[Ce,Ee]=_.useState(!1),[rt,bt]=_.useState(null),[at,ue]=_.useState(null),[he,Ae]=_.useState(!1),[Ie,Ze]=_.useState(!1),[mt,Tt]=_.useState({isOpen:!1,testResult:null}),[lr,Ft]=_.useState({}),Ct=_.useRef(new Set),fr=_.useRef({}),Er=_.useRef(null);_.useEffect(()=>{console.log(" editingColumns state changed:",Array.from(Wt)),Ct.current=Wt},[Wt]),_.useEffect(()=>{console.log(" columnScores state changed:",xt),fr.current=xt},[xt]);const Fr=_.useCallback(De=>{console.log(" Toggling test collapse for:",De),le(Ve=>{const $t=new Set(Ve);return $t.has(De)?($t.delete(De),console.log(" Expanding test:",De)):($t.add(De),console.log(" Collapsing test:",De)),console.log(" New collapsed tests:",Array.from($t)),$t})},[]),on=_.useCallback(()=>{if(dr.current){const{scrollLeft:De,scrollWidth:Ve,clientWidth:$t}=dr.current;Mt(De>0),wr(De<Ve-$t-1)}},[]);_.useEffect(()=>{Yr()},[]),_.useEffect(()=>{if(L&&dr.current){const De=setTimeout(on,100);return()=>clearTimeout(De)}},[L,on]),_.useEffect(()=>{console.log(" Current collapsed tests state:",Array.from(ke))},[ke]);const ln=_.useCallback(async(De,Ve=!1)=>{try{pe(!0);const $t=a?.teacher_id,gt=`${z}/${G}`,br=await Hde.getTeacherStudentResults($t,z,gt,De,Ve);if(br.success){console.log(" Results loaded for term:",De,br.results?.length||0,"results"),console.log(" Students loaded:",br.students?.length||0,"students");const jt=[],Ur=new Set,Pn=new Set;br.results&&br.results.length>0&&br.results.forEach(sr=>{sr.test_name&&!Ur.has(sr.test_name)&&(Ur.add(sr.test_name),jt.push({test_name:sr.test_name,test_type:sr.test_type,subject:sr.subject})),sr.subject&&Pn.add(sr.subject)});const Ue=(br.students||[]).map(sr=>{const fs={};return(br.results||[]).filter(nn=>nn.student_id===sr.student_id).forEach(nn=>{nn.test_name&&(fs[nn.test_name]={id:nn.id,test_type:nn.test_type,test_id:nn.test_id,subject_id:nn.subject_id,score:nn.score,max_score:nn.max_score,retest_offered:nn.retest_offered,caught_cheating:nn.caught_cheating,visibility_change_times:nn.visibility_change_times,answers:nn.answers,ai_feedback:nn.ai_feedback,name:nn.name,surname:nn.surname,test_name:nn.test_name})}),{...sr,...fs}}),pr={results:br.results||[],students:Ue,class:Ue,unique_tests:jt,subjects:Array.from(Pn),count:br.count||0,student_count:br.student_count||0};console.log(" Processed results data:",{uniqueTests:jt.length,subjects:Array.from(Pn),resultsCount:br.results?.length||0,studentsWithScores:Ue.length,sampleStudent:Ue[0]}),V(pr),se(pr),ie(new Date)}}catch($t){console.error(" Error loading results for term:",$t),V(null),se(null)}finally{pe(!1)}},[a,z,G]);_.useEffect(()=>{(async()=>{try{Et(!0),await cu.loadAcademicCalendar();const Ve=cu.getCurrentSemesterTerms();Nt(Ve),Ve?.currentTerm&&(We(Ve.currentTerm.id),z&&G&&ln(Ve.currentTerm.id,s))}catch(Ve){console.error(" Error initializing academic calendar:",Ve)}finally{Et(!1)}})()},[z,G,ln,s]),_.useEffect(()=>{t&&r&&(console.log(" Props detected:",{grade:t,class:r}),$e?.currentTerm&&(We($e.currentTerm.id),ln($e.currentTerm.id,s)))},[t,r,$e,ln,s]);const Yr=_.useCallback(async()=>{console.log(" Initializing teacher results...");try{if(h(!0),x(""),!i||!a){console.log(" User not authenticated"),x("User not authenticated");return}if(a.role!==Ro.TEACHER){console.error(" Invalid user role for teacher results:",a.role),x("Access denied. Teacher role required.");return}console.log(" Loading teacher assignments..."),await Pr(),console.log(" TODO: Load academic calendar service"),console.log(" Teacher results initialization complete!")}catch(De){console.error(" Error initializing teacher results:",De),x("Failed to initialize teacher results")}finally{h(!1)}},[i,a]),Pr=_.useCallback(async()=>{console.log(" Loading teacher assignments...");try{const De=`teacher_data_${a?.teacher_id||a?.id||""}`;let Ve=Ta(De);Ve&&Ve.subjects&&Ve.subjects.length>0&&(Ve.subjects.some(Ue=>Ue.subject&&Ue.classes&&Ue.classes.length>0)||(console.log(" Cached data has invalid subject structure, forcing refresh"),localStorage.removeItem(De),Ve=null)),Ve?console.log(" Cache HIT! Using cached teacher data"):(console.log(" Cache MISS! Fetching teacher data from API"),Ve=await Is.getTeacherData(),console.log(" Teacher data loaded:",Ve),Bs(De,Ve,Cs.teacher_subjects)),d(Ve);const $t=[];Ve&&Ve.subjects&&(console.log(" Teacher subjects structure:",Ve.subjects),Ve.subjects.forEach(Pn=>{console.log(" Processing subject:",Pn),Pn.classes&&Pn.classes.forEach(Ue=>{Ue.grade&&Ue.class&&$t.push({grade:Ue.grade,class:Ue.class,subject:Pn.subject||Pn.name||"Unknown Subject"})})})),j($t),console.log(" Available classes from teacher data:",$t);const gt=`teacher_tests_${a?.teacher_id||a?.id||""}`,br=Ta(gt);br&&br.some(Pn=>Pn.test_type==="drawing")&&(console.log(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(gt));let jt=Ta(gt);jt?console.log(" Cache HIT! Using cached teacher tests"):(console.log(" Cache MISS! Fetching teacher tests from API"),jt=await _n.getTeacherTests(),console.log(" Teacher tests loaded:",jt),Bs(gt,jt,Cs.teacher_tests));const Ur=jt.flatMap(Pn=>Pn.assignments||[]);v(Ur),console.log(" Raw assignments data:",Ur),console.log(" Teacher assignments loaded:",Ur.length)}catch(De){console.error(" Error loading teacher assignments:",De),o("Failed to load teacher assignments","error")}},[o]),as=_.useCallback(async(De,Ve)=>{console.log(" Showing classes for grade:",De,"class:",Ve),H(De),R(Ve),k(null),V(null),De&&Ve&&console.log(" TODO: Implement academic calendar service for term selection")},[]);_.useCallback((De,Ve)=>{console.log(" Showing semesters for class:",De,Ve),k(null),V(null),console.log(" TODO: Implement academic calendar service for term selection")},[]),_.useCallback((De,Ve)=>{console.log(" Class clicked:",De,Ve),E(!0),console.log(" TODO: Implement academic calendar service for term selection")},[]);const Kr=_.useCallback(async(De,Ve=!1)=>{!z||!G||(console.log(" Loading results for semester:",De,"forceRefresh:",Ve),k(De),$e?.currentTerm&&await ln($e.currentTerm.id,Ve))},[z,G,$e,ln]),Tn=_.useCallback(()=>$e?c.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Semester: ",$e?.semester===1?"Semester 1":"Semester 2"]}),c.jsx("div",{className:"flex space-x-4",children:$e?.terms.map(De=>c.jsx(dt.button,{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${De.isCurrent?"bg-blue-600 text-white shadow-lg":Ne===De.id?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{We(De.id),ln(De.id)},whileHover:{scale:1.05},whileTap:{scale:.95},children:De.label},De.id))})]}):c.jsx("div",{className:"flex space-x-4 mb-6",children:c.jsx("div",{className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-500",children:"Loading terms..."})}),[$e,Ne,ln]);_.useCallback(De=>De.reduce((Ve,$t)=>(Ve[$t.student_id]||(Ve[$t.student_id]=[]),Ve[$t.student_id].push($t),Ve),{}),[]),_.useCallback(De=>{if(De.length===0)return 0;const Ve=De.reduce(($t,gt)=>$t+(gt.percentage||0),0);return Math.round(Ve/De.length)},[]),_.useCallback(De=>{De.score<De.passing_score&&window.confirm("Give another try?")&&Ds(De.student_id,De.test_id)},[]);const Ds=_.useCallback(async(De,Ve)=>{try{(await fetch("/.netlify/functions/reset-test-attempt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:De,testId:Ve})})).ok&&(G&&Kr(T,!0),o("Test made accessible to student","success"))}catch($t){console.error("Error resetting test attempt:",$t),o("Failed to reset test attempt","error")}},[G,T,Kr,o]),oi=_.useCallback((De,Ve)=>{if(De===null||Ve===null)return"";const $t=Math.round(De/Ve*100);return $t>=80?"text-green-600 bg-green-50":$t>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"},[]),Kn=_.useCallback(De=>{Ke(De),vt(!0)},[]),Se=_.useCallback((De,Ve="overview",$t)=>{try{const br=!!De?.ai_feedback,jt=typeof De?.ai_feedback;let Ur=[];if(br)if(jt==="string")try{Ur=Object.keys(JSON.parse(De.ai_feedback))}catch{Ur=["<invalid json>"]}else jt==="object"&&(Ur=Object.keys(De.ai_feedback||{}));console.log("[AI DEBUG] Opening speaking result",{hasAi:br,aiType:jt,aiKeys:Ur})}catch{}const gt={...De,__initialTab:Ve};$t&&(gt.__audioUrl=$t),qe(gt),kt(!0)},[]),Pt=_.useCallback(async(De,Ve)=>{if(!De||!Ve)return console.error("fetchTestQuestions: Missing testType or testId",{testType:De,testId:Ve}),null;const $t=`${De}_${Ve}`;if(lr[$t])return console.log(" Using cached questions for",$t),lr[$t];Ze(!0);try{console.log(" Fetching questions for",{testType:De,testId:Ve});const gt=await _n.getTestQuestions(De,Ve);return console.log(" Questions fetched:",gt?.length||0,"questions"),Ft(br=>({...br,[$t]:gt})),gt}catch(gt){return console.error(" Error fetching test questions:",gt),o("Failed to load test questions","error"),null}finally{Ze(!1)}},[lr,o]),Rr=_.useCallback(async(De,Ve)=>{if(console.log(" Opening answer modal for:",{testResult:De,test:Ve}),console.log(" [handleViewAnswers] testResult.answers:",De?.answers),console.log(" [handleViewAnswers] testResult.answers type:",typeof De?.answers),console.log(" [handleViewAnswers] testResult.retest_offered:",De?.retest_offered),console.log(" [handleViewAnswers] Full testResult keys:",De?Object.keys(De):"null"),De.test_type==="drawing"||Ve?.test_type==="drawing"){Kn(De);return}if(De.test_type==="speaking"||Ve?.test_type==="speaking"){Se(De);return}const $t=De.test_type||Ve?.test_type;if($t==="word_matching"||$t==="matching_type"){o("Word matching and picture matching tests have separate view mechanisms","info");return}bt(De),ue(null),Ae(!0),Ze(!0);const gt=De.test_id||Ve?.test_id;if(!$t||!gt){o("Unable to load test questions: Missing test type or ID","error"),Ze(!1);return}try{const br=await Pt($t,gt);br?ue(br):o("Failed to load test questions","error")}finally{Ze(!1)}},[Pt,Kn,Se,o]);_.useCallback((De,Ve,$t)=>{Qt({resultId:De,score:Ve,maxScore:$t}),Zt(Ve?.toString()||""),kr($t?.toString()||""),ze(!0)},[]),_.useCallback(De=>{Zt(De)},[]),_.useCallback(De=>{kr(De)},[]),_.useCallback(async()=>{if(Ut){Pe(!0);try{const De={resultId:Ut.resultId,score:parseInt(Gt)||0,maxScore:parseInt(ir)||1};(await fetch(Wd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)})).ok?(o("Score updated successfully","success"),G&&Kr(T,!0),Qt(null),Zt(""),kr(""),ze(!1)):o("Failed to update score","error")}catch(De){console.error("Error updating score:",De),o("Failed to update score","error")}finally{Pe(!1)}}},[Ut,Gt,ir,G,T,Kr,o]),_.useCallback(()=>{Qt(null),Zt(""),kr(""),ze(!1)},[]);const Xr=_.useCallback((De,Ve)=>{Kt({resultId:De,score:Ve}),Ye(Ve.toString())},[]),Hn=_.useCallback(async()=>{if(At){lt(!0);try{const De={resultId:At.resultId,score:parseInt(hr)||0},Ve=await fetch(Wd.UPDATE_SPEAKING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)});if(Ve.ok){const $t=await Ve.json();o("Speaking test score updated successfully","success"),st&&qe(gt=>({...gt,score:$t.score,percentage:$t.percentage})),G&&Kr(T,!0),Kt(null),Ye("")}else{const $t=await Ve.json();o($t.error||"Failed to update speaking test score","error")}}catch(De){console.error("Error updating speaking test score:",De),o("Failed to update speaking test score","error")}finally{lt(!1)}}},[At,hr,G,T,Kr,o]),Nn=_.useCallback(()=>{Kt(null),Ye("")},[]),is=(De,Ve)=>{console.log(" Starting column editing for drawing test:",De),console.log(" Current editingColumns before update:",Array.from(Wt)),console.log(" Results data passed to function:",Ve),Fe($t=>{const gt=new Set($t).add(De);return console.log(" Updated editingColumns:",Array.from(gt)),gt}),console.log(" Initializing column scores for test:",De),console.log(" Results data:",Ve),console.log(" Results.class:","null"),console.log(" No results or class data available")},Hs=_.useCallback(De=>{Fe(Ve=>{const $t=new Set(Ve);return $t.delete(De),$t}),yt(Ve=>{const $t={...Ve};return delete $t[De],$t})},[]),li=_.useCallback((De,Ve,$t,gt)=>{const br=gt.toString();fr.current[De]||(fr.current[De]={}),fr.current[De][Ve]||(fr.current[De][Ve]={}),fr.current[De][Ve][$t]=br;const jt=parseInt(gt)||0;yt(Ur=>({...Ur,[De]:{...Ur[De],[Ve]:{...Ur[De]?.[Ve],[$t]:jt}}}))},[]);_.useCallback(async De=>{if(fr.current[De]){or(!0);try{const Ve=Object.entries(fr.current[De]).map(([jt,Ur])=>({resultId:Ur.resultId,score:parseInt(Ur.score)||0,maxScore:parseInt(Ur.maxScore)||100}));console.log(" Saving column scores for",De,":",Ve);const $t=Ve.map(jt=>(console.log(" Sending update:",jt),fetch(Wd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(jt)})));(await Promise.all($t)).every(jt=>jt.ok)?(o(`Scores updated successfully for ${De}`,"success"),G&&Kr(T,!0),Hs(De)):o("Failed to update some scores","error")}catch(Ve){console.error("Error updating column scores:",Ve),o("Failed to update scores","error")}finally{or(!1)}}},[xt,G,T,Kr,o,Hs]);const cn=_.useCallback((De,Ve,$t)=>!Ve||Ve.length===0?c.jsx(dt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):c.jsx(dt.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:c.jsxs(dt.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[c.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:gt=>{dr.current&&(dr.current.scrollLeft=gt.target.scrollLeft)},children:c.jsx("div",{className:"min-w-full h-1",children:c.jsx("div",{className:"h-1",style:{width:`${($t.length+5)*120}px`}})})}),c.jsx("div",{ref:dr,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:gt=>{on(gt);const br=gt.target.previousElementSibling;br&&(br.scrollLeft=gt.target.scrollLeft)},children:c.jsxs("table",{className:"min-w-full border-collapse text-sm min-w-max",children:[c.jsx("thead",{children:c.jsxs(dt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-20 text-center",children:"Student ID"}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 ${ye?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[180px] bg-blue-50 cursor-pointer select-none"}`,onClick:gt=>{gt.preventDefault(),gt.stopPropagation(),je(!ye)},title:"Toggle student name columns",children:ye?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),c.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-16 text-center",children:"No."}),c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 min-w-[100px]",children:"Nickname"}),$t.map((gt,br)=>{const jt=ke.has(gt.test_name),Ur=gt.test_type==="drawing",Pn=Ct.current.has(gt.test_name);return console.log(` Rendering test ${gt.test_name}:`,{isDrawingTest:Ur,isEditingColumn:Pn,editingColumns:Array.from(Ct.current),test_type:gt.test_type}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 cursor-pointer hover:bg-blue-200 transition-colors select-none ${jt?"w-8 min-w-[32px] max-w-[32px] bg-gray-100":"min-w-[100px] bg-blue-50"}`,onClick:Ue=>{Ue.preventDefault(),Ue.stopPropagation(),Fr(gt.test_name)},children:jt?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:gt.test_name,children:gt.test_name.length>8?gt.test_name.substring(0,8)+"...":gt.test_name}),c.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},br)})]})}),c.jsx("tbody",{children:c.jsx(al,{children:Ve.map((gt,br)=>c.jsxs(dt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${br%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1+br*.05,ease:"easeOut"},whileHover:{scale:1.01,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},children:[c.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-center font-semibold text-gray-900",whileHover:{scale:1.05},transition:{duration:.2},children:gt.student_id}),ye?c.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),je(!1)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):c.jsxs(c.Fragment,{children:[c.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:gt.name}),c.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:gt.surname})]}),c.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-center text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:gt.number??br+1}),c.jsx(dt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-600",whileHover:{scale:1.02},transition:{duration:.2},children:gt.nickname||"-"}),$t.map((jt,Ur)=>{const Pn=ke.has(jt.test_name),Ue=gt[jt.test_name];return Pn?(console.log(" Rendering collapsed column for test:",jt.test_name),c.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:pr=>{pr.preventDefault(),pr.stopPropagation(),console.log(" Clicked on collapsed arrow for:",jt.test_name),Fr(jt.test_name)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},Ur)):c.jsx(dt.td,{className:"border-b border-gray-100 px-2 py-4 text-sm min-w-[100px]",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{duration:.3},whileHover:{scale:1.02},onClick:pr=>{console.debug("[TeacherResults] Main table TD clicked",{testResult:Ue,student:gt.student_id});const sr=Ue?.test_type||jt?.test_type;if(sr==="drawing"||sr==="speaking")return;const fs=l(Ue),gn=fs!==null&&fs<50;if(Ue?.retest_offered===!0&&(sr==="multiple_choice"||sr==="true_false"||sr==="input")){Rr(Ue,jt);return}if(sr==="fill_blanks"||sr==="matching_type"||sr==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked",{testType:sr,isRed:gn,testResult:Ue}),gn){if(Ue?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:gt.student_id,test:jt}),n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal",{testResult:Ue}),Tt({isOpen:!0,testResult:Ue});else if(gn){if(Ue?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:gt.student_id,test:jt}),n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r})}else Rr(Ue,jt)},children:Ue&&Ue.test_type==="drawing"?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[c.jsx("button",{onClick:()=>Kn(Ue),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"View Drawing"}),(()=>{const pr=`${jt.test_name}|${gt.student_id}`,sr=de===pr,fs=Number.isFinite(Ue?.score)?Ue.score:0;if(!sr){const gn=l(Ue),nn=gn!==null&&gn<50,pn=gn!==null&&gn>=50&&gn<70,bn=Ue?.retest_offered===!0,Hl=gn===null?"text-gray-600":nn?"text-red-600 font-semibold":pn?"text-yellow-600":"text-green-600";return c.jsxs(dt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${Hl} cursor-pointer hover:opacity-90 ${bn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:nn?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:Ni=>{Ni.preventDefault(),Ni.stopPropagation(),nn&&!bn?n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r}):(_e(pr),be(String(fs)))},title:bn?"Retest offered":nn?"Offer retest":"Double-click to edit score",children:[(()=>{const Ni=Ue.retest_best_score??Ue.score,lh=Ue.retest_best_max_score??Ue.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:nn?"text-red-700":"",children:Ni}),"/",c.jsx("span",{children:lh})]})})(),Ue.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})}return c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:10,value:ge,onChange:gn=>be(gn.target.value),onBlur:async()=>{const gn=Math.max(0,Math.min(10,parseFloat(ge||"0")));Ee(!0);try{const nn={resultId:Ue?.id,score:gn,maxScore:10},pn=await(window.tokenManager?.getToken()||oa.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Wd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:pn?`Bearer ${pn}`:""},body:JSON.stringify(nn)})).ok)throw new Error("Failed to save")}catch{}finally{Ee(!1),_e(null),Kr(T,!0)}},onKeyDown:async gn=>{gn.key==="Enter"?gn.currentTarget.blur():gn.key==="Escape"&&_e(null)},className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",disabled:Ce}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",value:10,className:"w-12 px-2 py-1 text-xs border border-gray-300 bg-gray-100 rounded",disabled:!0})]})})(),Ue.caught_cheating&&Ue.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",Ue.visibility_change_times,")"]})]}):Ue&&(Ue.test_type==="speaking"||jt.test_type==="speaking")?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[(()=>{const pr=Ue?.answers;let sr;if(typeof pr=="string")if(/^https?:\/\//i.test(pr))sr=pr;else try{sr=JSON.parse(pr)?.audio_url}catch{}else pr&&typeof pr=="object"&&(sr=pr.audio_url);return!sr&&Ue?.audio_url&&(sr=Ue.audio_url),c.jsx(c.Fragment,{children:c.jsx("button",{onClick:()=>Se({...Ue,__studentId:gt.student_id},"audio",sr),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Results"})})})(),(()=>{const pr=Ct.current.has(jt.test_name);return console.log(` Score cell for ${jt.test_name}:`,{isEditing:pr,editingColumns:Array.from(Ct.current),test_name:jt.test_name}),pr})()?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:Ue.max_score||100,value:fr.current[jt.test_name]?.[gt.student_id]?.score||Ue.score||"",onChange:pr=>li(jt.test_name,gt.student_id,"score",pr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",min:"1",value:fr.current[jt.test_name]?.[gt.student_id]?.maxScore||Ue.max_score||100,onChange:pr=>li(jt.test_name,gt.student_id,"maxScore",pr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):c.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",onDoubleClick:()=>{console.log(" Double-clicked on speaking test score:",jt.test_name),console.log(" Results state at double-click:",L),console.log(" Test result:",Ue),console.log(" Student:",gt),console.log(" Test:",jt),Ue&&Ue.id?(console.log(" Starting column editing for speaking test:",jt.test_name),is(jt.test_name)):console.log(" No test result ID found, cannot edit")},title:"Double-click to edit scores",children:[(()=>{const pr=l(Ue),sr=pr!==null&&pr<50,fs=pr!==null&&pr>=50&&pr<70,gn=Ue.retest_offered,nn=pr===null?"text-gray-600":sr?"text-red-600 font-semibold":fs?"text-yellow-600":"text-green-600";return c.jsxs(dt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${nn} cursor-pointer hover:opacity-90 ${gn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:pn=>{pn.preventDefault(),pn.stopPropagation(),sr&&!gn&&(console.log(" Offering retest for speaking test:",jt.test_name),n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r}))},title:gn?"Retest offered":sr?"Offer retest":'Use "View Results" button to review',children:[(()=>{const pn=Ue.retest_best_score??Ue.score,bn=Ue.retest_best_max_score??Ue.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:sr?"text-red-700":"",children:pn}),"/",c.jsx("span",{children:bn})]})})(),Ue.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),Ue.caught_cheating&&Ue.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",Ue.visibility_change_times,")"]})]})]}):Ue&&Ue.score!==null&&Ue.score!==void 0?c.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[(()=>{const pr=l(Ue),sr=pr!==null&&pr<50,fs=pr!==null&&pr>=50&&pr<70,gn=pr===null?"text-gray-600":sr?"text-red-600 font-semibold":fs?"text-yellow-600":"text-green-600",nn=Ue?.retest_offered===!0;return c.jsxs(dt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${gn} cursor-pointer hover:opacity-90 ${nn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:pn=>{pn.preventDefault(),pn.stopPropagation();const bn=Ue?.test_type||jt?.test_type;if(!(bn==="drawing"||bn==="speaking")){if(Ue?.retest_offered===!0&&(bn==="multiple_choice"||bn==="true_false"||bn==="input")){Rr(Ue,jt);return}if(bn==="fill_blanks"||bn==="matching_type"||bn==="word_matching"){if(console.debug("[TeacherResults] Score pill clicked (Fill Blanks/Matching/Word Matching)",{testType:bn,isRed:sr,testResult:Ue}),sr){if(Ue?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal from score pill",{testResult:Ue}),Tt({isOpen:!0,testResult:Ue});return}if(sr){if(Ue?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r})}else Rr(Ue,jt)}},title:nn?"Click to view retest answers":sr?"Offer retest":"",children:[(()=>{const pn=Ue.retest_best_score??Ue.score,bn=Ue.retest_best_max_score??Ue.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:sr?"text-red-700":"",children:pn}),"/",c.jsx("span",{children:bn})]})})(),Ue.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),Ue.caught_cheating&&Ue.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",Ue.visibility_change_times,")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})},Ur)})]},br))})})]})})]})}),[oi,ke,Fr,ye]),gl=_.useCallback((De,Ve,$t)=>!Ve||Ve.length===0?c.jsx(dt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):c.jsx(dt.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:c.jsx(dt.div,{className:"overflow-x-auto -mx-4 px-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-w-max",children:c.jsxs("table",{className:"w-full border-collapse text-xs min-w-max",children:[c.jsx("thead",{children:c.jsxs(dt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-16 text-center",children:"ID"}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-3 text-left font-semibold text-gray-700 ${ye?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[160px] bg-blue-50 cursor-pointer select-none"}`,onClick:gt=>{gt.preventDefault(),gt.stopPropagation(),je(!ye)},title:"Toggle student name columns",children:ye?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),c.jsx("svg",{className:"w-3 h-3 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-12 text-center",children:"No."}),c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[80px]",children:"Nickname"}),$t.map((gt,br)=>(gt.test_type,Ct.current.has(gt.test_name),c.jsx(dt.th,{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[100px]",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3+br*.05},children:c.jsx("div",{className:"flex flex-col space-y-1",children:c.jsx("span",{className:"text-xs",children:gt.test_name.length>10?gt.test_name.substring(0,10)+"...":gt.test_name})})},br)))]})}),c.jsx("tbody",{children:c.jsx(al,{children:Ve.map((gt,br)=>c.jsxs(dt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${br%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.1+br*.03,ease:"easeOut"},whileHover:{scale:1.005,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.995},children:[c.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-center font-semibold text-gray-900",whileHover:{scale:1.03},transition:{duration:.15},children:gt.student_id}),ye?c.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-xs w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),je(!1)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):c.jsxs(c.Fragment,{children:[c.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:gt.name}),c.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:gt.surname})]}),c.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-center text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:gt.number??br+1}),c.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-600 whitespace-normal break-words",whileHover:{scale:1.01},transition:{duration:.15},children:gt.nickname||"-"}),$t.map((jt,Ur)=>{const Pn=ke.has(jt.test_name),Ue=gt[jt.test_name];return Pn?c.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:pr=>{pr.preventDefault(),pr.stopPropagation(),Fr(jt.test_name)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},Ur):c.jsx(dt.td,{className:"border-b border-gray-100 px-3 py-3 text-sm",whileHover:{scale:1.01},transition:{duration:.15},onClick:pr=>{console.debug("[TeacherResults] TD clicked",{testResult:Ue,student:gt.student_id});const sr=Ue?.test_type||jt?.test_type;if(sr==="drawing"||sr==="speaking")return;const fs=l(Ue),gn=fs!==null&&fs<50;if(Ue?.retest_offered===!0&&(sr==="multiple_choice"||sr==="true_false"||sr==="input")){Rr(Ue,jt);return}if(sr==="fill_blanks"||sr==="matching_type"||sr==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked (nested table)",{testType:sr,isRed:gn,testResult:Ue}),gn){if(Ue?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:gt.student_id}),n({failedStudentIds:[gt.student_id],test_type:Ue.test_type,original_test_id:Ue.test_id,subject_id:Ue.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal (nested table)",{testResult:Ue}),Tt({isOpen:!0,testResult:Ue});else if(gn){if(Ue?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:gt.student_id}),n({failedStudentIds:[gt.student_id],test_type:Ue.test_type,original_test_id:Ue.test_id,subject_id:Ue.subject_id,grade:t,class:r})}else Rr(Ue,jt)},children:Ue&&(Ue.test_type==="drawing"||jt.test_type==="drawing"||Ue.test_type==="speaking"||jt.test_type==="speaking"||Ue.score!==null&&Ue.score!==void 0)?c.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[Ue.test_type==="drawing"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Kn(Ue),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View"}),Ct.current.has(jt.test_name)?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:Ue.max_score||100,value:fr.current[jt.test_name]?.[gt.student_id]?.score||Ue.score||"",onChange:pr=>li(jt.test_name,gt.student_id,"score",pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",min:"1",value:fr.current[jt.test_name]?.[gt.student_id]?.maxScore||Ue.max_score||100,onChange:pr=>li(jt.test_name,gt.student_id,"maxScore",pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):(()=>{const pr=l(Ue),sr=pr!==null&&pr<50,fs=pr!==null&&pr>=50&&pr<70,gn=Ue.retest_offered,nn=pr===null?"text-gray-600":sr?"text-red-600 font-semibold":fs?"text-yellow-600":"text-green-600";return c.jsxs(dt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${nn} cursor-pointer hover:opacity-90 ${gn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>is(jt.test_name),onClick:pn=>{pn.preventDefault(),pn.stopPropagation();const bn=Ue?.test_type||jt?.test_type;if(!(bn==="drawing"||bn==="speaking")){if(Ue?.retest_offered===!0&&(bn==="multiple_choice"||bn==="true_false"||bn==="input")){Rr(Ue,jt);return}if(sr){if(Ue?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r})}else Rr(Ue,jt)}},title:gn?"Click to view retest answers":sr?"Offer retest":"Click to view answers",children:[c.jsx("span",{className:sr?"text-red-700":"",children:Ue.score}),"/",c.jsx("span",{children:Ue.max_score}),Ue.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})()]}):Ue.test_type==="speaking"||jt.test_type==="speaking"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Se({...Ue,__studentId:gt.student_id},"audio"),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View Audio"}),At&&At.resultId===Ue.result_id?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:Ue.max_score||100,value:hr,onChange:pr=>Ye(pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("button",{onClick:()=>Hn(),disabled:ft,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:ft?"Saving...":"Save"}),c.jsx("button",{onClick:()=>Nn(),disabled:ft,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):(()=>{const pr=l(Ue),sr=pr!==null&&pr<50,fs=pr!==null&&pr>=50&&pr<70,gn=Ue.retest_offered,nn=pr===null?"text-gray-600":sr?"text-red-600 font-semibold":fs?"text-yellow-600":"text-green-600";return c.jsxs(dt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${nn} cursor-pointer hover:opacity-90 ${gn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>{Kt({resultId:Ue.result_id,score:Ue.score}),Ye(Ue.score?.toString()||"")},onClick:pn=>{pn.preventDefault(),pn.stopPropagation();const bn=Ue?.test_type||jt?.test_type;if(!(bn==="drawing"||bn==="speaking")){if(Ue?.retest_offered===!0&&(bn==="multiple_choice"||bn==="true_false"||bn==="input")){Rr(Ue,jt);return}if(sr){if(Ue?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r})}else Rr(Ue,jt)}},title:gn?"Click to view retest answers":sr?"Offer retest":"Click to view answers, double-click to edit score",children:[c.jsx("span",{className:sr?"text-red-700":"",children:Ue.score||0}),"/",c.jsx("span",{children:Ue.max_score||100}),Ue.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})()]}):(()=>{const pr=l(Ue),sr=pr!==null&&pr<50,fs=pr!==null&&pr>=50&&pr<70,gn=pr!==null&&pr>=70,nn=Ue?.retest_offered===!0;console.debug("[TeacherResults] Render pill",{studentId:gt.student_id,pct:pr,isRed:sr,isYellow:fs,isGreen:gn,score:Ue.score,max:Ue.max_score,percentageField:Ue.percentage});const bn=`px-1 py-0.5 rounded text-xs font-medium ${pr===null?"text-gray-600":sr?"text-red-600 font-semibold":fs?"text-yellow-600":"text-green-600"} cursor-pointer hover:opacity-90 pointer-events-auto ${nn?"bg-blue-50 text-blue-700 border border-blue-200":""}`;return c.jsxs(dt.div,{className:bn,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onClick:Hl=>{Hl.preventDefault(),Hl.stopPropagation();const Ni=Ue?.test_type||jt?.test_type;if(!(Ni==="drawing"||Ni==="speaking")){if(Ue?.retest_offered===!0&&(Ni==="multiple_choice"||Ni==="true_false"||Ni==="input")){Rr(Ue,jt);return}if(sr){if(Ue?.retest_offered){o("Retest is already offered","info");return}const lh=window.getComputedStyle(Hl.currentTarget).color;console.debug("[TeacherResults] Red pill clicked -> opening retest modal",{studentId:gt.student_id,className:bn,computedColor:lh}),n({failedStudentIds:[gt.student_id],test_type:jt.test_type,original_test_id:Ue?.test_id||jt.test_id,subject_id:Ue?.subject_id||jt.subject_id,grade:t,class:r})}else Rr(Ue,jt)}},title:nn?"Click to view retest answers":sr?"Offer retest":"Click to view answers",children:[c.jsx("span",{className:sr?"text-red-700":"",children:Ue.score}),"/",c.jsx("span",{children:Ue.max_score}),Ue.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),Ue.caught_cheating&&Ue.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",Ue.visibility_change_times,")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})},Ur)})]},br))})})]})})})}),[oi,ke,Fr,ye]),Le=_.useCallback(()=>{if(!L)return null;console.log(" renderResults - results:",L),console.log(" renderResults - results.class:",L.class),console.log(" renderResults - results.unique_tests:",L.unique_tests);const De=L.class&&Array.isArray(L.class)&&L.class.length>0;if(console.log(" renderResults - hasStudentData:",De),!De)return console.log(" renderResults - No student data, showing no students message"),c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No students found for this class and semester."})});const Ve=L.unique_tests||[];return console.log(" renderResults - uniqueTests:",Ve),Er.current=L,c.jsxs("div",{className:"space-y-6",children:[c.jsxs(dt.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[c.jsxs(dt.h2,{className:"text-2xl font-bold mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},children:["Test Results - Grade M",z,", Class ",z,"/",G,", Semester ",T]}),c.jsxs(dt.p,{className:"text-cyan-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:["Viewing results for ",L.subjects?.length||0," subject(s)"]}),c.jsxs(dt.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[c.jsx("button",{onClick:()=>{const $t=L.unique_tests?.map(gt=>gt.test_name)||[];le(new Set($t))},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Collapse All Tests"}),c.jsx("button",{onClick:()=>le(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Expand All Tests"})]})]}),c.jsxs(dt.div,{className:"bg-white rounded-lg shadow p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[c.jsx(dt.h3,{className:"text-lg font-semibold text-gray-900 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:"Class Results"}),c.jsx("div",{className:"hidden md:block",children:cn("All Subjects",L.class,Ve)}),c.jsx("div",{className:"md:hidden",children:gl("All Subjects",L.class,Ve)})]})]})},[L,cn,z,G,T]),Dt=_.useCallback(()=>{if(!L||!L.class||!L.unique_tests)return;const De=["Student ID","Name","Surname","No.","Nickname",...L.unique_tests.map(Ur=>Ur.test_name)],Ve=L.class.map((Ur,Pn)=>{const Ue=[];return Ue.push(Ur.student_id),Ue.push(Ur.name),Ue.push(Ur.surname),Ue.push(Ur.number??Pn+1),Ue.push(Ur.nickname||"-"),L.unique_tests.forEach(pr=>{const sr=Ur[pr.test_name];sr&&sr.score!==null&&sr.score!==void 0?Ue.push(`${sr.score}/${sr.max_score}`):Ue.push("-")}),Ue}),$t=Xb.aoa_to_sheet([De,...Ve]),gt=Xb.book_new(),br=[{wch:10},{wch:15},{wch:15},{wch:6},{wch:12},...L.unique_tests.map(()=>({wch:15}))];$t["!cols"]=br,Xb.book_append_sheet(gt,$t,"Class Results");const jt=`class-results-${z}-${G}-semester-${T}.xlsx`;$be(gt,jt),o("Excel file exported successfully!","success")},[L,z,G,T,o]);return f?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Results..."})]})}):g?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:g}),c.jsx(tt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"flex justify-between items-center py-4",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Results"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",ee?ee.toLocaleString():"Never"]})]})})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class"}),M.length>0?(()=>{const De=M.reduce((Ve,$t)=>{const gt=$t.subject||"Unknown Subject";return Ve[gt]||(Ve[gt]=[]),Ve[gt].push($t),Ve},{});return c.jsx("div",{className:"space-y-6",children:Object.entries(De).map(([Ve,$t])=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-3 flex flex-col sm:flex-row sm:items-center items-center",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),Ve]}),c.jsxs("span",{className:"ml-0 sm:ml-2 text-sm text-gray-500 mt-1 sm:mt-0",children:["(",$t.length," classes)"]})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:$t.map((gt,br)=>c.jsxs(tt,{variant:z===gt.grade&&G===gt.class?"primary":"outline",onClick:()=>as(gt.grade,gt.class),className:"px-3 py-1 text-xs font-medium min-w-[60px]",children:[gt.grade,"/",gt.class]},`${gt.grade}-${gt.class}-${br}`))})]},Ve))})})():c.jsx("p",{className:"text-gray-500",children:"No classes available"})]}),G&&Tn(),G&&L&&c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[z," ",G," - Test Results ",Ne?`(Term ${$e?.terms.find(De=>De.id===Ne)?.term})`:""]}),c.jsx("div",{className:"flex space-x-3",children:c.jsxs("button",{type:"button",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",onClick:Dt,children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-4 h-4 object-contain"}),c.jsx("span",{className:"font-medium text-sm",children:"Export Excel"})]})})]}),Le()]}),G&&!L&&c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-200 border-t-blue-500"}),c.jsx("span",{className:"text-gray-600",children:"Loading results"})]})})})]})}),wt&&it&&c.jsx(db,{children:c.jsx(mH,{drawing:wt,isOpen:it,onClose:()=>vt(!1),isTeacherView:!0,onSaveScore:async({resultId:De,score:Ve,maxScore:$t})=>{try{const gt=await(window.tokenManager?.getToken()||oa.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Wd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:gt?`Bearer ${gt}`:""},body:JSON.stringify({resultId:De,score:Ve,maxScore:$t})})).ok)throw new Error("Failed to save");await Kr(T,!0)}catch{o("Failed to save drawing score","error")}}})}),c.jsx(db,{children:c.jsx(K0e,{onScoreUpdate:De=>{G&&Kr(T,!0),rt&&bt(Ve=>({...Ve,score:De.score,max_score:De.maxScore,percentage:De.percentage}))},isOpen:he,onClose:()=>{Ae(!1),bt(null),ue(null)},testResult:rt,questions:at,isLoadingQuestions:Ie})}),c.jsx(db,{children:c.jsx(Y0e,{isOpen:mt.isOpen,onClose:()=>Tt({isOpen:!1,testResult:null}),testResult:mt.testResult,onScoreUpdate:De=>{G&&Kr(T,!0)}})}),st&&ot&&c.jsx(db,{children:c.jsx(q0e,{result:st,isOpen:ot,onClose:()=>kt(!1),initialTab:st.__initialTab||"overview",editingSpeakingScore:At,tempSpeakingScore:hr,isSavingSpeakingScore:ft,onStartSpeakingScoreEdit:Xr,onSaveSpeakingScore:Hn,onCancelSpeakingScoreEdit:Nn,onTempSpeakingScoreChange:Ye})})]})},Jbe={getTestPerformance:async(e,t=null)=>{try{await cu.loadAcademicCalendar();const n=cu.getCurrentTerm()?.id;if(!n)throw new Error("No current academic period found");console.log(` Fetching test performance for teacher ${e}, period ${n}, class: ${t||"all"}`);let s=`/.netlify/functions/get-test-performance?teacher_id=${e}&academic_period_id=${n}`;if(t){const[o,l]=t.split("/"),u=o.startsWith("M")?o:`M${o}`;s+=`&grade=${u}&class=${l}`}const a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch performance data");return console.log(` Performance data loaded: ${i.count} tests`),i.data}catch(r){throw console.error(" Error fetching test performance:",r),r}}};function EV(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=EV(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ps(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=EV(e))&&(n&&(n+=" "),n+=t);return n}var J5={},Q5={},pO;function Qbe(){return pO||(pO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Q5)),Q5}var Z5={},xO;function NV(){return xO||(xO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Z5)),Z5}var e6={},yO;function AV(){return yO||(yO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(e6)),e6}var t6={},vO;function OE(){return vO||(vO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let a=0,i="",o="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<s;){const u=r[a];o?u==="\\"&&a+1<s?(a++,i+=r[a]):u===o?o="":i+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,n.push(i),i=""):i+=u:u==="["?(l=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,a++}return i&&n.push(i),n}e.toPath=t})(t6)),t6}var wO;function RE(){return wO||(wO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qbe(),r=NV(),n=AV(),s=OE();function a(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?r.isDeepKey(l)?a(o,s.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return i(o,l,u);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function i(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=a})(J5)),J5}var r6,bO;function Zbe(){return bO||(bO=1,r6=RE().get),r6}var e4e=Zbe();const x3=Nc(e4e);var n6={exports:{}},Xn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O;function t4e(){if(_O)return Xn;_O=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function b(N){if(typeof N=="object"&&N!==null){var P=N.$$typeof;switch(P){case t:switch(N=N.type,N){case l:case u:case n:case a:case s:case f:return N;default:switch(N=N&&N.$$typeof,N){case o:case d:case x:case g:case i:return N;default:return P}}case r:return P}}}function E(N){return b(N)===u}return Xn.AsyncMode=l,Xn.ConcurrentMode=u,Xn.ContextConsumer=o,Xn.ContextProvider=i,Xn.Element=t,Xn.ForwardRef=d,Xn.Fragment=n,Xn.Lazy=x,Xn.Memo=g,Xn.Portal=r,Xn.Profiler=a,Xn.StrictMode=s,Xn.Suspense=f,Xn.isAsyncMode=function(N){return E(N)||b(N)===l},Xn.isConcurrentMode=E,Xn.isContextConsumer=function(N){return b(N)===o},Xn.isContextProvider=function(N){return b(N)===i},Xn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},Xn.isForwardRef=function(N){return b(N)===d},Xn.isFragment=function(N){return b(N)===n},Xn.isLazy=function(N){return b(N)===x},Xn.isMemo=function(N){return b(N)===g},Xn.isPortal=function(N){return b(N)===r},Xn.isProfiler=function(N){return b(N)===a},Xn.isStrictMode=function(N){return b(N)===s},Xn.isSuspense=function(N){return b(N)===f},Xn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===u||N===a||N===s||N===f||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===x||N.$$typeof===g||N.$$typeof===i||N.$$typeof===o||N.$$typeof===d||N.$$typeof===v||N.$$typeof===T||N.$$typeof===k||N.$$typeof===y)},Xn.typeOf=b,Xn}var SO;function r4e(){return SO||(SO=1,n6.exports=t4e()),n6.exports}r4e();var pc=e=>e===0?0:e>0?1:-1,Tc=e=>typeof e=="number"&&e!=+e,em=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,an=e=>(typeof e=="number"||e instanceof Number)&&!Tc(e),Zu=e=>an(e)||typeof e=="string",n4e=0,$v=e=>{var t=++n4e;return"".concat(e||"").concat(t)},Vf=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!an(t)&&typeof t!="string")return n;var a;if(em(t)){if(r==null)return n;var i=t.indexOf("%");a=r*parseFloat(t.slice(0,i))/100}else a=+t;return Tc(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},jV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Hd(e,t,r){return an(e)&&an(t)?e+r*(t-e):t}function PV(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):x3(n,t))===r)}var ki=e=>e===null||typeof e>"u",IE=e=>ki(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),s4e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function LE(e){if(typeof e!="string")return!1;var t=s4e;return t.includes(e)}var a4e=["viewBox","children"],kO=["points","pathLength"],s6={svg:a4e,polygon:kO,polyline:kO},BE=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{LE(s)&&(n[s]=(a=>r[s](r,a)))}),n},i4e=(e,t,r)=>n=>(e(t,r,n),null),o4e=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];LE(s)&&typeof a=="function"&&(n||(n={}),n[s]=i4e(a,t,r))}),n},l4e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function MV(e){if(typeof e!="string")return!1;var t=l4e;return t.includes(e)}function tg(e){var t=Object.entries(e).filter(r=>{var[n]=r;return MV(n)});return Object.fromEntries(t)}var FV=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,c4e=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(s=n&&s6?.[n])!==null&&s!==void 0?s:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&a.includes(t)||MV(t)),l=!!r&&LE(t);return i||o||l},Ji=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(_.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(a=>{var i;c4e((i=n)===null||i===void 0?void 0:i[a],a,t,r)&&(s[a]=n[a])}),s},u4e=["children","width","height","viewBox","className","style","title","desc"];function eT(){return eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eT.apply(null,arguments)}function d4e(e,t){if(e==null)return{};var r,n,s=f4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function f4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var DV=_.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:i,style:o,title:l,desc:u}=e,d=d4e(e,u4e),f=a||{width:n,height:s,x:0,y:0},h=Ps("recharts-surface",i);return _.createElement("svg",eT({},Ji(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),_.createElement("title",null,l),_.createElement("desc",null,u),r)}),h4e=["children","className"];function tT(){return tT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tT.apply(null,arguments)}function m4e(e,t){if(e==null)return{};var r,n,s=g4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function g4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var T1=_.forwardRef((e,t)=>{var{children:r,className:n}=e,s=m4e(e,h4e),a=Ps("recharts-layer",n);return _.createElement("g",tT({className:a},Ji(s,!0),{ref:t}),r)}),p4e=_.createContext(null);function aa(e){return function(){return e}}const rT=Math.PI,nT=2*rT,Gh=1e-6,x4e=nT-Gh;function OV(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function y4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return OV;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class v4e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?OV:y4e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,l=n-t,u=s-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Gh)if(!(Math.abs(f*l-u*d)>Gh)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-i,x=s-o,y=l*l+u*u,v=g*g+x*x,T=Math.sqrt(y),k=Math.sqrt(h),b=a*Math.tan((rT-Math.acos((y+h-v)/(2*T*k)))/2),E=b/k,N=b/T;Math.abs(E-1)>Gh&&this._append`L${t+E*d},${r+E*f}`,this._append`A${a},${a},0,0,${+(f*g>d*x)},${this._x1=t+N*l},${this._y1=r+N*u}`}}arc(t,r,n,s,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),l=n*Math.sin(s),u=t+o,d=r+l,f=1^i,h=i?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Gh||Math.abs(this._y1-d)>Gh)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%nT+nT),h>x4e?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Gh&&this._append`A${n},${n},0,${+(h>=rT)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function RV(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new v4e(t)}function $E(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function IV(e){this._context=e}IV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function y3(e){return new IV(e)}function LV(e){return e[0]}function BV(e){return e[1]}function $V(e,t){var r=aa(!0),n=null,s=y3,a=null,i=RV(o);e=typeof e=="function"?e:e===void 0?LV:aa(e),t=typeof t=="function"?t:t===void 0?BV:aa(t);function o(l){var u,d=(l=$E(l)).length,f,h=!1,g;for(n==null&&(a=s(g=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,u,l),+t(f,u,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:aa(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:aa(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:aa(!!l),o):r},o.curve=function(l){return arguments.length?(s=l,n!=null&&(a=s(n)),o):s},o.context=function(l){return arguments.length?(l==null?n=a=null:a=s(n=l),o):n},o}function Sb(e,t,r){var n=null,s=aa(!0),a=null,i=y3,o=null,l=RV(u);e=typeof e=="function"?e:e===void 0?LV:aa(+e),t=typeof t=="function"?t:aa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?BV:aa(+r);function u(f){var h,g,x,y=(f=$E(f)).length,v,T=!1,k,b=new Array(y),E=new Array(y);for(a==null&&(o=i(k=l())),h=0;h<=y;++h){if(!(h<y&&s(v=f[h],h,f))===T)if(T=!T)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=h-1;x>=g;--x)o.point(b[x],E[x]);o.lineEnd(),o.areaEnd()}T&&(b[h]=+e(v,h,f),E[h]=+t(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):E[h]))}if(k)return o=null,k+""||null}function d(){return $V().defined(s).curve(i).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:aa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:aa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:aa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:aa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:aa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:aa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:aa(!!f),u):s},u.curve=function(f){return arguments.length?(i=f,a!=null&&(o=i(a)),u):i},u.context=function(f){return arguments.length?(f==null?a=o=null:o=i(a=f),u):a},u}class zV{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function w4e(e){return new zV(e,!0)}function b4e(e){return new zV(e,!1)}function q4(){}function K4(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function UV(e){this._context=e}UV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:K4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:K4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _4e(e){return new UV(e)}function WV(e){this._context=e}WV.prototype={areaStart:q4,areaEnd:q4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:K4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S4e(e){return new WV(e)}function HV(e){this._context=e}HV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:K4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function k4e(e){return new HV(e)}function GV(e){this._context=e}GV.prototype={areaStart:q4,areaEnd:q4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function T4e(e){return new GV(e)}function TO(e){return e<0?-1:1}function CO(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(TO(a)+TO(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function EO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function a6(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function Y4(e){this._context=e}Y4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a6(this,this._t0,EO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,a6(this,EO(this,r=CO(this,e,t)),r);break;default:a6(this,this._t0,r=CO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function VV(e){this._context=new qV(e)}(VV.prototype=Object.create(Y4.prototype)).point=function(e,t){Y4.prototype.point.call(this,t,e)};function qV(e){this._context=e}qV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function C4e(e){return new Y4(e)}function E4e(e){return new VV(e)}function KV(e){this._context=e}KV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=NO(e),s=NO(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function NO(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),i=new Array(r);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function N4e(e){return new KV(e)}function v3(e,t){this._context=e,this._t=t}v3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function A4e(e){return new v3(e,.5)}function j4e(e){return new v3(e,0)}function P4e(e){return new v3(e,1)}function Yp(e,t){if((i=e.length)>1)for(var r=1,n,s,a=e[t[0]],i,o=a.length;r<i;++r)for(s=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function sT(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function M4e(e,t){return e[t]}function F4e(e){const t=[];return t.key=e,t}function D4e(){var e=aa([]),t=sT,r=Yp,n=M4e;function s(a){var i=Array.from(e.apply(this,arguments),F4e),o,l=i.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(i[o][u]=[0,+n(f,i[o].key,u,a)]).data=f;for(o=0,d=$E(t(i));o<l;++o)i[d[o]].index=o;return r(i,d),i}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:aa(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:aa(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?sT:typeof a=="function"?a:aa(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Yp,s):r},s}function O4e(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,i;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}Yp(e,t)}}function R4e(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Yp(e,t)}}function I4e(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,i;n<a;++n){for(var o=0,l=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,g=(f-h)/2,x=0;x<o;++x){var y=e[t[x]],v=y[n][1]||0,T=y[n-1][1]||0;g+=v-T}l+=f,u+=g*f}s[n-1][1]+=s[n-1][0]=r,l&&(r-=u/l)}s[n-1][1]+=s[n-1][0]=r,Yp(e,t)}}var i6={},o6={},AO;function L4e(){return AO||(AO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const i=r[a],o=n(i);s.has(o)||s.set(o,i)}return Array.from(s.values())}e.uniqBy=t})(o6)),o6}var l6={},jO;function YV(){return jO||(jO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(l6)),l6}var c6={},u6={},d6={},PO;function B4e(){return PO||(PO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(d6)),d6}var MO;function zE(){return MO||(MO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B4e();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(u6)),u6}var f6={},FO;function $4e(){return FO||(FO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(f6)),f6}var DO;function z4e(){return DO||(DO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zE(),r=$4e();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(c6)),c6}var h6={},m6={},OO;function U4e(){return OO||(OO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RE();function r(n){return function(s){return t.get(s,n)}}e.property=r})(m6)),m6}var g6={},p6={},x6={},y6={},RO;function XV(){return RO||(RO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(y6)),y6}var v6={},IO;function JV(){return IO||(IO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(v6)),v6}var w6={},LO;function QV(){return LO||(LO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(w6)),w6}var BO;function W4e(){return BO||(BO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UE(),r=XV(),n=JV(),s=QV();function a(f,h,g){return typeof g!="function"?t.isMatch(f,h):i(f,h,function x(y,v,T,k,b,E){const N=g(y,v,T,k,b,E);return N!==void 0?!!N:i(y,v,x,E)},new Map)}function i(f,h,g,x){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,g,x);case"function":return Object.keys(h).length>0?i(f,{...h},g,x):s.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:s.eq(f,h)}}function o(f,h,g,x){if(h==null)return!0;if(Array.isArray(h))return u(f,h,g,x);if(h instanceof Map)return l(f,h,g,x);if(h instanceof Set)return d(f,h,g,x);const y=Object.keys(h);if(f==null)return y.length===0;if(y.length===0)return!0;if(x&&x.has(h))return x.get(h)===f;x&&x.set(h,f);try{for(let v=0;v<y.length;v++){const T=y[v];if(!n.isPrimitive(f)&&!(T in f)||h[T]===void 0&&f[T]!==void 0||h[T]===null&&f[T]!==null||!g(f[T],h[T],T,f,h,x))return!1}return!0}finally{x&&x.delete(h)}}function l(f,h,g,x){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,v]of h.entries()){const T=f.get(y);if(g(T,v,y,f,h,x)===!1)return!1}return!0}function u(f,h,g,x){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let v=0;v<h.length;v++){const T=h[v];let k=!1;for(let b=0;b<f.length;b++){if(y.has(b))continue;const E=f[b];let N=!1;if(g(E,T,v,f,h,x)&&(N=!0),N){y.add(b),k=!0;break}}if(!k)return!1}return!0}function d(f,h,g,x){return h.size===0?!0:f instanceof Set?u([...f],[...h],g,x):!1}e.isMatchWith=a,e.isSetMatch=d})(x6)),x6}var $O;function UE(){return $O||($O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W4e();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(p6)),p6}var b6={},_6={},S6={},zO;function H4e(){return zO||(zO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(S6)),S6}var k6={},UO;function ZV(){return UO||(UO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(k6)),k6}var T6={},WO;function eq(){return WO||(WO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",i="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",g="[object Object]",x="[object Error]",y="[object DataView]",v="[object Uint8Array]",T="[object Uint8ClampedArray]",k="[object Uint16Array]",b="[object Uint32Array]",E="[object BigUint64Array]",N="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",j="[object BigInt64Array]",A="[object Float32Array]",F="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=j,e.bigUint64ArrayTag=E,e.booleanTag=s,e.dataViewTag=y,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=A,e.float64ArrayTag=F,e.functionTag=f,e.int16ArrayTag=P,e.int32ArrayTag=M,e.int8ArrayTag=N,e.mapTag=l,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=k,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=T})(T6)),T6}var C6={},HO;function G4e(){return HO||(HO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(C6)),C6}var GO;function tq(){return GO||(GO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H4e(),r=ZV(),n=eq(),s=JV(),a=G4e();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,g=new Map,x=void 0){const y=x?.(d,f,h,g);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const v=new Array(d.length);g.set(d,v);for(let T=0;T<d.length;T++)v[T]=o(d[T],T,h,g,x);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;g.set(d,v);for(const[T,k]of d)v.set(T,o(k,T,h,g,x));return v}if(d instanceof Set){const v=new Set;g.set(d,v);for(const T of d)v.add(o(T,void 0,h,g,x));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,v);for(let T=0;T<d.length;T++)v[T]=o(d[T],T,h,g,x);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,v),l(v,d,h,g,x),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return g.set(d,v),l(v,d,h,g,x),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return g.set(d,v),l(v,d,h,g,x),v}if(d instanceof Error){const v=new d.constructor;return g.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,l(v,d,h,g,x),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return g.set(d,v),l(v,d,h,g,x),v}return d}function l(d,f,h=d,g,x){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const T=y[v],k=Object.getOwnPropertyDescriptor(d,T);(k==null||k.writable)&&(d[T]=o(f[T],T,h,g,x))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=l})(_6)),_6}var VO;function V4e(){return VO||(VO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tq();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(b6)),b6}var qO;function q4e(){return qO||(qO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UE(),r=V4e();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(g6)),g6}var E6={},N6={},A6={},KO;function K4e(){return KO||(KO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tq(),r=eq();function n(s,a){return t.cloneDeepWith(s,(i,o,l,u)=>{const d=a?.(i,o,l,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s?.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(A6)),A6}var YO;function Y4e(){return YO||(YO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K4e();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(N6)),N6}var j6={},P6={},XO;function rq(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(P6)),P6}var M6={},JO;function X4e(){return JO||(JO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZV();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(M6)),M6}var QO;function J4e(){return QO||(QO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NV(),r=rq(),n=X4e(),s=OE();function a(i,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&i?.[o]==null?l=s.toPath(o):l=[o],l.length===0)return!1;let u=i;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(j6)),j6}var ZO;function Q4e(){return ZO||(ZO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UE(),r=AV(),n=Y4e(),s=RE(),a=J4e();function i(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const d=s.get(u,o);return d===void 0?a.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=i})(E6)),E6}var eR;function Z4e(){return eR||(eR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YV(),r=U4e(),n=q4e(),s=Q4e();function a(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?s.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=a})(h6)),h6}var tR;function e_e(){return tR||(tR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L4e(),r=YV(),n=z4e(),s=Z4e();function a(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),s.iteratee(o)):[]}e.uniqBy=a})(i6)),i6}var F6,rR;function t_e(){return rR||(rR=1,F6=e_e().uniqBy),F6}var r_e=t_e();const nR=Nc(r_e);function n_e(e,t,r){return t===!0?nR(e,r):typeof t=="function"?nR(e,t):e}var D6={exports:{}},O6={},R6={exports:{}},I6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sR;function s_e(){if(sR)return I6;sR=1;var e=Wm();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var g=h(),x=n({inst:{value:g,getSnapshot:h}}),y=x[0].inst,v=x[1];return a(function(){y.value=g,y.getSnapshot=h,l(y)&&v({inst:y})},[f,g,h]),s(function(){return l(y)&&v({inst:y}),f(function(){l(y)&&v({inst:y})})},[f]),i(g),g}function l(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!r(f,g)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return I6.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,I6}var aR;function a_e(){return aR||(aR=1,R6.exports=s_e()),R6.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR;function i_e(){if(iR)return O6;iR=1;var e=Wm(),t=a_e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return O6.useSyncExternalStoreWithSelector=function(u,d,f,h,g){var x=a(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=o(function(){function T(P){if(!k){if(k=!0,b=P,P=h(P),g!==void 0&&y.hasValue){var M=y.value;if(g(M,P))return E=M}return E=P}if(M=E,n(b,P))return M;var j=h(P);return g!==void 0&&g(M,j)?(b=P,M):(b=P,E=j)}var k=!1,b,E,N=f===void 0?null:f;return[function(){return T(d())},N===null?void 0:function(){return T(N())}]},[d,f,h,g]);var v=s(u,x[0],x[1]);return i(function(){y.hasValue=!0,y.value=v},[v]),l(v),v},O6}var oR;function o_e(){return oR||(oR=1,D6.exports=i_e()),D6.exports}var l_e=o_e(),WE=_.createContext(null),c_e=e=>e,Go=()=>{var e=_.useContext(WE);return e?e.store.dispatch:c_e},Jb=()=>{},u_e=()=>Jb,d_e=(e,t)=>e===t;function qr(e){var t=_.useContext(WE);return l_e.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:u_e,t?t.store.getState:Jb,t?t.store.getState:Jb,t?e:Jb,d_e)}function f_e(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function h_e(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function m_e(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var lR=e=>Array.isArray(e)?e:[e];function g_e(e){const t=Array.isArray(e[0])?e[0]:e;return m_e(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function p_e(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var x_e=class{constructor(e){this.value=e}deref(){return this.value}},y_e=typeof WeakRef<"u"?WeakRef:x_e,v_e=0,cR=1;function kb(){return{s:v_e,v:void 0,o:null,p:null}}function nq(e,t={}){let r=kb();const{resultEqualityCheck:n}=t;let s,a=0;function i(){let o=r;const{length:l}=arguments;for(let f=0,h=l;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const y=x.get(g);y===void 0?(o=kb(),x.set(g,o)):o=y}else{let x=o.p;x===null&&(o.p=x=new Map);const y=x.get(g);y===void 0?(o=kb(),x.set(g,o)):o=y}}const u=o;let d;if(o.s===cR)d=o.v;else if(d=e.apply(null,arguments),a++,n){const f=s?.deref?.()??s;f!=null&&n(f,d)&&(d=f,a!==0&&a--),s=typeof d=="object"&&d!==null||typeof d=="function"?new y_e(d):d}return u.s=cR,u.v=d,d}return i.clearCache=()=>{r=kb(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function w_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,i=0,o,l={},u=s.pop();typeof u=="object"&&(l=u,u=s.pop()),f_e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:g=nq,argsMemoizeOptions:x=[]}=d,y=lR(h),v=lR(x),T=g_e(s),k=f(function(){return a++,u.apply(null,arguments)},...y),b=g(function(){i++;const N=p_e(T,arguments);return o=k.apply(null,N),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:k,dependencies:T,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var Bt=w_e(nq),b_e=Object.assign((e,t=Bt)=>{h_e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,o,l)=>(i[r[l]]=o,i),{}))},{withTypes:()=>b_e}),L6={},B6={},$6={},uR;function __e(){return uR||(uR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const i=t(n),o=t(s);if(i===o&&i===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?o-i:i-o}return 0};e.compareValues=r})($6)),$6}var z6={},U6={},dR;function sq(){return dR||(dR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(U6)),U6}var fR;function S_e(){return fR||(fR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sq(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,i){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||i!=null&&Object.hasOwn(i,a)}e.isKey=s})(z6)),z6}var hR;function k_e(){return hR||(hR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=__e(),r=S_e(),n=OE();function s(a,i,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const u=(g,x)=>{let y=g;for(let v=0;v<x.length&&y!=null;++v)y=y[x[v]];return y},d=(g,x)=>x==null||g==null?x:typeof g=="object"&&"key"in g?Object.hasOwn(x,g.key)?x[g.key]:u(x,g.path):typeof g=="function"?g(x):Array.isArray(g)?u(x,g):typeof x=="object"?x[g]:x,f=i.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return a.map(g=>({original:g,criteria:f.map(x=>d(x,g))})).slice().sort((g,x)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(g.criteria[y],x.criteria[y],o[y]);if(v!==0)return v}return 0}).map(g=>g.original)}e.orderBy=s})(B6)),B6}var W6={},mR;function T_e(){return mR||(mR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),i=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<a?i(d,l+1):s.push(d)}};return i(r,0),s}e.flatten=t})(W6)),W6}var H6={},gR;function aq(){return gR||(gR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rq(),r=zE(),n=XV(),s=QV();function a(i,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?s.eq(l[o],i):!1}e.isIterateeCall=a})(H6)),H6}var pR;function C_e(){return pR||(pR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k_e(),r=T_e(),n=aq();function s(a,...i){const o=i.length;return o>1&&n.isIterateeCall(a,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(a,r.flatten(i),["asc"])}e.sortBy=s})(L6)),L6}var G6,xR;function E_e(){return xR||(xR=1,G6=C_e().sortBy),G6}var N_e=E_e();const w3=Nc(N_e);var iq=e=>e.legend.settings,A_e=e=>e.legend.size,j_e=e=>e.legend.payload;Bt([j_e,iq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?w3(n,r):n});var Tb=1;function P_e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),n=_.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),i={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(i.height-t.height)>Tb||Math.abs(i.left-t.left)>Tb||Math.abs(i.top-t.top)>Tb||Math.abs(i.width-t.width)>Tb)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function $i(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var M_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",yR=M_e,V6=()=>Math.random().toString(36).substring(7).split("").join("."),F_e={INIT:`@@redux/INIT${V6()}`,REPLACE:`@@redux/REPLACE${V6()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${V6()}`},X4=F_e;function HE(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function oq(e,t,r){if(typeof e!="function")throw new Error($i(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error($i(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error($i(1));return r(oq)(e,t)}let n=e,s=t,a=new Map,i=a,o=0,l=!1;function u(){i===a&&(i=new Map,a.forEach((v,T)=>{i.set(T,v)}))}function d(){if(l)throw new Error($i(3));return s}function f(v){if(typeof v!="function")throw new Error($i(4));if(l)throw new Error($i(5));let T=!0;u();const k=o++;return i.set(k,v),function(){if(T){if(l)throw new Error($i(6));T=!1,u(),i.delete(k),a=null}}}function h(v){if(!HE(v))throw new Error($i(7));if(typeof v.type>"u")throw new Error($i(8));if(typeof v.type!="string")throw new Error($i(17));if(l)throw new Error($i(9));try{l=!0,s=n(s,v)}finally{l=!1}return(a=i).forEach(k=>{k()}),v}function g(v){if(typeof v!="function")throw new Error($i(10));n=v,h({type:X4.REPLACE})}function x(){const v=f;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error($i(11));function k(){const E=T;E.next&&E.next(d())}return k(),{unsubscribe:v(k)}},[yR](){return this}}}return h({type:X4.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:g,[yR]:x}}function D_e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:X4.INIT})>"u")throw new Error($i(12));if(typeof r(void 0,{type:X4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($i(13))})}function lq(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const i=t[a];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let s;try{D_e(r)}catch(a){s=a}return function(i={},o){if(s)throw s;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],g=i[f],x=h(g,o);if(typeof x>"u")throw o&&o.type,new Error($i(14));u[f]=x,l=l||x!==g}return l=l||n.length!==Object.keys(i).length,l?u:i}}function J4(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function O_e(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error($i(15))};const i={getState:s.getState,dispatch:(l,...u)=>a(l,...u)},o=e.map(l=>l(i));return a=J4(...o)(s.dispatch),{...s,dispatch:a}}}function cq(e){return HE(e)&&"type"in e&&typeof e.type=="string"}var uq=Symbol.for("immer-nothing"),vR=Symbol.for("immer-draftable"),$l=Symbol.for("immer-state");function Zc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xp=Object.getPrototypeOf;function Lm(e){return!!e&&!!e[$l]}function h0(e){return e?dq(e)||Array.isArray(e)||!!e[vR]||!!e.constructor?.[vR]||j2(e)||_3(e):!1}var R_e=Object.prototype.constructor.toString();function dq(e){if(!e||typeof e!="object")return!1;const t=Xp(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===R_e}function Q4(e,t){b3(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function b3(e){const t=e[$l];return t?t.type_:Array.isArray(e)?1:j2(e)?2:_3(e)?3:0}function aT(e,t){return b3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fq(e,t,r){const n=b3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function I_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function j2(e){return e instanceof Map}function _3(e){return e instanceof Set}function Vh(e){return e.copy_||e.base_}function iT(e,t){if(j2(e))return new Map(e);if(_3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=dq(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[$l];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const i=s[a],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Xp(e),n)}else{const n=Xp(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function GE(e,t=!1){return S3(e)||Lm(e)||!h0(e)||(b3(e)>1&&Object.defineProperties(e,{set:{value:Cb},add:{value:Cb},clear:{value:Cb},delete:{value:Cb}}),Object.freeze(e),t&&Object.values(e).forEach(r=>GE(r,!0))),e}function Cb(){Zc(2)}function S3(e){return Object.isFrozen(e)}var L_e={};function Bm(e){const t=L_e[e];return t||Zc(0,e),t}var zv;function hq(){return zv}function B_e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wR(e,t){t&&(Bm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function oT(e){lT(e),e.drafts_.forEach($_e),e.drafts_=null}function lT(e){e===zv&&(zv=e.parent_)}function bR(e){return zv=B_e(zv,e)}function $_e(e){const t=e[$l];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _R(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[$l].modified_&&(oT(t),Zc(4)),h0(e)&&(e=Z4(t,e),t.parent_||e_(t,e)),t.patches_&&Bm("Patches").generateReplacementPatches_(r[$l].base_,e,t.patches_,t.inversePatches_)):e=Z4(t,r,[]),oT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==uq?e:void 0}function Z4(e,t,r){if(S3(t))return t;const n=t[$l];if(!n)return Q4(t,(s,a)=>SR(e,n,t,s,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return e_(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let a=s,i=!1;n.type_===3&&(a=new Set(s),s.clear(),i=!0),Q4(a,(o,l)=>SR(e,n,s,o,l,r,i)),e_(e,s,!1),r&&e.patches_&&Bm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function SR(e,t,r,n,s,a,i){if(Lm(s)){const o=a&&t&&t.type_!==3&&!aT(t.assigned_,n)?a.concat(n):void 0,l=Z4(e,s,o);if(fq(r,n,l),Lm(l))e.canAutoFreeze_=!1;else return}else i&&r.add(s);if(h0(s)&&!S3(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Z4(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(j2(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&e_(e,s)}}function e_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&GE(t,r)}function z_e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:hq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=VE;r&&(s=[n],a=Uv);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return n.draft_=o,n.revoke_=i,o}var VE={get(e,t){if(t===$l)return e;const r=Vh(e);if(!aT(r,t))return U_e(e,r,t);const n=r[t];return e.finalized_||!h0(n)?n:n===q6(e.base_,t)?(K6(e),e.copy_[t]=uT(n,e)):n},has(e,t){return t in Vh(e)},ownKeys(e){return Reflect.ownKeys(Vh(e))},set(e,t,r){const n=mq(Vh(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=q6(Vh(e),t),a=s?.[$l];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(I_e(r,s)&&(r!==void 0||aT(e.base_,t)))return!0;K6(e),cT(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return q6(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,K6(e),cT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Vh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Zc(11)},getPrototypeOf(e){return Xp(e.base_)},setPrototypeOf(){Zc(12)}},Uv={};Q4(VE,(e,t)=>{Uv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Uv.deleteProperty=function(e,t){return Uv.set.call(this,e,t,void 0)};Uv.set=function(e,t,r){return VE.set.call(this,e[0],t,r,e[0])};function q6(e,t){const r=e[$l];return(r?Vh(r):e)[t]}function U_e(e,t,r){const n=mq(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function mq(e,t){if(!(t in e))return;let r=Xp(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Xp(r)}}function cT(e){e.modified_||(e.modified_=!0,e.parent_&&cT(e.parent_))}function K6(e){e.copy_||(e.copy_=iT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var W_e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const i=this;return function(l=a,...u){return i.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&Zc(6),n!==void 0&&typeof n!="function"&&Zc(7);let s;if(h0(t)){const a=bR(this),i=uT(t,void 0);let o=!0;try{s=r(i),o=!1}finally{o?oT(a):lT(a)}return wR(a,n),_R(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===uq&&(s=void 0),this.autoFreeze_&&GE(s,!0),n){const a=[],i=[];Bm("Patches").generateReplacementPatches_(t,s,a,i),n(a,i)}return s}else Zc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,l=>t(l,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){h0(e)||Zc(8),Lm(e)&&(e=n0(e));const t=bR(this),r=uT(e,void 0);return r[$l].isManual_=!0,lT(t),r}finishDraft(e,t){const r=e&&e[$l];(!r||!r.isManual_)&&Zc(9);const{scope_:n}=r;return wR(n,t),_R(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Bm("Patches").applyPatches_;return Lm(e)?n(e,t):this.produce(e,s=>n(s,t))}};function uT(e,t){const r=j2(e)?Bm("MapSet").proxyMap_(e,t):_3(e)?Bm("MapSet").proxySet_(e,t):z_e(e,t);return(t?t.scope_:hq()).drafts_.push(r),r}function n0(e){return Lm(e)||Zc(10,e),gq(e)}function gq(e){if(!h0(e)||S3(e))return e;const t=e[$l];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=iT(e,t.scope_.immer_.useStrictShallowCopy_)}else r=iT(e,!0);return Q4(r,(n,s)=>{fq(r,n,gq(s))}),t&&(t.finalized_=!1),r}var H_e=new W_e,pq=H_e.produce;function xq(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var G_e=xq(),V_e=xq,q_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?J4:J4.apply(null,arguments)};function Cc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Il(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>cq(n)&&n.type===e,r}var yq=class Ry extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ry.prototype)}static get[Symbol.species](){return Ry}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ry(...t[0].concat(this)):new Ry(...t.concat(this))}};function kR(e){return h0(e)?pq(e,()=>{}):e}function Eb(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function K_e(e){return typeof e=="boolean"}var Y_e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let i=new yq;return r&&(K_e(r)?i.push(G_e):i.push(V_e(r.extraArgument))),i},X_e="RTK_autoBatch",TR=e=>t=>{setTimeout(t,e)},J_e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,i=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:TR(10):e.type==="callback"?e.queueNotification:TR(e.timeout),u=()=>{i=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){try{return s=!d?.meta?.[X_e],a=!s,a&&(i||(i=!0,l(u))),n.dispatch(d)}finally{s=!0}}})},Q_e=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new yq(e);return n&&s.push(J_e(typeof n=="object"?n:void 0)),s};function Z_e(e){const t=Y_e(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(HE(r))o=lq(r);else throw new Error(Il(1));let l;typeof n=="function"?l=n(t):l=t();let u=J4;s&&(u=q_e({trace:!1,...typeof s=="object"&&s}));const d=O_e(...l),f=Q_e(d);let h=typeof i=="function"?i(f):f();const g=u(...h);return oq(o,a,g)}function vq(e){const t={},r=[];let n;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Il(28));if(o in t)throw new Error(Il(29));return t[o]=i,s},addAsyncThunk(a,i){return i.pending&&(t[a.pending.type]=i.pending),i.rejected&&(t[a.rejected.type]=i.rejected),i.fulfilled&&(t[a.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return r.push({matcher:a,reducer:i}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}function e3e(e){return typeof e=="function"}function t3e(e,t){let[r,n,s]=vq(t),a;if(e3e(e))a=()=>kR(e());else{const o=kR(e);a=()=>o}function i(o=a(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Lm(d)){const g=f(d,l);return g===void 0?d:g}else{if(h0(d))return pq(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=a,i}var r3e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",n3e=(e=21)=>{let t="",r=e;for(;r--;)t+=r3e[Math.random()*64|0];return t},s3e=Symbol.for("rtk-slice-createasyncthunk");function a3e(e,t){return`${e}/${t}`}function i3e({creators:e}={}){const t=e?.asyncThunk?.[s3e];return function(n){const{name:s,reducerPath:a=s}=n;if(!s)throw new Error(Il(11));const i=(typeof n.reducers=="function"?n.reducers(l3e()):n.reducers)||{},o=Object.keys(i),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,E){const N=typeof b=="string"?b:b.type;if(!N)throw new Error(Il(12));if(N in l.sliceCaseReducersByType)throw new Error(Il(13));return l.sliceCaseReducersByType[N]=E,u},addMatcher(b,E){return l.sliceMatchers.push({matcher:b,reducer:E}),u},exposeAction(b,E){return l.actionCreators[b]=E,u},exposeCaseReducer(b,E){return l.sliceCaseReducersByName[b]=E,u}};o.forEach(b=>{const E=i[b],N={reducerName:b,type:a3e(s,b),createNotation:typeof n.reducers=="function"};u3e(E)?f3e(N,E,u,t):c3e(N,E,u)});function d(){const[b={},E=[],N=void 0]=typeof n.extraReducers=="function"?vq(n.extraReducers):[n.extraReducers],P={...b,...l.sliceCaseReducersByType};return t3e(n.initialState,M=>{for(let j in P)M.addCase(j,P[j]);for(let j of l.sliceMatchers)M.addMatcher(j.matcher,j.reducer);for(let j of E)M.addMatcher(j.matcher,j.reducer);N&&M.addDefaultCase(N)})}const f=b=>b,h=new Map,g=new WeakMap;let x;function y(b,E){return x||(x=d()),x(b,E)}function v(){return x||(x=d()),x.getInitialState()}function T(b,E=!1){function N(M){let j=M[b];return typeof j>"u"&&E&&(j=Eb(g,N,v)),j}function P(M=f){const j=Eb(h,E,()=>new WeakMap);return Eb(j,M,()=>{const A={};for(const[F,L]of Object.entries(n.selectors??{}))A[F]=o3e(L,M,()=>Eb(g,M,v),E);return A})}return{reducerPath:b,getSelectors:P,get selectors(){return P(N)},selectSlice:N}}const k={name:s,reducer:y,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,...T(a),injectInto(b,{reducerPath:E,...N}={}){const P=E??a;return b.inject({reducerPath:P,reducer:y},N),{...k,...T(P,!0)}}};return k}}function o3e(e,t,r,n){function s(a,...i){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return s.unwrapped=e,s}var Wl=i3e();function l3e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function c3e({type:e,reducerName:t,createNotation:r},n,s){let a,i;if("reducer"in n){if(r&&!d3e(n))throw new Error(Il(17));a=n.reducer,i=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?Cc(e,i):Cc(e))}function u3e(e){return e._reducerDefinitionType==="asyncThunk"}function d3e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function f3e({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Il(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:l,settled:u,options:d}=r,f=s(e,a,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||Nb,pending:o||Nb,rejected:l||Nb,settled:u||Nb})}function Nb(){}var h3e="task",wq="listener",bq="completed",qE="cancelled",m3e=`task-${qE}`,g3e=`task-${bq}`,dT=`${wq}-${qE}`,p3e=`${wq}-${bq}`,k3=class{constructor(e){this.code=e,this.message=`${h3e} ${qE} (reason: ${e})`}name="TaskAbortError";message},KE=(e,t)=>{if(typeof e!="function")throw new TypeError(Il(32))},t_=()=>{},_q=(e,t=t_)=>(e.catch(t),e),Sq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),mm=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},gm=e=>{if(e.aborted){const{reason:t}=e;throw new k3(t)}};function kq(e,t){let r=t_;return new Promise((n,s)=>{const a=()=>s(new k3(e.reason));if(e.aborted){a();return}r=Sq(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=t_})}var x3e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof k3?"cancelled":"rejected",error:r}}finally{t?.()}},r_=e=>t=>_q(kq(e,t).then(r=>(gm(e),r))),Tq=e=>{const t=r_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Dp}=Object,CR={},T3="listenerMiddleware",y3e=(e,t)=>{const r=n=>Sq(e,()=>mm(n,e.reason));return(n,s)=>{KE(n);const a=new AbortController;r(a);const i=x3e(async()=>{gm(e),gm(a.signal);const o=await n({pause:r_(a.signal),delay:Tq(a.signal),signal:a.signal});return gm(a.signal),o},()=>mm(a,g3e));return s?.autoJoin&&t.push(i.catch(t_)),{result:r_(e)(i),cancel(){mm(a,m3e)}}}},v3e=(e,t)=>{const r=async(n,s)=>{gm(t);let a=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),u()}})];s!=null&&o.push(new Promise(l=>setTimeout(l,s,null)));try{const l=await kq(t,Promise.race(o));return gm(t),l}finally{a()}};return(n,s)=>_q(r(n,s))},Cq=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Cc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Il(21));return KE(a),{predicate:s,type:t,effect:a}},Eq=Dp(e=>{const{type:t,predicate:r,effect:n}=Cq(e);return{id:n3e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Il(22))}}},{withTypes:()=>Eq}),ER=(e,t)=>{const{type:r,effect:n,predicate:s}=Cq(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},fT=e=>{e.pending.forEach(t=>{mm(t,dT)})},w3e=e=>()=>{e.forEach(fT),e.clear()},NR=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Nq=Dp(Cc(`${T3}/add`),{withTypes:()=>Nq}),b3e=Cc(`${T3}/removeAll`),Aq=Dp(Cc(`${T3}/remove`),{withTypes:()=>Aq}),_3e=(...e)=>{console.error(`${T3}/error`,...e)},P2=(e={})=>{const t=new Map,{extra:r,onError:n=_3e}=e;KE(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&fT(d)}),a=d=>{const f=ER(t,d)??Eq(d);return s(f)};Dp(a,{withTypes:()=>a});const i=d=>{const f=ER(t,d);return f&&(f.unsubscribe(),d.cancelActive&&fT(f)),!!f};Dp(i,{withTypes:()=>i});const o=async(d,f,h,g)=>{const x=new AbortController,y=v3e(a,x.signal),v=[];try{d.pending.add(x),await Promise.resolve(d.effect(f,Dp({},h,{getOriginalState:g,condition:(T,k)=>y(T,k).then(Boolean),take:y,delay:Tq(x.signal),pause:r_(x.signal),extra:r,signal:x.signal,fork:y3e(x.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((T,k,b)=>{T!==x&&(mm(T,dT),b.delete(T))})},cancel:()=>{mm(x,dT),d.pending.delete(x)},throwIfCancelled:()=>{gm(x.signal)}})))}catch(T){T instanceof k3||NR(n,T,{raisedBy:"effect"})}finally{await Promise.all(v),mm(x,p3e),d.pending.delete(x)}},l=w3e(t);return{middleware:d=>f=>h=>{if(!cq(h))return f(h);if(Nq.match(h))return a(h.payload);if(b3e.match(h)){l();return}if(Aq.match(h))return i(h.payload);let g=d.getState();const x=()=>{if(g===CR)throw new Error(Il(23));return g};let y;try{if(y=f(h),t.size>0){const v=d.getState(),T=Array.from(t.values());for(const k of T){let b=!1;try{b=k.predicate(h,v,g)}catch(E){b=!1,NR(n,E,{raisedBy:"predicate"})}b&&o(k,h,d,x)}}}finally{g=CR}return y},startListening:a,stopListening:i,clearListeners:l}};function Il(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var S3e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},jq=Wl({name:"chartLayout",initialState:S3e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:k3e,setLayout:T3e,setChartSize:C3e,setScale:E3e}=jq.actions,N3e=jq.reducer;function AR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AR(Object(r),!0).forEach(function(n){A3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A3e(e,t,r){return(t=j3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j3e(e){var t=P3e(e,"string");return typeof t=="symbol"?t:t+""}function P3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n_=Math.PI/180,M3e=e=>e*180/Math.PI,Ki=(e,t,r,n)=>({x:e+Math.cos(-n_*n)*r,y:t+Math.sin(-n_*n)*r}),F3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},D3e=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},O3e=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,i=D3e({x:r,y:n},{x:s,y:a});if(i<=0)return{radius:i,angle:0};var o=(r-s)/i,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:i,angle:M3e(l),angleInRadian:l}},R3e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},I3e=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),i=Math.min(s,a);return e+i*360},L3e=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:a}=O3e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(s<i||s>o||s===0)return null;var{startAngle:l,endAngle:u}=R3e(t),d=a,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?jR(jR({},t),{},{radius:s,angle:I3e(d,t)}):null};function Pq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function PR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PR(Object(r),!0).forEach(function(n){B3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B3e(e,t,r){return(t=$3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $3e(e){var t=z3e(e,"string");return typeof t=="symbol"?t:t+""}function z3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uo(e,t,r){return ki(e)||ki(t)?r:Zu(t)?x3(e,t,r):typeof t=="function"?t(e):r}var U3e=(e,t,r,n,s)=>{var a,i=-1,o=(a=t?.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(pc(d-u)!==pc(f-d)){var g=[];if(pc(f-d)===pc(s[1]-s[0])){h=f;var x=d+s[1]-s[0];g[0]=Math.min(x,(x+u)/2),g[1]=Math.max(x,(x+u)/2)}else{h=u;var y=f+s[1]-s[0];g[0]=Math.min(d,(y+d)/2),g[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){({index:i}=r[l]);break}}else{var T=Math.min(u,f),k=Math.max(u,f);if(e>(T+d)/2&&e<=(k+d)/2){({index:i}=r[l]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:i}=t[b]);break}}return i},W3e=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&a!=="center"&&an(e[a]))return fc(fc({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&i!=="middle"&&an(e[i]))return fc(fc({},e),{},{[i]:e[i]+(s||0)})}return e},sh=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Mq=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var s,a,i=e.map(o=>(o.coordinate===t&&(s=!0),o.coordinate===r&&(a=!0),o.coordinate));return s||i.push(t),a||i.push(r),i},Fq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:g}=e;if(!i)return null;var x=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,y=s==="category"&&i.bandwidth?i.bandwidth()/x:0;if(y=g==="angleAxis"&&a&&a.length>=2?pc(a[0]-a[1])*2*y:y,f||h){var v=(f||h||[]).map((T,k)=>{var b=n?n.indexOf(T):T;return{coordinate:i(b)+y,value:T,offset:y,index:k}});return v.filter(T=>!Tc(T.coordinate))}return l&&u?u.map((T,k)=>({coordinate:i(T)+y,value:T,index:k,offset:y})):i.ticks&&d!=null?i.ticks(d).map((T,k)=>({coordinate:i(T)+y,value:T,offset:y,index:k})):i.domain().map((T,k)=>({coordinate:i(T)+y,value:n?n[T]:T,index:k,offset:y}))},MR=1e-4,H3e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-MR,a=Math.max(n[0],n[1])+MR,i=e(t[0]),o=e(t[r-1]);(i<s||i>a||o<s||o>a)&&e.domain([t[0],t[r-1]])}},G3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,i=0;i<t;++i){var o=Tc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1])}},V3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var i=Tc(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},q3e={sign:G3e,expand:O4e,none:Yp,silhouette:R4e,wiggle:I4e,positive:V3e},K3e=(e,t,r)=>{var n=q3e[r],s=D4e().keys(t).value((a,i)=>+Uo(a,i,0)).order(sT).offset(n);return s(e)};function FR(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:i}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ki(s[t.dataKey])){var o=PV(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=Uo(s,ki(i)?t.dataKey:i);return ki(l)?null:t.scale(l)}var Y3e=e=>{var t=e.flat(2).filter(an);return[Math.min(...t),Math.max(...t)]},X3e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],J3e=(e,t,r)=>{if(e!=null)return X3e(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:i}=a,o=i.reduce((l,u)=>{var d=Pq(u,t,r),f=Y3e(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},DR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,OR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hT=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=w3(t,d=>d.coordinate),a=1/0,i=1,o=s.length;i<o;i++){var l=s[i],u=s[i-1];a=Math.min((l.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function RR(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return fc(fc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function Dq(e,t){if(e)return String(e);if(typeof t=="string")return t}function Q3e(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var a=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return a?{x:e,y:t}:null}return n?L3e({x:e,y:t},n):null}var Z3e=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,{radius:i}=n;return fc(fc(fc({},n),Ki(n.cx,n.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,{angle:l}=n;return fc(fc(fc({},n),Ki(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},eSe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,S0=e=>e.layout.width,k0=e=>e.layout.height,tSe=e=>e.layout.scale,Oq=e=>e.layout.margin,C3=Bt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),E3=Bt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),rSe="data-recharts-item-index",nSe="data-recharts-item-data-key",M2=60;function IR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ab(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(r),!0).forEach(function(n){sSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sSe(e,t,r){return(t=aSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aSe(e){var t=iSe(e,"string");return typeof t=="symbol"?t:t+""}function iSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oSe=e=>e.brush.height;function lSe(e){var t=E3(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:M2;return r+s}return r},0)}function cSe(e){var t=E3(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:M2;return r+s}return r},0)}function uSe(e){var t=C3(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function dSe(e){var t=C3(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Qi=Bt([S0,k0,Oq,oSe,lSe,cSe,uSe,dSe,iq,A_e],(e,t,r,n,s,a,i,o,l,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+a},f={top:(r.top||0)+i,bottom:(r.bottom||0)+o},h=Ab(Ab({},f),d),g=h.bottom;h.bottom+=n,h=W3e(h,l,u);var x=e-h.left-h.right,y=t-h.top-h.bottom;return Ab(Ab({brushBottom:g},h),{},{width:Math.max(x,0),height:Math.max(y,0)})}),fSe=Bt(Qi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Rq=Bt(S0,k0,(e,t)=>({x:0,y:0,width:e,height:t})),hSe=_.createContext(null),jc=()=>_.useContext(hSe)!=null,N3=e=>e.brush,A3=Bt([N3,Qi,Oq],(e,t,r)=>({height:e.height,x:an(e.x)?e.x:t.left,y:an(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:an(e.width)?e.width:t.width})),YE=()=>{var e,t=jc(),r=qr(fSe),n=qr(A3),s=(e=qr(N3))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},mSe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Iq=()=>{var e;return(e=qr(Qi))!==null&&e!==void 0?e:mSe},Lq=()=>qr(S0),Bq=()=>qr(k0),Fs=e=>e.layout.layoutType,XE=()=>qr(Fs),gSe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},$q=Wl({name:"legend",initialState:gSe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=n0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:bje,setLegendSettings:_je,addLegendPayload:pSe,removeLegendPayload:xSe}=$q.actions,ySe=$q.reducer;function mT(){return mT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mT.apply(null,arguments)}function LR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Y6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LR(Object(r),!0).forEach(function(n){vSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vSe(e,t,r){return(t=wSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wSe(e){var t=bSe(e,"string");return typeof t=="symbol"?t:t+""}function bSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Se(e){return Array.isArray(e)&&Zu(e[0])&&Zu(e[1])?e.join(" ~ "):e}var SSe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,g=()=>{if(a&&a.length){var N={padding:0,margin:0},P=(o?w3(a,o):a).map((M,j)=>{if(M.type==="none")return null;var A=M.formatter||i||_Se,{value:F,name:L}=M,V=F,J=L;if(A){var ne=A(F,L,M,j,a);if(Array.isArray(ne))[V,J]=ne;else if(ne!=null)V=ne;else return null}var ee=Y6({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},n);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:ee},Zu(J)?_.createElement("span",{className:"recharts-tooltip-item-name"},J):null,Zu(J)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},V),_.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:N},P)}return null},x=Y6({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=Y6({margin:0},s),v=!ki(d),T=v?d:"",k=Ps("recharts-default-tooltip",l),b=Ps("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(T=f(d,a));var E=h?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",mT({className:k,style:x},E),_.createElement("p",{className:b,style:y},_.isValidElement(T)?T:"".concat(T)),g())},by="recharts-tooltip-wrapper",kSe={visibility:"hidden"};function TSe(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ps(by,{["".concat(by,"-right")]:an(r)&&t&&an(t.x)&&r>=t.x,["".concat(by,"-left")]:an(r)&&t&&an(t.x)&&r<t.x,["".concat(by,"-bottom")]:an(n)&&t&&an(t.y)&&n>=t.y,["".concat(by,"-top")]:an(n)&&t&&an(t.y)&&n<t.y})}function BR(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(a&&an(a[n]))return a[n];var d=r[n]-o-(s>0?s:0),f=r[n]+s;if(t[n])return i[n]?d:f;var h=l[n];if(h==null)return 0;if(i[n]){var g=d,x=h;return g<x?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function CSe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function ESe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:i,useTranslate3d:o,viewBox:l}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=BR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=BR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=CSe({translateX:d,translateY:f,useTranslate3d:o})):u=kSe,{cssProperties:u,cssClasses:TSe({translateX:d,translateY:f,coordinate:r})}}function $R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$R(Object(r),!0).forEach(function(n){gT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$R(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gT(e,t,r){return(t=NSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NSe(e){var t=ASe(e,"string");return typeof t=="symbol"?t:t+""}function ASe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jSe extends _.PureComponent{constructor(){super(...arguments),gT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),gT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:i,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:g,wrapperStyle:x,lastBoundingBox:y,innerRef:v,hasPortalFromProps:T}=this.props,{cssClasses:k,cssProperties:b}=ESe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:g}),E=T?{}:jb(jb({transition:l&&t?"transform ".concat(n,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),N=jb(jb({},E),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:N,ref:v},a)}}var PSe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),C1={devToolsEnabled:!1,isSsr:PSe()},zq=()=>qr(e=>e.rootProps.accessibilityLayer);function uu(e){return Number.isFinite(e)}function s_(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function pT(){return pT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pT.apply(null,arguments)}function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function UR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){MSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MSe(e,t,r){return(t=FSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FSe(e){var t=DSe(e,"string");return typeof t=="symbol"?t:t+""}function DSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WR={curveBasisClosed:S4e,curveBasisOpen:k4e,curveBasis:_4e,curveBumpX:w4e,curveBumpY:b4e,curveLinearClosed:T4e,curveLinear:y3,curveMonotoneX:C4e,curveMonotoneY:E4e,curveNatural:N4e,curveStep:A4e,curveStepAfter:P4e,curveStepBefore:j4e},Pb=e=>uu(e.x)&&uu(e.y),_y=e=>e.x,Sy=e=>e.y,OSe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(IE(e));return(r==="curveMonotone"||r==="curveBump")&&t?WR["".concat(r).concat(t==="vertical"?"Y":"X")]:WR[r]||y3},RSe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,i=OSe(t,s),o=a?r.filter(Pb):r,l;if(Array.isArray(n)){var u=a?n.filter(f=>Pb(f)):n,d=o.map((f,h)=>UR(UR({},f),{},{base:u[h]}));return s==="vertical"?l=Sb().y(Sy).x1(_y).x0(f=>f.base.x):l=Sb().x(_y).y1(Sy).y0(f=>f.base.y),l.defined(Pb).curve(i),l(d)}return s==="vertical"&&an(n)?l=Sb().y(Sy).x1(_y).x0(n):an(n)?l=Sb().x(_y).y1(Sy).y0(n):l=$V().x(_y).y(Sy),l.defined(Pb).curve(i),l(o)},Uq=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?RSe(e):n;return _.createElement("path",pT({},tg(e),BE(e),{className:Ps("recharts-curve",t),d:a===null?void 0:a,ref:s}))},ISe=["x","y","top","left","width","height","className"];function xT(){return xT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xT.apply(null,arguments)}function HR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(r),!0).forEach(function(n){BSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BSe(e,t,r){return(t=$Se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Se(e){var t=zSe(e,"string");return typeof t=="symbol"?t:t+""}function zSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function USe(e,t){if(e==null)return{};var r,n,s=WSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HSe=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),GSe=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:i=0,className:o}=e,l=USe(e,ISe),u=LSe({x:t,y:r,top:n,left:s,width:a,height:i},l);return!an(t)||!an(r)||!an(a)||!an(i)||!an(n)||!an(s)?null:_.createElement("path",xT({},Ji(u,!0),{className:Ps("recharts-cross",o),d:HSe(t,r,a,i,n,s)}))};function VSe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(n){KSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KSe(e,t,r){return(t=YSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YSe(e){var t=XSe(e,"string");return typeof t=="symbol"?t:t+""}function XSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pc(e,t){var r=qSe({},e),n=t,s=Object.keys(t),a=s.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return a}function JSe(){}function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VR(Object(r),!0).forEach(function(n){QSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QSe(e,t,r){return(t=ZSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZSe(e){var t=e5e(e,"string");return typeof t=="symbol"?t:t+""}function e5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t5e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),r5e=(e,t,r)=>e.map(n=>"".concat(t5e(n)," ").concat(t,"ms ").concat(r)).join(","),n5e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Wv=(e,t)=>Object.keys(t).reduce((r,n)=>qR(qR({},r),{},{[n]:e(n,t[n])}),{});function KR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KR(Object(r),!0).forEach(function(n){s5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s5e(e,t,r){return(t=a5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a5e(e){var t=i5e(e,"string");return typeof t=="symbol"?t:t+""}function i5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a_=(e,t,r)=>e+(t-e)*r,yT=e=>{var{from:t,to:r}=e;return t!==r},Wq=(e,t,r)=>{var n=Wv((s,a)=>{if(yT(a)){var[i,o]=e(a.from,a.to,a.velocity);return Wi(Wi({},a),{},{from:i,velocity:o})}return a},t);return r<1?Wv((s,a)=>yT(a)?Wi(Wi({},a),{},{velocity:a_(a.velocity,n[s].velocity,r),from:a_(a.from,n[s].from,r)}):a,t):Wq(e,n,r-1)};function o5e(e,t,r,n,s,a){var i,o=n.reduce((h,g)=>Wi(Wi({},h),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),l=()=>Wv((h,g)=>g.from,o),u=()=>!Object.values(o).filter(yT).length,d=null,f=h=>{i||(i=h);var g=h-i,x=g/r.dt;o=Wq(r,o,x),s(Wi(Wi(Wi({},e),t),l())),i=h,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{d()})}function l5e(e,t,r,n,s,a,i){var o=null,l=s.reduce((f,h)=>Wi(Wi({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,g=Wv((y,v)=>a_(...v,r(h)),l);if(a(Wi(Wi(Wi({},e),t),g)),h<1)o=i.setTimeout(d);else{var x=Wv((y,v)=>a_(...v,r(1)),l);a(Wi(Wi(Wi({},e),t),x))}};return()=>(o=i.setTimeout(d),()=>{o()})}const c5e=(e,t,r,n,s,a)=>{var i=n5e(e,t);return r.isStepper===!0?o5e(e,t,r,i,s,a):l5e(e,t,r,n,i,s,a)};var i_=1e-4,Hq=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Gq=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),YR=(e,t)=>r=>{var n=Hq(e,t);return Gq(n,r)},u5e=(e,t)=>r=>{var n=Hq(e,t),s=[...n.map((a,i)=>a*i).slice(1),0];return Gq(s,r)},XR=function(){for(var t,r,n,s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var l=i[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,s]=l[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else i.length===4&&([t,n,r,s]=i);var u=YR(t,r),d=YR(n,s),f=u5e(t,r),h=x=>x>1?1:x<0?0:x,g=x=>{for(var y=x>1?1:x,v=y,T=0;T<8;++T){var k=u(v)-y,b=f(v);if(Math.abs(k-y)<i_||b<i_)return d(v);v=h(v-k/b)}return d(v)};return g.isStepper=!1,g},d5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(i,o,l)=>{var u=-(i-o)*r,d=l*n,f=l+(u-d)*s/1e3,h=l*s/1e3+i;return Math.abs(h-o)<i_&&Math.abs(f)<i_?[o,0]:[h,f]};return a.isStepper=!0,a.dt=s,a},f5e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return XR(e);case"spring":return d5e();default:if(e.split("(")[0]==="cubic-bezier")return XR(e)}return typeof e=="function"?e:null};function h5e(e){var t,r=()=>null,n=!1,s=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[l,...u]=o;if(typeof l=="number"){s=e.setTimeout(a.bind(null,u),l);return}a(l),s=e.setTimeout(a.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,s&&(s(),s=null),a(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class m5e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{cancelAnimationFrame(s)}}}function g5e(){return h5e(new m5e)}var p5e=_.createContext(g5e);function x5e(e,t){var r=_.useContext(p5e);return _.useMemo(()=>t??r(e),[e,t,r])}var y5e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},JR={t:0},X6={t:1};function Vq(e){var t=Pc(e,y5e),{isActive:r,canBegin:n,duration:s,easing:a,begin:i,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=x5e(t.animationId,t.animationManager),[f,h]=_.useState(r?JR:X6),g=_.useRef(null);return _.useEffect(()=>{r||h(X6)},[r]),_.useEffect(()=>{if(!r||!n)return JSe;var x=c5e(JR,X6,f5e(a),s,h,d.getTimeoutController()),y=()=>{g.current=x()};return d.start([l,i,y,s,o]),()=>{d.stop(),g.current&&g.current(),o()}},[r,n,s,a,i,l,o,d]),u(f.t)}function qq(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef($v(t)),n=_.useRef(e);return n.current!==e&&(r.current=$v(t),n.current=e),r.current}function QR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QR(Object(r),!0).forEach(function(n){v5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v5e(e,t,r){return(t=w5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w5e(e){var t=b5e(e,"string");return typeof t=="symbol"?t:t+""}function b5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o_(){return o_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o_.apply(null,arguments)}var eI=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>a?a:s[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);u="M ".concat(e,",").concat(t+i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+o*g,",").concat(t,`
            L `).concat(e+r-o*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+r,",").concat(t+i*g,`
            L `).concat(e+r,",").concat(t+n-i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+r-o*g,",").concat(t+n,`
            L `).concat(e+o*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e,",").concat(t+n-i*g," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},_5e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},S5e=e=>{var t=Pc(e,_5e),r=_.useRef(null),[n,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ne=r.current.getTotalLength();ne&&s(ne)}catch{}},[]);var{x:a,y:i,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:g,isAnimationActive:x,isUpdateAnimationActive:y}=t,v=_.useRef(o),T=_.useRef(l),k=_.useRef(a),b=_.useRef(i),E=_.useMemo(()=>({x:a,y:i,width:o,height:l,radius:u}),[a,i,o,l,u]),N=qq(E,"rectangle-");if(a!==+a||i!==+i||o!==+o||l!==+l||o===0||l===0)return null;var P=Ps("recharts-rectangle",d);if(!y)return _.createElement("path",o_({},Ji(t,!0),{className:P,d:eI(a,i,o,l,u)}));var M=v.current,j=T.current,A=k.current,F=b.current,L="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),J=r5e(["strokeDasharray"],h,typeof f=="string"?f:void 0);return _.createElement(Vq,{animationId:N,key:N,canBegin:n>0,duration:h,easing:f,isActive:y,begin:g},ne=>{var ee=Hd(M,o,ne),ie=Hd(j,l,ne),B=Hd(A,a,ne),Y=Hd(F,i,ne);r.current&&(v.current=ee,T.current=ie,k.current=B,b.current=Y);var I;return x?ne>0?I={transition:J,strokeDasharray:V}:I={strokeDasharray:L}:I={strokeDasharray:V},_.createElement("path",o_({},Ji(t,!0),{className:P,d:eI(B,Y,ee,ie,u),ref:r,style:ZR(ZR({},I),t.style)}))})};function Kq(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,i=Ki(t,r,n,s),o=Ki(t,r,n,a);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function vT(){return vT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vT.apply(null,arguments)}var k5e=(e,t)=>{var r=pc(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Mb=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/n_,f=l?s:s+a*d,h=Ki(t,r,u,f),g=Ki(t,r,n,f),x=l?s-a*d:s,y=Ki(t,r,u*Math.cos(d*n_),x);return{center:h,circleTangency:g,lineTangency:y,theta:d}},Yq=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:i}=e,o=k5e(a,i),l=a+o,u=Ki(t,r,s,a),d=Ki(t,r,s,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Ki(t,r,n,a),g=Ki(t,r,n,l);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},T5e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=pc(u-l),{circleTangency:f,lineTangency:h,theta:g}=Mb({cx:t,cy:r,radius:s,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:y,theta:v}=Mb({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),T=o?Math.abs(l-u):Math.abs(l-u)-g-v;if(T<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Yq({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:u});var k="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:E,theta:N}=Mb({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:P,lineTangency:M,theta:j}=Mb({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),A=o?Math.abs(l-u):Math.abs(l-u)-N-j;if(A<0&&a===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},C5e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},E5e=e=>{var t=Pc(e,C5e),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(a<s||u===d)return null;var h=Ps("recharts-sector",f),g=a-s,x=Vf(i,g,0,!0),y;return x>0&&Math.abs(u-d)<360?y=T5e({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(x,g/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):y=Yq({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),_.createElement("path",vT({},Ji(t,!0),{className:h,d:y}))};function N5e(e,t,r){var n,s,a,i;if(e==="horizontal")n=t.x,a=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,h=Ki(o,l,u,f),g=Ki(o,l,d,f);n=h.x,s=h.y,a=g.x,i=g.y}else return Kq(t);return[{x:n,y:s},{x:a,y:i}]}var J6={},Q6={},Z6={},tI;function A5e(){return tI||(tI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sq();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Z6)),Z6}var rI;function j5e(){return rI||(rI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Q6)),Q6}var nI;function P5e(){return nI||(nI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aq(),r=j5e();function n(s,a,i){i&&typeof i!="number"&&t.isIterateeCall(s,a,i)&&(a=i=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),i=i===void 0?s<a?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((a-s)/(i||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=s,s+=i;return l}e.range=n})(J6)),J6}var ek,sI;function M5e(){return sI||(sI=1,ek=P5e().range),ek}var F5e=M5e();const Xq=Nc(F5e);function Df(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function D5e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JE(e){let t,r,n;e.length!==2?(t=Df,r=(o,l)=>Df(e(o),l),n=(o,l)=>e(o)-l):(t=e===Df||e===D5e?e:O5e,r=e,n=e);function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,l,u=0,d=o.length){const f=s(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:s,center:i,right:a}}function O5e(){return 0}function Jq(e){return e===null?NaN:+e}function*R5e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const I5e=JE(Df),F2=I5e.right;JE(Jq).center;class aI extends Map{constructor(t,r=$5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(iI(this,t))}has(t){return super.has(iI(this,t))}set(t,r){return super.set(L5e(this,t),r)}delete(t){return super.delete(B5e(this,t))}}function iI({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function L5e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function B5e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function $5e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function z5e(e=Df){if(e===Df)return Qq;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Qq(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const U5e=Math.sqrt(50),W5e=Math.sqrt(10),H5e=Math.sqrt(2);function l_(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=U5e?10:a>=W5e?5:a>=H5e?2:1;let o,l,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,s)*i,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?l_(e,t,r*2):[o,l,u]}function wT(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,i]=n?l_(t,e,r):l_(e,t,r);if(!(a>=s))return[];const o=a-s+1,l=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)l[u]=(a-u)/-i;else for(let u=0;u<o;++u)l[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(s+u)/-i;else for(let u=0;u<o;++u)l[u]=(s+u)*i;return l}function bT(e,t,r){return t=+t,e=+e,r=+r,l_(e,t,r)[2]}function _T(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?bT(t,e,r):bT(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function oI(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function lI(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Zq(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?Qq:z5e(s);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(r,Math.floor(t-u*f/l+h)),x=Math.min(n,Math.floor(t+(l-u)*f/l+h));Zq(e,t,g,x,s)}const a=e[t];let i=r,o=n;for(ky(e,r,t),s(e[n],a)>0&&ky(e,r,n);i<o;){for(ky(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}s(e[r],a)===0?ky(e,r,o):(++o,ky(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function ky(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function G5e(e,t,r){if(e=Float64Array.from(R5e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return lI(e);if(t>=1)return oI(e);var n,s=(n-1)*t,a=Math.floor(s),i=oI(Zq(e,a).subarray(0,a+1)),o=lI(e.subarray(a+1));return i+(o-i)*(s-a)}}function V5e(e,t,r=Jq){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return i+(o-i)*(s-a)}}function q5e(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Mc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function T0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ST=Symbol("implicit");function QE(){var e=new aI,t=[],r=[],n=ST;function s(a){let i=e.get(a);if(i===void 0){if(n!==ST)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new aI;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return QE(t,r).unknown(n)},Mc.apply(s,arguments),s}function ZE(){var e=QE().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,i,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,g=s<n,x=g?s:n,y=g?n:s;a=(y-x)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),x+=(y-x-a*(h-l))*d,i=a*(1-l),o&&(x=Math.round(x),i=Math.round(i));var v=q5e(h).map(function(T){return x+a*T});return r(g?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return ZE(t(),[n,s]).round(o).paddingInner(l).paddingOuter(u).align(d)},Mc.apply(f(),arguments)}function eK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eK(t())},e}function K5e(){return eK(ZE.apply(null,arguments).paddingInner(1))}function eN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tK(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function D2(){}var Hv=.7,c_=1/Hv,Op="\\s*([+-]?\\d+)\\s*",Gv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y5e=/^#([0-9a-f]{3,8})$/,X5e=new RegExp(`^rgb\\(${Op},${Op},${Op}\\)$`),J5e=new RegExp(`^rgb\\(${Xu},${Xu},${Xu}\\)$`),Q5e=new RegExp(`^rgba\\(${Op},${Op},${Op},${Gv}\\)$`),Z5e=new RegExp(`^rgba\\(${Xu},${Xu},${Xu},${Gv}\\)$`),e6e=new RegExp(`^hsl\\(${Gv},${Xu},${Xu}\\)$`),t6e=new RegExp(`^hsla\\(${Gv},${Xu},${Xu},${Gv}\\)$`),cI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eN(D2,Vv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uI,formatHex:uI,formatHex8:r6e,formatHsl:n6e,formatRgb:dI,toString:dI});function uI(){return this.rgb().formatHex()}function r6e(){return this.rgb().formatHex8()}function n6e(){return rK(this).formatHsl()}function dI(){return this.rgb().formatRgb()}function Vv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Y5e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?fI(t):r===3?new ol(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Fb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Fb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=X5e.exec(e))?new ol(t[1],t[2],t[3],1):(t=J5e.exec(e))?new ol(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Q5e.exec(e))?Fb(t[1],t[2],t[3],t[4]):(t=Z5e.exec(e))?Fb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=e6e.exec(e))?gI(t[1],t[2]/100,t[3]/100,1):(t=t6e.exec(e))?gI(t[1],t[2]/100,t[3]/100,t[4]):cI.hasOwnProperty(e)?fI(cI[e]):e==="transparent"?new ol(NaN,NaN,NaN,0):null}function fI(e){return new ol(e>>16&255,e>>8&255,e&255,1)}function Fb(e,t,r,n){return n<=0&&(e=t=r=NaN),new ol(e,t,r,n)}function s6e(e){return e instanceof D2||(e=Vv(e)),e?(e=e.rgb(),new ol(e.r,e.g,e.b,e.opacity)):new ol}function kT(e,t,r,n){return arguments.length===1?s6e(e):new ol(e,t,r,n??1)}function ol(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}eN(ol,kT,tK(D2,{brighter(e){return e=e==null?c_:Math.pow(c_,e),new ol(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new ol(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ol(pm(this.r),pm(this.g),pm(this.b),u_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hI,formatHex:hI,formatHex8:a6e,formatRgb:mI,toString:mI}));function hI(){return`#${tm(this.r)}${tm(this.g)}${tm(this.b)}`}function a6e(){return`#${tm(this.r)}${tm(this.g)}${tm(this.b)}${tm((isNaN(this.opacity)?1:this.opacity)*255)}`}function mI(){const e=u_(this.opacity);return`${e===1?"rgb(":"rgba("}${pm(this.r)}, ${pm(this.g)}, ${pm(this.b)}${e===1?")":`, ${e})`}`}function u_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tm(e){return e=pm(e),(e<16?"0":"")+e.toString(16)}function gI(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new eu(e,t,r,n)}function rK(e){if(e instanceof eu)return new eu(e.h,e.s,e.l,e.opacity);if(e instanceof D2||(e=Vv(e)),!e)return new eu;if(e instanceof eu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,l=(a+s)/2;return o?(t===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-t)/o+2:i=(t-r)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new eu(i,o,l,e.opacity)}function i6e(e,t,r,n){return arguments.length===1?rK(e):new eu(e,t,r,n??1)}function eu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}eN(eu,i6e,tK(D2,{brighter(e){return e=e==null?c_:Math.pow(c_,e),new eu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new eu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new ol(tk(e>=240?e-240:e+120,s,n),tk(e,s,n),tk(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new eu(pI(this.h),Db(this.s),Db(this.l),u_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=u_(this.opacity);return`${e===1?"hsl(":"hsla("}${pI(this.h)}, ${Db(this.s)*100}%, ${Db(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pI(e){return e=(e||0)%360,e<0?e+360:e}function Db(e){return Math.max(0,Math.min(1,e||0))}function tk(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const tN=e=>()=>e;function o6e(e,t){return function(r){return e+r*t}}function l6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function c6e(e){return(e=+e)==1?nK:function(t,r){return r-t?l6e(t,r,e):tN(isNaN(t)?r:t)}}function nK(e,t){var r=t-e;return r?o6e(e,r):tN(isNaN(e)?t:e)}const xI=(function e(t){var r=c6e(t);function n(s,a){var i=r((s=kT(s)).r,(a=kT(a)).r),o=r(s.g,a.g),l=r(s.b,a.b),u=nK(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function u6e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function d6e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function f6e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)s[i]=E1(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(o){for(i=0;i<n;++i)a[i]=s[i](o);return a}}function h6e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function d_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function m6e(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=E1(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var TT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rk=new RegExp(TT.source,"g");function g6e(e){return function(){return e}}function p6e(e){return function(t){return e(t)+""}}function x6e(e,t){var r=TT.lastIndex=rk.lastIndex=0,n,s,a,i=-1,o=[],l=[];for(e=e+"",t=t+"";(n=TT.exec(e))&&(s=rk.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:d_(n,s)})),r=rk.lastIndex;return r<t.length&&(a=t.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?p6e(l[0].x):g6e(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function E1(e,t){var r=typeof t,n;return t==null||r==="boolean"?tN(t):(r==="number"?d_:r==="string"?(n=Vv(t))?(t=n,xI):x6e:t instanceof Vv?xI:t instanceof Date?h6e:d6e(t)?u6e:Array.isArray(t)?f6e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?m6e:d_)(e,t)}function rN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function y6e(e,t){t===void 0&&(t=e,e=E1);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return a[o](i-o)}}function v6e(e){return function(){return e}}function f_(e){return+e}var yI=[0,1];function Bo(e){return e}function CT(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:v6e(isNaN(t)?NaN:.5)}function w6e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function b6e(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=CT(s,n),a=r(i,a)):(n=CT(n,s),a=r(a,i)),function(o){return a(n(o))}}function _6e(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=CT(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(o){var l=F2(e,o,1,n)-1;return a[l](s[l](o))}}function O2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function j3(){var e=yI,t=yI,r=E1,n,s,a,i=Bo,o,l,u;function d(){var h=Math.min(e.length,t.length);return i!==Bo&&(i=w6e(e[0],e[h-1])),o=h>2?_6e:b6e,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(s((u||(u=o(t,e.map(n),d_)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,f_),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=rN,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Bo,d()):i!==Bo},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return n=h,s=g,d()}}function nN(){return j3()(Bo,Bo)}function S6e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function h_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Jp(e){return e=h_(Math.abs(e)),e?e[1]:NaN}function k6e(e,t){return function(r,n){for(var s=r.length,a=[],i=0,o=e[0],l=0;s>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(s-=o,s+o)),!((l+=o+1)>n));)o=e[i=(i+1)%e.length];return a.reverse().join(t)}}function T6e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var C6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qv(e){if(!(t=C6e.exec(e)))throw new Error("invalid format: "+e);var t;return new sN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qv.prototype=sN.prototype;function sN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}sN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function E6e(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var sK;function N6e(e,t){var r=h_(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(sK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+h_(e,Math.max(0,t+a-1))[0]}function vI(e,t){var r=h_(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const wI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:S6e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vI(e*100,t),r:vI,s:N6e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bI(e){return e}var _I=Array.prototype.map,SI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function A6e(e){var t=e.grouping===void 0||e.thousands===void 0?bI:k6e(_I.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?bI:T6e(_I.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=qv(f);var h=f.fill,g=f.align,x=f.sign,y=f.symbol,v=f.zero,T=f.width,k=f.comma,b=f.precision,E=f.trim,N=f.type;N==="n"?(k=!0,N="g"):wI[N]||(b===void 0&&(b=12),E=!0,N="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var P=y==="$"?r:y==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",M=y==="$"?n:/[%p]/.test(N)?i:"",j=wI[N],A=/[defgprs%]/.test(N);b=b===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function F(L){var V=P,J=M,ne,ee,ie;if(N==="c")J=j(L)+J,L="";else{L=+L;var B=L<0||1/L<0;if(L=isNaN(L)?l:j(Math.abs(L),b),E&&(L=E6e(L)),B&&+L==0&&x!=="+"&&(B=!1),V=(B?x==="("?x:o:x==="-"||x==="("?"":x)+V,J=(N==="s"?SI[8+sK/3]:"")+J+(B&&x==="("?")":""),A){for(ne=-1,ee=L.length;++ne<ee;)if(ie=L.charCodeAt(ne),48>ie||ie>57){J=(ie===46?s+L.slice(ne+1):L.slice(ne))+J,L=L.slice(0,ne);break}}}k&&!v&&(L=t(L,1/0));var Y=V.length+L.length+J.length,I=Y<T?new Array(T-Y+1).join(h):"";switch(k&&v&&(L=t(I+L,I.length?T-J.length:1/0),I=""),g){case"<":L=V+L+J+I;break;case"=":L=V+I+L+J;break;case"^":L=I.slice(0,Y=I.length>>1)+V+L+J+I.slice(Y);break;default:L=I+V+L+J;break}return a(L)}return F.toString=function(){return f+""},F}function d(f,h){var g=u((f=qv(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Jp(h)/3)))*3,y=Math.pow(10,-x),v=SI[8+x/3];return function(T){return g(y*T)+v}}return{format:u,formatPrefix:d}}var Ob,aN,aK;j6e({thousands:",",grouping:[3],currency:["$",""]});function j6e(e){return Ob=A6e(e),aN=Ob.format,aK=Ob.formatPrefix,Ob}function P6e(e){return Math.max(0,-Jp(Math.abs(e)))}function M6e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jp(t)/3)))*3-Jp(Math.abs(e)))}function F6e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jp(t)-Jp(e))+1}function iK(e,t,r,n){var s=_T(e,t,r),a;switch(n=qv(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=M6e(s,i))&&(n.precision=a),aK(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=F6e(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=P6e(s))&&(n.precision=a-(n.type==="%")*2);break}}return aN(n)}function ah(e){var t=e.domain;return e.ticks=function(r){var n=t();return wT(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return iK(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,i=n[s],o=n[a],l,u,d=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);d-- >0;){if(u=bT(i,o,r),u===l)return n[s]=i,n[a]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function oK(){var e=nN();return e.copy=function(){return O2(e,oK())},Mc.apply(e,arguments),ah(e)}function lK(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,f_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return lK(e).unknown(t)},e=arguments.length?Array.from(e,f_):[0,1],ah(r)}function cK(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],i;return a<s&&(i=r,r=n,n=i,i=s,s=a,a=i),e[r]=t.floor(s),e[n]=t.ceil(a),e}function kI(e){return Math.log(e)}function TI(e){return Math.exp(e)}function D6e(e){return-Math.log(-e)}function O6e(e){return-Math.exp(-e)}function R6e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function I6e(e){return e===10?R6e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function L6e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function CI(e){return(t,r)=>-e(-t,r)}function iN(e){const t=e(kI,TI),r=t.domain;let n=10,s,a;function i(){return s=L6e(n),a=I6e(n),r()[0]<0?(s=CI(s),a=CI(a),e(D6e,O6e)):e(kI,TI),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=s(u),g=s(d),x,y;const v=o==null?10:+o;let T=[];if(!(n%1)&&g-h<v){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(x=1;x<n;++x)if(y=h<0?x/a(-h):x*a(h),!(y<u)){if(y>d)break;T.push(y)}}else for(;h<=g;++h)for(x=n-1;x>=1;--x)if(y=h>0?x/a(-h):x*a(h),!(y<u)){if(y>d)break;T.push(y)}T.length*2<v&&(T=wT(u,d,v))}else T=wT(h,g,Math.min(g-h,v)).map(a);return f?T.reverse():T},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=qv(l)).precision==null&&(l.trim=!0),l=aN(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(cK(r(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),t}function uK(){const e=iN(j3()).domain([1,10]);return e.copy=()=>O2(e,uK()).base(e.base()),Mc.apply(e,arguments),e}function EI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function NI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function oN(e){var t=1,r=e(EI(t),NI(t));return r.constant=function(n){return arguments.length?e(EI(t=+n),NI(t)):t},ah(r)}function dK(){var e=oN(j3());return e.copy=function(){return O2(e,dK()).constant(e.constant())},Mc.apply(e,arguments)}function AI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function B6e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function $6e(e){return e<0?-e*e:e*e}function lN(e){var t=e(Bo,Bo),r=1;function n(){return r===1?e(Bo,Bo):r===.5?e(B6e,$6e):e(AI(r),AI(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},ah(t)}function cN(){var e=lN(j3());return e.copy=function(){return O2(e,cN()).exponent(e.exponent())},Mc.apply(e,arguments),e}function z6e(){return cN.apply(null,arguments).exponent(.5)}function jI(e){return Math.sign(e)*e*e}function U6e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function fK(){var e=nN(),t=[0,1],r=!1,n;function s(a){var i=U6e(e(a));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(a){return e.invert(jI(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,f_)).map(jI)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return fK(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Mc.apply(s,arguments),ah(s)}function hK(){var e=[],t=[],r=[],n;function s(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=V5e(e,i/o);return a}function a(i){return i==null||isNaN(i=+i)?n:t[F2(r,i)]}return a.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Df),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return hK().domain(e).range(t).unknown(n)},Mc.apply(a,arguments)}function mK(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function i(l){return l!=null&&l<=l?s[F2(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},i.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,o()):s.slice()},i.invertExtent=function(l){var u=s.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(a=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return mK().domain([e,t]).range(s).unknown(a)},Mc.apply(ah(i),arguments)}function gK(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[F2(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return gK().domain(e).range(t).unknown(r)},Mc.apply(s,arguments)}const nk=new Date,sk=new Date;function ai(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const l=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return l;let u;do l.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<i);return l},s.filter=a=>ai(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!a(i););else for(;--o>=0;)for(;t(i,1),!a(i););}),r&&(s.count=(a,i)=>(nk.setTime(+a),sk.setTime(+i),e(nk),e(sk),Math.floor(r(nk,sk))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?i=>n(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const m_=ai(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);m_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ai(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):m_);m_.range;const Yd=1e3,xc=Yd*60,Xd=xc*60,m0=Xd*24,uN=m0*7,PI=m0*30,ak=m0*365,rm=ai(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yd)},(e,t)=>(t-e)/Yd,e=>e.getUTCSeconds());rm.range;const dN=ai(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yd)},(e,t)=>{e.setTime(+e+t*xc)},(e,t)=>(t-e)/xc,e=>e.getMinutes());dN.range;const fN=ai(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xc)},(e,t)=>(t-e)/xc,e=>e.getUTCMinutes());fN.range;const hN=ai(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yd-e.getMinutes()*xc)},(e,t)=>{e.setTime(+e+t*Xd)},(e,t)=>(t-e)/Xd,e=>e.getHours());hN.range;const mN=ai(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xd)},(e,t)=>(t-e)/Xd,e=>e.getUTCHours());mN.range;const R2=ai(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xc)/m0,e=>e.getDate()-1);R2.range;const P3=ai(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/m0,e=>e.getUTCDate()-1);P3.range;const pK=ai(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/m0,e=>Math.floor(e/m0));pK.range;function rg(e){return ai(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*xc)/uN)}const M3=rg(0),g_=rg(1),W6e=rg(2),H6e=rg(3),Qp=rg(4),G6e=rg(5),V6e=rg(6);M3.range;g_.range;W6e.range;H6e.range;Qp.range;G6e.range;V6e.range;function ng(e){return ai(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/uN)}const F3=ng(0),p_=ng(1),q6e=ng(2),K6e=ng(3),Zp=ng(4),Y6e=ng(5),X6e=ng(6);F3.range;p_.range;q6e.range;K6e.range;Zp.range;Y6e.range;X6e.range;const gN=ai(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());gN.range;const pN=ai(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());pN.range;const g0=ai(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());g0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ai(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});g0.range;const p0=ai(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());p0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ai(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});p0.range;function xK(e,t,r,n,s,a){const i=[[rm,1,Yd],[rm,5,5*Yd],[rm,15,15*Yd],[rm,30,30*Yd],[a,1,xc],[a,5,5*xc],[a,15,15*xc],[a,30,30*xc],[s,1,Xd],[s,3,3*Xd],[s,6,6*Xd],[s,12,12*Xd],[n,1,m0],[n,2,2*m0],[r,1,uN],[t,1,PI],[t,3,3*PI],[e,1,ak]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const g=f&&typeof f.range=="function"?f:l(u,d,f),x=g?g.range(u,+d+1):[];return h?x.reverse():x}function l(u,d,f){const h=Math.abs(d-u)/f,g=JE(([,,v])=>v).right(i,h);if(g===i.length)return e.every(_T(u/ak,d/ak,f));if(g===0)return m_.every(Math.max(_T(u,d,f),1));const[x,y]=i[h/i[g-1][2]<i[g][2]/h?g-1:g];return x.every(y)}return[o,l]}const[J6e,Q6e]=xK(p0,pN,F3,pK,mN,fN),[Z6e,eke]=xK(g0,gN,M3,R2,hN,dN);function ik(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ok(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ty(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function tke(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,u=Cy(s),d=Ey(s),f=Cy(a),h=Ey(a),g=Cy(i),x=Ey(i),y=Cy(o),v=Ey(o),T=Cy(l),k=Ey(l),b={a:B,A:Y,b:I,B:H,c:null,d:II,e:II,f:kke,g:Dke,G:Rke,H:bke,I:_ke,j:Ske,L:yK,m:Tke,M:Cke,p:W,q:R,Q:$I,s:zI,S:Eke,u:Nke,U:Ake,V:jke,w:Pke,W:Mke,x:null,X:null,y:Fke,Y:Oke,Z:Ike,"%":BI},E={a:z,A:G,b:Q,B:re,c:null,d:LI,e:LI,f:zke,g:Jke,G:Zke,H:Lke,I:Bke,j:$ke,L:wK,m:Uke,M:Wke,p:q,q:se,Q:$I,s:zI,S:Hke,u:Gke,U:Vke,V:qke,w:Kke,W:Yke,x:null,X:null,y:Xke,Y:Qke,Z:e8e,"%":BI},N={a:F,A:L,b:V,B:J,c:ne,d:OI,e:OI,f:xke,g:DI,G:FI,H:RI,I:RI,j:hke,L:pke,m:fke,M:mke,p:A,q:dke,Q:vke,s:wke,S:gke,u:ike,U:oke,V:lke,w:ake,W:cke,x:ee,X:ie,y:DI,Y:FI,Z:uke,"%":yke};b.x=P(r,b),b.X=P(n,b),b.c=P(t,b),E.x=P(r,E),E.X=P(n,E),E.c=P(t,E);function P(ce,pe){return function(ke){var le=[],ye=-1,je=0,Ne=ce.length,We,$e,Nt;for(ke instanceof Date||(ke=new Date(+ke));++ye<Ne;)ce.charCodeAt(ye)===37&&(le.push(ce.slice(je,ye)),($e=MI[We=ce.charAt(++ye)])!=null?We=ce.charAt(++ye):$e=We==="e"?" ":"0",(Nt=pe[We])&&(We=Nt(ke,$e)),le.push(We),je=ye+1);return le.push(ce.slice(je,ye)),le.join("")}}function M(ce,pe){return function(ke){var le=Ty(1900,void 0,1),ye=j(le,ce,ke+="",0),je,Ne;if(ye!=ke.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(pe&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(je=ok(Ty(le.y,0,1)),Ne=je.getUTCDay(),je=Ne>4||Ne===0?p_.ceil(je):p_(je),je=P3.offset(je,(le.V-1)*7),le.y=je.getUTCFullYear(),le.m=je.getUTCMonth(),le.d=je.getUTCDate()+(le.w+6)%7):(je=ik(Ty(le.y,0,1)),Ne=je.getDay(),je=Ne>4||Ne===0?g_.ceil(je):g_(je),je=R2.offset(je,(le.V-1)*7),le.y=je.getFullYear(),le.m=je.getMonth(),le.d=je.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Ne="Z"in le?ok(Ty(le.y,0,1)).getUTCDay():ik(Ty(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Ne+5)%7:le.w+le.U*7-(Ne+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,ok(le)):ik(le)}}function j(ce,pe,ke,le){for(var ye=0,je=pe.length,Ne=ke.length,We,$e;ye<je;){if(le>=Ne)return-1;if(We=pe.charCodeAt(ye++),We===37){if(We=pe.charAt(ye++),$e=N[We in MI?pe.charAt(ye++):We],!$e||(le=$e(ce,ke,le))<0)return-1}else if(We!=ke.charCodeAt(le++))return-1}return le}function A(ce,pe,ke){var le=u.exec(pe.slice(ke));return le?(ce.p=d.get(le[0].toLowerCase()),ke+le[0].length):-1}function F(ce,pe,ke){var le=g.exec(pe.slice(ke));return le?(ce.w=x.get(le[0].toLowerCase()),ke+le[0].length):-1}function L(ce,pe,ke){var le=f.exec(pe.slice(ke));return le?(ce.w=h.get(le[0].toLowerCase()),ke+le[0].length):-1}function V(ce,pe,ke){var le=T.exec(pe.slice(ke));return le?(ce.m=k.get(le[0].toLowerCase()),ke+le[0].length):-1}function J(ce,pe,ke){var le=y.exec(pe.slice(ke));return le?(ce.m=v.get(le[0].toLowerCase()),ke+le[0].length):-1}function ne(ce,pe,ke){return j(ce,t,pe,ke)}function ee(ce,pe,ke){return j(ce,r,pe,ke)}function ie(ce,pe,ke){return j(ce,n,pe,ke)}function B(ce){return i[ce.getDay()]}function Y(ce){return a[ce.getDay()]}function I(ce){return l[ce.getMonth()]}function H(ce){return o[ce.getMonth()]}function W(ce){return s[+(ce.getHours()>=12)]}function R(ce){return 1+~~(ce.getMonth()/3)}function z(ce){return i[ce.getUTCDay()]}function G(ce){return a[ce.getUTCDay()]}function Q(ce){return l[ce.getUTCMonth()]}function re(ce){return o[ce.getUTCMonth()]}function q(ce){return s[+(ce.getUTCHours()>=12)]}function se(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var pe=P(ce+="",b);return pe.toString=function(){return ce},pe},parse:function(ce){var pe=M(ce+="",!1);return pe.toString=function(){return ce},pe},utcFormat:function(ce){var pe=P(ce+="",E);return pe.toString=function(){return ce},pe},utcParse:function(ce){var pe=M(ce+="",!0);return pe.toString=function(){return ce},pe}}}var MI={"-":"",_:" ",0:"0"},Ci=/^\s*\d+/,rke=/^%/,nke=/[\\^$*+?|[\]().{}]/g;function Wn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function ske(e){return e.replace(nke,"\\$&")}function Cy(e){return new RegExp("^(?:"+e.map(ske).join("|")+")","i")}function Ey(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function ake(e,t,r){var n=Ci.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function ike(e,t,r){var n=Ci.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function oke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function lke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function cke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function FI(e,t,r){var n=Ci.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function DI(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function uke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dke(e,t,r){var n=Ci.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function fke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function OI(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function hke(e,t,r){var n=Ci.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function RI(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function mke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function gke(e,t,r){var n=Ci.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function pke(e,t,r){var n=Ci.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function xke(e,t,r){var n=Ci.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function yke(e,t,r){var n=rke.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function vke(e,t,r){var n=Ci.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wke(e,t,r){var n=Ci.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function II(e,t){return Wn(e.getDate(),t,2)}function bke(e,t){return Wn(e.getHours(),t,2)}function _ke(e,t){return Wn(e.getHours()%12||12,t,2)}function Ske(e,t){return Wn(1+R2.count(g0(e),e),t,3)}function yK(e,t){return Wn(e.getMilliseconds(),t,3)}function kke(e,t){return yK(e,t)+"000"}function Tke(e,t){return Wn(e.getMonth()+1,t,2)}function Cke(e,t){return Wn(e.getMinutes(),t,2)}function Eke(e,t){return Wn(e.getSeconds(),t,2)}function Nke(e){var t=e.getDay();return t===0?7:t}function Ake(e,t){return Wn(M3.count(g0(e)-1,e),t,2)}function vK(e){var t=e.getDay();return t>=4||t===0?Qp(e):Qp.ceil(e)}function jke(e,t){return e=vK(e),Wn(Qp.count(g0(e),e)+(g0(e).getDay()===4),t,2)}function Pke(e){return e.getDay()}function Mke(e,t){return Wn(g_.count(g0(e)-1,e),t,2)}function Fke(e,t){return Wn(e.getFullYear()%100,t,2)}function Dke(e,t){return e=vK(e),Wn(e.getFullYear()%100,t,2)}function Oke(e,t){return Wn(e.getFullYear()%1e4,t,4)}function Rke(e,t){var r=e.getDay();return e=r>=4||r===0?Qp(e):Qp.ceil(e),Wn(e.getFullYear()%1e4,t,4)}function Ike(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Wn(t/60|0,"0",2)+Wn(t%60,"0",2)}function LI(e,t){return Wn(e.getUTCDate(),t,2)}function Lke(e,t){return Wn(e.getUTCHours(),t,2)}function Bke(e,t){return Wn(e.getUTCHours()%12||12,t,2)}function $ke(e,t){return Wn(1+P3.count(p0(e),e),t,3)}function wK(e,t){return Wn(e.getUTCMilliseconds(),t,3)}function zke(e,t){return wK(e,t)+"000"}function Uke(e,t){return Wn(e.getUTCMonth()+1,t,2)}function Wke(e,t){return Wn(e.getUTCMinutes(),t,2)}function Hke(e,t){return Wn(e.getUTCSeconds(),t,2)}function Gke(e){var t=e.getUTCDay();return t===0?7:t}function Vke(e,t){return Wn(F3.count(p0(e)-1,e),t,2)}function bK(e){var t=e.getUTCDay();return t>=4||t===0?Zp(e):Zp.ceil(e)}function qke(e,t){return e=bK(e),Wn(Zp.count(p0(e),e)+(p0(e).getUTCDay()===4),t,2)}function Kke(e){return e.getUTCDay()}function Yke(e,t){return Wn(p_.count(p0(e)-1,e),t,2)}function Xke(e,t){return Wn(e.getUTCFullYear()%100,t,2)}function Jke(e,t){return e=bK(e),Wn(e.getUTCFullYear()%100,t,2)}function Qke(e,t){return Wn(e.getUTCFullYear()%1e4,t,4)}function Zke(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Zp(e):Zp.ceil(e),Wn(e.getUTCFullYear()%1e4,t,4)}function e8e(){return"+0000"}function BI(){return"%"}function $I(e){return+e}function zI(e){return Math.floor(+e/1e3)}var np,_K,SK;t8e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function t8e(e){return np=tke(e),_K=np.format,np.parse,SK=np.utcFormat,np.utcParse,np}function r8e(e){return new Date(e)}function n8e(e){return e instanceof Date?+e:+new Date(+e)}function xN(e,t,r,n,s,a,i,o,l,u){var d=nN(),f=d.invert,h=d.domain,g=u(".%L"),x=u(":%S"),y=u("%I:%M"),v=u("%I %p"),T=u("%a %d"),k=u("%b %d"),b=u("%B"),E=u("%Y");function N(P){return(l(P)<P?g:o(P)<P?x:i(P)<P?y:a(P)<P?v:n(P)<P?s(P)<P?T:k:r(P)<P?b:E)(P)}return d.invert=function(P){return new Date(f(P))},d.domain=function(P){return arguments.length?h(Array.from(P,n8e)):h().map(r8e)},d.ticks=function(P){var M=h();return e(M[0],M[M.length-1],P??10)},d.tickFormat=function(P,M){return M==null?N:u(M)},d.nice=function(P){var M=h();return(!P||typeof P.range!="function")&&(P=t(M[0],M[M.length-1],P??10)),P?h(cK(M,P)):d},d.copy=function(){return O2(d,xN(e,t,r,n,s,a,i,o,l,u))},d}function s8e(){return Mc.apply(xN(Z6e,eke,g0,gN,M3,R2,hN,dN,rm,_K).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function a8e(){return Mc.apply(xN(J6e,Q6e,p0,pN,F3,P3,mN,fN,rm,SK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function D3(){var e=0,t=1,r,n,s,a,i=Bo,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(s===0?.5:(f=(a(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var g,x;return arguments.length?([g,x]=h,i=f(g,x),u):[i(0),i(1)]}}return u.range=d(E1),u.rangeRound=d(rN),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function ih(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function kK(){var e=ah(D3()(Bo));return e.copy=function(){return ih(e,kK())},T0.apply(e,arguments)}function TK(){var e=iN(D3()).domain([1,10]);return e.copy=function(){return ih(e,TK()).base(e.base())},T0.apply(e,arguments)}function CK(){var e=oN(D3());return e.copy=function(){return ih(e,CK()).constant(e.constant())},T0.apply(e,arguments)}function yN(){var e=lN(D3());return e.copy=function(){return ih(e,yN()).exponent(e.exponent())},T0.apply(e,arguments)}function i8e(){return yN.apply(null,arguments).exponent(.5)}function EK(){var e=[],t=Bo;function r(n){if(n!=null&&!isNaN(n=+n))return t((F2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Df),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>G5e(e,a/n))},r.copy=function(){return EK(t).domain(e)},T0.apply(r,arguments)}function O3(){var e=0,t=.5,r=1,n=1,s,a,i,o,l,u=Bo,d,f=!1,h;function g(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-a)*(n*y<n*a?o:l),u(f?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),a=d(t=+t),i=d(r=+r),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),n=a<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(f=!!y,g):f},g.interpolator=function(y){return arguments.length?(u=y,g):u};function x(y){return function(v){var T,k,b;return arguments.length?([T,k,b]=v,u=y6e(y,[T,k,b]),g):[u(0),u(.5),u(1)]}}return g.range=x(E1),g.rangeRound=x(rN),g.unknown=function(y){return arguments.length?(h=y,g):h},function(y){return d=y,s=y(e),a=y(t),i=y(r),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),n=a<s?-1:1,g}}function NK(){var e=ah(O3()(Bo));return e.copy=function(){return ih(e,NK())},T0.apply(e,arguments)}function AK(){var e=iN(O3()).domain([.1,1,10]);return e.copy=function(){return ih(e,AK()).base(e.base())},T0.apply(e,arguments)}function jK(){var e=oN(O3());return e.copy=function(){return ih(e,jK()).constant(e.constant())},T0.apply(e,arguments)}function vN(){var e=lN(O3());return e.copy=function(){return ih(e,vN()).exponent(e.exponent())},T0.apply(e,arguments)}function o8e(){return vN.apply(null,arguments).exponent(.5)}const Iy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ZE,scaleDiverging:NK,scaleDivergingLog:AK,scaleDivergingPow:vN,scaleDivergingSqrt:o8e,scaleDivergingSymlog:jK,scaleIdentity:lK,scaleImplicit:ST,scaleLinear:oK,scaleLog:uK,scaleOrdinal:QE,scalePoint:K5e,scalePow:cN,scaleQuantile:hK,scaleQuantize:mK,scaleRadial:fK,scaleSequential:kK,scaleSequentialLog:TK,scaleSequentialPow:yN,scaleSequentialQuantile:EK,scaleSequentialSqrt:i8e,scaleSequentialSymlog:CK,scaleSqrt:z6e,scaleSymlog:dK,scaleThreshold:gK,scaleTime:s8e,scaleUtc:a8e,tickFormat:iK},Symbol.toStringTag,{value:"Module"}));var oh=e=>e.chartData,l8e=Bt([oh],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),wN=(e,t,r,n)=>n?l8e(e):oh(e);function e1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(uu(t)&&uu(r))return!0}return!1}function UI(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function c8e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(uu(r))s=r;else if(typeof r=="function")return;if(uu(n))a=n;else if(typeof n=="function")return;var i=[s,a];if(e1(i))return i}}function u8e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(e1(n))return UI(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,i,o;if(s==="auto")t!=null&&(i=Math.min(...t));else if(an(s))i=s;else if(typeof s=="function")try{t!=null&&(i=s(t?.[0]))}catch{}else if(typeof s=="string"&&DR.test(s)){var l=DR.exec(s);if(l==null||t==null)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=t?.[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(an(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[1]))}catch{}else if(typeof a=="string"&&OR.test(a)){var d=OR.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t?.[1];var h=[i,o];if(e1(h))return t==null?h:UI(h,t,r)}}}var N1=1e9,d8e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_N,zs=!0,Ec="[DecimalError] ",xm=Ec+"Invalid argument: ",bN=Ec+"Exponent out of range: ",A1=Math.floor,qh=Math.pow,f8e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ol,yi=1e7,ks=7,PK=9007199254740991,x_=A1(PK/ks),Or={};Or.absoluteValue=Or.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Or.comparedTo=Or.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};Or.decimalPlaces=Or.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ks;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Or.dividedBy=Or.div=function(e){return s0(this,new this.constructor(e))};Or.dividedToIntegerBy=Or.idiv=function(e){var t=this,r=t.constructor;return ps(s0(t,new r(e),0,1),r.precision)};Or.equals=Or.eq=function(e){return!this.cmp(e)};Or.exponent=function(){return za(this)};Or.greaterThan=Or.gt=function(e){return this.cmp(e)>0};Or.greaterThanOrEqualTo=Or.gte=function(e){return this.cmp(e)>=0};Or.isInteger=Or.isint=function(){return this.e>this.d.length-2};Or.isNegative=Or.isneg=function(){return this.s<0};Or.isPositive=Or.ispos=function(){return this.s>0};Or.isZero=function(){return this.s===0};Or.lessThan=Or.lt=function(e){return this.cmp(e)<0};Or.lessThanOrEqualTo=Or.lte=function(e){return this.cmp(e)<1};Or.logarithm=Or.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ol))throw Error(Ec+"NaN");if(r.s<1)throw Error(Ec+(r.s?"NaN":"-Infinity"));return r.eq(Ol)?new n(0):(zs=!1,t=s0(Kv(r,a),Kv(e,a),a),zs=!0,ps(t,s))};Or.minus=Or.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DK(t,e):MK(t,(e.s=-e.s,e))};Or.modulo=Or.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Ec+"NaN");return r.s?(zs=!1,t=s0(r,e,0,1).times(e),zs=!0,r.minus(t)):ps(new n(r),s)};Or.naturalExponential=Or.exp=function(){return FK(this)};Or.naturalLogarithm=Or.ln=function(){return Kv(this)};Or.negated=Or.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Or.plus=Or.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MK(t,e):DK(t,(e.s=-e.s,e))};Or.precision=Or.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xm+e);if(t=za(s)+1,n=s.d.length-1,r=n*ks+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Or.squareRoot=Or.sqrt=function(){var e,t,r,n,s,a,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Ec+"NaN")}for(e=za(o),zs=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=Gu(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=A1((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=i=r+3;;)if(a=n,n=a.plus(s0(o,a,i+2)).times(.5),Gu(a.d).slice(0,i)===(t=Gu(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(ps(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;i+=4}return zs=!0,ps(n,r)};Or.times=Or.mul=function(e){var t,r,n,s,a,i,o,l,u,d=this,f=d.constructor,h=d.d,g=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=g.length,l<u&&(a=h,h=g,g=a,i=l,l=u,u=i),a=[],i=l+u,n=i;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,s=l+n;s>n;)o=a[s]+g[n]*h[s-n-1]+t,a[s--]=o%yi|0,t=o/yi|0;a[s]=(a[s]+t)%yi|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,zs?ps(e,f.precision):e};Or.toDecimalPlaces=Or.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ed(e,0,N1),t===void 0?t=n.rounding:ed(t,0,8),ps(r,e+za(r)+1,t))};Or.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=$m(n,!0):(ed(e,0,N1),t===void 0?t=s.rounding:ed(t,0,8),n=ps(new s(n),e+1,t),r=$m(n,!0,e+1)),r};Or.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?$m(s):(ed(e,0,N1),t===void 0?t=a.rounding:ed(t,0,8),n=ps(new a(s),e+za(s)+1,t),r=$m(n.abs(),!1,e+za(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Or.toInteger=Or.toint=function(){var e=this,t=e.constructor;return ps(new t(e),za(e)+1,t.rounding)};Or.toNumber=function(){return+this};Or.toPower=Or.pow=function(e){var t,r,n,s,a,i,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Ol);if(o=new l(o),!o.s){if(e.s<1)throw Error(Ec+"Infinity");return o}if(o.eq(Ol))return o;if(n=l.precision,e.eq(Ol))return ps(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,a=o.s,i){if((r=d<0?-d:d)<=PK){for(s=new l(Ol),t=Math.ceil(n/ks+4),zs=!1;r%2&&(s=s.times(o),HI(s.d,t)),r=A1(r/2),r!==0;)o=o.times(o),HI(o.d,t);return zs=!0,e.s<0?new l(Ol).div(s):ps(s,n)}}else if(a<0)throw Error(Ec+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,zs=!1,s=e.times(Kv(o,n+u)),zs=!0,s=FK(s),s.s=a,s};Or.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=za(s),n=$m(s,r<=a.toExpNeg||r>=a.toExpPos)):(ed(e,1,N1),t===void 0?t=a.rounding:ed(t,0,8),s=ps(new a(s),e,t),r=za(s),n=$m(s,e<=r||r<=a.toExpNeg,e)),n};Or.toSignificantDigits=Or.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ed(e,1,N1),t===void 0?t=n.rounding:ed(t,0,8)),ps(new n(r),e,t)};Or.toString=Or.valueOf=Or.val=Or.toJSON=Or[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=za(e),r=e.constructor;return $m(e,t<=r.toExpNeg||t>=r.toExpPos)};function MK(e,t){var r,n,s,a,i,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),zs?ps(t,f):t;if(l=e.d,u=t.d,i=e.e,s=t.e,l=l.slice(),a=i-s,a){for(a<0?(n=l,a=-a,o=u.length):(n=u,s=i,o=l.length),i=Math.ceil(f/ks),o=i>o?i+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/yi|0,l[a]%=yi;for(r&&(l.unshift(r),++s),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=s,zs?ps(t,f):t}function ed(e,t,r){if(e!==~~e||e<t||e>r)throw Error(xm+e)}function Gu(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)n=e[t]+"",r=ks-n.length,r&&(a+=vf(r)),a+=n;i=e[t],n=i+"",r=ks-n.length,r&&(a+=vf(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var s0=(function(){function e(n,s){var a,i=0,o=n.length;for(n=n.slice();o--;)a=n[o]*s+i,n[o]=a%yi|0,i=a/yi|0;return i&&n.unshift(i),n}function t(n,s,a,i){var o,l;if(a!=i)l=a>i?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=s[o]){l=n[o]>s[o]?1:-1;break}return l}function r(n,s,a){for(var i=0;a--;)n[a]-=i,i=n[a]<s[a]?1:0,n[a]=i*yi+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,i){var o,l,u,d,f,h,g,x,y,v,T,k,b,E,N,P,M,j,A=n.constructor,F=n.s==s.s?1:-1,L=n.d,V=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(Ec+"Division by zero");for(l=n.e-s.e,M=V.length,N=L.length,g=new A(F),x=g.d=[],u=0;V[u]==(L[u]||0);)++u;if(V[u]>(L[u]||0)&&--l,a==null?k=a=A.precision:i?k=a+(za(n)-za(s))+1:k=a,k<0)return new A(0);if(k=k/ks+2|0,u=0,M==1)for(d=0,V=V[0],k++;(u<N||d)&&k--;u++)b=d*yi+(L[u]||0),x[u]=b/V|0,d=b%V|0;else{for(d=yi/(V[0]+1)|0,d>1&&(V=e(V,d),L=e(L,d),M=V.length,N=L.length),E=M,y=L.slice(0,M),v=y.length;v<M;)y[v++]=0;j=V.slice(),j.unshift(0),P=V[0],V[1]>=yi/2&&++P;do d=0,o=t(V,y,M,v),o<0?(T=y[0],M!=v&&(T=T*yi+(y[1]||0)),d=T/P|0,d>1?(d>=yi&&(d=yi-1),f=e(V,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,M<h?j:V,h))):(d==0&&(o=d=1),f=V.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(V,y,M,v),o<1&&(d++,r(y,M<v?j:V,v))),v=y.length):o===0&&(d++,y=[0]),x[u++]=d,o&&y[0]?y[v++]=L[E]||0:(y=[L[E]],v=1);while((E++<N||y[0]!==void 0)&&k--)}return x[0]||x.shift(),g.e=l,ps(g,i?a+za(g)+1:a)}})();function FK(e,t){var r,n,s,a,i,o,l=0,u=0,d=e.constructor,f=d.precision;if(za(e)>16)throw Error(bN+za(e));if(!e.s)return new d(Ol);for(zs=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(qh(2,u))/Math.LN10*2+5|0,o+=n,r=s=a=new d(Ol),d.precision=o;;){if(s=ps(s.times(e),o),r=r.times(++l),i=a.plus(s0(s,r,o)),Gu(i.d).slice(0,o)===Gu(a.d).slice(0,o)){for(;u--;)a=ps(a.times(a),o);return d.precision=f,t==null?(zs=!0,ps(a,f)):a}a=i}}function za(e){for(var t=e.e*ks,r=e.d[0];r>=10;r/=10)t++;return t}function lk(e,t,r){if(t>e.LN10.sd())throw zs=!0,r&&(e.precision=r),Error(Ec+"LN10 precision limit exceeded");return ps(new e(e.LN10),t)}function vf(e){for(var t="";e--;)t+="0";return t}function Kv(e,t){var r,n,s,a,i,o,l,u,d,f=1,h=10,g=e,x=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(Ec+(g.s?"NaN":"-Infinity"));if(g.eq(Ol))return new y(0);if(t==null?(zs=!1,u=v):u=t,g.eq(10))return t==null&&(zs=!0),lk(y,u);if(u+=h,y.precision=u,r=Gu(x),n=r.charAt(0),a=za(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Gu(g.d),n=r.charAt(0),f++;a=za(g),n>1?(g=new y("0."+r),a++):g=new y(n+"."+r.slice(1))}else return l=lk(y,u+2,v).times(a+""),g=Kv(new y(n+"."+r.slice(1)),u-h).plus(l),y.precision=v,t==null?(zs=!0,ps(g,v)):g;for(o=i=g=s0(g.minus(Ol),g.plus(Ol),u),d=ps(g.times(g),u),s=3;;){if(i=ps(i.times(d),u),l=o.plus(s0(i,new y(s),u)),Gu(l.d).slice(0,u)===Gu(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(lk(y,u+2,v).times(a+""))),o=s0(o,new y(f),u),y.precision=v,t==null?(zs=!0,ps(o,v)):o;o=l,s+=2}}function WI(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=A1(r/ks),e.d=[],n=(r+1)%ks,r<0&&(n+=ks),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=ks;n<s;)e.d.push(+t.slice(n,n+=ks));t=t.slice(n),n=ks-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),zs&&(e.e>x_||e.e<-x_))throw Error(bN+r)}else e.s=0,e.e=0,e.d=[0];return e}function ps(e,t,r){var n,s,a,i,o,l,u,d,f=e.d;for(i=1,a=f[0];a>=10;a/=10)i++;if(n=t-i,n<0)n+=ks,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/ks),a=f.length,d>=a)return e;for(u=a=f[d],i=1;a>=10;a/=10)i++;n%=ks,s=n-ks+i}if(r!==void 0&&(a=qh(10,i-s-1),o=u/a%10|0,l=t<0||f[d+1]!==void 0||u%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?s>0?u/qh(10,i-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=za(e),f.length=1,t=t-a-1,f[0]=qh(10,(ks-t%ks)%ks),e.e=A1(-t/ks)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=qh(10,ks-n),f[d]=s>0?(u/qh(10,i-s)%qh(10,s)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==yi&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=yi)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(zs&&(e.e>x_||e.e<-x_))throw Error(bN+za(e));return e}function DK(e,t){var r,n,s,a,i,o,l,u,d,f,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),zs?ps(t,g):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,o=f.length):(r=f,n=u,o=l.length),s=Math.max(Math.ceil(g/ks),o)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=l.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(l[s]!=f[s]){d=l[s]<f[s];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,s=f.length-o;s>0;--s)l[o++]=0;for(s=f.length;s>i;){if(l[--s]<f[s]){for(a=s;a&&l[--a]===0;)l[a]=yi-1;--l[a],l[s]+=yi}l[s]-=f[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,zs?ps(t,g):t):new h(0)}function $m(e,t,r){var n,s=za(e),a=Gu(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+vf(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+vf(-s-1)+a,r&&(n=r-i)>0&&(a+=vf(n))):s>=i?(a+=vf(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+vf(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=vf(n))),e.s<0?"-"+a:a}function HI(e,t){if(e.length>t)return e.length=t,!0}function OK(e){var t,r,n;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(xm+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return WI(i,a.toString())}else if(typeof a!="string")throw Error(xm+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,f8e.test(a))WI(i,a);else throw Error(xm+a)}if(s.prototype=Or,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=OK,s.config=s.set=h8e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function h8e(e){if(!e||typeof e!="object")throw Error(Ec+"Object expected");var t,r,n,s=["precision",1,N1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(A1(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(xm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(xm+r+": "+n);return this}var _N=OK(d8e);Ol=new _N(1);const ns=_N;var m8e=e=>e,RK={},IK=e=>e===RK,GI=e=>function t(){return arguments.length===0||arguments.length===1&&IK(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},LK=(e,t)=>e===1?t:GI(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(i=>i!==RK).length;return a>=e?t(...n):LK(e-a,GI(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=n.map(d=>IK(d)?o.shift():d);return t(...u,...o)}))}),R3=e=>LK(e.length,e),ET=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},g8e=R3((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),p8e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return m8e;var s=r.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce((o,l)=>l(o),a(...arguments))}},NT=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),BK=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((i,o)=>{var l;return i===((l=t)===null||l===void 0?void 0:l[o])})||(t=s,r=e(...s)),r}};function $K(e){var t;return e===0?t=1:t=Math.floor(new ns(e).abs().log(10).toNumber())+1,t}function zK(e,t,r){for(var n=new ns(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}R3((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});R3((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});R3((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var UK=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},WK=(e,t,r)=>{if(e.lte(0))return new ns(0);var n=$K(e.toNumber()),s=new ns(10).pow(n),a=e.div(s),i=n!==1?.05:.1,o=new ns(Math.ceil(a.div(i).toNumber())).add(r).mul(i),l=o.mul(s);return t?new ns(l.toNumber()):new ns(Math.ceil(l.toNumber()))},x8e=(e,t,r)=>{var n=new ns(1),s=new ns(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new ns(10).pow($K(e)-1),s=new ns(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new ns(Math.floor(e)))}else e===0?s=new ns(Math.floor((t-1)/2)):r||(s=new ns(Math.floor(e)));var i=Math.floor((t-1)/2),o=p8e(g8e(l=>s.add(new ns(l-i).mul(n)).toNumber()),ET);return o(0,t)},HK=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ns(0),tickMin:new ns(0),tickMax:new ns(0)};var i=WK(new ns(r).sub(t).div(n-1),s,a),o;t<=0&&r>=0?o=new ns(0):(o=new ns(t).add(r).div(2),o=o.sub(new ns(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ns(r).sub(o).div(i).toNumber()),d=l+u+1;return d>n?HK(t,r,n,s,a+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:i,tickMin:o.sub(new ns(l).mul(i)),tickMax:o.add(new ns(u).mul(i))})};function y8e(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[i,o]=UK([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...ET(0,n-1).map(()=>1/0)]:[...ET(0,n-1).map(()=>-1/0),o];return t>r?NT(l):l}if(i===o)return x8e(i,n,s);var{step:u,tickMin:d,tickMax:f}=HK(i,o,a,s,0),h=zK(d,f.add(new ns(.1).mul(u)),u);return t>r?NT(h):h}function v8e(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,i]=UK([r,n]);if(a===-1/0||i===1/0)return[r,n];if(a===i)return[a];var o=Math.max(t,2),l=WK(new ns(i).sub(a).div(o-1),s,0),u=[...zK(new ns(a),new ns(i),l),i];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?NT(u):u}var w8e=BK(y8e),b8e=BK(v8e),_8e=e=>e.rootProps.barCategoryGap,I3=e=>e.rootProps.stackOffset,SN=e=>e.options.chartName,kN=e=>e.rootProps.syncId,GK=e=>e.rootProps.syncMethod,TN=e=>e.options.eventEmitter,Gd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Cl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},L3=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},S8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Gd.angleAxisId,includeHidden:!1,name:void 0,reversed:Gd.reversed,scale:Gd.scale,tick:Gd.tick,tickCount:void 0,ticks:void 0,type:Gd.type,unit:void 0},k8e={allowDataOverflow:Cl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cl.scale,tick:Cl.tick,tickCount:Cl.tickCount,ticks:void 0,type:Cl.type,unit:void 0},T8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Gd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gd.scale,tick:Gd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},C8e={allowDataOverflow:Cl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cl.scale,tick:Cl.tick,tickCount:Cl.tickCount,ticks:void 0,type:"category",unit:void 0},CN=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?T8e:S8e,EN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?C8e:k8e,B3=e=>e.polarOptions,NN=Bt([S0,k0,Qi],F3e),VK=Bt([B3,NN],(e,t)=>{if(e!=null)return Vf(e.innerRadius,t,0)}),qK=Bt([B3,NN],(e,t)=>{if(e!=null)return Vf(e.outerRadius,t,t*.8)}),E8e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},KK=Bt([B3],E8e);Bt([CN,KK],L3);var YK=Bt([NN,VK,qK],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Bt([EN,YK],L3);var XK=Bt([Fs,B3,VK,qK,S0,k0],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:l,endAngle:u}=t;return{cx:Vf(i,s,s/2),cy:Vf(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),Wa=(e,t)=>t,$3=(e,t,r)=>r;function JK(e){return e?.id}var ii=e=>{var t=Fs(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},j1=e=>e.tooltip.settings.axisId,Ei=e=>{var t=ii(e),r=j1(e);return I2(e,t,r)},QK=Bt([Ei],e=>e?.dataKey);function ZK(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,i=new Map;return e.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:n;if(!(u==null||u.length===0)){var d=JK(o);u.forEach((f,h)=>{var g=a==null||s?h:String(Uo(f,a,null)),x=Uo(f,o.dataKey,0),y;i.has(g)?y=i.get(g):y={},Object.assign(y,{[d]:x}),i.set(g,y)})}}),Array.from(i.values())}function AN(e){return e.stackId!=null&&e.dataKey!=null}function VI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function y_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VI(Object(r),!0).forEach(function(n){N8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N8e(e,t,r){return(t=A8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A8e(e){var t=j8e(e,"string");return typeof t=="symbol"?t:t+""}function j8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AT=[0,"auto"],kl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},eY=(e,t)=>e.cartesianAxis.xAxis[t],C0=(e,t)=>{var r=eY(e,t);return r??kl},Tl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:AT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:M2},tY=(e,t)=>e.cartesianAxis.yAxis[t],E0=(e,t)=>{var r=tY(e,t);return r??Tl},P8e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},jN=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??P8e},ml=(e,t,r)=>{switch(t){case"xAxis":return C0(e,r);case"yAxis":return E0(e,r);case"zAxis":return jN(e,r);case"angleAxis":return CN(e,r);case"radiusAxis":return EN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},M8e=(e,t,r)=>{switch(t){case"xAxis":return C0(e,r);case"yAxis":return E0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},I2=(e,t,r)=>{switch(t){case"xAxis":return C0(e,r);case"yAxis":return E0(e,r);case"angleAxis":return CN(e,r);case"radiusAxis":return EN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function nY(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var sY=e=>e.graphicalItems.cartesianItems,F8e=Bt([Wa,$3],nY),aY=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),L2=Bt([sY,ml,F8e],aY),iY=Bt([L2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(AN)),oY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),lY=Bt([L2],oY),cY=e=>e.map(t=>t.data).filter(Boolean).flat(1),D8e=Bt([L2],cY),uY=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},PN=Bt([D8e,wN],uY),dY=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Uo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Uo(s,n)}))):e.map(n=>({value:n})),z3=Bt([PN,ml,L2],dY);function fY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function sg(e){return e.filter(t=>Zu(t)||t instanceof Date).map(Number).filter(t=>Tc(t)===!1)}function O8e(e,t,r){return!r||typeof t!="number"||Tc(t)?[]:r.length?sg(r.flatMap(n=>{var s=Uo(e,n.dataKey),a,i;if(Array.isArray(s)?[a,i]=s:a=i=s,!(!uu(a)||!uu(i)))return[t-a,t+i]})):[]}var R8e=Bt([iY,wN,Ei],ZK),hY=(e,t,r)=>{var n={},s=t.reduce((a,i)=>(i.stackId==null||(a[i.stackId]==null&&(a[i.stackId]=[]),a[i.stackId].push(i)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[i,o]=a,l=o.map(JK);return[i,{stackedData:K3e(e,l,r),graphicalItems:o}]}))},I8e=Bt([R8e,iY,I3],hY),mY=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var a=J3e(e,n,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},L8e=Bt([I8e,oh,Wa],mY),gY=(e,t,r,n,s)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,l,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>fY(s,f)),d=Uo(a,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:O8e(a,d,u)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:Uo(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),U3=e=>e.errorBars,pY=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>fY(r,n));Bt([lY,U3,Wa],pY);var B8e=Bt([PN,ml,lY,U3,Wa],gY);function $8e(e){var{value:t}=e;if(Zu(t)||t instanceof Date)return t}var qI=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=sg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},z8e=(e,t,r)=>{var n=e.map($8e).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&jV(n))?Xq(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},MN=e=>{var t;if(e==null||!("domain"in e))return AT;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=sg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:AT},v_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),i=Math.min(...a),o=Math.max(...a);return[i,o]}},xY=e=>e.referenceElements.dots,P1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),U8e=Bt([xY,Wa,$3],P1),yY=e=>e.referenceElements.areas,W8e=Bt([yY,Wa,$3],P1),vY=e=>e.referenceElements.lines,H8e=Bt([vY,Wa,$3],P1),wY=(e,t)=>{var r=sg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},G8e=Bt(U8e,Wa,wY),bY=(e,t)=>{var r=sg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},V8e=Bt([W8e,Wa],bY),_Y=(e,t)=>{var r=sg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},q8e=Bt(H8e,Wa,_Y),K8e=Bt(G8e,q8e,V8e,(e,t,r)=>v_(e,r,t)),Y8e=Bt([ml],MN),SY=(e,t,r,n,s,a,i)=>{var o=c8e(t,e.allowDataOverflow);if(o!=null)return o;var l=a==="vertical"&&i==="xAxis"||a==="horizontal"&&i==="yAxis",u=l?v_(r,s,qI(n)):v_(s,qI(n));return u8e(t,u,e.allowDataOverflow)},X8e=Bt([ml,Y8e,L8e,B8e,K8e,Fs,Wa],SY),J8e=[0,1],kY=(e,t,r,n,s,a,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:l}=e,u=sh(t,a);return u&&o==null?Xq(0,r.length):l==="category"?z8e(n,e,u):s==="expand"?J8e:i}},FN=Bt([ml,Fs,PN,z3,I3,Wa,X8e],kY),TY=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:i}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(IE(a));return o in Iy?o:"point"}}},B2=Bt([ml,Fs,rY,SN,Wa],TY);function Q8e(e){if(e!=null){if(e in Iy)return Iy[e]();var t="scale".concat(IE(e));if(t in Iy)return Iy[t]()}}function DN(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=Q8e(t);if(s!=null){var a=s.domain(r).range(n);return H3e(a),a}}}var CY=(e,t,r)=>{var n=MN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&e1(e))return w8e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&e1(e))return b8e(e,t.tickCount,t.allowDecimals)}},ON=Bt([FN,I2,B2],CY),EY=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&e1(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],i=t[1],o=r[r.length-1];return[Math.min(s,a),Math.max(i,o)]}return t},Z8e=Bt([ml,FN,ON,Wa],EY),eTe=Bt(z3,ml,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(sg(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var i=n[a+1]-n[a];r=Math.min(r,i)}return r/s}}),NY=Bt(eTe,Fs,_8e,Qi,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!uu(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var i=Vf(r,e*a),o=e*a/2;return o-i-(o-i)/a*i}return 0}),tTe=(e,t)=>{var r=C0(e,t);return r==null||typeof r.padding!="string"?0:NY(e,"xAxis",t,r.padding)},rTe=(e,t)=>{var r=E0(e,t);return r==null||typeof r.padding!="string"?0:NY(e,"yAxis",t,r.padding)},nTe=Bt(C0,tTe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),sTe=Bt(E0,rTe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),aTe=Bt([Qi,nTe,A3,N3,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),iTe=Bt([Qi,Fs,sTe,A3,N3,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:i}=s;return a?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),$2=(e,t,r,n)=>{var s;switch(t){case"xAxis":return aTe(e,r,n);case"yAxis":return iTe(e,r,n);case"zAxis":return(s=jN(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return KK(e);case"radiusAxis":return YK(e,r);default:return}},AY=Bt([ml,$2],L3),M1=Bt([ml,B2,Z8e,AY],DN);Bt([L2,U3,Wa],pY);function jY(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var W3=(e,t)=>t,H3=(e,t,r)=>r,oTe=Bt(C3,W3,H3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(jY)),lTe=Bt(E3,W3,H3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(jY)),PY=(e,t)=>({width:e.width,height:t.height}),cTe=(e,t)=>{var r=typeof t.width=="number"?t.width:M2;return{width:r,height:e.height}},uTe=Bt(Qi,C0,PY),dTe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},fTe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},hTe=Bt(k0,Qi,oTe,W3,H3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var l=PY(t,o);i==null&&(i=dTe(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;a[o.id]=i-Number(u)*l.height,i+=(u?-1:1)*l.height}),a}),mTe=Bt(S0,Qi,lTe,W3,H3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var l=cTe(t,o);i==null&&(i=fTe(t,n,e));var u=n==="left"&&!s||n==="right"&&s;a[o.id]=i-Number(u)*l.width,i+=(u?-1:1)*l.width}),a}),gTe=(e,t)=>{var r=C0(e,t);if(r!=null)return hTe(e,r.orientation,r.mirror)},pTe=Bt([Qi,C0,gTe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),xTe=(e,t)=>{var r=E0(e,t);if(r!=null)return mTe(e,r.orientation,r.mirror)},yTe=Bt([Qi,E0,xTe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),vTe=Bt(Qi,E0,(e,t)=>{var r=typeof t.width=="number"?t.width:M2;return{width:r,height:e.height}}),MY=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:i}=r,o=sh(e,n),l=t.map(u=>u.value);if(i&&o&&a==="category"&&s&&jV(l))return l}},RN=Bt([Fs,z3,ml,Wa],MY),FY=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,i=sh(e,n);if(i&&(s==="number"||a!=="auto"))return t.map(o=>o.value)}},IN=Bt([Fs,z3,I2,Wa],FY),KI=Bt([Fs,M8e,B2,M1,RN,IN,$2,ON,Wa],(e,t,r,n,s,a,i,o,l)=>{if(t==null)return null;var u=sh(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:s,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),wTe=(e,t,r,n,s,a,i,o,l)=>{if(!(t==null||n==null)){var u=sh(e,l),{type:d,ticks:f,tickCount:h}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/g:0;x=l==="angleAxis"&&a!=null&&a.length>=2?pc(a[0]-a[1])*2*x:x;var y=f||s;if(y){var v=y.map((T,k)=>{var b=i?i.indexOf(T):T;return{index:k,coordinate:n(b)+x,value:T,offset:x}});return v.filter(T=>!Tc(T.coordinate))}return u&&o?o.map((T,k)=>({coordinate:n(T)+x,value:T,index:k,offset:x})):n.ticks?n.ticks(h).map(T=>({coordinate:n(T)+x,value:T,offset:x})):n.domain().map((T,k)=>({coordinate:n(T)+x,value:i?i[T]:T,index:k,offset:x}))}},DY=Bt([Fs,I2,B2,M1,ON,$2,RN,IN,Wa],wTe),bTe=(e,t,r,n,s,a,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=sh(e,i),{tickCount:l}=t,u=0;return u=i==="angleAxis"&&n?.length>=2?pc(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},OY=Bt([Fs,I2,M1,$2,RN,IN,Wa],bTe),RY=Bt(ml,M1,(e,t)=>{if(!(e==null||t==null))return y_(y_({},e),{},{scale:t})}),_Te=Bt([ml,B2,FN,AY],DN);Bt((e,t,r)=>jN(e,r),_Te,(e,t)=>{if(!(e==null||t==null))return y_(y_({},e),{},{scale:t})});var STe=Bt([Fs,C3,E3],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),IY=e=>e.options.defaultTooltipEventType,LY=e=>e.options.validateTooltipEventTypes;function BY(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function LN(e,t){var r=IY(e),n=LY(e);return BY(t,r,n)}function kTe(e){return qr(t=>LN(t,e))}var $Y=(e,t)=>{var r,n=Number(t);if(!(Tc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},TTe=e=>e.tooltip.settings,bf={active:!1,index:null,dataKey:void 0,coordinate:void 0},CTe={itemInteraction:{click:bf,hover:bf},axisInteraction:{click:bf,hover:bf},keyboardInteraction:bf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},zY=Wl({name:"tooltip",initialState:CTe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=n0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:ETe,removeTooltipEntrySettings:NTe,setTooltipSettingsState:ATe,setActiveMouseOverItemIndex:jTe,mouseLeaveItem:Sje,mouseLeaveChart:UY,setActiveClickItemIndex:kje,setMouseOverAxisIndex:WY,setMouseClickAxisIndex:PTe,setSyncInteraction:jT,setKeyboardInteraction:PT}=zY.actions,MTe=zY.reducer;function YI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(r),!0).forEach(function(n){FTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FTe(e,t,r){return(t=DTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DTe(e){var t=OTe(e,"string");return typeof t=="symbol"?t:t+""}function OTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RTe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function ITe(e){return e.index!=null}var HY=(e,t,r,n)=>{if(t==null)return bf;var s=RTe(e,t,r);if(s==null)return bf;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(ITe(s)){if(a)return Rb(Rb({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Rb(Rb({},bf),{},{coordinate:s.coordinate})},BN=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!uu(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},GY=(e,t,r,n,s,a,i,o)=>{if(!(a==null||o==null)){var l=i[0],u=l==null?void 0:o(l.positions,a);if(u!=null)return u;var d=s?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},VY=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var i;return((i=a.settings)===null||i===void 0?void 0:i.dataKey)===s})},z2=e=>e.options.tooltipPayloadSearcher,F1=e=>e.tooltip;function XI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XI(Object(r),!0).forEach(function(n){LTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LTe(e,t,r){return(t=BTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BTe(e){var t=$Te(e,"string");return typeof t=="symbol"?t:t+""}function $Te(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zTe(e,t){return e??t}var qY=(e,t,r,n,s,a,i)=>{if(!(t==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,g)=>{var x,{dataDefinedOnItem:y,settings:v}=g,T=zTe(y,o),k=Array.isArray(T)?Pq(T,u,d):T,b=(x=v?.dataKey)!==null&&x!==void 0?x:n,E=v?.nameKey,N;if(n&&Array.isArray(k)&&!Array.isArray(k[0])&&i==="axis"?N=PV(k,n,s):N=a(k,t,l,E),Array.isArray(N))N.forEach(M=>{var j=JI(JI({},v),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});h.push(RR({tooltipEntrySettings:j,dataKey:M.dataKey,payload:M.payload,value:Uo(M.payload,M.dataKey),name:M.name}))});else{var P;h.push(RR({tooltipEntrySettings:v,dataKey:b,payload:N,value:Uo(N,b),name:(P=Uo(N,E))!==null&&P!==void 0?P:v?.name}))}return h},f)}},$N=Bt([Ei,Fs,rY,SN,ii],TY),UTe=Bt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),WTe=Bt([ii,j1],nY),U2=Bt([UTe,Ei,WTe],aY),HTe=Bt([U2],e=>e.filter(AN)),GTe=Bt([U2],cY),D1=Bt([GTe,oh],uY),VTe=Bt([HTe,oh,Ei],ZK),zN=Bt([D1,Ei,U2],dY),qTe=Bt([Ei],MN),KTe=Bt([U2],e=>e.filter(AN)),YTe=Bt([VTe,KTe,I3],hY),XTe=Bt([YTe,oh,ii],mY),JTe=Bt([U2],oY),QTe=Bt([D1,Ei,JTe,U3,ii],gY),ZTe=Bt([xY,ii,j1],P1),e7e=Bt([ZTe,ii],wY),t7e=Bt([yY,ii,j1],P1),r7e=Bt([t7e,ii],bY),n7e=Bt([vY,ii,j1],P1),s7e=Bt([n7e,ii],_Y),a7e=Bt([e7e,s7e,r7e],v_),i7e=Bt([Ei,qTe,XTe,QTe,a7e,Fs,ii],SY),KY=Bt([Ei,Fs,D1,zN,I3,ii,i7e],kY),o7e=Bt([KY,Ei,$N],CY),l7e=Bt([Ei,KY,o7e,ii],EY),YY=e=>{var t=ii(e),r=j1(e),n=!1;return $2(e,t,r,n)},XY=Bt([Ei,YY],L3),JY=Bt([Ei,$N,l7e,XY],DN),c7e=Bt([Fs,zN,Ei,ii],MY),u7e=Bt([Fs,zN,Ei,ii],FY),d7e=(e,t,r,n,s,a,i,o)=>{if(t){var{type:l}=t,u=sh(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&s!=null&&s?.length>=2?pc(s[0]-s[1])*2*f:f,u&&i?i.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:a?a[h]:h,index:g,offset:f}))}}},N0=Bt([Fs,Ei,$N,JY,YY,c7e,u7e,ii],d7e),UN=Bt([IY,LY,TTe],(e,t,r)=>BY(r.shared,e,t)),QY=e=>e.tooltip.settings.trigger,WN=e=>e.tooltip.settings.defaultIndex,G3=Bt([F1,UN,QY,WN],HY),Yv=Bt([G3,D1],BN),ZY=Bt([N0,Yv],$Y),f7e=Bt([G3],e=>{if(e)return e.dataKey}),eX=Bt([F1,UN,QY,WN],VY),h7e=Bt([S0,k0,Fs,Qi,N0,WN,eX,z2],GY),m7e=Bt([G3,h7e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),g7e=Bt([G3],e=>e.active),p7e=Bt([eX,Yv,oh,QK,ZY,z2,UN],qY),x7e=Bt([p7e],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function QI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QI(Object(r),!0).forEach(function(n){y7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y7e(e,t,r){return(t=v7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v7e(e){var t=w7e(e,"string");return typeof t=="symbol"?t:t+""}function w7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b7e=()=>qr(Ei),_7e=()=>{var e=b7e(),t=qr(N0),r=qr(JY);return hT(ZI(ZI({},e),{},{scale:r}),t)},S7e=()=>qr(SN),HN=(e,t)=>t,tX=(e,t,r)=>r,GN=(e,t,r,n)=>n,k7e=Bt(N0,e=>w3(e,t=>t.coordinate)),VN=Bt([F1,HN,tX,GN],HY),rX=Bt([VN,D1],BN),T7e=(e,t,r)=>{if(t!=null){var n=F1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},nX=Bt([F1,HN,tX,GN],VY),w_=Bt([S0,k0,Fs,Qi,N0,GN,nX,z2],GY),C7e=Bt([VN,w_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),sX=Bt(N0,rX,$Y),E7e=Bt([nX,rX,oh,QK,sX,z2,HN],qY),N7e=Bt([VN],e=>({isActive:e.active,activeIndex:e.index})),A7e=(e,t,r,n,s,a,i,o)=>{if(!(!e||!t||!n||!s||!a)){var l=Q3e(e.chartX,e.chartY,t,r,o);if(l){var u=eSe(l,t),d=U3e(u,i,a,n,s),f=Z3e(t,a,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function MT(){return MT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MT.apply(null,arguments)}function eL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ib(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eL(Object(r),!0).forEach(function(n){j7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j7e(e,t,r){return(t=P7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P7e(e){var t=M7e(e,"string");return typeof t=="symbol"?t:t+""}function M7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F7e(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:a,layout:i,cursor:o,tooltipEventType:l,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&l!=="axis")return null;var g,x;if(u==="ScatterChart")g=d,x=GSe;else if(u==="BarChart")g=VSe(i,d,s,a),x=S5e;else if(i==="radial"){var{cx:y,cy:v,radius:T,startAngle:k,endAngle:b}=Kq(d);g={cx:y,cy:v,startAngle:k,endAngle:b,innerRadius:T,outerRadius:T},x=E5e}else g={points:N5e(i,d,s)},x=Uq;var E=typeof o=="object"&&"className"in o?o.className:void 0,N=Ib(Ib(Ib(Ib({stroke:"#ccc",pointerEvents:"none"},s),g),Ji(o,!1)),{},{payload:f,payloadIndex:h,className:Ps("recharts-tooltip-cursor",E)});return _.isValidElement(o)?_.cloneElement(o,N):_.createElement(x,N)}function D7e(e){var t=_7e(),r=Iq(),n=XE(),s=S7e();return _.createElement(F7e,MT({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var aX=_.createContext(null),O7e=()=>_.useContext(aX),ck={exports:{}},tL;function R7e(){return tL||(tL=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,f||l,h),x=r?r+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],g]:l._events[x].push(g):(l._events[x]=g,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,x=new Array(g);h<g;h++)x[h]=f[h].fn;return x},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,g,x){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],T=arguments.length,k,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),T){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,g),!0;case 6:return v.fn.call(v.context,d,f,h,g,x),!0}for(b=1,k=new Array(T-1);b<T;b++)k[b-1]=arguments[b];v.fn.apply(v.context,k)}else{var E=v.length,N;for(b=0;b<E;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),T){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!k)for(N=1,k=new Array(T-1);N<T;N++)k[N-1]=arguments[N];v[b].fn.apply(v[b].context,k)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return i(this,g),this;var x=this._events[g];if(x.fn)x.fn===d&&(!h||x.once)&&(!f||x.context===f)&&i(this,g);else{for(var y=0,v=[],T=x.length;y<T;y++)(x[y].fn!==d||h&&!x[y].once||f&&x[y].context!==f)&&v.push(x[y]);v.length?this._events[g]=v.length===1?v[0]:v:i(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(ck)),ck.exports}var I7e=R7e();const L7e=Nc(I7e);var Xv=new L7e,FT="recharts.syncEvent.tooltip",rL="recharts.syncEvent.brush";function B7e(e,t){if(t){var r=Number.parseInt(t,10);if(!Tc(r))return e?.[r]}}var $7e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iX=Wl({name:"options",initialState:$7e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),z7e=iX.reducer,{createEventEmitter:U7e}=iX.actions;function W7e(e){return e.tooltip.syncInteraction}var H7e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},oX=Wl({name:"chartData",initialState:H7e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:nL,setDataStartEndIndexes:G7e,setComputedData:Tje}=oX.actions,V7e=oX.reducer,q7e=["x","y"];function sL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sL(Object(r),!0).forEach(function(n){K7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K7e(e,t,r){return(t=Y7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y7e(e){var t=X7e(e,"string");return typeof t=="symbol"?t:t+""}function X7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J7e(e,t){if(e==null)return{};var r,n,s=Q7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Q7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lX=()=>{};function Z7e(){var e=qr(kN),t=qr(TN),r=Go(),n=qr(GK),s=qr(N0),a=XE(),i=YE(),o=qr(l=>l.rootProps.className);_.useEffect(()=>{if(e==null)return lX;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate){var g=d.payload.coordinate,{x,y}=g,v=J7e(g,q7e),T=Wh(Wh(Wh({},v),typeof x=="number"&&{x:Math.max(i.x,Math.min(x,i.x+i.width))}),typeof y=="number"&&{y:Math.max(i.y,Math.min(y,i.y+i.height))}),k=Wh(Wh({},d),{},{payload:Wh(Wh({},d.payload),{},{coordinate:T})});r(k)}else r(d);return}if(s!=null){var b;if(typeof n=="function"){var E={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},N=n(s,E);b=s[N]}else n==="value"&&(b=s.find(J=>String(J.value)===d.payload.label));var{coordinate:P}=d.payload;if(b==null||d.payload.active===!1||P==null||i==null){r(jT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:M,y:j}=P,A=Math.min(M,i.x+i.width),F=Math.min(j,i.y+i.height),L={x:a==="horizontal"?b.coordinate:A,y:a==="horizontal"?F:b.coordinate},V=jT({active:d.payload.active,coordinate:L,dataKey:d.payload.dataKey,index:String(b.index),label:d.payload.label});r(V)}}};return Xv.on(FT,l),()=>{Xv.off(FT,l)}},[o,r,t,e,n,s,a,i])}function eCe(){var e=qr(kN),t=qr(TN),r=Go();_.useEffect(()=>{if(e==null)return lX;var n=(s,a,i)=>{t!==i&&e===s&&r(G7e(a))};return Xv.on(rL,n),()=>{Xv.off(rL,n)}},[r,t,e])}function tCe(){var e=Go();_.useEffect(()=>{e(U7e())},[e]),Z7e(),eCe()}function rCe(e,t,r,n,s,a){var i=qr(h=>T7e(h,e,t)),o=qr(TN),l=qr(kN),u=qr(GK),d=qr(W7e),f=d?.active;_.useEffect(()=>{if(!f&&l!=null&&o!=null){var h=jT({active:a,coordinate:r,dataKey:i,index:s,label:typeof n=="number"?String(n):n});Xv.emit(FT,l,h,o)}},[f,r,i,s,n,o,l,u,a])}function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){nCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nCe(e,t,r){return(t=sCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sCe(e){var t=aCe(e,"string");return typeof t=="symbol"?t:t+""}function aCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iCe(e){return e.dataKey}function oCe(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(SSe,t)}var oL=[],lCe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!C1.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function cCe(e){var t=Pc(e,lCe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,content:i,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:g,wrapperStyle:x,cursor:y,shared:v,trigger:T,defaultIndex:k,portal:b,axisId:E}=t,N=Go(),P=typeof k=="number"?String(k):k;_.useEffect(()=>{N(ATe({shared:v,trigger:T,axisId:E,active:r,defaultIndex:P}))},[N,v,T,E,r,P]);var M=YE(),j=zq(),A=kTe(v),{activeIndex:F,isActive:L}=qr(Q=>N7e(Q,A,T,P)),V=qr(Q=>E7e(Q,A,T,P)),J=qr(Q=>sX(Q,A,T,P)),ne=qr(Q=>C7e(Q,A,T,P)),ee=V,ie=O7e(),B=r??L,[Y,I]=P_e([ee,B]),H=A==="axis"?J:void 0;rCe(A,T,ne,H,F,B);var W=b??ie;if(W==null)return null;var R=ee??oL;B||(R=oL),o&&R.length&&(R=n_e(ee.filter(Q=>Q.value!=null&&(Q.hide!==!0||t.includeHidden)),d,iCe));var z=R.length>0,G=_.createElement(jSe,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:l,active:B,coordinate:ne,hasPayload:z,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:M,wrapperStyle:x,lastBoundingBox:Y,innerRef:I,hasPortalFromProps:!!b},oCe(i,iL(iL({},t),{},{payload:R,label:H,active:B,coordinate:ne,accessibilityLayer:j})));return _.createElement(_.Fragment,null,kk.createPortal(G,W),B&&_.createElement(D7e,{cursor:y,tooltipEventType:A,coordinate:ne,payload:ee,index:F}))}var uk={},dk={},fk={},lL;function uCe(){return lL||(lL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let i,o=null;const l=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const g=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},x=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{x(),i=void 0,o=null},v=()=>{d()},T=function(...k){if(s?.aborted)return;i=this,o=k;const b=h==null;g(),l&&b&&d()};return T.schedule=g,T.cancel=y,T.flush=v,s?.addEventListener("abort",y,{once:!0}),T}e.debounce=t})(fk)),fk}var cL;function dCe(){return cL||(cL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uCe();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:i=!1,trailing:o=!0,maxWait:l}=a,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),g=function(...y){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},x=()=>(h.flush(),d);return g.cancel=h.cancel,g.flush=x,g}e.debounce=r})(dk)),dk}var uL;function fCe(){return uL||(uL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dCe();function r(n,s=0,a={}){const{leading:i=!0,trailing:o=!0}=a;return t.debounce(n,s,{leading:i,maxWait:s,trailing:o})}e.throttle=r})(uk)),uk}var hk,dL;function hCe(){return dL||(dL=1,hk=fCe().throttle),hk}var mCe=hCe();const gCe=Nc(mCe);var nv=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]};function fL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fL(Object(r),!0).forEach(function(n){pCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pCe(e,t,r){return(t=xCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xCe(e){var t=yCe(e,"string");return typeof t=="symbol"?t:t+""}function yCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vCe=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:a="100%",minWidth:i=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:h,onResize:g,style:x={}}=e,y=_.useRef(null),v=_.useRef();v.current=g,_.useImperativeHandle(t,()=>y.current);var[T,k]=_.useState({containerWidth:n.width,containerHeight:n.height}),b=_.useCallback((N,P)=>{k(M=>{var j=Math.round(N),A=Math.round(P);return M.containerWidth===j&&M.containerHeight===A?M:{containerWidth:j,containerHeight:A}})},[]);_.useEffect(()=>{var N=A=>{var F,{width:L,height:V}=A[0].contentRect;b(L,V),(F=v.current)===null||F===void 0||F.call(v,L,V)};d>0&&(N=gCe(N,d,{trailing:!0,leading:!1}));var P=new ResizeObserver(N),{width:M,height:j}=y.current.getBoundingClientRect();return b(M,j),P.observe(y.current),()=>{P.disconnect()}},[b,d]);var E=_.useMemo(()=>{var{containerWidth:N,containerHeight:P}=T;if(N<0||P<0)return null;nv(em(s)||em(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,a),nv(!r||r>0,"The aspect(%s) must be greater than zero.",r);var M=em(s)?N:s,j=em(a)?P:a;return r&&r>0&&(M?j=M/r:j&&(M=j*r),l&&j>l&&(j=l)),nv(M>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,j,s,a,i,o,r),_.Children.map(u,A=>_.cloneElement(A,{width:M,height:j,style:mk({width:M,height:j},A.props.style)}))},[r,u,a,l,o,i,T,s]);return _.createElement("div",{id:f?"".concat(f):void 0,className:Ps("recharts-responsive-container",h),style:mk(mk({},x),{},{width:s,height:a,minWidth:i,minHeight:o,maxHeight:l}),ref:y},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},E))});function wCe(e,t,r){return(t=bCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bCe(e){var t=_Ce(e,"string");return typeof t=="symbol"?t:t+""}function _Ce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class SCe{constructor(t){wCe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function hL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kCe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hL(Object(r),!0).forEach(function(n){TCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TCe(e,t,r){return(t=CCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CCe(e){var t=ECe(e,"string");return typeof t=="symbol"?t:t+""}function ECe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NCe={cacheSize:2e3,enableCache:!0},cX=kCe({},NCe),mL=new SCe(cX.cacheSize),ACe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gL="recharts_measurement_span";function jCe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(o)}var pL=(e,t)=>{try{var r=document.getElementById(gL);r||(r=document.createElement("span"),r.setAttribute("id",gL),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,ACe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},sv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||C1.isSsr)return{width:0,height:0};if(!cX.enableCache)return pL(t,r);var n=jCe(t,r),s=mL.get(n);if(s)return s;var a=pL(t,r);return mL.set(n,a),a},xL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PCe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,MCe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FCe=Object.keys(uX),bp="NaN";function DCe(e,t){return e*uX[t]}class nl{static parse(t){var r,[,n,s]=(r=MCe.exec(t))!==null&&r!==void 0?r:[];return new nl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Tc(t)&&(this.unit=""),r!==""&&!PCe.test(r)&&(this.num=NaN,this.unit=""),FCe.includes(r)&&(this.num=DCe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new nl(NaN,""):new nl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new nl(NaN,""):new nl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new nl(NaN,""):new nl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new nl(NaN,""):new nl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Tc(this.num)}}function dX(e){if(e.includes(bp))return bp;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=xL.exec(t))!==null&&r!==void 0?r:[],i=nl.parse(n??""),o=nl.parse(a??""),l=s==="*"?i.multiply(o):i.divide(o);if(l.isNaN())return bp;t=t.replace(xL,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=yL.exec(t))!==null&&u!==void 0?u:[],g=nl.parse(d??""),x=nl.parse(h??""),y=f==="+"?g.add(x):g.subtract(x);if(y.isNaN())return bp;t=t.replace(yL,y.toString())}return t}var vL=/\(([^()]*)\)/;function OCe(e){for(var t=e,r;(r=vL.exec(t))!=null;){var[,n]=r;t=t.replace(vL,dX(n))}return t}function RCe(e){var t=e.replace(/\s+/g,"");return t=OCe(t),t=dX(t),t}function ICe(e){try{return RCe(e)}catch{return bp}}function gk(e){var t=ICe(e.slice(5,-1));return t===bp?"":t}var LCe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],BCe=["dx","dy","angle","className","breakAll"];function DT(){return DT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DT.apply(null,arguments)}function wL(e,t){if(e==null)return{};var r,n,s=$Ce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $Ce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fX=/[ \f\n\r\t\v\u2028\u2029]+/,hX=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];ki(t)||(r?s=t.toString().split(""):s=t.toString().split(fX));var a=s.map(o=>({word:o,width:sv(o,n).width})),i=r?0:sv("",n).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},zCe=(e,t,r,n,s)=>{var{maxLines:a,children:i,style:o,breakAll:l}=e,u=an(a),d=i,f=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce((V,J)=>{var{word:ne,width:ee}=J,ie=V[V.length-1];if(ie&&(n==null||s||ie.width+ee+r<Number(n)))ie.words.push(ne),ie.width+=ee+r;else{var B={words:[ne],width:ee};V.push(B)}return V},[])},h=f(t),g=F=>F.reduce((L,V)=>L.width>V.width?L:V);if(!u||s)return h;var x=h.length>a||g(h).width>Number(n);if(!x)return h;for(var y="",v=F=>{var L=d.slice(0,F),V=hX({breakAll:l,style:o,children:L+y}).wordsWithComputedWidth,J=f(V),ne=J.length>a||g(J).width>Number(n);return[ne,J]},T=0,k=d.length-1,b=0,E;T<=k&&b<=d.length-1;){var N=Math.floor((T+k)/2),P=N-1,[M,j]=v(P),[A]=v(N);if(!M&&!A&&(T=N+1),M&&A&&(k=N-1),!M&&A){E=j;break}b++}return E||h},bL=e=>{var t=ki(e)?[]:e.toString().split(fX);return[{words:t}]},UCe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:i}=e;if((t||r)&&!C1.isSsr){var o,l,u=hX({breakAll:a,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return bL(n);return zCe({breakAll:a,children:n,maxLines:i,style:s},o,l,t,r)}return bL(n)},_L="#808080",qN=_.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=_L}=e,d=wL(e,LCe),f=_.useMemo(()=>UCe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:g,angle:x,className:y,breakAll:v}=d,T=wL(d,BCe);if(!Zu(r)||!Zu(n)||f.length===0)return null;var k=r+(an(h)?h:0),b=n+(an(g)?g:0),E;switch(l){case"start":E=gk("calc(".concat(a,")"));break;case"middle":E=gk("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:E=gk("calc(".concat(f.length-1," * -").concat(s,")"));break}var N=[];if(i){var P=f[0].width,{width:M}=d;N.push("scale(".concat(an(M)?M/P:1,")"))}return x&&N.push("rotate(".concat(x,", ").concat(k,", ").concat(b,")")),N.length&&(T.transform=N.join(" ")),_.createElement("text",DT({},Ji(T,!0),{ref:t,x:k,y:b,className:Ps("recharts-text",y),textAnchor:o,fill:u.includes("url")?_L:u}),f.map((j,A)=>{var F=j.words.join(v?"":" ");return _.createElement("tspan",{x:k,dy:A===0?E:s,key:"".concat(F,"-").concat(A)},F)}))});qN.displayName="Text";var WCe=["labelRef"];function HCe(e,t){if(e==null)return{};var r,n,s=GCe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SL(Object(r),!0).forEach(function(n){VCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VCe(e,t,r){return(t=qCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qCe(e){var t=KCe(e,"string");return typeof t=="symbol"?t:t+""}function KCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vd.apply(null,arguments)}var mX=_.createContext(null),YCe=e=>{var{x:t,y:r,width:n,height:s,children:a}=e,i=_.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return _.createElement(mX.Provider,{value:i},a)},gX=()=>{var e=_.useContext(mX),t=YE();return e||t},XCe=_.createContext(null),JCe=()=>{var e=_.useContext(XCe),t=qr(XK);return e||t},QCe=e=>{var{value:t,formatter:r}=e,n=ki(e.children)?t:e.children;return typeof r=="function"?r(n):n},KN=e=>e!=null&&typeof e=="function",ZCe=(e,t)=>{var r=pc(t-e),n=Math.min(Math.abs(t-e),360);return r*n},eEe=(e,t,r,n,s)=>{var{offset:a,className:i}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:g}=s,x=(u+d)/2,y=ZCe(f,h),v=y>=0?1:-1,T,k;switch(t){case"insideStart":T=f+v*a,k=g;break;case"insideEnd":T=h-v*a,k=!g;break;case"end":T=h+v*a,k=g;break;default:throw new Error("Unsupported position ".concat(t))}k=y<=0?k:!k;var b=Ki(o,l,x,T),E=Ki(o,l,x,T+(k?1:-1)*359),N="M".concat(b.x,",").concat(b.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(E.x,",").concat(E.y),P=ki(e.id)?$v("recharts-radial-line-"):e.id;return _.createElement("text",Vd({},n,{dominantBaseline:"central",className:Ps("recharts-radial-bar-label",i)}),_.createElement("defs",null,_.createElement("path",{id:P,d:N})),_.createElement("textPath",{xlinkHref:"#".concat(P)},r))},tEe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(r==="outside"){var{x:d,y:f}=Ki(n,s,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=(a+i)/2,{x:g,y:x}=Ki(n,s,h,u);return{x:g,y:x,textAnchor:"middle",verticalAnchor:"middle"}},pX=e=>"cx"in e&&an(e.cx),rEe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!pX(r)&&(a=r);var{x:i,y:o,width:l,height:u}=t,d=u>=0?1:-1,f=d*n,h=d>0?"end":"start",g=d>0?"start":"end",x=l>=0?1:-1,y=x*n,v=x>0?"end":"start",T=x>0?"start":"end";if(s==="top"){var k={x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return Sa(Sa({},k),a?{height:Math.max(o-a.y,0),width:l}:{})}if(s==="bottom"){var b={x:i+l/2,y:o+u+f,textAnchor:"middle",verticalAnchor:g};return Sa(Sa({},b),a?{height:Math.max(a.y+a.height-(o+u),0),width:l}:{})}if(s==="left"){var E={x:i-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"};return Sa(Sa({},E),a?{width:Math.max(E.x-a.x,0),height:u}:{})}if(s==="right"){var N={x:i+l+y,y:o+u/2,textAnchor:T,verticalAnchor:"middle"};return Sa(Sa({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:u}:{})}var P=a?{width:l,height:u}:{};return s==="insideLeft"?Sa({x:i+y,y:o+u/2,textAnchor:T,verticalAnchor:"middle"},P):s==="insideRight"?Sa({x:i+l-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"},P):s==="insideTop"?Sa({x:i+l/2,y:o+f,textAnchor:"middle",verticalAnchor:g},P):s==="insideBottom"?Sa({x:i+l/2,y:o+u-f,textAnchor:"middle",verticalAnchor:h},P):s==="insideTopLeft"?Sa({x:i+y,y:o+f,textAnchor:T,verticalAnchor:g},P):s==="insideTopRight"?Sa({x:i+l-y,y:o+f,textAnchor:v,verticalAnchor:g},P):s==="insideBottomLeft"?Sa({x:i+y,y:o+u-f,textAnchor:T,verticalAnchor:h},P):s==="insideBottomRight"?Sa({x:i+l-y,y:o+u-f,textAnchor:v,verticalAnchor:h},P):s&&typeof s=="object"&&(an(s.x)||em(s.x))&&(an(s.y)||em(s.y))?Sa({x:i+Vf(s.x,l),y:o+Vf(s.y,u),textAnchor:"end",verticalAnchor:"end"},P):Sa({x:i+l/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},nEe={offset:5};function wf(e){var t=Pc(e,nEe),{viewBox:r,position:n,value:s,children:a,content:i,className:o="",textBreakAll:l,labelRef:u}=t,d=JCe(),f=gX(),h=n==="center"?f:d??f,g=r||h;if(!g||ki(s)&&ki(a)&&!_.isValidElement(i)&&typeof i!="function")return null;var x=Sa(Sa({},t),{},{viewBox:g});if(_.isValidElement(i)){var{labelRef:y}=x,v=HCe(x,WCe);return _.cloneElement(i,v)}var T;if(typeof i=="function"){if(T=_.createElement(i,x),_.isValidElement(T))return T}else T=QCe(t);var k=pX(g),b=Ji(t,!0);if(k&&(n==="insideStart"||n==="insideEnd"||n==="end"))return eEe(t,n,T,b,g);var E=k?tEe(g,t.offset,t.position):rEe(t,g);return _.createElement(qN,Vd({ref:u,className:Ps("recharts-label",o)},b,E,{breakAll:l}),T)}wf.displayName="Label";var sEe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?_.createElement(wf,Vd({key:"label-implicit"},n)):Zu(e)?_.createElement(wf,Vd({key:"label-implicit",value:e},n)):_.isValidElement(e)?e.type===wf?_.cloneElement(e,Sa({key:"label-implicit"},n)):_.createElement(wf,Vd({key:"label-implicit",content:e},n)):KN(e)?_.createElement(wf,Vd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?_.createElement(wf,Vd({},e,{key:"label-implicit"},n)):null};function aEe(e){var{label:t}=e,r=gX();return sEe(t,r)||null}var pk={},xk={},kL;function iEe(){return kL||(kL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(xk)),xk}var yk={},TL;function oEe(){return TL||(TL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(yk)),yk}var CL;function lEe(){return CL||(CL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iEe(),r=oEe(),n=zE();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(pk)),pk}var vk,EL;function cEe(){return EL||(EL=1,vk=lEe().last),vk}var uEe=cEe();const dEe=Nc(uEe);var fEe=["valueAccessor"],hEe=["dataKey","clockWise","id","textBreakAll"];function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b_.apply(null,arguments)}function NL(e,t){if(e==null)return{};var r,n,s=mEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gEe=e=>Array.isArray(e.value)?dEe(e.value):e.value,xX=_.createContext(void 0),pEe=xX.Provider,yX=_.createContext(void 0);yX.Provider;function xEe(){return _.useContext(xX)}function yEe(){return _.useContext(yX)}function Qb(e){var{valueAccessor:t=gEe}=e,r=NL(e,fEe),{dataKey:n,clockWise:s,id:a,textBreakAll:i}=r,o=NL(r,hEe),l=xEe(),u=yEe(),d=l||u;return!d||!d.length?null:_.createElement(T1,{className:"recharts-label-list"},d.map((f,h)=>{var g,x=ki(n)?t(f,h):Uo(f&&f.payload,n),y=ki(a)?{}:{id:"".concat(a,"-").concat(h)};return _.createElement(wf,b_({},Ji(f,!0),o,y,{fill:(g=r.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:x,textBreakAll:i,viewBox:f.viewBox,key:"label-".concat(h),index:h}))}))}Qb.displayName="LabelList";function vEe(e){var{label:t}=e;return t?t===!0?_.createElement(Qb,{key:"labelList-implicit"}):_.isValidElement(t)||KN(t)?_.createElement(Qb,{key:"labelList-implicit",content:t}):typeof t=="object"?_.createElement(Qb,b_({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function OT(){return OT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OT.apply(null,arguments)}var vX=e=>{var{cx:t,cy:r,r:n,className:s}=e,a=Ps("recharts-dot",s);return t===+t&&r===+r&&n===+n?_.createElement("circle",OT({},tg(e),BE(e),{className:a,cx:t,cy:r,r:n})):null},wEe={radiusAxis:{},angleAxis:{}},wX=Wl({name:"polarAxis",initialState:wEe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Cje,removeRadiusAxis:Eje,addAngleAxis:Nje,removeAngleAxis:Aje}=wX.actions,bEe=wX.reducer;function _Ee(e){var{fn:t,args:r}=e,n=Go(),s=jc();return _.useEffect(()=>{if(!s){var a=t(r);return n(ETe(a)),()=>{n(NTe(a))}}},[t,r,n,s]),null}var SEe=()=>{};function kEe(e){var{legendPayload:t}=e,r=Go(),n=jc();return _.useEffect(()=>n?SEe:(r(pSe(t)),()=>{r(xSe(t))}),[r,n,t]),null}var wk,TEe=()=>{var[e]=_.useState(()=>$v("uid-"));return e},CEe=(wk=KL.useId)!==null&&wk!==void 0?wk:TEe;function EEe(e,t){var r=CEe();return t||(e?"".concat(e,"-").concat(r):r)}var NEe=_.createContext(void 0),AEe=e=>{var{id:t,type:r,children:n}=e,s=EEe("recharts-".concat(r),t);return _.createElement(NEe.Provider,{value:s},n(s))},jEe={cartesianItems:[],polarItems:[]},bX=Wl({name:"graphicalItems",initialState:jEe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=n0(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=n0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=n0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:PEe,replaceCartesianGraphicalItem:MEe,removeCartesianGraphicalItem:FEe,addPolarGraphicalItem:jje,removePolarGraphicalItem:Pje}=bX.actions,DEe=bX.reducer;function OEe(e){var t=Go(),r=_.useRef(null);return _.useEffect(()=>{r.current===null?t(PEe(e)):r.current!==e&&t(MEe({prev:r.current,next:e})),r.current=e},[t,e]),_.useEffect(()=>()=>{r.current&&(t(FEe(r.current)),r.current=null)},[t]),null}function AL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AL(Object(r),!0).forEach(function(n){REe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function REe(e,t,r){return(t=IEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IEe(e){var t=LEe(e,"string");return typeof t=="symbol"?t:t+""}function LEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BEe={xAxis:{},yAxis:{},zAxis:{}},_X=Wl({name:"cartesianAxis",initialState:BEe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=jL(jL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:$Ee,removeXAxis:zEe,addYAxis:UEe,removeYAxis:WEe,addZAxis:Mje,removeZAxis:Fje,updateYAxisWidth:HEe}=_X.actions,GEe=_X.reducer,VEe=Bt([Qi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),qEe=Bt([VEe,S0,k0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),YN=()=>qr(qEe),KEe=()=>qr(x7e);function PL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ML(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(r),!0).forEach(function(n){YEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YEe(e,t,r){return(t=XEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XEe(e){var t=JEe(e,"string");return typeof t=="symbol"?t:t+""}function JEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QEe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:a}=e;if(s===!1||t.x==null||t.y==null)return null;var i=ML(ML({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ji(s,!1)),BE(s)),o;return _.isValidElement(s)?o=_.cloneElement(s,i):typeof s=="function"?o=s(i):o=_.createElement(vX,i),_.createElement(T1,{className:"recharts-active-dot"},o)};function ZEe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,a=qr(Yv),i=KEe();if(t==null||i==null)return null;var o=t.find(l=>i.includes(l.payload));return ki(o)?null:QEe({point:o,childIndex:Number(a),mainColor:r,dataKey:s,activeDot:n})}var eNe={},SX=Wl({name:"errorBars",initialState:eNe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Dje,replaceErrorBar:Oje,removeErrorBar:Rje}=SX.actions,tNe=SX.reducer,rNe=["children"];function nNe(e,t){if(e==null)return{};var r,n,s=sNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aNe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},iNe=_.createContext(aNe);function oNe(e){var{children:t}=e,r=nNe(e,rNe);return _.createElement(iNe.Provider,{value:r},t)}function kX(e,t){var r,n,s=qr(u=>C0(u,e)),a=qr(u=>E0(u,t)),i=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:kl.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Tl.allowDataOverflow,l=i||o;return{needClip:l,needClipX:i,needClipY:o}}function lNe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=YN(),{needClipX:a,needClipY:i,needClip:o}=kX(t,r);if(!o)return null;var{x:l,y:u,width:d,height:f}=s;return _.createElement("clipPath",{id:"clipPath-".concat(n)},_.createElement("rect",{x:a?l:l-d/2,y:i?u:u-f/2,width:a?d:d*2,height:i?f:f*2}))}var cNe=e=>{var{chartData:t}=e,r=Go(),n=jc();return _.useEffect(()=>n?()=>{}:(r(nL(t)),()=>{r(nL(void 0))}),[t,r,n]),null},FL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},TX=Wl({name:"brush",initialState:FL,reducers:{setBrushSettings(e,t){return t.payload==null?FL:t.payload}}}),{setBrushSettings:Ije}=TX.actions,uNe=TX.reducer;function dNe(e,t,r){return(t=fNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fNe(e){var t=hNe(e,"string");return typeof t=="symbol"?t:t+""}function hNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class XN{static create(t){return new XN(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}dNe(XN,"EPS",1e-4);function mNe(e){return(e%180+180)%180}var gNe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=mNe(s),i=a*Math.PI/180,o=Math.atan(n/r),l=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},pNe={dots:[],areas:[],lines:[]},CX=Wl({name:"referenceElements",initialState:pNe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=n0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=n0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=n0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Lje,removeDot:Bje,addArea:$je,removeArea:zje,addLine:Uje,removeLine:Wje}=CX.actions,xNe=CX.reducer,yNe=_.createContext(void 0),vNe=e=>{var{children:t}=e,[r]=_.useState("".concat($v("recharts"),"-clip")),n=YN();if(n==null)return null;var{x:s,y:a,width:i,height:o}=n;return _.createElement(yNe.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:s,y:a,height:o,width:i}))),t)};function t1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function EX(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function wNe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return gNe(n,r)}function bNe(e,t,r){var n=r==="width",{x:s,y:a,width:i,height:o}=e;return t===1?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}function __(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function _Ne(e,t){return EX(e,t+1)}function SNe(e,t,r,n,s){for(var a=(n||[]).slice(),{start:i,end:o}=t,l=0,u=1,d=i,f=function(){var x=n?.[l];if(x===void 0)return{v:EX(n,u)};var y=l,v,T=()=>(v===void 0&&(v=r(x,y)),v),k=x.coordinate,b=l===0||__(e,k,T,d,o);b||(l=0,d=i,u+=1),b&&(d=k+e*(T()/2+s),l+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function DL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(r),!0).forEach(function(n){kNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kNe(e,t,r){return(t=TNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TNe(e){var t=CNe(e,"string");return typeof t=="symbol"?t:t+""}function CNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ENe(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,{start:o}=t,{end:l}=t,u=function(h){var g=a[h],x,y=()=>(x===void 0&&(x=r(g,h)),x);if(h===i-1){var v=e*(g.coordinate+e*y()/2-l);a[h]=g=oo(oo({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else a[h]=g=oo(oo({},g),{},{tickCoord:g.coordinate});var T=__(e,g.tickCoord,y,o,l);T&&(l=g.tickCoord-e*(y()/2+s),a[h]=oo(oo({},g),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return a}function NNe(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,{start:l,end:u}=t;if(a){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=oo(oo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var g=__(e,d.tickCoord,()=>f,l,u);g&&(u=d.tickCoord-e*(f/2+s),i[o-1]=oo(oo({},d),{},{isShow:!0}))}for(var x=a?o-1:o,y=function(k){var b=i[k],E,N=()=>(E===void 0&&(E=r(b,k)),E);if(k===0){var P=e*(b.coordinate-e*N()/2-l);i[k]=b=oo(oo({},b),{},{tickCoord:P<0?b.coordinate-P*e:b.coordinate})}else i[k]=b=oo(oo({},b),{},{tickCoord:b.coordinate});var M=__(e,b.tickCoord,N,l,u);M&&(l=b.tickCoord+e*(N()/2+s),i[k]=oo(oo({},b),{},{isShow:!0}))},v=0;v<x;v++)y(v);return i}function JN(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:i,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(an(l)||C1.isSsr){var h;return(h=_Ne(s,an(l)?l:0))!==null&&h!==void 0?h:[]}var g=[],x=o==="top"||o==="bottom"?"width":"height",y=d&&x==="width"?sv(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,E)=>{var N=typeof u=="function"?u(b.value,E):b.value;return x==="width"?wNe(sv(N,{fontSize:t,letterSpacing:r}),y,f):sv(N,{fontSize:t,letterSpacing:r})[x]},T=s.length>=2?pc(s[1].coordinate-s[0].coordinate):1,k=bNe(a,T,x);return l==="equidistantPreserveStart"?SNe(T,k,v,s,i):(l==="preserveStart"||l==="preserveStartEnd"?g=NNe(T,k,v,s,i,l==="preserveStartEnd"):g=ENe(T,k,v,s,i),g.filter(b=>b.isShow))}var ANe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=s+a,u=i+l+o+(r?n:0);return Math.round(u)}return 0},jNe=["axisLine","width","height","className","hide","ticks"],PNe=["viewBox"],MNe=["viewBox"];function RT(e,t){if(e==null)return{};var r,n,s=FNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function FNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zm.apply(null,arguments)}function OL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OL(Object(r),!0).forEach(function(n){DNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DNe(e,t,r){return(t=ONe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ONe(e){var t=RNe(e,"string");return typeof t=="symbol"?t:t+""}function RNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QN={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function INe(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:i,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var u=Xa(Xa(Xa({},l),Ji(o,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!i||a==="bottom"&&i);u=Xa(Xa({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var f=+(a==="left"&&!i||a==="right"&&i);u=Xa(Xa({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+s})}return _.createElement("line",zm({},u,{className:Ps("recharts-cartesian-axis-line",x3(o,"className"))}))}function LNe(e,t,r,n,s,a,i,o,l){var u,d,f,h,g,x,y=o?-1:1,v=e.tickSize||i,T=an(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,h=r+ +!o*s,f=h-y*v,x=f-y*l,g=T;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,g=u-y*l,x=T;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,g=u+y*l,x=T;break;default:u=d=e.coordinate,h=r+ +o*s,f=h+y*v,x=f+y*l,g=T;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:g,y:x}}}function BNe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function $Ne(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function zNe(e){var{option:t,tickProps:r,value:n}=e,s,a=Ps(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))s=_.cloneElement(t,Xa(Xa({},r),{},{className:a}));else if(typeof t=="function")s=t(Xa(Xa({},r),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=Ps(i,t?.className)),s=_.createElement(qN,zm({},r,{className:i}),n)}return s}function UNe(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:a,unit:i,padding:o,tickTextProps:l,orientation:u,mirror:d,x:f,y:h,width:g,height:x,tickSize:y,tickMargin:v,fontSize:T,letterSpacing:k,getTicksConfig:b,events:E}=e,N=JN(Xa(Xa({},b),{},{ticks:t}),T,k),P=BNe(u,d),M=$Ne(u,d),j=tg(b),A=Ji(r,!1),F=Xa(Xa({},j),{},{fill:"none"},Ji(n,!1)),L=N.map((V,J)=>{var{line:ne,tick:ee}=LNe(V,f,h,g,x,u,y,d,v),ie=Xa(Xa(Xa(Xa({textAnchor:P,verticalAnchor:M},j),{},{stroke:"none",fill:s},A),ee),{},{index:J,payload:V,visibleTicksCount:N.length,tickFormatter:a,padding:o},l);return _.createElement(T1,zm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},o4e(E,V,J)),n&&_.createElement("line",zm({},F,ne,{className:Ps("recharts-cartesian-axis-tick-line",x3(n,"className"))})),r&&_.createElement(zNe,{option:r,tickProps:ie,value:"".concat(typeof a=="function"?a(V.value,J):V.value).concat(i||"")}))});return L.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},L):null}var WNe=_.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:i,ticks:o}=e,l=RT(e,jNe),[u,d]=_.useState(""),[f,h]=_.useState(""),g=_.useRef([]);_.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return ANe({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=_.useCallback(y=>{if(y){var v=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=Array.from(v);var T=v[0];if(T){var k=window.getComputedStyle(T),b=k.fontSize,E=k.letterSpacing;(b!==u||E!==f)&&(d(b),h(E))}}},[u,f]);return i||n!=null&&n<=0||s!=null&&s<=0?null:_.createElement(T1,{className:Ps("recharts-cartesian-axis",a),ref:x},_.createElement(INe,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:tg(e)}),_.createElement(UNe,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:f,getTicksConfig:e,events:l}),_.createElement(YCe,{x:e.x,y:e.y,width:e.width,height:e.height},_.createElement(aEe,{label:e.label}),e.children))}),HNe=_.memo(WNe,(e,t)=>{var{viewBox:r}=e,n=RT(e,PNe),{viewBox:s}=t,a=RT(t,MNe);return t1(r,s)&&t1(n,a)}),ZN=_.forwardRef((e,t)=>{var r=Pc(e,QN);return _.createElement(HNe,zm({},r,{ref:t}))});ZN.displayName="CartesianAxis";var GNe=["x1","y1","x2","y2","key"],VNe=["offset"],qNe=["xAxisId","yAxisId"],KNe=["xAxisId","yAxisId"];function RL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RL(Object(r),!0).forEach(function(n){YNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YNe(e,t,r){return(t=XNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XNe(e){var t=JNe(e,"string");return typeof t=="symbol"?t:t+""}function JNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nm.apply(null,arguments)}function S_(e,t){if(e==null)return{};var r,n,s=QNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZNe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:a,height:i,ry:o}=e;return _.createElement("rect",{x:n,y:s,ry:o,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function NX(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:a,y2:i,key:o}=t,l=S_(t,GNe),u=tg(l),{offset:d}=u,f=S_(u,VNe);r=_.createElement("line",nm({},f,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function e9e(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=S_(e,qNe),l=s.map((u,d)=>{var f=fo(fo({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return NX(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function t9e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=S_(e,KNe),l=s.map((u,d)=>{var f=fo(fo({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return NX(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function r9e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:i,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=o.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],x=g?s+i-f:u[h+1]-f;if(x<=0)return null;var y=h%t.length;return _.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:x,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function n9e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:i,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],x=g?s+i-f:u[h+1]-f;if(x<=0)return null;var y=h%r.length;return _.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:x,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var s9e=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return Mq(JN(fo(fo(fo({},QN),r),{},{ticks:Fq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},a9e=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return Mq(JN(fo(fo(fo({},QN),r),{},{ticks:Fq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},i9e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function AX(e){var t=Lq(),r=Bq(),n=Iq(),s=fo(fo({},Pc(e,i9e)),{},{x:an(e.x)?e.x:n.left,y:an(e.y)?e.y:n.top,width:an(e.width)?e.width:n.width,height:an(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:i,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:g}=s,x=jc(),y=qr(A=>KI(A,"xAxis",a,x)),v=qr(A=>KI(A,"yAxis",i,x));if(!an(u)||u<=0||!an(d)||d<=0||!an(o)||o!==+o||!an(l)||l!==+l)return null;var T=s.verticalCoordinatesGenerator||s9e,k=s.horizontalCoordinatesGenerator||a9e,{horizontalPoints:b,verticalPoints:E}=s;if((!b||!b.length)&&typeof k=="function"){var N=h&&h.length,P=k({yAxis:v?fo(fo({},v),{},{ticks:N?h:v.ticks}):void 0,width:t,height:r,offset:n},N?!0:f);nv(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(b=P)}if((!E||!E.length)&&typeof T=="function"){var M=g&&g.length,j=T({xAxis:y?fo(fo({},y),{},{ticks:M?g:y.ticks}):void 0,width:t,height:r,offset:n},M?!0:f);nv(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(E=j)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(ZNe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),_.createElement(r9e,nm({},s,{horizontalPoints:b})),_.createElement(n9e,nm({},s,{verticalPoints:E})),_.createElement(e9e,nm({},s,{offset:n,horizontalPoints:b,xAxis:y,yAxis:v})),_.createElement(t9e,nm({},s,{offset:n,verticalPoints:E,xAxis:y,yAxis:v})))}AX.displayName="CartesianGrid";var jX=(e,t,r,n)=>RY(e,"xAxis",t,n),PX=(e,t,r,n)=>OY(e,"xAxis",t,n),MX=(e,t,r,n)=>RY(e,"yAxis",r,n),FX=(e,t,r,n)=>OY(e,"yAxis",r,n),o9e=Bt([Fs,jX,MX,PX,FX],(e,t,r,n,s)=>sh(e,"xAxis")?hT(t,n,!1):hT(r,s,!1)),l9e=(e,t,r,n,s)=>s;function c9e(e){return e.type==="line"}var u9e=Bt([sY,l9e],(e,t)=>e.filter(c9e).find(r=>r.id===t)),d9e=Bt([Fs,jX,MX,PX,FX,u9e,o9e,wN],(e,t,r,n,s,a,i,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||i==null)){var{dataKey:f,data:h}=a,g;if(h!=null&&h.length>0?g=h:g=l?.slice(u,d+1),g!=null)return F9e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:i,displayedData:g})}}),f9e=["id"],h9e=["type","layout","connectNulls","needClip"],m9e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function IL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IL(Object(r),!0).forEach(function(n){g9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g9e(e,t,r){return(t=p9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p9e(e){var t=x9e(e,"string");return typeof t=="symbol"?t:t+""}function x9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e9(e,t){if(e==null)return{};var r,n,s=y9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function y9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Um.apply(null,arguments)}var v9e=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:Dq(r,t),payload:e}]};function w9e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:a,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:Dq(i,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var DX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function b9e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var _9e=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return DX(t,e);for(var s=Math.floor(e/n),a=e%n,i=t-e,o=[],l=0,u=0;l<r.length;u+=r[l],++l)if(u+r[l]>a){o=[...r.slice(0,l),a-u];break}var d=o.length%2===0?[0,i]:[i];return[...b9e(r,s),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function S9e(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Ps("recharts-line-dot",typeof e!="boolean"?e.className:"");r=_.createElement(vX,Um({},t,{className:n}))}return r}function k9e(e,t){return e==null?!1:t?!0:e.length===1}function T9e(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:a,needClip:i}=n;if(!k9e(r,s))return null;var{id:o}=n,l=e9(n,f9e),u=FV(s),d=tg(l),f=Ji(s,!0),h=r.map((x,y)=>{var v=Pl(Pl(Pl({key:"dot-".concat(y),r:3},d),f),{},{index:y,cx:x.x,cy:x.y,dataKey:a,value:x.value,payload:x.payload,points:r});return S9e(s,v)}),g={clipPath:i?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return _.createElement(T1,Um({className:"recharts-line-dots",key:"dots"},g),h)}function C9e(e){var{showLabels:t,children:r,points:n}=e,s=_.useMemo(()=>n?.map(a=>{var i={x:a.x,y:a.y,width:0,height:0};return Pl(Pl({},i),{},{value:a.value,payload:a.payload,viewBox:i,parentViewBox:void 0,fill:void 0})}),[n]);return _.createElement(pEe,{value:t?s:null},r)}function LL(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:a}=e,{type:i,layout:o,connectNulls:l,needClip:u}=a,d=e9(a,h9e),f=Pl(Pl({},Ji(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:o,connectNulls:l,strokeDasharray:s??a.strokeDasharray});return _.createElement(_.Fragment,null,n?.length>1&&_.createElement(Uq,Um({},f,{pathRef:r})),_.createElement(T9e,{points:n,clipPathId:t,props:a}))}function E9e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function N9e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:a}=e,{points:i,strokeDasharray:o,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:g,height:x,onAnimationEnd:y,onAnimationStart:v}=r,T=s.current,k=qq(r,"recharts-line-"),[b,E]=_.useState(!1),N=!b,P=_.useCallback(()=>{typeof y=="function"&&y(),E(!1)},[y]),M=_.useCallback(()=>{typeof v=="function"&&v(),E(!0)},[v]),j=E9e(n.current),A=a.current;return _.createElement(C9e,{points:i,showLabels:N},r.children,_.createElement(Vq,{animationId:k,begin:u,duration:d,isActive:l,easing:f,onAnimationEnd:P,onAnimationStart:M,key:k},F=>{var L=Hd(A,j+A,F),V=Math.min(L,j),J;if(l)if(o){var ne="".concat(o).split(/[,\s]+/gim).map(B=>parseFloat(B));J=_9e(V,j,ne)}else J=DX(j,V);else J=o==null?void 0:String(o);if(T){var ee=T.length/i.length,ie=F===1?i:i.map((B,Y)=>{var I=Math.floor(Y*ee);if(T[I]){var H=T[I];return Pl(Pl({},B),{},{x:Hd(H.x,B.x,F),y:Hd(H.y,B.y,F)})}return h?Pl(Pl({},B),{},{x:Hd(g*2,B.x,F),y:Hd(x/2,B.y,F)}):Pl(Pl({},B),{},{x:B.x,y:B.y})});return s.current=ie,_.createElement(LL,{props:r,points:ie,clipPathId:t,pathRef:n,strokeDasharray:J})}return F>0&&j>0&&(s.current=i,a.current=V),_.createElement(LL,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:J})}),_.createElement(vEe,{label:r.label}))}function A9e(e){var{clipPathId:t,props:r}=e,n=_.useRef(null),s=_.useRef(0),a=_.useRef(null);return _.createElement(N9e,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:a})}var j9e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Uo(e.payload,t)});class P9e extends _.Component{render(){var t,{hide:r,dot:n,points:s,className:a,xAxisId:i,yAxisId:o,top:l,left:u,width:d,height:f,id:h,needClip:g}=this.props;if(r)return null;var x=Ps("recharts-line",a),y=h,{r:v=3,strokeWidth:T=2}=(t=Ji(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},k=FV(n),b=v*2+T;return _.createElement(_.Fragment,null,_.createElement(T1,{className:x},g&&_.createElement("defs",null,_.createElement(lNe,{clipPathId:y,xAxisId:i,yAxisId:o}),!k&&_.createElement("clipPath",{id:"clipPath-dots-".concat(y)},_.createElement("rect",{x:u-b/2,y:l-b/2,width:d+b,height:f+b}))),_.createElement(oNe,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:j9e,errorBarOffset:0},_.createElement(A9e,{props:this.props,clipPathId:y}))),_.createElement(ZEe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var OX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!C1.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function M9e(e){var t=Pc(e,OX),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,connectNulls:o,dot:l,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:g,yAxisId:x,id:y}=t,v=e9(t,m9e),{needClip:T}=kX(g,x),k=YN(),b=XE(),E=jc(),N=qr(F=>d9e(F,g,x,E,y));if(b!=="horizontal"&&b!=="vertical"||N==null||k==null)return null;var{height:P,width:M,x:j,y:A}=k;return _.createElement(P9e,Um({},v,{id:y,connectNulls:o,dot:l,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:g,yAxisId:x,points:N,layout:b,height:P,width:M,left:j,top:A,needClip:T}))}function F9e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:i,bandSize:o,displayedData:l}=e;return l.map((u,d)=>{var f=Uo(u,i);if(t==="horizontal"){var h=FR({axis:r,ticks:s,bandSize:o,entry:u,index:d}),g=ki(f)?null:n.scale(f);return{x:h,y:g,value:f,payload:u}}var x=ki(f)?null:r.scale(f),y=FR({axis:n,ticks:a,bandSize:o,entry:u,index:d});return x==null||y==null?null:{x,y,value:f,payload:u}}).filter(Boolean)}function D9e(e){var t=Pc(e,OX),r=jc();return _.createElement(AEe,{id:t.id,type:"line"},n=>_.createElement(_.Fragment,null,_.createElement(kEe,{legendPayload:v9e(t)}),_.createElement(_Ee,{fn:w9e,args:t}),_.createElement(OEe,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),_.createElement(M9e,Um({},t,{id:n}))))}var RX=_.memo(D9e);RX.displayName="Line";var O9e=["dangerouslySetInnerHTML","ticks"],R9e=["id"],I9e=["domain"],L9e=["domain"];function IT(){return IT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IT.apply(null,arguments)}function k_(e,t){if(e==null)return{};var r,n,s=B9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function B9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $9e(e){var t=Go();return _.useEffect(()=>(t($Ee(e)),()=>{t(zEe(e))}),[e,t]),null}var z9e=e=>{var{xAxisId:t,className:r}=e,n=qr(Rq),s=jc(),a="xAxis",i=qr(v=>M1(v,a,t,s)),o=qr(v=>DY(v,a,t,s)),l=qr(v=>uTe(v,t)),u=qr(v=>pTe(v,t)),d=qr(v=>eY(v,t));if(l==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,g=k_(e,O9e),{id:x}=d,y=k_(d,R9e);return _.createElement(ZN,IT({},g,y,{scale:i,x:u.x,y:u.y,width:l.width,height:l.height,className:Ps("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o}))},U9e={allowDataOverflow:kl.allowDataOverflow,allowDecimals:kl.allowDecimals,allowDuplicatedCategory:kl.allowDuplicatedCategory,height:kl.height,hide:!1,mirror:kl.mirror,orientation:kl.orientation,padding:kl.padding,reversed:kl.reversed,scale:kl.scale,tickCount:kl.tickCount,type:kl.type,xAxisId:0},W9e=e=>{var t,r,n,s,a,i=Pc(e,U9e);return _.createElement(_.Fragment,null,_.createElement($9e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),_.createElement(z9e,i))},H9e=(e,t)=>{var{domain:r}=e,n=k_(e,I9e),{domain:s}=t,a=k_(t,L9e);return t1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:t1({domain:r},{domain:s}):!1},IX=_.memo(W9e,H9e);IX.displayName="XAxis";var G9e=["dangerouslySetInnerHTML","ticks"],V9e=["id"],q9e=["domain"],K9e=["domain"];function LT(){return LT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LT.apply(null,arguments)}function T_(e,t){if(e==null)return{};var r,n,s=Y9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Y9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function X9e(e){var t=Go();return _.useEffect(()=>(t(UEe(e)),()=>{t(WEe(e))}),[e,t]),null}var J9e=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=_.useRef(null),i=_.useRef(null),o=qr(Rq),l=jc(),u=Go(),d="yAxis",f=qr(N=>M1(N,d,t,l)),h=qr(N=>vTe(N,t)),g=qr(N=>yTe(N,t)),x=qr(N=>DY(N,d,t,l)),y=qr(N=>tY(N,t));if(_.useLayoutEffect(()=>{if(!(n!=="auto"||!h||KN(s)||_.isValidElement(s)||y==null)){var N=a.current;if(N){var P=N.getCalculatedWidth();Math.round(h.width)!==Math.round(P)&&u(HEe({id:t,width:P}))}}},[x,h,u,s,t,n,y]),h==null||g==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:T}=e,k=T_(e,G9e),{id:b}=y,E=T_(y,V9e);return _.createElement(ZN,LT({},k,E,{ref:a,labelRef:i,scale:f,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Ps("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x}))},Q9e={allowDataOverflow:Tl.allowDataOverflow,allowDecimals:Tl.allowDecimals,allowDuplicatedCategory:Tl.allowDuplicatedCategory,hide:!1,mirror:Tl.mirror,orientation:Tl.orientation,padding:Tl.padding,reversed:Tl.reversed,scale:Tl.scale,tickCount:Tl.tickCount,type:Tl.type,width:Tl.width,yAxisId:0},Z9e=e=>{var t,r,n,s,a,i=Pc(e,Q9e);return _.createElement(_.Fragment,null,_.createElement(X9e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),_.createElement(J9e,i))},eAe=(e,t)=>{var{domain:r}=e,n=T_(e,q9e),{domain:s}=t,a=T_(t,K9e);return t1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:t1({domain:r},{domain:s}):!1},LX=_.memo(Z9e,eAe);LX.displayName="YAxis";var bk={exports:{}},_k={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BL;function tAe(){if(BL)return _k;BL=1;var e=Wm();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return _k.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=i(function(){function v(N){if(!T){if(T=!0,k=N,N=f(N),h!==void 0&&x.hasValue){var P=x.value;if(h(P,N))return b=P}return b=N}if(P=b,r(k,N))return P;var M=f(N);return h!==void 0&&h(P,M)?(k=N,P):(k=N,b=M)}var T=!1,k,b,E=d===void 0?null:d;return[function(){return v(u())},E===null?void 0:function(){return v(E())}]},[u,d,f,h]);var y=n(l,g[0],g[1]);return a(function(){x.hasValue=!0,x.value=y},[y]),o(y),y},_k}var $L;function rAe(){return $L||($L=1,bk.exports=tAe()),bk.exports}rAe();function nAe(e){e()}function sAe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){nAe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var zL={notify(){},get:()=>[]};function aAe(e,t){let r,n=zL,s=0,a=!1;function i(y){d();const v=n.subscribe(y);let T=!1;return()=>{T||(T=!0,v(),f())}}function o(){n.notify()}function l(){x.onStateChange&&x.onStateChange()}function u(){return a}function d(){s++,r||(r=e.subscribe(l),n=sAe())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=zL)}function h(){a||(a=!0,d())}function g(){a&&(a=!1,f())}const x={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:g,getListeners:()=>n};return x}var iAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oAe=iAe(),lAe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",cAe=lAe(),uAe=()=>oAe||cAe?_.useLayoutEffect:_.useEffect,dAe=uAe(),fAe=Symbol.for("react-redux-context"),hAe=typeof globalThis<"u"?globalThis:{};function mAe(){if(!_.createContext)return{};const e=hAe[fAe]??=new Map;let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var gAe=mAe();function pAe(e){const{children:t,context:r,serverState:n,store:s}=e,a=_.useMemo(()=>{const l=aAe(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),i=_.useMemo(()=>s.getState(),[s]);dAe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,i]);const o=r||gAe;return _.createElement(o.Provider,{value:a},t)}var xAe=pAe,yAe=(e,t)=>t,t9=Bt([yAe,Fs,XK,ii,XY,N0,k7e,Qi],A7e),r9=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},BX=Cc("mouseClick"),$X=P2();$X.startListening({actionCreator:BX,effect:(e,t)=>{var r=e.payload,n=t9(t.getState(),r9(r));n?.activeIndex!=null&&t.dispatch(PTe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var BT=Cc("mouseMove"),zX=P2();zX.startListening({actionCreator:BT,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=LN(n,n.tooltip.settings.shared),a=t9(n,r9(r));s==="axis"&&(a?.activeIndex!=null?t.dispatch(WY({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(UY()))}});var UL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},UX=Wl({name:"rootProps",initialState:UL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:UL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),vAe=UX.reducer,{updateOptions:wAe}=UX.actions,WX=Wl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Hje}=WX.actions,bAe=WX.reducer,HX=Cc("keyDown"),GX=Cc("focus"),n9=P2();n9.startListening({actionCreator:HX,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var i=Number(BN(s,D1(r))),o=N0(r);if(a==="Enter"){var l=w_(r,"axis","hover",String(s.index));t.dispatch(PT({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var u=STe(r),d=u==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var g=w_(r,"axis","hover",String(h));t.dispatch(PT({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});n9.startListening({actionCreator:GX,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",i=w_(r,"axis","hover",String(a));t.dispatch(PT({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:i}))}}}});var lc=Cc("externalEvent"),VX=P2();VX.startListening({actionCreator:lc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:m7e(r),activeDataKey:f7e(r),activeIndex:Yv(r),activeLabel:ZY(r),activeTooltipIndex:Yv(r),isTooltipActive:g7e(r)};e.payload.handler(n,e.payload.reactEvent)}}});var _Ae=Bt([F1],e=>e.tooltipItemPayloads),SAe=Bt([_Ae,z2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(o=>o.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var i=t(a,r);return i}}}),qX=Cc("touchMove"),KX=P2();KX.startListening({actionCreator:qX,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=LN(n,n.tooltip.settings.shared);if(s==="axis"){var a=t9(n,r9({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&t.dispatch(WY({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(rSe),d=(i=l.getAttribute(nSe))!==null&&i!==void 0?i:void 0,f=SAe(t.getState(),u,d);t.dispatch(jTe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var kAe=lq({brush:uNe,cartesianAxis:GEe,chartData:V7e,errorBars:tNe,graphicalItems:DEe,layout:N3e,legend:ySe,options:z7e,polarAxis:bEe,polarOptions:bAe,referenceElements:xNe,rootProps:vAe,tooltip:MTe}),TAe=function(t){return Z_e({reducer:kAe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([$X.middleware,zX.middleware,n9.middleware,VX.middleware,KX.middleware]),devTools:C1.devToolsEnabled})};function CAe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=jc(),a=_.useRef(null);if(s)return r;a.current==null&&(a.current=TAe(t));var i=WE;return _.createElement(xAe,{context:i,store:a.current},r)}function EAe(e){var{layout:t,width:r,height:n,margin:s}=e,a=Go(),i=jc();return _.useEffect(()=>{i||(a(T3e(t)),a(C3e({width:r,height:n})),a(k3e(s)))},[a,i,t,r,n,s]),null}function NAe(e){var t=Go();return _.useEffect(()=>{t(wAe(e))},[t,e]),null}var AAe=["children"];function jAe(e,t){if(e==null)return{};var r,n,s=PAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function PAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C_.apply(null,arguments)}var MAe={width:"100%",height:"100%"},FAe=_.forwardRef((e,t)=>{var r=Lq(),n=Bq(),s=zq();if(!s_(r)||!s_(n))return null;var{children:a,otherAttributes:i,title:o,desc:l}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=s?0:void 0,typeof i.role=="string"?d=i.role:d=s?"application":void 0,_.createElement(DV,C_({},i,{title:o,desc:l,role:d,tabIndex:u,width:r,height:n,style:MAe,ref:t}),a)}),DAe=e=>{var{children:t}=e,r=qr(A3);if(!r)return null;var{width:n,height:s,y:a,x:i}=r;return _.createElement(DV,{width:n,height:s,x:i,y:a},t)},WL=_.forwardRef((e,t)=>{var{children:r}=e,n=jAe(e,AAe),s=jc();return s?_.createElement(DAe,null,r):_.createElement(FAe,C_({ref:t},n),r)});function OAe(){var e=Go(),[t,r]=_.useState(null),n=qr(tSe);return _.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;uu(a)&&a!==n&&e(E3e(a))}},[t,e,n]),r}function HL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RAe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HL(Object(r),!0).forEach(function(n){IAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IAe(e,t,r){return(t=LAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LAe(e){var t=BAe(e,"string");return typeof t=="symbol"?t:t+""}function BAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Ae=_.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:g,onTouchMove:x,onTouchStart:y,style:v,width:T}=e,k=Go(),[b,E]=_.useState(null),[N,P]=_.useState(null);tCe();var M=OAe(),j=_.useCallback(R=>{M(R),typeof t=="function"&&t(R),E(R),P(R)},[M,t,E,P]),A=_.useCallback(R=>{k(BX(R)),k(lc({handler:a,reactEvent:R}))},[k,a]),F=_.useCallback(R=>{k(BT(R)),k(lc({handler:u,reactEvent:R}))},[k,u]),L=_.useCallback(R=>{k(UY()),k(lc({handler:d,reactEvent:R}))},[k,d]),V=_.useCallback(R=>{k(BT(R)),k(lc({handler:f,reactEvent:R}))},[k,f]),J=_.useCallback(()=>{k(GX())},[k]),ne=_.useCallback(R=>{k(HX(R.key))},[k]),ee=_.useCallback(R=>{k(lc({handler:i,reactEvent:R}))},[k,i]),ie=_.useCallback(R=>{k(lc({handler:o,reactEvent:R}))},[k,o]),B=_.useCallback(R=>{k(lc({handler:l,reactEvent:R}))},[k,l]),Y=_.useCallback(R=>{k(lc({handler:h,reactEvent:R}))},[k,h]),I=_.useCallback(R=>{k(lc({handler:y,reactEvent:R}))},[k,y]),H=_.useCallback(R=>{k(qX(R)),k(lc({handler:x,reactEvent:R}))},[k,x]),W=_.useCallback(R=>{k(lc({handler:g,reactEvent:R}))},[k,g]);return _.createElement(aX.Provider,{value:b},_.createElement(p4e.Provider,{value:N},_.createElement("div",{className:Ps("recharts-wrapper",n),style:RAe({position:"relative",cursor:"default",width:T,height:s},v),onClick:A,onContextMenu:ee,onDoubleClick:ie,onFocus:J,onKeyDown:ne,onMouseDown:B,onMouseEnter:F,onMouseLeave:L,onMouseMove:V,onMouseUp:Y,onTouchEnd:W,onTouchMove:H,onTouchStart:I,ref:j},r)))}),zAe=["children","className","width","height","style","compact","title","desc"];function UAe(e,t){if(e==null)return{};var r,n,s=WAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HAe=_.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:a,style:i,compact:o,title:l,desc:u}=e,d=UAe(e,zAe),f=tg(d);return o?_.createElement(WL,{otherAttributes:f,title:l,desc:u},r):_.createElement($Ae,{className:n,style:i,width:s,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(WL,{otherAttributes:f,title:l,desc:u,ref:t},_.createElement(vNe,null,r)))}),GAe=["width","height"];function $T(){return $T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$T.apply(null,arguments)}function VAe(e,t){if(e==null)return{};var r,n,s=qAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KAe={top:5,right:5,bottom:5,left:5},YAe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:KAe,reverseStackOrder:!1,syncMethod:"index"},XAe=_.forwardRef(function(t,r){var n,s=Pc(t.categoricalChartProps,YAe),{width:a,height:i}=s,o=VAe(s,GAe);if(!s_(a)||!s_(i))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,g={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(CAe,{preloadedState:{options:g},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:l},_.createElement(cNe,{chartData:h.data}),_.createElement(EAe,{width:a,height:i,layout:s.layout,margin:s.margin}),_.createElement(NAe,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(HAe,$T({},o,{width:a,height:i,ref:r})))}),JAe=["axis"],QAe=_.forwardRef((e,t)=>_.createElement(XAe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:JAe,tooltipPayloadSearcher:B7e,categoricalChartProps:e,ref:t}));const ZAe=({data:e=[],loading:t=!1,error:r=null})=>{if(t)return c.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:c.jsx("div",{className:"spinner-border text-primary",role:"status",children:c.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r)return c.jsxs("div",{className:"alert alert-danger",role:"alert",children:[c.jsx("h5",{className:"alert-heading",children:"Error Loading Performance Data"}),c.jsx("p",{children:r})]});if(!e||e.length===0)return c.jsx("div",{className:"text-center text-muted",style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{children:[c.jsx("h5",{children:"No Test Data Available"}),c.jsx("p",{children:"No tests have been completed yet for the current term."})]})});const n=e.map(s=>({testName:s.test_name,testDate:s.submitted_at,averageScore:parseFloat(s.average_score),totalStudents:s.total_students,testId:s.test_id}));return c.jsxs("div",{className:"test-performance-graph",children:[c.jsx("div",{style:{width:"100%",height:"400px"},children:c.jsx(vCe,{children:c.jsxs(QAe,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[c.jsx(AX,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),c.jsx(IX,{dataKey:"testDate",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"#666",fontSize:12}),c.jsx(LX,{domain:[0,100],tickFormatter:s=>`${s}%`,stroke:"#666",fontSize:12}),c.jsx(cCe,{formatter:(s,a)=>[`${parseFloat(s).toFixed(1)}%`,"Average Score"],labelFormatter:s=>{const a=n.find(i=>i.testDate===s);if(a){const i=new Date(s);return`${a.testName} (${i.toLocaleDateString("en-US",{month:"long",day:"numeric"})})`}return s},contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),c.jsx(RX,{type:"monotone",dataKey:"averageScore",stroke:"#007bff",strokeWidth:3,connectNulls:!0,dot:{r:6,fill:"#007bff",stroke:"#fff",strokeWidth:2},activeDot:{r:8,fill:"#ff6b35",stroke:"#fff",strokeWidth:2}})]})})}),c.jsx("div",{className:"mt-3",children:c.jsxs("div",{className:"row",children:[c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Total Tests: "}),c.jsx("strong",{children:n.length})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Average Score: "}),c.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(i=>i.averageScore!==null&&i.averageScore!==void 0&&!isNaN(i.averageScore));return s.length===0?"N/A":`${(s.reduce((i,o)=>i+o.averageScore,0)/s.length).toFixed(1)}%`})():"N/A"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Best Test: "}),c.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(a=>a.averageScore!==null&&a.averageScore!==void 0&&!isNaN(a.averageScore));return s.length===0?"N/A":s.reduce((a,i)=>i.averageScore>a.averageScore?i:a).testName})():"N/A"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Latest Test: "}),c.jsx("strong",{children:n.length>0?n[n.length-1].testName:"N/A"})]})})]})})]})},GL=({onBackToLogin:e})=>{const t=fl(),{user:r,isAuthenticated:n,logout:s,getCurrentTeacherUsername:a}=Ms(),{teacherData:i,loadTeacherData:o}=i3(),{activeTests:l,loadActiveTests:u}=w2(),{showNotification:d,notifications:f,removeNotification:h}=si(),[g,x]=_.useState(!0),[y,v]=_.useState(""),[T,k]=_.useState("main"),[b,E]=_.useState([]),[N,P]=_.useState([]),[M,j]=_.useState(null),[A,F]=_.useState(null),[L,V]=_.useState(null),[J,ne]=_.useState(!1),[ee,ie]=_.useState(!1),[B,Y]=_.useState(null),[I,H]=_.useState([]),[W,R]=_.useState(null),[z,G]=_.useState(!1),[Q,re]=_.useState(!1),[q,se]=_.useState(null),[ce,pe]=_.useState(!1),[ke,le]=_.useState(null),[ye,je]=_.useState(null),[Ne,We]=_.useState([]),[$e,Nt]=_.useState(!1),[He,Et]=_.useState(null),[Rt,Mt]=_.useState([]),[ur,wr]=_.useState(!1),[dr,wt]=_.useState(null),[Ke,it]=_.useState(null),[vt,st]=_.useState(!1),[qe,ot]=_.useState(!1),[kt,Ut]=_.useState(0),[Qt,Gt]=_.useState(!1),[Zt,ir]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[kr,ve]=_.useState([]),[Pe,Me]=_.useState([]),[ze,At]=_.useState(!1),[Kt,hr]=_.useState(!1),[Ye,ft]=_.useState(null),[lt,Wt]=_.useState([]),[Fe,xt]=_.useState(!1),[yt,zt]=_.useState("subject");_.useEffect(()=>{rt()},[]),_.useEffect(()=>{const Le=Dt=>{vt&&!Dt.target.closest(".relative")&&st(!1),qe&&!Dt.target.closest(".relative")&&ot(!1)};return document.addEventListener("mousedown",Le),()=>{document.removeEventListener("mousedown",Le)}},[vt,qe]);const or=_.useCallback(()=>{xe.debug(" showChangePasswordTab called"),Gt(!0),st(!1),ot(!1)},[]),de=_.useCallback(()=>{xe.debug(" hideChangePasswordTab called"),Gt(!1),ir({currentPassword:"",newPassword:"",confirmPassword:""})},[]),_e=_.useCallback(async()=>{if(!r)return;const{currentPassword:Le,newPassword:Dt,confirmPassword:De}=Zt;if(!Le||!Dt||!De){d("Please fill in all fields","error");return}if(Dt!==De){d("New passwords do not match","error");return}if(Dt.length<6){d("New password must be at least 6 characters long","error");return}const Ve=/[a-zA-Z]/.test(Dt),$t=/[0-9]/.test(Dt);if(!Ve||!$t){d("New password must contain both letters and numbers","error");return}try{const gt=await Is.changePassword({username:r.username,currentPassword:Le,newPassword:Dt});gt.success?(d("Password changed successfully!","success"),de()):d(gt.message||"Failed to change password","error")}catch(gt){xe.error("Password change error:",gt),d("Failed to change password. Please try again.","error")}},[r,Zt,d]),ge=_.useCallback(Le=>{const{name:Dt,value:De}=Le.target;ir(Ve=>({...Ve,[Dt]:De}))},[]),be=_.useCallback(async()=>{xe.debug(" Loading teacher data...");try{const Le=await Is.getTeacherData();return xe.debug(" Teacher data loaded:",Le),je(new Date),Le}catch(Le){throw xe.error(" Error loading teacher data:",Le),Le}},[]),Ce=_.useCallback(async(Le=null)=>{xe.debug(" Loading teacher subjects...");try{if(!Le){const Ve=`teacher_subjects_${r?.teacher_id||r?.id||""}`,$t=Ta(Ve);if($t)return xe.debug(" Using cached teacher subjects"),E($t),$t}let Dt=Le,De;if(Le?(xe.debug(" Using passed teacher data for subjects"),De=Is.getTeacherSubjects(Le.subjects)):(xe.debug(" No teacher data passed, fetching from API"),Dt=await Is.getTeacherData(),xe.debug(" Raw teacher data:",Dt),De=Is.getTeacherSubjects(Dt.subjects)),xe.debug(" Teacher subjects loaded:",De),E(De),!Le){const Ve=`teacher_subjects_${r?.teacher_id||r?.id||""}`;Bs(Ve,De,Cs.teacher_subjects)}return xe.debug(" Available classes for performance chart:",De[0]?.classes||[]),xe.debug(" Performance chart will load when user clicks on a class"),De}catch(Dt){throw xe.error(" Error loading teacher subjects:",Dt),Dt}},[r?.teacher_id,r?.id]),Ee=_.useCallback(async()=>{xe.debug(" Loading teacher active tests...");try{const Le=`teacher_tests_${r?.teacher_id||r?.id||""}`,Dt=Ta(Le);Dt&&Dt.some($t=>$t.test_type==="drawing")&&(xe.debug(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(Le));const De=Ta(Le);if(De)return xe.debug(" Using cached teacher tests"),P(De),De;const Ve=await _n.getTeacherTests();return xe.debug(" Teacher tests loaded:",Ve),P(Ve),Bs(Le,Ve,Cs.teacher_tests),Ve}catch(Le){throw xe.error(" Error loading teacher tests:",Le),Le}},[r?.teacher_id,r?.id]),rt=_.useCallback(async()=>{xe.debug(" Initializing Teacher Cabinet...");try{if(x(!0),v(""),!n||!r){xe.debug(" User not authenticated"),v("User not authenticated");return}if(r.role!==Ro.TEACHER){xe.error(" Invalid user role for teacher cabinet:",r.role),v("Access denied. Teacher role required.");return}xe.debug(" Loading teacher data...");const Le=await be();xe.debug(" Loading subjects and tests in parallel...");const[Dt,De]=await Promise.allSettled([Ce(Le),Ee()]);let Ve=!1;Dt.status==="rejected"&&(xe.warn(" Subjects loading failed:",Dt.reason),Ve=!0),De.status==="rejected"&&(xe.warn(" Tests loading failed:",De.reason),Ve=!0),Ve&&d("Some data failed to load, but you can continue","warning"),xe.debug(" Teacher Cabinet initialization complete!")}catch(Le){xe.error(" Error initializing teacher cabinet:",Le),v("Failed to initialize teacher cabinet")}finally{x(!1)}},[n,r,be,Ce,Ee,d]),bt=_.useCallback(()=>{xe.debug(" Showing subject selection prompt..."),ne(!0),at(),zt("subject")},[]),at=_.useCallback(async()=>{xe.debug(" Loading available subjects..."),At(!0);try{const Le=await Is.getSubjectsForSelection();ve(Le),xe.debug(" Available subjects loaded:",Le)}catch(Le){xe.error(" Error loading available subjects:",Le),d("Failed to load subjects","error")}finally{At(!1)}},[]),ue=_.useCallback(Le=>{if(!Le){ft(null);return}const Dt=kr.find(De=>De.subject_id==Le);Dt&&(ft(Dt),Wt([]),zt("classes"))},[kr]),he=_.useCallback((Le,Dt)=>{Wt(De=>De.some(Ve=>Ve.grade===Le&&Ve.class===Dt)?De.filter(Ve=>!(Ve.grade===Le&&Ve.class===Dt)):[...De,{grade:Le,class:Dt}])},[]),Ae=_.useCallback(()=>{if(!Ye||lt.length===0){d("Please select at least one class","warning");return}const Le={subject_id:parseInt(Ye.subject_id),subject_name:Ye.subject,classes:lt};Me(Dt=>[...Dt,Le]),ft(null),Wt([]),zt("subject"),d(`Added ${Ye.subject} with ${lt.length} classes`,"success")},[Ye,lt]),Ie=_.useCallback(Le=>{Me(Dt=>Dt.filter((De,Ve)=>Ve!==Le))},[]),Ze=_.useCallback(async(Le,Dt,De)=>{xe.debug(" Deleting teacher subject:",{subjectId:Le,grade:Dt,classNumber:De});try{const Ve={subjectId:Le,grade:Dt,class:De};xe.debug(" Sending delete request with data:",Ve);const $t=await Is.deleteTeacherSubject(Ve);if($t.success)d("Subject assignment deleted successfully!","success"),await Ce();else throw new Error($t.error||"Failed to delete subject assignment")}catch(Ve){xe.error(" Error deleting subject assignment:",Ve),d("Error deleting subject assignment. Please try again.","error")}},[Ce,d]),mt=_.useCallback((Le,Dt,De,Ve)=>{le({subjectId:Le,subjectName:Dt,grade:De,classNumber:Ve}),pe(!0)},[]),Tt=_.useCallback(async()=>{ke&&(await Ze(ke.subjectId,ke.grade,ke.classNumber),pe(!1),le(null))},[ke,Ze]),lr=_.useCallback(()=>{pe(!1),le(null)},[]),Ft=_.useCallback(async()=>{if(Pe.length===0){d("Please select at least one subject","warning");return}hr(!0);try{const Le=await Is.saveTeacherSubjects(Pe);if(Le.success)d("Subjects saved successfully!","success"),ne(!1),Me([]),zt("subject"),await Ce();else throw new Error(Le.error||"Failed to save subjects")}catch(Le){xe.error(" Error saving teacher subjects:",Le),d("Failed to save subjects","error")}finally{hr(!1)}},[Pe,Ce]);_.useCallback(async Le=>{xe.debug(" Saving teacher subjects:",Le);try{const Dt=await Is.saveTeacherSubjects(Le);if(Dt.success)d("Subjects saved successfully!","success"),await Ce(),ne(!1);else throw new Error(Dt.error||"Failed to save subjects")}catch(Dt){xe.error(" Error saving teacher subjects:",Dt),d("Failed to save subjects","error")}},[Ce]);const Ct=_.useCallback(()=>{xe.debug(" Showing active tests..."),k("tests")},[]),fr=_.useCallback(async Le=>{xe.debug(" Showing test details:",Le);const Dt=N?.find(br=>br.test_type===Le.test_type&&br.test_id===Le.test_id)||{},De=Dt.assignments||Le.assignments||[],Ve=De.some(br=>br.is_active),$t=Le.selectedAssignmentId||Le.assignment_id||null,gt={...Dt,...Le,assignments:De,selectedAssignmentId:$t,hasActiveAssignment:Ve};Y(gt),ie(!0),H([]),R(null),G(!0);try{if(["input","true_false","multiple_choice","word_matching","fill_blanks"].includes(Le.test_type)){const br=await _n.getTestQuestionsWithInfo(Le.test_type,Le.test_id);H(br.questions||[]),R(br.testInfo||null),xe.debug(" Test questions and info loaded:",{questionsCount:br.questions?.length||0,testInfo:br.testInfo})}}catch(br){console.error("Error loading test questions:",br),d("Error loading test questions. Please try again.","error")}finally{G(!1)}},[N,d]);_.useCallback(async(Le,Dt,De)=>{xe.debug(" Removing class assignment:",Le,Dt,De);try{const Ve=await _n.removeClassAssignment(Le,Dt,De);if(Ve.success)d("Assignment removed successfully!","success"),await Ee();else throw new Error(Ve.error||"Failed to remove assignment")}catch(Ve){xe.error(" Error removing class assignment:",Ve),d("Failed to remove assignment","error")}},[Ee]);const Er=_.useCallback(async Le=>{xe.debug(" Marking assignment as completed:",Le),Et(Le);try{const Dt=await _n.markAssignmentCompleted(Le);if(Dt.success){P(Ve=>Ve.map($t=>({...$t,assignments:$t.assignments?.map(gt=>gt.assignment_id===Le?{...gt,is_active:!1}:gt)||[]}))),d("Test assignment marked as completed!","success");const De=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(De),xe.debug(" Cleared teacher tests cache"),Ee().catch(Ve=>{xe.error(" Error refreshing tests after completion:",Ve)})}else throw new Error(Dt.error||"Failed to mark assignment as completed")}catch(Dt){xe.error(" Error marking assignment as completed:",Dt),d("Failed to mark assignment as completed","error")}finally{Et(null)}},[Ee,d,r?.teacher_id,r?.id]),Fr=_.useCallback(async()=>{xe.debug(" Refreshing active tests data...");try{const Le=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Le),xe.debug(" Cache cleared, forcing fresh API call"),xe.debug(" Making direct API call to get-teacher-active-tests with noCache");const Dt=await _n.getTeacherTests(!0);xe.debug(" Direct API call returned:",Dt),P(Dt),xe.debug(" activeTestsData state updated:",Dt),d(`Tests refreshed successfully! Found ${Dt?.length||0} tests.`,"success")}catch(Le){xe.error(" Error refreshing tests:",Le),d("Failed to refresh tests","error")}},[d,r?.teacher_id,r?.id]),[on,ln]=_.useState(null),Yr=_.useCallback(async Le=>{xe.debug(" Activating assignment:",Le),ln(Le);try{const Dt=await _n.activateAssignment(Le);if(!Dt.success)throw new Error(Dt.error||"Failed to activate assignment");let De=null;P($t=>{const gt=$t.map(br=>({...br,assignments:br.assignments?.map(jt=>jt.assignment_id===Le?{...jt,is_active:!0}:jt)||[]}));return De=gt,gt}),De&&Y($t=>{if(!$t)return $t;const gt=De.find(Ur=>Ur.test_id===$t.test_id&&Ur.test_type===$t.test_type);if(!gt)return $t;const br=gt.assignments||$t.assignments||[],jt=br.some(Ur=>Ur.is_active);return{...$t,...gt,assignments:br,hasActiveAssignment:jt}}),d("Test assignment activated! Students can now see this test.","success");const Ve=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Ve),xe.debug(" Cleared teacher tests cache"),Fr().catch($t=>{xe.error(" Error performing hard refresh after activation:",$t)})}catch(Dt){xe.error(" Error activating assignment:",Dt),d("Failed to activate assignment","error")}finally{ln(null)}},[Fr,d,r?.teacher_id,r?.id]),Pr=_.useMemo(()=>!N||N.length===0?[]:N.flatMap(Le=>{if(!Le.assignments||Le.assignments.length===0)return[];const Dt=Le.assignments.some(De=>De.is_active);return Le.assignments.map(De=>({test_id:Le.test_id,test_type:Le.test_type,test_name:Le.test_name,num_questions:Le.num_questions,created_at:Le.created_at,subject_id:Le.subject_id,subject:Le.subject,teacher_id:Le.teacher_id,assignments:Le.assignments,has_active_assignment:Dt,assignment_id:De.assignment_id,grade:De.grade,class:De.class,is_active:De.is_active,assigned_at:De.assigned_at,days_remaining:De.days_remaining}))}),[N]),as=_.useCallback(async(Le=null)=>{if(r?.teacher_id){wr(!0),wt(null);try{xe.debug(" Loading test performance data for class:",Le);const Dt=await Jbe.getTestPerformance(r.teacher_id,Le);Mt(Dt),xe.debug(" Test performance data loaded:",Dt.length,"tests")}catch(Dt){xe.error(" Error loading test performance data:",Dt),wt(Dt.message)}finally{wr(!1)}}},[r?.teacher_id]);_.useCallback((Le,Dt)=>{xe.debug(" Showing class results:",Le,Dt),xe.debug(" Class click - grade:",Le,"className:",Dt),F(Le),V(Dt),k("results");const De=`${Le}/${Dt}`;xe.debug(" Loading performance data for clicked class:",De),it(De),as(De)},[as]);const[Kr,Tn]=_.useState([]),[Ds,oi]=_.useState([]),Kn=_.useCallback(async()=>{try{const Dt=await(await Qa(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestAssignments(r.teacher_id);Tn(Dt)}catch(Le){xe.warn("Failed to load retests",Le)}},[r]);_.useCallback(async Le=>{try{const De=await(await Qa(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestTargets(Le);oi(De)}catch(Dt){xe.warn("Failed to load retest targets",Dt)}},[]);const[Se,Pt]=_.useState(!1),[Rr,Xr]=_.useState(!1);_.useEffect(()=>{xe.debug("[TeacherCabinet] showRetestModal state changed:",Se)},[Se]);const[Hn,Nn]=_.useState({test_type:"",original_test_id:"",subject_id:"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:[]}),is=_.useCallback(async Le=>{xe.debug("[TeacherCabinet] openRetestModal called with:",Le);const{test_type:Dt,original_test_id:De,subject_id:Ve,failedStudentIds:$t=[],grade:gt,class:br}=Le||{};Nn({test_type:Dt||"multiple_choice",original_test_id:De||"",subject_id:Ve||"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:$t}),gt!==void 0&&F(gt),br!==void 0&&V(br),xe.debug("[TeacherCabinet] Setting showRetestModal to true"),Pt(!0)},[]),Hs=_.useCallback(async()=>{Xr(!0);try{const Le=await Qa(()=>import("./retestService-C6b0YDiD.js"),[]),Dt=new Date,De=new Date(Dt.getTime()+Hn.window_days*24*60*60*1e3),Ve={...Hn,teacher_id:r.teacher_id,grade:A,class:L,window_start:Dt.toISOString(),window_end:De.toISOString()};xe.debug("[Retest][TeacherCabinet] Prepared payload:",JSON.stringify(Ve)),xe.debug("[Retest][TeacherCabinet] Selected students count:",(Ve.student_ids||[]).length,"IDs:",Ve.student_ids),await Le.retestService.createRetestAssignment(Ve),d("Retest created","success"),Pt(!1),Kn(),Ut($t=>$t+1)}catch(Le){xe.error("Create retest error",Le),d(Le.message||"Failed to create retest","error")}finally{Xr(!1)}},[Hn,A,L,Kn]);if(g)return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[c.jsxs("div",{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Cabinet..."})]}),c.jsx("div",{className:"flex flex-wrap gap-2"})]});if(y)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Cabinet Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:y}),c.jsx(tt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return c.jsxs(dt.div,{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(dt.div,{className:"bg-gradient-to-r from-sky-400 to-sky-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-6",children:[c.jsxs(dt.div,{className:"flex-1 text-center",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Teacher Cabinet"}),c.jsxs("p",{className:"text-sky-100 text-sm sm:text-base md:text-lg",children:["Welcome, Teacher ",a()||""]})]}),c.jsxs(dt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsx("div",{className:"hidden md:block",children:c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>st(!vt),className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border border-white/20 text-white hover:bg-white/20 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:[c.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Menu"}),c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-200",style:{transform:vt?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),vt&&c.jsxs(dt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[c.jsxs("button",{onClick:()=>{st(!1),or()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),c.jsx("span",{children:"Change Password"})]}),c.jsxs("button",{onClick:()=>{st(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{children:"Logout"})]})]})]})}),c.jsxs("div",{className:"md:hidden",children:[c.jsx("button",{onClick:()=>ot(!qe),className:"flex items-center justify-center w-10 h-10 bg-white/10 border border-white/20 text-white hover:bg-white/20 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),qe&&c.jsxs(dt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[c.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:a()||"Teacher"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Account"})]}),c.jsxs("button",{onClick:()=>{ot(!1),or()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),c.jsx("span",{children:"Change Password"})]}),c.jsxs("button",{onClick:()=>{ot(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{children:"Logout"})]})]})]})]})]})})}),c.jsx(dt.div,{className:"bg-white border-b shadow-sm",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:c.jsx("nav",{className:"flex space-x-1 sm:space-x-8 overflow-x-auto",children:[{key:"main",label:"Main Dashboard",shortLabel:"Dashboard"},{key:"tests",label:"Test Management",shortLabel:"Tests"},{key:"results",label:"Class Results",shortLabel:"Results"},{key:"subjects",label:"Subject Management",shortLabel:"Subjects"}].map((Le,Dt)=>c.jsxs(dt.button,{onClick:()=>Le.key==="tests"?Ct():k(Le.key),className:`py-2 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors duration-200 whitespace-nowrap flex-shrink-0 flex-1 sm:flex-none ${T===Le.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+Dt*.1,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:[c.jsx("span",{className:"sm:hidden",children:Le.shortLabel}),c.jsx("span",{className:"hidden sm:inline",children:Le.label})]},Le.key))})})}),c.jsx(dt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:c.jsxs(al,{mode:"wait",children:[T==="main"&&c.jsx(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:li()},"main"),T==="subjects"&&c.jsx(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:cn()},"subjects"),T==="tests"&&c.jsx(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:gl()},"tests"),T==="results"&&c.jsx(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:c.jsx(CV,{selectedGrade:A,selectedClass:L,onBackToCabinet:()=>k("main"),openRetestModal:is,forceRefreshOnMount:kt>0},kt)},"results")]})}),J&&c.jsx(Ba,{isOpen:J,onClose:()=>{ne(!1),zt("subject"),Me([]),ft(null),Wt([])},title:"Select Subjects and Classes",size:"large",children:c.jsxs("div",{className:"space-y-6 px-4 max-h-[80vh] overflow-y-auto",children:[yt==="subject"&&c.jsxs(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Select Subject"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the subject you want to teach:"}),ze?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Loading subjects..."})]}):c.jsxs("select",{value:Ye?.subject_id||"",onChange:Le=>ue(Le.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"Select a subject"}),kr.map(Le=>c.jsx("option",{value:Le.subject_id,children:Le.subject},Le.subject_id))]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx(tt,{variant:"outline",onClick:()=>ne(!1),children:"Cancel"}),c.jsx(tt,{variant:"primary",onClick:()=>zt("classes"),disabled:!Ye,children:"Next: Select Classes"})]})]}),yt==="classes"&&Ye&&c.jsxs(dt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Step 2: Select Classes for ",Ye.subject]}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the classes you teach for this subject:"}),c.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg p-4",children:c.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7].map(Le=>{let Dt;return Le===1||Le===2||Le===3?Dt=[15,16]:Le===4||Le===5||Le===6?Dt=[13,14]:Le===7?Dt=[69,70]:Dt=[],c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"font-medium text-gray-700 text-sm",children:["Grade ",Le]}),c.jsx("div",{className:"space-y-1",children:Dt.map(De=>c.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[c.jsx("input",{type:"checkbox",checked:lt.some(Ve=>Ve.grade===Le.toString()&&Ve.class===De.toString()),onChange:()=>he(Le.toString(),De.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsxs("span",{className:"text-xs text-gray-700",children:["Class ",De]})]},De))})]},Le)})})})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(tt,{variant:"outline",onClick:()=>zt("subject"),children:"Back to Subjects"}),c.jsxs("div",{className:"space-x-3",children:[c.jsx(tt,{variant:"outline",onClick:()=>ne(!1),children:"Cancel"}),c.jsx(tt,{variant:"primary",onClick:Ae,disabled:lt.length===0,children:"Add Subject"})]})]})]}),Pe.length>0&&c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Selected Subjects"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Review your selected subjects and classes:"}),c.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:Pe.map((Le,Dt)=>c.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:Le.subject_name}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Classes: ",Le.classes.map(De=>`Grade ${De.grade} Class ${De.class}`).join(", ")]})]}),c.jsx("button",{onClick:()=>Ie(Dt),className:"text-red-600 hover:text-red-800 p-1",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Dt))})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(tt,{variant:"outline",onClick:()=>zt("subject"),children:"Add More Subjects"}),c.jsxs("div",{className:"space-x-3",children:[c.jsx(tt,{variant:"outline",onClick:()=>ne(!1),children:"Cancel"}),c.jsx(tt,{variant:"primary",onClick:Ft,disabled:Kt,className:"relative",children:Kt?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save All Subjects"})]})]})]})]})}),Se&&c.jsxs(Ba,{isOpen:Se,onClose:()=>Pt(!1),title:"Create Retest",size:"medium",children:[c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retest Window"}),c.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Hn.window_days,onChange:Le=>Nn(Dt=>({...Dt,window_days:Number(Le.target.value)})),children:[c.jsx("option",{value:1,children:"1 day"}),c.jsx("option",{value:2,children:"2 days"}),c.jsx("option",{value:3,children:"3 days"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attempts"}),c.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Hn.max_attempts,onChange:Le=>Nn(Dt=>({...Dt,max_attempts:Number(Le.target.value)})),children:[c.jsx("option",{value:1,children:"1 attempt"}),c.jsx("option",{value:2,children:"2 attempts"}),c.jsx("option",{value:3,children:"3 attempts"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Students can retry immediately if they fail"})]})]})}),c.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[c.jsx("button",{onClick:()=>Pt(!1),disabled:Rr,className:"px-4 py-2 text-sm rounded border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:Hs,disabled:Rr,className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Rr?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm"}),"Creating Retest..."]}):"Create Retest"})]})]}),ee&&B&&c.jsx(qC,{isOpen:ee,onClose:()=>ie(!1),testType:B.test_type,testId:B.test_id,testName:B.test_name,questions:I,isLoading:z,canEdit:!B.hasActiveAssignment,canEditSettings:!B.hasActiveAssignment,subject:B.subject,createdAt:B.created_at,assignments:B.assignments||[],testInfo:W,onSave:async(Le,Dt,De)=>{try{await _n.updateTestQuestions(Le,Dt,De),d("Questions updated successfully!","success");const Ve=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Ve),await fr(B)}catch(Ve){throw console.error("Error saving questions:",Ve),d("Failed to update questions","error"),Ve}},onSettingsSave:async Le=>{try{await _n.updateTestSettings(B.test_type,B.test_id,Le),d("Settings updated successfully!","success"),await fr(B)}catch(Dt){throw d("Failed to update settings","error"),Dt}}}),ce&&ke&&c.jsx(Ba,{isOpen:ce,onClose:lr,title:"Delete Subject Assignment",size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject Assignment"}),c.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the assignment for"," ",c.jsx("span",{className:"font-semibold text-gray-900",children:ke.subjectName})," ","in Grade ",ke.grade,", Class ",ke.classNumber,"?"]}),c.jsx("p",{className:"text-xs text-red-600",children:"This action cannot be undone."})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(tt,{variant:"outline",onClick:lr,children:"Cancel"}),c.jsx(tt,{variant:"danger",onClick:Tt,children:"Delete Assignment"})]})]})}),c.jsx(dt.div,{className:"fixed top-4 right-4 space-y-2 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8,duration:.5},children:f.map(Le=>c.jsx(dt.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:c.jsx("div",{className:`p-4 rounded-lg shadow-lg ${Le.type==="success"?"bg-green-600 text-white":Le.type==="error"?"bg-red-600 text-white":Le.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:Le.message}),c.jsx("button",{onClick:()=>h(Le.id),className:"ml-4 text-white hover:text-gray-200",children:""})]})})},Le.id))}),Qt&&c.jsx(Ba,{isOpen:Qt,onClose:de,title:"Change Password",size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",name:"currentPassword",value:Zt.currentPassword,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter current password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),c.jsx("input",{type:"password",name:"newPassword",value:Zt.newPassword,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter new password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",name:"confirmPassword",value:Zt.confirmPassword,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Confirm new password"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(tt,{type:"button",variant:"secondary",onClick:de,className:"flex-1",children:"Cancel"}),c.jsx(tt,{type:"button",onClick:_e,className:"flex-1",children:"Change Password"})]})]})})]});function li(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsxs(Ht,{children:[c.jsx(Ht.Header,{children:c.jsx(Ht.Title,{children:"My Subjects & Classes"})}),c.jsx(Ht.Body,{children:b.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any subjects assigned yet."}),c.jsx(tt,{variant:"outline",onClick:()=>k("subjects"),children:"Manage Subjects"})]}):c.jsx("div",{className:"space-y-6",children:b.map((Le,Dt)=>c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+Dt*.1,duration:.3},className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Le.name}),c.jsxs("span",{className:"text-sm text-gray-500",children:[Le.classes?.length||0," classes"]})]}),Le.classes&&Le.classes.length>0?c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Le.classes.map((De,Ve)=>c.jsx(dt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+Dt*.1+Ve*.05,duration:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:c.jsxs(tt,{variant:"outline",size:"sm",onClick:()=>{F(De.grade),V(De.class),k("results")},className:"font-medium",children:[De.grade,"/",De.class]})},Ve))}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:c.jsx("span",{className:"text-sm",children:"No classes assigned to this subject"})})]},Le.id))})})]})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:c.jsxs(Ht,{children:[c.jsxs(Ht.Header,{children:[c.jsx(Ht.Title,{children:"Test Performance Overview"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Test performance over time with average scores"})]}),c.jsx(Ht.Body,{children:b.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"mb-2",children:c.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),c.jsx("p",{className:"text-gray-500",children:"No subjects assigned - no performance data available"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:(()=>{const Le=[];return b.forEach(Dt=>{Dt.classes&&Dt.classes.forEach(De=>{const Ve=`${De.grade}/${De.class}`;Le.find($t=>$t.key===Ve)||Le.push({key:Ve,grade:De.grade,class:De.class,subject:Dt.name})})}),Le})().map((Le,Dt)=>c.jsxs("button",{onClick:()=>{xe.debug(" Class button clicked:",Le.key),it(Le.key),as(Le.key)},className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${Ke===Le.key?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[Le.grade,"/",Le.class]},Le.key))}),Ke?c.jsx("div",{className:"mt-4",children:c.jsx(ZAe,{data:Rt,loading:ur,error:dr})}):c.jsxs("div",{className:"mt-4 text-center text-muted py-4",children:[c.jsx("div",{className:"mb-2",children:c.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),c.jsx("p",{className:"text-gray-500",children:"Select a class above to view test performance data"})]})]})})]})})]})}function cn(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsx(Ht,{children:c.jsx(Ht.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(Ht.Title,{children:"Subject Management"}),c.jsx(tt,{variant:"primary",onClick:bt,children:"Add Subject"})]})})})}),b.length===0?c.jsx(dt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:c.jsx(Ht,{children:c.jsx(Ht.Body,{children:c.jsxs("div",{className:"text-center p-12",children:[c.jsx(dt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No subjects assigned yet"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first subject to get started with creating tests and managing classes."}),c.jsx(tt,{variant:"primary",onClick:bt,size:"lg",children:"Add Your First Subject"})]})})})}):c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:c.jsxs(Ht,{children:[c.jsx(Ht.Header,{children:c.jsx(Ht.Title,{children:"Your Subjects"})}),c.jsx(Ht.Body,{children:c.jsx("div",{className:"space-y-4",children:b.map((Le,Dt)=>c.jsx(dt.div,{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-green-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+Dt*.1,duration:.3},whileHover:{scale:1.02,backgroundColor:"#f9fafb"},children:c.jsx("div",{className:"flex justify-between items-start",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:Le.name}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Le.classes?.map((De,Ve)=>c.jsxs(dt.div,{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 text-xs rounded-full px-3 py-1",initial:{scale:0},animate:{scale:1},transition:{delay:.4+Dt*.1+Ve*.05,duration:.2},whileHover:{scale:1.1},children:[c.jsxs("span",{children:[De.grade," - ",De.className]}),c.jsx("button",{onClick:()=>mt(Le.id,Le.name,De.grade,De.class),className:"ml-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete this subject assignment",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Ve))||c.jsx("span",{className:"text-gray-500 text-sm",children:"No classes assigned"})})]})})},Dt))})})]})})]})}function gl(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsx(Ht,{children:c.jsx(Ht.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(Ht.Title,{children:"Active Tests"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(tt,{variant:"outline",onClick:Fr,children:"Refresh"}),c.jsx(tt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),children:"Create New Test"})]})]})})})}),Pr.length===0?c.jsx(dt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:c.jsx(Ht,{children:c.jsx(Ht.Body,{children:c.jsxs("div",{className:"text-center p-12",children:[c.jsx(dt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No active tests found"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first test to get started with assessments."}),c.jsx(tt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),size:"lg",children:"Create Your First Test"})]})})})}):c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"space-y-4",children:Pr.map((Le,Dt)=>c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+Dt*.1,duration:.3},whileHover:{scale:1.01},children:c.jsx(Ht,{children:c.jsxs(Ht.Body,{children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row sm:items-center sm:space-x-4 gap-2",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 min-w-0 flex-shrink-0 max-w-xs truncate",title:Le.test_name,children:Le.test_name}),c.jsx("span",{className:"hidden sm:inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex-shrink-0",children:Le.test_type}),c.jsxs("span",{className:"hidden sm:inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold flex-shrink-0",children:[Le.grade,"/",Le.class]})]}),c.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Le.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:Le.is_active?"Active":"Inactive"}),c.jsx("div",{className:"text-sm text-gray-500 flex-shrink-0",children:new Date(Le.created_at).toLocaleDateString()})]})]}),c.jsxs("div",{className:"hidden sm:flex gap-2 ml-4 flex-shrink-0",children:[c.jsx(tt,{variant:"outline",onClick:()=>fr({...Le,selectedAssignmentId:Le.assignment_id,assignments:Le.assignments}),size:"sm",children:"Details"}),!Le.is_active&&c.jsx(tt,{variant:"primary",onClick:()=>Yr(Le.assignment_id),size:"sm",disabled:on===Le.assignment_id,children:on===Le.assignment_id?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),c.jsx(tt,{variant:"success",onClick:()=>Er(Le.assignment_id),size:"sm",disabled:He===Le.assignment_id,children:He===Le.assignment_id?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 sm:hidden",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold",children:[Le.grade,"/",Le.class]}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Le.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:Le.is_active?"Active":"Inactive"}),c.jsx("span",{className:"text-xs text-gray-500",children:new Date(Le.created_at).toLocaleDateString()})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx(tt,{variant:"outline",onClick:()=>fr({...Le,assignments:[{assignment_id:Le.assignment_id,grade:Le.grade,class:Le.class,is_active:Le.is_active}]}),size:"sm",className:"text-xs",children:"Details"}),!Le.is_active&&c.jsx(tt,{variant:"primary",onClick:()=>Yr(Le.assignment_id),size:"sm",disabled:on===Le.assignment_id,children:on===Le.assignment_id?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),c.jsx(tt,{variant:"success",onClick:()=>Er(Le.assignment_id),size:"sm",disabled:He===Le.assignment_id,children:He===Le.assignment_id?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]})]})})},`${Le.test_id}-${Le.assignment_id}-${Dt}`))})]})}},eje={multipleChoice:"multiple_choice",trueFalse:"true_false",input:"input",matching:"matching_type",wordMatching:"word_matching",drawing:"drawing",fillBlanks:"fill_blanks",speaking:"speaking"},VL=()=>{const{user:e}=Ms();Pde();const{notifications:t,showNotification:r,removeNotification:n}=si(),[s,a]=_.useState(!1),[i,o]=_.useState(!1),[l,u]=_.useState("typeSelection"),[d,f]=_.useState(!1),[h,g]=_.useState(null),[x,y]=_.useState([]),[v,T]=_.useState(!1),[k,b]=_.useState(!1),[E,N]=_.useState(!1),[P,M]=_.useState(!1),[j,A]=_.useState({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:"",isShuffled:!1}),[F,L]=_.useState([]),[V,J]=_.useState(null);_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null);const ne=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in initializeTestCreation, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" Setting up test creation event listeners..."),W(),console.log(" Test creation initialization complete")},[e,r]),ee=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestTypeSelection, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" showTestTypeSelection called - starting new test creation"),o(!1),console.log(" Reset testAssignmentCompleted flag to false"),a(!0),console.log(" Set isInTestCreation flag to true"),ie(),u("typeSelection"),Y("testTypeSelection")},[e,r]),ie=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in disableNavigationButtons, redirecting to login");return}console.log(" Disabling navigation buttons..."),f(!0)},[e]),B=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in enableNavigationButtons, redirecting to login");return}console.log(" Enabling navigation buttons..."),f(!1)},[e]),Y=_.useCallback(async ue=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveTestCreationState, redirecting to login");return}console.log("  saveTestCreationState called with step:",ue),console.log("  Call stack:",new Error().stack);const he={multipleChoice:{buttonVisible:!0,hintVisible:!1},trueFalse:{buttonVisible:!0,hintVisible:!1},input:{buttonVisible:!0,hintVisible:!1}},Ae={isInTestCreation:!0,currentStep:ue,timestamp:Date.now(),excelState:he};localStorage.setItem("test_creation_state",JSON.stringify(Ae)),console.log(" Saved test creation state:",Ae);const Ie={};switch(ue){case"testTypeSelection":break;case"multipleChoiceForm":Ie.testName=j.testName||"",Ie.numQuestions=j.numQuestions||"",Ie.numOptions=j.numOptions||"",Ie.questions=j.questions||{};break;case"trueFalseForm":Ie.testName=j.testName||"",Ie.numQuestions=j.numQuestions||"",Ie.questions=j.questions||{};break;case"inputForm":Ie.testName=j.testName||"",Ie.numQuestions=j.numQuestions||"",Ie.questions=j.questions||{};break;case"formCreation":Ie.testName=j.testName||"",Ie.numQuestions=j.numQuestions||"",Ie.numOptions=j.numOptions||"",Ie.questions=j.questions||{},Ie.enableTimer=!!j.enableTimer,Ie.timerMinutes=j.timerMinutes||"",Ie.isShuffled=!!j.isShuffled;break;case"assignment":case"testAssignment":Ie.testName=j.testName||"",Ie.numQuestions=j.numQuestions||"",Ie.numOptions=j.numOptions||"",Ie.questions=j.questions||{};break;default:console.log(" Unknown step in saveTestCreationState:",ue);break}Object.keys(Ie).length>0&&(localStorage.setItem(`form_data_${ue}`,JSON.stringify(Ie)),console.log(" Saved form data for step:",ue,Ie))},[e,j]),I=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearTestCreationState, redirecting to login");return}localStorage.removeItem("test_creation_state"),localStorage.removeItem("test_creation_form_data");const ue=[];for(let he=0;he<localStorage.length;he++){const Ae=localStorage.key(he);Ae&&(Ae.includes("test")||Ae.includes("form")||Ae.includes("question"))&&ue.push(Ae)}ue.forEach(he=>{localStorage.removeItem(he),console.log(" Removed localStorage key:",he)}),console.log(" Cleared test creation state from localStorage")},[e]);_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearAllTestFields, redirecting to login");return}console.log(" Clearing all test form fields..."),A({testName:"",numQuestions:0,numOptions:0,questions:{}}),g(null),L([]),J(null),console.log(" Cleared all test form fields")},[e]);const H=_.useCallback(()=>{console.log(" Resetting Excel upload state..."),qe({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),["multiple-choice","true-false","input","word-matching"].forEach(he=>{const Ae=document.querySelector(`.excel-upload-btn[data-test-type="${he}"]`);Ae&&(Ae.style.display="none",console.log(" Excel button hidden for:",he));const Ie=document.querySelector(`.excel-hint[data-test-type="${he}"]`);Ie&&(Ie.style.display="none",console.log(" Excel hint hidden for:",he));const Ze=document.querySelector(`.excel-file-input[data-test-type="${he}"]`);Ze&&(Ze.value="",console.log(" File input cleared for:",he))}),console.log(" Excel upload state reset complete")},[]),W=_.useCallback(()=>{console.log(" Setting up auto-save listeners for initial form fields..."),["testName","numQuestions","numOptions","enableTimer","timerMinutes","isShuffled"].forEach(he=>{const Ae=document.getElementById(he);Ae&&Ae.addEventListener("input",()=>{console.log(` Auto-save triggered for field: ${he}`)})}),console.log(" Form auto-save setup complete")},[]);_.useCallback(async ue=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveFormDataForStep, redirecting to login");return}console.log("  saveFormDataForStep called with step:",ue),console.log("  Call stack:",new Error().stack);const he={};switch(ue){case"testTypeSelection":break;case"multipleChoiceForm":he.testName=j.testName||"",he.numQuestions=j.numQuestions||"",he.numOptions=j.numOptions||"",he.questions=j.questions||{};break;case"trueFalseForm":he.testName=j.testName||"",he.numQuestions=j.numQuestions||"",he.questions=j.questions||{};break;case"inputForm":he.testName=j.testName||"",he.numQuestions=j.numQuestions||"",he.questions=j.questions||{};break;case"formCreation":he.testName=j.testName||"",he.numQuestions=j.numQuestions||"",he.numOptions=j.numOptions||"",he.questions=j.questions||{};break;default:console.log(" Unknown step for form data save:",ue);return}localStorage.setItem("test_creation_form_data",JSON.stringify({step:ue,data:he,timestamp:Date.now()})),console.log(" Saved form data for step:",ue,he)},[e,j]);const R=_.useCallback(async ue=>{console.log(" Restoring form data for step:",ue);try{const he=localStorage.getItem(`form_data_${ue}`);if(he){const Ae=JSON.parse(he);console.log(" Restored form data:",Ae),A(Ie=>{const Ze={...Ie,...Ae};return console.log(" Updated formData with restored data:",Ze),console.log(" Matching test data in restored data:",Ze.matchingTestData),Ze}),Object.keys(Ae).forEach(Ie=>{const Ze=document.getElementById(Ie);Ze&&Ae[Ie]!==void 0&&(Ze.value=Ae[Ie])}),console.log(" Form data restored for step:",ue)}else console.log(" No saved data found for step:",ue)}catch(he){console.error(" Error restoring form data:",he)}},[e]),z=_.useCallback(()=>{console.log(" Setting up multiple choice form auto-save..."),["mcNumOptions"].forEach(Ae=>{const Ie=document.getElementById(Ae);Ie&&Ie.addEventListener("input",()=>{console.log(` Auto-save triggered for MC field: ${Ae}`)})}),document.querySelectorAll("#mcQuestionsContainer input, #mcQuestionsContainer textarea, #mcQuestionsContainer select").forEach(Ae=>{Ae.addEventListener("input",()=>{console.log(" Auto-save triggered for MC question field")})}),console.log(" Multiple choice form auto-save setup complete")},[]),G=_.useCallback(()=>{console.log(" Setting up true/false form auto-save..."),document.querySelectorAll("#tfQuestionsContainer input, #tfQuestionsContainer textarea, #tfQuestionsContainer select").forEach(he=>{he.addEventListener("input",()=>{console.log(" Auto-save triggered for TF question field")})}),console.log(" True/false form auto-save setup complete")},[]),Q=_.useCallback(()=>{console.log(" Setting up input form auto-save..."),document.querySelectorAll("#inputQuestionsContainer input, #inputQuestionsContainer textarea, #inputQuestionsContainer select").forEach(he=>{he.addEventListener("input",()=>{console.log(" Auto-save triggered for Input question field")})}),console.log(" Input form auto-save setup complete")},[]),re=_.useCallback(ue=>{console.log(" showExcelUploadButton called with testType:",ue);const he=ue==="multiple-choice"?"multipleChoice":ue==="true-false"?"trueFalse":ue==="input"?"input":ue;qe(Ae=>({...Ae,[he]:{...Ae[he],buttonVisible:!0}}))},[]),q=_.useCallback(ue=>{console.log(" showExcelHint called with testType:",ue);const he=ue==="multiple-choice"?"multipleChoice":ue==="true-false"?"trueFalse":ue==="input"?"input":ue;qe(Ae=>({...Ae,[he]:{...Ae[he],hintVisible:!0}}))},[]),se=_.useCallback(async(ue,he,Ae)=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTestAssignmentOptions, redirecting to login");return}console.log("displayTestAssignmentOptions called with:",{classes:ue,testType:he,testId:Ae}),y(ue),console.log(" Test assignment options displayed for:",{testType:he,testId:Ae,classesCount:ue.length})},[e]),ce=_.useCallback(async(ue,he)=>{try{if(console.log("Loading teacher grades and classes for test assignment"),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}console.log("Teacher ID:",e.teacher_id);const Ie=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log("Teacher subjects response:",Ie),Ie.success&&Ie.subjects&&Ie.subjects.length>0?(console.log("Teacher subjects loaded:",Ie.subjects),y(Ie.subjects),se(Ie.subjects,ue,he)):(console.log("No teacher subjects found"),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(Ae){console.error("Error loading teacher grades and classes:",Ae),r("Error loading teacher grades and classes","error")}},[e,r,se]),pe=_.useCallback(async()=>{if(console.log(" Loading available classes..."),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}try{const he=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log(" Teacher subjects response:",he),he.success&&he.subjects&&he.subjects.length>0?(console.log(" Teacher subjects loaded:",he.subjects),y(he.subjects)):(console.log("No teacher subjects found"),y([]),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(ue){console.error(" Error loading available classes:",ue),r("Failed to load available classes","error")}},[e,r]);_.useCallback(async(ue,he)=>{if(i){o(!1);return}if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestAssignment, redirecting to login");return}ie(),Y("testAssignment"),J(he),g(ue),u("testAssignment"),ce(ue,he),console.log(" Test assignment interface shown for:",{testType:ue,testId:he})},[i,e,ie,Y,ce]);const ke=_.useCallback(async ue=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTeacherActiveTests, redirecting to login");return}if(console.log(" Displaying teacher active tests:",ue),ue.length===0){$e([]);return}$e(ue),console.log(" Active tests displayed:",ue.length,"tests")},[e]);_.useCallback(async(ue,he)=>{try{console.log(" Loading test questions for:",{testType:ue,testId:he});const Ae=await _n.getTestQuestions(he,ue);return console.log(" Test questions loaded:",Ae),Ae}catch(Ae){throw console.error("Error loading test questions:",Ae),Ae}},[]),_.useCallback((ue,he,Ae,Ie)=>{console.log(" Showing teacher test details modal:",{testType:ue,testId:he,testName:Ae,questionsCount:Ie.length}),console.log("Test Details:",{testType:ue,testId:he,testName:Ae,questions:Ie.map(Ze=>({id:Ze.question_id,question:Ze.question,correctAnswer:Ze.correct_answer}))}),r(`Test details for "${Ae}" loaded successfully.`,"success")},[r]);const le=_.useCallback(async()=>{console.log(" DEBUG: loadTeacherActiveTests called");try{console.log(" DEBUG: Fetching teacher active tests using JWT authentication...");const ue=await _n.getTeacherTests();console.log(" DEBUG: Tests loaded:",ue),ue&&ue.length>0?(console.log(" DEBUG: Success! Displaying",ue.length,"tests"),ke(ue)):(console.log(" DEBUG: No tests found"),$e([]))}catch(ue){console.error(" DEBUG: Error loading active tests:",ue),r("Error loading active tests.","error")}},[r,ke]),ye=_.useCallback(()=>{console.log("showTestCreationSuccessMessage called"),r("Test created and assigned successfully!","success"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}}),L([]),o(!1),a(!1),I()},[r,I]),je=_.useCallback(async(ue,he)=>{if(console.log(" === ASSIGN TEST TO CLASSES DEBUG START ==="),console.log(" Test Type:",ue),console.log(" Test ID:",he),console.log(" Current formData:",j),console.log(" Selected Classes:",F),console.log(" User:",e),!e||!e.teacher_id){console.error(" No valid teacher session found in assignTestToClasses, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}if(console.log(" Teacher ID:",e.teacher_id),F.length===0){console.warn(" No classes selected"),r("Please select at least one class.","warning");return}try{console.log(" Preparing test + assignment request..."),await cu.loadAcademicCalendar();const Ie=cu.getCurrentTerm()?.id;if(!Ie)throw new Error("No current academic period found");const Ze=F.map(Ft=>{const Ct={grade:parseInt(Ft.grade),class:parseInt(Ft.class),subject_id:parseInt(Ft.subject_id),academic_period_id:Ie,due_date:null};return console.log(" Created assignment:",Ct),Ct});if(console.log(" Final assignments array:",Ze),ue==="matching"){console.log(" Processing matching test..."),console.log(" Setting isAssigningTest to true for matching test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Fr=>setTimeout(Fr,100));const Ft=j.matchingTestData;if(console.log(" Matching test data from formData:",Ft),!Ft){console.error(" Matching test data not found in formData"),r("Matching test data not found. Please recreate the test.","error");return}console.log(" Matching test data found, processing...");let Ct;Ft.processedQuestions?(console.log(" Using pre-processed questions from MatchingTestCreator"),Ct=Ft.processedQuestions):(console.log(" Converting blocks to questions (fallback)..."),console.log(" Blocks:",Ft.blocks),console.log(" Words:",Ft.words),console.log(" Arrows:",Ft.arrows),Ct=Ft.blocks.map((Fr,on)=>{const ln=Ft.words.find(Kr=>Kr.blockId===Fr.id)?.word||`Word ${on+1}`,Yr=Ft.arrows.some(Kr=>Kr.startBlock===Fr.id),Pr=Ft.arrows.find(Kr=>Kr.startBlock===Fr.id)||null,as={question_id:on+1,word:ln,block_coordinates:{x:Fr.x,y:Fr.y,width:Fr.width,height:Fr.height},has_arrow:Yr,arrow:Pr?{startX:Pr.startX,startY:Pr.startY,endX:Pr.endX,endY:Pr.endY,style:Pr.style||{}}:null};return console.log(` Question ${on+1}:`,as),as})),console.log(" Final questions array:",Ct);const fr={teacher_id:e.teacher_id,test_name:j.testName,image_url:Ft.imageUrl,num_blocks:Ft.blocks.length,questions:Ct,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final matching test data payload:",fr),console.log(" Calling testService.saveMatchingTest...");const Er=await _n.saveMatchingTest(fr);console.log(" API Response:",Er),Er.success?(console.log(" Matching test created and assigned successfully!"),r("Matching test created and assigned successfully!","success"),console.log("Matching test created and assigned successfully"),o(!0),Ne()):(console.error(" Failed to create matching test:",Er.message),r("Error creating and assigning matching test: "+Er.message,"error")),M(!1);return}if(ue==="wordMatching"){console.log(" Processing word matching test..."),console.log(" Setting isAssigningTest to true for word matching test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Fr=>setTimeout(Fr,100));const Ft=j.wordMatchingData;if(console.log(" Word matching test data from formData:",Ft),!Ft){console.error(" Word matching test data not found in formData"),r("Word matching test data not found. Please recreate the test.","error");return}console.log(" Word matching test data found, processing...");const Ct=Ft.wordPairs.map((Fr,on)=>({question_id:on+1,left_word:Fr.leftWord,right_word:Fr.rightWord}));console.log(" Final word matching questions array:",Ct);const fr={teacher_id:e.teacher_id,test_type:"word_matching",test_name:j.testName,num_questions:Ft.wordPairs.length,interaction_type:Ft.interactionType||"drag",questions:Ct,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final word matching test data payload:",fr),console.log(" Calling testService.assignTestToClasses for word matching...");const Er=await _n.assignTestToClasses(fr);console.log(" API Response:",Er),Er.success?(console.log(" Word matching test created and assigned successfully!"),r("Word matching test created and assigned successfully!","success"),console.log("Word matching test created and assigned successfully"),o(!0),Ne()):(console.error(" Failed to create word matching test:",Er.message),r("Error creating and assigning word matching test: "+Er.message,"error")),M(!1);return}if(ue==="drawing"){console.log(" Processing drawing test..."),console.log(" Setting isAssigningTest to true for drawing test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Fr=>setTimeout(Fr,100));const Ft=j.drawingData;if(console.log(" Drawing test data from formData:",Ft),!Ft){console.error(" Drawing test data not found in formData"),r("Drawing test data not found. Please recreate the test.","error");return}console.log(" Drawing test data found, processing...");const Ct=Ft.questions||[];console.log(" Drawing questions array:",Ct);const fr={teacher_id:e.teacher_id,test_type:"drawing",test_name:j.testName,num_questions:Ft.num_questions,passing_score:Ft.passing_score,questions:Ct,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final drawing test data payload:",fr),console.log(" Calling testService.assignTestToClasses...");const Er=await _n.assignTestToClasses(fr);console.log(" API Response:",Er),Er.success?(console.log(" Drawing test created and assigned successfully!"),r("Drawing test created and assigned successfully!","success"),o(!0),Ne()):(console.error(" Failed to create drawing test:",Er.message),r("Error creating and assigning drawing test: "+Er.message,"error")),M(!1);return}if(ue==="fillBlanks"){console.log(" Processing fill blanks test..."),console.log(" Setting isAssigningTest to true for fill blanks test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Fr=>setTimeout(Fr,100));const Ft=j.fillBlanksData;if(console.log(" Fill blanks test data from formData:",Ft),!Ft){console.error(" Fill blanks test data not found in formData"),r("Fill blanks test data not found. Please recreate the test.","error");return}console.log(" Fill blanks test data found, processing...");const Ct=Ft.blanks||[];console.log(" Fill blanks questions array:",Ct);const fr={teacher_id:e.teacher_id,test_type:"fill_blanks",test_name:j.testName,test_text:Ft.test_text,num_questions:Ft.num_questions,num_blanks:Ft.num_blanks,separate_type:Ft.separate_type,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:Ct,assignments:Ze};console.log(" Final fill blanks test data payload:",fr),console.log(" Calling testService.assignTestToClasses...");const Er=await _n.assignTestToClasses(fr);console.log(" API Response:",Er),Er.success?(console.log(" Fill blanks test created and assigned successfully!"),r("Fill blanks test created and assigned successfully!","success"),o(!0),Ne()):(console.error(" Failed to create fill blanks test:",Er.message),r("Error creating and assigning fill blanks test: "+Er.message,"error")),M(!1);return}if(ue==="speaking"){console.log(" Processing speaking test..."),console.log(" Setting isAssigningTest to true for speaking test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Fr=>setTimeout(Fr,100));const Ft=j.speakingData;if(console.log(" Speaking test data from formData:",Ft),!Ft){console.error(" Speaking test data not found in formData"),r("Speaking test data not found. Please recreate the test.","error");return}console.log(" Speaking test data found, processing...");const Ct={teacher_id:e.teacher_id,test_type:"speaking",test_name:j.testName,time_limit:Ft.time_limit,min_duration:Ft.min_duration,max_duration:Ft.max_duration,max_attempts:Ft.max_attempts,min_words:Ft.min_words,passing_score:Ft.passing_score,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:Ft.questions,assignments:Ze};console.log(" Final speaking test data payload:",Ct),console.log(" Calling save-speaking-test-with-assignments for speaking test...");const Er=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-speaking-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ct)})).json();console.log(" API Response:",Er),Er.success?(console.log(" Speaking test created and assigned successfully!"),r("Speaking test created and assigned successfully!","success"),o(!0),Ne()):(console.error(" Failed to create speaking test:",Er.message),r("Error creating and assigning speaking test: "+Er.message,"error")),M(!1);return}console.log(" Processing non-matching test..."),console.log(" Form data questions:",j.questions);const mt=Object.keys(j.questions).map(Ft=>{const Ct=j.questions[Ft];console.log(` Processing question ${Ft}:`,Ct);let fr;if(ue==="input")fr={correct_answers:Ct.correct_answers||[Ct.correctAnswer||""]};else if(ue==="trueFalse"){const Fr=Ct.correct_answer||Ct.correctAnswer||Ct.correct_answers?.[0]||"";fr={correct_answer:Fr==="true"}}else fr={correct_answer:Ct.correctAnswer||Ct.correct_answer||Ct.correct_answers?.[0]||""};const Er={question_id:parseInt(Ft),question:Ct.question,...fr,options:Ct.options||[]};return console.log(` Question ${Ft} correct_answers:`,Ct.correct_answers),console.log(` Question ${Ft} correctAnswer:`,Ct.correctAnswer),console.log(` Converted question ${Ft}:`,Er),Er});console.log(" Final questions array:",mt);const Tt={teacher_id:e.teacher_id,test_type:eje[ue],test_name:j.testName,num_questions:j.numQuestions,num_options:j.numOptions,questions:mt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,is_shuffled:!!j.isShuffled,assignments:Ze};console.log(" Final test data payload:",Tt),console.log(" Setting isAssigningTest to true..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ft=>setTimeout(Ft,100)),console.log(" Calling testService.assignTestToClasses...");const lr=await _n.assignTestToClasses(Tt);console.log(" API Response:",lr),lr.success?(console.log(" Test created and assigned successfully!"),r("Test created and assigned successfully!","success"),console.log("Test created and assigned successfully"),o(!0),Ne()):(console.error(" Failed to create and assign test:",lr.message),r("Error creating and assigning test: "+lr.message,"error"))}catch(Ae){console.error(" Exception in assignTestToClasses:",Ae),console.error("Error creating and assigning test:",Ae),r("Error creating and assigning test. Please try again.","error")}finally{M(!1)}console.log(" === ASSIGN TEST TO CLASSES DEBUG END ===")},[e,F,j,r,ye]),Ne=_.useCallback(async()=>{console.log("returnToMainCabinet called - restoring main cabinet view");try{a(!1),o(!1),u("typeSelection"),g(null),J(null),L([]),B(),I(),ye(),console.log(" Returned to main cabinet")}catch(ue){console.error("Error returning to main cabinet:",ue)}},[B,I,ye]),[We,$e]=_.useState([]),[Nt,He]=_.useState(!1);_.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await le(),r("Active tests data refreshed.","success")}catch(ue){console.error("Error refreshing active tests data:",ue),r("Error refreshing data.","error")}},[le,r]);const[Et,Rt]=_.useState([]),[Mt,ur]=_.useState([]),[wr,dr]=_.useState(!1),[wt,Ke]=_.useState(!1),it=_.useCallback(async ue=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayExistingSubjectsInSelection, redirecting to login");return}console.log("Displaying existing subjects in selection interface:",ue),Rt(ue),console.log(" Existing subjects displayed in selection:",ue.length,"subjects")},[e]);_.useCallback(async()=>{try{console.log("Loading existing subjects...");const ue=await Is.getTeacherSubjects();console.log("Existing subjects loaded:",ue),ue&&ue.length>0?it(ue):(console.log("No existing subjects found"),Rt([]))}catch(ue){console.error("Error loading existing subjects:",ue),r("Error loading subjects.","error")}},[r,it]);const vt=_.useCallback(ue=>{console.log("Checking for outside click...");const he=document.getElementById("dropdownMenu"),Ae=document.querySelector("[data-menu-button]");he&&!he.contains(ue.target)&&!Ae?.contains(ue.target)&&(console.log("Outside click detected, closing menu"),he.classList.remove("show"),document.removeEventListener("click",vt))},[]),[st,qe]=_.useState({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),ot=_.useCallback((ue,he)=>{const Ae=ue.target.files[0];if(!Ae)return;if(!Ae.name.match(/\.(xlsx|xls)$/i)){r("Please select a valid Excel file (.xlsx or .xls)","error"),ue.target.value="";return}if(Ae.size>5*1024*1024){r("File is too large. Please select a file smaller than 5MB.","error"),ue.target.value="";return}N(!0);const Ie=new FileReader;Ie.onload=function(Ze){try{console.log(" File loaded, processing data...");const mt=new Uint8Array(Ze.target.result),Tt=Z8(mt,{type:"array"}),lr=Tt.SheetNames[0],Ft=Tt.Sheets[lr],Ct=Xb.sheet_to_json(Ft,{header:1});console.log(" Parsed Excel data:",Ct),Ut(Ct,he),N(!1)}catch(mt){console.error("Error processing Excel file:",mt),r("Error reading Excel file: "+mt.message,"error"),ue.target.value="",N(!1)}},Ie.onerror=function(){r("Failed to read file","error"),ue.target.value="",N(!1)},Ie.readAsArrayBuffer(Ae)},[r]),kt=_.useCallback(()=>{console.log(" Initializing Excel upload for all test types...");const ue=document.querySelectorAll(".excel-upload-btn");console.log(` Found ${ue.length} Excel upload buttons`),ue.forEach((he,Ae)=>{const Ie=he.dataset.testType,Ze=document.querySelector(`.excel-file-input[data-test-type="${Ie}"]`);console.log(` Processing button ${Ae+1}: testType=${Ie}, fileInput=${Ze?"found":"not found"}`),Ze?(he._excelClickHandler&&he.removeEventListener("click",he._excelClickHandler),Ze._excelChangeHandler&&Ze.removeEventListener("change",Ze._excelChangeHandler),he._excelClickHandler=()=>{console.log(` Excel upload button clicked for test type: ${Ie}`),Ze.click()},Ze._excelChangeHandler=mt=>{console.log(` File input changed for test type: ${Ie}`),ot(mt,Ie)},he.addEventListener("click",he._excelClickHandler),Ze.addEventListener("change",Ze._excelChangeHandler),console.log(` Excel upload initialized for test type: ${Ie}`)):console.warn(` File input not found for test type: ${Ie}`)}),console.log(" Excel upload initialization complete")},[ot]),Ut=_.useCallback((ue,he)=>{const Ae=ue.filter(Ft=>Array.isArray(Ft)&&Ft.length>0&&Ft.some(Ct=>Ct&&Ct.toString().trim()!==""));console.log(" Original Excel data rows:",ue.length),console.log(" Filtered Excel data rows:",Ae.length);const Ze=Qt(Ae,he).dataRows;if(Ze.length===0){const Ft="No data rows found after header processing. Please check your Excel file.";r(Ft,"error"),alert(Ft),Me(he);return}console.log(` Processing Excel data for test type: ${he}`),console.log(" Data rows after header processing:",Ze);const mt=ir(Ze,he);if(console.log(" Recognition result:",mt),!mt.recognized){console.log(` Excel data recognition failed for test type: ${he}`);const Ft="Excel data recognition failed. Please check your file format.";r(Ft,"error"),alert(Ft),Me(he);return}console.log(` Excel data recognition successful for test type: ${he}`);const Tt=Ze.length,lr=Pe(he);if(lr===0)console.log(` No question count specified, using CSV count: ${Tt}`),A(Ft=>({...Ft,numQuestions:Tt}));else if(Tt!==lr){const Ft=`Your CSV file has ${Tt} data rows, but you specified ${lr} questions.

Please either:
1. Change your question count to ${Tt}, or
2. Fix your CSV file to have exactly ${lr} data rows

Then try uploading again.`;r(Ft,"error"),Me(he);return}ze(Ze,he)},[r]),Qt=_.useCallback((ue,he)=>{if(ue.length===0)return{hasHeaders:!1,headerRow:null,dataRows:ue};const Ae=ue[0],Ie=Gt(he);if(Zt(Ae,Ie).isLikelyHeader){const mt=`The first row of your Excel file looks like it contains headers:

"${Ae.join(" | ")}"

Does the first row contain column headers?

Click "OK" if YES (headers will be removed)
Click "Cancel" if NO (first row will be treated as data)`;if(window.confirm(mt))return{hasHeaders:!0,headerRow:Ae,dataRows:ue.slice(1)}}return{hasHeaders:!1,headerRow:null,dataRows:ue}},[]),Gt=_.useCallback(ue=>{switch(ue){case"multipleChoice":return{keywords:["question","answer","correct","option","a","b","c","d","e","f"],expectedColumns:4};case"trueFalse":return{keywords:["question","answer","correct","true","false"],expectedColumns:2};case"input":return{keywords:["question","answer","correct"],expectedColumns:2};default:return{keywords:[],expectedColumns:0}}},[]),Zt=_.useCallback((ue,he)=>{if(!ue||ue.length===0)return{isLikelyHeader:!1};if(ue.length<he.expectedColumns)return{isLikelyHeader:!1};const Ae=ue.join(" ").toLowerCase(),Ie=he.keywords.filter(mt=>Ae.includes(mt.toLowerCase()));return{isLikelyHeader:Ie.length>he.keywords.length/2,keywordMatches:Ie}},[]),ir=_.useCallback((ue,he)=>{if(ue.length===0)return r("No data rows found. Please check your Excel file.","error"),{recognized:!1,data:[]};console.log(` Checking data pattern for test type: ${he}`),console.log(" Excel data to validate:",ue);const Ae=kr(ue,he);if(console.log(" Recognition result:",Ae),!Ae.matches){const Ie=`Your Excel file doesn't match the expected format.

Required format:
${ve(he)}

Please review your Excel file and make sure it follows this format exactly.

Then try uploading again.`;return console.log(" Data pattern validation failed:",Ie),console.log(" Calling showNotification with message:",Ie),r(Ie,"error"),console.log(" showNotification called"),alert(Ie),{recognized:!1,data:[]}}return console.log(` Data pattern validation passed for test type: ${he}`),{recognized:!0,data:ue}},[r]),kr=_.useCallback((ue,he)=>{if(he==="multipleChoice")for(let Ae=0;Ae<ue.length;Ae++){const Ie=ue[Ae];if(Ie.length<4)return{matches:!1,issue:`Row ${Ae+1} has ${Ie.length} columns but needs at least 4`};if(!Ie[0]||Ie[0].toString().trim()==="")return{matches:!1,issue:`Row ${Ae+1} has no question in column 1`};if(!Ie[1]||Ie[1].toString().trim()==="")return{matches:!1,issue:`Row ${Ae+1} has no correct answer in column 2`}}else if(he==="trueFalse")for(let Ae=0;Ae<ue.length;Ae++){const Ie=ue[Ae];if(Ie.length<2)return{matches:!1,issue:`Row ${Ae+1} has ${Ie.length} columns but needs at least 2`};if(!Ie[0]||Ie[0].toString().trim()==="")return{matches:!1,issue:`Row ${Ae+1} has no question in column 1`};const Ze=Ie[1]?.toString().trim().toLowerCase();if(!Ze||!["true","false","t","f"].includes(Ze))return{matches:!1,issue:`Row ${Ae+1} has invalid correct answer in column 2 (must be True/False)`}}else if(he==="input")for(let Ae=0;Ae<ue.length;Ae++){const Ie=ue[Ae];if(Ie.length<2)return{matches:!1,issue:`Row ${Ae+1} has ${Ie.length} columns but needs at least 2`};if(!Ie[0]||Ie[0].toString().trim()==="")return{matches:!1,issue:`Row ${Ae+1} has no question in column 1`};if(!Ie[1]||Ie[1].toString().trim()==="")return{matches:!1,issue:`Row ${Ae+1} has no correct answer in column 2`}}return{matches:!0}},[]),ve=_.useCallback(ue=>{switch(ue){case"multipleChoice":return`Column 1: Question
Column 2: Correct Answer (A, B, C, D, E, or F)
Column 3: Option A
Column 4: Option B
Column 5: Option C (optional)
Column 6: Option D (optional)
Column 7: Option E (optional)
Column 8: Option F (optional)`;case"trueFalse":return`Column 1: Question
Column 2: Correct Answer (True or False)`;case"input":return`Column 1: Question
Column 2: Correct Answer`;default:return"Unknown test type"}},[]),Pe=_.useCallback(ue=>j.numQuestions||0,[j.numQuestions]),Me=_.useCallback(ue=>{console.log(` Clearing file input for test type: ${ue}`)},[]),ze=_.useCallback((ue,he)=>{switch(console.log(` populateFromExcelForTestType called with testType: ${he}`),he){case"multipleChoice":case"multiple-choice":At(ue);break;case"trueFalse":case"true-false":Kt(ue);break;case"input":hr(ue);break;default:console.log(` Unknown test type: ${he}`)}},[]),At=_.useCallback(ue=>{console.log(" populateMultipleChoiceFromExcel called with:",ue);const he=Math.max(...ue.map(Ze=>Ze.length-2)),Ae=Math.min(he,6);console.log(` Excel data has ${he} option columns, using ${Ae} options`),A(Ze=>({...Ze,numOptions:Ae}));const Ie={};ue.forEach((Ze,mt)=>{const Tt=mt+1;console.log(` Row ${mt+1} data:`,Ze);const lr={question:(Ze[0]||"").toString().trim(),options:[],correctAnswer:(Ze[1]||"").toString().trim().toUpperCase()};console.log(` Question ${Tt} correctAnswer:`,lr.correctAnswer),["A","B","C","D","E","F"].slice(0,Ae).forEach((fr,Er)=>{const Fr=(Ze[Er+2]||"").toString().trim();console.log(` Option ${Er} (${fr}):`,Fr),lr.options.push(Fr)}),Ie[Tt]=lr}),A(Ze=>{const mt={...Ze,questions:Ie};return console.log(" Updating form data with:",mt),mt}),console.log(" Populated multiple choice questions from Excel:",Ie),r(`Successfully loaded ${ue.length} questions from CSV file!`,"success"),z(),Ye("multiple-choice")},[j.numOptions,z,r]),Kt=_.useCallback(ue=>{console.log(" populateTrueFalseFromExcel called with:",ue);const he={};ue.forEach((Ae,Ie)=>{const Ze=Ie+1,mt={question:(Ae[0]||"").toString().trim(),correctAnswer:Ae[1]?.toString().trim().toLowerCase()==="true"?"true":"false"};he[Ze]=mt}),A(Ae=>({...Ae,questions:he})),console.log(" Populated true/false questions from Excel:",he),r(`Successfully loaded ${ue.length} questions from CSV file!`,"success"),G(),Ye("true-false")},[G,r]),hr=_.useCallback(ue=>{console.log(" populateInputFromExcel called with:",ue);const he={};ue.forEach((Ae,Ie)=>{const Ze=Ie+1,mt=[];for(let lr=1;lr<Ae.length;lr++){const Ft=(Ae[lr]||"").toString().trim();Ft&&mt.push(Ft)}const Tt={question:(Ae[0]||"").toString().trim(),correctAnswer:mt[0]||"",correct_answers:mt};console.log(` Excel question ${Ze} data:`,Tt),he[Ze]=Tt}),A(Ae=>({...Ae,questions:he})),console.log(" Populated input questions from Excel:",he),r(`Successfully loaded ${ue.length} questions from Excel file!`,"success"),Q(),Ye("input")},[Q,r]),Ye=_.useCallback(ue=>{switch(console.log(` Reattaching form event listeners for test type: ${ue}`),document.querySelectorAll('[data-listener-attached="true"]').forEach(Ae=>{Ae.removeEventListener("input",()=>{}),Ae.removeAttribute("data-listener-attached")}),ue){case"multiple-choice":z();break;case"true-false":G();break;case"input":Q();break;default:console.warn("Unknown test type for event listener reattachment:",ue)}console.log(` Form event listeners reattached for test type: ${ue}`)},[z,G,Q]),ft=_.useCallback(()=>{const ue=localStorage.getItem("test_creation_state");if(!ue)return console.log(" No test creation state found in localStorage"),!1;try{const he=JSON.parse(ue);console.log(" Found test creation state:",he);const Ae=Date.now()-he.timestamp,Ie=1800*1e3;if(Ae>Ie)return console.log(" Test creation state is too old, clearing it"),I(),!1;switch(a(!0),console.log(" Restored isInTestCreation flag to true"),ie(),he.excelState&&H(),he.currentStep){case"testTypeSelection":console.log(" Restoring test type selection step"),u("typeSelection");break;case"multipleChoiceForm":console.log(" Restoring multiple choice form step"),g("multipleChoice"),u("formCreation");break;case"trueFalseForm":console.log(" Restoring true/false form step"),g("trueFalse"),u("formCreation");break;case"inputForm":console.log(" Restoring input form step"),g("input"),u("formCreation");break;case"testAssignment":case"assignment":console.log(" Restoring test assignment step"),console.log(" Cannot restore test assignment step without test data, going back to type selection"),u("typeSelection");break;default:console.log(" Unknown step in state, defaulting to type selection"),u("typeSelection")}return R(he.currentStep),!0}catch(he){return console.error(" Error restoring test creation state:",he),I(),!1}},[I,ie,H,R]);_.useEffect(()=>{console.log(" Initializing Teacher Tests..."),ne(),ft(),pe(),kt()},[ne,ft,pe,kt]),_.useEffect(()=>{j.numQuestions>0&&h&&h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&(console.log(" Excel upload buttons rendered, initializing event listeners..."),setTimeout(()=>{kt()},100))},[j.numQuestions,h,kt]);const lt=ue=>{console.log(" Test type selected:",ue),console.log(" Setting testType to:",ue),g(ue),u("formCreation"),A({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:""}),Y("formCreation"),setTimeout(()=>{kt()},100)},Wt=(ue,he)=>{A(Ae=>({...Ae,[ue]:he}))},Fe=(ue,he,Ae)=>{A(Ie=>({...Ie,questions:{...Ie.questions,[ue]:{...Ie.questions[ue],[he]:Ae}}}))},xt=(ue,he,Ae,Ie=0)=>{const Ze={};for(let mt=1;mt<=Ae;mt++)ue==="multipleChoice"?Ze[mt]={question:"",options:Array.from({length:Ie},()=>""),correctAnswer:""}:ue==="trueFalse"?Ze[mt]={question:"",correctAnswer:""}:ue==="input"&&(Ze[mt]={question:"",correct_answers:[""]});A(mt=>({...mt,questions:Ze})),ue==="multipleChoice"?(re("multiple-choice"),q("multiple-choice")):ue==="trueFalse"?(re("true-false"),q("true-false")):ue==="input"&&(re("input"),q("input"))},yt=async()=>{if(!h||!j.testName||!j.numQuestions){r("Please fill in all required fields","error");return}console.log(" Test form completed, proceeding to assignment step"),Y("testAssignment",j),u("testAssignment"),r("Test form completed! Now select classes and subjects.","success")},zt=(ue,he,Ae,Ie,Ze)=>{L(Ae?mt=>[...mt,{grade:ue,class:he,subject_id:Ie,subject:Ze}]:mt=>mt.filter(Tt=>!(Tt.grade===ue&&Tt.class===he&&Tt.subject_id===Ie)))},or=_.useCallback(async ue=>{console.log(" [DEBUG] handleMatchingTestSave called"),console.log(" [DEBUG] Received testData:",ue),console.log(" [DEBUG] Current formData:",j),console.log(" [DEBUG] Current testType:",h),console.log(" [DEBUG] Current user:",e),console.log(" [DEBUG] Current currentStep:",l),b(!0);try{const he=ue.blocks.map((Ze,mt)=>{const Tt=ue.words.find(Ct=>Ct.blockId===Ze.id)?.word||`Word ${mt+1}`,lr=ue.arrows.some(Ct=>Ct.startBlock===Ze.id),Ft=ue.arrows.find(Ct=>Ct.startBlock===Ze.id)||null;return{question_id:mt+1,word:Tt,block_coordinates:{x:Ze.x,y:Ze.y,width:Ze.width,height:Ze.height},has_arrow:lr,arrow:Ft?{startX:Ft.startX,startY:Ft.startY,endX:Ft.endX,endY:Ft.endY,style:Ft.style||{}}:null}}),Ae={teacher_id:e.teacher_id,test_name:j.testName||`Matching Test - ${new Date().toLocaleString()}`,image_url:ue.imageUrl,num_blocks:ue.blocks.length,questions:he,assignments:[]};console.log(" Sending matching test payload:",Ae);const Ie={...j,testName:Ae.test_name,numQuestions:Ae.num_blocks,numOptions:0,questions:he.reduce((Ze,mt,Tt)=>(Ze[Tt+1]={question:mt.word,correctAnswer:mt.word,options:[]},Ze),{}),matchingTestData:ue};console.log(" Assignment form data:",Ie),A(Ie),Y("testAssignment",Ie),console.log(" Setting current step to testAssignment"),u("testAssignment"),r("Matching test data saved! Now select classes and subjects.","success")}catch(he){console.error(" Error saving matching test:",he),r("Failed to save matching test: "+he.message,"error")}finally{b(!1)}},[e,j,h,r,Y]),de=_.useCallback(()=>{console.log(" Cancelling matching test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),_e=_.useCallback(async ue=>{console.log(" [DEBUG] handleWordMatchingTestSave called"),console.log(" [DEBUG] Received testData:",ue),b(!0);try{A(he=>({...he,wordMatchingData:ue,numQuestions:ue.numQuestions||ue.wordPairs?.length||0})),u("testAssignment"),r("Word matching test created! Now assign it to classes.","success")}catch(he){console.error("Error saving word matching test:",he),r("Failed to save word matching test: "+he.message,"error")}finally{b(!1)}},[r]),ge=_.useCallback(()=>{console.log(" Cancelling word matching test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),be=_.useCallback(async ue=>{console.log(" [DEBUG] handleDrawingTestSave called"),console.log(" [DEBUG] Received testData:",ue),b(!0);try{A(he=>({...he,drawingData:ue,numQuestions:ue.num_questions||ue.questions?.length||0})),u("testAssignment"),r("Drawing test created! Now assign it to classes.","success")}catch(he){console.error(" Error saving drawing test:",he),r("Error saving drawing test","error")}finally{b(!1)}},[r]),Ce=_.useCallback(()=>{console.log(" Cancelling drawing test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ee=_.useCallback(()=>{console.log(" Cancelling fill blanks test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),rt=_.useCallback(async ue=>{console.log(" [DEBUG] handleFillBlanksTestSave called"),console.log(" [DEBUG] Received testData:",ue),b(!0);try{A(he=>({...he,fillBlanksData:ue,numQuestions:ue.num_questions||ue.blanks?.length||0})),u("testAssignment"),r("Fill blanks test created! Now assign it to classes.","success")}catch(he){console.error(" Error saving fill blanks test:",he),r("Error saving fill blanks test","error")}finally{b(!1)}},[r]),bt=_.useCallback(()=>{console.log(" Cancelling speaking test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),at=_.useCallback(async ue=>{console.log(" [DEBUG] handleSpeakingTestSave called"),console.log(" [DEBUG] Received testData:",ue),b(!0);try{A(he=>({...he,speakingData:ue,numQuestions:ue.questions?.length||0})),u("testAssignment"),r("Speaking test created! Now assign it to classes.","success")}catch(he){console.error(" Error saving speaking test:",he),r("Error saving speaking test","error")}finally{b(!1)}},[r]);return c.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[c.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs(al,{mode:"wait",children:[l==="typeSelection"&&c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs(tt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{children:"Back to Main"})]}),c.jsx("div",{className:"flex-1"})]}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Test"}),c.jsx("p",{className:"text-gray-600",children:"Choose the type of test you want to create"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"multipleChoice",title:"Multiple Choice",description:"Questions with multiple answer options",icon:"/pics/multiple-choice.png"},{type:"trueFalse",title:"True/False",description:"Questions with true or false answers",icon:"/pics/true-false.png"},{type:"input",title:"Input",description:"Questions requiring text input",icon:"/pics/input.png"},{type:"matching",title:"Picture Matching",description:"Labeling pictures",icon:"/pics/matching.png"},{type:"wordMatching",title:"Word Matching",description:"Matching word pairs by dragging or drawing arrows",icon:"/pics/matching-words.png"},{type:"drawing",title:"Drawing Test",description:"Interactive drawing tests with canvas for students",icon:"/pics/drawing.png"},{type:"fillBlanks",title:"Fill Blanks",description:"Text with multiple choice blanks",icon:"/pics/fill-blanks.png"},{type:"speaking",title:"Speaking Test",description:"Audio recording with AI-powered feedback",icon:"/pics/speaking.png"}].map(({type:ue,title:he,description:Ae,icon:Ie})=>c.jsx(dt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>lt(ue),children:c.jsxs(Ht,{className:"h-full text-center hover:shadow-lg transition-shadow",children:[c.jsx("div",{className:"mb-3 flex justify-center",children:c.jsx("img",{src:Ie,alt:he,className:"w-12 h-12 object-contain"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:he}),c.jsx("p",{className:"text-sm text-gray-600",children:Ae})]})},ue))})]}),l==="formCreation"&&c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"flex space-x-2",children:c.jsx(tt,{variant:"outline",onClick:ee,children:" Back to Test Types"})}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Create ",h==="multipleChoice"?"Multiple Choice":h==="trueFalse"?"True/False":h==="input"?"Input":h==="drawing"?"Drawing":h==="fillBlanks"?"Fill Blanks":h==="wordMatching"?"Word Matching":h==="speaking"?"Speaking":"Picture Matching"," Test"]}),c.jsx("p",{className:"text-gray-600",children:"Fill in the test details and questions"})]})]})}),c.jsx(Ht,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Information"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name"}),c.jsx("input",{type:"text",value:j.testName,onChange:ue=>Wt("testName",ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter test name"})]}),h!=="matching"&&h!=="wordMatching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),c.jsx("input",{type:"number",min:"1",max:"50",value:j.numQuestions,onChange:ue=>{const he=parseInt(ue.target.value)||0;Wt("numQuestions",he),he>0&&xt(h,j.testName,he,j.numOptions)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of questions"})]}),h==="multipleChoice"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Options per Question"}),c.jsx("input",{type:"number",min:"2",max:"6",value:j.numOptions,onChange:ue=>{const he=parseInt(ue.target.value)||0;Wt("numOptions",he),he>0&&he<2&&r("Multiple choice tests require at least 2 options per question. Please enter 2 or more.","warning"),j.numQuestions>0&&xt(h,j.testName,j.numQuestions,he)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of options (2-6)"})]}),h!=="speaking"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("label",{className:"inline-flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:!!j.enableTimer,onChange:ue=>Wt("enableTimer",ue.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Enable timer for this test"})]}),j.enableTimer&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"Time (minutes):"}),c.jsx("input",{type:"number",min:"1",max:"1440",value:j.timerMinutes,onChange:ue=>Wt("timerMinutes",ue.target.value.replace(/[^0-9]/g,"")),className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 30"})]})]}),h!=="drawing"&&h!=="matching"&&h!=="wordMatching"&&h!=="fillBlanks"&&h!=="speaking"&&c.jsx("div",{className:"flex items-center space-x-2",children:c.jsxs("label",{className:"inline-flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:!!j.isShuffled,onChange:ue=>Wt("isShuffled",ue.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle questions during test"})]})})]})]})}),h==="matching"&&c.jsx(Ht,{children:c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Picture Matching Test"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image and create interactive matching blocks with words."}),c.jsx(Eae,{testName:j.testName,onTestSaved:or,onCancel:de,onBackToCabinet:Ne,isSaving:k,validationErrors:{}})]})}),h==="wordMatching"&&c.jsx(Ht,{children:c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Word Matching Test"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Create word pairs for students to match by dragging or drawing arrows."}),c.jsx(jde,{testName:j.testName,onTestSaved:_e,onCancel:ge,onBackToCabinet:Ne,isSaving:k,validationErrors:{}})]})}),h==="drawing"&&c.jsxs(Ht,{children:[console.log(" Rendering DrawingTestCreator, testType:",h),c.jsx(yce,{testName:j.testName,onTestSaved:be,onCancel:Ce,onBackToCabinet:Ne,isSaving:k,validationErrors:{}})]}),h==="fillBlanks"&&c.jsxs(Ht,{children:[console.log(" Rendering FillBlanksTestCreator, testType:",h),c.jsx(_ce,{testName:j.testName,allowedTime:j.enableTimer&&parseInt(j.timerMinutes)||null,onTestSaved:rt,onCancel:Ee,onBackToCabinet:Ne,isSaving:k,validationErrors:{}})]}),h==="speaking"&&c.jsxs(Ht,{children:[console.log(" Rendering SpeakingTestCreator, testType:",h),c.jsx(kce,{testName:j.testName,onTestSaved:at,onCancel:bt,onBackToCabinet:Ne,isSaving:k,validationErrors:{}})]}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&j.numQuestions>0&&c.jsx(Ht,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excel Upload"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload an Excel file to automatically populate questions, or fill them in manually below."}),c.jsxs("div",{className:"space-y-6",children:[h==="multipleChoice"&&st.multipleChoice?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"multiple-choice",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"multiple-choice"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Multiple Choice Format:"}),c.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[c.jsx("div",{children:"Column 1: Question"}),c.jsx("div",{children:"Column 2: Correct Answer (A-F)"}),c.jsx("div",{children:"Column 3: Option A text"}),c.jsx("div",{children:"Column 4: Option B text"}),c.jsx("div",{children:"Column 5: Option C text"}),c.jsx("div",{children:"Column 6: Option D text"})]})]})})})]}),h==="trueFalse"&&st.trueFalse?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"true-false",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"true-false"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-xs text-blue-800",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Format:"})," Question | Answer (true/false)"]}),c.jsxs("div",{className:"mt-1",children:[c.jsx("strong",{children:"Example:"})," The Earth is round | true"]}),c.jsxs("div",{className:"mt-1",children:[c.jsx("strong",{children:"Note:"})," Headers are optional"]})]})})})]}),h==="input"&&st.input?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"input",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"input"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Input Test Format:"}),c.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[c.jsx("div",{children:"Column 1: Question"}),c.jsx("div",{children:"Column 2: Answer 1"}),c.jsx("div",{children:"Column 3: Answer 2 (optional)"})]})]})})})]})]})]})}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&j.numQuestions>0&&c.jsx(Ht,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manual Question Entry"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the questions manually using the form below."})]})}),j.numQuestions>0&&c.jsx(Ht,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),c.jsx("div",{className:"space-y-6",children:Object.keys(j.questions).map(ue=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Question ",ue]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{value:j.questions[ue]?.question||"",onChange:he=>Fe(ue,"question",he.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Enter the question text",id:`question_${ue}`}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(`question_${ue}`),onChange:he=>Fe(ue,"question",he.target.value)})]})]}),h==="multipleChoice"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),c.jsx("div",{className:"space-y-2",children:j.questions[ue]?.options?.map((he,Ae)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:"w-6 text-sm font-medium text-gray-700",children:[String.fromCharCode(65+Ae),":"]}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:he,onChange:Ie=>{const Ze=[...j.questions[ue].options];Ze[Ae]=Ie.target.value,Fe(ue,"options",Ze)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${String.fromCharCode(65+Ae)}`,id:`option_${ue}_${Ae}`}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(`option_${ue}_${Ae}`),onChange:Ie=>{const Ze=[...j.questions[ue].options];Ze[Ae]=Ie.target.value,Fe(ue,"options",Ze)}})]})]},Ae))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),h==="multipleChoice"?c.jsx("div",{children:c.jsxs("select",{value:j.questions[ue]?.correctAnswer||"",onChange:he=>Fe(ue,"correctAnswer",he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),j.questions[ue]?.options?.map((he,Ae)=>c.jsx("option",{value:String.fromCharCode(65+Ae),children:String.fromCharCode(65+Ae)},Ae))]})}):h==="trueFalse"?c.jsxs("select",{value:j.questions[ue]?.correctAnswer||"",onChange:he=>Fe(ue,"correctAnswer",he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),c.jsx("option",{value:"true",children:"True"}),c.jsx("option",{value:"false",children:"False"})]}):c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s)"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:j.questions[ue]?.correct_answers?.[0]||"",onChange:he=>{const Ie=[...j.questions[ue]?.correct_answers||[""]];Ie[0]=he.target.value,Fe(ue,"correct_answers",Ie)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the primary correct answer",id:`answer_${ue}_0`}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${ue}_0`),onChange:he=>{const Ie=[...j.questions[ue]?.correct_answers||[""]];Ie[0]=he.target.value,Fe(ue,"correct_answers",Ie)}})]}),j.questions[ue]?.correct_answers?.slice(1).map((he,Ae)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:he,onChange:Ie=>{const Ze=[...j.questions[ue]?.correct_answers||[]];Ze[Ae+1]=Ie.target.value,Fe(ue,"correct_answers",Ze)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Alternative answer ${Ae+2}`,id:`answer_${ue}_${Ae+1}`}),c.jsx(Nl,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${ue}_${Ae+1}`),onChange:Ie=>{const Ze=[...j.questions[ue]?.correct_answers||[]];Ze[Ae+1]=Ie.target.value,Fe(ue,"correct_answers",Ze)}})]}),c.jsx("button",{type:"button",onClick:()=>{const Ie=[...j.questions[ue]?.correct_answers||[]];Ie.splice(Ae+1,1),Fe(ue,"correct_answers",Ie)},className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},Ae))||[],c.jsx("button",{type:"button",onClick:()=>{const Ae=[...j.questions[ue]?.correct_answers||[""],""];Fe(ue,"correct_answers",Ae)},className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm border border-blue-300 rounded-md hover:bg-blue-50",children:"+ Add Alternative Answer"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"You can add multiple correct answers for the same question. Students will get credit for any of them."})]})]})]})]},ue))})]})}),j.testName&&j.numQuestions>0&&c.jsx("div",{className:"flex justify-end",children:c.jsx(tt,{onClick:yt,disabled:k,className:"px-8",children:k?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test & Continue to Assignment"})})]}),l==="testAssignment"&&c.jsxs(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(tt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{children:"Back to Main"})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assign Test to Classes"}),c.jsx("p",{className:"text-gray-600",children:"Select which classes should take this test"})]})]}),c.jsx(tt,{variant:"outline",onClick:()=>u("formCreation"),children:" Back to Test Form"})]}),c.jsx(Ht,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Classes"}),x.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-gray-500 text-lg",children:"No subjects available for assignment."}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You need to assign subjects to grades and classes first."}),c.jsx("div",{className:"mt-4",children:c.jsx(tt,{onClick:()=>window.location.href="/teacher/subjects",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Subjects Page"})})]}):c.jsx("div",{className:"space-y-6",children:x.map(ue=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:ue.subject}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:ue.classes.map(he=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:F.some(Ae=>Ae.grade===he.grade&&Ae.class===he.class&&Ae.subject_id===ue.subject_id),onChange:Ae=>zt(he.grade,he.class,Ae.target.checked,ue.subject_id,ue.subject),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsxs("span",{className:"text-sm text-gray-700",children:[he.grade,"/",he.class]})]},`${he.grade}-${he.class}-${ue.subject_id}`))})]},ue.subject_id))})]})}),F.length>0&&c.jsx("div",{className:"flex justify-end",children:c.jsx(tt,{onClick:()=>je(h,null),disabled:v,className:"px-8",children:v?c.jsxs(c.Fragment,{children:[c.jsx(fn,{size:"sm",color:"white",className:"mr-2"}),"Assigning Test..."]}):`Assign Test to ${F.length} Class${F.length>1?"es":""}`})})]})]})}),console.log(" Checking isAssigningTest:",P),P&&c.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Assigning test to classes..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your assignment"})]})}),k&&c.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Saving test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we save your test"})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:t.map(ue=>c.jsx(ou,{type:ue.type,message:ue.message,duration:ue.duration,onClose:()=>n(ue.id)},ue.id))})]})},tje=({onDataLoaded:e,onError:t})=>{const r=fl(),{user:n,isAuthenticated:s}=Ms(),{teacherData:a,loadTeacherData:i}=i3(),[o,l]=_.useState(!0),[u,d]=_.useState(""),[f,h]=_.useState([]),[g,x]=_.useState(null),[y,v]=_.useState([]),[T,k]=_.useState([]),[b,E]=_.useState([]),[N,P]=_.useState(null),[M,j]=_.useState(0);_.useEffect(()=>{ne()},[]),_.useCallback(async ie=>{console.log(" Teacher login attempt...");try{const B=await Is.teacherLogin(ie);if(B.success)return J("Login successful!","success"),await A(),B;throw new Error(B.error||"Login failed")}catch(B){throw console.error(" Teacher login error:",B),J("Login failed. Please check your credentials.","error"),B}},[]);const A=_.useCallback(async()=>{console.log(" Loading teacher data...");try{if(l(!0),d(""),!s||!n){console.log(" User not authenticated"),d("User not authenticated");return}if(n.role!==Ro.TEACHER){console.error(" Invalid user role for teacher data:",n.role),d("Access denied. Teacher role required.");return}console.log(" Fetching teacher data from service...");const ie=await Is.getTeacherData();if(ie&&ie.success)console.log(" Teacher data loaded successfully:",ie),x(ie.teacher||n),ie.subjects&&(v(ie.subjects),console.log(" Teacher subjects loaded:",ie.subjects.length)),ie.grades&&k(ie.grades),ie.classes&&E(ie.classes),P(new Date),j(B=>B+1),e&&e(ie),J("Teacher data loaded successfully!","success");else throw new Error(ie?.error||"Failed to load teacher data")}catch(ie){console.error(" Error loading teacher data:",ie);const B=ie.message||"Failed to load teacher data";d(B),t&&t(ie),J(B,"error")}finally{l(!1)}},[s,n,e,t]),F=_.useCallback(()=>{console.log(" Returning to main cabinet..."),r("/teacher/cabinet")},[r]);_.useCallback(ie=>{console.log(" Showing main cabinet with subjects:",ie),ie&&v(ie),r("/teacher/cabinet")},[r]);const L=_.useCallback(()=>(console.log(" Rendering grade buttons..."),["M1","M2","M3","M4","M5","M6"].map(B=>({id:B,name:`Grade ${B}`,classes:V(B)}))),[]),V=_.useCallback(ie=>Array.from({length:10},(Y,I)=>I+1).map(Y=>({id:`${ie}-${Y}`,name:`Class ${Y}`,grade:ie,classNumber:Y})),[]),J=_.useCallback((ie,B)=>{const Y={id:Date.now(),message:ie,type:B,timestamp:new Date};h(I=>[...I,Y]),setTimeout(()=>{h(I=>I.filter(H=>H.id!==Y.id))},Km.NOTIFICATION_DURATION)},[]),ne=_.useCallback(async()=>{console.log(" Initializing teacher data..."),await A()},[A]),ee=_.useCallback(async()=>{console.log(" Refreshing teacher data..."),await A()},[A]);return _.useCallback(async ie=>{console.log(" Updating teacher profile:",ie);try{const B=await Is.updateUserProfile(ie);if(B.success)return x(Y=>({...Y,...ie})),J("Profile updated successfully!","success"),B;throw new Error(B.error||"Failed to update profile")}catch(B){throw console.error(" Error updating teacher profile:",B),J("Failed to update profile","error"),B}},[]),_.useCallback(async ie=>{console.log(" Changing teacher password...");try{const B=await Is.changePassword(ie);if(B.success)return J("Password changed successfully!","success"),B;throw new Error(B.error||"Failed to change password")}catch(B){throw console.error(" Error changing teacher password:",B),J("Failed to change password","error"),B}},[]),o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Data..."})]})}):u?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Data Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:u}),c.jsxs("div",{className:"flex space-x-3 justify-center",children:[c.jsx(tt,{variant:"primary",onClick:ee,children:"Retry"}),c.jsx(tt,{variant:"outline",onClick:F,children:"Go Back"})]})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Data"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",N?N.toLocaleString():"Never"," | Version: ",M]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(tt,{variant:"outline",onClick:ee,children:"Refresh Data"}),c.jsx(tt,{variant:"outline",onClick:F,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Teacher Information"}),g?c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.name||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.username||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.email||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.role||"N/A"})]})]}):c.jsx("p",{className:"text-gray-500",children:"No teacher information available"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",y.length,")"]}),y.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((ie,B)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:ie.name}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ie.description||"No description"}),ie.classes&&ie.classes.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ie.classes.map((Y,I)=>c.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[Y.grade," - ",Y.className]},I))})]})]},B))}):c.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Levels"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L().map(ie=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:ie.name}),c.jsx("div",{className:"grid grid-cols-5 gap-1",children:ie.classes.map(B=>c.jsx("button",{className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",onClick:()=>console.log("Class clicked:",B),children:B.classNumber},B.id))})]},ie.id))})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Statistics"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:y.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Subjects"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-green-600",children:T.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Grades"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:b.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Classes"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-purple-600",children:M}),c.jsx("p",{className:"text-sm text-gray-500",children:"Data Version"})]})]})]})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:f.map(ie=>c.jsx(ou,{type:ie.type,message:ie.message,onClose:()=>h(B=>B.filter(Y=>Y.id!==ie.id))},ie.id))})]})},rje=({onBackToCabinet:e})=>{const t=fl(),{user:r,isAuthenticated:n}=Ms(),{teacherData:s}=i3(),[a,i]=_.useState(!0),[o,l]=_.useState(""),[u,d]=_.useState([]),[f,h]=_.useState([]),[g,x]=_.useState([]),[y,v]=_.useState([]),[T,k]=_.useState(null),[b,E]=_.useState([]),[N,P]=_.useState(!1),[M,j]=_.useState(!1),[A,F]=_.useState(!1),[L,V]=_.useState(!1),[J,ne]=_.useState(null),[ee,ie]=_.useState(!0),[B,Y]=_.useState(null);_.useEffect(()=>{$e()},[]),_.useCallback(He=>{console.log(" Rendering existing subjects:",He),h(He)},[]);const I=_.useCallback(()=>{console.log(" Showing subject selection prompt..."),P(!0),ie(!1),H()},[]),H=_.useCallback(async()=>{console.log(" Loading existing subjects...");try{const He=await Is.getTeacherSubjects();He.success&&He.subjects&&He.subjects.length>0?(console.log(" Existing subjects found:",He.subjects),W(He.subjects)):(console.log(" No existing subjects found"),v([]))}catch(He){console.error(" Error loading existing subjects:",He),We("Failed to load existing subjects","error")}},[]),W=_.useCallback(He=>{console.log(" Rendering subject selection:",He);const Et=[];He.forEach(Rt=>{Rt.classes&&Array.isArray(Rt.classes)&&Rt.classes.forEach(Mt=>{Et.push({id:`${Rt.subject_id}-${Mt.grade}-${Mt.class}`,subjectId:Rt.subject_id,subjectName:Rt.subject,grade:Mt.grade,class:Mt.class,displayText:`${Rt.subject} - ${Mt.grade}/${Mt.class}`})})}),v(Et),console.log(" Processed subjects for selection:",Et)},[]),R=_.useCallback(async He=>{if(console.log(" Saving teacher subjects:",He),!He||He.length===0){We("Please select at least one subject and class combination.","warning");return}try{const Et=He.reduce((Mt,ur)=>{const wr=Mt.find(dr=>dr.subject_id===ur.subjectId);return wr?wr.classes.push({grade:ur.grade,class:ur.class}):Mt.push({subject_id:ur.subjectId,classes:[{grade:ur.grade,class:ur.class}]}),Mt},[]);console.log(" Transformed data for backend:",Et);const Rt=await Is.saveTeacherSubjects(Et);if(Rt.success)We("Subjects saved successfully!","success"),P(!1),ie(!0),Y(new Date),await H();else throw new Error(Rt.error||"Failed to save subjects")}catch(Et){console.error(" Error saving subjects:",Et),We("Error saving subjects. Please try again.","error")}},[]),z=_.useCallback(()=>{console.log(" Toggling subject dropdown..."),j(He=>!He),F(!1)},[]),G=_.useCallback(async()=>{console.log(" Loading subjects for dropdown...");try{const He=await Is.getAllSubjects();if(He.success)x(He.subjects||[]),console.log(" Available subjects loaded:",He.subjects?.length||0);else throw new Error(He.error||"Failed to load subjects")}catch(He){console.error(" Error loading subjects for dropdown:",He),We("Failed to load subjects","error")}},[]),Q=_.useCallback(He=>{console.log(" Subject selected:",He);const Et=g.find(Rt=>Rt.subject_id===parseInt(He));Et&&(k(Et),F(!0),j(!1),re())},[g]),re=_.useCallback(()=>{console.log(" Loading grades and classes...")},[]),q=_.useCallback((He,Et)=>{console.log(" Saving classes for subject:",He,Et);const Rt={id:`${He.subject_id}-${Date.now()}`,subjectId:He.subject_id,subjectName:He.subject,grade:Et.grade,class:Et.class,displayText:`${He.subject} - ${Et.grade}/${Et.class}`};v(Mt=>[...Mt,Rt]),k(null),E([]),F(!1),ce(`Added ${He.subject} for ${Et.grade}/${Et.class}`)},[]),se=_.useCallback(()=>{console.log(" Resetting subject selection..."),k(null),E([]),j(!1),F(!1)},[]),ce=_.useCallback(He=>{console.log(" Showing message:",He),We(He,"success")},[]),pe=_.useCallback(He=>{console.log(" Showing confirmation modal:",He),ne(He),V(!0)},[]),ke=_.useCallback(()=>{console.log(" Hiding confirmation modal..."),V(!1),ne(null)},[]),le=_.useCallback(()=>{console.log(" Confirming save subjects..."),ke(),R(y)},[y,R,ke]),ye=_.useCallback(()=>{console.log(" Cancelling save subjects..."),ke()},[ke]),je=_.useCallback(He=>{console.log(" Removing subject:",He),v(Et=>Et.filter(Rt=>Rt.id!==He)),We("Subject removed","info")},[]);_.useCallback(()=>{console.log(" Showing edit subjects button..."),ie(!0)},[]),_.useCallback(()=>{console.log(" Hiding edit subjects button..."),ie(!1)},[]);const Ne=_.useCallback(He=>{console.log(" Generating class buttons for grade:",He);let Et;return He===1||He===2?Et=["15","16"]:He===3?Et=["15","16"]:He===4?Et=["13","14"]:He===5||He===6?Et=["13","14"]:Et=[],Et.map(Rt=>({id:`${He}-${Rt}`,grade:He,class:Rt,displayText:`${He}/${Rt}`}))},[]);_.useCallback((He,Et)=>{console.log(" Showing class results:",He,Et),t("/teacher/results")},[t]);const We=_.useCallback((He,Et)=>{const Rt={id:Date.now(),message:He,type:Et,timestamp:new Date};d(Mt=>[...Mt,Rt]),setTimeout(()=>{d(Mt=>Mt.filter(ur=>ur.id!==Rt.id))},Km.NOTIFICATION_DURATION)},[]),$e=_.useCallback(async()=>{console.log(" Initializing teacher subjects...");try{if(i(!0),l(""),!n||!r){console.log(" User not authenticated"),l("User not authenticated");return}if(r.role!==Ro.TEACHER){console.error(" Invalid user role for teacher subjects:",r.role),l("Access denied. Teacher role required.");return}await H(),await G(),console.log(" Teacher subjects initialization complete!")}catch(He){console.error(" Error initializing teacher subjects:",He),l("Failed to initialize teacher subjects")}finally{i(!1)}},[n,r,H,G]),Nt=_.useCallback(()=>{e?e():t("/teacher/cabinet")},[e,t]);return a?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(fn,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Subjects..."})]})}):o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Subjects Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:o}),c.jsx(tt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subject Management"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",B?B.toLocaleString():"Never"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[ee&&c.jsx(tt,{variant:"primary",onClick:I,children:"Edit Subjects"}),c.jsx(tt,{variant:"outline",onClick:Nt,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[!N&&c.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Assigned Subjects"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your teaching subjects and class assignments"})]}),c.jsx("div",{className:"flex space-x-3",children:c.jsxs(tt,{variant:"primary",onClick:I,className:"px-6 py-2",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Subjects"]})})]}),f.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((He,Et)=>c.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:He.subject}),He.classes&&He.classes.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Assigned Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:He.classes.map((Rt,Mt)=>c.jsxs("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full",children:["Grade ",Rt.grade," - Class ",Rt.class]},Mt))})]})]}),c.jsx("div",{className:"ml-4",children:c.jsx(tt,{variant:"outline",size:"sm",onClick:()=>je(He.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},Et))}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned yet"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your teaching subjects and class assignments"}),c.jsxs(tt,{variant:"primary",onClick:I,className:"px-6 py-3",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Subject"]})]})]}),N&&c.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Subjects and Classes"}),c.jsx("p",{className:"text-gray-600",children:"Choose the subjects you want to teach and assign them to specific classes"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-lg font-semibold text-gray-900",children:"Select Subject"}),c.jsx("p",{className:"text-gray-600",children:"Choose the subject you want to teach"})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs(tt,{variant:"outline",onClick:z,className:"w-full justify-between p-4 h-auto text-left border-2 border-gray-200 hover:border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white rounded-xl shadow-sm",children:[c.jsx("span",{className:"text-gray-900 font-medium",children:T?T.subject:"Select a subject"}),c.jsx("svg",{className:"w-5 h-5 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),M&&c.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map(He=>c.jsx("button",{onClick:()=>Q(He.subject_id),className:"w-full px-4 py-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:c.jsx("span",{className:"text-gray-900 font-medium",children:He.subject})},He.subject_id))})]})]}),A&&T&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Classes for ",T.subject]}),c.jsx("p",{className:"text-gray-600",children:"Choose which classes you want to teach this subject to"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(He=>c.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:c.jsx("span",{className:"text-white font-bold text-xs",children:He})}),c.jsxs("h4",{className:"font-semibold text-gray-900",children:["Grade ",He]})]}),c.jsx("div",{className:"space-y-3",children:Ne(He).map(Et=>c.jsx(tt,{variant:"outline",size:"sm",onClick:()=>q(T,Et),className:"w-full text-sm py-2 px-4 border-green-300 hover:border-green-400 hover:bg-green-100 focus:ring-2 focus:ring-green-500 rounded-lg font-medium",children:Et.displayText},Et.id))})]},He))})]}),y.length>0&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Selected Subjects"}),c.jsx("p",{className:"text-gray-600",children:"Review your subject and class selections"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(He=>c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-md transition-shadow duration-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-1",children:c.jsx("span",{className:"text-sm font-semibold text-purple-900",children:He.displayText})}),c.jsx(tt,{variant:"outline",size:"sm",onClick:()=>je(He.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300 focus:ring-2 focus:ring-red-500 rounded-lg",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},He.id))})]}),c.jsxs("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-100",children:[c.jsx("div",{className:"text-sm text-gray-500",children:y.length>0?`${y.length} subject${y.length>1?"s":""} selected`:"No subjects selected"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs(tt,{variant:"outline",onClick:()=>{P(!1),ie(!0),se()},className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 rounded-xl",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),c.jsxs(tt,{variant:"primary",onClick:()=>pe({type:"save",data:y}),disabled:y.length===0,className:"px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),A?"Next: Select Classes":"Save Subjects"]})]})]})]})]})]})}),L&&c.jsx(Ba,{isOpen:L,onClose:ke,title:"Confirm Save",variant:"confirmation",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to save ",J?.data?.length||0," subject assignments?"]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx(tt,{variant:"outline",onClick:ye,children:"Cancel"}),c.jsx(tt,{variant:"primary",onClick:le,children:"Save"})]})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:u.map(He=>c.jsx(ou,{type:He.type,message:He.message,onClose:()=>d(Et=>Et.filter(Rt=>Rt.id!==He.id))},He.id))})]})},nje=()=>{const{user:e,role:t,isAuthenticated:r,isLoading:n}=Ms(),[s,a]=_.useState("cabinet");return!r||t!=="teacher"?c.jsx(Rp,{to:"/login",replace:!0}):n?c.jsxs("div",{className:"teacher-app-loading",children:[c.jsx(fn,{}),c.jsx("p",{children:"Loading teacher interface..."})]}):c.jsx("div",{className:"teacher-app",children:c.jsxs(WT,{children:[c.jsx(ua,{path:"/",element:c.jsx(GL,{})}),c.jsx(ua,{path:"/cabinet",element:c.jsx(GL,{})}),c.jsx(ua,{path:"/tests",element:c.jsx(VL,{})}),c.jsx(ua,{path:"/tests/create",element:c.jsx(VL,{})}),c.jsx(ua,{path:"/data",element:c.jsx(tje,{})}),c.jsx(ua,{path:"/subjects",element:c.jsx(rje,{})}),c.jsx(ua,{path:"/results",element:c.jsx(CV,{})}),c.jsx(ua,{path:"*",element:c.jsx(Rp,{to:"/teacher",replace:!0})})]})})},Je={container:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",mainContainer:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",header:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg",headerContent:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",headerFlex:"flex justify-between items-center",adminInfo:"flex items-center space-x-4",adminAvatar:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",adminText:"text-lg sm:text-xl md:text-2xl font-bold text-white",adminSubtext:"text-purple-100 text-sm sm:text-base md:text-lg",menuContainer:"relative admin-menu",menuButton:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",menuDropdown:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",menuItem:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 transition-colors",menuItemLogout:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",cardContainer:"bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",cardHeader:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",cardTitle:"text-xl font-bold text-gray-800",cardBody:"p-6",buttonGroup:"flex flex-wrap gap-3 mb-6",buttonPrimary:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-4 py-2 rounded-lg transition-colors duration-200",formContainer:"bg-gray-50 rounded-lg p-6 border border-gray-200",formGrid:"grid grid-cols-1 md:grid-cols-2 gap-4",formGroup:"space-y-2",formLabel:"block text-sm font-medium text-gray-700",formInput:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors duration-200",formCheckbox:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",formActions:"flex space-x-3 pt-4",table:"min-w-full divide-y divide-gray-200",tableHeader:"bg-gray-50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",tableBody:"bg-white divide-y divide-gray-200",tableRow:"hover:bg-gray-50 transition-colors duration-150",tableCell:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",statusActive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",statusInactive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",modalOverlay:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",modalContent:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",modalTitle:"text-xl font-semibold text-gray-900 mb-4",modalActions:"flex space-x-3 pt-4"},sje=()=>{const{user:e,isAdmin:t,logout:r}=Ms(),{get:n,post:s,delete:a}=zl(),i=_.useCallback(async()=>{try{h({type:"info",message:"Checking for overdue assignments..."});const Se=await s("/.netlify/functions/check-overdue-assignments",{});if(Se&&Se.success){const Pt=Se.overdue_count||0;Pt>0?h({type:"success",message:`Found and marked ${Pt} overdue assignments as inactive.`}):h({type:"info",message:"No overdue assignments found."})}else h({type:"error",message:Se?.error||"Failed to check assignments"})}catch(Se){h({type:"error",message:"Failed to check assignments"}),console.error("Check overdue assignments error:",Se)}},[s]),[o,l]=_.useState(!1),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1),[y,v]=_.useState(!1),[T,k]=_.useState(!1),[b,E]=_.useState(!1),[N,P]=_.useState(""),[M,j]=_.useState(null),[A,F]=_.useState({}),[L,V]=_.useState(null),[J,ne]=_.useState({}),[ee,ie]=_.useState(null),[B,Y]=_.useState({}),[I,H]=_.useState([]),[W,R]=_.useState(""),[z,G]=_.useState(""),[Q,re]=_.useState(""),[q,se]=_.useState("all"),[ce,pe]=_.useState(!0),[ke,le]=_.useState(!1),[ye,je]=_.useState([]),[Ne,We]=_.useState(""),[$e,Nt]=_.useState(""),[He,Et]=_.useState(""),[Rt,Mt]=_.useState(new Set),[ur,wr]=_.useState(!1),[dr,wt]=_.useState(!1),[Ke,it]=_.useState([]),[vt,st]=_.useState([]),[qe,ot]=_.useState([]),[kt,Ut]=_.useState([]),[Qt,Gt]=_.useState(!1),[Zt,ir]=_.useState(!1),[kr,ve]=_.useState(!1),[Pe,Me]=_.useState(!1),[ze,At]=_.useState({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),[Kt,hr]=_.useState({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),[Ye,ft]=_.useState({subject_id:"",subject:"",description:"",is_active:!0}),[lt,Wt]=_.useState({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""});_.useEffect(()=>{console.log(" AdminCabinet component mounted - initializing..."),Fe()},[]),_.useEffect(()=>{const Se=Pt=>{ur&&!Pt.target.closest(".admin-menu")&&wr(!1)};return document.addEventListener("mousedown",Se),()=>{document.removeEventListener("mousedown",Se)}},[ur]);const Fe=_.useCallback(async()=>{try{l(!0),await or(),console.log("Admin app initialized")}catch(Se){d("Failed to initialize admin app"),console.error("Admin app initialization error:",Se)}finally{l(!1)}},[]),xt=_.useCallback(()=>{wr(Se=>!Se)},[]),yt=_.useCallback(()=>{wt(!0),wr(!1)},[]),zt=_.useCallback(()=>{wt(!1)},[]),or=_.useCallback(async()=>{try{await Promise.all([de(),_e(),ge(),be()])}catch(Se){console.error("Error loading admin data:",Se),d("Failed to load admin data")}},[]),de=_.useCallback(async()=>{try{const Se="admin_users_",Pt=Ta(Se);if(Pt){console.log(" Using cached users data"),it(Pt);return}const Rr=await n("/.netlify/functions/get-all-users");console.log(" Users response:",Rr);const Xr=Rr.users||[];it(Xr),Bs(Se,Xr,Cs.admin_users),console.log(" Users set to state:",Xr)}catch(Se){console.error("Error loading users:",Se)}},[n]),_e=_.useCallback(async()=>{try{const Se="admin_teachers_",Pt=Ta(Se);if(Pt){console.log(" Using cached teachers data"),st(Pt);return}const Rr=await n("/.netlify/functions/get-all-teachers");console.log(" Teachers response:",Rr);const Xr=Rr.teachers||[];st(Xr),Bs(Se,Xr,Cs.admin_teachers),console.log(" Teachers set to state:",Xr)}catch(Se){console.error("Error loading teachers:",Se)}},[n]),ge=_.useCallback(async()=>{try{const Se="admin_subjects_",Pt=Ta(Se);if(Pt){console.log(" Using cached subjects data"),ot(Pt);return}const Rr=await n("/.netlify/functions/get-all-subjects");console.log(" Subjects response:",Rr);const Xr=Rr.subjects||[];ot(Xr),Bs(Se,Xr,Cs.admin_subjects),console.log(" Subjects set to state:",Xr)}catch(Se){console.error("Error loading subjects:",Se)}},[n]),be=_.useCallback(async()=>{try{const Se="admin_academic_years_",Pt=Ta(Se);if(Pt){console.log(" Using cached academic years data"),Ut(Pt);return}const Rr=await cu.loadAcademicCalendar();Rr&&Array.isArray(Rr)?(Ut(Rr),Bs(Se,Rr,Cs.admin_academic_years)):console.error("Failed to load academic calendar")}catch(Se){console.error("Error loading academic year:",Se)}},[]),Ce=_.useCallback(async()=>{try{if(E(!b),!b){const Se=Date.now(),[Pt,Rr]=await Promise.all([n(`/.netlify/functions/get-all-tests?t=${Se}`),n(`/.netlify/functions/get-test-assignments?t=${Se}`)]);console.log(" Active tests response:",Pt),console.log(" Assignments response:",Rr);const Xr=Pt.tests||[],Nn=(Rr.assignments||[]).reduce((Hs,li)=>{const cn=`${li.test_type}-${li.test_id}`;return Hs[cn]||(Hs[cn]=[]),Hs[cn].push(li),Hs},{}),is=Xr.map(Hs=>{const li=`${Hs.test_type}-${Hs.test_id}`,cn=Nn[li]||[],gl=cn.some(Le=>Le.is_active);return{...Hs,is_active:gl,assignments:cn}});H(is),console.log(" All tests with status set to state:",is)}}catch(Se){console.error("Error loading tests:",Se),h({type:"error",message:"Failed to load tests"})}},[n,b]),Ee=_.useCallback((Se,Pt)=>{At(Rr=>({...Rr,[Se]:Pt}))},[]),rt=_.useCallback((Se,Pt)=>{hr(Rr=>({...Rr,[Se]:Pt}))},[]),bt=_.useCallback((Se,Pt)=>{ft(Rr=>({...Rr,[Se]:Pt}))},[]);_.useCallback(()=>{console.log(" Testing local storage...");try{const Se={test:"data",timestamp:Date.now()};localStorage.setItem("test",JSON.stringify(Se));const Pt=JSON.parse(localStorage.getItem("test"));console.log(" Local storage test successful:",Pt),h({type:"success",message:"Local storage test successful"})}catch(Se){console.error(" Local storage test failed:",Se),h({type:"error",message:"Local storage test failed"})}},[]),_.useCallback(()=>{console.log(" Clearing local storage...");try{localStorage.clear(),console.log(" Local storage cleared"),h({type:"success",message:"Local storage cleared"})}catch(Se){console.error(" Error clearing local storage:",Se),h({type:"error",message:"Error clearing local storage"})}},[]),_.useCallback(async()=>{console.log(" Checking teacher subjects...");try{const Pt=(await n("/.netlify/functions/get-all-teachers")).data||[];console.log(" Teachers data:",Pt),h({type:"success",message:`Found ${Pt.length} teachers`})}catch(Se){console.error(" Error checking teacher subjects:",Se),h({type:"error",message:"Error checking teacher subjects"})}},[n]);const at=_.useCallback(async Se=>{Se.preventDefault();try{console.log(" Submitting user:",ze);const Pt=await s("/.netlify/functions/add-user",ze);Pt.success?(h({type:"success",message:"User added successfully"}),Gt(!1),At({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),de()):h({type:"error",message:Pt.message||"Failed to add user"})}catch(Pt){console.error(" Error adding user:",Pt),h({type:"error",message:"Error adding user"})}},[ze,s,de]),ue=_.useCallback(async Se=>{Se.preventDefault();try{console.log(" Submitting teacher:",Kt);const Pt=await s("/.netlify/functions/add-teacher",Kt);Pt.success?(h({type:"success",message:"Teacher added successfully"}),ir(!1),hr({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),_e()):h({type:"error",message:Pt.message||"Failed to add teacher"})}catch(Pt){console.error(" Error adding teacher:",Pt),h({type:"error",message:"Error adding teacher"})}},[Kt,s,_e]),he=_.useCallback(async Se=>{Se.preventDefault();try{console.log(" Submitting subject:",Ye);const Pt=await s("/.netlify/functions/add-subject",Ye);Pt.success?(h({type:"success",message:"Subject added successfully"}),ve(!1),ft({subject_id:"",subject:"",description:"",is_active:!0}),ge()):h({type:"error",message:Pt.message||"Failed to add subject"})}catch(Pt){console.error(" Error adding subject:",Pt),h({type:"error",message:"Error adding subject"})}},[Ye,s,ge]),Ae=_.useCallback(Se=>{j(Se),F({name:Se.name||"",surname:Se.surname||"",grade:Se.grade||"",class:Se.class||"",student_id:Se.student_id||"",nickname:Se.nickname||"",password:Se.password||"",is_active:Se.is_active!==void 0?Se.is_active:!0})},[]),Ie=_.useCallback(async()=>{try{const Se=[];Object.keys(A).forEach(Pt=>{Pt!=="student_id"&&A[Pt]!==M[Pt]&&Se.push({fieldName:Pt,newValue:A[Pt]})});for(const Pt of Se)await s("/.netlify/functions/update-user",{userId:M.student_id,fieldName:Pt.fieldName,newValue:Pt.newValue});h({type:"success",message:"User updated successfully!"}),j(null),F({}),de()}catch{h({type:"error",message:"Failed to update user"})}},[A,M,s,de]),Ze=_.useCallback(async Se=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await s("/.netlify/functions/delete-user",{userId:Se})).success&&(h({type:"success",message:"User deleted successfully!"}),de())}catch{h({type:"error",message:"Failed to delete user"})}},[s,de]),mt=_.useCallback(Se=>{V(Se),ne({teacher_id:Se.teacher_id||"",username:Se.username||"",password:Se.password||"",first_name:Se.first_name||"",last_name:Se.last_name||"",is_active:Se.is_active!==void 0?Se.is_active:!0})},[]),Tt=_.useCallback(async()=>{try{const Se=[];Object.keys(J).forEach(Pt=>{Pt!=="teacher_id"&&J[Pt]!==L[Pt]&&Se.push({fieldName:Pt,newValue:J[Pt]})});for(const Pt of Se)await s("/.netlify/functions/update-teacher",{teacherId:L.teacher_id,fieldName:Pt.fieldName,newValue:Pt.newValue});h({type:"success",message:"Teacher updated successfully!"}),V(null),ne({}),_e()}catch{h({type:"error",message:"Failed to update teacher"})}},[J,L,s,_e]),lr=_.useCallback(async Se=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{(await s("/.netlify/functions/delete-teacher",{teacherId:Se})).success&&(h({type:"success",message:"Teacher deleted successfully!"}),_e())}catch{h({type:"error",message:"Failed to delete teacher"})}},[s,_e]),Ft=_.useCallback(Se=>{ie(Se),Y({subject_id:Se.subject_id||"",subject:Se.subject||""})},[]),Ct=_.useCallback(async()=>{try{const Se=[];Object.keys(B).forEach(Pt=>{Pt!=="subject_id"&&B[Pt]!==ee[Pt]&&Se.push({fieldName:Pt,newValue:B[Pt]})});for(const Pt of Se)await s("/.netlify/functions/update-subject",{subjectId:ee.subject_id,fieldName:Pt.fieldName,newValue:Pt.newValue});h({type:"success",message:"Subject updated successfully!"}),ie(null),Y({}),ge()}catch{h({type:"error",message:"Failed to update subject"})}},[B,ee,s,ge]),fr=_.useCallback(async Se=>{if(window.confirm("Are you sure you want to delete this subject?"))try{const Pt=await s("/.netlify/functions/delete-subject",{subjectId:Se});Pt.success?(h({type:"success",message:"Subject deleted successfully!"}),ge()):h({type:"error",message:Pt.message||"Failed to delete subject"})}catch{h({type:"error",message:"Failed to delete subject"})}},[s,ge]),Er=_.useCallback((Se,Pt)=>{Wt(Rr=>({...Rr,[Se]:Pt}))},[]),Fr=_.useCallback(async Se=>{if(Se.preventDefault(),!lt.startDate||!lt.endDate||!lt.teacherId){h({type:"error",message:"Please fill in all required fields (Start Date, End Date, Teacher ID)"});return}if(window.confirm("Are you sure you want to delete all test data for the selected criteria? This action cannot be undone."))try{const Pt=await s("/.netlify/functions/delete-test-data",lt);Pt.success?(h({type:"success",message:`Successfully deleted ${Pt.deletedCount} test records!`}),Me(!1),Wt({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""})):h({type:"error",message:Pt.message||"Failed to delete test data"})}catch{h({type:"error",message:"Failed to delete test data"})}},[lt,s]),on=_.useCallback(async(Se,Pt,Rr)=>{try{const Xr=Date.now(),Hn=await n(`/.netlify/functions/get-test-assignments?t=${Xr}`);if(Hn.success&&Hn.assignments){const Nn=Hn.assignments.filter(is=>is.test_id===parseInt(Se)&&is.test_type===Pt);if(Nn.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const is of Nn){const Hs=await s("/.netlify/functions/remove-assignment",{teacher_id:Rr,assignment_id:is.assignment_id,test_type:Pt,test_id:Se});if(!Hs.success){h({type:"error",message:`Failed to complete test: ${Hs.message}`});return}}h({type:"success",message:"Test marked as complete successfully!"}),await Ce()}else h({type:"error",message:"Failed to get test assignments"})}catch(Xr){console.error("Error completing test:",Xr),h({type:"error",message:"Failed to complete test"})}},[s,n,Ce]),ln=_.useCallback(async(Se,Pt,Rr)=>{try{const Xr=Date.now(),Hn=await n(`/.netlify/functions/get-test-assignments?t=${Xr}`);if(Hn.success&&Hn.assignments){const Nn=Hn.assignments.filter(is=>is.test_id===parseInt(Se)&&is.test_type===Pt);if(Nn.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const is of Nn){const Hs=await s("/.netlify/functions/remove-assignment",{teacher_id:Rr,assignment_id:is.assignment_id,test_type:Pt,test_id:Se,mark_active:!0});if(!Hs.success){h({type:"error",message:`Failed to reactivate test: ${Hs.message}`});return}}h({type:"success",message:"Test marked as active successfully!"}),await Ce()}else h({type:"error",message:"Failed to get test assignments"})}catch(Xr){console.error("Error reactivating test:",Xr),h({type:"error",message:"Failed to reactivate test"})}},[s,n,Ce]),Yr=_.useCallback(async(Se=!1)=>{try{const Pt=Date.now(),Rr=await n(`/.netlify/functions/get-all-tests?t=${Pt}`);console.log(" Actual tests response:",Rr),je(Rr.tests||[]),console.log(" Actual tests set to state:",Rr.tests||[])}catch(Pt){console.error("Error loading actual tests:",Pt),h({type:"error",message:"Failed to load tests"})}},[n]),Pr=_.useCallback(async(Se,Pt,Rr)=>{try{const Xr=await s("/.netlify/functions/delete-test",{test_id:Se,test_type:Pt,teacher_id:Rr});if(Xr.success){h({type:"success",message:"Test deleted successfully!"});const Hn=`${Pt}-${Se}-${Rr}`;Mt(Nn=>{const is=new Set(Nn);return is.delete(Hn),is}),await Yr(!0)}else h({type:"error",message:`Failed to delete test: ${Xr.message}`})}catch(Xr){console.error("Error deleting test:",Xr),h({type:"error",message:"Failed to delete test"})}},[s,Yr]),as=_.useCallback((Se,Pt,Rr)=>{const Xr=`${Pt}-${Se}-${Rr}`;Mt(Hn=>{const Nn=new Set(Hn);return Nn.has(Xr)?Nn.delete(Xr):Nn.add(Xr),Nn})},[]),Kr=N?Ke.filter(Se=>Se.grade.toString()===N):Ke,Tn=I.filter(Se=>{const Pt=q==="all"?!0:q==="active"?Se.is_active:!Se.is_active,Rr=!W||Se.teacher_id===W,Xr=!z||new Date(Se.created_at)>=new Date(z),Hn=!Q||new Date(Se.created_at)<=new Date(Q+"T23:59:59");return Pt&&Rr&&Xr&&Hn}),Ds=ye.filter(Se=>{const Pt=!Ne||Se.teacher_id===Ne,Rr=!$e||new Date(Se.created_at)>=new Date($e),Xr=!He||new Date(Se.created_at)<=new Date(He+"T23:59:59");return Pt&&Rr&&Xr}),oi=_.useCallback(()=>{if(Rt.size===Ds.length&&Ds.length>0)Mt(new Set);else{const Se=Ds.map(Pt=>`${Pt.test_type}-${Pt.test_id}-${Pt.teacher_id}`);Mt(new Set(Se))}},[Rt.size,Ds]),Kn=_.useCallback(async()=>{if(Rt.size!==0&&window.confirm(`Are you sure you want to delete ${Rt.size} test(s)?`))try{const Se=Array.from(Rt).map(Pt=>{const[Rr,Xr,Hn]=Pt.split("-");return s("/.netlify/functions/delete-test",{test_id:parseInt(Xr),test_type:Rr,teacher_id:Hn})});await Promise.all(Se),h({type:"success",message:`Successfully deleted ${Rt.size} test(s)!`}),Mt(new Set),await Yr(!0)}catch(Se){console.error("Error deleting marked tests:",Se),h({type:"error",message:"Failed to delete some tests. Please try again."})}},[Rt,s,Yr]);return c.jsxs(dt.div,{id:"admin-cabinet-main",className:Je.container,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(dt.div,{className:Je.header,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:Je.headerContent,children:c.jsxs("div",{className:Je.headerFlex,children:[c.jsxs(dt.div,{className:Je.adminInfo,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(dt.div,{className:Je.adminAvatar,initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:c.jsx("span",{className:"text-white font-semibold text-xl",children:e?.username?.charAt(0)||"A"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:Je.adminText,children:e?.username||"Administrator"}),c.jsx("p",{className:Je.adminSubtext,children:"Administrator Dashboard"})]})]}),c.jsxs(dt.div,{className:Je.menuContainer,initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsxs("button",{onClick:xt,className:Je.menuButton,style:{zIndex:1e3},children:[c.jsx("span",{className:"hidden sm:inline",children:"Menu"}),c.jsx(dt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:ur?180:0},transition:{duration:.2},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),c.jsx(al,{children:ur&&c.jsx(dt.div,{className:Je.menuDropdown,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:c.jsxs("div",{className:"py-2",children:[c.jsx(dt.button,{onClick:yt,className:Je.menuItem,whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),c.jsx(dt.button,{onClick:()=>{xt(),r()},className:Je.menuItemLogout,whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),o&&c.jsx(fn,{text:"Loading..."}),u&&c.jsx(ou,{type:"error",message:u,onClose:()=>d(null)}),f&&c.jsx(ou,{type:f.type,message:f.message,onClose:()=>h(null)}),dr&&c.jsx("div",{className:Je.modalOverlay,children:c.jsxs("div",{className:Je.modalContent,children:[c.jsx("h2",{className:Je.modalTitle,children:"Change Password"}),c.jsxs("form",{className:"space-y-4",children:[c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{htmlFor:"currentPassword",className:Je.formLabel,children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",className:Je.formInput})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{htmlFor:"newPassword",className:Je.formLabel,children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",className:Je.formInput})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{htmlFor:"confirmPassword",className:Je.formLabel,children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",className:Je.formInput})]}),c.jsxs("div",{className:Je.modalActions,children:[c.jsx(tt,{type:"button",variant:"secondary",onClick:zt,className:"flex-1",children:"Cancel"}),c.jsx(tt,{type:"submit",variant:"primary",className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Change Password"})]})]})]})}),c.jsx(dt.div,{className:Je.mainContainer,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:c.jsxs("div",{className:"space-y-6",children:[c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:c.jsxs(Ht,{className:Je.cardContainer,children:[c.jsx(Ht.Header,{className:Je.cardHeader,children:c.jsx(Ht.Title,{className:Je.cardTitle,children:"User Management"})}),c.jsxs(Ht.Body,{className:Je.cardBody,children:[c.jsxs("div",{className:Je.buttonGroup,children:[c.jsx(tt,{variant:"primary",onClick:()=>Gt(!0),className:Je.buttonPrimary,children:"Add User"}),c.jsx(tt,{variant:"secondary",onClick:()=>{de(),x(!g)},className:Je.buttonSecondary,children:g?"Hide Users Table":"Get All Users "})]}),c.jsx(al,{children:Qt&&c.jsxs(dt.div,{className:Je.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New User"}),c.jsxs("form",{onSubmit:at,className:"space-y-4",children:[c.jsxs("div",{className:Je.formGrid,children:[c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Grade"}),c.jsx("input",{type:"text",value:ze.grade,onChange:Se=>Ee("grade",Se.target.value),className:Je.formInput,placeholder:"Enter grade"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Class"}),c.jsx("input",{type:"text",value:ze.class,onChange:Se=>Ee("class",Se.target.value),className:Je.formInput,placeholder:"Enter class"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Number"}),c.jsx("input",{type:"text",value:ze.number,onChange:Se=>Ee("number",Se.target.value),className:Je.formInput,placeholder:"Enter number"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Student ID"}),c.jsx("input",{type:"text",value:ze.student_id,onChange:Se=>Ee("student_id",Se.target.value),className:Je.formInput,placeholder:"Enter student ID"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Name"}),c.jsx("input",{type:"text",value:ze.name,onChange:Se=>Ee("name",Se.target.value),className:Je.formInput,placeholder:"Enter name"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Surname"}),c.jsx("input",{type:"text",value:ze.surname,onChange:Se=>Ee("surname",Se.target.value),className:Je.formInput,placeholder:"Enter surname"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Nickname"}),c.jsx("input",{type:"text",value:ze.nickname,onChange:Se=>Ee("nickname",Se.target.value),className:Je.formInput,placeholder:"Enter nickname"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Password"}),c.jsx("input",{type:"password",value:ze.password,onChange:Se=>Ee("password",Se.target.value),className:Je.formInput,placeholder:"Enter password"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"userActive",checked:ze.is_active,onChange:Se=>Ee("is_active",Se.target.checked),className:Je.formCheckbox}),c.jsx("label",{htmlFor:"userActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:Je.formActions,children:[c.jsx(tt,{type:"button",variant:"secondary",onClick:()=>Gt(!1),className:Je.buttonSecondary,children:"Cancel"}),c.jsx(tt,{type:"submit",variant:"primary",className:Je.buttonPrimary,children:"Add User"})]})]})]})}),g&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Users (",Kr.length," of ",Ke.length,")"]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Filter by Grade:"}),c.jsxs("select",{value:N,onChange:Se=>P(Se.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Grades"}),[...new Set(Ke.map(Se=>Se.grade))].sort().map(Se=>c.jsxs("option",{value:Se,children:["Grade ",Se]},Se))]})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:c.jsxs("table",{className:Je.table,children:[c.jsx("thead",{className:Je.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Je.tableHeaderCell,children:"Name"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Grade"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Class"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Student ID"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Number"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Nickname"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Je.tableBody,children:Kr.map((Se,Pt)=>c.jsxs("tr",{className:Je.tableRow,children:[c.jsxs("td",{className:Je.tableCell,children:[Se.name," ",Se.surname]}),c.jsx("td",{className:Je.tableCell,children:Se.grade}),c.jsx("td",{className:Je.tableCell,children:Se.class}),c.jsx("td",{className:Je.tableCell,children:Se.student_id}),c.jsx("td",{className:Je.tableCell,children:Se.number}),c.jsx("td",{className:Je.tableCell,children:Se.nickname}),c.jsx("td",{className:Je.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Ae(Se),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>Ze(Se.student_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Se.id||Pt))})]})})})]})]})]})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsxs(Ht,{className:Je.cardContainer,children:[c.jsxs(Ht.Header,{className:Je.cardHeader,children:[c.jsx(Ht.Title,{className:Je.cardTitle,children:"Teacher Management"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-xs whitespace-nowrap",title:"Check and mark overdue assignments (7+ days old) as inactive",children:"Check Overdue Assignments"}),c.jsx(tt,{variant:"primary",onClick:()=>ir(!0),className:"text-xs whitespace-nowrap",children:"Add Teacher"}),c.jsx(tt,{variant:"secondary",onClick:()=>{_e(),v(!y)},className:"text-xs whitespace-nowrap",children:y?"Hide Teachers Table":"Get All Teachers "})]})]}),c.jsxs(Ht.Body,{className:Je.cardBody,children:[c.jsx(al,{children:Zt&&c.jsxs(dt.div,{className:Je.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Teacher"}),c.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[c.jsxs("div",{className:Je.formGrid,children:[c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Teacher ID"}),c.jsx("input",{type:"text",value:Kt.teacher_id,onChange:Se=>rt("teacher_id",Se.target.value),className:Je.formInput,placeholder:"Enter teacher ID"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Username"}),c.jsx("input",{type:"text",value:Kt.username,onChange:Se=>rt("username",Se.target.value),className:Je.formInput,placeholder:"Enter username"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Password"}),c.jsx("input",{type:"password",value:Kt.password,onChange:Se=>rt("password",Se.target.value),className:Je.formInput,placeholder:"Enter password"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"First Name"}),c.jsx("input",{type:"text",value:Kt.first_name,onChange:Se=>rt("first_name",Se.target.value),className:Je.formInput,placeholder:"Enter first name"})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Last Name"}),c.jsx("input",{type:"text",value:Kt.last_name,onChange:Se=>rt("last_name",Se.target.value),className:Je.formInput,placeholder:"Enter last name"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"teacherActive",checked:Kt.is_active,onChange:Se=>rt("is_active",Se.target.checked),className:Je.formCheckbox}),c.jsx("label",{htmlFor:"teacherActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:Je.formActions,children:[c.jsx(tt,{type:"button",variant:"secondary",onClick:()=>ir(!1),className:Je.buttonSecondary,children:"Cancel"}),c.jsx(tt,{type:"submit",variant:"primary",className:Je.buttonPrimary,children:"Add Teacher"})]})]})]})}),M&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),c.jsx("input",{type:"text",value:A.name,onChange:Se=>F({...A,name:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surname"}),c.jsx("input",{type:"text",value:A.surname,onChange:Se=>F({...A,surname:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),c.jsx("input",{type:"number",value:A.grade,onChange:Se=>F({...A,grade:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),c.jsx("input",{type:"number",value:A.class,onChange:Se=>F({...A,class:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),c.jsx("input",{type:"text",value:A.student_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Student ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),c.jsx("input",{type:"text",value:A.nickname,onChange:Se=>F({...A,nickname:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"text",value:A.password,onChange:Se=>F({...A,password:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_active",checked:A.is_active,onChange:Se=>F({...A,is_active:Se.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),c.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>{j(null),F({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),c.jsx("button",{onClick:Ie,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update User"})]})]})}),y&&c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Teachers (",vt.length,")"]})}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:Je.table,children:[c.jsx("thead",{className:Je.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Je.tableHeaderCell,children:"Teacher ID"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Name"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Username"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Password"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Status"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Created"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Je.tableBody,children:vt.map((Se,Pt)=>c.jsxs("tr",{className:Je.tableRow,children:[c.jsx("td",{className:Je.tableCell,children:Se.teacher_id}),c.jsxs("td",{className:Je.tableCell,children:[Se.first_name," ",Se.last_name]}),c.jsx("td",{className:Je.tableCell,children:Se.username}),c.jsx("td",{className:Je.tableCell,children:Se.password}),c.jsx("td",{className:Je.tableCell,children:c.jsx("span",{className:Se.is_active?Je.statusActive:Je.statusInactive,children:Se.is_active?"Active":"Inactive"})}),c.jsx("td",{className:Je.tableCell,children:new Date(Se.created_at).toLocaleDateString()}),c.jsx("td",{className:Je.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>mt(Se),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>lr(Se.teacher_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Se.teacher_id||Pt))})]})})})]})]})]})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:c.jsxs(Ht,{className:Je.cardContainer,children:[c.jsx(Ht.Header,{className:Je.cardHeader,children:c.jsx(Ht.Title,{className:Je.cardTitle,children:"Subject Management"})}),c.jsxs(Ht.Body,{className:Je.cardBody,children:[c.jsxs("div",{className:Je.buttonGroup,children:[c.jsx(tt,{variant:"primary",onClick:()=>ve(!0),className:Je.buttonPrimary,children:"Add Subject"}),c.jsx(tt,{variant:"secondary",onClick:()=>{ge(),k(!T)},className:Je.buttonSecondary,children:T?"Hide Subjects Table":"Get All Subjects "})]}),c.jsx(al,{children:kr&&c.jsxs(dt.div,{className:Je.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Subject"}),c.jsxs("form",{onSubmit:he,className:"space-y-4",children:[c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Subject Name"}),c.jsx("input",{type:"text",value:Ye.subject,onChange:Se=>bt("subject",Se.target.value),className:Je.formInput,placeholder:"Enter subject name",required:!0}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subject ID will be automatically generated"})]}),c.jsxs("div",{className:Je.formActions,children:[c.jsx(tt,{type:"button",variant:"secondary",onClick:()=>ve(!1),className:Je.buttonSecondary,children:"Cancel"}),c.jsx(tt,{type:"submit",variant:"primary",className:Je.buttonPrimary,children:"Add Subject"})]})]})]})}),L&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Teacher"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher ID"}),c.jsx("input",{type:"text",value:J.teacher_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teacher ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),c.jsx("input",{type:"text",value:J.username,onChange:Se=>ne({...J,username:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"text",value:J.password,onChange:Se=>ne({...J,password:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),c.jsx("input",{type:"text",value:J.first_name,onChange:Se=>ne({...J,first_name:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),c.jsx("input",{type:"text",value:J.last_name,onChange:Se=>ne({...J,last_name:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"teacher_is_active",checked:J.is_active,onChange:Se=>ne({...J,is_active:Se.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),c.jsx("label",{htmlFor:"teacher_is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>{V(null),ne({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),c.jsx("button",{onClick:Tt,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update Teacher"})]})]})}),ee&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Subject"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject ID"}),c.jsx("input",{type:"text",value:B.subject_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name"}),c.jsx("input",{type:"text",value:B.subject,onChange:Se=>Y({...B,subject:Se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>ie(null),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:Ct,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Subject"})]})]})}),T&&c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Subjects (",qe.length,")"]})}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:Je.table,children:[c.jsx("thead",{className:Je.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Je.tableHeaderCell,children:"Subject ID"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Subject Name"}),c.jsx("th",{className:Je.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Je.tableBody,children:qe.map((Se,Pt)=>c.jsxs("tr",{className:Je.tableRow,children:[c.jsx("td",{className:Je.tableCell,children:Se.subject_id}),c.jsx("td",{className:Je.tableCell,children:Se.subject}),c.jsx("td",{className:Je.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Ft(Se),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>fr(Se.subject_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Se.subject_id||Pt))})]})})})]})]})]})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:c.jsxs(Ht,{className:Je.cardContainer,children:[c.jsx(Ht.Header,{className:Je.cardHeader,children:c.jsx(Ht.Title,{className:Je.cardTitle,children:"Test Data Deletion"})}),c.jsxs(Ht.Body,{className:Je.cardBody,children:[c.jsx("div",{className:Je.buttonGroup,children:c.jsx(tt,{variant:"danger",onClick:()=>Me(!0),className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})}),c.jsx(al,{children:Pe&&c.jsxs(dt.div,{className:Je.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delete Test Data by Date Range"}),c.jsxs("form",{onSubmit:Fr,className:"space-y-4",children:[c.jsxs("div",{className:Je.formGrid,children:[c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Start Date *"}),c.jsx("input",{type:"date",value:lt.startDate,onChange:Se=>Er("startDate",Se.target.value),className:Je.formInput,required:!0})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"End Date *"}),c.jsx("input",{type:"date",value:lt.endDate,onChange:Se=>Er("endDate",Se.target.value),className:Je.formInput,required:!0})]})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Teacher ID *"}),c.jsxs("select",{value:lt.teacherId,onChange:Se=>Er("teacherId",Se.target.value),className:Je.formInput,required:!0,children:[c.jsx("option",{value:"",children:"Select a teacher"}),vt.map(Se=>c.jsxs("option",{value:Se.teacher_id,children:[Se.teacher_id," - ",Se.first_name," ",Se.last_name]},Se.teacher_id))]})]}),c.jsxs("div",{className:Je.formGroup,children:[c.jsx("label",{className:Je.formLabel,children:"Subject (Optional)"}),c.jsxs("select",{value:lt.subjectId,onChange:Se=>Er("subjectId",Se.target.value),className:Je.formInput,children:[c.jsx("option",{value:"",children:"All subjects"}),qe.map(Se=>c.jsx("option",{value:Se.subject_id,children:Se.subject},Se.subject_id))]})]}),c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action cannot be undone"}),c.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[c.jsx("p",{children:"This will permanently delete:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1",children:[c.jsx("li",{children:"All test records within the date range"}),c.jsx("li",{children:"All test questions and answers"}),c.jsx("li",{children:"All test results and submissions"}),c.jsx("li",{children:"All test assignments"}),c.jsx("li",{children:"Associated Cloudinary images (for matching tests)"})]})]})]})]})}),c.jsxs("div",{className:Je.formActions,children:[c.jsx(tt,{type:"button",variant:"secondary",onClick:()=>Me(!1),className:Je.buttonSecondary,children:"Cancel"}),c.jsx(tt,{type:"submit",variant:"danger",className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})]})]})]})})]})]})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.85,duration:.5},children:c.jsxs(Ht,{className:Je.cardContainer,children:[c.jsx(Ht.Header,{className:Je.cardHeader,children:c.jsx(Ht.Title,{className:Je.cardTitle,children:"Assignments Management"})}),c.jsxs(Ht.Body,{className:Je.cardBody,children:[c.jsx("div",{className:"mb-4",children:c.jsx(tt,{variant:"primary",onClick:Ce,className:Je.buttonPrimary,children:b?"Hide Assignments Table":"Get All Assignments "})}),b&&c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-sm text-gray-600",children:"Showing all tests (Active and Completed)"})}),b&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Assignments (",Tn.length," of ",I.length,")"]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:q,onChange:Se=>se(Se.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"all",children:"All"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"})]}),c.jsxs("select",{value:W,onChange:Se=>R(Se.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Teachers"}),vt.map(Se=>c.jsxs("option",{value:Se.teacher_id,children:[Se.first_name," ",Se.last_name]},Se.teacher_id))]}),c.jsx("input",{type:"date",value:z,onChange:Se=>G(Se.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),c.jsx("input",{type:"date",value:Q,onChange:Se=>re(Se.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:Je.table,children:[c.jsx("thead",{className:Je.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:Je.tableBody,children:Tn.map((Se,Pt)=>c.jsxs("tr",{className:Je.tableRow,children:[c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:Se.test_name,children:Se.test_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:c.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:Se.test_type.replace("_"," ").toUpperCase()})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:Se.teacher_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:Se.num_questions}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(Se.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-3 text-xs",children:c.jsx("div",{className:"flex space-x-2",children:Se.is_active?c.jsx("button",{onClick:()=>on(Se.test_id,Se.test_type,Se.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-orange-100 text-orange-700 hover:bg-orange-200",children:"Mark Complete"}):c.jsx("button",{onClick:()=>ln(Se.test_id,Se.test_type,Se.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Mark Active"})})})]},`${Se.test_type}-${Se.test_id}-${Pt}`))})]})})})]})]})]})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:c.jsxs(Ht,{className:Je.cardContainer,children:[c.jsx(Ht.Header,{className:Je.cardHeader,children:c.jsx(Ht.Title,{className:Je.cardTitle,children:"Test Management"})}),c.jsxs(Ht.Body,{className:Je.cardBody,children:[c.jsx("div",{className:"mb-4",children:c.jsx(tt,{variant:"primary",onClick:()=>{ke||Yr(),le(!ke)},className:Je.buttonPrimary,children:ke?"Hide Tests Table":"Get All Tests "})}),ke&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Tests (",Ds.length," of ",ye.length,")"]}),Rt.size>0&&c.jsxs(tt,{variant:"danger",onClick:Kn,className:"text-sm px-4 py-2",children:["Delete Marked (",Rt.size,")"]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:Ne,onChange:Se=>We(Se.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Teachers"}),vt.map(Se=>c.jsxs("option",{value:Se.teacher_id,children:[Se.first_name," ",Se.last_name]},Se.teacher_id))]}),c.jsx("input",{type:"date",value:$e,onChange:Se=>Nt(Se.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),c.jsx("input",{type:"date",value:He,onChange:Se=>Et(Se.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:Je.table,children:[c.jsx("thead",{className:Je.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:c.jsx("input",{type:"checkbox",checked:Rt.size===Ds.length&&Ds.length>0,onChange:oi,className:"cursor-pointer"})}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:Je.tableBody,children:Ds.map((Se,Pt)=>c.jsxs("tr",{className:Je.tableRow,children:[c.jsx("td",{className:Je.tableCell,children:c.jsx("input",{type:"checkbox",checked:Rt.has(`${Se.test_type}-${Se.test_id}-${Se.teacher_id}`),onChange:()=>as(Se.test_id,Se.test_type,Se.teacher_id),className:"cursor-pointer"})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:Se.test_name,children:Se.test_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:c.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:Se.test_type.replace("_"," ").toUpperCase()})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:Se.teacher_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:Se.num_questions}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(Se.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-3 text-xs",children:c.jsx("div",{className:"flex space-x-2",children:c.jsx("button",{onClick:()=>Pr(Se.test_id,Se.test_type,Se.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})})]},`${Se.test_type}-${Se.test_id}-${Pt}`))})]})})})]})]})]})}),c.jsx(dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:c.jsxs(Ht,{className:Je.cardContainer,children:[c.jsx(Ht.Header,{className:Je.cardHeader,children:c.jsx(Ht.Title,{className:Je.cardTitle,children:"Debug & Testing"})}),c.jsx(Ht.Body,{className:Je.cardBody})]})})]})})]})},aje=()=>{const{isAdmin:e,getCurrentAdminId:t,logout:r}=Ms(),{get:n}=zl(),{showNotification:s}=si();_.useEffect(()=>{a()},[]);const a=_.useCallback(async()=>{if(console.log(" Initializing Admin Application..."),!e()){console.error(" User is not an admin, redirecting to login"),s("Access Denied: You are not an administrator.","error"),r();return}try{i(),await o(),l(),u(),console.log(" Admin Application initialized successfully"),s("Admin dashboard loaded successfully","success")}catch(d){console.error(" Error initializing admin app:",d),s("Failed to initialize admin dashboard","error")}},[e,t,r,s,n]),i=_.useCallback(()=>{console.log(" Initializing global event listeners...");const d=f=>{f.ctrlKey&&f.key==="k"&&(f.preventDefault(),console.log("Admin search shortcut triggered"))};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),o=_.useCallback(async()=>{try{console.log(" Loading admin data...");const[d,f,h,g]=await Promise.allSettled([n("/.netlify/functions/get-all-users"),n("/.netlify/functions/get-all-teachers"),n("/.netlify/functions/get-all-subjects"),cu.loadAcademicCalendar()]);d.status==="fulfilled"&&d.value?.success&&console.log(" Users loaded:",d.value.users?.length||0),f.status==="fulfilled"&&f.value?.success&&console.log(" Teachers loaded:",f.value.teachers?.length||0),h.status==="fulfilled"&&h.value?.success&&console.log(" Subjects loaded:",h.value.subjects?.length||0),g.status==="fulfilled"&&Array.isArray(g.value)&&console.log(" Academic years loaded:",g.value.length||0),console.log(" Admin data loading completed")}catch(d){throw console.error(" Error loading admin data:",d),d}},[n]),l=_.useCallback(()=>{console.log(" Initializing test deletion functionality..."),console.log(" Test deletion functionality initialized")},[]),u=_.useCallback(()=>{console.log(" Exposing admin functions globally..."),window.toggleSubjectsContent=()=>{const f=document.getElementById("allSubjectsContainer"),h=document.querySelector('button[onclick="toggleSubjectsContent()"]');if(!f){console.error(" allSubjectsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Subjects":"Hide Subjects"},window.showAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm");f&&(f.style.display="block")},window.hideAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm"),h=document.getElementById("newSubjectForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm");f&&(f.style.display="block")},window.hideAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm"),h=document.getElementById("newAcademicYearForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleUsersContent=()=>{const f=document.getElementById("allUsersContainer"),h=document.querySelector('button[onclick="toggleUsersContent()"]');if(!f){console.error(" allUsersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Users":"Hide Users"},window.showAddUserForm=()=>{const f=document.getElementById("addUserForm");f&&(f.style.display="block")},window.hideAddUserForm=()=>{const f=document.getElementById("addUserForm"),h=document.getElementById("newUserForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm");f&&(f.style.display="block")},window.hideAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm"),h=document.getElementById("newTeacherForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleTeachersContent=()=>{const f=document.getElementById("allTeachersContainer"),h=document.querySelector('button[onclick="toggleTeachersContent()"]');if(!f){console.error(" allTeachersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Teachers":"Hide Teachers"},window.toggleTestsContent=()=>{const f=document.getElementById("allTestsContainer"),h=document.querySelector('button[onclick="toggleTestsContent()"]');if(!f){console.error(" allTestsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Tests":"Hide Tests"},window.toggleAssignmentsContent=()=>{const f=document.getElementById("allAssignmentsContainer"),h=document.querySelector('button[onclick="toggleAssignmentsContent()"]');if(!f){console.error(" allAssignmentsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Assignments":"Hide Assignments"},window.toggleResultsContent=()=>{const f=document.getElementById("allResultsContainer"),h=document.querySelector('button[onclick="toggleResultsContent()"]');if(!f){console.error(" allResultsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Results":"Hide Results"};const d={};window.toggleSection=f=>{console.log(` toggleSection called with sectionId: ${f}`);const h=Date.now();if(d[f]&&h-d[f]<300){console.log(` Ignoring rapid successive call for ${f}`);return}d[f]=h;const g=document.getElementById(f);if(!g){console.error(` Section with id '${f}' not found!`);return}const x=g.style.display!=="none";g.style.display=x?"none":"block";const y=document.querySelector(`button[onclick="toggleSection('${f}')"]`);y&&(y.textContent=x?"Show":"Hide")},window.addClickListeners=()=>{console.log(" Adding click listeners to section headers...");const f=document.querySelectorAll(".section-header");console.log(` Found ${f.length} section headers`),f.forEach((h,g)=>{const x=h.textContent.trim();if(console.log(` Processing header ${g+1}:`,x),h.dataset.listenerAdded==="true"){console.log(` Skipping header ${x} - listener already added`);return}h.addEventListener("click",()=>{const y=h.dataset.sectionId;y&&window.toggleSection(y)}),h.dataset.listenerAdded="true",console.log(` Added click listener to header: ${x}`)})},window.makeFieldEditable=f=>{const h=f.textContent;f.dataset.field;const g=document.createElement("input");g.type="text",g.value=h,g.className="editable-input";const x=document.createElement("button");x.textContent="Save",x.className="btn-save",x.onclick=()=>window.saveField(f,g,x,y);const y=document.createElement("button");y.textContent="Cancel",y.className="btn-cancel",y.onclick=()=>{f.textContent=h,f.style.display="block",g.remove(),x.remove(),y.remove()},f.style.display="none",f.parentNode.insertBefore(g,f),f.parentNode.insertBefore(x,f),f.parentNode.insertBefore(y,f)},window.saveField=(f,h,g,x)=>{const y=h.value.trim(),v=f.dataset.field,T=f.dataset.recordId;if(!y){alert("Field cannot be empty");return}console.log(`Saving field ${v} for record ${T} with value: ${y}`),f.textContent=y,f.style.display="block",h.remove(),g.remove(),x.remove()},window.showTestDataDeletion=()=>console.log("showTestDataDeletion called"),window.hideTestDataDeletionForm=()=>console.log("hideTestDataDeletionForm called"),window.loadTeacherGradesClasses=()=>console.log("loadTeacherGradesClasses called"),window.checkTeacherSubjects=()=>console.log("checkTeacherSubjects called"),window.initializeTestDeletion=()=>console.log("initializeTestDeletion called"),window.handleAssignmentDeletion=()=>console.log("handleAssignmentDeletion called"),window.handleTestDataDeletion=()=>console.log("handleTestDataDeletion called"),window.getSelectedGradesClasses=()=>console.log("getSelectedGradesClasses called"),window.hideAssignmentDeletionForm=()=>console.log("hideAssignmentDeletionForm called"),window.addKeyboardAccessibility=()=>console.log("addKeyboardAccessibility called"),window.testToggleSection=()=>console.log("testToggleSection called"),window.testAllToggles=()=>console.log("testAllToggles called"),window.manualToggleTest=()=>console.log("manualToggleTest called"),window.addEditableFieldListeners=()=>console.log("addEditableFieldListeners called"),window.deleteTest=()=>console.log("deleteTest called"),window.testLocalStorage=()=>{console.log("Testing localStorage...");try{localStorage.setItem("test","value");const f=localStorage.getItem("test");return localStorage.removeItem("test"),console.log(" localStorage is working"),!0}catch(f){return console.error(" localStorage error:",f),!1}},window.clearAllLocalStorage=()=>{console.log("Clearing all localStorage..."),localStorage.clear(),console.log(" localStorage cleared")},window.exportLocalStorage=()=>{console.log("Exporting localStorage...");const f={};for(let y=0;y<localStorage.length;y++){const v=localStorage.key(y);f[v]=localStorage.getItem(v)}const h=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),g=URL.createObjectURL(h),x=document.createElement("a");x.href=g,x.download="localStorage-backup.json",x.click(),URL.revokeObjectURL(g)},console.log(" Admin functions exposed globally")},[]);return e()?c.jsx(sje,{}):c.jsxs("div",{className:"admin-error",children:[c.jsx("h2",{children:"Access Denied"}),c.jsx("p",{children:"You don't have permission to access the admin dashboard."}),c.jsx("button",{onClick:r,children:"Return to Login"})]})},Sk=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:n,isLoading:s}=Ms();return s?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(n)?c.jsx(Rp,{to:"/unauthorized",replace:!0}):e:c.jsx(Rp,{to:"/login",replace:!0})},ije=()=>c.jsxs("div",{className:"unauthorized-page",children:[c.jsx("h1",{children:"Access Denied"}),c.jsx("p",{children:"You don't have permission to access this page."})]}),oje=()=>c.jsx(dB,{children:c.jsx(sH,{children:c.jsx(rH,{children:c.jsx(vQ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsx("div",{className:"app",children:c.jsxs(WT,{children:[c.jsx(ua,{path:"/login",element:c.jsx(Lde,{})}),c.jsx(ua,{path:"/unauthorized",element:c.jsx(ije,{})}),c.jsx(ua,{path:"/student/*",element:c.jsx(Sk,{allowedRoles:["student"],children:c.jsx(V0e,{})})}),c.jsx(ua,{path:"/teacher/*",element:c.jsx(Sk,{allowedRoles:["teacher"],children:c.jsx(nje,{})})}),c.jsx(ua,{path:"/admin/*",element:c.jsx(Sk,{allowedRoles:["admin"],children:c.jsx(aje,{})})}),c.jsx(ua,{path:"/",element:c.jsx(Rp,{to:"/login",replace:!0})}),c.jsx(ua,{path:"*",element:c.jsx(Rp,{to:"/login",replace:!0})})]})})})})})});class lje{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data",this.startIntegrityMonitoring()}startIntegrityMonitoring(){setInterval(()=>{this.performIntegrityCheck().catch(t=>{console.error("Integrity check failed:",t)})},3e4)}async performIntegrityCheck(){try{const t=await oa.get();t&&!this.validateTokenFormat(t)&&(console.warn("Integrity check failed - corrupted token detected"),await this.restoreFromBackup()||(console.warn("No valid backup available - clearing authentication"),await this.clearAuth()))}catch(t){console.error("Error during integrity check:",t)}}async getToken(){const t=await oa.get();return t&&!this.validateTokenFormat(t)?(console.warn("Corrupted token detected in storage - clearing it"),this.clearAuth(),null):t}getTokenSync(){return null}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}async setToken(t){if(!this.validateTokenFormat(t))return console.error("Invalid token format - refusing to store corrupted token"),!1;try{this.decodeToken(t);const r=await oa.get();if(r)try{localStorage.setItem(`${this.tokenKey}_backup`,r)}catch{}const n=await oa.set(t);return n?console.log("Token stored successfully with secure storage (hash verification, retry, write verification)"):console.error("Failed to store token - secure storage failed"),n}catch(r){return console.error("Failed to store token - token is corrupted:",r),!1}}async restoreFromBackup(){try{const t=localStorage.getItem(`${this.tokenKey}_backup`);if(t&&this.validateTokenFormat(t))return console.log("Restoring token from backup"),await oa.set(t)}catch(t){console.warn("Failed to restore from backup",t)}return!1}validateTokenFormat(t){if(!t||typeof t!="string")return console.warn("Token validation failed: not a string"),!1;if(!t.includes("."))return console.warn("Token validation failed: not a JWT format"),!1;const r=t.split(".");if(r.length!==3)return console.warn("Token validation failed: not 3 parts"),!1;for(let n=0;n<r.length;n++)try{atob(r[n].replace(/-/g,"+").replace(/_/g,"/"))}catch{return console.warn(`Token validation failed: part ${n} is not valid base64`),!1}return!0}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){return this.setToken(t)?(this.setUserData({role:r}),localStorage.setItem("accessToken",t),!0):(console.error("Failed to set token - token validation failed"),!1)}async isAuthenticated(){const t=await this.getToken();if(!t)return!1;try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),!1;const r=t.split(".");if(r.length!==3)return console.warn("Invalid token format - not 3 parts"),this.clearAuth(),!1;const n=JSON.parse(atob(r[1])),s=Date.now()/1e3;return n.exp>s}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}async clearAuth(){try{await oa.clear(),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey),localStorage.removeItem(`${this.tokenKey}_backup`)}catch(t){console.error("Failed to clear localStorage - possible corruption:",t),this.forceClearAllAuthData()}}forceClearAllAuthData(){["auth_token","accessToken","userRole","userData","refresh_token","auth_token_backup"].forEach(r=>{try{localStorage.removeItem(r)}catch(n){console.warn(`Failed to remove ${r}:`,n)}})}logout(){this.clearAuth(),window.location.href="/login"}async getAuthHeader(){const t=await this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=await this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401)if(await this.refreshToken()){const o=await this.getToken();return s.Authorization=`Bearer ${o}`,fetch(t,{...r,headers:s})}else throw this.logout(),new Error("Authentication failed");return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json(),s=n.accessToken||n.token;return s?await this.setToken(s)?(n.refreshToken&&this.setRefreshToken(n.refreshToken),!0):(console.error("Failed to store refreshed token"),!1):(console.error("Refresh token response missing accessToken"),!1)}else{const n=await r.json().catch(()=>({}));return console.error("Token refresh failed:",r.status,n.message||"Unknown error"),!1}}catch(r){console.error("Error refreshing token:",r)}return!1}async getAccessToken(){return await this.getToken()}decodeToken(t){try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),null;const r=t.split(".");return r.length!==3?(console.warn("Invalid token format - not 3 parts"),this.clearAuth(),null):JSON.parse(atob(r[1]))}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),null}}async init(){return await this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{await this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}}const YX=new lje;window.tokenManager=YX;if(typeof document<"u"){const e=async()=>{await YX.init()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}class XX{constructor(){this.currentRole=null,this.loadedFunctions=new Set,this.blockedFunctions=new Set,this.initialized=!1,this.retryCount=0,this.maxRetries=20}initialize(){if(this.initialized){console.log("[DEBUG] Role-based loader already initialized, skipping...");return}if(this.retryCount>=this.maxRetries){console.warn("[DEBUG] Max retries reached, stopping role-based loader initialization");return}if(this.retryCount++,(this.retryCount%5===1||this.retryCount===this.maxRetries)&&console.log(`[DEBUG] Role-based loader initializing... (attempt ${this.retryCount}/${this.maxRetries})`),console.log("[DEBUG] Token manager available:",!!window.tokenManager),window.tokenManager&&window.tokenManager.isAuthenticated()){const t=window.tokenManager.getUserRole();console.log("[DEBUG] Role from token manager:",t),console.log("[DEBUG] Access token exists:",!!window.tokenManager.getAccessToken()),t?(this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess()):(console.log("[DEBUG] No role found, waiting for role to be set..."),setTimeout(()=>this.initialize(),500))}else console.log("[DEBUG] Token manager not available or not authenticated, waiting..."),setTimeout(()=>this.initialize(),500)}setupRoleBasedAccess(){this.currentRole||(console.warn("No role detected, defaulting to student access"),this.currentRole="student");let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check:",r),t=!1}console.log(`Role-based loader initialized for: ${this.currentRole}${t?" (admin)":""}`),this.loadRoleSpecificFunctions(),this.setupRoleBasedUI(),this.replaceBlockedFunctions()}loadRoleSpecificFunctions(){this.currentRole==="teacher"?this.loadTeacherFunctions():this.currentRole==="student"&&this.loadStudentFunctions()}loadTeacherFunctions(){console.log("Teacher functions already available in main script")}loadStudentFunctions(){console.log("Student functions already available in main script")}loadFunction(t,r){console.log(`Function ${t} already available in main script for ${r}`),this.loadedFunctions.add(t)}setupRoleBasedUI(){let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check in UI:",r),t=!1}this.currentRole==="student"&&this.hideTeacherElements(),this.currentRole==="teacher"&&!t&&this.hideStudentElements()}hideTeacherElements(){[".teacher-cabinet",".test-creation-panel",".grade-management-panel",".class-management-panel",'[data-role="teacher"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}hideStudentElements(){[".student-cabinet",".test-taking-panel",".results-viewing-panel",'[data-role="student"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}replaceBlockedFunctions(){this.currentRole==="student"?this.blockTeacherFunctions():this.currentRole==="teacher"&&this.blockStudentFunctions()}blockTeacherFunctions(){Object.entries({createTest:()=>this.showAccessDenied("teacher"),assignTest:()=>this.showAccessDenied("teacher"),gradeTest:()=>this.showAccessDenied("teacher"),manageClasses:()=>this.showAccessDenied("teacher"),viewAllResults:()=>this.showAccessDenied("teacher")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}blockStudentFunctions(){Object.entries({takeTest:()=>this.showAccessDenied("student"),submitTest:()=>this.showAccessDenied("student"),viewMyResults:()=>this.showAccessDenied("student")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}showAccessDenied(t){const r=`Access denied. This function requires ${t} role.`;console.warn(r),typeof showNotification=="function"?showNotification(r,"warning"):alert(r)}isFunctionBlocked(t){return this.blockedFunctions.has(t)}isFunctionLoaded(t){return this.loadedFunctions.has(t)}getCurrentRole(){return this.currentRole}hasRole(t){return this.currentRole===t}reloadRoleAccess(){this.initialize()}setupAccessAfterLogin(){if(console.log("[DEBUG] Setting up role-based access after login..."),console.log("[DEBUG] Role-based loader will now initialize (no more retry loop before login)"),!window.tokenManager)return console.error("[ERROR] Token manager not available during setupAccessAfterLogin"),!1;if(!window.tokenManager.isAuthenticated())return console.error("[ERROR] User not authenticated during setupAccessAfterLogin"),!1;const t=window.tokenManager.getUserRole();return t?(console.log("[DEBUG] Setting role after login:",t),this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess(),console.log("[DEBUG] Role-based access setup completed successfully for role:",t),!0):(console.error("[ERROR] No role found in token during setupAccessAfterLogin"),!1)}}window.roleBasedLoader=new XX;typeof Zb<"u"&&Zb.exports&&(Zb.exports=XX);const cje=()=>{const e={schemaVersion:"2.0",enhancedFeatures:!0,newUserStructure:!0,newTestStructure:!0};localStorage.setItem("app_init_data",JSON.stringify(e))},uje=()=>{cje(),EJ.createRoot(document.getElementById("root")).render(c.jsx(Ls.StrictMode,{children:c.jsx(oje,{})}))};uje()});export default dje();
